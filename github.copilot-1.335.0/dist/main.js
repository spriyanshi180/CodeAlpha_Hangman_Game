"use strict";var dXe=Object.create;var S_=Object.defineProperty;var sAe=Object.getOwnPropertyDescriptor;var fXe=Object.getOwnPropertyNames;var pXe=Object.getPrototypeOf,mXe=Object.prototype.hasOwnProperty;var iAe=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),oAe=t=>{throw TypeError(t)};var s=(t,e)=>S_(t,"name",{value:e,configurable:!0});var hXe=(t,e)=>()=>(t&&(e=t(t=0)),e);var G=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),f1=(t,e)=>{for(var r in e)S_(t,r,{get:e[r],enumerable:!0})},aAe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fXe(e))!mXe.call(t,i)&&i!==r&&S_(t,i,{get:()=>e[i],enumerable:!(n=sAe(e,i))||n.enumerable});return t};var je=(t,e,r)=>(r=t!=null?dXe(pXe(t)):{},aAe(e||!t||!t.__esModule?S_(r,"default",{value:t,enumerable:!0}):r,t)),gXe=t=>aAe(S_({},"__esModule",{value:!0}),t),Cu=(t,e,r,n)=>{for(var i=n>1?void 0:n?sAe(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(n?a(e,r,i):a(i))||i);return n&&i&&S_(e,r,i),i},Vs=(t,e)=>(r,n)=>e(r,n,t);var JJ=(t,e,r)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&oAe("Object expected");var n,i;r&&(n=e[iAe("asyncDispose")]),n===void 0&&(n=e[iAe("dispose")],r&&(i=n)),typeof n!="function"&&oAe("Object not disposable"),i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([r,n,e])}else r&&t.push([r]);return e},XJ=(t,e,r)=>{var n=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=r?new n(a,e,"An error was suppressed during disposal"):(r=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(r)throw e};return o()};var importMetaUrlShim,f=hXe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var cAe=G(ZJ=>{f();var lAe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");ZJ.encode=function(t){if(0<=t&&t<lAe.length)return lAe[t];throw new TypeError("Must be between 0 and 63: "+t)};ZJ.decode=function(t){var e=65,r=90,n=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=r?t-e:n<=t&&t<=i?t-n+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var rX=G(tX=>{f();var uAe=cAe(),eX=5,dAe=1<<eX,fAe=dAe-1,pAe=dAe;function AXe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(AXe,"toVLQSigned");function yXe(t){var e=(t&1)===1,r=t>>1;return e?-r:r}s(yXe,"fromVLQSigned");tX.encode=s(function(e){var r="",n,i=AXe(e);do n=i&fAe,i>>>=eX,i>0&&(n|=pAe),r+=uAe.encode(n);while(i>0);return r},"base64VLQ_encode");tX.decode=s(function(e,r,n){var i=e.length,o=0,a=0,l,c;do{if(r>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=uAe.decode(e.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));l=!!(c&pAe),c&=fAe,o=o+(c<<a),a+=eX}while(l);n.value=yXe(o),n.rest=r},"base64VLQ_decode")});var B_=G(Nc=>{f();function CXe(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}s(CXe,"getArg");Nc.getArg=CXe;var mAe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,xXe=/^data:.+\,.+$/;function uB(t){var e=t.match(mAe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(uB,"urlParse");Nc.urlParse=uB;function R_(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(R_,"urlGenerate");Nc.urlGenerate=R_;function nX(t){var e=t,r=uB(t);if(r){if(!r.path)return t;e=r.path}for(var n=Nc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=n?"/":"."),r?(r.path=e,R_(r)):e}s(nX,"normalize");Nc.normalize=nX;function hAe(t,e){t===""&&(t="."),e===""&&(e=".");var r=uB(e),n=uB(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),R_(r);if(r||e.match(xXe))return e;if(n&&!n.host&&!n.path)return n.host=e,R_(n);var i=e.charAt(0)==="/"?e:nX(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=i,R_(n)):i}s(hAe,"join");Nc.join=hAe;Nc.isAbsolute=function(t){return t.charAt(0)==="/"||mAe.test(t)};function vXe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}s(vXe,"relative");Nc.relative=vXe;var gAe=function(){var t=Object.create(null);return!("__proto__"in t)}();function AAe(t){return t}s(AAe,"identity");function bXe(t){return yAe(t)?"$"+t:t}s(bXe,"toSetString");Nc.toSetString=gAe?AAe:bXe;function EXe(t){return yAe(t)?t.slice(1):t}s(EXe,"fromSetString");Nc.fromSetString=gAe?AAe:EXe;function yAe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}s(yAe,"isProtoString");function IXe(t,e,r){var n=k_(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:k_(t.name,e.name)}s(IXe,"compareByOriginalPositions");Nc.compareByOriginalPositions=IXe;function TXe(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=k_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:k_(t.name,e.name)}s(TXe,"compareByGeneratedPositionsDeflated");Nc.compareByGeneratedPositionsDeflated=TXe;function k_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(k_,"strcmp");function wXe(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=k_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:k_(t.name,e.name)}s(wXe,"compareByGeneratedPositionsInflated");Nc.compareByGeneratedPositionsInflated=wXe;function _Xe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(_Xe,"parseSourceMapInput");Nc.parseSourceMapInput=_Xe;function SXe(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=uB(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var i=n.path.lastIndexOf("/");i>=0&&(n.path=n.path.substring(0,i+1))}e=hAe(R_(n),e)}return nX(e)}s(SXe,"computeSourceURL");Nc.computeSourceURL=SXe});var sX=G(CAe=>{f();var iX=B_(),oX=Object.prototype.hasOwnProperty,ZE=typeof Map<"u";function p1(){this._array=[],this._set=ZE?new Map:Object.create(null)}s(p1,"ArraySet");p1.fromArray=s(function(e,r){for(var n=new p1,i=0,o=e.length;i<o;i++)n.add(e[i],r);return n},"ArraySet_fromArray");p1.prototype.size=s(function(){return ZE?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");p1.prototype.add=s(function(e,r){var n=ZE?e:iX.toSetString(e),i=ZE?this.has(e):oX.call(this._set,n),o=this._array.length;(!i||r)&&this._array.push(e),i||(ZE?this._set.set(e,o):this._set[n]=o)},"ArraySet_add");p1.prototype.has=s(function(e){if(ZE)return this._set.has(e);var r=iX.toSetString(e);return oX.call(this._set,r)},"ArraySet_has");p1.prototype.indexOf=s(function(e){if(ZE){var r=this._set.get(e);if(r>=0)return r}else{var n=iX.toSetString(e);if(oX.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");p1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");p1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");CAe.ArraySet=p1});var bAe=G(vAe=>{f();var xAe=B_();function RXe(t,e){var r=t.generatedLine,n=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return n>r||n==r&&o>=i||xAe.compareByGeneratedPositionsInflated(t,e)<=0}s(RXe,"generatedPositionAfter");function U7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(U7,"MappingList");U7.prototype.unsortedForEach=s(function(e,r){this._array.forEach(e,r)},"MappingList_forEach");U7.prototype.add=s(function(e){RXe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");U7.prototype.toArray=s(function(){return this._sorted||(this._array.sort(xAe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");vAe.MappingList=U7});var aX=G(EAe=>{f();var dB=rX(),Ga=B_(),q7=sX().ArraySet,kXe=bAe().MappingList;function vf(t){t||(t={}),this._file=Ga.getArg(t,"file",null),this._sourceRoot=Ga.getArg(t,"sourceRoot",null),this._skipValidation=Ga.getArg(t,"skipValidation",!1),this._sources=new q7,this._names=new q7,this._mappings=new kXe,this._sourcesContents=null}s(vf,"SourceMapGenerator");vf.prototype._version=3;vf.fromSourceMap=s(function(e){var r=e.sourceRoot,n=new vf({file:e.file,sourceRoot:r});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,r!=null&&(o.source=Ga.relative(r,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),n.addMapping(o)}),e.sources.forEach(function(i){var o=i;r!==null&&(o=Ga.relative(r,i)),n._sources.has(o)||n._sources.add(o);var a=e.sourceContentFor(i);a!=null&&n.setSourceContent(i,a)}),n},"SourceMapGenerator_fromSourceMap");vf.prototype.addMapping=s(function(e){var r=Ga.getArg(e,"generated"),n=Ga.getArg(e,"original",null),i=Ga.getArg(e,"source",null),o=Ga.getArg(e,"name",null);this._skipValidation||this._validateMapping(r,n,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:i,name:o})},"SourceMapGenerator_addMapping");vf.prototype.setSourceContent=s(function(e,r){var n=e;this._sourceRoot!=null&&(n=Ga.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Ga.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[Ga.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");vf.prototype.applySourceMap=s(function(e,r,n){var i=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Ga.relative(o,i));var a=new q7,l=new q7;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,n!=null&&(c.source=Ga.join(n,c.source)),o!=null&&(c.source=Ga.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(n!=null&&(c=Ga.join(n,c)),o!=null&&(c=Ga.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");vf.prototype._validateMapping=s(function(e,r,n,i){if(r&&typeof r.line!="number"&&typeof r.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!i)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:i}))}},"SourceMapGenerator_validateMapping");vf.prototype._serializeMappings=s(function(){for(var e=0,r=1,n=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==r)for(e=0;u.generatedLine!==r;)c+=";",r++;else if(h>0){if(!Ga.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=dB.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=dB.encode(p-a),a=p,c+=dB.encode(u.originalLine-1-i),i=u.originalLine-1,c+=dB.encode(u.originalColumn-n),n=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=dB.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");vf.prototype._generateSourcesContent=s(function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=Ga.relative(r,n));var i=Ga.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");vf.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");vf.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");EAe.SourceMapGenerator=vf});var IAe=G(eI=>{f();eI.GREATEST_LOWER_BOUND=1;eI.LEAST_UPPER_BOUND=2;function lX(t,e,r,n,i,o){var a=Math.floor((e-t)/2)+t,l=i(r,n[a],!0);return l===0?a:l>0?e-a>1?lX(a,e,r,n,i,o):o==eI.LEAST_UPPER_BOUND?e<n.length?e:-1:a:a-t>1?lX(t,a,r,n,i,o):o==eI.LEAST_UPPER_BOUND?a:t<0?-1:t}s(lX,"recursiveSearch");eI.search=s(function(e,r,n,i){if(r.length===0)return-1;var o=lX(-1,r.length,e,r,n,i||eI.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&n(r[o],r[o-1],!0)===0;)--o;return o},"search")});var wAe=G(TAe=>{f();function cX(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}s(cX,"swap");function BXe(t,e){return Math.round(t+Math.random()*(e-t))}s(BXe,"randomIntInRange");function uX(t,e,r,n){if(r<n){var i=BXe(r,n),o=r-1;cX(t,i,n);for(var a=t[n],l=r;l<n;l++)e(t[l],a)<=0&&(o+=1,cX(t,o,l));cX(t,o+1,l);var c=o+1;uX(t,e,r,c-1),uX(t,e,c+1,n)}}s(uX,"doQuickSort");TAe.quickSort=function(t,e){uX(t,e,0,t.length-1)}});var SAe=G(W7=>{f();var wr=B_(),dX=IAe(),D_=sX().ArraySet,DXe=rX(),fB=wAe().quickSort;function as(t,e){var r=t;return typeof t=="string"&&(r=wr.parseSourceMapInput(t)),r.sections!=null?new tm(r,e):new sc(r,e)}s(as,"SourceMapConsumer");as.fromSourceMap=function(t,e){return sc.fromSourceMap(t,e)};as.prototype._version=3;as.prototype.__generatedMappings=null;Object.defineProperty(as.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});as.prototype.__originalMappings=null;Object.defineProperty(as.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});as.prototype._charIsMappingSeparator=s(function(e,r){var n=e.charAt(r);return n===";"||n===","},"SourceMapConsumer_charIsMappingSeparator");as.prototype._parseMappings=s(function(e,r){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");as.GENERATED_ORDER=1;as.ORIGINAL_ORDER=2;as.GREATEST_LOWER_BOUND=1;as.LEAST_UPPER_BOUND=2;as.prototype.eachMapping=s(function(e,r,n){var i=r||null,o=n||as.GENERATED_ORDER,a;switch(o){case as.GENERATED_ORDER:a=this._generatedMappings;break;case as.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=wr.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");as.prototype.allGeneratedPositionsFor=s(function(e){var r=wr.getArg(e,"line"),n={source:wr.getArg(e,"source"),originalLine:r,originalColumn:wr.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var i=[],o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",wr.compareByOriginalPositions,dX.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:wr.getArg(a,"generatedLine",null),column:wr.getArg(a,"generatedColumn",null),lastColumn:wr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===r&&a.originalColumn==c;)i.push({line:wr.getArg(a,"generatedLine",null),column:wr.getArg(a,"generatedColumn",null),lastColumn:wr.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");W7.SourceMapConsumer=as;function sc(t,e){var r=t;typeof t=="string"&&(r=wr.parseSourceMapInput(t));var n=wr.getArg(r,"version"),i=wr.getArg(r,"sources"),o=wr.getArg(r,"names",[]),a=wr.getArg(r,"sourceRoot",null),l=wr.getArg(r,"sourcesContent",null),c=wr.getArg(r,"mappings"),u=wr.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);a&&(a=wr.normalize(a)),i=i.map(String).map(wr.normalize).map(function(d){return a&&wr.isAbsolute(a)&&wr.isAbsolute(d)?wr.relative(a,d):d}),this._names=D_.fromArray(o.map(String),!0),this._sources=D_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return wr.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(sc,"BasicSourceMapConsumer");sc.prototype=Object.create(as.prototype);sc.prototype.consumer=as;sc.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=wr.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};sc.fromSourceMap=s(function(e,r){var n=Object.create(sc.prototype),i=n._names=D_.fromArray(e._names.toArray(),!0),o=n._sources=D_.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(h){return wr.computeSourceURL(n.sourceRoot,h,r)});for(var a=e._mappings.toArray().slice(),l=n.__generatedMappings=[],c=n.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new _Ae;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return fB(n.__originalMappings,wr.compareByOriginalPositions),n},"SourceMapConsumer_fromSourceMap");sc.prototype._version=3;Object.defineProperty(sc.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function _Ae(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(_Ae,"Mapping");sc.prototype._parseMappings=s(function(e,r){for(var n=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")n++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new _Ae,y.generatedLine=n,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)DXe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}fB(g,wr.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,fB(h,wr.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");sc.prototype._findMapping=s(function(e,r,n,i,o,a){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return dX.search(e,r,o,a)},"SourceMapConsumer_findMapping");sc.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");sc.prototype.originalPositionFor=s(function(e){var r={generatedLine:wr.getArg(e,"line"),generatedColumn:wr.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",wr.compareByGeneratedPositionsDeflated,wr.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(n>=0){var i=this._generatedMappings[n];if(i.generatedLine===r.generatedLine){var o=wr.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=wr.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=wr.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:wr.getArg(i,"originalLine",null),column:wr.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");sc.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");sc.prototype.sourceContentFor=s(function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var i=e;this.sourceRoot!=null&&(i=wr.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=wr.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(r)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");sc.prototype.generatedPositionFor=s(function(e){var r=wr.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:wr.getArg(e,"line"),originalColumn:wr.getArg(e,"column")},i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",wr.compareByOriginalPositions,wr.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===n.source)return{line:wr.getArg(o,"generatedLine",null),column:wr.getArg(o,"generatedColumn",null),lastColumn:wr.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");W7.BasicSourceMapConsumer=sc;function tm(t,e){var r=t;typeof t=="string"&&(r=wr.parseSourceMapInput(t));var n=wr.getArg(r,"version"),i=wr.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new D_,this._names=new D_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=wr.getArg(a,"offset"),c=wr.getArg(l,"line"),u=wr.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new as(wr.getArg(a,"map"),e)}})}s(tm,"IndexedSourceMapConsumer");tm.prototype=Object.create(as.prototype);tm.prototype.constructor=as;tm.prototype._version=3;Object.defineProperty(tm.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t},"get")});tm.prototype.originalPositionFor=s(function(e){var r={generatedLine:wr.getArg(e,"line"),generatedColumn:wr.getArg(e,"column")},n=dX.search(r,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[n];return i?i.consumer.originalPositionFor({line:r.generatedLine-(i.generatedOffset.generatedLine-1),column:r.generatedColumn-(i.generatedOffset.generatedLine===r.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");tm.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");tm.prototype.sourceContentFor=s(function(e,r){for(var n=0;n<this._sections.length;n++){var i=this._sections[n],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");tm.prototype.generatedPositionFor=s(function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(wr.getArg(e,"source"))!==-1){var i=n.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(n.generatedOffset.generatedLine-1),column:i.column+(n.generatedOffset.generatedLine===i.line?n.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");tm.prototype._parseMappings=s(function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var i=this._sections[n],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=wr.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}fB(this.__generatedMappings,wr.compareByGeneratedPositionsDeflated),fB(this.__originalMappings,wr.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");W7.IndexedSourceMapConsumer=tm});var kAe=G(RAe=>{f();var PXe=aX().SourceMapGenerator,G7=B_(),NXe=/(\r?\n)/,LXe=10,P_="$$$isSourceNode$$$";function r0(t,e,r,n,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=i??null,this[P_]=!0,n!=null&&this.add(n)}s(r0,"SourceNode");r0.fromStringWithSourceMap=s(function(e,r,n){var i=new r0,o=e.split(NXe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return r.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),r.sources.forEach(function(m){var h=r.sourceContentFor(m);h!=null&&(n!=null&&(m=G7.join(n,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=n?G7.join(n,m.source):m.source;i.add(new r0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");r0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[P_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");r0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[P_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");r0.prototype.walk=s(function(e){for(var r,n=0,i=this.children.length;n<i;n++)r=this.children[n],r[P_]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");r0.prototype.join=s(function(e){var r,n,i=this.children.length;if(i>0){for(r=[],n=0;n<i-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this},"SourceNode_join");r0.prototype.replaceRight=s(function(e,r){var n=this.children[this.children.length-1];return n[P_]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this},"SourceNode_replaceRight");r0.prototype.setSourceContent=s(function(e,r){this.sourceContents[G7.toSetString(e)]=r},"SourceNode_setSourceContent");r0.prototype.walkSourceContents=s(function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][P_]&&this.children[r].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),r=0,n=i.length;r<n;r++)e(G7.fromSetString(i[r]),this.sourceContents[i[r]])},"SourceNode_walkSourceContents");r0.prototype.toString=s(function(){var e="";return this.walk(function(r){e+=r}),e},"SourceNode_toString");r0.prototype.toStringWithSourceMap=s(function(e){var r={code:"",line:1,column:0},n=new PXe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){r.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(n.addMapping({generated:{line:r.line,column:r.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===LXe?(r.line++,r.column=0,p+1===m?(o=null,i=!1):i&&n.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:r.line,column:r.column},name:d.name})):r.column++}),this.walkSourceContents(function(u,d){n.setSourceContent(u,d)}),{code:r.code,map:n}},"SourceNode_toStringWithSourceMap");RAe.SourceNode=r0});var BAe=G(H7=>{f();H7.SourceMapGenerator=aX().SourceMapGenerator;H7.SourceMapConsumer=SAe().SourceMapConsumer;H7.SourceNode=kAe().SourceNode});var PAe=G((L$t,DAe)=>{f();var FXe=Object.prototype.toString,fX=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function MXe(t){return FXe.call(t).slice(8,-1)==="ArrayBuffer"}s(MXe,"isArrayBuffer");function QXe(t,e,r){e>>>=0;var n=t.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(r===void 0)r=n;else if(r>>>=0,r>n)throw new RangeError("'length' is out of bounds");return fX?Buffer.from(t.slice(e,e+r)):new Buffer(new Uint8Array(t.slice(e,e+r)))}s(QXe,"fromArrayBuffer");function OXe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return fX?Buffer.from(t,e):new Buffer(t,e)}s(OXe,"fromString");function UXe(t,e,r){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return MXe(t)?QXe(t,e,r):typeof t=="string"?OXe(t,e):fX?Buffer.from(t):new Buffer(t)}s(UXe,"bufferFrom");DAe.exports=UXe});var qAe=G((rI,gX)=>{f();var qXe=BAe().SourceMapConsumer,pX=require("path"),Zh;try{Zh=require("fs"),(!Zh.existsSync||!Zh.readFileSync)&&(Zh=null)}catch{}var WXe=PAe();function NAe(t,e){return t.require(e)}s(NAe,"dynamicRequire");var LAe=!1,FAe=!1,mX=!1,pB="auto",tI={},mB={},GXe=/^data:application\/json[^,]+base64,/,yx=[],Cx=[];function AX(){return pB==="browser"?!0:pB==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(AX,"isInBrowser");function HXe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(HXe,"hasGlobalProcessEventEmitter");function jXe(){return typeof process=="object"&&process!==null?process.version:""}s(jXe,"globalProcessVersion");function VXe(){if(typeof process=="object"&&process!==null)return process.stderr}s(VXe,"globalProcessStderr");function $Xe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s($Xe,"globalProcessExit");function j7(t){return function(e){for(var r=0;r<t.length;r++){var n=t[r](e);if(n)return n}return null}}s(j7,"handlerExec");var yX=j7(yx);yx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(n,i){return i?"":"/"})),t in tI)return tI[t];var e="";try{if(Zh)Zh.existsSync(t)&&(e=Zh.readFileSync(t,"utf8"));else{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),r.readyState===4&&r.status===200&&(e=r.responseText)}}catch{}return tI[t]=e});function hX(t,e){if(!t)return e;var r=pX.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),i=n?n[0]:"",o=r.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+pX.resolve(r.slice(i.length),e).replace(/\\/g,"/")):i+pX.resolve(r.slice(i.length),e)}s(hX,"supportRelativeURL");function zXe(t){var e;if(AX())try{var r=new XMLHttpRequest;r.open("GET",t,!1),r.send(null),e=r.readyState===4?r.responseText:null;var n=r.getResponseHeader("SourceMap")||r.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=yX(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(zXe,"retrieveSourceMapURL");var CX=j7(Cx);Cx.push(function(t){var e=zXe(t);if(!e)return null;var r;if(GXe.test(e)){var n=e.slice(e.indexOf(",")+1);r=WXe(n,"base64").toString(),e=t}else e=hX(t,e),r=yX(e);return r?{url:e,map:r}:null});function xX(t){var e=mB[t.source];if(!e){var r=CX(t.source);r?(e=mB[t.source]={url:r.url,map:new qXe(r.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=hX(e.url,i);tI[l]=a}})):e=mB[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(t);if(n.source!==null)return n.source=hX(e.url,n.source),n}return t}s(xX,"mapSourcePosition");function QAe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var r=xX({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+r.source+":"+r.line+":"+(r.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+QAe(e[2])+")":t}s(QAe,"mapEvalOrigin");function YXe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var r=this.getLineNumber();if(r!=null){e+=":"+r;var n=this.getColumnNumber();n&&(e+=":"+n)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(YXe,"CallSiteToString");function MAe(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(r){e[r]=/^(?:is|get)/.test(r)?function(){return t[r].call(t)}:t[r]}),e.toString=YXe,e}s(MAe,"cloneCallSite");function OAe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var r=t.getFileName()||t.getScriptNameOrSourceURL();if(r){var n=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(jXe())?0:62;n===1&&i>a&&!AX()&&!t.isEval()&&(i-=a);var l=xX({source:r,line:n,column:i});e.curPosition=l,t=MAe(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=QAe(u),t=MAe(t),t.getEvalOrigin=function(){return u}),t}s(OAe,"wrapCallSite");function KXe(t,e){mX&&(tI={},mB={});for(var r=t.name||"Error",n=t.message||"",i=r+": "+n,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+OAe(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(KXe,"prepareStackTrace");function UAe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var r=e[1],n=+e[2],i=+e[3],o=tI[r];if(!o&&Zh&&Zh.existsSync(r))try{o=Zh.readFileSync(r,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[n-1];if(a)return r+":"+n+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(UAe,"getErrorSource");function JXe(t){var e=UAe(t),r=VXe();r&&r._handle&&r._handle.setBlocking&&r._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),$Xe(1)}s(JXe,"printErrorAndExit");function XXe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var r=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(r&&!n)return JXe(arguments[1])}return t.apply(this,arguments)}}s(XXe,"shimEmitUncaughtException");var ZXe=yx.slice(0),eZe=Cx.slice(0);rI.wrapCallSite=OAe;rI.getErrorSource=UAe;rI.mapSourcePosition=xX;rI.retrieveSourceMap=CX;rI.install=function(t){if(t=t||{},t.environment&&(pB=t.environment,["node","browser","auto"].indexOf(pB)===-1))throw new Error("environment "+pB+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(yx.length=0),yx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Cx.length=0),Cx.unshift(t.retrieveSourceMap)),t.hookRequire&&!AX()){var e=NAe(gX,"module"),r=e.prototype._compile;r.__sourceMapSupport||(e.prototype._compile=function(o,a){return tI[a]=o,mB[a]=void 0,r.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(mX||(mX="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),LAe||(LAe=!0,Error.prepareStackTrace=KXe),!FAe){var n="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=NAe(gX,"worker_threads");i.isMainThread===!1&&(n=!1)}catch{}n&&HXe()&&(FAe=!0,XXe())}};rI.resetRetrieveHandlers=function(){yx.length=0,Cx.length=0,yx=ZXe.slice(0),Cx=eZe.slice(0),CX=j7(Cx),yX=j7(yx)}});var Di=G(($7,GAe)=>{f();(function(t,e){typeof $7=="object"?GAe.exports=$7=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})($7,function(){var t=t||function(e,r){var n;if(typeof window<"u"&&window.crypto&&(n=window.crypto),typeof self<"u"&&self.crypto&&(n=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(n=globalThis.crypto),!n&&typeof window<"u"&&window.msCrypto&&(n=window.msCrypto),!n&&typeof global<"u"&&global.crypto&&(n=global.crypto),!n&&typeof require=="function")try{n=require("crypto")}catch{}var i=s(function(){if(n){if(typeof n.getRandomValues=="function")try{return n.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof n.randomBytes=="function")try{return n.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=r?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,B=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<B;N++){var q=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=q<<24-(k+N)%4*8}else for(var te=0;te<B;te+=4)E[k+te>>>2]=_[te>>>2];return this.sigBytes+=B,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],B=0;B<_;B++){var N=E[B>>>2]>>>24-B%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,B=_.sigBytes,N=this.blockSize,q=N*4,te=B/q;b?te=e.ceil(te):te=e.max((te|0)-this._minBufferSize,0);var me=te*N,oe=e.min(me*4,B);if(me){for(var H=0;H<me;H+=N)this._doProcessBlock(k,H);E=k.splice(0,me),_.sigBytes-=oe}return new u.init(E,oe)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var CB=G((z7,HAe)=>{f();(function(t,e){typeof z7=="object"?HAe.exports=z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(z7,function(t){return function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var VAe=G((Y7,jAe)=>{f();(function(t,e){typeof Y7=="object"?jAe.exports=Y7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Y7,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})});var zAe=G((K7,$Ae)=>{f();(function(t,e){typeof K7=="object"?$Ae.exports=K7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(K7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return n.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return n.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var vx=G((J7,YAe)=>{f();(function(t,e){typeof J7=="object"?YAe.exports=J7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(J7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var JAe=G((X7,KAe)=>{f();(function(t,e){typeof X7=="object"?KAe.exports=X7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(X7,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return n.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var bx=G((Z7,XAe)=>{f();(function(t,e){typeof Z7=="object"?XAe.exports=Z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Z7,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],B=h[g+2],N=h[g+3],q=h[g+4],te=h[g+5],me=h[g+6],oe=h[g+7],H=h[g+8],O=h[g+9],le=h[g+10],ie=h[g+11],j=h[g+12],W=h[g+13],Y=h[g+14],ee=h[g+15],pe=E[0],re=E[1],fe=E[2],he=E[3];pe=u(pe,re,fe,he,_,7,l[0]),he=u(he,pe,re,fe,k,12,l[1]),fe=u(fe,he,pe,re,B,17,l[2]),re=u(re,fe,he,pe,N,22,l[3]),pe=u(pe,re,fe,he,q,7,l[4]),he=u(he,pe,re,fe,te,12,l[5]),fe=u(fe,he,pe,re,me,17,l[6]),re=u(re,fe,he,pe,oe,22,l[7]),pe=u(pe,re,fe,he,H,7,l[8]),he=u(he,pe,re,fe,O,12,l[9]),fe=u(fe,he,pe,re,le,17,l[10]),re=u(re,fe,he,pe,ie,22,l[11]),pe=u(pe,re,fe,he,j,7,l[12]),he=u(he,pe,re,fe,W,12,l[13]),fe=u(fe,he,pe,re,Y,17,l[14]),re=u(re,fe,he,pe,ee,22,l[15]),pe=d(pe,re,fe,he,k,5,l[16]),he=d(he,pe,re,fe,me,9,l[17]),fe=d(fe,he,pe,re,ie,14,l[18]),re=d(re,fe,he,pe,_,20,l[19]),pe=d(pe,re,fe,he,te,5,l[20]),he=d(he,pe,re,fe,le,9,l[21]),fe=d(fe,he,pe,re,ee,14,l[22]),re=d(re,fe,he,pe,q,20,l[23]),pe=d(pe,re,fe,he,O,5,l[24]),he=d(he,pe,re,fe,Y,9,l[25]),fe=d(fe,he,pe,re,N,14,l[26]),re=d(re,fe,he,pe,H,20,l[27]),pe=d(pe,re,fe,he,W,5,l[28]),he=d(he,pe,re,fe,B,9,l[29]),fe=d(fe,he,pe,re,oe,14,l[30]),re=d(re,fe,he,pe,j,20,l[31]),pe=p(pe,re,fe,he,te,4,l[32]),he=p(he,pe,re,fe,H,11,l[33]),fe=p(fe,he,pe,re,ie,16,l[34]),re=p(re,fe,he,pe,Y,23,l[35]),pe=p(pe,re,fe,he,k,4,l[36]),he=p(he,pe,re,fe,q,11,l[37]),fe=p(fe,he,pe,re,oe,16,l[38]),re=p(re,fe,he,pe,le,23,l[39]),pe=p(pe,re,fe,he,W,4,l[40]),he=p(he,pe,re,fe,_,11,l[41]),fe=p(fe,he,pe,re,N,16,l[42]),re=p(re,fe,he,pe,me,23,l[43]),pe=p(pe,re,fe,he,O,4,l[44]),he=p(he,pe,re,fe,j,11,l[45]),fe=p(fe,he,pe,re,ee,16,l[46]),re=p(re,fe,he,pe,B,23,l[47]),pe=m(pe,re,fe,he,_,6,l[48]),he=m(he,pe,re,fe,oe,10,l[49]),fe=m(fe,he,pe,re,Y,15,l[50]),re=m(re,fe,he,pe,te,21,l[51]),pe=m(pe,re,fe,he,j,6,l[52]),he=m(he,pe,re,fe,N,10,l[53]),fe=m(fe,he,pe,re,le,15,l[54]),re=m(re,fe,he,pe,k,21,l[55]),pe=m(pe,re,fe,he,H,6,l[56]),he=m(he,pe,re,fe,ee,10,l[57]),fe=m(fe,he,pe,re,me,15,l[58]),re=m(re,fe,he,pe,W,21,l[59]),pe=m(pe,re,fe,he,q,6,l[60]),he=m(he,pe,re,fe,ie,10,l[61]),fe=m(fe,he,pe,re,B,15,l[62]),re=m(re,fe,he,pe,O,21,l[63]),E[0]=E[0]+pe|0,E[1]=E[1]+re|0,E[2]=E[2]+fe|0,E[3]=E[3]+he|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,B=0;B<4;B++){var N=k[B];k[B]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),r.MD5=o._createHelper(c),r.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var vX=G((eL,ZAe)=>{f();(function(t,e){typeof eL=="object"?ZAe.exports=eL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(eL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var rL=G((tL,e1e)=>{f();(function(t,e){typeof tL=="object"?e1e.exports=tL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(tL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],B=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var q=u[N-15],te=(q<<25|q>>>7)^(q<<14|q>>>18)^q>>>3,me=u[N-2],oe=(me<<15|me>>>17)^(me<<13|me>>>19)^me>>>10;u[N]=te+u[N-7]+oe+u[N-16]}var H=E&_^~E&k,O=g&y^g&v^y&v,le=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),j=B+ie+H+c[N]+u[N],W=le+O;B=k,k=_,_=E,E=b+j|0,b=v,v=y,y=g,g=j+W|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+B|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});r.SHA256=o._createHelper(d),r.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var r1e=G((nL,t1e)=>{f();(function(t,e,r){typeof nL=="object"?t1e.exports=nL=e(Di(),rL()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(nL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var bX=G((iL,n1e)=>{f();(function(t,e,r){typeof iL=="object"?n1e.exports=iL=e(Di(),CB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(iL,function(t){return function(){var e=t,r=e.lib,n=r.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=n.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],B=g[6],N=g[7],q=y.high,te=y.low,me=v.high,oe=v.low,H=b.high,O=b.low,le=E.high,ie=E.low,j=_.high,W=_.low,Y=k.high,ee=k.low,pe=B.high,re=B.low,fe=N.high,he=N.low,Ne=q,Re=te,Je=me,Me=oe,pt=H,Tt=O,Ct=le,bt=ie,ce=j,Oe=W,ye=Y,tt=ee,X=pe,ne=re,We=fe,Pe=he,be=0;be<80;be++){var ze,it,gt=d[be];if(be<16)it=gt.high=m[h+be*2]|0,ze=gt.low=m[h+be*2+1]|0;else{var Ot=d[be-15],lr=Ot.high,Lt=Ot.low,Gr=(lr>>>1|Lt<<31)^(lr>>>8|Lt<<24)^lr>>>7,Yr=(Lt>>>1|lr<<31)^(Lt>>>8|lr<<24)^(Lt>>>7|lr<<25),hn=d[be-2],Ae=hn.high,Ge=hn.low,ut=(Ae>>>19|Ge<<13)^(Ae<<3|Ge>>>29)^Ae>>>6,yt=(Ge>>>19|Ae<<13)^(Ge<<3|Ae>>>29)^(Ge>>>6|Ae<<26),Xt=d[be-7],Gt=Xt.high,Ar=Xt.low,xr=d[be-16],jt=xr.high,rr=xr.low;ze=Yr+Ar,it=Gr+Gt+(ze>>>0<Yr>>>0?1:0),ze=ze+yt,it=it+ut+(ze>>>0<yt>>>0?1:0),ze=ze+rr,it=it+jt+(ze>>>0<rr>>>0?1:0),gt.high=it,gt.low=ze}var Jt=ce&ye^~ce&X,Ir=Oe&tt^~Oe&ne,Nr=Ne&Je^Ne&pt^Je&pt,Kr=Re&Me^Re&Tt^Me&Tt,Wn=(Ne>>>28|Re<<4)^(Ne<<30|Re>>>2)^(Ne<<25|Re>>>7),Jn=(Re>>>28|Ne<<4)^(Re<<30|Ne>>>2)^(Re<<25|Ne>>>7),Qn=(ce>>>14|Oe<<18)^(ce>>>18|Oe<<14)^(ce<<23|Oe>>>9),$n=(Oe>>>14|ce<<18)^(Oe>>>18|ce<<14)^(Oe<<23|ce>>>9),rn=u[be],zn=rn.high,_e=rn.low,U=Pe+$n,ge=We+Qn+(U>>>0<Pe>>>0?1:0),U=U+Ir,ge=ge+Jt+(U>>>0<Ir>>>0?1:0),U=U+_e,ge=ge+zn+(U>>>0<_e>>>0?1:0),U=U+ze,ge=ge+it+(U>>>0<ze>>>0?1:0),ve=Jn+Kr,Z=Wn+Nr+(ve>>>0<Jn>>>0?1:0);We=X,Pe=ne,X=ye,ne=tt,ye=ce,tt=Oe,Oe=bt+U|0,ce=Ct+ge+(Oe>>>0<bt>>>0?1:0)|0,Ct=pt,bt=Tt,pt=Je,Tt=Me,Je=Ne,Me=Re,Re=U+ve|0,Ne=ge+Z+(Re>>>0<U>>>0?1:0)|0}te=y.low=te+Re,y.high=q+Ne+(te>>>0<Re>>>0?1:0),oe=v.low=oe+Me,v.high=me+Je+(oe>>>0<Me>>>0?1:0),O=b.low=O+Tt,b.high=H+pt+(O>>>0<Tt>>>0?1:0),ie=E.low=ie+bt,E.high=le+Ct+(ie>>>0<bt>>>0?1:0),W=_.low=W+Oe,_.high=j+ce+(W>>>0<Oe>>>0?1:0),ee=k.low=ee+tt,k.high=Y+ye+(ee>>>0<tt>>>0?1:0),re=B.low=re+ne,B.high=pe+X+(re>>>0<ne>>>0?1:0),he=N.low=he+Pe,N.high=fe+We+(he>>>0<Pe>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=n.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=n._createHelper(p),e.HmacSHA512=n._createHmacHelper(p)}(),t.SHA512})});var o1e=G((oL,i1e)=>{f();(function(t,e,r){typeof oL=="object"?i1e.exports=oL=e(Di(),CB(),bX()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(oL,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var a1e=G((sL,s1e)=>{f();(function(t,e,r){typeof sL=="object"?s1e.exports=sL=e(Di(),CB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(sL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,l=a.Word,c=r.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var B=0,N=0,q=0;q<7;q++){if(_&1){var te=(1<<q)-1;te<32?N^=1<<te:B^=1<<te-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(B,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var B=v[E];B.high^=k,B.low^=_}for(var N=0;N<24;N++){for(var q=0;q<5;q++){for(var te=0,me=0,oe=0;oe<5;oe++){var B=v[q+5*oe];te^=B.high,me^=B.low}var H=m[q];H.high=te,H.low=me}for(var q=0;q<5;q++)for(var O=m[(q+4)%5],le=m[(q+1)%5],ie=le.high,j=le.low,te=O.high^(ie<<1|j>>>31),me=O.low^(j<<1|ie>>>31),oe=0;oe<5;oe++){var B=v[q+5*oe];B.high^=te,B.low^=me}for(var W=1;W<25;W++){var te,me,B=v[W],Y=B.high,ee=B.low,pe=u[W];pe<32?(te=Y<<pe|ee>>>32-pe,me=ee<<pe|Y>>>32-pe):(te=ee<<pe-32|Y>>>64-pe,me=Y<<pe-32|ee>>>64-pe);var re=m[d[W]];re.high=te,re.low=me}var fe=m[0],he=v[0];fe.high=he.high,fe.low=he.low;for(var q=0;q<5;q++)for(var oe=0;oe<5;oe++){var W=q+5*oe,B=v[W],Ne=m[W],Re=m[(q+1)%5+5*oe],Je=m[(q+2)%5+5*oe];B.high=Ne.high^~Re.high&Je.high,B.low=Ne.low^~Re.low&Je.low}var B=v[0],Me=p[N];B.high^=Me.high,B.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,B=k/8,N=[],q=0;q<B;q++){var te=_[q],me=te.high,oe=te.low;me=(me<<8|me>>>24)&16711935|(me<<24|me>>>8)&4278255360,oe=(oe<<8|oe>>>24)&16711935|(oe<<24|oe>>>8)&4278255360,N.push(oe),N.push(me)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});r.SHA3=o._createHelper(h),r.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var c1e=G((aL,l1e)=>{f();(function(t,e){typeof aL=="object"?l1e.exports=aL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(aL,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,B){for(var N=0;N<16;N++){var q=B+N,te=k[q];k[q]=(te<<8|te>>>24)&16711935|(te<<24|te>>>8)&4278255360}var me=this._hash.words,oe=p.words,H=m.words,O=l.words,le=c.words,ie=u.words,j=d.words,W,Y,ee,pe,re,fe,he,Ne,Re,Je;fe=W=me[0],he=Y=me[1],Ne=ee=me[2],Re=pe=me[3],Je=re=me[4];for(var Me,N=0;N<80;N+=1)Me=W+k[B+O[N]]|0,N<16?Me+=g(Y,ee,pe)+oe[0]:N<32?Me+=y(Y,ee,pe)+oe[1]:N<48?Me+=v(Y,ee,pe)+oe[2]:N<64?Me+=b(Y,ee,pe)+oe[3]:Me+=E(Y,ee,pe)+oe[4],Me=Me|0,Me=_(Me,ie[N]),Me=Me+re|0,W=re,re=pe,pe=_(ee,10),ee=Y,Y=Me,Me=fe+k[B+le[N]]|0,N<16?Me+=E(he,Ne,Re)+H[0]:N<32?Me+=b(he,Ne,Re)+H[1]:N<48?Me+=v(he,Ne,Re)+H[2]:N<64?Me+=y(he,Ne,Re)+H[3]:Me+=g(he,Ne,Re)+H[4],Me=Me|0,Me=_(Me,j[N]),Me=Me+Je|0,fe=Je,Je=Re,Re=_(Ne,10),Ne=he,he=Me;Me=me[1]+ee+Re|0,me[1]=me[2]+pe+Je|0,me[2]=me[3]+re+fe|0,me[3]=me[4]+W+he|0,me[4]=me[0]+Y+Ne|0,me[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,B=k.words,N=this._nDataBytes*8,q=k.sigBytes*8;B[q>>>5]|=128<<24-q%32,B[(q+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(B.length+1)*4,this._process();for(var te=this._hash,me=te.words,oe=0;oe<5;oe++){var H=me[oe];me[oe]=(H<<8|H>>>24)&16711935|(H<<24|H>>>8)&4278255360}return te},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,B,N){return k^B^N}s(g,"f1");function y(k,B,N){return k&B|~k&N}s(y,"f2");function v(k,B,N){return(k|~B)^N}s(v,"f3");function b(k,B,N){return k&N|B&~N}s(b,"f4");function E(k,B,N){return k^(B|~N)}s(E,"f5");function _(k,B){return k<<B|k>>>32-B}s(_,"rotl"),r.RIPEMD160=o._createHelper(h),r.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var cL=G((lL,u1e)=>{f();(function(t,e){typeof lL=="object"?u1e.exports=lL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(lL,function(t){(function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=n.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var f1e=G((uL,d1e)=>{f();(function(t,e,r){typeof uL=="object"?d1e.exports=uL=e(Di(),rL(),cL()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(uL,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,B=k.length,N=_,q=1;q<E;q++){N=m.finalize(N),m.reset();for(var te=N.words,me=0;me<B;me++)k[me]^=te[me]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var m1=G((dL,p1e)=>{f();(function(t,e,r){typeof dL=="object"?p1e.exports=dL=e(Di(),vX(),cL()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(dL,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=n.extend({cfg:n.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var ul=G((fL,m1e)=>{f();(function(t,e,r){typeof fL=="object"?m1e.exports=fL=e(Di(),m1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(fL,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,l=r.enc,c=l.Utf8,u=l.Base64,d=r.algo,p=d.EvpKDF,m=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(H,O){return this.create(this._ENC_XFORM_MODE,H,O)},"createEncryptor"),createDecryptor:s(function(H,O){return this.create(this._DEC_XFORM_MODE,H,O)},"createDecryptor"),init:s(function(H,O,le){this.cfg=this.cfg.extend(le),this._xformMode=H,this._key=O,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(H){return this._append(H),this._process()},"process"),finalize:s(function(H){H&&this._append(H);var O=this._doFinalize();return O},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function H(O){return typeof O=="string"?oe:q}return s(H,"selectCipherStrategy"),function(O){return{encrypt:s(function(le,ie,j){return H(ie).encrypt(O,le,ie,j)},"encrypt"),decrypt:s(function(le,ie,j){return H(ie).decrypt(O,le,ie,j)},"decrypt")}}}()}),h=n.StreamCipher=m.extend({_doFinalize:s(function(){var H=this._process(!0);return H},"_doFinalize"),blockSize:1}),g=r.mode={},y=n.BlockCipherMode=i.extend({createEncryptor:s(function(H,O){return this.Encryptor.create(H,O)},"createEncryptor"),createDecryptor:s(function(H,O){return this.Decryptor.create(H,O)},"createDecryptor"),init:s(function(H,O){this._cipher=H,this._iv=O},"init")}),v=g.CBC=function(){var H=y.extend();H.Encryptor=H.extend({processBlock:s(function(le,ie){var j=this._cipher,W=j.blockSize;O.call(this,le,ie,W),j.encryptBlock(le,ie),this._prevBlock=le.slice(ie,ie+W)},"processBlock")}),H.Decryptor=H.extend({processBlock:s(function(le,ie){var j=this._cipher,W=j.blockSize,Y=le.slice(ie,ie+W);j.decryptBlock(le,ie),O.call(this,le,ie,W),this._prevBlock=Y},"processBlock")});function O(le,ie,j){var W,Y=this._iv;Y?(W=Y,this._iv=e):W=this._prevBlock;for(var ee=0;ee<j;ee++)le[ie+ee]^=W[ee]}return s(O,"xorBlock"),H}(),b=r.pad={},E=b.Pkcs7={pad:s(function(H,O){for(var le=O*4,ie=le-H.sigBytes%le,j=ie<<24|ie<<16|ie<<8|ie,W=[],Y=0;Y<ie;Y+=4)W.push(j);var ee=o.create(W,ie);H.concat(ee)},"pad"),unpad:s(function(H){var O=H.words[H.sigBytes-1>>>2]&255;H.sigBytes-=O},"unpad")},_=n.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var H;m.reset.call(this);var O=this.cfg,le=O.iv,ie=O.mode;this._xformMode==this._ENC_XFORM_MODE?H=ie.createEncryptor:(H=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==H?this._mode.init(this,le&&le.words):(this._mode=H.call(ie,this,le&&le.words),this._mode.__creator=H)},"reset"),_doProcessBlock:s(function(H,O){this._mode.processBlock(H,O)},"_doProcessBlock"),_doFinalize:s(function(){var H,O=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(O.pad(this._data,this.blockSize),H=this._process(!0)):(H=this._process(!0),O.unpad(H)),H},"_doFinalize"),blockSize:128/32}),k=n.CipherParams=i.extend({init:s(function(H){this.mixIn(H)},"init"),toString:s(function(H){return(H||this.formatter).stringify(this)},"toString")}),B=r.format={},N=B.OpenSSL={stringify:s(function(H){var O,le=H.ciphertext,ie=H.salt;return ie?O=o.create([1398893684,1701076831]).concat(ie).concat(le):O=le,O.toString(u)},"stringify"),parse:s(function(H){var O,le=u.parse(H),ie=le.words;return ie[0]==1398893684&&ie[1]==1701076831&&(O=o.create(ie.slice(2,4)),ie.splice(0,4),le.sigBytes-=16),k.create({ciphertext:le,salt:O})},"parse")},q=n.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie);var j=H.createEncryptor(le,ie),W=j.finalize(O),Y=j.cfg;return k.create({ciphertext:W,key:le,iv:Y.iv,algorithm:H,mode:Y.mode,padding:Y.padding,blockSize:H.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie),O=this._parse(O,ie.format);var j=H.createDecryptor(le,ie).finalize(O.ciphertext);return j},"decrypt"),_parse:s(function(H,O){return typeof H=="string"?O.parse(H,this):H},"_parse")}),te=r.kdf={},me=te.OpenSSL={execute:s(function(H,O,le,ie,j){if(ie||(ie=o.random(64/8)),j)var W=p.create({keySize:O+le,hasher:j}).compute(H,ie);else var W=p.create({keySize:O+le}).compute(H,ie);var Y=o.create(W.words.slice(O),le*4);return W.sigBytes=O*4,k.create({key:W,iv:Y,salt:ie})},"execute")},oe=n.PasswordBasedCipher=q.extend({cfg:q.cfg.extend({kdf:me}),encrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie);var j=ie.kdf.execute(le,H.keySize,H.ivSize,ie.salt,ie.hasher);ie.iv=j.iv;var W=q.encrypt.call(this,H,O,j.key,ie);return W.mixIn(j),W},"encrypt"),decrypt:s(function(H,O,le,ie){ie=this.cfg.extend(ie),O=this._parse(O,ie.format);var j=ie.kdf.execute(le,H.keySize,H.ivSize,O.salt,ie.hasher);ie.iv=j.iv;var W=q.decrypt.call(this,H,O,j.key,ie);return W},"decrypt")})}()})});var g1e=G((pL,h1e)=>{f();(function(t,e,r){typeof pL=="object"?h1e.exports=pL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pL,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize;r.call(this,n,i,a,o),this._prevBlock=n.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=n.slice(i,i+a);r.call(this,n,i,a,o),this._prevBlock=l},"processBlock")});function r(n,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)n[i+u]^=l[u]}return s(r,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var y1e=G((mL,A1e)=>{f();(function(t,e,r){typeof mL=="object"?A1e.exports=mL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mL,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)n[i+d]^=u[d]},"processBlock")});return e.Decryptor=r,e}(),t.mode.CTR})});var x1e=G((hL,C1e)=>{f();(function(t,e,r){typeof hL=="object"?C1e.exports=hL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hL,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function r(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(r,"incWord");function n(o){return(o[0]=r(o[0]))===0&&(o[1]=r(o[1])),o}s(n,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),n(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var b1e=G((gL,v1e)=>{f();(function(t,e,r){typeof gL=="object"?v1e.exports=gL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gL,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:s(function(n,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)n[i+u]^=c[u]},"processBlock")});return e.Decryptor=r,e}(),t.mode.OFB})});var I1e=G((AL,E1e)=>{f();(function(t,e,r){typeof AL=="object"?E1e.exports=AL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(AL,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(r,n){this._cipher.encryptBlock(r,n)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,n){this._cipher.decryptBlock(r,n)},"processBlock")}),e}(),t.mode.ECB})});var w1e=G((yL,T1e)=>{f();(function(t,e,r){typeof yL=="object"?T1e.exports=yL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yL,function(t){return t.pad.AnsiX923={pad:s(function(e,r){var n=e.sigBytes,i=r*4,o=i-n%i,a=n+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Ansix923})});var S1e=G((CL,_1e)=>{f();(function(t,e,r){typeof CL=="object"?_1e.exports=CL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(CL,function(t){return t.pad.Iso10126={pad:s(function(e,r){var n=r*4,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var r=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=r},"unpad")},t.pad.Iso10126})});var k1e=G((xL,R1e)=>{f();(function(t,e,r){typeof xL=="object"?R1e.exports=xL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(xL,function(t){return t.pad.Iso97971={pad:s(function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var D1e=G((vL,B1e)=>{f();(function(t,e,r){typeof vL=="object"?B1e.exports=vL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(vL,function(t){return t.pad.ZeroPadding={pad:s(function(e,r){var n=r*4;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},"pad"),unpad:s(function(e){for(var r=e.words,n=e.sigBytes-1,n=e.sigBytes-1;n>=0;n--)if(r[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}},"unpad")},t.pad.ZeroPadding})});var N1e=G((bL,P1e)=>{f();(function(t,e,r){typeof bL=="object"?P1e.exports=bL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(bL,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var F1e=G((EL,L1e)=>{f();(function(t,e,r){typeof EL=="object"?L1e.exports=EL=e(Di(),ul()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(EL,function(t){return function(e){var r=t,n=r.lib,i=n.CipherParams,o=r.enc,a=o.Hex,l=r.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var Q1e=G((IL,M1e)=>{f();(function(t,e,r){typeof IL=="object"?M1e.exports=IL=e(Di(),vx(),bx(),m1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(IL,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var B=k^k<<1^k<<2^k<<3^k<<4;B=B>>>8^B&255^99,o[_]=B,a[B]=_;var N=b[_],q=b[N],te=b[q],me=b[B]*257^B*16843008;l[_]=me<<24|me>>>8,c[_]=me<<16|me>>>16,u[_]=me<<8|me>>>24,d[_]=me;var me=te*16843009^q*65537^N*257^_*16843008;p[B]=me<<24|me>>>8,m[B]=me<<16|me>>>16,h[B]=me<<8|me>>>24,g[B]=me,_?(_=N^b[b[b[te^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=n.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,B=this._nRounds=k+6,N=(B+1)*4,q=this._keySchedule=[],te=0;te<N;te++)te<k?q[te]=_[te]:(b=q[te-1],te%k?k>6&&te%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[te/k|0]<<24),q[te]=q[te-k]^b);for(var me=this._invKeySchedule=[],oe=0;oe<N;oe++){var te=N-oe;if(oe%4)var b=q[te];else var b=q[te-4];oe<4||te<=4?me[oe]=b:me[oe]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,B,N,q,te){for(var me=this._nRounds,oe=b[E]^_[0],H=b[E+1]^_[1],O=b[E+2]^_[2],le=b[E+3]^_[3],ie=4,j=1;j<me;j++){var W=k[oe>>>24]^B[H>>>16&255]^N[O>>>8&255]^q[le&255]^_[ie++],Y=k[H>>>24]^B[O>>>16&255]^N[le>>>8&255]^q[oe&255]^_[ie++],ee=k[O>>>24]^B[le>>>16&255]^N[oe>>>8&255]^q[H&255]^_[ie++],pe=k[le>>>24]^B[oe>>>16&255]^N[H>>>8&255]^q[O&255]^_[ie++];oe=W,H=Y,O=ee,le=pe}var W=(te[oe>>>24]<<24|te[H>>>16&255]<<16|te[O>>>8&255]<<8|te[le&255])^_[ie++],Y=(te[H>>>24]<<24|te[O>>>16&255]<<16|te[le>>>8&255]<<8|te[oe&255])^_[ie++],ee=(te[O>>>24]<<24|te[le>>>16&255]<<16|te[oe>>>8&255]<<8|te[H&255])^_[ie++],pe=(te[le>>>24]<<24|te[oe>>>16&255]<<16|te[H>>>8&255]<<8|te[O&255])^_[ie++];b[E]=W,b[E+1]=Y,b[E+2]=ee,b[E+3]=pe},"_doCryptBlock"),keySize:256/32});e.AES=n._createHelper(v)}(),t.AES})});var U1e=G((TL,O1e)=>{f();(function(t,e,r){typeof TL=="object"?O1e.exports=TL=e(Di(),vx(),bx(),m1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(TL,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],B=0;B<16;B++){for(var N=k[B]=[],q=c[B],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+q)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+q)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var te=this._invSubKeys=[],E=0;E<16;E++)te[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,B=this._rBlock,N=0,q=0;q<8;q++)N|=u[q][((B^_[q])&d[q])>>>0];this._lBlock=B,this._rBlock=k^N}var te=this._lBlock;this._lBlock=this._rBlock,this._rBlock=te,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(n.create(b)),this._des2=p.createEncryptor(n.create(E)),this._des3=p.createEncryptor(n.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var W1e=G((wL,q1e)=>{f();(function(t,e,r){typeof wL=="object"?q1e.exports=wL=e(Di(),vx(),bx(),m1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(wL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=i.RC4=n.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=n._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=n._createHelper(l)}(),t.RC4})});var H1e=G((_L,G1e)=>{f();(function(t,e,r){typeof _L=="object"?G1e.exports=_L=e(Di(),vx(),bx(),m1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(_L,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=n.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=B,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=B;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=n._createHelper(c)}(),t.Rabbit})});var V1e=G((SL,j1e)=>{f();(function(t,e,r){typeof SL=="object"?j1e.exports=SL=e(Di(),vx(),bx(),m1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(SL,function(t){return function(){var e=t,r=e.lib,n=r.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=n.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,B=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=B,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=B;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=n._createHelper(c)}(),t.RabbitLegacy})});var z1e=G((RL,$1e)=>{f();(function(t,e,r){typeof RL=="object"?$1e.exports=RL=e(Di(),vx(),bx(),m1(),ul()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(RL,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let B=0;B<4;B++){g.sbox[B]=[];for(let N=0;N<256;N++)g.sbox[B][N]=l[B][N]}let b=0;for(let B=0;B<o+2;B++)g.pbox[B]=a[B]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let B=0;B<o+2;B+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[B]=E,g.pbox[B+1]=_;for(let B=0;B<4;B++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[B][N]=E,g.sbox[B][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=n.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=n._createHelper(h)}(),t.Blowfish})});var Ex=G((kL,Y1e)=>{f();(function(t,e,r){typeof kL=="object"?Y1e.exports=kL=e(Di(),CB(),VAe(),zAe(),vx(),JAe(),bx(),vX(),rL(),r1e(),bX(),o1e(),a1e(),c1e(),cL(),f1e(),m1(),ul(),g1e(),y1e(),x1e(),b1e(),I1e(),w1e(),S1e(),k1e(),D1e(),N1e(),F1e(),Q1e(),U1e(),W1e(),H1e(),V1e(),z1e()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(kL,function(t){return t})});var cS=G(qc=>{"use strict";f();Object.defineProperty(qc,"__esModule",{value:!0});qc.stringArray=qc.array=qc.func=qc.error=qc.number=qc.string=qc.boolean=void 0;function Ast(t){return t===!0||t===!1}s(Ast,"boolean");qc.boolean=Ast;function Rxe(t){return typeof t=="string"||t instanceof String}s(Rxe,"string");qc.string=Rxe;function yst(t){return typeof t=="number"||t instanceof Number}s(yst,"number");qc.number=yst;function Cst(t){return t instanceof Error}s(Cst,"error");qc.error=Cst;function xst(t){return typeof t=="function"}s(xst,"func");qc.func=xst;function kxe(t){return Array.isArray(t)}s(kxe,"array");qc.array=kxe;function vst(t){return kxe(t)&&t.every(e=>Rxe(e))}s(vst,"stringArray");qc.stringArray=vst});var zZ=G(Hr=>{"use strict";f();Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Message=Hr.NotificationType9=Hr.NotificationType8=Hr.NotificationType7=Hr.NotificationType6=Hr.NotificationType5=Hr.NotificationType4=Hr.NotificationType3=Hr.NotificationType2=Hr.NotificationType1=Hr.NotificationType0=Hr.NotificationType=Hr.RequestType9=Hr.RequestType8=Hr.RequestType7=Hr.RequestType6=Hr.RequestType5=Hr.RequestType4=Hr.RequestType3=Hr.RequestType2=Hr.RequestType1=Hr.RequestType=Hr.RequestType0=Hr.AbstractMessageSignature=Hr.ParameterStructures=Hr.ResponseError=Hr.ErrorCodes=void 0;var hI=cS(),IZ;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(IZ||(Hr.ErrorCodes=IZ={}));var TZ=class t extends Error{static{s(this,"ResponseError")}constructor(e,r,n){super(r),this.code=hI.number(e)?e:IZ.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Hr.ResponseError=TZ;var dd=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Hr.ParameterStructures=dd;dd.auto=new dd("auto");dd.byPosition=new dd("byPosition");dd.byName=new dd("byName");var hs=class{static{s(this,"AbstractMessageSignature")}constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return dd.auto}};Hr.AbstractMessageSignature=hs;var wZ=class extends hs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Hr.RequestType0=wZ;var _Z=class extends hs{static{s(this,"RequestType")}constructor(e,r=dd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.RequestType=_Z;var SZ=class extends hs{static{s(this,"RequestType1")}constructor(e,r=dd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.RequestType1=SZ;var RZ=class extends hs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Hr.RequestType2=RZ;var kZ=class extends hs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Hr.RequestType3=kZ;var BZ=class extends hs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Hr.RequestType4=BZ;var DZ=class extends hs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Hr.RequestType5=DZ;var PZ=class extends hs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Hr.RequestType6=PZ;var NZ=class extends hs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Hr.RequestType7=NZ;var LZ=class extends hs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Hr.RequestType8=LZ;var FZ=class extends hs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Hr.RequestType9=FZ;var MZ=class extends hs{static{s(this,"NotificationType")}constructor(e,r=dd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.NotificationType=MZ;var QZ=class extends hs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Hr.NotificationType0=QZ;var OZ=class extends hs{static{s(this,"NotificationType1")}constructor(e,r=dd.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Hr.NotificationType1=OZ;var UZ=class extends hs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Hr.NotificationType2=UZ;var qZ=class extends hs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Hr.NotificationType3=qZ;var WZ=class extends hs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Hr.NotificationType4=WZ;var GZ=class extends hs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Hr.NotificationType5=GZ;var HZ=class extends hs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Hr.NotificationType6=HZ;var jZ=class extends hs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Hr.NotificationType7=jZ;var VZ=class extends hs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Hr.NotificationType8=VZ;var $Z=class extends hs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Hr.NotificationType9=$Z;var Bxe;(function(t){function e(i){let o=i;return o&&hI.string(o.method)&&(hI.string(o.id)||hI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function r(i){let o=i;return o&&hI.string(o.method)&&i.id===void 0}s(r,"isNotification"),t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(hI.string(o.id)||hI.number(o.id)||o.id===null)}s(n,"isResponse"),t.isResponse=n})(Bxe||(Hr.Message=Bxe={}))});var KZ=G(Nx=>{"use strict";f();var Dxe;Object.defineProperty(Nx,"__esModule",{value:!0});Nx.LRUCache=Nx.LinkedMap=Nx.Touch=void 0;var Wc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Wc||(Nx.Touch=Wc={}));var pF=class{static{s(this,"LinkedMap")}constructor(){this[Dxe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=Wc.None){let n=this._map.get(e);if(n)return r!==Wc.None&&this.touch(n,r),n.value}set(e,r,n=Wc.None){let i=this._map.get(e);if(i)i.value=r,n!==Wc.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case Wc.None:this.addItemLast(i);break;case Wc.First:this.addItemFirst(i);break;case Wc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}},"next")};return n}[(Dxe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==Wc.First&&r!==Wc.Last)){if(r===Wc.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===Wc.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};Nx.LinkedMap=pF;var YZ=class extends pF{static{s(this,"LRUCache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=Wc.AsNew){return super.get(e,r)}peek(e){return super.get(e,Wc.None)}set(e,r){return super.set(e,r,Wc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Nx.LRUCache=YZ});var Nxe=G(mF=>{"use strict";f();Object.defineProperty(mF,"__esModule",{value:!0});mF.Disposable=void 0;var Pxe;(function(t){function e(r){return{dispose:r}}s(e,"create"),t.create=e})(Pxe||(mF.Disposable=Pxe={}))});var Lx=G(ZZ=>{"use strict";f();Object.defineProperty(ZZ,"__esModule",{value:!0});var JZ;function XZ(){if(JZ===void 0)throw new Error("No runtime abstraction layer installed");return JZ}s(XZ,"RAL");(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");JZ=r}s(e,"install"),t.install=e})(XZ||(XZ={}));ZZ.default=XZ});var dS=G(uS=>{"use strict";f();Object.defineProperty(uS,"__esModule",{value:!0});uS.Emitter=uS.Event=void 0;var bst=Lx(),Lxe;(function(t){let e={dispose(){}};t.None=function(){return e}})(Lxe||(uS.Event=Lxe={}));var eee=class{static{s(this,"CallbackList")}add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:s(()=>this.remove(e,r),"dispose")})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(l){(0,bst.default)().console.error(l)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},hF=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new eee),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};uS.Emitter=hF;hF._noop=function(){}});var yF=G(fS=>{"use strict";f();Object.defineProperty(fS,"__esModule",{value:!0});fS.CancellationTokenSource=fS.CancellationToken=void 0;var Est=Lx(),Ist=cS(),tee=dS(),gF;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:tee.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:tee.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||Ist.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}s(e,"is"),t.is=e})(gF||(fS.CancellationToken=gF={}));var Tst=Object.freeze(function(t,e){let r=(0,Est.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),AF=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Tst:(this._emitter||(this._emitter=new tee.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},ree=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new AF),this._token}cancel(){this._token?this._token.cancel():this._token=gF.Cancelled}dispose(){this._token?this._token instanceof AF&&this._token.dispose():this._token=gF.None}};fS.CancellationTokenSource=ree});var Fxe=G(pS=>{"use strict";f();Object.defineProperty(pS,"__esModule",{value:!0});pS.SharedArrayReceiverStrategy=pS.SharedArraySenderStrategy=void 0;var wst=yF(),UB;(function(t){t.Continue=0,t.Cancelled=1})(UB||(UB={}));var nee=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=UB.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,UB.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};pS.SharedArraySenderStrategy=nee;var iee=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===UB.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},oee=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new iee(e)}cancel(){}dispose(){}},see=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new wst.CancellationTokenSource:new oee(r)}};pS.SharedArrayReceiverStrategy=see});var lee=G(CF=>{"use strict";f();Object.defineProperty(CF,"__esModule",{value:!0});CF.Semaphore=void 0;var _st=Lx(),aee=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,_st.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};CF.Semaphore=aee});var Qxe=G(Fx=>{"use strict";f();Object.defineProperty(Fx,"__esModule",{value:!0});Fx.ReadableStreamMessageReader=Fx.AbstractMessageReader=Fx.MessageReader=void 0;var uee=Lx(),mS=cS(),cee=dS(),Sst=lee(),Mxe;(function(t){function e(r){let n=r;return n&&mS.func(n.listen)&&mS.func(n.dispose)&&mS.func(n.onError)&&mS.func(n.onClose)&&mS.func(n.onPartialMessage)}s(e,"is"),t.is=e})(Mxe||(Fx.MessageReader=Mxe={}));var xF=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new cee.Emitter,this.closeEmitter=new cee.Emitter,this.partialMessageEmitter=new cee.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${mS.string(e.message)?e.message:"unknown"}`)}};Fx.AbstractMessageReader=xF;var dee;(function(t){function e(r){let n,i,o,a=new Map,l,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let u of r.contentDecoders)a.set(u.name,u);if(r.contentTypeDecoder!==void 0&&(l=r.contentTypeDecoder,c.set(l.name,l)),r.contentTypeDecoders!==void 0)for(let u of r.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,uee.default)().applicationJson.decoder,c.set(l.name,l)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(dee||(dee={}));var fee=class extends xF{static{s(this,"ReadableStreamMessageReader")}constructor(e,r){super(),this.readable=e,this.options=dee.fromOptions(r),this.buffer=(0,uee.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new Sst.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,uee.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Fx.ReadableStreamMessageReader=fee});var Gxe=G(Mx=>{"use strict";f();Object.defineProperty(Mx,"__esModule",{value:!0});Mx.WriteableStreamMessageWriter=Mx.AbstractMessageWriter=Mx.MessageWriter=void 0;var Oxe=Lx(),qB=cS(),Rst=lee(),Uxe=dS(),kst="Content-Length: ",qxe=`\r
`,Wxe;(function(t){function e(r){let n=r;return n&&qB.func(n.dispose)&&qB.func(n.onClose)&&qB.func(n.onError)&&qB.func(n.write)}s(e,"is"),t.is=e})(Wxe||(Mx.MessageWriter=Wxe={}));var vF=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new Uxe.Emitter,this.closeEmitter=new Uxe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${qB.string(e.message)?e.message:"unknown"}`)}};Mx.AbstractMessageWriter=vF;var pee;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,Oxe.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,Oxe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(pee||(pee={}));var mee=class extends vF{static{s(this,"WriteableStreamMessageWriter")}constructor(e,r){super(),this.writable=e,this.options=pee.fromOptions(r),this.errorCount=0,this.writeSemaphore=new Rst.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(kst,n.byteLength.toString(),qxe),i.push(qxe),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};Mx.WriteableStreamMessageWriter=mee});var Hxe=G(bF=>{"use strict";f();Object.defineProperty(bF,"__esModule",{value:!0});bF.AbstractMessageBuffer=void 0;var Bst=13,Dst=10,Pst=`\r
`,hee=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let u=this._chunks[n];for(i=0;i<u.length;){switch(u[i]){case Bst:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case Dst:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=u.byteLength,n++}if(r!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(Pst);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};bF.AbstractMessageBuffer=hee});var Yxe=G(Xn=>{"use strict";f();Object.defineProperty(Xn,"__esModule",{value:!0});Xn.createMessageConnection=Xn.ConnectionOptions=Xn.MessageStrategy=Xn.CancellationStrategy=Xn.CancellationSenderStrategy=Xn.CancellationReceiverStrategy=Xn.RequestCancellationReceiverStrategy=Xn.IdCancellationReceiverStrategy=Xn.ConnectionStrategy=Xn.ConnectionError=Xn.ConnectionErrors=Xn.LogTraceNotification=Xn.SetTraceNotification=Xn.TraceFormat=Xn.TraceValues=Xn.Trace=Xn.NullLogger=Xn.ProgressType=Xn.ProgressToken=void 0;var jxe=Lx(),Ys=cS(),kn=zZ(),Vxe=KZ(),WB=dS(),gee=yF(),jB;(function(t){t.type=new kn.NotificationType("$/cancelRequest")})(jB||(jB={}));var Aee;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}s(e,"is"),t.is=e})(Aee||(Xn.ProgressToken=Aee={}));var GB;(function(t){t.type=new kn.NotificationType("$/progress")})(GB||(GB={}));var yee=class{static{s(this,"ProgressType")}constructor(){}};Xn.ProgressType=yee;var Cee;(function(t){function e(r){return Ys.func(r)}s(e,"is"),t.is=e})(Cee||(Cee={}));Xn.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Ao;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Ao||(Xn.Trace=Ao={}));var $xe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})($xe||(Xn.TraceValues=$xe={}));(function(t){function e(n){if(!Ys.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(r,"toString"),t.toString=r})(Ao||(Xn.Trace=Ao={}));var f0;(function(t){t.Text="text",t.JSON="json"})(f0||(Xn.TraceFormat=f0={}));(function(t){function e(r){return Ys.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(f0||(Xn.TraceFormat=f0={}));var xee;(function(t){t.type=new kn.NotificationType("$/setTrace")})(xee||(Xn.SetTraceNotification=xee={}));var EF;(function(t){t.type=new kn.NotificationType("$/logTrace")})(EF||(Xn.LogTraceNotification=EF={}));var HB;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(HB||(Xn.ConnectionErrors=HB={}));var hS=class t extends Error{static{s(this,"ConnectionError")}constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Xn.ConnectionError=hS;var vee;(function(t){function e(r){let n=r;return n&&Ys.func(n.cancelUndispatched)}s(e,"is"),t.is=e})(vee||(Xn.ConnectionStrategy=vee={}));var IF;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&Ys.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ys.func(n.dispose))}s(e,"is"),t.is=e})(IF||(Xn.IdCancellationReceiverStrategy=IF={}));var bee;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&Ys.func(n.createCancellationTokenSource)&&(n.dispose===void 0||Ys.func(n.dispose))}s(e,"is"),t.is=e})(bee||(Xn.RequestCancellationReceiverStrategy=bee={}));var TF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new gee.CancellationTokenSource}});function e(r){return IF.is(r)||bee.is(r)}s(e,"is"),t.is=e})(TF||(Xn.CancellationReceiverStrategy=TF={}));var wF;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(jB.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&Ys.func(n.sendCancellation)&&Ys.func(n.cleanup)}s(e,"is"),t.is=e})(wF||(Xn.CancellationSenderStrategy=wF={}));var _F;(function(t){t.Message=Object.freeze({receiver:TF.Message,sender:wF.Message});function e(r){let n=r;return n&&TF.is(n.receiver)&&wF.is(n.sender)}s(e,"is"),t.is=e})(_F||(Xn.CancellationStrategy=_F={}));var SF;(function(t){function e(r){let n=r;return n&&Ys.func(n.handleMessage)}s(e,"is"),t.is=e})(SF||(Xn.MessageStrategy=SF={}));var zxe;(function(t){function e(r){let n=r;return n&&(_F.is(n.cancellationStrategy)||vee.is(n.connectionStrategy)||SF.is(n.messageStrategy))}s(e,"is"),t.is=e})(zxe||(Xn.ConnectionOptions=zxe={}));var gm;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(gm||(gm={}));function Nst(t,e,r,n){let i=r!==void 0?r:Xn.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new Vxe.LinkedMap,v=new Map,b=new Set,E=new Map,_=Ao.Off,k=f0.Text,B,N=gm.New,q=new WB.Emitter,te=new WB.Emitter,me=new WB.Emitter,oe=new WB.Emitter,H=new WB.Emitter,O=n&&n.cancellationStrategy?n.cancellationStrategy:_F.Message;function le(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(le,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function j(){return"not-"+(++a).toString()}s(j,"createNotificationQueueKey");function W(Ae,Ge){kn.Message.isRequest(Ge)?Ae.set(le(Ge.id),Ge):kn.Message.isResponse(Ge)?Ae.set(ie(Ge.id),Ge):Ae.set(j(),Ge)}s(W,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function ee(){return N===gm.Listening}s(ee,"isListening");function pe(){return N===gm.Closed}s(pe,"isClosed");function re(){return N===gm.Disposed}s(re,"isDisposed");function fe(){(N===gm.New||N===gm.Listening)&&(N=gm.Closed,te.fire(void 0))}s(fe,"closeHandler");function he(Ae){q.fire([Ae,void 0,void 0])}s(he,"readErrorHandler");function Ne(Ae){q.fire(Ae)}s(Ne,"writeErrorHandler"),t.onClose(fe),t.onError(he),e.onClose(fe),e.onError(Ne);function Re(){g||y.size===0||(g=(0,jxe.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Re,"triggerMessageQueue");function Je(Ae){kn.Message.isRequest(Ae)?Tt(Ae):kn.Message.isNotification(Ae)?bt(Ae):kn.Message.isResponse(Ae)?Ct(Ae):ce(Ae)}s(Je,"handleMessage");function Me(){if(y.size===0)return;let Ae=y.shift();try{let Ge=n?.messageStrategy;SF.is(Ge)?Ge.handleMessage(Ae,Je):Je(Ae)}finally{Re()}}s(Me,"processMessageQueue");let pt=s(Ae=>{try{if(kn.Message.isNotification(Ae)&&Ae.method===jB.type.method){let Ge=Ae.params.id,ut=le(Ge),yt=y.get(ut);if(kn.Message.isRequest(yt)){let Gt=n?.connectionStrategy,Ar=Gt&&Gt.cancelUndispatched?Gt.cancelUndispatched(yt,Y):void 0;if(Ar&&(Ar.error!==void 0||Ar.result!==void 0)){y.delete(ut),E.delete(Ge),Ar.id=yt.id,X(Ar,Ae.method,Date.now()),e.write(Ar).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(Ge);if(Xt!==void 0){Xt.cancel(),We(Ae);return}else b.add(Ge)}W(y,Ae)}finally{Re()}},"callback");function Tt(Ae){if(re())return;function Ge(jt,rr,Jt){let Ir={jsonrpc:c,id:Ae.id};jt instanceof kn.ResponseError?Ir.error=jt.toJson():Ir.result=jt===void 0?null:jt,X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(Ge,"reply");function ut(jt,rr,Jt){let Ir={jsonrpc:c,id:Ae.id,error:jt.toJson()};X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function yt(jt,rr,Jt){jt===void 0&&(jt=null);let Ir={jsonrpc:c,id:Ae.id,result:jt};X(Ir,rr,Jt),e.write(Ir).catch(()=>i.error("Sending response failed."))}s(yt,"replySuccess"),ne(Ae);let Xt=d.get(Ae.method),Gt,Ar;Xt&&(Gt=Xt.type,Ar=Xt.handler);let xr=Date.now();if(Ar||u){let jt=Ae.id??String(Date.now()),rr=IF.is(O.receiver)?O.receiver.createCancellationTokenSource(jt):O.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&rr.cancel(),Ae.id!==null&&E.set(jt,rr);try{let Jt;if(Ar)if(Ae.params===void 0){if(Gt!==void 0&&Gt.numberOfParams!==0){ut(new kn.ResponseError(kn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Gt.numberOfParams} params but received none.`),Ae.method,xr);return}Jt=Ar(rr.token)}else if(Array.isArray(Ae.params)){if(Gt!==void 0&&Gt.parameterStructures===kn.ParameterStructures.byName){ut(new kn.ResponseError(kn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,xr);return}Jt=Ar(...Ae.params,rr.token)}else{if(Gt!==void 0&&Gt.parameterStructures===kn.ParameterStructures.byPosition){ut(new kn.ResponseError(kn.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,xr);return}Jt=Ar(Ae.params,rr.token)}else u&&(Jt=u(Ae.method,Ae.params,rr.token));let Ir=Jt;Jt?Ir.then?Ir.then(Nr=>{E.delete(jt),Ge(Nr,Ae.method,xr)},Nr=>{E.delete(jt),Nr instanceof kn.ResponseError?ut(Nr,Ae.method,xr):Nr&&Ys.string(Nr.message)?ut(new kn.ResponseError(kn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Nr.message}`),Ae.method,xr):ut(new kn.ResponseError(kn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,xr)}):(E.delete(jt),Ge(Jt,Ae.method,xr)):(E.delete(jt),yt(Jt,Ae.method,xr))}catch(Jt){E.delete(jt),Jt instanceof kn.ResponseError?Ge(Jt,Ae.method,xr):Jt&&Ys.string(Jt.message)?ut(new kn.ResponseError(kn.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,xr):ut(new kn.ResponseError(kn.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,xr)}}else ut(new kn.ResponseError(kn.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,xr)}s(Tt,"handleRequest");function Ct(Ae){if(!re())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let Ge=Ae.id,ut=v.get(Ge);if(Pe(Ae,ut),ut!==void 0){v.delete(Ge);try{if(Ae.error){let yt=Ae.error;ut.reject(new kn.ResponseError(yt.code,yt.message,yt.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(yt){yt.message?i.error(`Response handler '${ut.method}' failed with message: ${yt.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(Ct,"handleResponse");function bt(Ae){if(re())return;let Ge,ut;if(Ae.method===jB.type.method){let yt=Ae.params.id;b.delete(yt),We(Ae);return}else{let yt=m.get(Ae.method);yt&&(ut=yt.handler,Ge=yt.type)}if(ut||p)try{if(We(Ae),ut)if(Ae.params===void 0)Ge!==void 0&&Ge.numberOfParams!==0&&Ge.parameterStructures!==kn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let yt=Ae.params;Ae.method===GB.type.method&&yt.length===2&&Aee.is(yt[0])?ut({token:yt[0],value:yt[1]}):(Ge!==void 0&&(Ge.parameterStructures===kn.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),Ge.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${Ge.numberOfParams} params but received ${yt.length} arguments`)),ut(...yt))}else Ge!==void 0&&Ge.parameterStructures===kn.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(yt){yt.message?i.error(`Notification handler '${Ae.method}' failed with message: ${yt.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else me.fire(Ae)}s(bt,"handleNotification");function ce(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let Ge=Ae;if(Ys.string(Ge.id)||Ys.number(Ge.id)){let ut=Ge.id,yt=v.get(ut);yt&&yt.reject(new Error("The received response has neither a result nor an error property."))}}s(ce,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case Ao.Verbose:return JSON.stringify(Ae,null,4);case Ao.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===Ao.Off||!B))if(k===f0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Sending request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===Ao.Off||!B))if(k===f0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Sending notification '${Ae.method}'.`,Ge)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function X(Ae,Ge,ut){if(!(_===Ao.Off||!B))if(k===f0.Text){let yt;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?yt=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?yt=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(yt=`No result returned.

`)),B.log(`Sending response '${Ge} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,yt)}else be("send-response",Ae)}s(X,"traceSendingResponse");function ne(Ae){if(!(_===Ao.Off||!B))if(k===f0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(Ge=`Params: ${Oe(Ae.params)}

`),B.log(`Received request '${Ae.method} - (${Ae.id})'.`,Ge)}else be("receive-request",Ae)}s(ne,"traceReceivedRequest");function We(Ae){if(!(_===Ao.Off||!B||Ae.method===EF.type.method))if(k===f0.Text){let Ge;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?Ge=`Params: ${Oe(Ae.params)}

`:Ge=`No parameters provided.

`),B.log(`Received notification '${Ae.method}'.`,Ge)}else be("receive-notification",Ae)}s(We,"traceReceivedNotification");function Pe(Ae,Ge){if(!(_===Ao.Off||!B))if(k===f0.Text){let ut;if((_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),Ge){let yt=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";B.log(`Received response '${Ge.method} - (${Ae.id})' in ${Date.now()-Ge.timerStart}ms.${yt}`,ut)}else B.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(Pe,"traceReceivedResponse");function be(Ae,Ge){if(!B||_===Ao.Off)return;let ut={isLSPMessage:!0,type:Ae,message:Ge,timestamp:Date.now()};B.log(ut)}s(be,"logLSPMessage");function ze(){if(pe())throw new hS(HB.Closed,"Connection is closed.");if(re())throw new hS(HB.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(ee())throw new hS(HB.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function gt(){if(!ee())throw new Error("Call listen() first.")}s(gt,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function lr(Ae){if(Ae!==null)return Ae}s(lr,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function Gr(Ae,Ge){switch(Ae){case kn.ParameterStructures.auto:return Lt(Ge)?lr(Ge):[Ot(Ge)];case kn.ParameterStructures.byName:if(!Lt(Ge))throw new Error("Received parameters by name but param is not an object literal.");return lr(Ge);case kn.ParameterStructures.byPosition:return[Ot(Ge)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Gr,"computeSingleParam");function Yr(Ae,Ge){let ut,yt=Ae.numberOfParams;switch(yt){case 0:ut=void 0;break;case 1:ut=Gr(Ae.parameterStructures,Ge[0]);break;default:ut=[];for(let Xt=0;Xt<Ge.length&&Xt<yt;Xt++)ut.push(Ot(Ge[Xt]));if(Ge.length<yt)for(let Xt=Ge.length;Xt<yt;Xt++)ut.push(null);break}return ut}s(Yr,"computeMessageParams");let hn={sendNotification:s((Ae,...Ge)=>{ze();let ut,yt;if(Ys.string(Ae)){ut=Ae;let Gt=Ge[0],Ar=0,xr=kn.ParameterStructures.auto;kn.ParameterStructures.is(Gt)&&(Ar=1,xr=Gt);let jt=Ge.length,rr=jt-Ar;switch(rr){case 0:yt=void 0;break;case 1:yt=Gr(xr,Ge[Ar]);break;default:if(xr===kn.ParameterStructures.byName)throw new Error(`Received ${rr} parameters for 'by Name' notification parameter structure.`);yt=Ge.slice(Ar,jt).map(Jt=>Ot(Jt));break}}else{let Gt=Ge;ut=Ae.method,yt=Yr(Ae,Gt)}let Xt={jsonrpc:c,method:ut,params:yt};return tt(Xt),e.write(Xt).catch(Gt=>{throw i.error("Sending notification failed."),Gt})},"sendNotification"),onNotification:s((Ae,Ge)=>{ze();let ut;return Ys.func(Ae)?p=Ae:Ge&&(Ys.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:Ge})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:Ge}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,Ge,ut)=>{if(h.has(Ge))throw new Error(`Progress handler for token ${Ge} already registered`);return h.set(Ge,ut),{dispose:s(()=>{h.delete(Ge)},"dispose")}},"onProgress"),sendProgress:s((Ae,Ge,ut)=>hn.sendNotification(GB.type,{token:Ge,value:ut}),"sendProgress"),onUnhandledProgress:oe.event,sendRequest:s((Ae,...Ge)=>{ze(),gt();let ut,yt,Xt;if(Ys.string(Ae)){ut=Ae;let jt=Ge[0],rr=Ge[Ge.length-1],Jt=0,Ir=kn.ParameterStructures.auto;kn.ParameterStructures.is(jt)&&(Jt=1,Ir=jt);let Nr=Ge.length;gee.CancellationToken.is(rr)&&(Nr=Nr-1,Xt=rr);let Kr=Nr-Jt;switch(Kr){case 0:yt=void 0;break;case 1:yt=Gr(Ir,Ge[Jt]);break;default:if(Ir===kn.ParameterStructures.byName)throw new Error(`Received ${Kr} parameters for 'by Name' request parameter structure.`);yt=Ge.slice(Jt,Nr).map(Wn=>Ot(Wn));break}}else{let jt=Ge;ut=Ae.method,yt=Yr(Ae,jt);let rr=Ae.numberOfParams;Xt=gee.CancellationToken.is(jt[rr])?jt[rr]:void 0}let Gt=o++,Ar;Xt&&(Ar=Xt.onCancellationRequested(()=>{let jt=O.sender.sendCancellation(hn,Gt);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Gt}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Gt} failed`)})}));let xr={jsonrpc:c,id:Gt,method:ut,params:yt};return ye(xr),typeof O.sender.enableCancellation=="function"&&O.sender.enableCancellation(xr),new Promise(async(jt,rr)=>{let Jt=s(Kr=>{jt(Kr),O.sender.cleanup(Gt),Ar?.dispose()},"resolveWithCleanup"),Ir=s(Kr=>{rr(Kr),O.sender.cleanup(Gt),Ar?.dispose()},"rejectWithCleanup"),Nr={method:ut,timerStart:Date.now(),resolve:Jt,reject:Ir};try{await e.write(xr),v.set(Gt,Nr)}catch(Kr){throw i.error("Sending request failed."),Nr.reject(new kn.ResponseError(kn.ErrorCodes.MessageWriteError,Kr.message?Kr.message:"Unknown reason")),Kr}})},"sendRequest"),onRequest:s((Ae,Ge)=>{ze();let ut=null;return Cee.is(Ae)?(ut=void 0,u=Ae):Ys.string(Ae)?(ut=null,Ge!==void 0&&(ut=Ae,d.set(Ae,{handler:Ge,type:void 0}))):Ge!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:Ge})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,Ge,ut)=>{let yt=!1,Xt=f0.Text;ut!==void 0&&(Ys.boolean(ut)?yt=ut:(yt=ut.sendNotification||!1,Xt=ut.traceFormat||f0.Text)),_=Ae,k=Xt,_===Ao.Off?B=void 0:B=Ge,yt&&!pe()&&!re()&&await hn.sendNotification(xee.type,{value:Ao.toString(Ae)})},"trace"),onError:q.event,onClose:te.event,onUnhandledNotification:me.event,onDispose:H.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(re())return;N=gm.Disposed,H.fire(void 0);let Ae=new kn.ResponseError(kn.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let Ge of v.values())Ge.reject(Ae);v=new Map,E=new Map,b=new Set,y=new Vxe.LinkedMap,Ys.func(e.dispose)&&e.dispose(),Ys.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=gm.Listening,t.listen(pt)},"listen"),inspect:s(()=>{(0,jxe.default)().console.log("inspect")},"inspect")};return hn.onNotification(EF.type,Ae=>{if(_===Ao.Off||!B)return;let Ge=_===Ao.Verbose||_===Ao.Compact;B.log(Ae.message,Ge?Ae.verbose:void 0)}),hn.onNotification(GB.type,Ae=>{let Ge=h.get(Ae.token);Ge?Ge(Ae.value):oe.fire(Ae)}),hn}s(Nst,"createMessageConnection");Xn.createMessageConnection=Nst});var RF=G(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Zo=zZ();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Zo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Zo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Zo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Zo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Zo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Zo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Zo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Zo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Zo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Zo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Zo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Zo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Zo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Zo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Zo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Zo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Zo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Zo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Zo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Zo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Zo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Zo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Zo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Zo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Zo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Zo.ParameterStructures},"get")});var Eee=KZ();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return Eee.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return Eee.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return Eee.Touch},"get")});var Lst=Nxe();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return Lst.Disposable},"get")});var Kxe=dS();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return Kxe.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return Kxe.Emitter},"get")});var Jxe=yF();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return Jxe.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return Jxe.CancellationToken},"get")});var Xxe=Fxe();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return Xxe.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return Xxe.SharedArrayReceiverStrategy},"get")});var Iee=Qxe();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return Iee.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return Iee.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return Iee.ReadableStreamMessageReader},"get")});var Tee=Gxe();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return Tee.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return Tee.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return Tee.WriteableStreamMessageWriter},"get")});var Fst=Hxe();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return Fst.AbstractMessageBuffer},"get")});var fc=Yxe();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return fc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return fc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return fc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return fc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return fc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return fc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return fc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return fc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return fc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return fc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return fc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return fc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return fc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return fc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return fc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return fc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return fc.MessageStrategy},"get")});var Mst=Lx();ct.RAL=Mst.default});var tve=G(Ree=>{"use strict";f();Object.defineProperty(Ree,"__esModule",{value:!0});var Zxe=require("util"),R1=RF(),kF=class t extends R1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new Zxe.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};kF.emptyBuffer=Buffer.allocUnsafe(0);var wee=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),R1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),R1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),R1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),R1.Disposable.create(()=>this.stream.off("data",e))}},_ee=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),R1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),R1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),R1.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=s(a=>{a==null?n():i(a)},"callback");typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},eve=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new kF(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Zxe.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new wee(t),"asReadableStream"),asWritableStream:s(t=>new _ee(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:s(()=>clearTimeout(n),"dispose")}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(r),"dispose")}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:s(()=>clearInterval(n),"dispose")}}})});function See(){return eve}s(See,"RIL");(function(t){function e(){R1.RAL.install(eve)}s(e,"install"),t.install=e})(See||(See={}));Ree.default=See});var yI=G(Wi=>{"use strict";f();var Qst=Wi&&Wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Ost=Wi&&Wi.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Qst(e,t,r)};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.createMessageConnection=Wi.createServerSocketTransport=Wi.createClientSocketTransport=Wi.createServerPipeTransport=Wi.createClientPipeTransport=Wi.generateRandomPipeName=Wi.StreamMessageWriter=Wi.StreamMessageReader=Wi.SocketMessageWriter=Wi.SocketMessageReader=Wi.PortMessageWriter=Wi.PortMessageReader=Wi.IPCMessageWriter=Wi.IPCMessageReader=void 0;var gS=tve();gS.default.install();var rve=require("path"),Ust=require("os"),qst=require("crypto"),PF=require("net"),p0=RF();Ost(RF(),Wi);var kee=class extends p0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),p0.Disposable.create(()=>this.process.off("message",e))}};Wi.IPCMessageReader=kee;var Bee=class extends p0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Wi.IPCMessageWriter=Bee;var Dee=class extends p0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new p0.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};Wi.PortMessageReader=Dee;var Pee=class extends p0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};Wi.PortMessageWriter=Pee;var gI=class extends p0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,r="utf-8"){super((0,gS.default)().stream.asReadableStream(e),r)}};Wi.SocketMessageReader=gI;var AI=class extends p0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,r){super((0,gS.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Wi.SocketMessageWriter=AI;var BF=class extends p0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,r){super((0,gS.default)().stream.asReadableStream(e),r)}};Wi.StreamMessageReader=BF;var DF=class extends p0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,r){super((0,gS.default)().stream.asWritableStream(e),r)}};Wi.StreamMessageWriter=DF;var nve=process.env.XDG_RUNTIME_DIR,Wst=new Map([["linux",107],["darwin",103]]);function Gst(){let t=(0,qst.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;nve?e=rve.join(nve,`vscode-ipc-${t}.sock`):e=rve.join(Ust.tmpdir(),`vscode-${t}.sock`);let r=Wst.get(process.platform);return r!==void 0&&e.length>r&&(0,gS.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}s(Gst,"generateRandomPipeName");Wi.generateRandomPipeName=Gst;function Hst(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,PF.createServer)(l=>{a.close(),r([new gI(l,e),new AI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Hst,"createClientPipeTransport");Wi.createClientPipeTransport=Hst;function jst(t,e="utf-8"){let r=(0,PF.createConnection)(t);return[new gI(r,e),new AI(r,e)]}s(jst,"createServerPipeTransport");Wi.createServerPipeTransport=jst;function Vst(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,PF.createServer)(l=>{a.close(),r([new gI(l,e),new AI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>n,"onConnected")})})})}s(Vst,"createClientSocketTransport");Wi.createClientSocketTransport=Vst;function $st(t,e="utf-8"){let r=(0,PF.createConnection)(t,"127.0.0.1");return[new gI(r,e),new AI(r,e)]}s($st,"createServerSocketTransport");Wi.createServerSocketTransport=$st;function zst(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(zst,"isReadableStream");function Yst(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Yst,"isWritableStream");function Kst(t,e,r,n){r||(r=p0.NullLogger);let i=zst(t)?new BF(t):t,o=Yst(e)?new DF(e):e;return p0.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,p0.createMessageConnection)(i,o,r,n)}s(Kst,"createMessageConnection");Wi.createMessageConnection=Kst});var Nee=G((Vfr,ive)=>{"use strict";f();ive.exports=yI()});var LF=G((ove,NF)=>{f();(function(t){if(typeof NF=="object"&&typeof NF.exports=="object"){var e=t(require,ove);e!==void 0&&(NF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(U){function ge(ve){return typeof ve=="string"}s(ge,"is"),U.is=ge})(r||(e.DocumentUri=r={}));var n;(function(U){function ge(ve){return typeof ve=="string"}s(ge,"is"),U.is=ge})(n||(e.URI=n={}));var i;(function(U){U.MIN_VALUE=-2147483648,U.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(ge,"is"),U.is=ge})(i||(e.integer=i={}));var o;(function(U){U.MIN_VALUE=0,U.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&U.MIN_VALUE<=ve&&ve<=U.MAX_VALUE}s(ge,"is"),U.is=ge})(o||(e.uinteger=o={}));var a;(function(U){function ge(Z,M){return Z===Number.MAX_VALUE&&(Z=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:Z,character:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),U.is=ve})(a||(e.Position=a={}));var l;(function(U){function ge(Z,M,ke,$e){if(_e.uinteger(Z)&&_e.uinteger(M)&&_e.uinteger(ke)&&_e.uinteger($e))return{start:a.create(Z,M),end:a.create(ke,$e)};if(a.is(Z)&&a.is(M))return{start:Z,end:M};throw new Error("Range#create called with invalid arguments[".concat(Z,", ").concat(M,", ").concat(ke,", ").concat($e,"]"))}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),U.is=ve})(l||(e.Range=l={}));var c;(function(U){function ge(Z,M){return{uri:Z,range:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),U.is=ve})(c||(e.Location=c={}));var u;(function(U){function ge(Z,M,ke,$e){return{targetUri:Z,targetRange:M,targetSelectionRange:ke,originSelectionRange:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),U.is=ve})(u||(e.LocationLink=u={}));var d;(function(U){function ge(Z,M,ke,$e){return{red:Z,green:M,blue:ke,alpha:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),U.is=ve})(d||(e.Color=d={}));var p;(function(U){function ge(Z,M){return{range:Z,color:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),U.is=ve})(p||(e.ColorInformation=p={}));var m;(function(U){function ge(Z,M,ke){return{label:Z,textEdit:M,additionalTextEdits:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||B.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,B.is))}s(ve,"is"),U.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(U){U.Comment="comment",U.Imports="imports",U.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(U){function ge(Z,M,ke,$e,qt,_r){var pr={startLine:Z,endLine:M};return _e.defined(ke)&&(pr.startCharacter=ke),_e.defined($e)&&(pr.endCharacter=$e),_e.defined(qt)&&(pr.kind=qt),_e.defined(_r)&&(pr.collapsedText=_r),pr}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),U.is=ve})(g||(e.FoldingRange=g={}));var y;(function(U){function ge(Z,M){return{location:Z,message:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),U.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(U){U.Error=1,U.Warning=2,U.Information=3,U.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(U){U.Unnecessary=1,U.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&_e.string(Z.href)}s(ge,"is"),U.is=ge})(E||(e.CodeDescription=E={}));var _;(function(U){function ge(Z,M,ke,$e,qt,_r){var pr={range:Z,message:M};return _e.defined(ke)&&(pr.severity=ke),_e.defined($e)&&(pr.code=$e),_e.defined(qt)&&(pr.source=qt),_e.defined(_r)&&(pr.relatedInformation=_r),pr}s(ge,"create"),U.create=ge;function ve(Z){var M,ke=Z;return _e.defined(ke)&&l.is(ke.range)&&_e.string(ke.message)&&(_e.number(ke.severity)||_e.undefined(ke.severity))&&(_e.integer(ke.code)||_e.string(ke.code)||_e.undefined(ke.code))&&(_e.undefined(ke.codeDescription)||_e.string((M=ke.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(ke.source)||_e.undefined(ke.source))&&(_e.undefined(ke.relatedInformation)||_e.typedArray(ke.relatedInformation,y.is))}s(ve,"is"),U.is=ve})(_||(e.Diagnostic=_={}));var k;(function(U){function ge(Z,M){for(var ke=[],$e=2;$e<arguments.length;$e++)ke[$e-2]=arguments[$e];var qt={title:Z,command:M};return _e.defined(ke)&&ke.length>0&&(qt.arguments=ke),qt}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),U.is=ve})(k||(e.Command=k={}));var B;(function(U){function ge(ke,$e){return{range:ke,newText:$e}}s(ge,"replace"),U.replace=ge;function ve(ke,$e){return{range:{start:ke,end:ke},newText:$e}}s(ve,"insert"),U.insert=ve;function Z(ke){return{range:ke,newText:""}}s(Z,"del"),U.del=Z;function M(ke){var $e=ke;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),U.is=M})(B||(e.TextEdit=B={}));var N;(function(U){function ge(Z,M,ke){var $e={label:Z};return M!==void 0&&($e.needsConfirmation=M),ke!==void 0&&($e.description=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),U.is=ve})(N||(e.ChangeAnnotation=N={}));var q;(function(U){function ge(ve){var Z=ve;return _e.string(Z)}s(ge,"is"),U.is=ge})(q||(e.ChangeAnnotationIdentifier=q={}));var te;(function(U){function ge(ke,$e,qt){return{range:ke,newText:$e,annotationId:qt}}s(ge,"replace"),U.replace=ge;function ve(ke,$e,qt){return{range:{start:ke,end:ke},newText:$e,annotationId:qt}}s(ve,"insert"),U.insert=ve;function Z(ke,$e){return{range:ke,newText:"",annotationId:$e}}s(Z,"del"),U.del=Z;function M(ke){var $e=ke;return B.is($e)&&(N.is($e.annotationId)||q.is($e.annotationId))}s(M,"is"),U.is=M})(te||(e.AnnotatedTextEdit=te={}));var me;(function(U){function ge(Z,M){return{textDocument:Z,edits:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&pe.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),U.is=ve})(me||(e.TextDocumentEdit=me={}));var oe;(function(U){function ge(Z,M,ke){var $e={kind:"create",uri:Z};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||q.is(M.annotationId))}s(ve,"is"),U.is=ve})(oe||(e.CreateFile=oe={}));var H;(function(U){function ge(Z,M,ke,$e){var qt={kind:"rename",oldUri:Z,newUri:M};return ke!==void 0&&(ke.overwrite!==void 0||ke.ignoreIfExists!==void 0)&&(qt.options=ke),$e!==void 0&&(qt.annotationId=$e),qt}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||q.is(M.annotationId))}s(ve,"is"),U.is=ve})(H||(e.RenameFile=H={}));var O;(function(U){function ge(Z,M,ke){var $e={kind:"delete",uri:Z};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||q.is(M.annotationId))}s(ve,"is"),U.is=ve})(O||(e.DeleteFile=O={}));var le;(function(U){function ge(ve){var Z=ve;return Z&&(Z.changes!==void 0||Z.documentChanges!==void 0)&&(Z.documentChanges===void 0||Z.documentChanges.every(function(M){return _e.string(M.kind)?oe.is(M)||H.is(M)||O.is(M):me.is(M)}))}s(ge,"is"),U.is=ge})(le||(e.WorkspaceEdit=le={}));var ie=function(){function U(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(U,"TextEditChangeImpl"),U.prototype.insert=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.insert(ge,ve):q.is(Z)?(ke=Z,M=te.insert(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=te.insert(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.replace=function(ge,ve,Z){var M,ke;if(Z===void 0?M=B.replace(ge,ve):q.is(Z)?(ke=Z,M=te.replace(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=te.replace(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},U.prototype.delete=function(ge,ve){var Z,M;if(ve===void 0?Z=B.del(ge):q.is(ve)?(M=ve,Z=te.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),Z=te.del(ge,M)),this.edits.push(Z),M!==void 0)return M},U.prototype.add=function(ge){this.edits.push(ge)},U.prototype.all=function(){return this.edits},U.prototype.clear=function(){this.edits.splice(0,this.edits.length)},U.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},U}(),j=function(){function U(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(U,"ChangeAnnotations"),U.prototype.all=function(){return this._annotations},Object.defineProperty(U.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),U.prototype.manage=function(ge,ve){var Z;if(q.is(ge)?Z=ge:(Z=this.nextId(),ve=ge),this._annotations[Z]!==void 0)throw new Error("Id ".concat(Z," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(Z));return this._annotations[Z]=ve,this._size++,Z},U.prototype.nextId=function(){return this._counter++,this._counter.toString()},U}(),W=function(){function U(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new j(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(Z){if(me.is(Z)){var M=new ie(Z.edits,ve._changeAnnotations);ve._textEditChanges[Z.textDocument.uri]=M}})):ge.changes&&Object.keys(ge.changes).forEach(function(Z){var M=new ie(ge.changes[Z]);ve._textEditChanges[Z]=M})):this._workspaceEdit={}}return s(U,"WorkspaceChange"),Object.defineProperty(U.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),U.prototype.getTextEditChange=function(ge){if(pe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},Z=this._textEditChanges[ve.uri];if(!Z){var M=[],ke={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(ke),Z=new ie(M,this._changeAnnotations),this._textEditChanges[ve.uri]=Z}return Z}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Z=this._textEditChanges[ge];if(!Z){var M=[];this._workspaceEdit.changes[ge]=M,Z=new ie(M),this._textEditChanges[ge]=Z}return Z}},U.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new j,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},U.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},U.prototype.createFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||q.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=oe.create(ge,Z):($e=q.is(M)?M:this._changeAnnotations.manage(M),ke=oe.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U.prototype.renameFile=function(ge,ve,Z,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ke;N.is(Z)||q.is(Z)?ke=Z:M=Z;var $e,qt;if(ke===void 0?$e=H.create(ge,ve,M):(qt=q.is(ke)?ke:this._changeAnnotations.manage(ke),$e=H.create(ge,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},U.prototype.deleteFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||q.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=O.create(ge,Z):($e=q.is(M)?M:this._changeAnnotations.manage(M),ke=O.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},U}();e.WorkspaceChange=W;var Y;(function(U){function ge(Z){return{uri:Z}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),U.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var ee;(function(U){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),U.is=ve})(ee||(e.VersionedTextDocumentIdentifier=ee={}));var pe;(function(U){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),U.is=ve})(pe||(e.OptionalVersionedTextDocumentIdentifier=pe={}));var re;(function(U){function ge(Z,M,ke,$e){return{uri:Z,languageId:M,version:ke,text:$e}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(re||(e.TextDocumentItem=re={}));var fe;(function(U){U.PlainText="plaintext",U.Markdown="markdown";function ge(ve){var Z=ve;return Z===U.PlainText||Z===U.Markdown}s(ge,"is"),U.is=ge})(fe||(e.MarkupKind=fe={}));var he;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(ve)&&fe.is(Z.kind)&&_e.string(Z.value)}s(ge,"is"),U.is=ge})(he||(e.MarkupContent=he={}));var Ne;(function(U){U.Text=1,U.Method=2,U.Function=3,U.Constructor=4,U.Field=5,U.Variable=6,U.Class=7,U.Interface=8,U.Module=9,U.Property=10,U.Unit=11,U.Value=12,U.Enum=13,U.Keyword=14,U.Snippet=15,U.Color=16,U.File=17,U.Reference=18,U.Folder=19,U.EnumMember=20,U.Constant=21,U.Struct=22,U.Event=23,U.Operator=24,U.TypeParameter=25})(Ne||(e.CompletionItemKind=Ne={}));var Re;(function(U){U.PlainText=1,U.Snippet=2})(Re||(e.InsertTextFormat=Re={}));var Je;(function(U){U.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(U){function ge(Z,M,ke){return{newText:Z,insert:M,replace:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),U.is=ve})(Me||(e.InsertReplaceEdit=Me={}));var pt;(function(U){U.asIs=1,U.adjustIndentation=2})(pt||(e.InsertTextMode=pt={}));var Tt;(function(U){function ge(ve){var Z=ve;return Z&&(_e.string(Z.detail)||Z.detail===void 0)&&(_e.string(Z.description)||Z.description===void 0)}s(ge,"is"),U.is=ge})(Tt||(e.CompletionItemLabelDetails=Tt={}));var Ct;(function(U){function ge(ve){return{label:ve}}s(ge,"create"),U.create=ge})(Ct||(e.CompletionItem=Ct={}));var bt;(function(U){function ge(ve,Z){return{items:ve||[],isIncomplete:!!Z}}s(ge,"create"),U.create=ge})(bt||(e.CompletionList=bt={}));var ce;(function(U){function ge(Z){return Z.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),U.fromPlainText=ge;function ve(Z){var M=Z;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),U.is=ve})(ce||(e.MarkedString=ce={}));var Oe;(function(U){function ge(ve){var Z=ve;return!!Z&&_e.objectLiteral(Z)&&(he.is(Z.contents)||ce.is(Z.contents)||_e.typedArray(Z.contents,ce.is))&&(ve.range===void 0||l.is(ve.range))}s(ge,"is"),U.is=ge})(Oe||(e.Hover=Oe={}));var ye;(function(U){function ge(ve,Z){return Z?{label:ve,documentation:Z}:{label:ve}}s(ge,"create"),U.create=ge})(ye||(e.ParameterInformation=ye={}));var tt;(function(U){function ge(ve,Z){for(var M=[],ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];var $e={label:ve};return _e.defined(Z)&&($e.documentation=Z),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(ge,"create"),U.create=ge})(tt||(e.SignatureInformation=tt={}));var X;(function(U){U.Text=1,U.Read=2,U.Write=3})(X||(e.DocumentHighlightKind=X={}));var ne;(function(U){function ge(ve,Z){var M={range:ve};return _e.number(Z)&&(M.kind=Z),M}s(ge,"create"),U.create=ge})(ne||(e.DocumentHighlight=ne={}));var We;(function(U){U.File=1,U.Module=2,U.Namespace=3,U.Package=4,U.Class=5,U.Method=6,U.Property=7,U.Field=8,U.Constructor=9,U.Enum=10,U.Interface=11,U.Function=12,U.Variable=13,U.Constant=14,U.String=15,U.Number=16,U.Boolean=17,U.Array=18,U.Object=19,U.Key=20,U.Null=21,U.EnumMember=22,U.Struct=23,U.Event=24,U.Operator=25,U.TypeParameter=26})(We||(e.SymbolKind=We={}));var Pe;(function(U){U.Deprecated=1})(Pe||(e.SymbolTag=Pe={}));var be;(function(U){function ge(ve,Z,M,ke,$e){var qt={name:ve,kind:Z,location:{uri:ke,range:M}};return $e&&(qt.containerName=$e),qt}s(ge,"create"),U.create=ge})(be||(e.SymbolInformation=be={}));var ze;(function(U){function ge(ve,Z,M,ke){return ke!==void 0?{name:ve,kind:Z,location:{uri:M,range:ke}}:{name:ve,kind:Z,location:{uri:M}}}s(ge,"create"),U.create=ge})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(U){function ge(Z,M,ke,$e,qt,_r){var pr={name:Z,detail:M,kind:ke,range:$e,selectionRange:qt};return _r!==void 0&&(pr.children=_r),pr}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),U.is=ve})(it||(e.DocumentSymbol=it={}));var gt;(function(U){U.Empty="",U.QuickFix="quickfix",U.Refactor="refactor",U.RefactorExtract="refactor.extract",U.RefactorInline="refactor.inline",U.RefactorRewrite="refactor.rewrite",U.Source="source",U.SourceOrganizeImports="source.organizeImports",U.SourceFixAll="source.fixAll"})(gt||(e.CodeActionKind=gt={}));var Ot;(function(U){U.Invoked=1,U.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var lr;(function(U){function ge(Z,M,ke){var $e={diagnostics:Z};return M!=null&&($e.only=M),ke!=null&&($e.triggerKind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),U.is=ve})(lr||(e.CodeActionContext=lr={}));var Lt;(function(U){function ge(Z,M,ke){var $e={title:Z},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||le.is(M.edit))}s(ve,"is"),U.is=ve})(Lt||(e.CodeAction=Lt={}));var Gr;(function(U){function ge(Z,M){var ke={range:Z};return _e.defined(M)&&(ke.data=M),ke}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),U.is=ve})(Gr||(e.CodeLens=Gr={}));var Yr;(function(U){function ge(Z,M){return{tabSize:Z,insertSpaces:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),U.is=ve})(Yr||(e.FormattingOptions=Yr={}));var hn;(function(U){function ge(Z,M,ke){return{range:Z,target:M,data:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),U.is=ve})(hn||(e.DocumentLink=hn={}));var Ae;(function(U){function ge(Z,M){return{range:Z,parent:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||U.is(M.parent))}s(ve,"is"),U.is=ve})(Ae||(e.SelectionRange=Ae={}));var Ge;(function(U){U.namespace="namespace",U.type="type",U.class="class",U.enum="enum",U.interface="interface",U.struct="struct",U.typeParameter="typeParameter",U.parameter="parameter",U.variable="variable",U.property="property",U.enumMember="enumMember",U.event="event",U.function="function",U.method="method",U.macro="macro",U.keyword="keyword",U.modifier="modifier",U.comment="comment",U.string="string",U.number="number",U.regexp="regexp",U.operator="operator",U.decorator="decorator"})(Ge||(e.SemanticTokenTypes=Ge={}));var ut;(function(U){U.declaration="declaration",U.definition="definition",U.readonly="readonly",U.static="static",U.deprecated="deprecated",U.abstract="abstract",U.async="async",U.modification="modification",U.documentation="documentation",U.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var yt;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&(Z.resultId===void 0||typeof Z.resultId=="string")&&Array.isArray(Z.data)&&(Z.data.length===0||typeof Z.data[0]=="number")}s(ge,"is"),U.is=ge})(yt||(e.SemanticTokens=yt={}));var Xt;(function(U){function ge(Z,M){return{range:Z,text:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),U.is=ve})(Xt||(e.InlineValueText=Xt={}));var Gt;(function(U){function ge(Z,M,ke){return{range:Z,variableName:M,caseSensitiveLookup:ke}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),U.is=ve})(Gt||(e.InlineValueVariableLookup=Gt={}));var Ar;(function(U){function ge(Z,M){return{range:Z,expression:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),U.is=ve})(Ar||(e.InlineValueEvaluatableExpression=Ar={}));var xr;(function(U){function ge(Z,M){return{frameId:Z,stoppedLocation:M}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(Z.stoppedLocation)}s(ve,"is"),U.is=ve})(xr||(e.InlineValueContext=xr={}));var jt;(function(U){U.Type=1,U.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),U.is=ge})(jt||(e.InlayHintKind=jt={}));var rr;(function(U){function ge(Z){return{value:Z}}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),U.is=ve})(rr||(e.InlayHintLabelPart=rr={}));var Jt;(function(U){function ge(Z,M,ke){var $e={position:Z,label:M};return ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),U.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,rr.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,B.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||he.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),U.is=ve})(Jt||(e.InlayHint=Jt={}));var Ir;(function(U){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),U.createSnippet=ge})(Ir||(e.StringValue=Ir={}));var Nr;(function(U){function ge(ve,Z,M,ke){return{insertText:ve,filterText:Z,range:M,command:ke}}s(ge,"create"),U.create=ge})(Nr||(e.InlineCompletionItem=Nr={}));var Kr;(function(U){function ge(ve){return{items:ve}}s(ge,"create"),U.create=ge})(Kr||(e.InlineCompletionList=Kr={}));var Wn;(function(U){U.Invoked=0,U.Automatic=1})(Wn||(e.InlineCompletionTriggerKind=Wn={}));var Jn;(function(U){function ge(ve,Z){return{range:ve,text:Z}}s(ge,"create"),U.create=ge})(Jn||(e.SelectedCompletionInfo=Jn={}));var Qn;(function(U){function ge(ve,Z){return{triggerKind:ve,selectedCompletionInfo:Z}}s(ge,"create"),U.create=ge})(Qn||(e.InlineCompletionContext=Qn={}));var $n;(function(U){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&n.is(Z.uri)&&_e.string(Z.name)}s(ge,"is"),U.is=ge})($n||(e.WorkspaceFolder=$n={})),e.EOL=[`
`,`\r
`,"\r"];var rn;(function(U){function ge(ke,$e,qt,_r){return new zn(ke,$e,qt,_r)}s(ge,"create"),U.create=ge;function ve(ke){var $e=ke;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),U.is=ve;function Z(ke,$e){for(var qt=ke.getText(),_r=M($e,function(On,qs){var Fp=On.range.start.line-qs.range.start.line;return Fp===0?On.range.start.character-qs.range.start.character:Fp}),pr=qt.length,un=_r.length-1;un>=0;un--){var gn=_r[un],vr=ke.offsetAt(gn.range.start),Ht=ke.offsetAt(gn.range.end);if(Ht<=pr)qt=qt.substring(0,vr)+gn.newText+qt.substring(Ht,qt.length);else throw new Error("Overlapping edit");pr=vr}return qt}s(Z,"applyEdits"),U.applyEdits=Z;function M(ke,$e){if(ke.length<=1)return ke;var qt=ke.length/2|0,_r=ke.slice(0,qt),pr=ke.slice(qt);M(_r,$e),M(pr,$e);for(var un=0,gn=0,vr=0;un<_r.length&&gn<pr.length;){var Ht=$e(_r[un],pr[gn]);Ht<=0?ke[vr++]=_r[un++]:ke[vr++]=pr[gn++]}for(;un<_r.length;)ke[vr++]=_r[un++];for(;gn<pr.length;)ke[vr++]=pr[gn++];return ke}s(M,"mergeSort")})(rn||(e.TextDocument=rn={}));var zn=function(){function U(ge,ve,Z,M){this._uri=ge,this._languageId=ve,this._version=Z,this._content=M,this._lineOffsets=void 0}return s(U,"FullTextDocument"),Object.defineProperty(U.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(U.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),U.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),Z=this.offsetAt(ge.end);return this._content.substring(ve,Z)}return this._content},U.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},U.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,Z=!0,M=0;M<ve.length;M++){Z&&(ge.push(M),Z=!1);var ke=ve.charAt(M);Z=ke==="\r"||ke===`
`,ke==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}Z&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},U.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),Z=0,M=ve.length;if(M===0)return a.create(0,ge);for(;Z<M;){var ke=Math.floor((Z+M)/2);ve[ke]>ge?M=ke:Z=ke+1}var $e=Z-1;return a.create($e,ge-ve[$e])},U.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var Z=ve[ge.line],M=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(Z+ge.character,M),Z)},Object.defineProperty(U.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),U}(),_e;(function(U){var ge=Object.prototype.toString;function ve(Ht){return typeof Ht<"u"}s(ve,"defined"),U.defined=ve;function Z(Ht){return typeof Ht>"u"}s(Z,"undefined"),U.undefined=Z;function M(Ht){return Ht===!0||Ht===!1}s(M,"boolean"),U.boolean=M;function ke(Ht){return ge.call(Ht)==="[object String]"}s(ke,"string"),U.string=ke;function $e(Ht){return ge.call(Ht)==="[object Number]"}s($e,"number"),U.number=$e;function qt(Ht,On,qs){return ge.call(Ht)==="[object Number]"&&On<=Ht&&Ht<=qs}s(qt,"numberRange"),U.numberRange=qt;function _r(Ht){return ge.call(Ht)==="[object Number]"&&-2147483648<=Ht&&Ht<=2147483647}s(_r,"integer"),U.integer=_r;function pr(Ht){return ge.call(Ht)==="[object Number]"&&0<=Ht&&Ht<=2147483647}s(pr,"uinteger"),U.uinteger=pr;function un(Ht){return ge.call(Ht)==="[object Function]"}s(un,"func"),U.func=un;function gn(Ht){return Ht!==null&&typeof Ht=="object"}s(gn,"objectLiteral"),U.objectLiteral=gn;function vr(Ht,On){return Array.isArray(Ht)&&Ht.every(On)}s(vr,"typedArray"),U.typedArray=vr})(_e||(_e={}))})});var Ls=G(fd=>{"use strict";f();Object.defineProperty(fd,"__esModule",{value:!0});fd.ProtocolNotificationType=fd.ProtocolNotificationType0=fd.ProtocolRequestType=fd.ProtocolRequestType0=fd.RegistrationType=fd.MessageDirection=void 0;var AS=yI(),sve;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(sve||(fd.MessageDirection=sve={}));var Lee=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};fd.RegistrationType=Lee;var Fee=class extends AS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};fd.ProtocolRequestType0=Fee;var Mee=class extends AS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,AS.ParameterStructures.byName)}};fd.ProtocolRequestType=Mee;var Qee=class extends AS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};fd.ProtocolNotificationType0=Qee;var Oee=class extends AS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,AS.ParameterStructures.byName)}};fd.ProtocolNotificationType=Oee});var FF=G(Va=>{"use strict";f();Object.defineProperty(Va,"__esModule",{value:!0});Va.objectLiteral=Va.typedArray=Va.stringArray=Va.array=Va.func=Va.error=Va.number=Va.string=Va.boolean=void 0;function Jst(t){return t===!0||t===!1}s(Jst,"boolean");Va.boolean=Jst;function ave(t){return typeof t=="string"||t instanceof String}s(ave,"string");Va.string=ave;function Xst(t){return typeof t=="number"||t instanceof Number}s(Xst,"number");Va.number=Xst;function Zst(t){return t instanceof Error}s(Zst,"error");Va.error=Zst;function eat(t){return typeof t=="function"}s(eat,"func");Va.func=eat;function lve(t){return Array.isArray(t)}s(lve,"array");Va.array=lve;function tat(t){return lve(t)&&t.every(e=>ave(e))}s(tat,"stringArray");Va.stringArray=tat;function rat(t,e){return Array.isArray(t)&&t.every(e)}s(rat,"typedArray");Va.typedArray=rat;function nat(t){return t!==null&&typeof t=="object"}s(nat,"objectLiteral");Va.objectLiteral=nat});var dve=G(MF=>{"use strict";f();Object.defineProperty(MF,"__esModule",{value:!0});MF.ImplementationRequest=void 0;var cve=Ls(),uve;(function(t){t.method="textDocument/implementation",t.messageDirection=cve.MessageDirection.clientToServer,t.type=new cve.ProtocolRequestType(t.method)})(uve||(MF.ImplementationRequest=uve={}))});var mve=G(QF=>{"use strict";f();Object.defineProperty(QF,"__esModule",{value:!0});QF.TypeDefinitionRequest=void 0;var fve=Ls(),pve;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=fve.MessageDirection.clientToServer,t.type=new fve.ProtocolRequestType(t.method)})(pve||(QF.TypeDefinitionRequest=pve={}))});var Ave=G(yS=>{"use strict";f();Object.defineProperty(yS,"__esModule",{value:!0});yS.DidChangeWorkspaceFoldersNotification=yS.WorkspaceFoldersRequest=void 0;var OF=Ls(),hve;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=OF.MessageDirection.serverToClient,t.type=new OF.ProtocolRequestType0(t.method)})(hve||(yS.WorkspaceFoldersRequest=hve={}));var gve;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=OF.MessageDirection.clientToServer,t.type=new OF.ProtocolNotificationType(t.method)})(gve||(yS.DidChangeWorkspaceFoldersNotification=gve={}))});var xve=G(UF=>{"use strict";f();Object.defineProperty(UF,"__esModule",{value:!0});UF.ConfigurationRequest=void 0;var yve=Ls(),Cve;(function(t){t.method="workspace/configuration",t.messageDirection=yve.MessageDirection.serverToClient,t.type=new yve.ProtocolRequestType(t.method)})(Cve||(UF.ConfigurationRequest=Cve={}))});var Eve=G(CS=>{"use strict";f();Object.defineProperty(CS,"__esModule",{value:!0});CS.ColorPresentationRequest=CS.DocumentColorRequest=void 0;var qF=Ls(),vve;(function(t){t.method="textDocument/documentColor",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolRequestType(t.method)})(vve||(CS.DocumentColorRequest=vve={}));var bve;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolRequestType(t.method)})(bve||(CS.ColorPresentationRequest=bve={}))});var wve=G(xS=>{"use strict";f();Object.defineProperty(xS,"__esModule",{value:!0});xS.FoldingRangeRefreshRequest=xS.FoldingRangeRequest=void 0;var WF=Ls(),Ive;(function(t){t.method="textDocument/foldingRange",t.messageDirection=WF.MessageDirection.clientToServer,t.type=new WF.ProtocolRequestType(t.method)})(Ive||(xS.FoldingRangeRequest=Ive={}));var Tve;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=WF.MessageDirection.serverToClient,t.type=new WF.ProtocolRequestType0(t.method)})(Tve||(xS.FoldingRangeRefreshRequest=Tve={}))});var Rve=G(GF=>{"use strict";f();Object.defineProperty(GF,"__esModule",{value:!0});GF.DeclarationRequest=void 0;var _ve=Ls(),Sve;(function(t){t.method="textDocument/declaration",t.messageDirection=_ve.MessageDirection.clientToServer,t.type=new _ve.ProtocolRequestType(t.method)})(Sve||(GF.DeclarationRequest=Sve={}))});var Dve=G(HF=>{"use strict";f();Object.defineProperty(HF,"__esModule",{value:!0});HF.SelectionRangeRequest=void 0;var kve=Ls(),Bve;(function(t){t.method="textDocument/selectionRange",t.messageDirection=kve.MessageDirection.clientToServer,t.type=new kve.ProtocolRequestType(t.method)})(Bve||(HF.SelectionRangeRequest=Bve={}))});var Fve=G(Qx=>{"use strict";f();Object.defineProperty(Qx,"__esModule",{value:!0});Qx.WorkDoneProgressCancelNotification=Qx.WorkDoneProgressCreateRequest=Qx.WorkDoneProgress=void 0;var iat=yI(),jF=Ls(),Pve;(function(t){t.type=new iat.ProgressType;function e(r){return r===t.type}s(e,"is"),t.is=e})(Pve||(Qx.WorkDoneProgress=Pve={}));var Nve;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=jF.MessageDirection.serverToClient,t.type=new jF.ProtocolRequestType(t.method)})(Nve||(Qx.WorkDoneProgressCreateRequest=Nve={}));var Lve;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=jF.MessageDirection.clientToServer,t.type=new jF.ProtocolNotificationType(t.method)})(Lve||(Qx.WorkDoneProgressCancelNotification=Lve={}))});var Uve=G(Ox=>{"use strict";f();Object.defineProperty(Ox,"__esModule",{value:!0});Ox.CallHierarchyOutgoingCallsRequest=Ox.CallHierarchyIncomingCallsRequest=Ox.CallHierarchyPrepareRequest=void 0;var vS=Ls(),Mve;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Mve||(Ox.CallHierarchyPrepareRequest=Mve={}));var Qve;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Qve||(Ox.CallHierarchyIncomingCallsRequest=Qve={}));var Ove;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Ove||(Ox.CallHierarchyOutgoingCallsRequest=Ove={}))});var Vve=G(pd=>{"use strict";f();Object.defineProperty(pd,"__esModule",{value:!0});pd.SemanticTokensRefreshRequest=pd.SemanticTokensRangeRequest=pd.SemanticTokensDeltaRequest=pd.SemanticTokensRequest=pd.SemanticTokensRegistrationType=pd.TokenFormat=void 0;var k1=Ls(),qve;(function(t){t.Relative="relative"})(qve||(pd.TokenFormat=qve={}));var VB;(function(t){t.method="textDocument/semanticTokens",t.type=new k1.RegistrationType(t.method)})(VB||(pd.SemanticTokensRegistrationType=VB={}));var Wve;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=k1.MessageDirection.clientToServer,t.type=new k1.ProtocolRequestType(t.method),t.registrationMethod=VB.method})(Wve||(pd.SemanticTokensRequest=Wve={}));var Gve;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=k1.MessageDirection.clientToServer,t.type=new k1.ProtocolRequestType(t.method),t.registrationMethod=VB.method})(Gve||(pd.SemanticTokensDeltaRequest=Gve={}));var Hve;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=k1.MessageDirection.clientToServer,t.type=new k1.ProtocolRequestType(t.method),t.registrationMethod=VB.method})(Hve||(pd.SemanticTokensRangeRequest=Hve={}));var jve;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=k1.MessageDirection.serverToClient,t.type=new k1.ProtocolRequestType0(t.method)})(jve||(pd.SemanticTokensRefreshRequest=jve={}))});var Yve=G(VF=>{"use strict";f();Object.defineProperty(VF,"__esModule",{value:!0});VF.ShowDocumentRequest=void 0;var $ve=Ls(),zve;(function(t){t.method="window/showDocument",t.messageDirection=$ve.MessageDirection.serverToClient,t.type=new $ve.ProtocolRequestType(t.method)})(zve||(VF.ShowDocumentRequest=zve={}))});var Xve=G($F=>{"use strict";f();Object.defineProperty($F,"__esModule",{value:!0});$F.LinkedEditingRangeRequest=void 0;var Kve=Ls(),Jve;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Kve.MessageDirection.clientToServer,t.type=new Kve.ProtocolRequestType(t.method)})(Jve||($F.LinkedEditingRangeRequest=Jve={}))});var sbe=G(Gc=>{"use strict";f();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.WillDeleteFilesRequest=Gc.DidDeleteFilesNotification=Gc.DidRenameFilesNotification=Gc.WillRenameFilesRequest=Gc.DidCreateFilesNotification=Gc.WillCreateFilesRequest=Gc.FileOperationPatternKind=void 0;var Nf=Ls(),Zve;(function(t){t.file="file",t.folder="folder"})(Zve||(Gc.FileOperationPatternKind=Zve={}));var ebe;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(ebe||(Gc.WillCreateFilesRequest=ebe={}));var tbe;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolNotificationType(t.method)})(tbe||(Gc.DidCreateFilesNotification=tbe={}));var rbe;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(rbe||(Gc.WillRenameFilesRequest=rbe={}));var nbe;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolNotificationType(t.method)})(nbe||(Gc.DidRenameFilesNotification=nbe={}));var ibe;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolNotificationType(t.method)})(ibe||(Gc.DidDeleteFilesNotification=ibe={}));var obe;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Nf.MessageDirection.clientToServer,t.type=new Nf.ProtocolRequestType(t.method)})(obe||(Gc.WillDeleteFilesRequest=obe={}))});var dbe=G(Ux=>{"use strict";f();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.MonikerRequest=Ux.MonikerKind=Ux.UniquenessLevel=void 0;var abe=Ls(),lbe;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(lbe||(Ux.UniquenessLevel=lbe={}));var cbe;(function(t){t.$import="import",t.$export="export",t.local="local"})(cbe||(Ux.MonikerKind=cbe={}));var ube;(function(t){t.method="textDocument/moniker",t.messageDirection=abe.MessageDirection.clientToServer,t.type=new abe.ProtocolRequestType(t.method)})(ube||(Ux.MonikerRequest=ube={}))});var hbe=G(qx=>{"use strict";f();Object.defineProperty(qx,"__esModule",{value:!0});qx.TypeHierarchySubtypesRequest=qx.TypeHierarchySupertypesRequest=qx.TypeHierarchyPrepareRequest=void 0;var bS=Ls(),fbe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(fbe||(qx.TypeHierarchyPrepareRequest=fbe={}));var pbe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(pbe||(qx.TypeHierarchySupertypesRequest=pbe={}));var mbe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(mbe||(qx.TypeHierarchySubtypesRequest=mbe={}))});var ybe=G(ES=>{"use strict";f();Object.defineProperty(ES,"__esModule",{value:!0});ES.InlineValueRefreshRequest=ES.InlineValueRequest=void 0;var zF=Ls(),gbe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=zF.MessageDirection.clientToServer,t.type=new zF.ProtocolRequestType(t.method)})(gbe||(ES.InlineValueRequest=gbe={}));var Abe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=zF.MessageDirection.serverToClient,t.type=new zF.ProtocolRequestType0(t.method)})(Abe||(ES.InlineValueRefreshRequest=Abe={}))});var bbe=G(Wx=>{"use strict";f();Object.defineProperty(Wx,"__esModule",{value:!0});Wx.InlayHintRefreshRequest=Wx.InlayHintResolveRequest=Wx.InlayHintRequest=void 0;var IS=Ls(),Cbe;(function(t){t.method="textDocument/inlayHint",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method)})(Cbe||(Wx.InlayHintRequest=Cbe={}));var xbe;(function(t){t.method="inlayHint/resolve",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method)})(xbe||(Wx.InlayHintResolveRequest=xbe={}));var vbe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=IS.MessageDirection.serverToClient,t.type=new IS.ProtocolRequestType0(t.method)})(vbe||(Wx.InlayHintRefreshRequest=vbe={}))});var Rbe=G(Lf=>{"use strict";f();Object.defineProperty(Lf,"__esModule",{value:!0});Lf.DiagnosticRefreshRequest=Lf.WorkspaceDiagnosticRequest=Lf.DocumentDiagnosticRequest=Lf.DocumentDiagnosticReportKind=Lf.DiagnosticServerCancellationData=void 0;var Sbe=yI(),oat=FF(),TS=Ls(),Ebe;(function(t){function e(r){let n=r;return n&&oat.boolean(n.retriggerRequest)}s(e,"is"),t.is=e})(Ebe||(Lf.DiagnosticServerCancellationData=Ebe={}));var Ibe;(function(t){t.Full="full",t.Unchanged="unchanged"})(Ibe||(Lf.DocumentDiagnosticReportKind=Ibe={}));var Tbe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=TS.MessageDirection.clientToServer,t.type=new TS.ProtocolRequestType(t.method),t.partialResult=new Sbe.ProgressType})(Tbe||(Lf.DocumentDiagnosticRequest=Tbe={}));var wbe;(function(t){t.method="workspace/diagnostic",t.messageDirection=TS.MessageDirection.clientToServer,t.type=new TS.ProtocolRequestType(t.method),t.partialResult=new Sbe.ProgressType})(wbe||(Lf.WorkspaceDiagnosticRequest=wbe={}));var _be;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=TS.MessageDirection.serverToClient,t.type=new TS.ProtocolRequestType0(t.method)})(_be||(Lf.DiagnosticRefreshRequest=_be={}))});var Fbe=G(sa=>{"use strict";f();Object.defineProperty(sa,"__esModule",{value:!0});sa.DidCloseNotebookDocumentNotification=sa.DidSaveNotebookDocumentNotification=sa.DidChangeNotebookDocumentNotification=sa.NotebookCellArrayChange=sa.DidOpenNotebookDocumentNotification=sa.NotebookDocumentSyncRegistrationType=sa.NotebookDocument=sa.NotebookCell=sa.ExecutionSummary=sa.NotebookCellKind=void 0;var $B=LF(),Am=FF(),cg=Ls(),Uee;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Uee||(sa.NotebookCellKind=Uee={}));var qee;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function r(i){let o=i;return Am.objectLiteral(o)&&$B.uinteger.is(o.executionOrder)&&(o.success===void 0||Am.boolean(o.success))}s(r,"is"),t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(n,"equals"),t.equals=n})(qee||(sa.ExecutionSummary=qee={}));var YF;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function r(o){let a=o;return Am.objectLiteral(a)&&Uee.is(a.kind)&&$B.DocumentUri.is(a.document)&&(a.metadata===void 0||Am.objectLiteral(a.metadata))}s(r,"is"),t.is=r;function n(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!qee.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(n,"diff"),t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(Am.objectLiteral(o)&&Am.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(YF||(sa.NotebookCell=YF={}));var kbe;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Am.objectLiteral(i)&&Am.string(i.uri)&&$B.integer.is(i.version)&&Am.typedArray(i.cells,YF.is)}s(r,"is"),t.is=r})(kbe||(sa.NotebookDocument=kbe={}));var wS;(function(t){t.method="notebookDocument/sync",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.RegistrationType(t.method)})(wS||(sa.NotebookDocumentSyncRegistrationType=wS={}));var Bbe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Bbe||(sa.DidOpenNotebookDocumentNotification=Bbe={}));var Dbe;(function(t){function e(n){let i=n;return Am.objectLiteral(i)&&$B.uinteger.is(i.start)&&$B.uinteger.is(i.deleteCount)&&(i.cells===void 0||Am.typedArray(i.cells,YF.is))}s(e,"is"),t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(r,"create"),t.create=r})(Dbe||(sa.NotebookCellArrayChange=Dbe={}));var Pbe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Pbe||(sa.DidChangeNotebookDocumentNotification=Pbe={}));var Nbe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Nbe||(sa.DidSaveNotebookDocumentNotification=Nbe={}));var Lbe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=cg.MessageDirection.clientToServer,t.type=new cg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Lbe||(sa.DidCloseNotebookDocumentNotification=Lbe={}))});var Obe=G(KF=>{"use strict";f();Object.defineProperty(KF,"__esModule",{value:!0});KF.InlineCompletionRequest=void 0;var Mbe=Ls(),Qbe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Mbe.MessageDirection.clientToServer,t.type=new Mbe.ProtocolRequestType(t.method)})(Qbe||(KF.InlineCompletionRequest=Qbe={}))});var XEe=G(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Ls(),Ube=LF(),Dl=FF(),sat=dve();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return sat.ImplementationRequest},"get")});var aat=mve();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return aat.TypeDefinitionRequest},"get")});var zEe=Ave();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return zEe.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return zEe.DidChangeWorkspaceFoldersNotification},"get")});var lat=xve();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return lat.ConfigurationRequest},"get")});var YEe=Eve();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return YEe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return YEe.ColorPresentationRequest},"get")});var KEe=wve();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return KEe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return KEe.FoldingRangeRefreshRequest},"get")});var cat=Rve();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return cat.DeclarationRequest},"get")});var uat=Dve();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return uat.SelectionRangeRequest},"get")});var Vee=Fve();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Vee.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Vee.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Vee.WorkDoneProgressCancelNotification},"get")});var $ee=Uve();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return $ee.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return $ee.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return $ee.CallHierarchyPrepareRequest},"get")});var _S=Vve();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return _S.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return _S.SemanticTokensRegistrationType},"get")});var dat=Yve();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return dat.ShowDocumentRequest},"get")});var fat=Xve();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return fat.LinkedEditingRangeRequest},"get")});var CI=sbe();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return CI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return CI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return CI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return CI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return CI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return CI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return CI.WillDeleteFilesRequest},"get")});var zee=dbe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return zee.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return zee.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return zee.MonikerRequest},"get")});var Yee=hbe();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Yee.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return Yee.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return Yee.TypeHierarchySupertypesRequest},"get")});var JEe=ybe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return JEe.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return JEe.InlineValueRefreshRequest},"get")});var Kee=bbe();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return Kee.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return Kee.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return Kee.InlayHintRefreshRequest},"get")});var zB=Rbe();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return zB.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return zB.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return zB.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return zB.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return zB.DiagnosticRefreshRequest},"get")});var ug=Fbe();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return ug.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return ug.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return ug.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return ug.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return ug.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return ug.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return ug.DidCloseNotebookDocumentNotification},"get")});var pat=Obe();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return pat.InlineCompletionRequest},"get")});var Wee;(function(t){function e(r){let n=r;return Dl.string(n)||Dl.string(n.language)||Dl.string(n.scheme)||Dl.string(n.pattern)}s(e,"is"),t.is=e})(Wee||(xe.TextDocumentFilter=Wee={}));var Gee;(function(t){function e(r){let n=r;return Dl.objectLiteral(n)&&(Dl.string(n.notebookType)||Dl.string(n.scheme)||Dl.string(n.pattern))}s(e,"is"),t.is=e})(Gee||(xe.NotebookDocumentFilter=Gee={}));var Hee;(function(t){function e(r){let n=r;return Dl.objectLiteral(n)&&(Dl.string(n.notebook)||Gee.is(n.notebook))&&(n.language===void 0||Dl.string(n.language))}s(e,"is"),t.is=e})(Hee||(xe.NotebookCellTextDocumentFilter=Hee={}));var jee;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!Dl.string(n)&&!Wee.is(n)&&!Hee.is(n))return!1;return!0}s(e,"is"),t.is=e})(jee||(xe.DocumentSelector=jee={}));var qbe;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(qbe||(xe.RegistrationRequest=qbe={}));var Wbe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Wbe||(xe.UnregistrationRequest=Wbe={}));var Gbe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Gbe||(xe.ResourceOperationKind=Gbe={}));var Hbe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Hbe||(xe.FailureHandlingKind=Hbe={}));var jbe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(jbe||(xe.PositionEncodingKind=jbe={}));var Vbe;(function(t){function e(r){let n=r;return n&&Dl.string(n.id)&&n.id.length>0}s(e,"hasId"),t.hasId=e})(Vbe||(xe.StaticRegistrationOptions=Vbe={}));var $be;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||jee.is(n.documentSelector))}s(e,"is"),t.is=e})($be||(xe.TextDocumentRegistrationOptions=$be={}));var zbe;(function(t){function e(n){let i=n;return Dl.objectLiteral(i)&&(i.workDoneProgress===void 0||Dl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function r(n){let i=n;return i&&Dl.boolean(i.workDoneProgress)}s(r,"hasWorkDoneProgress"),t.hasWorkDoneProgress=r})(zbe||(xe.WorkDoneProgressOptions=zbe={}));var Ybe;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Ybe||(xe.InitializeRequest=Ybe={}));var Kbe;(function(t){t.unknownProtocolVersion=1})(Kbe||(xe.InitializeErrorCodes=Kbe={}));var Jbe;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Jbe||(xe.InitializedNotification=Jbe={}));var Xbe;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(Xbe||(xe.ShutdownRequest=Xbe={}));var Zbe;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(Zbe||(xe.ExitNotification=Zbe={}));var eEe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(eEe||(xe.DidChangeConfigurationNotification=eEe={}));var tEe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(tEe||(xe.MessageType=tEe={}));var rEe;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(rEe||(xe.ShowMessageNotification=rEe={}));var nEe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(nEe||(xe.ShowMessageRequest=nEe={}));var iEe;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(iEe||(xe.LogMessageNotification=iEe={}));var oEe;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(oEe||(xe.TelemetryEventNotification=oEe={}));var sEe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(sEe||(xe.TextDocumentSyncKind=sEe={}));var aEe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(aEe||(xe.DidOpenTextDocumentNotification=aEe={}));var lEe;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(r,"isFull"),t.isFull=r})(lEe||(xe.TextDocumentContentChangeEvent=lEe={}));var cEe;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(cEe||(xe.DidChangeTextDocumentNotification=cEe={}));var uEe;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(uEe||(xe.DidCloseTextDocumentNotification=uEe={}));var dEe;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(dEe||(xe.DidSaveTextDocumentNotification=dEe={}));var fEe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(fEe||(xe.TextDocumentSaveReason=fEe={}));var pEe;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(pEe||(xe.WillSaveTextDocumentNotification=pEe={}));var mEe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(mEe||(xe.WillSaveTextDocumentWaitUntilRequest=mEe={}));var hEe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(hEe||(xe.DidChangeWatchedFilesNotification=hEe={}));var gEe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(gEe||(xe.FileChangeType=gEe={}));var AEe;(function(t){function e(r){let n=r;return Dl.objectLiteral(n)&&(Ube.URI.is(n.baseUri)||Ube.WorkspaceFolder.is(n.baseUri))&&Dl.string(n.pattern)}s(e,"is"),t.is=e})(AEe||(xe.RelativePattern=AEe={}));var yEe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(yEe||(xe.WatchKind=yEe={}));var CEe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(CEe||(xe.PublishDiagnosticsNotification=CEe={}));var xEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(xEe||(xe.CompletionTriggerKind=xEe={}));var vEe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(vEe||(xe.CompletionRequest=vEe={}));var bEe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(bEe||(xe.CompletionResolveRequest=bEe={}));var EEe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(EEe||(xe.HoverRequest=EEe={}));var IEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(IEe||(xe.SignatureHelpTriggerKind=IEe={}));var TEe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(TEe||(xe.SignatureHelpRequest=TEe={}));var wEe;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(wEe||(xe.DefinitionRequest=wEe={}));var _Ee;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(_Ee||(xe.ReferencesRequest=_Ee={}));var SEe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(SEe||(xe.DocumentHighlightRequest=SEe={}));var REe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(REe||(xe.DocumentSymbolRequest=REe={}));var kEe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(kEe||(xe.CodeActionRequest=kEe={}));var BEe;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(BEe||(xe.CodeActionResolveRequest=BEe={}));var DEe;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(DEe||(xe.WorkspaceSymbolRequest=DEe={}));var PEe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(PEe||(xe.WorkspaceSymbolResolveRequest=PEe={}));var NEe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(NEe||(xe.CodeLensRequest=NEe={}));var LEe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(LEe||(xe.CodeLensResolveRequest=LEe={}));var FEe;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(FEe||(xe.CodeLensRefreshRequest=FEe={}));var MEe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(MEe||(xe.DocumentLinkRequest=MEe={}));var QEe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(QEe||(xe.DocumentLinkResolveRequest=QEe={}));var OEe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(OEe||(xe.DocumentFormattingRequest=OEe={}));var UEe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(UEe||(xe.DocumentRangeFormattingRequest=UEe={}));var qEe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(qEe||(xe.DocumentRangesFormattingRequest=qEe={}));var WEe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(WEe||(xe.DocumentOnTypeFormattingRequest=WEe={}));var GEe;(function(t){t.Identifier=1})(GEe||(xe.PrepareSupportDefaultBehavior=GEe={}));var HEe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(HEe||(xe.RenameRequest=HEe={}));var jEe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(jEe||(xe.PrepareRenameRequest=jEe={}));var VEe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(VEe||(xe.ExecuteCommandRequest=VEe={}));var $Ee;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})($Ee||(xe.ApplyWorkspaceEditRequest=$Ee={}))});var eIe=G(JF=>{"use strict";f();Object.defineProperty(JF,"__esModule",{value:!0});JF.createProtocolConnection=void 0;var ZEe=yI();function mat(t,e,r,n){return ZEe.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,ZEe.createMessageConnection)(t,e,r,n)}s(mat,"createProtocolConnection");JF.createProtocolConnection=mat});var rIe=G(md=>{"use strict";f();var hat=md&&md.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XF=md&&md.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hat(e,t,r)};Object.defineProperty(md,"__esModule",{value:!0});md.LSPErrorCodes=md.createProtocolConnection=void 0;XF(yI(),md);XF(LF(),md);XF(Ls(),md);XF(XEe(),md);var gat=eIe();Object.defineProperty(md,"createProtocolConnection",{enumerable:!0,get:s(function(){return gat.createProtocolConnection},"get")});var tIe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(tIe||(md.LSPErrorCodes=tIe={}))});var ii=G(dg=>{"use strict";f();var Aat=dg&&dg.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),nIe=dg&&dg.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Aat(e,t,r)};Object.defineProperty(dg,"__esModule",{value:!0});dg.createProtocolConnection=void 0;var yat=Nee();nIe(Nee(),dg);nIe(rIe(),dg);function Cat(t,e,r,n){return(0,yat.createMessageConnection)(t,e,r,n)}s(Cat,"createProtocolConnection");dg.createProtocolConnection=Cat});var jIe=G((hM,HIe)=>{f();(function(t,e){typeof hM=="object"&&typeof HIe<"u"?e(hM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(hM,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function r(w,R){return w[R]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=r(E,c),k=e(String),B=r(k,c),N=e(Math),q=e(Array),te=r(q,c),me=r(te,"slice");function oe(w,R){try{return{v:w.apply(this,R)}}catch(D){return{e:D}}}s(oe,"safe");function H(w){return function(R){return typeof R===w}}s(H,"_createIs");function O(w){var R="[object "+w+"]";return function(D){return!!(D&&le(D)===R)}}s(O,"_createObjIs");function le(w){return _[b].call(w)}s(le,"objToString");function ie(w){return typeof w===d||w===d}s(ie,"isUndefined");function j(w){return!Y(w)}s(j,"isStrictUndefined");function W(w){return w===i||ie(w)}s(W,"isNullOrUndefined");function Y(w){return!!w||w!==n}s(Y,"isDefined");var ee=H("string"),pe=H(a);function re(w){return!w&&W(w)?!1:!!w&&typeof w===l}s(re,"isObject");var fe=r(q,"isArray"),he=O("Error"),Ne=r(E,"getOwnPropertyDescriptor");function Re(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(Re,"objHasOwnProperty");var Je=e(r(E,"hasOwn"),Me);function Me(w,R){return Re(w,R)||!!Ne(w,R)}s(Me,"polyObjHasOwn");function pt(w,R,D){if(w&&re(w)){for(var F in w)if(Je(w,F)&&R[v](D||w,F,w[F])===-1)break}}s(pt,"objForEachKey");var Tt={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Ct(w){var R={};if(R[Tt.c]=!0,R[Tt.e]=!0,w.l){R.get=function(){return w.l.v};var D=Ne(w.l,"v");D&&D.set&&(R.set=function(F){w.l.v=F})}return pt(w,function(F,se){R[Tt[F]]=j(se)?R[Tt[F]]:se}),R}s(Ct,"_createProp");var bt=r(E,"defineProperty");function ce(w,R,D){return bt(w,R,Ct(D))}s(ce,"objDefine");function Oe(w,R,D,F,se){var Ee={};return pt(w,function(we,Qe){ye(Ee,we,R?Qe:we),ye(Ee,Qe,D?Qe:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,D,F){bt(w,R,{value:D,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),X="[object Error]";function ne(w,R){var D=o,F=_[b][v](w);F===X&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{D=JSON.stringify(w,i,R?typeof R=="number"?R:4:n),D=(D?D.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(se){D=" - "+ne(se,R)}return F+": "+D}s(ne,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function Pe(w){throw new TypeError(w)}s(Pe,"throwTypeError");var be=r(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var gt=r(E,"assign"),Ot=r(E,"keys"),lr=e(be,ze),Lt=e(r(E,"getPrototypeOf"),it);function Gr(w){return Oe(w,1,0,lr)}s(Gr,"createEnum");function Yr(w){var R={};return pt(w,function(D,F){ye(R,D,F[1]),ye(R,F[0],F[1])}),lr(R)}s(Yr,"createSimpleMap");function hn(w){return Yr(w)}s(hn,"createTypeMap");var Ae="__tsUtils$gblCfg",Ge;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function yt(){if(!Ge){var w=oe(ut).v||{};Ge=w[Ae]=w[Ae]||{}}return Ge}s(yt,"_getGlobalConfig");var Xt=Gt;function Gt(w,R,D){var F=R?R[w]:i;return function(se){var Ee=(se?se[w]:i)||F;if(Ee||D){var we=arguments;return(Ee||D).apply(se,Ee?me[v](we,1):we)}Pe('"'+tt(w)+'" not defined for '+ne(se))}}s(Gt,"_unwrapFunctionWithPoly");var Ar=r(N,"min"),xr=r(N,"max"),jt=Xt("slice",B),rr=Xt("substring",B),Jt=Gt("substr",B,Ir);function Ir(w,R,D){return W(w)&&Pe("Invalid "+ne(w)),D<0?o:(R=R||0,R<0&&(R=xr(R+w[g],0)),ie(D)?jt(w,R):jt(w,R,R+D))}s(Ir,"polyStrSubstr");function Nr(w,R){return rr(w,0,R)}s(Nr,"strLeft");var Kr="_urid",Wn;function Jn(){if(!Wn){var w=yt();Wn=w.gblSym=w.gblSym||{k:{},s:{}}}return Wn}s(Jn,"_globalSymbolRegistry");function Qn(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Qn,"polyNewSymbol");function $n(w){var R=Jn();if(!Je(R.k,w)){var D=Qn(w),F=Ot(R.s).length;D[Kr]=function(){return F+"_"+D[b]()},R.k[w]=D,R.s[D[Kr]()]=tt(w)}return R.k[w]}s($n,"polySymbolFor");var rn;function zn(){rn=yt()}s(zn,"_initTestHooks");function _e(w){return bt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var U="window",ge;function ve(w,R){var D;return function(){return!rn&&zn(),(!D||rn.lzy)&&(D=_e(oe(w,R).v)),D.v}}s(ve,"_getGlobalInstFn");function Z(w){return!rn&&zn(),(!ge||w===!1||rn.lzy)&&(ge=_e(oe(ut).v||i)),ge.v}s(Z,"getGlobal");function M(w,R){var D;if(!ge||R===!1?D=Z(R):D=ge.v,D&&D[w])return D[w];if(w===U)try{return window}catch{}return i}s(M,"getInst");var ke=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[U]);function _r(){return!!pr()}s(_r,"hasNavigator");var pr=ve(M,["navigator"]),un,gn;function vr(){return un=_e(oe(M,[m]).v),un}s(vr,"_initSymbol");function Ht(w){var R=(rn.lzy?0:un)||vr();return R.v?R.v[w]:n}s(Ht,"_getSymbolKey");function On(w,R){!rn&&zn();var D=(rn.lzy?0:un)||vr();return D.v?D.v(w):R?i:Qn(w)}s(On,"newSymbol");function qs(w){return!rn&&zn(),gn=(rn.lzy?0:gn)||_e(oe(Ht,["for"]).v),(gn.v||$n)(w)}s(qs,"symbolFor");function Fp(w,R,D){return w.apply(R,D)}s(Fp,"fnApply");function bl(w,R,D){if(w)for(var F=w[g]>>>0,se=0;se<F&&!(se in w&&R[v](D||w,w[se],se,w)===-1);se++);}s(bl,"arrForEach");var Mp=Xt("indexOf",te),sf=Xt("map",te),na=Xt("reduce",te),vh=e(r(E,"create"),rC);function rC(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&Pe("Prototype must be an Object or function: "+ne(w));function D(){}return s(D,"tempFunc"),D[c]=w,new D}s(rC,"polyObjCreate");var qk;function Qp(w,R){var D=E.setPrototypeOf||function(F,se){var Ee;!qk&&(qk=_e((Ee={},Ee[u]=[],Ee instanceof Array))),qk.v?F[u]=se:pt(se,function(we,Qe){return F[we]=Qe})};return D(w,R)}s(Qp,"objSetPrototypeOf");function gK(w,R,D){oe(ce,[R,y,{v:w,c:!0,e:!1}]),R=Qp(R,D);function F(){this[p]=R,oe(ce,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=D===i?vh(D):(F[c]=D[c],new F),R}s(gK,"_createCustomError");function bh(w,R){R&&(w[y]=R)}s(bh,"_setName");function AK(w,R,D){var F=D||Error,se=F[c][y],Ee=Error.captureStackTrace;return gK(w,function(){var we=this,Qe=arguments;try{oe(bh,[F,w]);var Xe=Fp(F,we,me[v](Qe))||we;if(Xe!==we){var mt=Lt(we);mt!==Lt(Xe)&&Qp(Xe,mt)}return Ee&&Ee(Xe,we[p]),R&&R(Xe,Qe),Xe}finally{oe(bh,[F,se])}},F)}s(AK,"createCustomError");function OA(){return(Date.now||Wk)()}s(OA,"utcNow");function Wk(){return new Date().getTime()}s(Wk,"polyUtcNow");function fw(w){return s(function(D){return W(D)&&Pe("strTrim called ["+ne(D)+"]"),D&&D.replace&&(D=D.replace(w,o)),D},"_doTrim")}s(fw,"_createTrimFn");var yK=fw(/^\s+|(?=\s)\s+$/g),Rc=Gt("trim",B,yK),Eh=r(N,"floor"),tE,UA,rE;function Ih(w){if(!w||typeof w!==l)return!1;rE||(rE=$e()?qt():!0);var R=!1;if(w!==rE){UA||(tE=Function[c][b],UA=tE[v](E));try{var D=Lt(w);R=!D,R||(Re(D,p)&&(D=D[p]),R=!!(D&&typeof D===a&&tE[v](D)===UA))}catch{}}return R}s(Ih,"isPlainObject");var pw;function nE(){return!rn&&zn(),(!pw||rn.lzy)&&(pw=_e(oe(M,["performance"]).v)),pw.v}s(nE,"getPerformance");var Gk=r(N,"round"),nC=Gt("endsWith",B,iC);function iC(w,R,D){ee(w)||Pe("'"+ne(w)+"' is not a string");var F=ee(R)?R:tt(R),se=!ie(D)&&D<w[g]?D:w[g];return rr(w,se-F[g],se)===F}s(iC,"polyStrEndsWith");var qr=Xt("indexOf",B),pu="ref",qA="unref",oC="hasRef",CK="enabled";function Th(w,R,D){var F=!0,se=w?R(i):i,Ee;function we(){return F=!1,se&&se[qA]&&se[qA](),Ee}s(we,"_unref");function Qe(){se&&D(se),se=i}s(Qe,"_cancel");function Xe(){return se=R(se),F||we(),Ee}s(Xe,"_refresh");function mt(ir){!ir&&se&&Qe(),ir&&!se&&Xe()}return s(mt,"_setEnabled"),Ee={cancel:Qe,refresh:Xe},Ee[oC]=function(){return se&&se[oC]?se[oC]():F},Ee[pu]=function(){return F=!0,se&&se[pu]&&se[pu](),Ee},Ee[qA]=we,Ee=bt(Ee,CK,{get:s(function(){return!!se},"get"),set:mt}),{h:Ee,dn:s(function(){se=i},"dn")}}s(Th,"_createTimerHandler");function xK(w,R,D){var F=fe(R),se=F?R.length:0,Ee=(se>0?R[0]:F?n:R)||setTimeout,we=(se>1?R[1]:n)||clearTimeout,Qe=D[0];D[0]=function(){Xe.dn(),Fp(Qe,n,me[v](arguments))};var Xe=Th(w,function(mt){if(mt){if(mt.refresh)return mt.refresh(),mt;Fp(we,n,[mt])}return Fp(Ee,n,D)},function(mt){Fp(we,n,[mt])});return Xe.h}s(xK,"_createTimeoutWith");function Hk(w,R){return xK(!0,n,me[v](arguments))}s(Hk,"scheduleTimeout");var iE=Gr,vK=hn,oE="toLowerCase",Qa="length",wh="warnToConsole",sE="throwInternal",sN="watch",bK="apply",ji="push",WA="splice",_h="logger",jk="cancel",aE="name",mu="unload",aN="version",lN="loggingLevelConsole",Vk="messageId",GA="message",$k="diagLog",cN="userAgent",zk="split",sC="replace",Sh="type",uN="evtName",mw="traceFlags",Yk="getAttribute",hw;function EK(w,R){hw||(hw=AK("AggregationError",function(F,se){se[Qa]>1&&(F.errors=se[1])}));var D=w||"One or more errors occurred.";throw bl(R,function(F,se){D+=`
`.concat(se," > ").concat(ne(F))}),new hw(D,R||[])}s(EK,"throwAggregationError");var IK="function",dN="object",TK="undefined",Op="prototype",gw=Object,Kk=gw[Op];(Z()||{}).Symbol,(Z()||{}).Reflect;var Aw="hasOwnProperty",wK=s(function(w){for(var R,D=1,F=arguments.length;D<F;D++){R=arguments[D];for(var se in R)Kk[Aw].call(R,se)&&(w[se]=R[se])}return w},"__objAssignFnImpl"),yw=gt||wK,Cw=s(function(w,R){return Cw=gw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var se in F)F[Aw](se)&&(D[se]=F[se])},Cw(w,R)},"extendStaticsFn");function Rh(w,R){typeof R!==IK&&R!==null&&Pe("Class extends value "+String(R)+" is not a constructor or null"),Cw(w,R);function D(){this.constructor=w}s(D,"__"),w[Op]=R===null?vh(R):(D[Op]=R[Op],new D)}s(Rh,"__extendsFn");var xw,HA="constructor",Ju="prototype",Xu="function",jA="_dynInstFuncs",aC="_isDynProxy",kh="_dynClass",lC="_dynCls$",Jk="_dynInstChk",VA=Jk,cC="_dfOpts",Xk="_unknown_",vw="__proto__",uC="_dyn"+vw,lE="__dynProto$Gbl",bw="_dynInstProto",dC="useBaseInst",fC="setInstFuncs",cE=Object,$A=cE.getPrototypeOf,pC=cE.getOwnPropertyNames,Zk=Z(),Ew=Zk[lE]||(Zk[lE]={o:(xw={},xw[fC]=!0,xw[dC]=!0,xw),n:1e3});function mC(w){return w&&(w===cE[Ju]||w===Array[Ju])}s(mC,"_isObjectOrArrayPrototype");function hC(w){return mC(w)||w===Function[Ju]}s(hC,"_isObjectArrayOrFunctionPrototype");function Up(w){var R;if(w){if($A)return $A(w);var D=w[vw]||w[Ju]||(w[HA]?w[HA][Ju]:null);R=w[uC]||D,Re(w,uC)||(delete w[bw],R=w[uC]=w[bw]||w[uC],w[bw]=D)}return R}s(Up,"_getObjProto");function af(w,R){var D=[];if(pC)D=pC(w);else for(var F in w)typeof F=="string"&&Re(w,F)&&D.push(F);if(D&&D.length>0)for(var se=0;se<D.length;se++)R(D[se])}s(af,"_forEachProp");function gC(w,R,D){return R!==HA&&typeof w[R]===Xu&&(D||Re(w,R))&&R!==vw&&R!==Ju}s(gC,"_isDynamicCandidate");function AC(w){Pe("DynamicProto: "+w)}s(AC,"_throwTypeError");function Iw(w){var R=vh(null);return af(w,function(D){!R[D]&&gC(w,D,!1)&&(R[D]=w[D])}),R}s(Iw,"_getInstanceFuncs");function e3(w,R){for(var D=w.length-1;D>=0;D--)if(w[D]===R)return!0;return!1}s(e3,"_hasVisited");function t3(w,R,D,F){function se(Xe,mt,ir){var _n=mt[ir];if(_n[aC]&&F){var Gn=Xe[jA]||{};Gn[VA]!==!1&&(_n=(Gn[mt[kh]]||{})[ir]||_n)}return function(){return _n.apply(Xe,arguments)}}s(se,"_instFuncProxy");var Ee=vh(null);af(D,function(Xe){Ee[Xe]=se(R,D,Xe)});for(var we=Up(w),Qe=[];we&&!hC(we)&&!e3(Qe,we);)af(we,function(Xe){!Ee[Xe]&&gC(we,Xe,!$A)&&(Ee[Xe]=se(R,we,Xe))}),Qe.push(we),we=Up(we);return Ee}s(t3,"_getBaseFuncs");function _K(w,R,D,F){var se=null;if(w&&Re(D,kh)){var Ee=w[jA]||vh(null);if(se=(Ee[D[kh]]||vh(null))[R],se||AC("Missing ["+R+"] "+Xu),!se[Jk]&&Ee[VA]!==!1){for(var we=!Re(w,R),Qe=Up(w),Xe=[];we&&Qe&&!hC(Qe)&&!e3(Xe,Qe);){var mt=Qe[R];if(mt){we=mt===F;break}Xe.push(Qe),Qe=Up(Qe)}try{we&&(w[R]=se),se[Jk]=1}catch{Ee[VA]=!1}}}return se}s(_K,"_getInstFunc");function SK(w,R,D){var F=R[w];return F===D&&(F=Up(R)[w]),typeof F!==Xu&&AC("["+w+"] is not a "+Xu),F}s(SK,"_getProtoFunc");function RK(w,R,D,F,se){function Ee(Xe,mt){var ir=s(function(){var _n=_K(this,mt,Xe,ir)||SK(mt,Xe,ir);return _n.apply(this,arguments)},"dynProtoProxy");return ir[aC]=1,ir}if(s(Ee,"_createDynamicPrototype"),!mC(w)){var we=D[jA]=D[jA]||vh(null);if(!mC(we)){var Qe=we[R]=we[R]||vh(null);we[VA]!==!1&&(we[VA]=!!se),mC(Qe)||af(D,function(Xe){gC(D,Xe,!1)&&D[Xe]!==F[Xe]&&(Qe[Xe]=D[Xe],delete D[Xe],(!Re(w,Xe)||w[Xe]&&!w[Xe][aC])&&(w[Xe]=Ee(w,Xe)))})}}}s(RK,"_populatePrototype");function kK(w,R){if($A){for(var D=[],F=Up(R);F&&!hC(F)&&!e3(D,F);){if(F===w)return!0;D.push(F),F=Up(F)}return!1}return!0}s(kK,"_checkPrototype");function r3(w,R){return Re(w,Ju)?w.name||R||Xk:((w||{})[HA]||{}).name||R||Xk}s(r3,"_getObjName");function uE(w,R,D,F){Re(w,Ju)||AC("theClass is an invalid class definition.");var se=w[Ju];kK(se,R)||AC("["+r3(w)+"] not in hierarchy of ["+r3(R)+"]");var Ee=null;Re(se,kh)?Ee=se[kh]:(Ee=lC+r3(w,"_")+"$"+Ew.n,Ew.n++,se[kh]=Ee);var we=uE[cC],Qe=!!we[dC];Qe&&F&&F[dC]!==void 0&&(Qe=!!F[dC]);var Xe=Iw(R),mt=t3(se,R,Xe,Qe);D(R,mt);var ir=!!$A&&!!we[fC];ir&&F&&(ir=!!F[fC]),RK(se,Ee,R,Xe,ir!==!1)}s(uE,"dynamicProto"),uE[cC]=Ew.o;var tc=void 0,Ws="",fN="Not dynamic - ",pN=/-([a-z])/g,dE=/([^\w\d_$])/g,n3=/^(\d+[\w\d_$])/;function i3(w){return!W(w)}s(i3,"isNotNullOrUndefined");function Tw(w){var R=w;return R&&ee(R)&&(R=R[sC](pN,function(D,F){return F.toUpperCase()}),R=R[sC](dE,"_"),R=R[sC](n3,function(D,F){return"_"+F})),R}s(Tw,"normalizeJsName");function mN(w,R){return w&&R?qr(w,R)!==-1:!1}s(mN,"strContains");function qp(w){return w&&w.toISOString()||""}s(qp,"toISOString");function Bh(w){return he(w)?w[aE]:Ws}s(Bh,"getExceptionName");function fE(w){return function(){function R(){var D=this;w&&pt(w,function(F,se){D[F]=se})}return s(R,"class_1"),R}()}s(fE,"createClassFromInterface");var hN="console",ww="JSON",BK="crypto",Dh="msCrypto",yC="msie",Yn="trident/",CC=null,zA=null,Wp=null;function _w(){return typeof console!==TK?console:M(hN)}s(_w,"getConsole");function Vi(){return!!(typeof JSON===dN&&JSON||M(ww)!==null)}s(Vi,"hasJSON");function xC(){return Vi()?JSON||M(ww):null}s(xC,"getJSON");function ga(){return M(BK)}s(ga,"getCrypto");function vC(){return M(Dh)}s(vC,"getMsCrypto");function pE(){var w=pr();if(w&&(w[cN]!==zA||CC===null)){zA=w[cN];var R=(zA||Ws)[oE]();CC=mN(R,yC)||mN(R,Yn)}return CC}s(pE,"isIE");function Ph(w){return(Wp===null||w===!1)&&(Wp=_r()&&!!pr().sendBeacon),Wp}s(Ph,"isBeaconsSupported");function mE(w,R){if(w)for(var D=0;D<w[Qa];D++){var F=w[D];if(F[aE]&&F[aE]===R)return F}return{}}s(mE,"_getNamedValue");function Sw(w){var R=ke();return R&&w?mE(R.querySelectorAll("meta"),w).content:null}s(Sw,"findMetaTag");function lf(w){var R,D=nE();if(D){var F=D.getEntriesByType("navigation")||[];R=mE((F[Qa]>0?F[0]:{}).serverTiming,w).description}return R}s(lf,"findNamedServerTiming");var bC=4294967296,Yd=4294967295,EC=123456789,Nh=987654321,El=!1,IC=EC,cf=Nh;function gN(w){w<0&&(w>>>=0),IC=EC+w&Yd,cf=Nh-w&Yd,El=!0}s(gN,"_mwcSeed");function YA(){try{var w=OA()&2147483647;gN((Math.random()*bC^w)+w)}catch{}}s(YA,"_autoSeedMwc");function Rw(w){return w>0?Eh(TC()/Yd*(w+1))>>>0:0}s(Rw,"randomValue");function TC(w){var R=0,D=ga()||vC();return D&&D.getRandomValues&&(R=D.getRandomValues(new Uint32Array(1))[0]&Yd),R===0&&pE()&&(El||YA(),R=AN()&Yd),R===0&&(R=Eh(bC*Math.random()|0)),w||(R>>>=0),R}s(TC,"random32");function AN(w){cf=36969*(cf&65535)+(cf>>16)&Yd,IC=18e3*(IC&65535)+(IC>>16)&Yd;var R=(cf<<16)+(IC&65535)>>>0&Yd|0;return w||(R>>>=0),R}s(AN,"mwcRandom32");function KA(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D=TC()>>>0,F=0,se=Ws;se[Qa]<w;)F++,se+=R.charAt(D&63),D>>>=6,F===5&&(D=(TC()<<2&4294967295|D&3)>>>0,F=0);return se}s(KA,"newId");var uf="3.3.6",kw="."+KA(6),JA=0;function df(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(df,"_canAcceptData");function Bw(w,R){var D=R[w.id];if(!D){D={};try{df(R)&&ce(R,w.id,{e:!1,v:D})}catch{}}return D}s(Bw,"_getCache");function Gp(w,R){return R===void 0&&(R=!1),Tw(w+JA+++(R?"."+uf:Ws)+kw)}s(Gp,"createUniqueNamespace");function ff(w){var R={id:Gp("_aiData-"+(w||Ws)+"."+uf),accept:s(function(D){return df(D)},"accept"),get:s(function(D,F,se,Ee){var we=D[R.id];return we?we[Tw(F)]:(Ee&&(we=Bw(R,D),we[Tw(F)]=se),se)},"get"),kill:s(function(D,F){if(D&&D[F])try{delete D[F]}catch{}},"kill")};return R}s(ff,"createElmNodeData");function Lh(w){return w&&re(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(Lh,"_isConfigDefaults");function Dw(w,R,D){var F,se=D.dfVal||Y;if(R&&D.fb){var Ee=D.fb;fe(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[Qa];we++){var Qe=Ee[we],Xe=R[Qe];if(se(Xe)?F=Xe:w&&(Xe=w.cfg[Qe],se(Xe)&&(F=Xe),w.set(w.cfg,tt(Qe),Xe)),se(F))break}}return!se(F)&&se(D.v)&&(F=D.v),F}s(Dw,"_getDefault");function Fh(w,R,D){var F=D;if(D&&Lh(D)&&(F=Dw(w,R,D)),F){Lh(F)&&(F=Fh(w,R,F));var se;fe(F)?(se=[],se[Qa]=F[Qa]):Ih(F)&&(se={}),se&&(pt(F,function(Ee,we){we&&Lh(we)&&(we=Fh(w,R,we)),se[Ee]=we}),F=se)}return F}s(Fh,"_resolveDefaultValue");function Mh(w,R,D,F){var se,Ee,we,Qe=F,Xe,mt,ir,_n;Lh(Qe)?(se=Qe.isVal,Ee=Qe.set,ir=Qe.rdOnly,_n=Qe.blkVal,Xe=Qe.mrg,mt=Qe.ref,!mt&&ie(mt)&&(mt=!!Xe),we=Dw(w,R,Qe)):we=F,_n&&w.blkVal(R,D);var Gn,cr=!0,br=R[D];(br||!W(br))&&(Gn=br,cr=!1,se&&Gn!==we&&!se(Gn)&&(Gn=we,cr=!0),Ee&&(Gn=Ee(Gn,we,R),cr=Gn===we)),cr?we?Gn=Fh(w,R,we):Gn=we:(Ih(Gn)||fe(we))&&Xe&&we&&(Ih(we)||fe(we))&&pt(we,function(Un,Sn){Mh(w,Gn,Un,Sn)}),w.set(R,D,Gn),mt&&w.ref(R,D),ir&&w.rdOnly(R,D)}s(Mh,"_applyDefaultValue");var rc=qs("[[ai_dynCfg_1]]"),o3=qs("[[ai_blkDynCfg_1]]"),hE=qs("[[ai_frcDynCfg_1]]");function s3(w){if(w){var R;if(fe(w)?(R=[],R[Qa]=w[Qa]):Ih(w)&&(R={}),R)return pt(w,function(D,F){R[D]=s3(F)}),R}return w}s(s3,"_cfgDeepCopy");function a3(w){if(w){var R=w[rc]||w;if(R.cfg&&(R.cfg===w||R.cfg[rc]===R))return R}return null}s(a3,"getDynamicConfigHandler");function wC(w){if(w&&(Ih(w)||fe(w)))try{w[o3]=!0}catch{}return w}s(wC,"blockDynamicConversion");function Qh(w,R,D){var F=!1;return D&&!w[R.blkVal]&&(F=D[hE],!F&&!D[o3]&&(F=Ih(D)||fe(D))),F}s(Qh,"_canMakeDynamic");function Kd(w){Pe("InvalidAccess:"+w)}s(Kd,"throwInvalidAccess");var yN=["push","pop","shift","unshift","splice"],Hp=s(function(w,R,D,F){w&&w[sE](3,108,"".concat(D," [").concat(R,"] failed - ")+ne(F))},"_throwDynamicError");function l3(w,R,D){fe(R)&&bl(yN,function(F){var se=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Qe=se[bK](this,Ee);return XA(w,R,D,"Patching"),Qe}})}s(l3,"_patchArray");function jp(w,R){var D=Ne(w,R);return D&&D.get}s(jp,"_getOwnPropGetter");function CN(w,R,D,F){var se={n:D,h:[],trk:s(function(mt){mt&&mt.fn&&(Mp(se.h,mt)===-1&&se.h[ji](mt),w.trk(mt,se))},"trk"),clr:s(function(mt){var ir=Mp(se.h,mt);ir!==-1&&se.h[WA](ir,1)},"clr")},Ee=!0,we=!1;function Qe(){Ee&&(we=we||Qh(Qe,w,F),F&&!F[rc]&&we&&(F=XA(w,F,D,"Converting")),Ee=!1);var mt=w.act;return mt&&se.trk(mt),F}s(Qe,"_getProperty"),Qe[w.prop]={chng:s(function(){w.add(se)},"chng")};function Xe(mt){if(F!==mt){Qe[w.ro]&&!w.upd&&Kd("["+D+"] is read-only:"+ne(R)),Ee&&(we=we||Qh(Qe,w,F),Ee=!1);var ir=we&&Qe[w.rf];if(we)if(ir){pt(F,function(Gn){F[Gn]=mt?mt[Gn]:tc});try{pt(mt,function(Gn,cr){_C(w,F,Gn,cr)}),mt=F}catch(Gn){Hp((w.hdlr||{})[_h],D,"Assigning",Gn),we=!1}}else F&&F[rc]&&pt(F,function(Gn){var cr=jp(F,Gn);if(cr){var br=cr[w.prop];br&&br.chng()}});if(mt!==F){var _n=mt&&Qh(Qe,w,mt);!ir&&_n&&(mt=XA(w,mt,D,"Converting")),F=mt,we=_n}w.add(se)}}s(Xe,"_setProperty"),ce(R,se.n,{g:Qe,s:Xe})}s(CN,"_createDynamicProperty");function _C(w,R,D,F){if(R){var se=jp(R,D),Ee=se&&!!se[w.prop];Ee?R[D]=F:CN(w,R,D,F)}return R}s(_C,"_setDynamicProperty");function c3(w,R,D,F){if(R){var se=jp(R,D),Ee=se&&!!se[w.prop],we=F&&F[0],Qe=F&&F[1],Xe=F&&F[2];if(!Ee){if(Xe)try{wC(R)}catch(mt){Hp((w.hdlr||{})[_h],D,"Blocking",mt)}try{_C(w,R,D,R[D]),se=jp(R,D)}catch(mt){Hp((w.hdlr||{})[_h],D,"State",mt)}}we&&(se[w.rf]=we),Qe&&(se[w.ro]=Qe),Xe&&(se[w.blkVal]=!0)}return R}s(c3,"_setDynamicPropertyState");function XA(w,R,D,F){try{pt(R,function(se,Ee){_C(w,R,se,Ee)}),R[rc]||(bt(R,rc,{get:s(function(){return w.hdlr},"get")}),l3(w,R,D))}catch(se){Hp((w.hdlr||{})[_h],D,F,se)}return R}s(XA,"_makeDynamicObject");var ZA="[[ai_",Zu="]]";function xN(w){var R=On(ZA+"get"+w.uid+Zu),D=On(ZA+"ro"+w.uid+Zu),F=On(ZA+"rf"+w.uid+Zu),se=On(ZA+"blkVal"+w.uid+Zu),Ee=On(ZA+"dtl"+w.uid+Zu),we=null,Qe=null,Xe;function mt(cr,br){var Un=Xe.act;try{Xe.act=cr,cr&&cr[Ee]&&(bl(cr[Ee],function(hi){hi.clr(cr)}),cr[Ee]=[]),br({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(hi){var Sn=w[_h];throw Sn&&Sn[sE](1,107,ne(hi)),hi}finally{Xe.act=Un||null}}s(mt,"_useHandler");function ir(){if(we){var cr=we;we=null,Qe&&Qe[jk](),Qe=null;var br=[];if(bl(cr,function(Un){if(Un&&(Un[Ee]&&(bl(Un[Ee],function(Sn){Sn.clr(Un)}),Un[Ee]=null),Un.fn))try{mt(Un,Un.fn)}catch(Sn){br[ji](Sn)}}),we)try{ir()}catch(Un){br[ji](Un)}br[Qa]>0&&EK("Watcher error(s): ",br)}}s(ir,"_notifyWatchers");function _n(cr){if(cr&&cr.h[Qa]>0){we||(we=[]),Qe||(Qe=Hk(function(){Qe=null,ir()},0));for(var br=0;br<cr.h[Qa];br++){var Un=cr.h[br];Un&&Mp(we,Un)===-1&&we[ji](Un)}}}s(_n,"_addWatcher");function Gn(cr,br){if(cr){var Un=cr[Ee]=cr[Ee]||[];Mp(Un,br)===-1&&Un[ji](br)}}return s(Gn,"_trackHandler"),Xe={prop:R,ro:D,rf:F,blkVal:se,hdlr:w,add:_n,notify:ir,use:mt,trk:Gn},Xe}s(xN,"_createState");function DK(w,R){var D={fn:R,rm:s(function(){D.fn=null,w=null,R=null},"rm")};return ce(D,"toJSON",{v:s(function(){return"WatcherHandler"+(D.fn?"":"[X]")},"v")}),w.use(D,R),D}s(DK,"_createAndUseHandler");function vN(w,R,D){var F=a3(R);if(F)return F;var se=Gp("dyncfg",!0),Ee=R&&D!==!1?R:s3(R),we;function Qe(){we.notify()}s(Qe,"_notifyWatchers");function Xe(Sn,hi,no){try{Sn=_C(we,Sn,hi,no)}catch(Bi){Hp(w,hi,"Setting value",Bi)}return Sn[hi]}s(Xe,"_setValue");function mt(Sn){return DK(we,Sn)}s(mt,"_watch");function ir(Sn,hi){we.use(null,function(no){var Bi=we.upd;try{ie(hi)||(we.upd=hi),Sn(no)}finally{we.upd=Bi}})}s(ir,"_block");function _n(Sn,hi){var no;return c3(we,Sn,hi,(no={},no[0]=!0,no))[hi]}s(_n,"_ref");function Gn(Sn,hi){var no;return c3(we,Sn,hi,(no={},no[1]=!0,no))[hi]}s(Gn,"_rdOnly");function cr(Sn,hi){var no;return c3(we,Sn,hi,(no={},no[2]=!0,no))[hi]}s(cr,"_blkPropValue");function br(Sn,hi){return hi&&pt(hi,function(no,Bi){Mh(Un,Sn,no,Bi)}),Sn}s(br,"_applyDefaults");var Un={uid:null,cfg:Ee,logger:w,notify:Qe,set:Xe,setDf:br,watch:mt,ref:_n,rdOnly:Gn,blkVal:cr,_block:ir};return ce(Un,"uid",{c:!1,e:!1,w:!1,v:se}),we=xN(Un),XA(we,Ee,"config","Creating"),Un}s(vN,"_createDynamicHandler");function bN(w,R){w?(w[wh](R),w[sE](2,108,R)):Kd(R)}s(bN,"_logInvalidAccess");function gE(w,R,D,F){var se=vN(D,w||{},F);return R&&se.setDf(se.cfg,R),se}s(gE,"createDynamicConfig");function EN(w,R,D){var F=w[rc]||w;return F.cfg&&(F.cfg===w||F.cfg[rc]===F)?F[sN](R):(bN(D,fN+ne(w)),gE(w,null,D)[sN](R))}s(EN,"onConfigChange");var Pw=null;function IN(){var w=M("Microsoft");return w&&(Pw=w.ApplicationInsights),Pw}s(IN,"_getExtensionNamespace");function PK(w){var R=Pw;return!R&&w.disableDbgExt!==!0&&(R=Pw||IN()),R?R.ChromeDbgExt:null}s(PK,"getDebugExt");var SC,Nw="warnToConsole",TN="AI (Internal): ",wN="AI: ",NK="AITR_",LK={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},_N=(SC={},SC[0]=null,SC[1]="errorToConsole",SC[2]=Nw,SC[3]="debugToConsole",SC);function SN(w){return w?'"'+w[sC](/\"/g,Ws)+'"':Ws}s(SN,"_sanitizeDiagnosticText");function Lw(w,R){var D=_w();if(D){var F="log";D[w]&&(F=w),pe(D[F])&&D[F](R)}}s(Lw,"_logToConsole");var Fw=function(){function w(R,D,F,se){F===void 0&&(F=!1);var Ee=this;Ee[Vk]=R,Ee[GA]=(F?wN:TN)+R;var we=Ws;Vi()&&(we=xC().stringify(se));var Qe=(D?" message:"+SN(D):Ws)+(se?" props:"+SN(we):Ws);Ee[GA]+=Qe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function FK(w,R){return(w||{})[_h]||new Mw(R)}s(FK,"safeGetLogger");var Mw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var D=0,F={},se,Ee,we,Qe,Xe;uE(w,this,function(mt){Xe=_n(R||{}),mt.consoleLoggingLevel=function(){return se},mt[sE]=function(br,Un,Sn,hi,no){no===void 0&&(no=!1);var Bi=new Fw(Un,Sn,no,hi);if(Qe)throw ne(Bi);var Oa=_N[br]||Nw;if(ie(Bi[GA]))cr("throw"+(br===1?"Critical":"Warning"),Bi);else{if(no){var ox=+Bi[Vk];!F[ox]&&se>=br&&(mt[Oa](Bi[GA]),F[ox]=!0)}else se>=br&&mt[Oa](Bi[GA]);ir(br,Bi)}},mt.debugToConsole=function(br){Lw("debug",br),cr("warning",br)},mt[wh]=function(br){Lw("warn",br),cr("warning",br)},mt.errorToConsole=function(br){Lw("error",br),cr("error",br)},mt.resetInternalMessageCount=function(){D=0,F={}},mt.logInternalMessage=ir,mt[mu]=function(br){Xe&&Xe.rm(),Xe=null};function ir(br,Un){if(!Gn()){var Sn=!0,hi=NK+Un[Vk];if(F[hi]?Sn=!1:F[hi]=!0,Sn&&(br<=Ee&&(mt.queue[ji](Un),D++,cr(br===1?"error":"warn",Un)),D===we)){var no="Internal events throttle limit per PageView reached for this app.",Bi=new Fw(23,no,!1);mt.queue[ji](Bi),br===1?mt.errorToConsole(no):mt[wh](no)}}}s(ir,"_logInternalMessage");function _n(br){return EN(gE(br,LK,mt).cfg,function(Un){var Sn=Un.cfg;se=Sn[lN],Ee=Sn.loggingLevelTelemetry,we=Sn.maxMessageLimit,Qe=Sn.enableDebug})}s(_n,"_setDefaultsFromConfig");function Gn(){return D>=we}s(Gn,"_areInternalMessagesThrottled");function cr(br,Un){var Sn=PK(R||{});Sn&&Sn[$k]&&Sn[$k](br,Un)}s(cr,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function Qw(w){return w||new Mw}s(Qw,"_getLogger");function hu(w,R,D,F,se,Ee){Ee===void 0&&(Ee=!1),Qw(w)[sE](R,D,F,se,Ee)}s(hu,"_throwInternal");function Ow(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Ws,D,F=0;F<4;F++)D=TC(),R+=w[D&15]+w[D>>4&15]+w[D>>8&15]+w[D>>12&15]+w[D>>16&15]+w[D>>20&15]+w[D>>24&15]+w[D>>28&15];var se=w[8+(TC()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+se+Jt(R,16,3)+Jt(R,19,12)}s(Ow,"generateW3CId");var RC=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,u3="00",ed="ff",mi="00000000000000000000000000000000",Vp="0000000000000000",Aa=1;function Jd(w,R,D){return w&&w[Qa]===R&&w!==D?!!w.match(/^[\da-f]*$/i):!1}s(Jd,"_isValid");function Uw(w,R,D){return Jd(w,R)?w:D}s(Uw,"_formatValue");function e1(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[Qa]<2;)R="0"+R;return R}s(e1,"_formatFlags");function kC(w,R,D,F){return{version:Jd(F,2,ed)?F:u3,traceId:BC(w)?w:Ow(),spanId:DC(R)?R:Nr(Ow(),16),traceFlags:D>=0&&D<=255?D:1}}s(kC,"createTraceParent");function td(w,R){if(!w||(fe(w)&&(w=w[0]||""),!w||!ee(w)||w[Qa]>8192))return null;if(w.indexOf(",")!==-1){var D=w[zk](",");w=D[R>0&&D[Qa]>R?R:0]}var F=RC.exec(Rc(w));return!F||F[1]===ed||F[2]===mi||F[3]===Vp?null:{version:(F[1]||Ws)[oE](),traceId:(F[2]||Ws)[oE](),spanId:(F[3]||Ws)[oE](),traceFlags:parseInt(F[4],16)}}s(td,"parseTraceParent");function BC(w){return Jd(w,32,mi)}s(BC,"isValidTraceId");function DC(w){return Jd(w,16,Vp)}s(DC,"isValidSpanId");function PC(w){return!(!w||!Jd(w[aN],2,ed)||!Jd(w.traceId,32,mi)||!Jd(w.spanId,16,Vp)||!Jd(e1(w[mw]),2))}s(PC,"isValidTraceParent");function qw(w){return PC(w)?(w[mw]&Aa)===Aa:!1}s(qw,"isSampledFlag");function t1(w){if(w){var R=e1(w[mw]);Jd(R,2)||(R="01");var D=w[aN]||u3;return D!=="00"&&D!=="ff"&&(D=u3),"".concat(D.toLowerCase(),"-").concat(Uw(w.traceId,32,mi).toLowerCase(),"-").concat(Uw(w.spanId,16,Vp).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(t1,"formatTraceParent");function d3(w){var R="traceparent",D=td(Sw(R),w);return D||(D=td(lf(R),w)),D}s(d3,"findW3cTraceParent");function f3(w){var R=w.getElementsByTagName("script"),D=[];return bl(R,function(F){var se=F[Yk]("src");if(se){var Ee=F[Yk]("crossorigin"),we=F.hasAttribute("async")===!0,Qe=F.hasAttribute("defer")===!0,Xe=F[Yk]("referrerpolicy"),mt={url:se};Ee&&(mt.crossOrigin=Ee),we&&(mt.async=we),Qe&&(mt.defer=Qe),Xe&&(mt.referrerPolicy=Xe),D[ji](mt)}}),D}s(f3,"findAllScripts");var Ww="on",AE="attachEvent",Gw="addEventListener",Hw="detachEvent",RN="removeEventListener",p3="events";Gp("aiEvtPageHide"),Gp("aiEvtPageShow");var MK=/\.[\.]+/g,QK=/[\.]+$/,jw=1,NC=ff("events"),Il=/^([^.]*)(?:\.(.+)|)/;function yE(w){return w&&w[sC]?w[sC](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Ws):w}s(yE,"_normalizeNamespace");function al(w,R){if(R){var D=Ws;fe(R)?(D=Ws,bl(R,function(se){se=yE(se),se&&(se[0]!=="."&&(se="."+se),D+=se)})):D=yE(R),D&&(D[0]!=="."&&(D="."+D),w=(w||Ws)+D)}var F=Il.exec(w||Ws)||[];return{type:F[1],ns:(F[2]||Ws).replace(MK,".").replace(QK,Ws)[zk](".").sort().join(".")}}s(al,"_getEvtNamespace");function Oh(w,R,D){D===void 0&&(D=!0);var F=NC.get(w,p3,{},D),se=F[R];return se||(se=F[R]=[]),se}s(Oh,"_getRegisteredEvents");function kN(w,R,D,F){w&&R&&R[Sh]&&(w[RN]?w[RN](R[Sh],D,F):w[Hw]&&w[Hw](Ww+R[Sh],D))}s(kN,"_doDetach");function OK(w,R,D,F){var se=!1;return w&&R&&R[Sh]&&D&&(w[Gw]?(w[Gw](R[Sh],D,F),se=!0):w[AE]&&(w[AE](Ww+R[Sh],D),se=!0)),se}s(OK,"_doAttach");function CE(w,R,D,F){for(var se=R[Qa];se--;){var Ee=R[se];Ee&&(!D.ns||D.ns===Ee[uN].ns)&&(!F||F(Ee))&&(kN(w,Ee[uN],Ee.handler,Ee.capture),R[WA](se,1))}}s(CE,"_doUnregister");function m3(w,R,D){if(R[Sh])CE(w,Oh(w,R[Sh]),R,D);else{var F=NC.get(w,p3,{});pt(F,function(se,Ee){CE(w,Ee,R,D)}),Ot(F)[Qa]===0&&NC.kill(w,p3)}}s(m3,"_unregisterEvents");function UK(w,R){var D;return R?(fe(R)?D=[w].concat(R):D=[w,R],D=al("xx",D).ns[zk](".")):D=w,D}s(UK,"mergeEvtNamespace");function h3(w,R,D,F,se){se===void 0&&(se=!1);var Ee=!1;if(w)try{var we=al(R,F);if(Ee=OK(w,we,D,se),Ee&&NC.accept(w)){var Qe={guid:jw++,evtName:we,handler:D,capture:se};Oh(w,we.type)[ji](Qe)}}catch{}return Ee}s(h3,"eventOn");function BN(w,R,D,F,se){if(se===void 0&&(se=!1),w)try{var Ee=al(R,F),we=!1;m3(w,Ee,function(Qe){return Ee.ns&&!D||Qe.handler===D?(we=!0,!0):!1}),we||kN(w,Ee,D,se)}catch{}}s(BN,"eventOff");var Vw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",DN="sampleRate",$w="ProcessLegacy",PN="http.method",g3="https://dc.services.visualstudio.com",xE="/v2/track",pf="not_specified",A3="iKey",NN=vK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Uh="split",wn="length",LC="toLowerCase",r1="ingestionendpoint",n1="toString",y3="removeItem",vE="message",FC="count",zw="preTriggerDate",C3="getUTCDate",Yw="stringify",MC="pathname",i1="match",x3="correlationHeaderExcludePatterns",rd="name",QC="extensionConfig",mf="properties",kc="measurements",OC="sizeInBytes",bE="typeName",UC="exceptions",EE="severityLevel",qC="problemGroup",gu="parsedStack",Kw="hasFullStack",Jw="assembly",Xd="fileName",WC="line",qh="aiDataContract",IE="duration";function v3(w,R,D){var F=R[wn],se=b3(w,R);if(se[wn]!==F){for(var Ee=0,we=se;D[we]!==void 0;)Ee++,we=rr(se,0,147)+LN(Ee);se=we}return se}s(v3,"dataSanitizeKeyAndAddUniqueness");function b3(w,R){var D;return R&&(R=Rc(tt(R)),R[wn]>150&&(D=rr(R,0,150),hu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),D||R}s(b3,"dataSanitizeKey");function ll(w,R,D){D===void 0&&(D=1024);var F;return R&&(D=D||1024,R=Rc(tt(R)),R[wn]>D&&(F=rr(R,0,D),hu(w,2,61,"string value is too long. It has been truncated to "+D+" characters.",{value:R},!0))),F||R}s(ll,"dataSanitizeString");function hf(w,R){return I3(w,R,2048,66)}s(hf,"dataSanitizeUrl");function Xw(w,R){var D;return R&&R[wn]>32768&&(D=rr(R,0,32768),hu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),D||R}s(Xw,"dataSanitizeMessage");function E3(w,R){var D;if(R){var F=""+R;F[wn]>32768&&(D=rr(F,0,32768),hu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return D||R}s(E3,"dataSanitizeException");function $p(w,R){if(R){var D={};pt(R,function(F,se){if(re(se)&&Vi())try{se=xC()[Yw](se)}catch(Ee){hu(w,2,49,"custom property is not valid",{exception:Ee},!0)}se=ll(w,se,8192),F=v3(w,F,D),D[F]=se}),R=D}return R}s($p,"dataSanitizeProperties");function nd(w,R){if(R){var D={};pt(R,function(F,se){F=v3(w,F,D),D[F]=se}),R=D}return R}s(nd,"dataSanitizeMeasurements");function GC(w,R){return R&&I3(w,R,128,69)[n1]()}s(GC,"dataSanitizeId");function I3(w,R,D,F){var se;return R&&(R=Rc(tt(R)),R[wn]>D&&(se=rr(R,0,D),hu(w,2,F,"input is too long, it has been truncated to "+D+" characters.",{data:R},!0))),se||R}s(I3,"dataSanitizeInput");function LN(w){var R="00"+w;return Jt(R,R[wn]-3)}s(LN,"dsPadNumber");var T3=ke()||{},FN=0,qK=[null,null,null,null,null];function HC(w){var R=FN,D=qK,F=D[R];return T3.createElement?D[R]||(F=D[R]=T3.createElement("a")):F={host:QN(w,!0)},F.href=w,R++,R>=D[wn]&&(R=0),FN=R,F}s(HC,"urlParseUrl");function WK(w){var R,D=HC(w);return D&&(R=D.href),R}s(WK,"urlGetAbsoluteUrl");function GK(w){var R,D=HC(w);return D&&(R=D[MC]),R}s(GK,"urlGetPathName");function MN(w,R){return w?w.toUpperCase()+" "+R:R}s(MN,"urlGetCompleteUrl");function QN(w,R){var D=zp(w,R)||"";if(D){var F=D[i1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[wn]>3&&ee(F[2])&&F[2][wn]>0)return F[2]+(F[3]||"")}return D}s(QN,"urlParseHost");function zp(w,R){var D=null;if(w){var F=w[i1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[wn]>2&&ee(F[2])&&F[2][wn]>0&&(D=F[2]||"",R&&F[wn]>2)){var se=(F[1]||"")[LC](),Ee=F[3]||"";(se==="http"&&Ee===":80"||se==="https"&&Ee===":443")&&(Ee=""),D+=Ee}}return D}s(zp,"urlParseFullHost");var ON=[g3+xE,"https://breeze.aimon.applicationinsights.io"+xE,"https://dc-int.services.visualstudio.com"+xE],jC="cid-v1:";function UN(w){return Mp(ON,w[LC]())!==-1}s(UN,"isInternalApplicationInsightsEndpoint");function w3(w){jC=w}s(w3,"correlationIdSetPrefix");function _3(){return jC}s(_3,"correlationIdGetPrefix");function Wh(w,R,D){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[x3]){for(var F=0;F<w.correlationHeaderExcludePatterns[wn];F++)if(w[x3][F].test(R))return!1}var se=HC(R).host[LC]();if(se&&(qr(se,":443")!==-1||qr(se,":80")!==-1)&&(se=(zp(R,!0)||"")[LC]()),(!w||!w.enableCorsCorrelation)&&se&&se!==D)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(bl(Ee,function(mt){var ir=new RegExp(mt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||ir.test(se)}),!we)return!1}var Qe=w&&w.correlationHeaderExcludedDomains;if(!Qe||Qe[wn]===0)return!0;for(var F=0;F<Qe[wn];F++){var Xe=new RegExp(Qe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Xe.test(se))return!1}return se&&se[wn]>0}s(Wh,"correlationIdCanIncludeCorrelationHeader");function qN(w){if(w){var R=WN(w,NN[1]);if(R&&R!==jC)return R}}s(qN,"correlationIdGetCorrelationContext");function WN(w,R){if(w)for(var D=w[Uh](","),F=0;F<D[wn];++F){var se=D[F][Uh]("=");if(se[wn]===2&&se[0]===R)return se[1]}}s(WN,"correlationIdGetCorrelationContextValue");function GN(w,R,D,F){var se,Ee=F,we=F;if(R&&R[wn]>0){var Qe=HC(R);if(se=Qe.host,!Ee)if(Qe[MC]!=null){var Xe=Qe.pathname[wn]===0?"/":Qe[MC];Xe.charAt(0)!=="/"&&(Xe="/"+Xe),we=Qe[MC],Ee=ll(w,D?D+" "+Xe:Xe)}else Ee=ll(w,R)}else se=F,Ee=F;return{target:se,name:Ee,data:we}}s(GN,"AjaxHelperParseDependencyPath");function HK(){var w=nE();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return OA()}s(HK,"dateTimeUtilsNow");function jK(w,R){var D=null;return w!==0&&R!==0&&!W(w)&&!W(R)&&(D=R-w),D}s(jK,"dateTimeUtilsDuration");function S3(w,R){var D=w||{};return{getName:s(function(){return D[rd]},"getName"),setName:s(function(F){R&&R.setName(F),D[rd]=F},"setName"),getTraceId:s(function(){return D.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),BC(F)&&(D.traceID=F)},"setTraceId"),getSpanId:s(function(){return D.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),DC(F)&&(D.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return D.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),D.traceFlags=F},"setTraceFlags")}}s(S3,"createDistributedTraceContextFromTrace");var VC=iE({LocalStorage:0,SessionStorage:1}),VK=iE({AI:0,AI_AND_W3C:1,W3C:2}),TE=iE({Normal:1,Critical:2}),Gh=void 0,Zd=void 0,HN="";function $C(){return Zw()?zC(VC.LocalStorage):null}s($C,"_getLocalStorageObject");function zC(w){try{if(W(Z()))return null;var R=new Date()[n1](),D=M(w===VC.LocalStorage?"localStorage":"sessionStorage"),F=HN+R;D.setItem(F,R);var se=D.getItem(F)!==R;if(D[y3](F),!se)return D}catch{}return null}s(zC,"_getVerifiedStorageObject");function YC(){return Yp()?zC(VC.SessionStorage):null}s(YC,"_getSessionStorageObject");function wE(){Gh=!1,Zd=!1}s(wE,"utlDisableStorage");function _E(w){HN=w||""}s(_E,"utlSetStoragePrefix");function $K(){Gh=Zw(!0),Zd=Yp(!0)}s($K,"utlEnableStorage");function Zw(w){return(w||Gh===void 0)&&(Gh=!!zC(VC.LocalStorage)),Gh}s(Zw,"utlCanUseLocalStorage");function jN(w,R){var D=$C();if(D!==null)try{return D.getItem(R)}catch(F){Gh=!1,hu(w,2,1,"Browser failed read of local storage. "+Bh(F),{exception:ne(F)})}return null}s(jN,"utlGetLocalStorage");function VN(w,R,D){var F=$C();if(F!==null)try{return F.setItem(R,D),!0}catch(se){Gh=!1,hu(w,2,3,"Browser failed write to local storage. "+Bh(se),{exception:ne(se)})}return!1}s(VN,"utlSetLocalStorage");function id(w,R){var D=$C();if(D!==null)try{return D[y3](R),!0}catch(F){Gh=!1,hu(w,2,5,"Browser failed removal of local storage item. "+Bh(F),{exception:ne(F)})}return!1}s(id,"utlRemoveStorage");function Yp(w){return(w||Zd===void 0)&&(Zd=!!zC(VC.SessionStorage)),Zd}s(Yp,"utlCanUseSessionStorage");function KC(){var w=[];return Yp()&&pt(M("sessionStorage"),function(R){w.push(R)}),w}s(KC,"utlGetSessionStorageKeys");function $N(w,R){var D=YC();if(D!==null)try{return D.getItem(R)}catch(F){Zd=!1,hu(w,2,2,"Browser failed read of session storage. "+Bh(F),{exception:ne(F)})}return null}s($N,"utlGetSessionStorage");function zK(w,R,D){var F=YC();if(F!==null)try{return F.setItem(R,D),!0}catch(se){Zd=!1,hu(w,2,4,"Browser failed write to session storage. "+Bh(se),{exception:ne(se)})}return!1}s(zK,"utlSetSessionStorage");function zN(w,R){var D=YC();if(D!==null)try{return D[y3](R),!0}catch(F){Zd=!1,hu(w,2,6,"Browser failed removal of session storage item. "+Bh(F),{exception:ne(F)})}return!1}s(zN,"utlRemoveSessionStorage");var YK="appInsightsThrottle",KK=function(){function w(R,D){var F=this,se,Ee,we,Qe,Xe,mt,ir,_n=!1,Gn=!1;br(),F._getDbgPlgTargets=function(){return[ir]},F.getConfig=function(){return we},F.canThrottle=function(It){var Br=W3(It),nn=Un(It);return no(nn,se,Br)},F.isTriggered=function(It){return d7(It)},F.isReady=function(){return _n},F.flush=function(It){try{var Br=f7(It);if(Br&&Br[wn]>0){var nn=Br.slice(0);return ir[It]=[],bl(nn,function(Fo){cr(Fo.msgID,Fo[vE],Fo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(ir){var It=!0;return pt(ir,function(Br){var nn=F.flush(parseInt(Br));It=It&&nn}),It}}catch{}return!1},F.onReadyState=function(It,Br){return Br===void 0&&(Br=!0),_n=W(It)?!0:It,_n&&Br?F.flushAll():null},F.sendMessage=function(It,Br,nn){return cr(It,Br,nn,!0)};function cr(It,Br,nn,Fo){if(_n){var Ua=mJ(It);if(!Ua)return;var Gs=Un(It),qa=W3(It),s1=no(Gs,se,qa),zh=!1,sx=0,p7=d7(It);try{s1&&!p7?(sx=Ar(Gs.limit.maxSendNumber,qa[FC]+1),qa[FC]=0,zh=!0,Xe[It]=!0,qa[zw]=new Date):(Xe[It]=s1,qa[FC]+=1);var m7=Bi(It);q3(Ee,m7,qa);for(var p_=0;p_<sx;p_++)u7(It,Ee,Br,nn)}catch{}return{isThrottled:zh,throttleNum:sx}}else if(Fo){var hJ=f7(It);hJ.push({msgID:It,message:Br,severity:nn})}return null}s(cr,"_flushMessage");function br(){Ee=FK(R),Xe={},Qe={},ir={},we={},Sn(109),mt=i3(D)?D:"",R.addUnloadHook(EN(R.config,function(It){var Br=It.cfg;se=Zw();var nn=Br.throttleMgrCfg||{};pt(nn,function(Fo,Ua){Sn(parseInt(Fo),Ua)})}))}s(br,"_initConfig");function Un(It){return we[It]||we[109]}s(Un,"_getCfgByKey");function Sn(It,Br){var nn,Fo;try{var Ua=Br||{},Gs={};Gs.disabled=!!Ua.disabled;var qa=Ua.interval||{};Gn=qa?.daysOfMonth&&qa?.daysOfMonth[wn]>0,Gs.interval=hi(qa);var s1={samplingRate:((nn=Ua.limit)===null||nn===void 0?void 0:nn.samplingRate)||100,maxSendNumber:((Fo=Ua.limit)===null||Fo===void 0?void 0:Fo.maxSendNumber)||1};Gs.limit=s1,we[It]=Gs}catch{}}s(Sn,"_setCfgByKey");function hi(It){It=It||{};var Br=It?.monthInterval,nn=It?.dayInterval;return W(Br)&&W(nn)&&(It.monthInterval=3,Gn||(It.daysOfMonth=[28],Gn=!0)),It={monthInterval:It?.monthInterval,dayInterval:It?.dayInterval,daysOfMonth:It?.daysOfMonth},It}s(hi,"_getIntervalConfig");function no(It,Br,nn){if(It&&!It.disabled&&Br&&i3(nn)){var Fo=LE(),Ua=nn.date,Gs=It.interval,qa=1;if(Gs?.monthInterval){var s1=(Fo.getUTCFullYear()-Ua.getUTCFullYear())*12+Fo.getUTCMonth()-Ua.getUTCMonth();qa=f_(Gs.monthInterval,0,s1)}var zh=1;if(Gn)zh=Mp(Gs.daysOfMonth,Fo[C3]());else if(Gs?.dayInterval){var sx=Eh((Fo.getTime()-Ua.getTime())/864e5);zh=f_(Gs.dayInterval,0,sx)}return qa>=0&&zh>=0}return!1}s(no,"_canThrottle");function Bi(It,Br){var nn=i3(Br)?Br:"";return It?YK+nn+"-"+It:null}s(Bi,"_getLocalStorageName");function Oa(It){try{if(It){var Br=new Date;return It.getUTCFullYear()===Br.getUTCFullYear()&&It.getUTCMonth()===Br.getUTCMonth()&&It[C3]()===Br[C3]()}}catch{}return!1}s(Oa,"_isTriggeredOnCurDate");function ox(It,Br,nn){try{var Fo={date:LE(),count:0};if(It){var Ua=JSON.parse(It),Gs={date:LE(Ua.date)||Fo.date,count:Ua[FC]||Fo[FC],preTriggerDate:Ua.preTriggerDate?LE(Ua[zw]):void 0};return Gs}else return q3(Br,nn,Fo),Fo}catch{}return null}s(ox,"_getLocalStorageObj");function LE(It){try{if(It){var Br=new Date(It);if(!isNaN(Br.getDate()))return Br}else return new Date}catch{}return null}s(LE,"_getThrottleDate");function q3(It,Br,nn){try{return VN(It,Br,Rc(JSON[Yw](nn)))}catch{}return!1}s(q3,"_resetLocalStorage");function f_(It,Br,nn){return It<=0?1:nn>=Br&&(nn-Br)%It==0?Eh((nn-Br)/It)+1:-1}s(f_,"_checkInterval");function u7(It,Br,nn,Fo){hu(Br,Fo||1,It,nn)}s(u7,"_sendMessage");function mJ(It){try{var Br=Un(It);return Rw(1e6)<=Br.limit.samplingRate}catch{}return!1}s(mJ,"_canSampledIn");function W3(It){try{var Br=Qe[It];if(!Br){var nn=Bi(It,mt);Br=ox(jN(Ee,nn),Ee,nn),Qe[It]=Br}return Qe[It]}catch{}return null}s(W3,"_getLocalStorageObjByKey");function d7(It){var Br=Xe[It];if(W(Br)){Br=!1;var nn=W3(It);nn&&(Br=Oa(nn[zw])),Xe[It]=Br}return Xe[It]}s(d7,"_isTrigger");function f7(It){return ir=ir||{},W(ir[It])&&(ir[It]=[]),ir[It]}s(f7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),R3=";",gf="=";function e_(w){if(!w)return{};var R=w[Uh](R3),D=na(R,function(se,Ee){var we=Ee[Uh](gf);if(we[wn]===2){var Qe=we[0][LC](),Xe=we[1];se[Qe]=Xe}return se},{});if(Ot(D)[wn]>0){if(D.endpointsuffix){var F=D.location?D.location+".":"";D[r1]=D[r1]||"https://"+F+"dc."+D.endpointsuffix}D[r1]=D[r1]||g3,nC(D[r1],"/")&&(D[r1]=D[r1].slice(0,-1))}return D}s(e_,"parseConnectionString");var t_={parse:e_},r_=function(){function w(R,D,F){var se=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[rd]=ll(R,F)||pf,Ee.data=D,Ee.time=qp(new Date),Ee[qh]={time:1,iKey:1,name:1,sampleRate:s(function(){return se.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),JK=function(){function w(R,D,F,se){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[rd]=ll(R,D)||pf,Ee[mf]=$p(R,F),Ee[kc]=nd(R,se)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),XK=58,YN=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,ZK=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,JC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,KN=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,eJ=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,tJ=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,rJ=/([^\(\s\n]+):([0-9]+)$/,JN="<no_method>",XC="error",Au="stack",SE="stackDetails",n_="errorSrc",RE="message",kE="description",k3=[{re:ZK,len:5,m:1,fn:2,ln:3,col:4},{chk:i_,pre:Tr,re:JC,len:4,m:1,fn:2,ln:3},{re:KN,len:3,m:1,fn:2,hdl:D3},{re:eJ,len:2,fn:1,hdl:D3}];function Tr(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(Tr,"_scrubAnonymous");function i_(w){return qr(w,"[native")<0}s(i_,"_ignoreNative");function BE(w,R){var D=w;return D&&!ee(D)&&(JSON&&JSON[Yw]?(D=JSON[Yw](w),R&&(!D||D==="{}")&&(pe(w[n1])?D=w[n1]():D=""+w)):D=""+w+" - (Missing JSON.stringify)"),D||""}s(BE,"_stringify");function Hh(w,R){var D=w;return w&&(D&&!ee(D)&&(D=w[RE]||w[kE]||D),D&&!ee(D)&&(D=BE(D,!0)),w.filename&&(D=D+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&qr(D||"",R)===-1&&(D=R+": "+D),D||""}s(Hh,"_formatMessage");function XN(w){try{if(re(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(XN,"_isExceptionDetailsInternal");function ZN(w){try{if(re(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(ZN,"_isExceptionInternal");function o_(w){return w&&w.src&&ee(w.src)&&w.obj&&fe(w.obj)}s(o_,"_isStackDetails");function Kp(w){var R=w||"";ee(R)||(ee(R[Au])?R=R[Au]:R=""+R);var D=R[Uh](`
`);return{src:R,obj:D}}s(Kp,"_convertStackObj");function e7(w){for(var R=[],D=w[Uh](`
`),F=0;F<D[wn];F++){var se=D[F];D[F+1]&&(se+="@"+D[F+1],F++),R.push(se)}return{src:w,obj:R}}s(e7,"_getOperaStack");function s_(w){var R=null;if(w)try{if(w[Au])R=Kp(w[Au]);else if(w[XC]&&w[XC][Au])R=Kp(w[XC][Au]);else if(w.exception&&w.exception[Au])R=Kp(w.exception[Au]);else if(o_(w))R=w;else if(o_(w[SE]))R=w[SE];else if(qt()&&qt().opera&&w[RE])R=e7(w[vE]);else if(w.reason&&w.reason[Au])R=Kp(w.reason[Au]);else if(ee(w))R=Kp(w);else{var D=w[RE]||w[kE]||"";ee(w[n_])&&(D&&(D+=`
`),D+=" from "+w[n_]),D&&(R=Kp(D))}}catch(F){R=Kp(F)}return R||{src:"",obj:null}}s(s_,"_getStackFromErrorObj");function t7(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(t7,"_formatStackTrace");function a_(w){var R,D=w.obj;if(D&&D[wn]>0){R=[];var F=0,se=!1,Ee=0;bl(D,function(Un){if(se||nJ(Un)){var Sn=tt(Un);se=!0;var hi=iJ(Sn,F);hi&&(Ee+=hi[OC],R.push(hi),F++)}});var we=32*1024;if(Ee>we)for(var Qe=0,Xe=R[wn]-1,mt=0,ir=Qe,_n=Xe;Qe<Xe;){var Gn=R[Qe][OC],cr=R[Xe][OC];if(mt+=Gn+cr,mt>we){var br=_n-ir+1;R.splice(ir,br);break}ir=Qe,_n=Xe,Qe++,Xe--}}return R}s(a_,"_parseStack");function ZC(w){var R="";if(w&&(R=w.typeName||w[rd]||"",!R))try{var D=/function (.{1,200})\(/,F=D.exec(w.constructor[n1]());R=F&&F[wn]>1?F[1]:""}catch{}return R}s(ZC,"_getErrorType");function l_(w){if(w)try{if(!ee(w)){var R=ZC(w),D=BE(w,!1);return(!D||D==="{}")&&(w[XC]&&(w=w[XC],R=ZC(w)),D=BE(w,!0)),qr(D,R)!==0&&R!=="String"?R+":"+D:D}}catch{}return""+(w||"")}s(l_,"_formatErrorCode");var Af=function(){function w(R,D,F,se,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Qe=this;Qe.ver=2,ZN(D)?(Qe[UC]=D[UC]||[],Qe[mf]=D[mf],Qe[kc]=D[kc],D[EE]&&(Qe[EE]=D[EE]),D.id&&(Qe.id=D.id,D[mf].id=D.id),D[qC]&&(Qe[qC]=D[qC]),W(D.isManual)||(Qe.isManual=D.isManual)):(F||(F={}),we&&(F.id=we),Qe[UC]=[i7(R,D,F)],Qe[mf]=$p(R,F),Qe[kc]=nd(R,se),Ee&&(Qe[EE]=Ee),we&&(Qe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,D,F,se,Ee,we,Qe,Xe){var mt=ZC(Ee||we||R);return{message:Hh(R,mt),url:D,lineNumber:F,columnNumber:se,error:l_(Ee||we||R),evt:l_(we||R),typeName:mt,stackDetails:s_(Qe||Ee||we),errorSrc:Xe}},w.CreateFromInterface=function(R,D,F,se){var Ee=D[UC]&&sf(D[UC],function(Qe){return B3(R,Qe)}),we=new w(R,yw(yw({},D),{exceptions:Ee}),F,se);return we},w.prototype.toInterface=function(){var R=this,D=R.exceptions,F=R.properties,se=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Qe=R.id,Xe=R.isManual,mt=D instanceof Array&&sf(D,function(ir){return ir.toInterface()})||void 0;return{ver:"4.0",exceptions:mt,severityLevel:Ee,properties:F,measurements:se,problemGroup:we,id:Qe,isManual:Xe}},w.CreateSimpleException=function(R,D,F,se,Ee,we){var Qe;return{exceptions:[(Qe={},Qe[Kw]=!0,Qe.message=R,Qe.stack=Ee,Qe.typeName=D,Qe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=l_,w}(),r7=lr({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function n7(){var w=this,R=fe(w[gu])&&sf(w[gu],function(F){return s7(F)}),D={id:w.id,outerId:w.outerId,typeName:w[bE],message:w[vE],hasFullStack:w[Kw],stack:w[Au],parsedStack:R||void 0};return D}s(n7,"_toInterface");function i7(w,R,D){var F,se,Ee,we,Qe,Xe,mt,ir;if(XN(R))we=R[bE],Qe=R[vE],mt=R[Au],ir=R[gu]||[],Xe=R[Kw];else{var _n=R,Gn=_n&&_n.evt;he(_n)||(_n=_n[XC]||Gn||_n),we=ll(w,ZC(_n))||pf,Qe=Xw(w,Hh(R||_n,we))||pf;var cr=R[SE]||s_(R);ir=a_(cr),fe(ir)&&sf(ir,function(br){br[Jw]=ll(w,br[Jw]),br[Xd]=ll(w,br[Xd])}),mt=E3(w,t7(cr)),Xe=fe(ir)&&ir[wn]>0,D&&(D[bE]=D[bE]||we)}return F={},F[qh]=r7,F.id=se,F.outerId=Ee,F.typeName=we,F.message=Qe,F[Kw]=Xe,F.stack=mt,F.parsedStack=ir,F.toInterface=n7,F}s(i7,"_createExceptionDetails");function B3(w,R){var D=fe(R[gu])&&sf(R[gu],function(se){return o7(se)})||R[gu],F=i7(w,yw(yw({},R),{parsedStack:D}));return F}s(B3,"_createExDetailsFromInterface");function DE(w,R){var D=R[i1](tJ);if(D&&D[wn]>=4)w[Xd]=D[1],w[WC]=parseInt(D[2]);else{var F=R[i1](rJ);F&&F[wn]>=3?(w[Xd]=F[1],w[WC]=parseInt(F[2])):w[Xd]=R}}s(DE,"_parseFilename");function D3(w,R,D){var F=w[Xd];R.fn&&D&&D[wn]>R.fn&&(R.ln&&D[wn]>R.ln?(F=Rc(D[R.fn]||""),w[WC]=parseInt(Rc(D[R.ln]||""))||0):F=Rc(D[R.fn]||"")),F&&DE(w,F)}s(D3,"_handleFilename");function nJ(w){var R=!1;if(w&&ee(w)){var D=Rc(w);D&&(R=YN.test(D))}return R}s(nJ,"_isStackFrame");var P3=lr({level:1,method:1,assembly:0,fileName:0,line:0});function iJ(w,R){var D,F;if(w&&ee(w)&&Rc(w)){F=(D={},D[qh]=P3,D.level=R,D.assembly=Rc(w),D.method=JN,D.fileName="",D.line=0,D.sizeInBytes=0,D);for(var se=0;se<k3[wn];){var Ee=k3[se];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[i1](Ee.re);if(we&&we[wn]>=Ee.len){Ee.m&&(F.method=Rc(we[Ee.m]||JN)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[Xd]=Rc(we[Ee.fn]||""),F[WC]=parseInt(Rc(we[Ee.ln]||""))||0):DE(F,we[Ee.fn]||""));break}se++}}return N3(F)}s(iJ,"_extractStackFrame");function o7(w){var R,D=(R={},R[qh]=P3,R.level=w.level,R.method=w.method,R.assembly=w[Jw],R.fileName=w[Xd],R.line=w[WC],R.sizeInBytes=0,R);return N3(D)}s(o7,"_stackFrameFromInterface");function N3(w){var R=XK;return w&&(R+=w.method[wn],R+=w.assembly[wn],R+=w.fileName[wn],R+=w.level.toString()[wn],R+=w.line.toString()[wn],w[OC]=R),w}s(N3,"_populateFrameSizeInBytes");function s7(w){return{level:w.level,method:w.method,assembly:w[Jw],fileName:w[Xd],line:w[WC]}}s(s7,"_parsedFrameToInterface");var a7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),oJ=function(){function w(R,D,F,se,Ee,we,Qe,Xe,mt){this.aiDataContract={ver:1,metrics:1,properties:0};var ir=this;ir.ver=2;var _n=new a7;_n[FC]=se>0?se:void 0,_n.max=isNaN(we)||we===null?void 0:we,_n.min=isNaN(Ee)||Ee===null?void 0:Ee,_n[rd]=ll(R,D)||pf,_n.value=F,_n.stdDev=isNaN(Qe)||Qe===null?void 0:Qe,ir.metrics=[_n],ir[mf]=$p(R,Xe),ir[kc]=nd(R,mt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),ex="";function sJ(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[LC]()==="true"}s(sJ,"stringToBoolOrDefault");function L3(w){(isNaN(w)||w<0)&&(w=0),w=Gk(w);var R=ex+w%1e3,D=ex+Eh(w/1e3)%60,F=ex+Eh(w/(1e3*60))%60,se=ex+Eh(w/(1e3*60*60))%24,Ee=Eh(w/(1e3*60*60*24));return R=R[wn]===1?"00"+R:R[wn]===2?"0"+R:R,D=D[wn]<2?"0"+D:D,F=F[wn]<2?"0"+F:F,se=se[wn]<2?"0"+se:se,(Ee>0?Ee+".":ex)+se+":"+F+":"+D+"."+R}s(L3,"msToTimeSpan");function aJ(w,R){var D=null;return bl(w,function(F){if(F.identifier===R)return D=F,-1}),D}s(aJ,"getExtensionByName");function jh(w,R,D,F,se){return!se&&ee(w)&&(w==="Script error."||w==="Script error")}s(jh,"isCrossOriginError");var lJ=function(){function w(R,D,F,se,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Xe=this;Xe.ver=2,Xe.id=GC(R,Qe),Xe.url=hf(R,F),Xe[rd]=ll(R,D)||pf,isNaN(se)||(Xe[IE]=L3(se)),Xe[mf]=$p(R,Ee),Xe[kc]=nd(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),tx=function(){function w(R,D,F,se,Ee,we,Qe,Xe,mt,ir,_n,Gn){mt===void 0&&(mt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var cr=this;cr.ver=2,cr.id=D,cr[IE]=L3(Ee),cr.success=we,cr.resultCode=Qe+"",cr.type=ll(R,mt);var br=GN(R,F,Xe,se);cr.data=hf(R,se)||br.data,cr.target=ll(R,br.target),ir&&(cr.target="".concat(cr.target," | ").concat(ir)),cr[rd]=ll(R,br[rd]),cr[mf]=$p(R,_n),cr[kc]=nd(R,Gn)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),F3=function(){function w(R,D,F,se,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,D=D||pf,we[vE]=Xw(R,D),we[mf]=$p(R,se),we[kc]=nd(R,Ee),F&&(we[EE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),PE=function(){function w(R,D,F,se,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,Xe.url=hf(R,F),Xe[rd]=ll(R,D)||pf,Xe[mf]=$p(R,Ee),Xe[kc]=nd(R,we),Qe&&(Xe.domProcessing=Qe.domProcessing,Xe[IE]=Qe[IE],Xe.networkConnect=Qe.networkConnect,Xe.perfTotal=Qe.perfTotal,Xe.receivedResponse=Qe.receivedResponse,Xe.sentRequest=Qe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),cJ=function(){function w(R,D){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=D}return s(w,"Data"),w}(),c_=iE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),uJ=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,D,F,se){se===void 0&&(se=!1);var Ee;return F&&R[QC]&&R[QC][F]&&!W(R[QC][F][D])?Ee=R[QC][F][D]:Ee=R[D],W(Ee)?se:Ee},w}();function yf(w){var R="ai."+w+".";return function(D){return R+D}}s(yf,"_aiNameFunc");var rx=yf("application"),ya=yf("device"),u_=yf("location"),nx=yf("operation"),d_=yf("session"),Vh=yf("user"),o1=yf("cloud"),NE=yf("internal"),$h=function(w){Rh(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(fE({applicationVersion:rx("ver"),applicationBuild:rx("build"),applicationTypeId:rx("typeId"),applicationId:rx("applicationId"),applicationLayer:rx("layer"),deviceId:ya("id"),deviceIp:ya("ip"),deviceLanguage:ya("language"),deviceLocale:ya("locale"),deviceModel:ya("model"),deviceFriendlyName:ya("friendlyName"),deviceNetwork:ya("network"),deviceNetworkName:ya("networkName"),deviceOEMName:ya("oemName"),deviceOS:ya("os"),deviceOSVersion:ya("osVersion"),deviceRoleInstance:ya("roleInstance"),deviceRoleName:ya("roleName"),deviceScreenResolution:ya("screenResolution"),deviceType:ya("type"),deviceMachineName:ya("machineName"),deviceVMName:ya("vmName"),deviceBrowser:ya("browser"),deviceBrowserVersion:ya("browserVersion"),locationIp:u_("ip"),locationCountry:u_("country"),locationProvince:u_("province"),locationCity:u_("city"),operationId:nx("id"),operationName:nx("name"),operationParentId:nx("parentId"),operationRootId:nx("rootId"),operationSyntheticSource:nx("syntheticSource"),operationCorrelationVector:nx("correlationVector"),sessionId:d_("id"),sessionIsFirst:d_("isFirst"),sessionIsNew:d_("isNew"),userAccountAcquisitionDate:Vh("accountAcquisitionDate"),userAccountId:Vh("accountId"),userAgent:Vh("userAgent"),userId:Vh("id"),userStoreRegion:Vh("storeRegion"),userAuthUserId:Vh("authUserId"),userAnonymousUserAcquisitionDate:Vh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Vh("authUserAcquisitionDate"),cloudName:o1("name"),cloudRole:o1("role"),cloudRoleVer:o1("roleVer"),cloudRoleInstance:o1("roleInstance"),cloudEnvironment:o1("environment"),cloudLocation:o1("location"),cloudDeploymentUnit:o1("deploymentUnit"),internalNodeName:NE("nodeName"),internalSdkVersion:NE("sdkVersion"),internalAgentVersion:NE("agentVersion"),internalSnippet:NE("snippet"),internalSdkSrc:NE("sdkSrc")}));function M3(w,R,D,F,se,Ee){D=ll(F,D)||pf,(W(w)||W(R)||W(D))&&We("Input doesn't contain all required fields");var we="";w[A3]&&(we=w[A3],delete w[A3]);var Qe={name:D,time:qp(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return W(se)||pt(se,function(Xe,mt){Qe.data[Xe]=mt}),Qe}s(M3,"createTelemetryItem");var Q3=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=M3,w}(),dJ={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},fJ=new $h;function l7(w){var R=null;if(pe(Event))R=new Event(w);else{var D=ke();D&&D.createEvent&&(R=D.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(l7,"createDomEvent");function O3(w,R){BN(w,null,null,R)}s(O3,"_disableEvents");function c7(w){var R=ke(),D=pr(),F=!1,se=[],Ee=1;D&&!W(D.onLine)&&!D.onLine&&(Ee=2);var we=0,Qe=Gn(),Xe=UK(Gp("OfflineListener"),w);try{if(ir(qt())&&(F=!0),R){var mt=R.body||R;mt.ononline&&ir(mt)&&(F=!0)}}catch{F=!1}function ir(Bi){var Oa=!1;return Bi&&(Oa=h3(Bi,"online",Un,Xe),Oa&&h3(Bi,"offline",Sn,Xe)),Oa}s(ir,"_enableEvents");function _n(){return Qe}s(_n,"_isOnline");function Gn(){return!(we===2||Ee===2)}s(Gn,"calCurrentState");function cr(){var Bi=Gn();Qe!==Bi&&(Qe=Bi,bl(se,function(Oa){var ox={isOnline:Qe,rState:Ee,uState:we};try{Oa(ox)}catch{}}))}s(cr,"listnerNoticeCheck");function br(Bi){we=Bi,cr()}s(br,"setOnlineState");function Un(){Ee=1,cr()}s(Un,"_setOnline");function Sn(){Ee=2,cr()}s(Sn,"_setOffline");function hi(){var Bi=qt();if(Bi&&F){if(O3(Bi,Xe),R){var Oa=R.body||R;ie(Oa.ononline)||O3(Oa,Xe)}F=!1}}s(hi,"_unload");function no(Bi){return se.push(Bi),{rm:s(function(){var Oa=se.indexOf(Bi);if(Oa>-1)return se.splice(Oa,1)},"rm")}}return s(no,"addListener"),{isOnline:_n,isListening:s(function(){return F},"isListening"),unload:hi,addListener:no,setOnlineState:br}}s(c7,"createOfflineListener");var pJ="AppInsightsPropertiesPlugin",U3="AppInsightsChannelPlugin",ix="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=ix,t.BreezeChannelIdentifier=U3,t.ConfigurationManager=uJ,t.ConnectionStringParser=t_,t.ContextTagKeys=$h,t.CtxTagKeys=fJ,t.DEFAULT_BREEZE_ENDPOINT=g3,t.DEFAULT_BREEZE_PATH=xE,t.Data=cJ,t.DisabledPropertyName=Vw,t.DistributedTracingModes=VK,t.Envelope=r_,t.Event=JK,t.EventPersistence=TE,t.Exception=Af,t.Extensions=dJ,t.HttpMethod=PN,t.Metric=oJ,t.PageView=lJ,t.PageViewPerformance=PE,t.ProcessLegacy=$w,t.PropertiesPluginIdentifier=pJ,t.RemoteDependencyData=tx,t.RequestHeaders=NN,t.SampleRate=DN,t.SeverityLevel=c_,t.TelemetryItemCreator=Q3,t.ThrottleMgr=KK,t.Trace=F3,t.correlationIdCanIncludeCorrelationHeader=Wh,t.correlationIdGetCorrelationContext=qN,t.correlationIdGetCorrelationContextValue=WN,t.correlationIdGetPrefix=_3,t.correlationIdSetPrefix=w3,t.createDistributedTraceContextFromTrace=S3,t.createDomEvent=l7,t.createOfflineListener=c7,t.createTelemetryItem=M3,t.createTraceParent=kC,t.dataSanitizeException=E3,t.dataSanitizeId=GC,t.dataSanitizeInput=I3,t.dataSanitizeKey=b3,t.dataSanitizeKeyAndAddUniqueness=v3,t.dataSanitizeMeasurements=nd,t.dataSanitizeMessage=Xw,t.dataSanitizeProperties=$p,t.dataSanitizeString=ll,t.dataSanitizeUrl=hf,t.dateTimeUtilsDuration=jK,t.dateTimeUtilsNow=HK,t.dsPadNumber=LN,t.findAllScripts=f3,t.findW3cTraceParent=d3,t.formatTraceParent=t1,t.getExtensionByName=aJ,t.isBeaconApiSupported=Ph,t.isCrossOriginError=jh,t.isInternalApplicationInsightsEndpoint=UN,t.isSampledFlag=qw,t.isValidSpanId=DC,t.isValidTraceId=BC,t.isValidTraceParent=PC,t.msToTimeSpan=L3,t.parseConnectionString=e_,t.parseTraceParent=td,t.strNotSpecified=pf,t.stringToBoolOrDefault=sJ,t.urlGetAbsoluteUrl=WK,t.urlGetCompleteUrl=MN,t.urlGetPathName=GK,t.urlParseFullHost=zp,t.urlParseHost=QN,t.urlParseUrl=HC,t.utlCanUseLocalStorage=Zw,t.utlCanUseSessionStorage=Yp,t.utlDisableStorage=wE,t.utlEnableStorage=$K,t.utlGetLocalStorage=jN,t.utlGetSessionStorage=$N,t.utlGetSessionStorageKeys=KC,t.utlRemoveSessionStorage=zN,t.utlRemoveStorage=id,t.utlSetLocalStorage=VN,t.utlSetSessionStorage=zK,t.utlSetStoragePrefix=_E})});var $Ie=G((gM,VIe)=>{f();(function(t,e){typeof gM=="object"&&typeof VIe<"u"?e(gM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(gM,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function r(A,x){return A[x]}s(r,"_pureRef");var n=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=r(E,c),k=e(String),B=r(k,c),N=e(Math),q=e(Array),te=r(q,c),me=r(te,"slice");function oe(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(oe,"safe");function H(A,x){var T=oe(A);return T.e?x:T.v}s(H,"safeGet");var O;function le(A){return function(x){return typeof x===A}}s(le,"_createIs");function ie(A){var x="[object "+A+"]";return function(T){return!!(T&&j(T)===x)}}s(ie,"_createObjIs");function j(A){return _[b].call(A)}s(j,"objToString");function W(A){return typeof A===d||A===d}s(W,"isUndefined");function Y(A){return!re(A)}s(Y,"isStrictUndefined");function ee(A){return A===i||W(A)}s(ee,"isNullOrUndefined");function pe(A){return A===i||!re(A)}s(pe,"isStrictNullOrUndefined");function re(A){return!!A||A!==n}s(re,"isDefined");function fe(A){return!O&&(O=["string","number","boolean",d,"symbol","bigint"]),A!==l&&O.indexOf(A)!==-1}s(fe,"isPrimitiveType");var he=le("string"),Ne=le(a);function Re(A){return!A&&ee(A)?!1:!!A&&typeof A===l}s(Re,"isObject");var Je=r(q,"isArray"),Me=ie("Date"),pt=le("number"),Tt=le("boolean"),Ct=ie("Error");function bt(A){return!!(A&&A.then&&Ne(A.then))}s(bt,"isPromiseLike");function ce(A){return!(!A||H(function(){return!(A&&0+A)},!A))}s(ce,"isTruthy");var Oe=r(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(r(E,"hasOwn"),X);function X(A,x){return ye(A,x)||!!Oe(A,x)}s(X,"polyObjHasOwn");function ne(A,x,T){if(A&&Re(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(ne,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function Pe(A){var x={};if(x[We.c]=!0,x[We.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return ne(A,function(S,P){x[We[S]]=Y(P)?x[We[S]]:P}),x}s(Pe,"_createProp");var be=r(E,"defineProperty");function ze(A,x,T){return be(A,x,Pe(T))}s(ze,"objDefine");function it(A,x,T,S,P){var L={};return ne(A,function(Q,J){gt(L,Q,x?J:Q),gt(L,J,T?J:Q)}),S?S(L):L}s(it,"_createKeyValueMap");function gt(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(gt,"_assignMapValue");var Ot=e(k),lr="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===lr&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:n),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(P){T=" - "+Lt(P,x)}return S+": "+T}s(Lt,"dumpObj");function Gr(A){throw new Error(A)}s(Gr,"throwError");function Yr(A){throw new TypeError(A)}s(Yr,"throwTypeError");var hn=r(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function Ge(A){return A[u]||i}s(Ge,"_getProto");var ut=r(E,"assign"),yt=r(E,"keys");function Xt(A){return hn&&ne(A,function(x,T){(Je(T)||Re(T))&&Xt(T)}),Gt(A)}s(Xt,"objDeepFreeze");var Gt=e(hn,Ae),Ar=e(r(E,"getPrototypeOf"),Ge);function xr(A){return it(A,1,0,Gt)}s(xr,"createEnum");function jt(A){return it(A,0,0,Gt)}s(jt,"createEnumKeyMap");function rr(A){var x={};return ne(A,function(T,S){gt(x,T,S[1]),gt(x,S[0],S[1])}),Gt(x)}s(rr,"createSimpleMap");function Jt(A){return rr(A)}s(Jt,"createTypeMap");var Ir=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Nr="__tsUtils$gblCfg",Kr;function Wn(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(Wn,"_getGlobalValue");function Jn(){if(!Kr){var A=oe(Wn).v||{};Kr=A[Nr]=A[Nr]||{}}return Kr}s(Jn,"_getGlobalConfig");var Qn=$n;function $n(A,x,T){var S=x?x[A]:i;return function(P){var L=(P?P[A]:i)||S;if(L||T){var Q=arguments;return(L||T).apply(P,L?me[v](Q,1):Q)}Yr('"'+Ot(A)+'" not defined for '+Lt(P))}}s($n,"_unwrapFunctionWithPoly");function rn(A){return function(x){return x[A]}}s(rn,"_unwrapProp");var zn=r(N,"min"),_e=r(N,"max"),U=Qn("slice",B),ge=Qn("substring",B),ve=$n("substr",B,Z);function Z(A,x,T){return ee(A)&&Yr("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),W(T)?U(A,x):U(A,x,x+T))}s(Z,"polyStrSubstr");function M(A,x){return ge(A,0,x)}s(M,"strLeft");var ke="_urid",$e;function qt(){if(!$e){var A=Jn();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var _r;function pr(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(pr,"polyNewSymbol");function un(A){var x=qt();if(!tt(x.k,A)){var T=pr(A),S=yt(x.s).length;T[ke]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[ke]()]=Ot(A)}return x.k[A]}s(un,"polySymbolFor");function gn(A){!_r&&(_r={});var x,T=Ir[A];return T&&(x=_r[T]=_r[T]||pr(m+"."+T)),x}s(gn,"polyGetKnownSymbol");var vr;function Ht(){vr=Jn()}s(Ht,"_initTestHooks");function On(A){var x={};return!vr&&Ht(),x.b=vr.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return vr.lzy||be(x,"v",{value:T}),x.b=vr.lzy,T},"get")}),x}s(On,"getLazy");function qs(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(qs,"createCachedValue");var Fp="window",bl;function Mp(A,x){var T;return function(){return!vr&&Ht(),(!T||vr.lzy)&&(T=qs(oe(A,x).v)),T.v}}s(Mp,"_getGlobalInstFn");function sf(A){return!vr&&Ht(),(!bl||A===!1||vr.lzy)&&(bl=qs(oe(Wn).v||i)),bl.v}s(sf,"getGlobal");function na(A,x){var T;if(!bl||x===!1?T=sf(x):T=bl.v,T&&T[A])return T[A];if(A===Fp)try{return window}catch{}return i}s(na,"getInst");function vh(){return!!rC()}s(vh,"hasDocument");var rC=Mp(na,["document"]);function qk(){return!!Qp()}s(qk,"hasWindow");var Qp=Mp(na,[Fp]);function gK(){return!!bh()}s(gK,"hasNavigator");var bh=Mp(na,["navigator"]),AK=Mp(function(){return!!oe(function(){return process&&(process.versions||{}).node}).v}),OA,Wk;function fw(){return OA=qs(oe(na,[m]).v),OA}s(fw,"_initSymbol");function yK(A){var x=(vr.lzy?0:OA)||fw();return x.v?x.v[A]:n}s(yK,"_getSymbolKey");function Rc(){return!!Eh()}s(Rc,"hasSymbol");function Eh(){return!vr&&Ht(),((vr.lzy?0:OA)||fw()).v}s(Eh,"getSymbol");function tE(A,x){var T=Ir[A];!vr&&Ht();var S=(vr.lzy?0:OA)||fw();return S.v?S.v[T||A]:x?n:gn(A)}s(tE,"getKnownSymbol");function UA(A,x){!vr&&Ht();var T=(vr.lzy?0:OA)||fw();return T.v?T.v(A):x?i:pr(A)}s(UA,"newSymbol");function rE(A){return!vr&&Ht(),Wk=(vr.lzy?0:Wk)||qs(oe(yK,["for"]).v),(Wk.v||un)(A)}s(rE,"symbolFor");function Ih(A){return!!A&&Ne(A.next)}s(Ih,"isIterator");function pw(A){return!pe(A)&&Ne(A[tE(3)])}s(pw,"isIterable");var nE;function Gk(A,x,T){if(A&&(Ih(A)||(!nE&&(nE=qs(tE(3))),A=A[nE.v]?A[nE.v]():i),Ih(A))){var S=n,P=n;try{for(var L=0;!(P=A.next()).done&&x[v](T||A,P.value,L,A)!==-1;)L++}catch(Q){S={e:Q},A.throw&&(P=i,A.throw(S))}finally{try{P&&!P.done&&A.return&&A.return(P)}finally{if(S)throw S.e}}}}s(Gk,"iterForOf");function nC(A,x,T){return A.apply(x,T)}s(nC,"fnApply");function iC(A,x){return!W(x)&&A&&(Je(x)?nC(A.push,A,x):Ih(x)||pw(x)?Gk(x,function(T){A.push(T)}):A.push(x)),A}s(iC,"arrAppend");function qr(A,x,T){if(A)for(var S=A[g]>>>0,P=0;P<S&&!(P in A&&x[v](T||A,A[P],P,A)===-1);P++);}s(qr,"arrForEach");var pu=Qn("indexOf",te),qA=Qn("map",te);function oC(A,x,T){return((A?A.slice:i)||me).apply(A,me[v](arguments,1))}s(oC,"arrSlice");var CK=Qn("reduce",te),Th=e(r(E,"create"),xK);function xK(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&Yr("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(xK,"polyObjCreate");var Hk;function iE(A,x){var T=E.setPrototypeOf||function(S,P){var L;!Hk&&(Hk=qs((L={},L[u]=[],L instanceof Array))),Hk.v?S[u]=P:ne(P,function(Q,J){return S[Q]=J})};return T(A,x)}s(iE,"objSetPrototypeOf");function vK(A,x,T){oe(ze,[x,y,{v:A,c:!0,e:!1}]),x=iE(x,T);function S(){this[p]=x,oe(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?Th(T):(S[c]=T[c],new S),x}s(vK,"_createCustomError");function oE(A,x){x&&(A[y]=x)}s(oE,"_setName");function Qa(A,x,T){var S=T||Error,P=S[c][y],L=Error.captureStackTrace;return vK(A,function(){var Q=this,J=arguments;try{oe(oE,[S,A]);var ae=nC(S,Q,me[v](J))||Q;if(ae!==Q){var Ce=Ar(Q);Ce!==Ar(ae)&&iE(ae,Ce)}return L&&L(ae,Q[p]),x&&x(ae,J),ae}finally{oe(oE,[S,P])}},S)}s(Qa,"createCustomError");function wh(){return(Date.now||sE)()}s(wh,"utcNow");function sE(){return new Date().getTime()}s(sE,"polyUtcNow");function sN(A){return s(function(T){return ee(T)&&Yr("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(sN,"_createTrimFn");var bK=sN(/^\s+|(?=\s)\s+$/g),ji=$n("trim",B,bK),WA=r(N,"floor"),_h,jk,aE;function mu(A){if(!A||typeof A!==l)return!1;aE||(aE=qk()?Qp():!0);var x=!1;if(A!==aE){jk||(_h=Function[c][b],jk=_h[v](E));try{var T=Ar(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&_h[v](T)===jk))}catch{}}return x}s(mu,"isPlainObject");function aN(A){return A.value&&mw(A),!0}s(aN,"_defaultDeepCopyHandler");var lN=[sC,mw,uN,Sh];function Vk(A,x,T,S){var P;return qr(A,function(L){if(L.k===x)return P=L,-1}),P||(P={k:x,v:x},A.push(P),S(P)),P.v}s(Vk,"_getSetVisited");function GA(A,x,T,S){var P=T.handler,L=T.path?S?T.path.concat(S):T.path:[],Q={handler:T.handler,src:T.src,path:L},J=typeof x,ae=!1,Ce=x===i;Ce||(x&&J===l?ae=mu(x):Ce=fe(J));var Te={type:J,isPrim:Ce,isPlain:ae,value:x,result:x,path:L,origin:T.src,copy:s(function(Le,Ye){return GA(A,Le,Ye?Q:T,Ye)},"copy"),copyTo:s(function(Le,Ye){return $k(A,Le,Ye,Q)},"copyTo")};return Te.isPrim?P&&P[v](T,Te)?Te.result:x:Vk(A,x,L,function(Le){ze(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(He){Le.v=He},"s")});for(var Ye=0,Fe=P;!(Fe||(Ye<lN.length?lN[Ye++]:aN))[v](T,Te);)Fe=i})}s(GA,"_deepCopy");function $k(A,x,T,S){if(!ee(T))for(var P in T)x[P]=GA(A,T[P],S,P);return x}s($k,"_copyProps");function cN(A,x,T){var S={handler:T,src:x,path:[]};return $k([],A,x,S)}s(cN,"objCopyProps");function zk(A,x){var T={handler:x,src:A};return GA([],A,T)}s(zk,"objDeepCopy");function sC(A){var x=A.value;if(Je(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(sC,"arrayDeepCopyHandler");function Sh(A){var x=A.value;return Me(x)?(A.result=new Date(x.getTime()),!0):!1}s(Sh,"dateDeepCopyHandler");function uN(A){return A.type===a}s(uN,"functionDeepCopyHandler");function mw(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(mw,"plainObjDeepCopyHandler");function Yk(A,x){return qr(x,function(T){cN(A,T)}),A}s(Yk,"_doExtend");function hw(A,x,T,S,P,L,Q){return Yk(zk(A)||{},me[v](arguments))}s(hw,"deepExtend");var EK=rn(g),IK=r(N,"round"),dN=$n("endsWith",B,TK);function TK(A,x,T){he(A)||Yr("'"+Lt(A)+"' is not a string");var S=he(x)?x:Ot(x),P=!W(T)&&T<A[g]?T:A[g];return ge(A,P-S[g],P)===S}s(TK,"polyStrEndsWith");var Op=Qn("indexOf",B),gw="ref",Kk="unref",Aw="hasRef",wK="enabled";function yw(A,x,T){var S=!0,P=A?x(i):i,L;function Q(){return S=!1,P&&P[Kk]&&P[Kk](),L}s(Q,"_unref");function J(){P&&T(P),P=i}s(J,"_cancel");function ae(){return P=x(P),S||Q(),L}s(ae,"_refresh");function Ce(Te){!Te&&P&&J(),Te&&!P&&ae()}return s(Ce,"_setEnabled"),L={cancel:J,refresh:ae},L[Aw]=function(){return P&&P[Aw]?P[Aw]():S},L[gw]=function(){return S=!0,P&&P[gw]&&P[gw](),L},L[Kk]=Q,L=be(L,wK,{get:s(function(){return!!P},"get"),set:Ce}),{h:L,dn:s(function(){P=i},"dn")}}s(yw,"_createTimerHandler");function Cw(A,x,T){var S=Je(x),P=S?x.length:0,L=(P>0?x[0]:S?n:x)||setTimeout,Q=(P>1?x[1]:n)||clearTimeout,J=T[0];T[0]=function(){ae.dn(),nC(J,n,me[v](arguments))};var ae=yw(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;nC(Q,n,[Ce])}return nC(L,n,T)},function(Ce){nC(Q,n,[Ce])});return ae.h}s(Cw,"_createTimeoutWith");function Rh(A,x){return Cw(!0,n,me[v](arguments))}s(Rh,"scheduleTimeout");function xw(A,x){return Cw(!1,n,me[v](arguments))}s(xw,"createTimeout");var HA,Ju="constructor",Xu="prototype",jA="function",aC="_dynInstFuncs",kh="_isDynProxy",lC="_dynClass",Jk="_dynCls$",VA="_dynInstChk",cC=VA,Xk="_dfOpts",vw="_unknown_",uC="__proto__",lE="_dyn"+uC,bw="__dynProto$Gbl",dC="_dynInstProto",fC="useBaseInst",cE="setInstFuncs",$A=Object,pC=$A.getPrototypeOf,Zk=$A.getOwnPropertyNames,Ew=sf(),mC=Ew[bw]||(Ew[bw]={o:(HA={},HA[cE]=!0,HA[fC]=!0,HA),n:1e3});function hC(A){return A&&(A===$A[Xu]||A===Array[Xu])}s(hC,"_isObjectOrArrayPrototype");function Up(A){return hC(A)||A===Function[Xu]}s(Up,"_isObjectArrayOrFunctionPrototype");function af(A){var x;if(A){if(pC)return pC(A);var T=A[uC]||A[Xu]||(A[Ju]?A[Ju][Xu]:null);x=A[lE]||T,ye(A,lE)||(delete A[dC],x=A[lE]=A[dC]||A[lE],A[dC]=T)}return x}s(af,"_getObjProto");function gC(A,x){var T=[];if(Zk)T=Zk(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var P=0;P<T.length;P++)x(T[P])}s(gC,"_forEachProp");function AC(A,x,T){return x!==Ju&&typeof A[x]===jA&&(T||ye(A,x))&&x!==uC&&x!==Xu}s(AC,"_isDynamicCandidate");function Iw(A){Yr("DynamicProto: "+A)}s(Iw,"_throwTypeError");function e3(A){var x=Th(null);return gC(A,function(T){!x[T]&&AC(A,T,!1)&&(x[T]=A[T])}),x}s(e3,"_getInstanceFuncs");function t3(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(t3,"_hasVisited");function _K(A,x,T,S){function P(ae,Ce,Te){var Le=Ce[Te];if(Le[kh]&&S){var Ye=ae[aC]||{};Ye[cC]!==!1&&(Le=(Ye[Ce[lC]]||{})[Te]||Le)}return function(){return Le.apply(ae,arguments)}}s(P,"_instFuncProxy");var L=Th(null);gC(T,function(ae){L[ae]=P(x,T,ae)});for(var Q=af(A),J=[];Q&&!Up(Q)&&!t3(J,Q);)gC(Q,function(ae){!L[ae]&&AC(Q,ae,!pC)&&(L[ae]=P(x,Q,ae))}),J.push(Q),Q=af(Q);return L}s(_K,"_getBaseFuncs");function SK(A,x,T,S){var P=null;if(A&&ye(T,lC)){var L=A[aC]||Th(null);if(P=(L[T[lC]]||Th(null))[x],P||Iw("Missing ["+x+"] "+jA),!P[VA]&&L[cC]!==!1){for(var Q=!ye(A,x),J=af(A),ae=[];Q&&J&&!Up(J)&&!t3(ae,J);){var Ce=J[x];if(Ce){Q=Ce===S;break}ae.push(J),J=af(J)}try{Q&&(A[x]=P),P[VA]=1}catch{L[cC]=!1}}}return P}s(SK,"_getInstFunc");function RK(A,x,T){var S=x[A];return S===T&&(S=af(x)[A]),typeof S!==jA&&Iw("["+A+"] is not a "+jA),S}s(RK,"_getProtoFunc");function kK(A,x,T,S,P){function L(ae,Ce){var Te=s(function(){var Le=SK(this,Ce,ae,Te)||RK(Ce,ae,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[kh]=1,Te}if(s(L,"_createDynamicPrototype"),!hC(A)){var Q=T[aC]=T[aC]||Th(null);if(!hC(Q)){var J=Q[x]=Q[x]||Th(null);Q[cC]!==!1&&(Q[cC]=!!P),hC(J)||gC(T,function(ae){AC(T,ae,!1)&&T[ae]!==S[ae]&&(J[ae]=T[ae],delete T[ae],(!ye(A,ae)||A[ae]&&!A[ae][kh])&&(A[ae]=L(A,ae)))})}}}s(kK,"_populatePrototype");function r3(A,x){if(pC){for(var T=[],S=af(x);S&&!Up(S)&&!t3(T,S);){if(S===A)return!0;T.push(S),S=af(S)}return!1}return!0}s(r3,"_checkPrototype");function uE(A,x){return ye(A,Xu)?A.name||x||vw:((A||{})[Ju]||{}).name||x||vw}s(uE,"_getObjName");function tc(A,x,T,S){ye(A,Xu)||Iw("theClass is an invalid class definition.");var P=A[Xu];r3(P,x)||Iw("["+uE(A)+"] not in hierarchy of ["+uE(x)+"]");var L=null;ye(P,lC)?L=P[lC]:(L=Jk+uE(A,"_")+"$"+mC.n,mC.n++,P[lC]=L);var Q=tc[Xk],J=!!Q[fC];J&&S&&S[fC]!==void 0&&(J=!!S[fC]);var ae=e3(x),Ce=_K(P,x,ae,J);T(x,Ce);var Te=!!pC&&!!Q[cE];Te&&S&&(Te=!!S[cE]),kK(P,L,x,ae,Te!==!1)}s(tc,"dynamicProto"),tc[Xk]=mC.o;var Ws="function",fN="object",pN="undefined",dE="prototype",n3=Object,i3=n3[dE];(sf()||{}).Symbol,(sf()||{}).Reflect;var Tw="hasOwnProperty",mN=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var P in x)i3[Tw].call(x,P)&&(A[P]=x[P])}return A},"__objAssignFnImpl"),qp=ut||mN,Bh=s(function(A,x){return Bh=n3.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var P in S)S[Tw](P)&&(T[P]=S[P])},Bh(A,x)},"extendStaticsFn");function fE(A,x){typeof x!==Ws&&x!==null&&Yr("Class extends value "+String(x)+" is not a constructor or null"),Bh(A,x);function T(){this.constructor=A}s(T,"__"),A[dE]=x===null?Th(x):(T[dE]=x[dE],new T)}s(fE,"__extendsFn");function hN(A,x){for(var T=0,S=x.length,P=A.length;T<S;T++,P++)A[P]=x[T];return A}s(hN,"__spreadArrayFn");var ww=xr,BK=Jt,Dh=ww({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),yC="toLowerCase",Yn="length",CC="warnToConsole",zA="throwInternal",Wp="watch",_w="apply",Vi="push",xC="splice",ga="logger",vC="cancel",pE="initialize",Ph="identifier",mE="removeNotificationListener",Sw="addNotificationListener",lf="isInitialized",bC="value",Yd="getNotifyMgr",EC="getPlugin",Nh="name",El="processNext",IC="getProcessTelContext",cf="enabled",gN="stopPollingInternalLogs",YA="unload",Rw="onComplete",TC="version",AN="loggingLevelConsole",KA="createNew",uf="teardown",kw="messageId",JA="message",df="diagLog",Bw="_doTeardown",Gp="update",ff="getNext",Lh="setNextPlugin",Dw="userAgent",Fh="split",Mh="replace",rc="type",o3="evtName",hE="status",s3="getAllResponseHeaders",a3="isChildEvt",wC="data",Qh="getCtx",Kd="setCtx",yN="itemsReceived",Hp="urlString",l3="headers",jp="timeout",CN="traceFlags",_C;function c3(A,x){_C||(_C=Qa("AggregationError",function(S,P){P[Yn]>1&&(S.errors=P[1])}));var T=A||"One or more errors occurred.";throw qr(x,function(S,P){T+=`
`.concat(P," > ").concat(Lt(S))}),new _C(T,x||[])}s(c3,"throwAggregationError");var XA="Promise",ZA="rejected";function Zu(A,x){return xN(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:ZA,rejected:!0,reason:T}):T})}s(Zu,"doAwaitResponse");function xN(A,x,T,S){var P=A;try{if(bt(A))(x||T)&&(P=A.then(x,T));else try{x&&(P=x(A))}catch(L){if(T)P=T(L);else throw L}}finally{S&&DK(P,S)}return P}s(xN,"doAwait");function DK(A,x){var T=A;return x&&(bt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(DK,"doFinally");var vN=["pending","resolving","resolved",ZA],bN="dispatchEvent",gE;function EN(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(EN,"_hasInitEventFn");function Pw(A,x,T,S){var P=rC();!gE&&(gE=qs(!!oe(EN,[P]).v));var L=gE.v?P.createEvent("Event"):S?new Event(x):{};if(T&&T(L),gE.v&&L.initEvent(x,!1,!0),L&&A[bN])A[bN](L);else{var Q=A["on"+x];if(Q)Q(L);else{var J=na("console");J&&(J.error||J.log)(x,Lt(L))}}}s(Pw,"emitEvent");var IN="unhandledRejection",PK=IN.toLowerCase(),SC=10,Nw;function TN(A){return Ne(A)?A.toString():Lt(A)}s(TN,"dumpFnObj");function wN(A,x,T){var S=oC(arguments,3),P=0,L=!1,Q,J=[],ae=!1,Ce=null,Te;function Le(Vt,mr){try{ae=!0,Ce&&Ce.cancel(),Ce=null;var Hn=A(function(xi,vi){J.push(function(){try{var ho=P===2?Vt:mr,dn=W(ho)?Q:Ne(ho)?ho(Q):ho;bt(dn)?dn.then(xi,vi):ho?xi(dn):P===3?vi(dn):xi(dn)}catch(Lr){vi(Lr)}}),L&&lt()},S);return Hn}finally{}}s(Le,"_then");function Ye(Vt){return Le(void 0,Vt)}s(Ye,"_catch");function Fe(Vt){var mr=Vt,Hn=Vt;return Ne(Vt)&&(mr=s(function(xi){return Vt&&Vt(),xi},"thenFinally"),Hn=s(function(xi){throw Vt&&Vt(),xi},"catchFinally")),Le(mr,Hn)}s(Fe,"_finally");function He(){return vN[P]}s(He,"_strState");function lt(){if(J.length>0){var Vt=J.slice();J=[],ae=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,mr){return function(Hn){if(P===mr){if(Vt===2&&bt(Hn)){P=1,Hn.then(et(2,1),et(3,1));return}P=Vt,L=!0,Q=Hn,lt(),!ae&&Vt===3&&!Ce&&(Ce=Rh(At,SC))}}}s(et,"_createSettleIfFn");function At(){if(!ae)if(ae=!0,AK())process.emit(IN,Q,Te);else{var Vt=Qp()||sf();!Nw&&(Nw=qs(oe(na,[XA+"RejectionEvent"]).v)),Pw(Vt,PK,function(mr){return ze(mr,"promise",{g:s(function(){return Te},"g")}),mr.reason=Q,mr},!!Nw.v)}}s(At,"_notifyUnhandledRejection"),Te={then:Le,catch:Ye,finally:Fe},be(Te,"state",{get:He}),Rc()&&(Te[tE(11)]="IPromise");function Nt(){return"IPromise "+He()+(L?" - "+TN(Q):"")}return s(Nt,"_toString"),Te.toString=Nt,s(function(){Ne(T)||Yr(XA+": executor is not a function - "+TN(T));var mr=et(3,0);try{T.call(Te,et(2,0),mr)}catch(Hn){mr(Hn)}},"_initialize")(),Te}s(wN,"_createPromise");function NK(A){return function(x){var T=oC(arguments,1);return A(function(S,P){try{var L=[],Q=1;Gk(x,function(J,ae){J&&(Q++,xN(J,function(Ce){L[ae]=Ce,--Q===0&&S(L)},P))}),Q--,Q===0&&S(L)}catch(J){P(J)}},T)}}s(NK,"_createAllPromise");function LK(A){return qs(function(x){var T=oC(arguments,1);return A(function(S,P){var L=[],Q=1;function J(ae,Ce){Q++,Zu(ae,function(Te){Te.rejected?L[Ce]={status:ZA,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--Q===0&&S(L)})}s(J,"processItem");try{Je(x)?qr(x,J):pw(x)?Gk(x,J):Yr("Input is not an iterable"),Q--,Q===0&&S(L)}catch(ae){P(ae)}},T)})}s(LK,"_createAllSettledPromise");function _N(A){qr(A,function(x){try{x()}catch{}})}s(_N,"syncItemProcessor");function SN(A){var x=pt(A)?A:0;return function(T){Rh(function(){_N(T)},x)}}s(SN,"timeoutItemProcessor");function Lw(A,x){return wN(Lw,SN(x),A,x)}s(Lw,"createAsyncPromise");var Fw;function FK(A,x){!Fw&&(Fw=qs(oe(na,[XA]).v||null));var T=Fw.v;if(!T)return Lw(A);Ne(A)||Yr(XA+": executor is not a function - "+Lt(A));var S=0;function P(){return vN[S]}s(P,"_strState");var L=new T(function(Q,J){function ae(Te){S=2,Q(Te)}s(ae,"_resolve");function Ce(Te){S=3,J(Te)}s(Ce,"_reject"),A(ae,Ce)});return be(L,"state",{get:P}),L}s(FK,"createNativePromise");var Mw;function Qw(A){return wN(Qw,_N,A)}s(Qw,"createSyncPromise");function hu(A,x){return!Mw&&(Mw=LK(Qw)),Mw.v(A,x)}s(hu,"createSyncAllSettledPromise");var Ow;function RC(A,x){return!Ow&&(Ow=qs(FK)),Ow.v.call(this,A,x)}s(RC,"createPromise");var u3=NK(RC),ed=void 0,mi="",Vp="channels",Aa="core",Jd="createPerfMgr",Uw="disabled",e1="extensionConfig",kC="extensions",td="processTelemetry",BC="priority",DC="eventsSent",PC="eventsDiscarded",qw="eventsSendRequest",t1="perfEvent",d3="offlineEventsStored",f3="offlineBatchSent",Ww="offlineBatchDrop",AE="getPerfMgr",Gw="domain",Hw="path",RN="Not dynamic - ",p3=/-([a-z])/g,MK=/([^\w\d_$])/g,QK=/^(\d+[\w\d_$])/;function jw(A){return!ee(A)}s(jw,"isNotNullOrUndefined");function NC(A){var x=A;return x&&he(x)&&(x=x[Mh](p3,function(T,S){return S.toUpperCase()}),x=x[Mh](MK,"_"),x=x[Mh](QK,function(T,S){return"_"+S})),x}s(NC,"normalizeJsName");function Il(A,x){return A&&x?Op(A,x)!==-1:!1}s(Il,"strContains");function yE(A){return A&&A.toISOString()||""}s(yE,"toISOString");function al(A){return Ct(A)?A[Nh]:mi}s(al,"getExceptionName");function Oh(A,x,T,S,P){var L=T;return A&&(L=A[x],L!==T&&(!P||P(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(Oh,"setValue");function kN(A,x,T){var S;return A?(S=A[x],!S&&ee(S)&&(S=W(T)?{}:T,A[x]=S)):S=W(T)?{}:T,S}s(kN,"getSetValue");function OK(A,x){var T=null,S=null;return Ne(A)?T=A:S=A,function(){var P=arguments;if(T&&(S=T()),S)return S[x][_w](S,P)}}s(OK,"_createProxyFunction");function CE(A,x,T,S,P){A&&x&&T&&(P!==!1||W(A[x]))&&(A[x]=OK(T,S))}s(CE,"proxyFunctionAs");function m3(A,x,T,S){return A&&x&&Re(A)&&Je(T)&&qr(T,function(P){he(P)&&CE(A,P,x,P,S)}),A}s(m3,"proxyFunctions");function UK(A){return function(){function x(){var T=this;A&&ne(A,function(S,P){T[S]=P})}return s(x,"class_1"),x}()}s(UK,"createClassFromInterface");function h3(A){return A&&ut&&(A=n3(ut({},A))),A}s(h3,"optimizeObject");function BN(A,x,T,S,P,L){var Q=arguments,J=Q[0]||{},ae=Q[Yn],Ce=!1,Te=1;for(ae>0&&Tt(J)&&(Ce=J,J=Q[Te]||{},Te++),Re(J)||(J={});Te<ae;Te++){var Le=Q[Te],Ye=Je(Le),Fe=Re(Le);for(var He in Le){var lt=Ye&&He in Le||Fe&&tt(Le,He);if(lt){var et=Le[He],At=void 0;if(Ce&&et&&((At=Je(et))||mu(et))){var Nt=J[He];At?Je(Nt)||(Nt=[]):mu(Nt)||(Nt={}),et=BN(Ce,Nt,et)}et!==void 0&&(J[He]=et)}}}return J}s(BN,"objExtend");function Vw(A){try{return A.responseText}catch{}return null}s(Vw,"getResponseText");function DN(A,x){return A?"XDomainRequest,Response:"+Vw(A)||"":x}s(DN,"formatErrorMessageXdr");function $w(A,x){return A?"XMLHttpRequest,Status:"+A[hE]+",Response:"+Vw(A)||A.response||"":x}s($w,"formatErrorMessageXhr");function PN(A,x){return x&&(pt(x)?A=[x].concat(A):Je(x)&&(A=x.concat(A))),A}s(PN,"prependTransports");var g3="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",xE="withCredentials",pf="timeout";function A3(A,x,T,S,P,L){S===void 0&&(S=!1),P===void 0&&(P=!1);function Q(ae,Ce,Te){try{ae[Ce]=Te}catch{}}s(Q,"_wrapSetXhrProp");var J=new XMLHttpRequest;return S&&Q(J,g3,S),T&&Q(J,xE,T),J.open(A,x,!P),T&&Q(J,xE,T),!P&&L&&Q(J,pf,L),J}s(A3,"openXhr");function NN(A){var x={};if(he(A)){var T=ji(A)[Fh](/[\r\n]+/);qr(T,function(S){if(S){var P=S.indexOf(": ");if(P!==-1){var L=ji(S.substring(0,P))[yC](),Q=ji(S.substring(P+1));x[L]=Q}else x[ji(S)]=1}})}return x}s(NN,"convertAllHeadersToMap");function Uh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=ji(S))}return A}s(Uh,"_appendHeader");var wn="kill-duration",LC="kill-duration-seconds",r1="time-delta-millis";function n1(A,x){var T={};return A[s3]?T=NN(A[s3]()):x&&(T=Uh(T,A,r1),T=Uh(T,A,wn),T=Uh(T,A,LC)),T}s(n1,"_getAllResponseHeaders");var y3="documentMode",vE="location",FC="console",zw="JSON",C3="crypto",Yw="msCrypto",MC="msie",i1="trident/",x3="XMLHttpRequest",rd=null,QC=null,mf=!1,kc=null,OC=null;function bE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[dE];S&&(T=x in S)}}catch{}if(!T)try{var P=new A;T=!W(P[x])}catch{}}return T}s(bE,"_hasProperty");function UC(A){if(A&&mf){var x=na("__mockLocation");if(x)return x}return typeof location===fN&&location?location:na(vE)}s(UC,"getLocation");function EE(){return typeof console!==pN?console:na(FC)}s(EE,"getConsole");function qC(){return!!(typeof JSON===fN&&JSON||na(zw)!==null)}s(qC,"hasJSON");function gu(){return qC()?JSON||na(zw):null}s(gu,"getJSON");function Kw(){return na(C3)}s(Kw,"getCrypto");function Jw(){return na(Yw)}s(Jw,"getMsCrypto");function Xd(){var A=bh();if(A&&(A[Dw]!==QC||rd===null)){QC=A[Dw];var x=(QC||mi)[yC]();rd=Il(x,MC)||Il(x,i1)}return rd}s(Xd,"isIE");function WC(A){if(A===void 0&&(A=null),!A){var x=bh()||{};A=x?(x.userAgent||mi)[yC]():mi}var T=(A||mi)[yC]();if(Il(T,MC)){var S=rC()||{};return _e(parseInt(T[Fh](MC)[1]),S[y3]||0)}else if(Il(T,i1)){var P=parseInt(T[Fh](i1)[1]);if(P)return P+4}return null}s(WC,"getIEVersion");function qh(A){return(OC===null||A===!1)&&(OC=gK()&&!!bh().sendBeacon),OC}s(qh,"isBeaconsSupported");function IE(A){var x=!1;try{x=!!na("fetch");var T=na("Request");x&&A&&T&&(x=bE(T,"keepalive"))}catch{}return x}s(IE,"isFetchSupported");function v3(){return kc===null&&(kc=typeof XDomainRequest!==pN,kc&&b3()&&(kc=kc&&!bE(na(x3),"withCredentials"))),kc}s(v3,"useXDomainRequest");function b3(){var A=!1;try{var x=na(x3);A=!!x}catch{}return A}s(b3,"isXhrSupported");var ll=4294967296,hf=4294967295,Xw=123456789,E3=987654321,$p=!1,nd=Xw,GC=E3;function I3(A){A<0&&(A>>>=0),nd=Xw+A&hf,GC=E3-A&hf,$p=!0}s(I3,"_mwcSeed");function LN(){try{var A=wh()&2147483647;I3((Math.random()*ll^A)+A)}catch{}}s(LN,"_autoSeedMwc");function T3(A){var x=0,T=Kw()||Jw();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&hf),x===0&&Xd()&&($p||LN(),x=FN()&hf),x===0&&(x=WA(ll*Math.random()|0)),A||(x>>>=0),x}s(T3,"random32");function FN(A){GC=36969*(GC&65535)+(GC>>16)&hf,nd=18e3*(nd&65535)+(nd>>16)&hf;var x=(GC<<16)+(nd&65535)>>>0&hf|0;return A||(x>>>=0),x}s(FN,"mwcRandom32");function qK(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=T3()>>>0,S=0,P=mi;P[Yn]<A;)S++,P+=x.charAt(T&63),T>>>=6,S===5&&(T=(T3()<<2&4294967295|T&3)>>>0,S=0);return P}s(qK,"newId");var HC="3.3.6",WK="."+qK(6),GK=0;function MN(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(MN,"_canAcceptData");function QN(A,x){var T=x[A.id];if(!T){T={};try{MN(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(QN,"_getCache");function zp(A,x){return x===void 0&&(x=!1),NC(A+GK+++(x?"."+HC:mi)+WK)}s(zp,"createUniqueNamespace");function ON(A){var x={id:zp("_aiData-"+(A||mi)+"."+HC),accept:s(function(T){return MN(T)},"accept"),get:s(function(T,S,P,L){var Q=T[x.id];return Q?Q[NC(S)]:(L&&(Q=QN(x,T),Q[NC(S)]=P),P)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(ON,"createElmNodeData");function jC(A){return A&&Re(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s(jC,"_isConfigDefaults");function UN(A,x,T){var S,P=T.dfVal||re;if(x&&T.fb){var L=T.fb;Je(L)||(L=[L]);for(var Q=0;Q<L[Yn];Q++){var J=L[Q],ae=x[J];if(P(ae)?S=ae:A&&(ae=A.cfg[J],P(ae)&&(S=ae),A.set(A.cfg,Ot(J),ae)),P(S))break}}return!P(S)&&P(T.v)&&(S=T.v),S}s(UN,"_getDefault");function w3(A,x,T){var S=T;if(T&&jC(T)&&(S=UN(A,x,T)),S){jC(S)&&(S=w3(A,x,S));var P;Je(S)?(P=[],P[Yn]=S[Yn]):mu(S)&&(P={}),P&&(ne(S,function(L,Q){Q&&jC(Q)&&(Q=w3(A,x,Q)),P[L]=Q}),S=P)}return S}s(w3,"_resolveDefaultValue");function _3(A,x,T,S){var P,L,Q,J=S,ae,Ce,Te,Le;jC(J)?(P=J.isVal,L=J.set,Te=J.rdOnly,Le=J.blkVal,ae=J.mrg,Ce=J.ref,!Ce&&W(Ce)&&(Ce=!!ae),Q=UN(A,x,J)):Q=S,Le&&A.blkVal(x,T);var Ye,Fe=!0,He=x[T];(He||!ee(He))&&(Ye=He,Fe=!1,P&&Ye!==Q&&!P(Ye)&&(Ye=Q,Fe=!0),L&&(Ye=L(Ye,Q,x),Fe=Ye===Q)),Fe?Q?Ye=w3(A,x,Q):Ye=Q:(mu(Ye)||Je(Q))&&ae&&Q&&(mu(Q)||Je(Q))&&ne(Q,function(lt,et){_3(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(_3,"_applyDefaultValue");var Wh=rE("[[ai_dynCfg_1]]"),qN=rE("[[ai_blkDynCfg_1]]"),WN=rE("[[ai_frcDynCfg_1]]");function GN(A){if(A){var x;if(Je(A)?(x=[],x[Yn]=A[Yn]):mu(A)&&(x={}),x)return ne(A,function(T,S){x[T]=GN(S)}),x}return A}s(GN,"_cfgDeepCopy");function HK(A){if(A){var x=A[Wh]||A;if(x.cfg&&(x.cfg===A||x.cfg[Wh]===x))return x}return null}s(HK,"getDynamicConfigHandler");function jK(A){if(A&&(mu(A)||Je(A)))try{A[qN]=!0}catch{}return A}s(jK,"blockDynamicConversion");function S3(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[WN],!S&&!T[qN]&&(S=mu(T)||Je(T))),S}s(S3,"_canMakeDynamic");function VC(A){Yr("InvalidAccess:"+A)}s(VC,"throwInvalidAccess");var VK=["push","pop","shift","unshift","splice"],TE=s(function(A,x,T,S){A&&A[zA](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function Gh(A,x,T){Je(x)&&qr(VK,function(S){var P=x[S];x[S]=function(){for(var L=[],Q=0;Q<arguments.length;Q++)L[Q]=arguments[Q];var J=P[_w](this,L);return YC(A,x,T,"Patching"),J}})}s(Gh,"_patchArray");function Zd(A,x){var T=Oe(A,x);return T&&T.get}s(Zd,"_getOwnPropGetter");function HN(A,x,T,S){var P={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(pu(P.h,Ce)===-1&&P.h[Vi](Ce),A.trk(Ce,P))},"trk"),clr:s(function(Ce){var Te=pu(P.h,Ce);Te!==-1&&P.h[xC](Te,1)},"clr")},L=!0,Q=!1;function J(){L&&(Q=Q||S3(J,A,S),S&&!S[Wh]&&Q&&(S=YC(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&P.trk(Ce),S}s(J,"_getProperty"),J[A.prop]={chng:s(function(){A.add(P)},"chng")};function ae(Ce){if(S!==Ce){J[A.ro]&&!A.upd&&VC("["+T+"] is read-only:"+Lt(x)),L&&(Q=Q||S3(J,A,S),L=!1);var Te=Q&&J[A.rf];if(Q)if(Te){ne(S,function(Ye){S[Ye]=Ce?Ce[Ye]:ed});try{ne(Ce,function(Ye,Fe){$C(A,S,Ye,Fe)}),Ce=S}catch(Ye){TE((A.hdlr||{})[ga],T,"Assigning",Ye),Q=!1}}else S&&S[Wh]&&ne(S,function(Ye){var Fe=Zd(S,Ye);if(Fe){var He=Fe[A.prop];He&&He.chng()}});if(Ce!==S){var Le=Ce&&S3(J,A,Ce);!Te&&Le&&(Ce=YC(A,Ce,T,"Converting")),S=Ce,Q=Le}A.add(P)}}s(ae,"_setProperty"),ze(x,P.n,{g:J,s:ae})}s(HN,"_createDynamicProperty");function $C(A,x,T,S){if(x){var P=Zd(x,T),L=P&&!!P[A.prop];L?x[T]=S:HN(A,x,T,S)}return x}s($C,"_setDynamicProperty");function zC(A,x,T,S){if(x){var P=Zd(x,T),L=P&&!!P[A.prop],Q=S&&S[0],J=S&&S[1],ae=S&&S[2];if(!L){if(ae)try{jK(x)}catch(Ce){TE((A.hdlr||{})[ga],T,"Blocking",Ce)}try{$C(A,x,T,x[T]),P=Zd(x,T)}catch(Ce){TE((A.hdlr||{})[ga],T,"State",Ce)}}Q&&(P[A.rf]=Q),J&&(P[A.ro]=J),ae&&(P[A.blkVal]=!0)}return x}s(zC,"_setDynamicPropertyState");function YC(A,x,T,S){try{ne(x,function(P,L){$C(A,x,P,L)}),x[Wh]||(be(x,Wh,{get:s(function(){return A.hdlr},"get")}),Gh(A,x,T))}catch(P){TE((A.hdlr||{})[ga],T,S,P)}return x}s(YC,"_makeDynamicObject");var wE="[[ai_",_E="]]";function $K(A){var x=UA(wE+"get"+A.uid+_E),T=UA(wE+"ro"+A.uid+_E),S=UA(wE+"rf"+A.uid+_E),P=UA(wE+"blkVal"+A.uid+_E),L=UA(wE+"dtl"+A.uid+_E),Q=null,J=null,ae;function Ce(Fe,He){var lt=ae.act;try{ae.act=Fe,Fe&&Fe[L]&&(qr(Fe[L],function(At){At.clr(Fe)}),Fe[L]=[]),He({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(At){var et=A[ga];throw et&&et[zA](1,107,Lt(At)),At}finally{ae.act=lt||null}}s(Ce,"_useHandler");function Te(){if(Q){var Fe=Q;Q=null,J&&J[vC](),J=null;var He=[];if(qr(Fe,function(lt){if(lt&&(lt[L]&&(qr(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){He[Vi](et)}}),Q)try{Te()}catch(lt){He[Vi](lt)}He[Yn]>0&&c3("Watcher error(s): ",He)}}s(Te,"_notifyWatchers");function Le(Fe){if(Fe&&Fe.h[Yn]>0){Q||(Q=[]),J||(J=Rh(function(){J=null,Te()},0));for(var He=0;He<Fe.h[Yn];He++){var lt=Fe.h[He];lt&&pu(Q,lt)===-1&&Q[Vi](lt)}}}s(Le,"_addWatcher");function Ye(Fe,He){if(Fe){var lt=Fe[L]=Fe[L]||[];pu(lt,He)===-1&&lt[Vi](He)}}return s(Ye,"_trackHandler"),ae={prop:x,ro:T,rf:S,blkVal:P,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ye},ae}s($K,"_createState");function Zw(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(Zw,"_createAndUseHandler");function jN(A,x,T){var S=HK(x);if(S)return S;var P=zp("dyncfg",!0),L=x&&T!==!1?x:GN(x),Q;function J(){Q.notify()}s(J,"_notifyWatchers");function ae(et,At,Nt){try{et=$C(Q,et,At,Nt)}catch(Vt){TE(A,At,"Setting value",Vt)}return et[At]}s(ae,"_setValue");function Ce(et){return Zw(Q,et)}s(Ce,"_watch");function Te(et,At){Q.use(null,function(Nt){var Vt=Q.upd;try{W(At)||(Q.upd=At),et(Nt)}finally{Q.upd=Vt}})}s(Te,"_block");function Le(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[0]=!0,Nt))[At]}s(Le,"_ref");function Ye(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[1]=!0,Nt))[At]}s(Ye,"_rdOnly");function Fe(et,At){var Nt;return zC(Q,et,At,(Nt={},Nt[2]=!0,Nt))[At]}s(Fe,"_blkPropValue");function He(et,At){return At&&ne(At,function(Nt,Vt){_3(lt,et,Nt,Vt)}),et}s(He,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:J,set:ae,setDf:He,watch:Ce,ref:Le,rdOnly:Ye,blkVal:Fe,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:P}),Q=$K(lt),YC(Q,L,"config","Creating"),lt}s(jN,"_createDynamicHandler");function VN(A,x){A?(A[CC](x),A[zA](2,108,x)):VC(x)}s(VN,"_logInvalidAccess");function id(A,x,T,S){var P=jN(T,A||{},S);return x&&P.setDf(P.cfg,x),P}s(id,"createDynamicConfig");function Yp(A,x,T){var S=A[Wh]||A;return S.cfg&&(S.cfg===A||S.cfg[Wh]===S)?S[Wp](x):(VN(T,RN+Lt(A)),id(A,null,T)[Wp](x))}s(Yp,"onConfigChange");function KC(A,x){if(A&&A[YA])return A[YA](x)}s(KC,"runTargetUnload");function $N(A,x,T){var S;return T||(S=RC(function(P){T=P})),A&&EK(A)>0?Zu(KC(A[0],x),function(){$N(oC(A,1),x,T)}):T(),S}s($N,"doUnloadAll");var zK=500,zN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function YK(A,x,T){return!A&&ee(A)?x:Tt(A)?A:Ot(A)[yC]()==="true"}s(YK,"_stringToBoolOrDefault");function KK(A){return{mrg:!0,v:A}}s(KK,"cfgDfMerge");function R3(A,x,T){return{fb:T,isVal:A,v:x}}s(R3,"cfgDfValidate");function gf(A,x){return{fb:x,set:YK,v:!!A}}s(gf,"cfgDfBoolean");var e_=[DC,PC,qw,t1],t_=null,r_;function JK(A,x){return function(){var T=arguments,S=YN(x);if(S){var P=S.listener;P&&P[A]&&P[A][_w](P,T)}}}s(JK,"_listenerProxyFunc");function XK(){var A=na("Microsoft");return A&&(t_=A.ApplicationInsights),t_}s(XK,"_getExtensionNamespace");function YN(A){var x=t_;return!x&&A.disableDbgExt!==!0&&(x=t_||XK()),x?x.ChromeDbgExt:null}s(YN,"getDebugExt");function ZK(A){if(!r_){r_={};for(var x=0;x<e_[Yn];x++)r_[e_[x]]=JK(e_[x],A)}return r_}s(ZK,"getDebugListener");var JC,KN="warnToConsole",eJ="AI (Internal): ",tJ="AI: ",rJ="AITR_",JN={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},XC=(JC={},JC[0]=null,JC[1]="errorToConsole",JC[2]=KN,JC[3]="debugToConsole",JC);function Au(A){return A?'"'+A[Mh](/\"/g,mi)+'"':mi}s(Au,"_sanitizeDiagnosticText");function SE(A,x){var T=EE();if(T){var S="log";T[A]&&(S=A),Ne(T[S])&&T[S](x)}}s(SE,"_logToConsole");var n_=function(){function A(x,T,S,P){S===void 0&&(S=!1);var L=this;L[kw]=x,L[JA]=(S?tJ:eJ)+x;var Q=mi;qC()&&(Q=gu().stringify(P));var J=(T?" message:"+Au(T):mi)+(P?" props:"+Au(Q):mi);L[JA]+=J}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function RE(A,x){return(A||{})[ga]||new kE(x)}s(RE,"safeGetLogger");var kE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},P,L,Q,J,ae;tc(A,this,function(Ce){ae=Le(x||{}),Ce.consoleLoggingLevel=function(){return P},Ce[zA]=function(He,lt,et,At,Nt){Nt===void 0&&(Nt=!1);var Vt=new n_(lt,et,Nt,At);if(J)throw Lt(Vt);var mr=XC[He]||KN;if(W(Vt[JA]))Fe("throw"+(He===1?"Critical":"Warning"),Vt);else{if(Nt){var Hn=+Vt[kw];!S[Hn]&&P>=He&&(Ce[mr](Vt[JA]),S[Hn]=!0)}else P>=He&&Ce[mr](Vt[JA]);Te(He,Vt)}},Ce.debugToConsole=function(He){SE("debug",He),Fe("warning",He)},Ce[CC]=function(He){SE("warn",He),Fe("warning",He)},Ce.errorToConsole=function(He){SE("error",He),Fe("error",He)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[YA]=function(He){ae&&ae.rm(),ae=null};function Te(He,lt){if(!Ye()){var et=!0,At=rJ+lt[kw];if(S[At]?et=!1:S[At]=!0,et&&(He<=L&&(Ce.queue[Vi](lt),T++,Fe(He===1?"error":"warn",lt)),T===Q)){var Nt="Internal events throttle limit per PageView reached for this app.",Vt=new n_(23,Nt,!1);Ce.queue[Vi](Vt),He===1?Ce.errorToConsole(Nt):Ce[CC](Nt)}}}s(Te,"_logInternalMessage");function Le(He){return Yp(id(He,JN,Ce).cfg,function(lt){var et=lt.cfg;P=et[AN],L=et.loggingLevelTelemetry,Q=et.maxMessageLimit,J=et.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ye(){return T>=Q}s(Ye,"_areInternalMessagesThrottled");function Fe(He,lt){var et=YN(x||{});et&&et[df]&&et[df](He,lt)}s(Fe,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function k3(A){return A||new kE}s(k3,"_getLogger");function Tr(A,x,T,S,P,L){L===void 0&&(L=!1),k3(A)[zA](x,T,S,P,L)}s(Tr,"_throwInternal");function i_(A,x){k3(A)[CC](x)}s(i_,"_warnToConsole");var BE,Hh,XN="toGMTString",ZN="toUTCString",o_="cookie",Kp="expires",e7="isCookieUseDisabled",s_="disableCookiesUsage",t7="_ckMgr",a_=null,ZC=null,l_=null,Af,r7={},n7={},i7=(BE={cookieCfg:KK((Hh={},Hh[Gw]={fb:"cookieDomain",dfVal:jw},Hh.path={fb:"cookiePath",dfVal:jw},Hh.enabled=ed,Hh.ignoreCookies=ed,Hh.blockedCookies=ed,Hh)),cookieDomain:ed,cookiePath:ed},BE[s_]=ed,BE);function B3(){!Af&&(Af=On(function(){return rC()}))}s(B3,"_getDoc");function DE(A){return A?A.isEnabled():!0}s(DE,"_isMgrEnabled");function D3(A,x){return x&&A&&Je(A.ignoreCookies)?pu(A.ignoreCookies,x)!==-1:!1}s(D3,"_isIgnoredCookie");function nJ(A,x){return x&&A&&Je(A.blockedCookies)&&pu(A.blockedCookies,x)!==-1?!0:D3(A,x)}s(nJ,"_isBlockedCookie");function P3(A,x){var T=x[cf];if(ee(T)){var S=void 0;W(A[e7])||(S=!A[e7]),W(A[s_])||(S=!A[s_]),T=S}return T}s(P3,"_isCfgEnabled");function iJ(A,x){var T,S,P,L,Q,J,ae,Ce;A=id(A||n7,null,x).cfg,L=Yp(A,function(Le){Le.setDf(Le.cfg,i7),T=Le.ref(Le.cfg,"cookieCfg"),S=T[Hw]||"/",P=T[Gw],Q=P3(A,T)!==!1,J=T.getCookie||oJ,ae=T.setCookie||ex,Ce=T.delCookie||ex},x);var Te={isEnabled:s(function(){var Le=P3(A,T)!==!1&&Q&&o7(x),Ye=n7[t7];return Le&&Ye&&Te!==Ye&&(Le=DE(Ye)),Le},"isEnabled"),setEnabled:s(function(Le){Q=Le!==!1,T[cf]=Le},"setEnabled"),set:s(function(Le,Ye,Fe,He,lt){var et=!1;if(DE(Te)&&!nJ(T,Le)){var At={},Nt=ji(Ye||mi),Vt=Op(Nt,";");if(Vt!==-1&&(Nt=ji(M(Ye,Vt)),At=N3(ge(Ye,Vt+1))),Oh(At,Gw,He||P,ce,W),!ee(Fe)){var mr=Xd();if(W(At[Kp])){var Hn=wh(),xi=Hn+Fe*1e3;if(xi>0){var vi=new Date;vi.setTime(xi),Oh(At,Kp,s7(vi,mr?XN:ZN)||s7(vi,mr?XN:ZN)||mi,ce)}}mr||Oh(At,"max-age",mi+Fe,null,W)}var ho=UC();ho&&ho.protocol==="https:"&&(Oh(At,"secure",null,null,W),ZC===null&&(ZC=!sJ((bh()||{})[Dw])),ZC&&Oh(At,"SameSite","None",null,W)),Oh(At,Hw,lt||S,null,W),ae(Le,a7(Nt,At)),et=!0}return et},"set"),get:s(function(Le){var Ye=mi;return DE(Te)&&!D3(T,Le)&&(Ye=J(Le)),Ye},"get"),del:s(function(Le,Ye){var Fe=!1;return DE(Te)&&(Fe=Te.purge(Le,Ye)),Fe},"del"),purge:s(function(Le,Ye){var Fe,He=!1;if(o7(x)){var lt=(Fe={},Fe[Hw]=Ye||"/",Fe[Kp]="Thu, 01 Jan 1970 00:00:01 GMT",Fe);Xd()||(lt["max-age"]="0"),Ce(Le,a7(mi,lt)),He=!0}return He},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[t7]=Te,Te}s(iJ,"createCookieMgr");function o7(A){if(a_===null){a_=!1,!Af&&B3();try{var x=Af.v||{};a_=x[o_]!==void 0}catch(T){Tr(A,2,68,"Cannot access document.cookie - "+al(T),{exception:Lt(T)})}}return a_}s(o7,"areCookiesSupported");function N3(A){var x={};if(A&&A[Yn]){var T=ji(A)[Fh](";");qr(T,function(S){if(S=ji(S||mi),S){var P=Op(S,"=");P===-1?x[S]=null:x[ji(M(S,P))]=ji(ge(S,P+1))}})}return x}s(N3,"_extractParts");function s7(A,x){return Ne(A[x])?A[x]():null}s(s7,"_formatDate");function a7(A,x){var T=A||mi;return ne(x,function(S,P){T+="; "+S+(ee(P)?mi:"="+P)}),T}s(a7,"_formatCookieValue");function oJ(A){var x=mi;if(!Af&&B3(),Af.v){var T=Af.v[o_]||mi;l_!==T&&(r7=N3(T),l_=T),x=ji(r7[A]||mi)}return x}s(oJ,"_getCookieValue");function ex(A,x){!Af&&B3(),Af.v&&(Af.v[o_]=A+"="+x)}s(ex,"_setCookieValue");function sJ(A){return he(A)?!!(Il(A,"CPU iPhone OS 12")||Il(A,"iPad; CPU OS 12")||Il(A,"Macintosh; Intel Mac OS X 10_14")&&Il(A,"Version/")&&Il(A,"Safari")||Il(A,"Macintosh; Intel Mac OS X 10_14")&&dN(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Il(A,"Chrome/5")||Il(A,"Chrome/6")||Il(A,"UnrealEngine")&&!Il(A,"Chrome")||Il(A,"UCBrowser/12")||Il(A,"UCBrowser/11")):!1}s(sJ,"uaDisallowsSameSiteNone");var L3={perfEvtsSendAll:!1};function aJ(A){A.h=null;var x=A.cb;A.cb=[],qr(x,function(T){oe(T.fn,[T.arg])})}s(aJ,"_runScheduledListeners");function jh(A,x,T,S){qr(A,function(P){P&&P[x]&&(T?(T.cb[Vi]({fn:S,arg:P}),T.h=T.h||Rh(aJ,0,T)):oe(S,[P]))})}s(jh,"_runListeners");var lJ=function(){function A(x){this.listeners=[];var T,S,P=[],L={h:null,cb:[]},Q=id(x,L3);S=Q[Wp](function(J){T=!!J.cfg.perfEvtsSendAll}),tc(A,this,function(J){ze(J,"listeners",{g:s(function(){return P},"g")}),J[Sw]=function(ae){P[Vi](ae)},J[mE]=function(ae){for(var Ce=pu(P,ae);Ce>-1;)P[xC](Ce,1),Ce=pu(P,ae)},J[DC]=function(ae){jh(P,DC,L,function(Ce){Ce[DC](ae)})},J[PC]=function(ae,Ce){jh(P,PC,L,function(Te){Te[PC](ae,Ce)})},J[qw]=function(ae,Ce){jh(P,qw,Ce?L:null,function(Te){Te[qw](ae,Ce)})},J[t1]=function(ae){ae&&(T||!ae[a3]())&&jh(P,t1,null,function(Ce){ae.isAsync?Rh(function(){return Ce[t1](ae)},0):Ce[t1](ae)})},J[d3]=function(ae){ae&&ae[Yn]&&jh(P,d3,L,function(Ce){Ce[d3](ae)})},J[f3]=function(ae){ae&&ae[wC]&&jh(P,f3,L,function(Ce){Ce[f3](ae)})},J[Ww]=function(ae,Ce){if(ae>0){var Te=Ce||0;jh(P,Ww,L,function(Le){Le[Ww](ae,Te)})}},J[YA]=function(ae){var Ce=s(function(){S&&S.rm(),S=null,P=[],L.h&&L.h[vC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(jh(P,"unload",null,function(Le){var Ye=Le[YA](ae);Ye&&(Te||(Te=[]),Te[Vi](Ye))}),Te)return RC(function(Le){return Zu(u3(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),tx="ctx",F3="ParentContextKey",PE="ChildrenContextKey",cJ=null,c_=function(){function A(x,T,S){var P=this;if(P.start=wh(),P[Nh]=x,P.isAsync=S,P[a3]=function(){return!1},Ne(T)){var L;ze(P,"payload",{g:s(function(){return!L&&Ne(T)&&(L=T(),T=null),L},"g")})}P[Qh]=function(Q){return Q?Q===A[F3]||Q===A[PE]?P[Q]:(P[tx]||{})[Q]:null},P[Kd]=function(Q,J){if(Q)if(Q===A[F3])P[Q]||(P[a3]=function(){return!0}),P[Q]=J;else if(Q===A[PE])P[Q]=J;else{var ae=P[tx]=P[tx]||{};ae[Q]=J}},P.complete=function(){var Q=0,J=P[Qh](A[PE]);if(Je(J))for(var ae=0;ae<J[Yn];ae++){var Ce=J[ae];Ce&&(Q+=Ce.time)}P.time=wh()-P.start,P.exTime=P.time-Q,P.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),uJ=function(){function A(x){this.ctx={},tc(A,this,function(T){T.create=function(S,P,L){return new c_(S,P,L)},T.fire=function(S){S&&(S.complete(),x&&Ne(x[t1])&&x[t1](S))},T[Kd]=function(S,P){if(S){var L=T[tx]=T[tx]||{};L[S]=P}},T[Qh]=function(S){return(T[tx]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),yf="CoreUtils.doPerf";function rx(A,x,T,S,P){if(A){var L=A;if(L[AE]&&(L=L[AE]()),L){var Q=void 0,J=L[Qh](yf);try{if(Q=L.create(x(),S,P),Q){if(J&&Q[Kd]&&(Q[Kd](c_[F3],J),J[Qh]&&J[Kd])){var ae=J[Qh](c_[PE]);ae||(ae=[],J[Kd](c_[PE],ae)),ae[Vi](Q)}return L[Kd](yf,Q),T(Q)}}catch(Ce){Q&&Q[Kd]&&Q[Kd]("exception",Ce)}finally{Q&&L.fire(Q),L[Kd](yf,J)}}}return T()}s(rx,"doPerf");function ya(){return cJ}s(ya,"getGblPerfMgr");var u_="00000000000000000000000000000000",nx="0000000000000000";function d_(A,x,T){return A&&A[Yn]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(d_,"_isValid");function Vh(A){return d_(A,32,u_)}s(Vh,"isValidTraceId");function o1(A){return d_(A,16,nx)}s(o1,"isValidSpanId");var NE=ON("plugin");function $h(A){return NE.get(A,"state",{},!0)}s($h,"_getPluginState");function M3(A,x){for(var T=[],S=null,P=A[ff](),L;P;){var Q=P[EC]();if(Q){S&&S[Lh]&&Q[td]&&S[Lh](Q),L=$h(Q);var J=!!L[lf];Q[lf]&&(J=Q[lf]()),J||T[Vi](Q),S=Q,P=P[ff]()}}qr(T,function(ae){var Ce=A[Aa]();ae[pE](A.getCfg(),Ce,x,A[ff]()),L=$h(ae),!ae[Aa]&&!L[Aa]&&(L[Aa]=Ce),L[lf]=!0,delete L[uf]})}s(M3,"initializePlugins");function Q3(A){return A.sort(function(x,T){var S=0;if(T){var P=T[td];x[td]?S=P?x[BC]-T[BC]:1:P&&(S=-1)}else S=x?1:-1;return S})}s(Q3,"sortPlugins");function dJ(A){var x={};return{getName:s(function(){return x[Nh]},"getName"),setName:s(function(T){A&&A.setName(T),x[Nh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),Vh(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),o1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[CN]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[CN]=T},"setTraceFlags")}}s(dJ,"createDistributedTraceContext");var fJ="TelemetryPluginChain",l7="_hasRun",O3="_getTelCtx",c7=0;function pJ(A,x,T){for(;A;){if(A[EC]()===T)return A;A=A[ff]()}return D([T],x.config||{},x)}s(pJ,"_getNextProxyStart");function U3(A,x,T,S){var P=null,L=[];x||(x=id({},null,T[ga])),S!==null&&(P=S?pJ(A,T,S):A);var Q={_next:ae,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return RE(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!P},"hasNext"),getNext:s(function(){return P},"getNext"),setNext:s(function(Fe){P=Fe},"setNext"),iterate:Ye,onComplete:J}};function J(Fe,He){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Fe&&L[Vi]({func:Fe,self:W(He)?Q.ctx:He,args:lt})}s(J,"_addOnComplete");function ae(){var Fe=P;if(P=Fe?Fe[ff]():null,!Fe){var He=L;He&&He[Yn]>0&&(qr(He,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){Tr(T[ga],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Fe}s(ae,"_moveNext");function Ce(Fe,He){var lt=null,et=x.cfg;if(et&&Fe){var At=et[e1];!At&&He&&(At={}),et[e1]=At,At=x.ref(et,e1),At&&(lt=At[Fe],!lt&&He&&(lt={}),At[Fe]=lt,lt=x.ref(At,Fe))}return lt}s(Ce,"_getExtCfg");function Te(Fe,He){var lt=Ce(Fe,!0);return He&&ne(He,function(et,At){if(ee(lt[et])){var Nt=x.cfg[et];(Nt||!ee(Nt))&&(lt[et]=Nt)}_3(x,lt,et,At)}),x.setDf(lt,He)}s(Te,"_resolveExtCfg");function Le(Fe,He,lt){lt===void 0&&(lt=!1);var et,At=Ce(Fe,!1),Nt=x.cfg;return At&&(At[He]||!ee(At[He]))?et=At[He]:(Nt[He]||!ee(Nt[He]))&&(et=Nt[He]),et||!ee(et)?et:lt}s(Le,"_getConfig");function Ye(Fe){for(var He;He=Q._next();){var lt=He[EC]();lt&&Fe(lt)}}return s(Ye,"_iterateChain"),Q}s(U3,"_createInternalContext");function ix(A,x,T,S){var P=id(x),L=U3(A,P,T,S),Q=L.ctx;function J(Ce){var Te=L._next();return Te&&Te[td](Ce,Q),!Te}s(J,"_processNext");function ae(Ce,Te){return Ce===void 0&&(Ce=null),Je(Ce)&&(Ce=D(Ce,P.cfg,T,Te)),ix(Ce||Q[ff](),P.cfg,T,Te)}return s(ae,"_createNew"),Q[El]=J,Q[KA]=ae,Q}s(ix,"createProcessTelemetryContext");function w(A,x,T){var S=id(x.config),P=U3(A,S,x,T),L=P.ctx;function Q(ae){var Ce=P._next();return Ce&&Ce[YA](L,ae),!Ce}s(Q,"_processNext");function J(ae,Ce){return ae===void 0&&(ae=null),Je(ae)&&(ae=D(ae,S.cfg,x,Ce)),w(ae||L[ff](),x,Ce)}return s(J,"_createNew"),L[El]=Q,L[KA]=J,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=id(x.config),P=U3(A,S,x,T),L=P.ctx;function Q(ae){return L.iterate(function(Ce){Ne(Ce[Gp])&&Ce[Gp](L,ae)})}s(Q,"_processNext");function J(ae,Ce){return ae===void 0&&(ae=null),Je(ae)&&(ae=D(ae,S.cfg,x,Ce)),R(ae||L[ff](),x,Ce)}return s(J,"_createNew"),L[El]=Q,L[KA]=J,L}s(R,"createProcessTelemetryUpdateContext");function D(A,x,T,S){var P=null,L=!S;if(Je(A)&&A[Yn]>0){var Q=null;qr(A,function(J){if(!L&&S===J&&(L=!0),L&&J&&Ne(J[td])){var ae=F(J,x,T);P||(P=ae),Q&&Q._setNext(ae),Q=ae}})}return S&&!P?D([S],x,T):P}s(D,"createTelemetryProxyChain");function F(A,x,T){var S=null,P=Ne(A[td]),L=Ne(A[Lh]),Q;A?Q=A[Ph]+"-"+A[BC]+"-"+c7++:Q="Unknown-0-"+c7++;var J={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ye,_id:Q,_setNext:s(function(Fe){S=Fe},"_setNext")};function ae(){var Fe;return A&&Ne(A[O3])&&(Fe=A[O3]()),Fe||(Fe=ix(J,x,T)),Fe}s(ae,"_getTelCtx");function Ce(Fe,He,lt,et,At){var Nt=!1,Vt=A?A[Ph]:fJ,mr=Fe[l7];return mr||(mr=Fe[l7]={}),Fe.setNext(S),A&&rx(Fe[Aa](),function(){return Vt+":"+lt},function(){mr[Q]=!0;try{var Hn=S?S._id:mi;Hn&&(mr[Hn]=!1),Nt=He(Fe)}catch(vi){var xi=S?mr[S._id]:!0;xi&&(Nt=!0),(!S||!xi)&&Tr(Fe[df](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(vi)+", run flags: "+Lt(mr))}},et,At),Nt}s(Ce,"_processChain");function Te(Fe,He){He=He||ae();function lt(et){if(!A||!P)return!1;var At=$h(A);return At[uf]||At[Uw]?!1:(L&&A[Lh](S),A[td](Fe,et),!0)}s(lt,"_callProcessTelemetry"),Ce(He,lt,"processTelemetry",function(){return{item:Fe}},!Fe.sync)||He[El](Fe)}s(Te,"_processTelemetry");function Le(Fe,He){function lt(){var et=!1;if(A){var At=$h(A),Nt=A[Aa]||At[Aa];A&&(!Nt||Nt===Fe.core())&&!At[uf]&&(At[Aa]=null,At[uf]=!0,At[lf]=!1,A[uf]&&A[uf](Fe,He)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Fe,lt,"unload",function(){},He.isAsync)||Fe[El](He)}s(Le,"_unloadPlugin");function Ye(Fe,He){function lt(){var et=!1;if(A){var At=$h(A),Nt=A[Aa]||At[Aa];A&&(!Nt||Nt===Fe.core())&&!At[uf]&&A[Gp]&&A[Gp](Fe,He)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Fe,lt,"update",function(){},!1)||Fe[El](He)}return s(Ye,"_updatePlugin"),Gt(J)}s(F,"createTelemetryPluginProxy");function se(){var A=[];function x(S){S&&A[Vi](S)}s(x,"_addHandler");function T(S,P){qr(A,function(L){try{L(S,P)}catch(Q){Tr(S[df](),2,73,"Unexpected error calling unload handler - "+Lt(Q))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(se,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var P=A;A=[],qr(P,function(L){try{(L.rm||L.remove).call(L)}catch(Q){Tr(S,2,73,"Unloading:"+Lt(Q))}})}s(x,"_doUnload");function T(S){S&&iC(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Qe="getPlugin",Xe=(we={},we[e1]={isVal:jw,v:{}},we),mt=function(){function A(){var x=this,T,S,P,L,Q;Ce(),tc(A,x,function(Te){Te[pE]=function(Le,Ye,Fe,He){ae(Le,Ye,He),T=!0},Te[uf]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||w(null,Fe,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0,isAsync:!1};function Nt(){lt||(lt=!0,L.run(et,Ye),Q.run(et[df]()),He===!0&&et[El](At),Ce())}return s(Nt,"_unloadCallback"),!Te[Bw]||Te[Bw](et,At,Nt)!==!0?Nt():He=!0,He},Te[Gp]=function(Le,Ye){var Fe=Te[Aa];if(!Fe||Le&&Fe!==Le[Aa]())return;var He,lt=!1,et=Le||R(null,Fe,P&&P[Qe]?P[Qe]():P),At=Ye||{reason:0};function Nt(){lt||(lt=!0,ae(et.getCfg(),et.core(),et[ff]()))}return s(Nt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,At,Nt)!==!0?Nt():He=!0,He},CE(Te,"_addUnloadCb",function(){return L},"add"),CE(Te,"_addHook",function(){return Q},"add"),ze(Te,"_unloadHooks",{g:s(function(){return Q},"g")})}),x[df]=function(Te){return J(Te)[df]()},x[lf]=function(){return T},x.setInitialized=function(Te){T=Te},x[Lh]=function(Te){P=Te},x[El]=function(Te,Le){Le?Le[El](Te):P&&Ne(P[td])&&P[td](Te,null)},x._getTelCtx=J;function J(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ye=S||ix(null,{},x[Aa]);P&&P[Qe]?Le=Ye[KA](null,P[Qe]):Le=Ye[KA](null,P)}return Le}s(J,"_getTelCtx");function ae(Te,Le,Ye){id(Te,Xe,RE(Le)),!Ye&&Le&&(Ye=Le[IC]()[ff]());var Fe=P;P&&P[Qe]&&(Fe=P[Qe]()),x[Aa]=Le,S=ix(Ye,Te,Le,Fe)}s(ae,"_setDefaults");function Ce(){T=!1,x[Aa]=null,S=null,P=null,Q=Ee(),L=se()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function ir(A,x,T){var S={id:x,fn:T};iC(A,S);var P={remove:s(function(){qr(A,function(L,Q){if(L.id===S.id)return A[xC](Q,1),-1})},"remove")};return P}s(ir,"_addInitializer");function _n(A,x,T){for(var S=!1,P=A[Yn],L=0;L<P;++L){var Q=A[L];if(Q)try{if(Q.fn[_w](null,[x])===!1){S=!0;break}}catch(J){Tr(T,2,64,"Telemetry initializer failed: "+al(J),{exception:Lt(J)},!0)}}return!S}s(_n,"_runInitializers");var Gn=function(A){fE(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,P;L(),tc(x,T,function(Q,J){Q.addTelemetryInitializer=function(ae){return ir(P,S++,ae)},Q[td]=function(ae,Ce){_n(P,ae,Ce?Ce[df]():Q[df]())&&Q[El](ae,Ce)},Q[Bw]=function(){L()}});function L(){S=0,P=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(mt),cr,br="Plugins must provide initialize method",Un="_notificationManager",Sn="SDK is still unloading...",hi="SDK is not initialized",no=100,Bi=5e4,Oa=Xt((cr={cookieCfg:{}},cr[kC]={rdOnly:!0,ref:!0,v:[]},cr[Vp]={rdOnly:!0,ref:!0,v:[]},cr[e1]={ref:!0,v:{}},cr[Jd]=ed,cr.loggingLevelConsole=0,cr.diagnosticLogInterval=ed,cr));function ox(A,x){return new uJ(x)}s(ox,"_createPerfManager");function LE(A,x,T){var S=[],P=[],L={};return qr(T,function(Q){(ee(Q)||ee(Q[pE]))&&Gr(br);var J=Q[BC],ae=Q[Ph];Q&&J&&(ee(L[J])?L[J]=ae:i_(A,"Two extensions have same priority #"+J+" - "+L[J]+", "+ae)),!J||J<x?S[Vi](Q):P[Vi](Q)}),{core:S,channels:P}}s(LE,"_validateExtensions");function q3(A,x){var T=!1;return qr(x,function(S){if(S===A)return T=!0,-1}),T}s(q3,"_isPluginPresent");function f_(A,x,T,S){T&&ne(T,function(P,L){S&&mu(L)&&mu(x[P])&&f_(A,x[P],L,S),S&&mu(L)&&mu(x[P])?f_(A,x[P],L,S):A.set(x,P,L)})}s(f_,"_deepMergeConfig");function u7(A,x){var T=null,S=-1;return qr(A,function(P,L){if(P.w===x)return T=P,S=L,-1}),{i:S,l:T}}s(u7,"_findWatcher");function mJ(A,x){var T=u7(A,x).l;return T||(T={w:x,rm:s(function(){var S=u7(A,x);S.i!==-1&&A[xC](S.i,1)},"rm")},A[Vi](T)),T}s(mJ,"_addDelayedCfgListener");function W3(A,x,T){qr(x,function(S){var P=Yp(A,S.w,T);delete S.w,S.rm=function(){P.rm()}})}s(W3,"_registerDelayedCfgListener");function d7(A,x,T,S){return x.add(A[Wp](function(P){var L=P.cfg.disableDbgExt;L===!0&&S&&(T[mE](S),S=null),T&&!S&&L!==!0&&(S=ZK(P.cfg),T[Sw](S))})),S}s(d7,"_initDebugListener");function f7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(f7,"_createUnloadHook");var It=function(){function A(){var x,T,S,P,L,Q,J,ae,Ce,Te,Le,Ye,Fe,He,lt,et,At,Nt,Vt,mr,Hn,xi,vi,ho,dn,Lr,bi,Rs,Uo,Ft,Fr,io;tc(A,this,function(Et){ot(),Et._getDbgPlgTargets=function(){return[vi,P]},Et[lf]=function(){return T},Et.activeStatus=function(){return Lr},Et._setPendingStatus=function(){Lr=3},Et[pE]=function(dt,dr,Pn,Dr){Fe&&Gr(Sn),Et[lf]()&&Gr("Core cannot be initialized more than once"),x=id(dt,Oa,Pn||Et[ga],!1),dt=x.cfg,ic(x[Wp](function(_o){var ss=_o.cfg,Pc=Lr===3;if(!Pc){Rs=ss.initInMemoMaxSize||no;var od=ss.instrumentationKey,Zp=ss.endpointUrl;if(ee(od)){Hn=null,Lr=Dh.INACTIVE;var em="Please provide instrumentation key";T?(Tr(S,1,100,em),Hs()):Gr(em);return}var T_=[];if(bt(od)?(T_[Vi](od),Hn=null):Hn=od,bt(Zp)?(T_[Vi](Zp),bi=null):bi=Zp,T_[Yn]){Uo=!1,Lr=3;var lB=jw(ss.initTimeOut)?ss.initTimeOut:Bi,VJ=hu(T_);Rh(function(){Uo||Rn()},lB),Zu(VJ,function(gx){try{if(Uo)return;if(!gx.rejected){var Ax=gx[bC];if(Ax&&Ax[Yn]){var F7=Ax[0];if(Hn=F7&&F7[bC],Ax[Yn]>1){var M7=Ax[1];bi=M7&&M7[bC]}}Hn&&(dt.instrumentationKey=Hn,dt.endpointUrl=bi)}Rn()}catch{Uo||Rn()}})}else Rn();var w_=_o.ref(_o.cfg,e1);ne(w_,function(gx){_o.ref(w_,gx)})}})),L=Dr,Vt=d7(x,Nt,L&&Et[Yd](),Vt),mx(),Et[ga]=Pn;var Nn=dt[kC];if(Te=[],Te[Vi].apply(Te,hN(hN([],dr,!1),Nn)),Le=dt[Vp],js(null),(!Ye||Ye[Yn]===0)&&Gr("No "+Vp+" available"),Le&&Le[Yn]>1){var vo=Et[EC]("TeeChannelController");(!vo||!vo.plugin)&&Tr(S,1,28,"TeeChannel required")}W3(dt,xi,S),xi=null,T=!0,Lr===Dh.ACTIVE&&Hs()},Et.getChannels=function(){var dt=[];return Ye&&qr(Ye,function(dr){dt[Vi](dr)}),Gt(dt)},Et.track=function(dt){rx(Et[AE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(ks(dt),Gr("Invalid telemetry item")),!dt[Nh]&&ee(dt[Nh])&&(ks(dt),Gr("telemetry name required")),dt.iKey=dt.iKey||Hn,dt.time=dt.time||yE(new Date),dt.ver=dt.ver||"4.0",!Fe&&Et[lf]()&&Lr===Dh.ACTIVE?Wa()[El](dt):Lr!==Dh.INACTIVE&&P[Yn]<=Rs&&P[Vi](dt)},function(){return{item:dt}},!dt.sync)},Et[IC]=Wa,Et[Yd]=function(){return L||(L=new lJ(x.cfg),Et[Un]=L),L},Et[Sw]=function(dt){Et.getNotifyMgr()[Sw](dt)},Et[mE]=function(dt){L&&L[mE](dt)},Et.getCookieMgr=function(){return ae||(ae=iJ(x.cfg,Et[ga])),ae},Et.setCookieMgr=function(dt){ae!==dt&&(KC(ae,!1),ae=dt)},Et[AE]=function(){return Q||J||ya()},Et.setPerfMgr=function(dt){Q=dt},Et.eventCnt=function(){return P[Yn]},Et.releaseQueue=function(){if(T&&P[Yn]>0){var dt=P;P=[],Lr===2?qr(dt,function(dr){dr.iKey=dr.iKey||Hn,Wa()[El](dr)}):Tr(S,2,20,"core init status is not active")}},Et.pollInternalLogs=function(dt){return lt=dt||null,io=!1,Ft&&Ft[vC](),go(!0)};function Rn(){Uo=!0,ee(Hn)?(Lr=Dh.INACTIVE,Tr(S,1,112,"ikey can't be resolved from promises")):Lr=Dh.ACTIVE,Hs()}s(Rn,"_setStatus");function Hs(){T&&(Et.releaseQueue(),Et.pollInternalLogs())}s(Hs,"_releaseQueues");function go(dt){if((!Ft||!Ft[cf])&&!io){var dr=dt||S&&S.queue[Yn]>0;dr&&(Fr||(Fr=!0,ic(x[Wp](function(Pn){var Dr=Pn.cfg.diagnosticLogInterval;(!Dr||!(Dr>0))&&(Dr=1e4);var Nn=!1;Ft&&(Nn=Ft[cf],Ft[vC]()),Ft=xw(px,Dr),Ft.unref(),Ft[cf]=Nn}))),Ft[cf]=!0)}return Ft}s(go,"_startLogPoller"),Et[gN]=function(){io=!0,Ft&&Ft[vC](),px()},m3(Et,function(){return He},["addTelemetryInitializer"]),Et[YA]=function(dt,dr,Pn){dt===void 0&&(dt=!0),T||Gr(hi),Fe&&Gr(Sn);var Dr={reason:50,isAsync:dt,flushComplete:!1},Nn;dt&&!dr&&(Nn=RC(function(ss){dr=ss}));var vo=w(xf(),Et);vo[Rw](function(){Nt.run(Et[ga]),$N([ae,L,S],dt,function(){ot(),dr&&dr(Dr)})},Et);function _o(ss){Dr.flushComplete=ss,Fe=!0,At.run(vo,Dr),Et[gN](),vo[El](Dr)}return s(_o,"_doUnload"),px(),Jp(dt,_o,6,Pn),Nn},Et[EC]=Sl,Et.addPlugin=function(dt,dr,Pn,Dr){if(!dt){Dr&&Dr(!1),hx(br);return}var Nn=Sl(dt[Ph]);if(Nn&&!dr){Dr&&Dr(!1),hx("Plugin ["+dt[Ph]+"] is already loaded!");return}var vo={reason:16};function _o(od){Te[Vi](dt),vo.added=[dt],js(vo),Dr&&Dr(!0)}if(s(_o,"_addPlugin"),Nn){var ss=[Nn.plugin],Pc={reason:2,isAsync:!!Pn};yu(ss,Pc,function(od){od?(vo.removed=ss,vo.reason|=32,_o()):Dr&&Dr(!1)})}else _o()},Et.updateCfg=function(dt,dr){dr===void 0&&(dr=!0);var Pn;if(Et[lf]()){Pn={reason:1,cfg:x.cfg,oldCfg:hw({},x.cfg),newConfig:hw({},dt),merge:dr},dt=Pn.newConfig;var Dr=x.cfg;dt[kC]=Dr[kC],dt[Vp]=Dr[Vp]}x._block(function(Nn){var vo=Nn.cfg;f_(Nn,vo,dt,dr),dr||ne(vo,function(_o){tt(dt,_o)||Nn.set(vo,_o,ed)}),Nn.setDf(vo,Oa)},!0),x.notify(),Pn&&Xp(Pn)},Et.evtNamespace=function(){return et},Et.flush=Jp,Et.getTraceCtx=function(dt){return mr||(mr=dJ()),mr},Et.setTraceCtx=function(dt){mr=dt||null},Et.addUnloadHook=ic,CE(Et,"addUnloadCb",function(){return At},"add"),Et.onCfgChange=function(dt){var dr;return T?dr=Yp(x.cfg,dt,Et[ga]):dr=mJ(xi,dt),f7(dr)},Et.getWParam=function(){return vh()||x.cfg.enableWParam?0:-1};function _l(){var dt={};ho=[];var dr=s(function(Pn){Pn&&qr(Pn,function(Dr){if(Dr[Ph]&&Dr[TC]&&!dt[Dr.identifier]){var Nn=Dr[Ph]+"="+Dr[TC];ho[Vi](Nn),dt[Dr.identifier]=Dr}})},"_addPluginVersions");dr(Ye),Le&&qr(Le,function(Pn){dr(Pn)}),dr(Te)}s(_l,"_setPluginVersions");function ot(){T=!1,x=id({},Oa,Et[ga]),x.cfg[AN]=1,ze(Et,"config",{g:s(function(){return x.cfg},"g"),s:s(function(dr){Et.updateCfg(dr,!1)},"s")}),ze(Et,"pluginVersionStringArr",{g:s(function(){return ho||_l(),ho},"g")}),ze(Et,"pluginVersionString",{g:s(function(){return dn||(ho||_l(),dn=ho.join(";")),dn||mi},"g")}),ze(Et,"logger",{g:s(function(){return S||(S=new kE(x.cfg),x[ga]=S),S},"g"),s:s(function(dr){x[ga]=dr,S!==dr&&(KC(S,!1),S=dr)},"s")}),Et[ga]=new kE(x.cfg),vi=[];var dt=Et.config[kC]||[];dt.splice(0,dt[Yn]),iC(dt,vi),He=new Gn,P=[],KC(L,!1),L=null,Q=null,J=null,KC(ae,!1),ae=null,Ce=null,Te=[],Le=null,Ye=null,Fe=!1,lt=null,et=zp("AIBaseCore",!0),At=se(),mr=null,Hn=null,Nt=Ee(),xi=[],dn=null,ho=null,io=!1,Ft=null,Fr=!1,Lr=0,bi=null,Rs=null,Uo=!1}s(ot,"_initDefaults");function Wa(){var dt=ix(xf(),x.cfg,Et);return dt[Rw](go),dt}s(Wa,"_createTelCtx");function js(dt){var dr=LE(Et[ga],zK,Te);Ce=null,dn=null,ho=null,Ye=(Le||[])[0]||[],Ye=Q3(iC(Ye,dr[Vp]));var Pn=iC(Q3(dr[Aa]),Ye);vi=Gt(Pn);var Dr=Et.config[kC]||[];Dr.splice(0,Dr[Yn]),iC(Dr,vi);var Nn=Wa();Ye&&Ye[Yn]>0&&M3(Nn[KA](Ye),Pn),M3(Nn,Pn),dt&&Xp(dt)}s(js,"_initPluginChain");function Sl(dt){var dr=null,Pn=null,Dr=[];return qr(vi,function(Nn){if(Nn[Ph]===dt&&Nn!==He)return Pn=Nn,-1;Nn.getChannel&&Dr[Vi](Nn)}),!Pn&&Dr[Yn]>0&&qr(Dr,function(Nn){if(Pn=Nn.getChannel(dt),!Pn)return-1}),Pn&&(dr={plugin:Pn,setEnabled:s(function(Nn){$h(Pn)[Uw]=!Nn},"setEnabled"),isEnabled:s(function(){var Nn=$h(Pn);return!Nn[uf]&&!Nn[Uw]},"isEnabled"),remove:s(function(Nn,vo){Nn===void 0&&(Nn=!0);var _o=[Pn],ss={reason:1,isAsync:Nn};yu(_o,ss,function(Pc){Pc&&js({reason:32,removed:_o}),vo&&vo(Pc)})},"remove")}),dr}s(Sl,"_getPlugin");function xf(){if(!Ce){var dt=(vi||[]).slice();pu(dt,He)===-1&&dt[Vi](He),Ce=D(Q3(dt),x.cfg,Et)}return Ce}s(xf,"_getPluginChain");function yu(dt,dr,Pn){if(dt&&dt[Yn]>0){var Dr=D(dt,x.cfg,Et),Nn=w(Dr,Et);Nn[Rw](function(){var vo=!1,_o=[];qr(Te,function(Pc,od){q3(Pc,dt)?vo=!0:_o[Vi](Pc)}),Te=_o,dn=null,ho=null;var ss=[];Le&&(qr(Le,function(Pc,od){var Zp=[];qr(Pc,function(em){q3(em,dt)?vo=!0:Zp[Vi](em)}),ss[Vi](Zp)}),Le=ss),Pn&&Pn(vo),go()}),Nn[El](dr)}else Pn(!1)}s(yu,"_removePlugins");function px(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[Yn]=0,qr(dt,function(dr){var Pn={name:lt||"InternalMessageId: "+dr[kw],iKey:Hn,time:yE(new Date),baseType:n_.dataType,baseData:{message:dr[JA]}};Et.track(Pn)})}}s(px,"_flushInternalLogs");function Jp(dt,dr,Pn,Dr){var Nn=1,vo=!1,_o=null;Dr=Dr||5e3;function ss(){Nn--,vo&&Nn===0&&(_o&&_o[vC](),_o=null,dr&&dr(vo),dr=null)}if(s(ss,"doCallback"),Ye&&Ye[Yn]>0){var Pc=Wa()[KA](Ye);Pc.iterate(function(od){if(od.flush){Nn++;var Zp=!1;od.flush(dt,function(){Zp=!0,ss()},Pn)||Zp||(dt&&_o==null?_o=Rh(function(){_o=null,ss()},Dr):ss())}})}return vo=!0,ss(),!0}s(Jp,"_flushChannels");function mx(){var dt;ic(x[Wp](function(dr){var Pn=dr.cfg.enablePerfMgr;if(Pn){var Dr=dr.cfg[Jd];(dt!==Dr||!dt)&&(Dr||(Dr=ox),kN(dr.cfg,Jd,Dr),dt=Dr,J=null),!Q&&!J&&Ne(Dr)&&(J=Dr(Et,Et[Yd]()))}else J=null,dt=null}))}s(mx,"_initPerfManager");function Xp(dt){var dr=R(xf(),Et);dr[Rw](go),(!Et._updateHook||Et._updateHook(dr,dt)!==!0)&&dr[El](dt)}s(Xp,"_doUpdate");function hx(dt){var dr=Et[ga];dr?(Tr(dr,2,73,dt),go()):Gr(dt)}s(hx,"_logOrThrowError");function ks(dt){var dr=Et[Yd]();dr&&dr[PC]([dt],2)}s(ks,"_notifyInvalidEvent");function ic(dt){Nt.add(dt)}s(ic,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function Br(A,x){try{if(A&&A!==""){var T=gu().parse(A);if(T&&T[yN]&&T[yN]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[Yn])return T}}catch(S){Tr(x,1,43,"Cannot parse the response. "+(S[Nh]||Lt(S)),{response:A})}return null}s(Br,"parseResponse");var nn="",Fo="NoResponseBody",Ua="&"+Fo+"=true",Gs="POST",qa=function(){function A(){var x=0,T,S,P,L,Q,J,ae,Ce,Te,Le,Ye,Fe,He,lt;tc(A,this,function(et,At){var Nt=!0;Uo(),et[pE]=function(Ft,Fr){P=Fr,S&&Tr(P,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,J,T]},et.SetConfig=function(Ft){try{if(Q=Ft.senderOnCompleteCallBack||{},J=!!Ft.disableCredentials,ae=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Le=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,He=!!Ft.addNoResponse,Fe=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Lr},L||(Nt=!1),J){var Fr=UC();Fr&&Fr.protocol&&Fr.protocol[yC]()==="file:"&&(Nt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,Fr){return Ft&&Ft[Yn]?xi(Ft,Fr):null},et.getFallbackInst=function(){return Ce},et[Bw]=function(Ft,Fr){Uo()};function Vt(Ft,Fr){vi(Fr,200,{},Ft)}s(Vt,"_onSuccess");function mr(Ft,Fr){Tr(P,2,26,"Failed to send telemetry.",{message:Ft}),vi(Fr,400,{})}s(mr,"_onError");function Hn(Ft){mr("No endpoint url is provided for the batch",Ft)}s(Hn,"_onNoPayloadUrl");function xi(Ft,Fr){for(var io=0,Et=null,Rn=0;Et==null&&Rn<Ft[Yn];)io=Ft[Rn],!Te&&io===1?v3()?Et=Rs:b3()&&(Et=Lr):io===2&&IE(Fr)&&(!Fr||!Fe)?Et=bi:io===3&&qh()&&(Fr?!Ye:!Le)&&(Et=dn),Rn++;return Et?{_transport:io,_isSync:Fr,sendPOST:Et}:null}s(xi,"_getSenderInterface");function vi(Ft,Fr,io,Et){try{Ft&&Ft(Fr,io,Et)}catch{}}s(vi,"_doOnComplete");function ho(Ft,Fr){var io=bh(),Et=Ft[Hp];if(!Et)return Hn(Fr),!0;Et=Ft[Hp]+(He?Ua:nn);var Rn=Ft[wC],Hs=L?Rn:new Blob([Rn],{type:"text/plain;charset=UTF-8"}),go=io.sendBeacon(Et,Hs);return go}s(ho,"_doBeaconSend");function dn(Ft,Fr,io){var Et=Ft[wC];try{if(Et)if(ho(Ft,Fr))Vt(nn,Fr);else{var Rn=Q&&Q.beaconOnRetry;Rn&&Ne(Rn)?Rn(Ft,Fr,ho):(Ce&&Ce.sendPOST(Ft,Fr,!0),Tr(P,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(Hs){L&&i_(P,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(Hs)),vi(Fr,L?0:400,{},nn)}}s(dn,"_beaconSender");function Lr(Ft,Fr,io){var Et,Rn,Hs,go=Ft[l3]||{};!io&&T&&(Et=RC(function(js,Sl){Rn=js,Hs=Sl})),L&&io&&Ft.disableXhrSync&&(io=!1);var _l=Ft[Hp];if(!_l){Hn(Fr),Rn&&Rn(!1);return}var ot=A3(Gs,_l,Nt,!0,io,Ft[jp]);L||ot.setRequestHeader("Content-type","application/json"),qr(yt(go),function(js){ot.setRequestHeader(js,go[js])}),ot.onreadystatechange=function(){L||(Wa(ot),ot.readyState===4&&Rn&&Rn(!0))},ot.onload=function(){L&&Wa(ot)};function Wa(js){var Sl=Q&&Q.xhrOnComplete,xf=Sl&&Ne(Sl);if(xf)Sl(js,Fr,Ft);else{var yu=Vw(js);vi(Fr,js[hE],n1(js,L),yu)}}return s(Wa,"_doOnReadyFunc"),ot.onerror=function(js){vi(Fr,L?ot[hE]:400,n1(ot,L),L?nn:$w(ot)),Hs&&Hs(js)},ot.ontimeout=function(){vi(Fr,L?ot[hE]:500,n1(ot,L),L?nn:$w(ot)),Rn&&Rn(!1)},ot.send(Ft[wC]),Et}s(Lr,"_xhrSender");function bi(Ft,Fr,io){var Et,Rn=Ft[Hp],Hs=Ft[wC],go=L?Hs:new Blob([Hs],{type:"application/json"}),_l,ot,Wa,js=new Headers,Sl=Hs[Yn],xf=!1,yu=!1,px=Ft[l3]||{},Jp=(Et={method:Gs,body:go},Et[zN]=!0,Et);Ft.headers&&yt(Ft.headers)[Yn]>0&&(qr(yt(px),function(ks){js.append(ks,px[ks])}),Jp[l3]=js),ae?Jp.credentials=ae:Nt&&L&&(Jp.credentials="include"),io&&(Jp.keepalive=!0,x+=Sl,L?Ft._sendReason===2&&(xf=!0,He&&(Rn+=Ua)):xf=!0);var mx=new Request(Rn,Jp);try{mx[zN]=!0}catch{}if(!io&&T&&(_l=RC(function(ks,ic){ot=ks,Wa=ic})),!Rn){Hn(Fr),ot&&ot(!1);return}function Xp(ks){vi(Fr,L?0:400,{},L?nn:ks)}s(Xp,"_handleError");function hx(ks,ic,dt){var dr=ks[hE],Pn=Q.fetchOnComplete;Pn&&Ne(Pn)?Pn(ks,Fr,dt||nn,ic):vi(Fr,dr,{},dt||nn)}s(hx,"_onFetchComplete");try{Zu(fetch(L?Rn:mx,L?Jp:null),function(ks){if(io&&(x-=Sl,Sl=0),!yu)if(yu=!0,ks.rejected)Xp(ks.reason&&ks.reason[JA]),Wa&&Wa(ks.reason);else{var ic=ks[bC];try{!L&&!ic.ok?(Xp(ic.statusText),ot&&ot(!1)):L&&!ic.body?(hx(ic,null,nn),ot&&ot(!0)):Zu(ic.text(),function(dt){hx(ic,Ft,dt[bC]),ot&&ot(!0)})}catch(dt){Xp(Lt(dt)),Wa&&Wa(dt)}}})}catch(ks){yu||(Xp(Lt(ks)),Wa&&Wa(ks))}return xf&&!yu&&(yu=!0,vi(Fr,200,{}),ot&&ot(!0)),L&&!yu&&Ft[jp]>0&&lt&&lt.set(function(){yu||(yu=!0,vi(Fr,500,{}),ot&&ot(!0))},Ft[jp]),_l}s(bi,"_doFetchSender");function Rs(Ft,Fr,io){var Et=Qp(),Rn=new XDomainRequest,Hs=Ft[wC];Rn.onload=function(){var js=Vw(Rn),Sl=Q&&Q.xdrOnComplete;Sl&&Ne(Sl)?Sl(Rn,Fr,Ft):vi(Fr,200,{},js)},Rn.onerror=function(){vi(Fr,400,{},L?nn:DN(Rn))},Rn.ontimeout=function(){vi(Fr,500,{})},Rn.onprogress=function(){};var go=Et&&Et.location&&Et.location.protocol||"",_l=Ft[Hp];if(!_l){Hn(Fr);return}if(!L&&_l.lastIndexOf(go,0)!==0){var ot="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Tr(P,2,40,". "+ot),mr(ot,Fr);return}var Wa=L?_l:_l[Mh](/^(https?:)/,"");Rn.open(Gs,Wa),Ft[jp]&&(Rn[jp]=Ft[jp]),Rn.send(Hs),L&&io?lt&&lt.set(function(){Rn.send(Hs)},0):Rn.send(Hs)}s(Rs,"_xdrSender");function Uo(){x=0,S=!1,T=!1,P=null,L=null,Q=null,J=null,ae=null,Ce=null,Te=!1,Le=!1,Ye=!1,Fe=!1,He=!1,lt=null}s(Uo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),s1="on",zh="attachEvent",sx="addEventListener",p7="detachEvent",m7="removeEventListener",p_="events";zp("aiEvtPageHide"),zp("aiEvtPageShow");var hJ=/\.[\.]+/g,oge=/[\.]+$/,VKe=1,h7=ON("events"),$Ke=/^([^.]*)(?:\.(.+)|)/;function sge(A){return A&&A[Mh]?A[Mh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,mi):A}s(sge,"_normalizeNamespace");function gJ(A,x){if(x){var T=mi;Je(x)?(T=mi,qr(x,function(P){P=sge(P),P&&(P[0]!=="."&&(P="."+P),T+=P)})):T=sge(x),T&&(T[0]!=="."&&(T="."+T),A=(A||mi)+T)}var S=$Ke.exec(A||mi)||[];return{type:S[1],ns:(S[2]||mi).replace(hJ,".").replace(oge,mi)[Fh](".").sort().join(".")}}s(gJ,"_getEvtNamespace");function age(A,x,T){T===void 0&&(T=!0);var S=h7.get(A,p_,{},T),P=S[x];return P||(P=S[x]=[]),P}s(age,"_getRegisteredEvents");function lge(A,x,T,S){A&&x&&x[rc]&&(A[m7]?A[m7](x[rc],T,S):A[p7]&&A[p7](s1+x[rc],T))}s(lge,"_doDetach");function zKe(A,x,T,S){var P=!1;return A&&x&&x[rc]&&T&&(A[sx]?(A[sx](x[rc],T,S),P=!0):A[zh]&&(A[zh](s1+x[rc],T),P=!0)),P}s(zKe,"_doAttach");function cge(A,x,T,S){for(var P=x[Yn];P--;){var L=x[P];L&&(!T.ns||T.ns===L[o3].ns)&&(!S||S(L))&&(lge(A,L[o3],L.handler,L.capture),x[xC](P,1))}}s(cge,"_doUnregister");function YKe(A,x,T){if(x[rc])cge(A,age(A,x[rc]),x,T);else{var S=h7.get(A,p_,{});ne(S,function(P,L){cge(A,L,x,T)}),yt(S)[Yn]===0&&h7.kill(A,p_)}}s(YKe,"_unregisterEvents");function uge(A,x){var T;return x?(Je(x)?T=[A].concat(x):T=[A,x],T=gJ("xx",T).ns[Fh](".")):T=A,T}s(uge,"mergeEvtNamespace");function dge(A,x,T,S,P){P===void 0&&(P=!1);var L=!1;if(A)try{var Q=gJ(x,S);if(L=zKe(A,Q,T,P),L&&h7.accept(A)){var J={guid:VKe++,evtName:Q,handler:T,capture:P};age(A,Q.type)[Vi](J)}}catch{}return L}s(dge,"eventOn");function KKe(A,x,T,S,P){if(P===void 0&&(P=!1),A)try{var L=gJ(x,S),Q=!1;YKe(A,L,function(J){return L.ns&&!T||J.handler===T?(Q=!0,!0):!1}),Q||lge(A,L,T,P)}catch{}}s(KKe,"eventOff");var fge="sampleRate",AJ="ProcessLegacy",pge="http.method",yJ="https://dc.services.visualstudio.com",m_="/v2/track",ax="not_specified",mge=BK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),g7="split",fi="length",CJ="toLowerCase",FE="ingestionendpoint",G3="toString",hge="removeItem",A7="message",JKe="count",xJ="stringify",vJ="pathname",H3="match",lx="name",Yh="properties",a1="measurements",y7="sizeInBytes",C7="typeName",j3="exceptions",V3="severityLevel",bJ="problemGroup",h_="parsedStack",x7="hasFullStack",v7="assembly",l1="fileName",g_="line",b7="aiDataContract",E7="duration";function gge(A,x,T){var S=x[fi],P=XKe(A,x);if(P[fi]!==S){for(var L=0,Q=P;T[Q]!==void 0;)L++,Q=ge(P,0,147)+tJe(L);P=Q}return P}s(gge,"dataSanitizeKeyAndAddUniqueness");function XKe(A,x){var T;return x&&(x=ji(Ot(x)),x[fi]>150&&(T=ge(x,0,150),Tr(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(XKe,"dataSanitizeKey");function Bc(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=ji(Ot(x)),x[fi]>T&&(S=ge(x,0,T),Tr(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(Bc,"dataSanitizeString");function EJ(A,x){return yge(A,x,2048,66)}s(EJ,"dataSanitizeUrl");function Age(A,x){var T;return x&&x[fi]>32768&&(T=ge(x,0,32768),Tr(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(Age,"dataSanitizeMessage");function ZKe(A,x){var T;if(x){var S=""+x;S[fi]>32768&&(T=ge(S,0,32768),Tr(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(ZKe,"dataSanitizeException");function ME(A,x){if(x){var T={};ne(x,function(S,P){if(Re(P)&&qC())try{P=gu()[xJ](P)}catch(L){Tr(A,2,49,"custom property is not valid",{exception:L},!0)}P=Bc(A,P,8192),S=gge(A,S,T),T[S]=P}),x=T}return x}s(ME,"dataSanitizeProperties");function QE(A,x){if(x){var T={};ne(x,function(S,P){S=gge(A,S,T),T[S]=P}),x=T}return x}s(QE,"dataSanitizeMeasurements");function eJe(A,x){return x&&yge(A,x,128,69)[G3]()}s(eJe,"dataSanitizeId");function yge(A,x,T,S){var P;return x&&(x=ji(Ot(x)),x[fi]>T&&(P=ge(x,0,T),Tr(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),P||x}s(yge,"dataSanitizeInput");function tJe(A){var x="00"+A;return ve(x,x[fi]-3)}s(tJe,"dsPadNumber");var Cge=rC()||{},xge=0,rJe=[null,null,null,null,null];function nJe(A){var x=xge,T=rJe,S=T[x];return Cge.createElement?T[x]||(S=T[x]=Cge.createElement("a")):S={host:iJe(A,!0)},S.href=A,x++,x>=T[fi]&&(x=0),xge=x,S}s(nJe,"urlParseUrl");function iJe(A,x){var T=oJe(A,x)||"";if(T){var S=T[H3](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>3&&he(S[2])&&S[2][fi]>0)return S[2]+(S[3]||"")}return T}s(iJe,"urlParseHost");function oJe(A,x){var T=null;if(A){var S=A[H3](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[fi]>2&&he(S[2])&&S[2][fi]>0&&(T=S[2]||"",x&&S[fi]>2)){var P=(S[1]||"")[CJ](),L=S[3]||"";(P==="http"&&L===":80"||P==="https"&&L===":443")&&(L=""),T+=L}}return T}s(oJe,"urlParseFullHost");var sJe=[yJ+m_,"https://breeze.aimon.applicationinsights.io"+m_,"https://dc-int.services.visualstudio.com"+m_];function vge(A){return pu(sJe,A[CJ]())!==-1}s(vge,"isInternalApplicationInsightsEndpoint");function aJe(A,x,T,S){var P,L=S,Q=S;if(x&&x[fi]>0){var J=nJe(x);if(P=J.host,!L)if(J[vJ]!=null){var ae=J.pathname[fi]===0?"/":J[vJ];ae.charAt(0)!=="/"&&(ae="/"+ae),Q=J[vJ],L=Bc(A,T?T+" "+ae:ae)}else L=Bc(A,x)}else P=S,L=S;return{target:P,name:L,data:Q}}s(aJe,"AjaxHelperParseDependencyPath");var IJ=ww({LocalStorage:0,SessionStorage:1}),A_=void 0,bge="";function Ege(A){try{if(ee(sf()))return null;var x=new Date()[G3](),T=na(A===IJ.LocalStorage?"localStorage":"sessionStorage"),S=bge+x;T.setItem(S,x);var P=T.getItem(S)!==x;if(T[hge](S),!P)return T}catch{}return null}s(Ege,"_getVerifiedStorageObject");function TJ(){return Ige()?Ege(IJ.SessionStorage):null}s(TJ,"_getSessionStorageObject");function lJe(A){bge=A||""}s(lJe,"utlSetStoragePrefix");function Ige(A){return(A||A_===void 0)&&(A_=!!Ege(IJ.SessionStorage)),A_}s(Ige,"utlCanUseSessionStorage");function cJe(A,x){var T=TJ();if(T!==null)try{return T.getItem(x)}catch(S){A_=!1,Tr(A,2,2,"Browser failed read of session storage. "+al(S),{exception:Lt(S)})}return null}s(cJe,"utlGetSessionStorage");function uJe(A,x,T){var S=TJ();if(S!==null)try{return S.setItem(x,T),!0}catch(P){A_=!1,Tr(A,2,4,"Browser failed write to session storage. "+al(P),{exception:Lt(P)})}return!1}s(uJe,"utlSetSessionStorage");function dJe(A,x){var T=TJ();if(T!==null)try{return T[hge](x),!0}catch(S){A_=!1,Tr(A,2,6,"Browser failed removal of session storage item. "+al(S),{exception:Lt(S)})}return!1}s(dJe,"utlRemoveSessionStorage");var fJe=";",pJe="=";function wJ(A){if(!A)return{};var x=A[g7](fJe),T=CK(x,function(P,L){var Q=L[g7](pJe);if(Q[fi]===2){var J=Q[0][CJ](),ae=Q[1];P[J]=ae}return P},{});if(yt(T)[fi]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[FE]=T[FE]||"https://"+S+"dc."+T.endpointsuffix}T[FE]=T[FE]||yJ,dN(T[FE],"/")&&(T[FE]=T[FE].slice(0,-1))}return T}s(wJ,"parseConnectionString");var mJe=function(){function A(x,T,S){var P=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[lx]=Bc(x,S)||ax,L.data=T,L.time=yE(new Date),L[b7]={time:1,iKey:1,name:1,sampleRate:s(function(){return P.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),y_=function(){function A(x,T,S,P){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[lx]=Bc(x,T)||ax,L[Yh]=ME(x,S),L[a1]=QE(x,P)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),hJe=58,gJe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,AJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,yJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,CJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,xJe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,vJe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,bJe=/([^\(\s\n]+):([0-9]+)$/,Tge="<no_method>",C_="error",Cf="stack",_J="stackDetails",wge="errorSrc",SJ="message",_ge="description",Sge=[{re:AJe,len:5,m:1,fn:2,ln:3,col:4},{chk:IJe,pre:EJe,re:yJe,len:4,m:1,fn:2,ln:3},{re:CJe,len:3,m:1,fn:2,hdl:Nge},{re:xJe,len:2,fn:1,hdl:Nge}];function EJe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(EJe,"_scrubAnonymous");function IJe(A){return Op(A,"[native")<0}s(IJe,"_ignoreNative");function RJ(A,x){var T=A;return T&&!he(T)&&(JSON&&JSON[xJ]?(T=JSON[xJ](A),x&&(!T||T==="{}")&&(Ne(A[G3])?T=A[G3]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(RJ,"_stringify");function Rge(A,x){var T=A;return A&&(T&&!he(T)&&(T=A[SJ]||A[_ge]||T),T&&!he(T)&&(T=RJ(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Op(T||"",x)===-1&&(T=x+": "+T),T||""}s(Rge,"_formatMessage");function TJe(A){try{if(Re(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(TJe,"_isExceptionDetailsInternal");function wJe(A){try{if(Re(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(wJe,"_isExceptionInternal");function kge(A){return A&&A.src&&he(A.src)&&A.obj&&Je(A.obj)}s(kge,"_isStackDetails");function OE(A){var x=A||"";he(x)||(he(x[Cf])?x=x[Cf]:x=""+x);var T=x[g7](`
`);return{src:x,obj:T}}s(OE,"_convertStackObj");function _Je(A){for(var x=[],T=A[g7](`
`),S=0;S<T[fi];S++){var P=T[S];T[S+1]&&(P+="@"+T[S+1],S++),x.push(P)}return{src:A,obj:x}}s(_Je,"_getOperaStack");function Bge(A){var x=null;if(A)try{if(A[Cf])x=OE(A[Cf]);else if(A[C_]&&A[C_][Cf])x=OE(A[C_][Cf]);else if(A.exception&&A.exception[Cf])x=OE(A.exception[Cf]);else if(kge(A))x=A;else if(kge(A[_J]))x=A[_J];else if(Qp()&&Qp().opera&&A[SJ])x=_Je(A[A7]);else if(A.reason&&A.reason[Cf])x=OE(A.reason[Cf]);else if(he(A))x=OE(A);else{var T=A[SJ]||A[_ge]||"";he(A[wge])&&(T&&(T+=`
`),T+=" from "+A[wge]),T&&(x=OE(T))}}catch(S){x=OE(S)}return x||{src:"",obj:null}}s(Bge,"_getStackFromErrorObj");function SJe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(SJe,"_formatStackTrace");function RJe(A){var x,T=A.obj;if(T&&T[fi]>0){x=[];var S=0,P=!1,L=0;qr(T,function(lt){if(P||PJe(lt)){var et=Ot(lt);P=!0;var At=NJe(et,S);At&&(L+=At[y7],x.push(At),S++)}});var Q=32*1024;if(L>Q)for(var J=0,ae=x[fi]-1,Ce=0,Te=J,Le=ae;J<ae;){var Ye=x[J][y7],Fe=x[ae][y7];if(Ce+=Ye+Fe,Ce>Q){var He=Le-Te+1;x.splice(Te,He);break}Te=J,Le=ae,J++,ae--}}return x}s(RJe,"_parseStack");function I7(A){var x="";if(A&&(x=A.typeName||A[lx]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[G3]());x=S&&S[fi]>1?S[1]:""}catch{}return x}s(I7,"_getErrorType");function kJ(A){if(A)try{if(!he(A)){var x=I7(A),T=RJ(A,!1);return(!T||T==="{}")&&(A[C_]&&(A=A[C_],x=I7(A)),T=RJ(A,!0)),Op(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s(kJ,"_formatErrorCode");var T7=function(){function A(x,T,S,P,L,Q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var J=this;J.ver=2,wJe(T)?(J[j3]=T[j3]||[],J[Yh]=T[Yh],J[a1]=T[a1],T[V3]&&(J[V3]=T[V3]),T.id&&(J.id=T.id,T[Yh].id=T.id),T[bJ]&&(J[bJ]=T[bJ]),ee(T.isManual)||(J.isManual=T.isManual)):(S||(S={}),Q&&(S.id=Q),J[j3]=[Dge(x,T,S)],J[Yh]=ME(x,S),J[a1]=QE(x,P),L&&(J[V3]=L),Q&&(J.id=Q))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,P,L,Q,J,ae){var Ce=I7(L||Q||x);return{message:Rge(x,Ce),url:T,lineNumber:S,columnNumber:P,error:kJ(L||Q||x),evt:kJ(Q||x),typeName:Ce,stackDetails:Bge(J||L||Q),errorSrc:ae}},A.CreateFromInterface=function(x,T,S,P){var L=T[j3]&&qA(T[j3],function(J){return DJe(x,J)}),Q=new A(x,qp(qp({},T),{exceptions:L}),S,P);return Q},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,P=x.measurements,L=x.severityLevel,Q=x.problemGroup,J=x.id,ae=x.isManual,Ce=T instanceof Array&&qA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:P,problemGroup:Q,id:J,isManual:ae}},A.CreateSimpleException=function(x,T,S,P,L,Q){var J;return{exceptions:[(J={},J[x7]=!0,J.message=x,J.stack=L,J.typeName=T,J)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=kJ,A}(),kJe=Gt({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function BJe(){var A=this,x=Je(A[h_])&&qA(A[h_],function(S){return FJe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[C7],message:A[A7],hasFullStack:A[x7],stack:A[Cf],parsedStack:x||void 0};return T}s(BJe,"_toInterface");function Dge(A,x,T){var S,P,L,Q,J,ae,Ce,Te;if(TJe(x))Q=x[C7],J=x[A7],Ce=x[Cf],Te=x[h_]||[],ae=x[x7];else{var Le=x,Ye=Le&&Le.evt;Ct(Le)||(Le=Le[C_]||Ye||Le),Q=Bc(A,I7(Le))||ax,J=Age(A,Rge(x||Le,Q))||ax;var Fe=x[_J]||Bge(x);Te=RJe(Fe),Je(Te)&&qA(Te,function(He){He[v7]=Bc(A,He[v7]),He[l1]=Bc(A,He[l1])}),Ce=ZKe(A,SJe(Fe)),ae=Je(Te)&&Te[fi]>0,T&&(T[C7]=T[C7]||Q)}return S={},S[b7]=kJe,S.id=P,S.outerId=L,S.typeName=Q,S.message=J,S[x7]=ae,S.stack=Ce,S.parsedStack=Te,S.toInterface=BJe,S}s(Dge,"_createExceptionDetails");function DJe(A,x){var T=Je(x[h_])&&qA(x[h_],function(P){return LJe(P)})||x[h_],S=Dge(A,qp(qp({},x),{parsedStack:T}));return S}s(DJe,"_createExDetailsFromInterface");function Pge(A,x){var T=x[H3](vJe);if(T&&T[fi]>=4)A[l1]=T[1],A[g_]=parseInt(T[2]);else{var S=x[H3](bJe);S&&S[fi]>=3?(A[l1]=S[1],A[g_]=parseInt(S[2])):A[l1]=x}}s(Pge,"_parseFilename");function Nge(A,x,T){var S=A[l1];x.fn&&T&&T[fi]>x.fn&&(x.ln&&T[fi]>x.ln?(S=ji(T[x.fn]||""),A[g_]=parseInt(ji(T[x.ln]||""))||0):S=ji(T[x.fn]||"")),S&&Pge(A,S)}s(Nge,"_handleFilename");function PJe(A){var x=!1;if(A&&he(A)){var T=ji(A);T&&(x=gJe.test(T))}return x}s(PJe,"_isStackFrame");var Lge=Gt({level:1,method:1,assembly:0,fileName:0,line:0});function NJe(A,x){var T,S;if(A&&he(A)&&ji(A)){S=(T={},T[b7]=Lge,T.level=x,T.assembly=ji(A),T.method=Tge,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var P=0;P<Sge[fi];){var L=Sge[P];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var Q=A[H3](L.re);if(Q&&Q[fi]>=L.len){L.m&&(S.method=ji(Q[L.m]||Tge)),L.hdl?L.hdl(S,L,Q):L.fn&&(L.ln?(S[l1]=ji(Q[L.fn]||""),S[g_]=parseInt(ji(Q[L.ln]||""))||0):Pge(S,Q[L.fn]||""));break}P++}}return Fge(S)}s(NJe,"_extractStackFrame");function LJe(A){var x,T=(x={},x[b7]=Lge,x.level=A.level,x.method=A.method,x.assembly=A[v7],x.fileName=A[l1],x.line=A[g_],x.sizeInBytes=0,x);return Fge(T)}s(LJe,"_stackFrameFromInterface");function Fge(A){var x=hJe;return A&&(x+=A.method[fi],x+=A.assembly[fi],x+=A.fileName[fi],x+=A.level.toString()[fi],x+=A.line.toString()[fi],A[y7]=x),A}s(Fge,"_populateFrameSizeInBytes");function FJe(A){return{level:A.level,method:A.method,assembly:A[v7],fileName:A[l1],line:A[g_]}}s(FJe,"_parsedFrameToInterface");var MJe=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),$3=function(){function A(x,T,S,P,L,Q,J,ae,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new MJe;Le[JKe]=P>0?P:void 0,Le.max=isNaN(Q)||Q===null?void 0:Q,Le.min=isNaN(L)||L===null?void 0:L,Le[lx]=Bc(x,T)||ax,Le.value=S,Le.stdDev=isNaN(J)||J===null?void 0:J,Te.metrics=[Le],Te[Yh]=ME(x,ae),Te[a1]=QE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),z3="";function Mge(A){(isNaN(A)||A<0)&&(A=0),A=IK(A);var x=z3+A%1e3,T=z3+WA(A/1e3)%60,S=z3+WA(A/(1e3*60))%60,P=z3+WA(A/(1e3*60*60))%24,L=WA(A/(1e3*60*60*24));return x=x[fi]===1?"00"+x:x[fi]===2?"0"+x:x,T=T[fi]<2?"0"+T:T,S=S[fi]<2?"0"+S:S,P=P[fi]<2?"0"+P:P,(L>0?L+".":z3)+P+":"+S+":"+T+"."+x}s(Mge,"msToTimeSpan");var w7=function(){function A(x,T,S,P,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var ae=this;ae.ver=2,ae.id=eJe(x,J),ae.url=EJ(x,S),ae[lx]=Bc(x,T)||ax,isNaN(P)||(ae[E7]=Mge(P)),ae[Yh]=ME(x,L),ae[a1]=QE(x,Q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),_7=function(){function A(x,T,S,P,L,Q,J,ae,Ce,Te,Le,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Fe=this;Fe.ver=2,Fe.id=T,Fe[E7]=Mge(L),Fe.success=Q,Fe.resultCode=J+"",Fe.type=Bc(x,Ce);var He=aJe(x,S,ae,P);Fe.data=EJ(x,P)||He.data,Fe.target=Bc(x,He.target),Te&&(Fe.target="".concat(Fe.target," | ").concat(Te)),Fe[lx]=Bc(x,He[lx]),Fe[Yh]=ME(x,Le),Fe[a1]=QE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),S7=function(){function A(x,T,S,P,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Q=this;Q.ver=2,T=T||ax,Q[A7]=Age(x,T),Q[Yh]=ME(x,P),Q[a1]=QE(x,L),S&&(Q[V3]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),R7=function(){function A(x,T,S,P,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var ae=this;ae.ver=2,ae.url=EJ(x,S),ae[lx]=Bc(x,T)||ax,ae[Yh]=ME(x,L),ae[a1]=QE(x,Q),J&&(ae.domProcessing=J.domProcessing,ae[E7]=J[E7],ae.networkConnect=J.networkConnect,ae.perfTotal=J.perfTotal,ae.receivedResponse=J.receivedResponse,ae.sentRequest=J.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),UE=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),QJe=ww({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function cx(A){var x="ai."+A+".";return function(T){return x+T}}s(cx,"_aiNameFunc");var Y3=cx("application"),cl=cx("device"),k7=cx("location"),x_=cx("operation"),BJ=cx("session"),ux=cx("user"),qE=cx("cloud"),K3=cx("internal"),Qge=function(A){fE(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(UK({applicationVersion:Y3("ver"),applicationBuild:Y3("build"),applicationTypeId:Y3("typeId"),applicationId:Y3("applicationId"),applicationLayer:Y3("layer"),deviceId:cl("id"),deviceIp:cl("ip"),deviceLanguage:cl("language"),deviceLocale:cl("locale"),deviceModel:cl("model"),deviceFriendlyName:cl("friendlyName"),deviceNetwork:cl("network"),deviceNetworkName:cl("networkName"),deviceOEMName:cl("oemName"),deviceOS:cl("os"),deviceOSVersion:cl("osVersion"),deviceRoleInstance:cl("roleInstance"),deviceRoleName:cl("roleName"),deviceScreenResolution:cl("screenResolution"),deviceType:cl("type"),deviceMachineName:cl("machineName"),deviceVMName:cl("vmName"),deviceBrowser:cl("browser"),deviceBrowserVersion:cl("browserVersion"),locationIp:k7("ip"),locationCountry:k7("country"),locationProvince:k7("province"),locationCity:k7("city"),operationId:x_("id"),operationName:x_("name"),operationParentId:x_("parentId"),operationRootId:x_("rootId"),operationSyntheticSource:x_("syntheticSource"),operationCorrelationVector:x_("correlationVector"),sessionId:BJ("id"),sessionIsFirst:BJ("isFirst"),sessionIsNew:BJ("isNew"),userAccountAcquisitionDate:ux("accountAcquisitionDate"),userAccountId:ux("accountId"),userAgent:ux("userAgent"),userId:ux("id"),userStoreRegion:ux("storeRegion"),userAuthUserId:ux("authUserId"),userAnonymousUserAcquisitionDate:ux("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:ux("authUserAcquisitionDate"),cloudName:qE("name"),cloudRole:qE("role"),cloudRoleVer:qE("roleVer"),cloudRoleInstance:qE("roleInstance"),cloudEnvironment:qE("environment"),cloudLocation:qE("location"),cloudDeploymentUnit:qE("deploymentUnit"),internalNodeName:K3("nodeName"),internalSdkVersion:K3("sdkVersion"),internalAgentVersion:K3("agentVersion"),internalSnippet:K3("snippet"),internalSdkSrc:K3("sdkSrc")})),Tl=new Qge;function Oge(A,x){KKe(A,null,null,x)}s(Oge,"_disableEvents");function OJe(A){var x=rC(),T=bh(),S=!1,P=[],L=1;T&&!ee(T.onLine)&&!T.onLine&&(L=2);var Q=0,J=Ye(),ae=uge(zp("OfflineListener"),A);try{if(Te(Qp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var mr=!1;return Vt&&(mr=dge(Vt,"online",lt,ae),mr&&dge(Vt,"offline",et,ae)),mr}s(Te,"_enableEvents");function Le(){return J}s(Le,"_isOnline");function Ye(){return!(Q===2||L===2)}s(Ye,"calCurrentState");function Fe(){var Vt=Ye();J!==Vt&&(J=Vt,qr(P,function(mr){var Hn={isOnline:J,rState:L,uState:Q};try{mr(Hn)}catch{}}))}s(Fe,"listnerNoticeCheck");function He(Vt){Q=Vt,Fe()}s(He,"setOnlineState");function lt(){L=1,Fe()}s(lt,"_setOnline");function et(){L=2,Fe()}s(et,"_setOffline");function At(){var Vt=Qp();if(Vt&&S){if(Oge(Vt,ae),x){var mr=x.body||x;W(mr.ononline)||Oge(mr,ae)}S=!1}}s(At,"_unload");function Nt(Vt){return P.push(Vt),{rm:s(function(){var mr=P.indexOf(Vt);if(mr>-1)return P.splice(mr,1)},"rm")}}return s(Nt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:At,addListener:Nt,setOnlineState:He}}s(OJe,"createOfflineListener");var UJe="AppInsightsChannelPlugin",WE="duration",nc="tags",DJ="deviceType",e0="data",c1="name",J3="traceID",gi="length",X3="stringify",GE="measurements",Kh="dataType",HE="envelopeType",jE="toString",VE="enqueue",$E="count",u1="push",PJ="emitLineDelimitedJson",v_="clear",B7="markAsSent",Z3="clearSent",NJ="bufferOverride",eB="BUFFER_KEY",dx="SENT_BUFFER_KEY",b_="concat",tB="MAX_BUFFER_SIZE",rB="triggerSend",Dc="diagLog",LJ="initialize",nB="_sender",iB="endpointUrl",oB="instrumentationKey",FJ="customHeaders",Uge="maxBatchSizeInBytes",MJ="onunloadDisableBeacon",QJ="isBeaconApiDisabled",qge="alwaysUseXhrOverride",Wge="enableSessionStorageBuffer",Jh="_buffer",Gge="onunloadDisableFetch",Hge="disableSendBeaconSplit",D7="getSenderInst",zE="_onError",OJ="_onPartialSuccess",P7="_onSuccess",UJ="itemsReceived",qJ="itemsAccepted",WJ="baseType",N7="sampleRate",qJe="getHashCodeScore",GJ="baseType",Ss="baseData",wl="properties",jge="true";function Ca(A,x,T){return Oh(A,x,T,ce)}s(Ca,"_setValueIf");function WJe(A,x,T){var S=T[nc]=T[nc]||{},P=x.ext=x.ext||{},L=x[nc]=x[nc]||[],Q=P.user;Q&&(Ca(S,Tl.userAuthUserId,Q.authId),Ca(S,Tl.userId,Q.id||Q.localId));var J=P.app;J&&Ca(S,Tl.sessionId,J.sesId);var ae=P.device;ae&&(Ca(S,Tl.deviceId,ae.id||ae.localId),Ca(S,Tl[DJ],ae.deviceClass),Ca(S,Tl.deviceIp,ae.ip),Ca(S,Tl.deviceModel,ae.model),Ca(S,Tl[DJ],ae[DJ]));var Ce=x.ext.web;if(Ce){Ca(S,Tl.deviceLanguage,Ce.browserLang),Ca(S,Tl.deviceBrowserVersion,Ce.browserVer),Ca(S,Tl.deviceBrowser,Ce.browser);var Te=T[e0]=T[e0]||{},Le=Te[Ss]=Te[Ss]||{},Ye=Le[wl]=Le[wl]||{};Ca(Ye,"domain",Ce.domain),Ca(Ye,"isManual",Ce.isManual?jge:null),Ca(Ye,"screenRes",Ce.screenRes),Ca(Ye,"userConsent",Ce.userConsent?jge:null)}var Fe=P.os;Fe&&(Ca(S,Tl.deviceOS,Fe[c1]),Ca(S,Tl.deviceOSVersion,Fe.osVer));var He=P.trace;He&&(Ca(S,Tl.operationParentId,He.parentID),Ca(S,Tl.operationName,Bc(A,He[c1])),Ca(S,Tl.operationId,He[J3]));for(var lt={},et=L[gi]-1;et>=0;et--){var At=L[et];ne(At,function(Vt,mr){lt[Vt]=mr}),L.splice(et,1)}ne(L,function(Vt,mr){lt[Vt]=mr});var Nt=qp(qp({},S),lt);Nt[Tl.internalSdkVersion]||(Nt[Tl.internalSdkVersion]=Bc(A,"javascript:".concat(GJe.Version),64)),T[nc]=h3(Nt)}s(WJe,"_extractPartAExtensions");function fx(A,x,T){ee(A)||ne(A,function(S,P){pt(P)?T[S]=P:he(P)?x[S]=P:qC()&&(x[S]=gu()[X3](P))})}s(fx,"_extractPropsAndMeasurements");function YE(A,x){ee(A)||ne(A,function(T,S){A[T]=S||x})}s(YE,"_convertPropsUndefinedToCustomDefinedValue");function KE(A,x,T,S){var P=new mJe(A,S,x);Ca(P,"sampleRate",T[fge]),(T[Ss]||{}).startTime&&(P.time=yE(T[Ss].startTime)),P.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return P[c1]=P[c1].replace("{0}",L),WJe(A,T,P),T[nc]=T[nc]||[],h3(P)}s(KE,"_createEnvelope");function JE(A,x){ee(x[Ss])&&Tr(A,1,46,"telemetryItem.baseData cannot be null.")}s(JE,"EnvelopeCreatorInit");var GJe={Version:"3.3.6"};function HJe(A,x,T){JE(A,x);var S=x[Ss][GE]||{},P=x[Ss][wl]||{};fx(x[e0],P,S),ee(T)||YE(P,T);var L=x[Ss];if(ee(L))return i_(A,"Invalid input for dependency data"),null;var Q=L[wl]&&L[wl][pge]?L[wl][pge]:"GET",J=new _7(A,L.id,L.target,L[c1],L[WE],L.success,L.responseCode,Q,L.type,L.correlationContext,P,S),ae=new UE(_7[Kh],J);return KE(A,_7[HE],x,ae)}s(HJe,"DependencyEnvelopeCreator");function Vge(A,x,T){JE(A,x);var S={},P={};x[GJ]!==y_[Kh]&&(S.baseTypeSource=x[GJ]),x[GJ]===y_[Kh]?(S=x[Ss][wl]||{},P=x[Ss][GE]||{}):x[Ss]&&fx(x[Ss],S,P),fx(x[e0],S,P),ee(T)||YE(S,T);var L=x[Ss][c1],Q=new y_(A,L,S,P),J=new UE(y_[Kh],Q);return KE(A,y_[HE],x,J)}s(Vge,"EventEnvelopeCreator");function jJe(A,x,T){JE(A,x);var S=x[Ss][GE]||{},P=x[Ss][wl]||{};fx(x[e0],P,S),ee(T)||YE(P,T);var L=x[Ss],Q=T7.CreateFromInterface(A,L,P,S),J=new UE(T7[Kh],Q);return KE(A,T7[HE],x,J)}s(jJe,"ExceptionEnvelopeCreator");function VJe(A,x,T){JE(A,x);var S=x[Ss],P=S[wl]||{},L=S[GE]||{};fx(x[e0],P,L),ee(T)||YE(P,T);var Q=new $3(A,S[c1],S.average,S.sampleCount,S.min,S.max,S.stdDev,P,L),J=new UE($3[Kh],Q);return KE(A,$3[HE],x,J)}s(VJe,"MetricEnvelopeCreator");function $Je(A,x,T){JE(A,x);var S,P=x[Ss];!ee(P)&&!ee(P[wl])&&!ee(P[wl][WE])?(S=P[wl][WE],delete P[wl][WE]):!ee(x[e0])&&!ee(x[e0][WE])&&(S=x[e0][WE],delete x[e0][WE]);var L=x[Ss],Q;((x.ext||{}).trace||{})[J3]&&(Q=x.ext.trace[J3]);var J=L.id||Q,ae=L[c1],Ce=L.uri,Te=L[wl]||{},Le=L[GE]||{};if(ee(L.refUri)||(Te.refUri=L.refUri),ee(L.pageType)||(Te.pageType=L.pageType),ee(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[jE]()),!ee(L[wl])){var Ye=L[wl];ne(Ye,function(lt,et){Te[lt]=et})}fx(x[e0],Te,Le),ee(T)||YE(Te,T);var Fe=new w7(A,ae,Ce,S,Te,Le,J),He=new UE(w7[Kh],Fe);return KE(A,w7[HE],x,He)}s($Je,"PageViewEnvelopeCreator");function zJe(A,x,T){JE(A,x);var S=x[Ss],P=S[c1],L=S.uri||S.url,Q=S[wl]||{},J=S[GE]||{};fx(x[e0],Q,J),ee(T)||YE(Q,T);var ae=new R7(A,P,L,void 0,Q,J,S),Ce=new UE(R7[Kh],ae);return KE(A,R7[HE],x,Ce)}s(zJe,"PageViewPerformanceEnvelopeCreator");function YJe(A,x,T){JE(A,x);var S=x[Ss].message,P=x[Ss].severityLevel,L=x[Ss][wl]||{},Q=x[Ss][GE]||{};fx(x[e0],L,Q),ee(T)||YE(L,T);var J=new S7(A,S,P,L,Q),ae=new UE(S7[Kh],J);return KE(A,S7[HE],x,ae)}s(YJe,"TraceEnvelopeCreator");var $ge=function(){function A(x,T){var S=[],P=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(Q){return S=Q,S},tc(A,this,function(Q){Q[VE]=function(J){if(Q[$E]()>=T.eventsLimitInMem){P||(Tr(x,2,105,"Maximum in-memory buffer size reached: "+Q[$E](),!0),P=!0);return}J.cnt=J.cnt||0,!(!ee(L)&&J.cnt>L)&&S[u1](J)},Q[$E]=function(){return S[gi]},Q.size=function(){for(var J=S[gi],ae=0;ae<S[gi];ae++)J+=S[ae].item[gi];return T[PJ]||(J+=2),J},Q[v_]=function(){S=[],P=!1},Q.getItems=function(){return S.slice(0)},Q.batchPayloads=function(J){if(J&&J[gi]>0){var ae=[];qr(J,function(Te){ae[u1](Te.item)});var Ce=T[PJ]?ae.join(`
`):"["+ae.join(",")+"]";return Ce}return null},Q.createNew=function(J,ae,Ce){var Te=S.slice(0);J=J||x,ae=ae||{};var Le=Ce?new zge(J,ae):new HJ(J,ae);return qr(Te,function(Ye){Le[VE](Ye)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),HJ=function(A){fE(x,A);function x(T,S){var P=A.call(this,T,S)||this;return tc(x,P,function(L,Q){L[B7]=function(J){Q[v_]()},L[Z3]=function(J){}}),P}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}($ge),KJe=["AI_buffer","AI_sentBuffer"],zge=function(A){fE(x,A);function x(S,P){var L=A.call(this,S,P)||this,Q=!1,J=P?.namePrefix,ae=P[NJ]||{getItem:cJe,setItem:uJe},Ce=ae.getItem,Te=ae.setItem,Le=P.maxRetryCnt;return tc(x,L,function(Ye,Fe){var He=mr(x[eB]),lt=mr(x[dx]),et=vi(),At=lt[b_](et),Nt=Ye._set(He[b_](At));Nt[gi]>x[tB]&&(Nt[gi]=x[tB]),xi(x[dx],[]),xi(x[eB],Nt),Ye[VE]=function(dn){if(Ye[$E]()>=x[tB]){Q||(Tr(S,2,67,"Maximum buffer size reached: "+Ye[$E](),!0),Q=!0);return}dn.cnt=dn.cnt||0,!(!ee(Le)&&dn.cnt>Le)&&(Fe[VE](dn),xi(x[eB],Ye._get()))},Ye[v_]=function(){Fe[v_](),xi(x[eB],Ye._get()),xi(x[dx],[]),Q=!1},Ye[B7]=function(dn){xi(x[eB],Ye._set(Vt(dn,Ye._get())));var Lr=mr(x[dx]);Lr instanceof Array&&dn instanceof Array&&(Lr=Lr[b_](dn),Lr[gi]>x[tB]&&(Tr(S,1,67,"Sent buffer reached its maximum size: "+Lr[gi],!0),Lr[gi]=x[tB]),xi(x[dx],Lr))},Ye[Z3]=function(dn){var Lr=mr(x[dx]);Lr=Vt(dn,Lr),xi(x[dx],Lr)},Ye.createNew=function(dn,Lr,bi){bi=!!bi;var Rs=Ye._get().slice(0),Uo=mr(x[dx]).slice(0);dn=dn||S,Lr=Lr||{},Ye[v_]();var Ft=bi?new x(dn,Lr):new HJ(dn,Lr);return qr(Rs,function(Fr){Ft[VE](Fr)}),bi&&Ft[B7](Uo),Ft};function Vt(dn,Lr){var bi=[],Rs=[];return qr(dn,function(Uo){Rs[u1](Uo.item)}),qr(Lr,function(Uo){!Ne(Uo)&&pu(Rs,Uo.item)===-1&&bi[u1](Uo)}),bi}s(Vt,"_removePayloadsFromBuffer");function mr(dn){var Lr=dn;return Lr=J?J+"_"+Lr:Lr,Hn(Lr)}s(mr,"_getBuffer");function Hn(dn){try{var Lr=Ce(S,dn);if(Lr){var bi=gu().parse(Lr);if(he(bi)&&(bi=gu().parse(bi)),bi&&Je(bi))return bi}}catch(Rs){Tr(S,1,42," storage key: "+dn+", "+al(Rs),{exception:Lt(Rs)})}return[]}s(Hn,"_getBufferBase");function xi(dn,Lr){var bi=dn;try{bi=J?J+"_"+bi:bi;var Rs=JSON[X3](Lr);Te(S,bi,Rs)}catch(Uo){Te(S,bi,JSON[X3]([])),Tr(S,2,41," storage key: "+bi+", "+al(Uo)+". Buffer cleared",{exception:Lt(Uo)})}}s(xi,"_setBuffer");function vi(){var dn=[];try{return qr(KJe,function(Lr){var bi=ho(Lr);if(dn=dn[b_](bi),J){var Rs=J+"_"+Lr,Uo=ho(Rs);dn=dn[b_](Uo)}}),dn}catch(Lr){Tr(S,2,41,"Transfer events from previous buffers: "+al(Lr)+". previous Buffer items can not be removed",{exception:Lt(Lr)})}return[]}s(vi,"_getPreviousEvents");function ho(dn){try{var Lr=Hn(dn),bi=[];return qr(Lr,function(Rs){var Uo={item:Rs,cnt:0};bi[u1](Uo)}),dJe(S,dn),bi}catch{}return[]}s(ho,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}($ge),JJe=function(){function A(x){tc(A,this,function(T){T.serialize=function(Q){var J=S(Q,"root");try{return gu()[X3](J)}catch(ae){Tr(x,1,48,ae&&Ne(ae[jE])?ae[jE]():"Error serializing object",null,!0)}};function S(Q,J){var ae="__aiCircularRefCheck",Ce={};if(!Q)return Tr(x,1,48,"cannot serialize object because it is null or undefined",{name:J},!0),Ce;if(Q[ae])return Tr(x,2,50,"Circular reference detected while serializing object",{name:J},!0),Ce;if(!Q.aiDataContract){if(J==="measurements")Ce=L(Q,"number",J);else if(J==="properties")Ce=L(Q,"string",J);else if(J==="tags")Ce=L(Q,"string",J);else if(Je(Q))Ce=P(Q,J);else{Tr(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:J},!0);try{gu()[X3](Q),Ce=Q}catch(Te){Tr(x,1,48,Te&&Ne(Te[jE])?Te[jE]():"Error serializing object",null,!0)}}return Ce}return Q[ae]=!0,ne(Q.aiDataContract,function(Te,Le){var Ye=Ne(Le)?Le()&1:Le&1,Fe=Ne(Le)?Le()&4:Le&4,He=Le&2,lt=Q[Te]!==void 0,et=Re(Q[Te])&&Q[Te]!==null;if(Ye&&!lt&&!He)Tr(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:J});else if(!Fe){var At=void 0;et?He?At=P(Q[Te],Te):At=S(Q[Te],Te):At=Q[Te],At!==void 0&&(Ce[Te]=At)}}),delete Q[ae],Ce}s(S,"_serializeObject");function P(Q,J){var ae;if(Q)if(!Je(Q))Tr(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:J},!0);else{ae=[];for(var Ce=0;Ce<Q[gi];Ce++){var Te=Q[Ce],Le=S(Te,J+"["+Ce+"]");ae[u1](Le)}}return ae}s(P,"_serializeArray");function L(Q,J,ae){var Ce;return Q&&(Ce={},ne(Q,function(Te,Le){if(J==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[jE]?Ce[Te]=Le[jE]():Ce[Te]="invalid field: toString() is not defined.";else if(J==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ye=parseFloat(Le);Ce[Te]=Ye}else Ce[Te]="invalid field: "+ae+" is of unknown type.",Tr(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),XJe=8,ZJe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[gi]<XJe;)x=x[b_](x);for(var T=5381,S=0;S<x[gi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),eXe=function(){function A(){var x=this,T=new ZJe,S=new Qge;x.getSamplingScore=function(P){var L=0;return P[nc]&&P[nc][S.userId]?L=T.getHashCodeScore(P[nc][S.userId]):P.ext&&P.ext.user&&P.ext.user.id?L=T[qJe](P.ext.user.id):P[nc]&&P[nc][S.operationId]?L=T.getHashCodeScore(P[nc][S.operationId]):P.ext&&P.ext.telemetryTrace&&P.ext.telemetryTrace[J3]?L=T.getHashCodeScore(P.ext.telemetryTrace[J3]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),tXe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||RE(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[N7]=x,this.samplingScoreGenerator=new eXe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[N7],S=!1;return T==null||T>=100||x.baseType===$3[Kh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),os,d1,Xh=void 0,Yge="",rXe=65e3;function Kge(A){try{return A.responseText}catch{}return null}s(Kge,"_getResponseText");function nXe(A){return A&&A.sendPOST}s(nXe,"isOverrideFn");var Jge=Xt((os={endpointUrl:R3(ce,yJ+m_)},os[PJ]=gf(),os.maxBatchInterval=15e3,os[Uge]=102400,os.disableTelemetry=gf(),os[Wge]=gf(!0),os.isRetryDisabled=gf(),os[QJ]=gf(!0),os[Hge]=gf(!0),os.disableXhr=gf(),os[Gge]=gf(),os[MJ]=gf(),os[oB]=Xh,os.namePrefix=Xh,os.samplingPercentage=R3(iXe,100),os[FJ]=Xh,os.convertUndefined=Xh,os.eventsLimitInMem=1e4,os[NJ]=!1,os.httpXHROverride={isVal:nXe,v:Xh},os[qge]=gf(),os.transports=Xh,os.retryCodes=Xh,os.maxRetryCnt={isVal:pt,v:10},os));function iXe(A){return!isNaN(A)&&A>0&&A<=100}s(iXe,"_chkSampling");var oXe=(d1={},d1[y_.dataType]=Vge,d1[S7.dataType]=YJe,d1[w7.dataType]=$Je,d1[R7.dataType]=zJe,d1[T7.dataType]=jJe,d1[$3.dataType]=VJe,d1[_7.dataType]=HJe,d1),Xge=function(A){fE(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=UJe;var S,P,L,Q,J,ae,Ce,Te=0,Le,Ye,Fe,He,lt,et,At,Nt,Vt,mr,Hn,xi,vi,ho,dn,Lr,bi,Rs,Uo,Ft,Fr,io,Et,Rn,Hs,go,_l;return tc(x,T,function(ot,Wa){eAe(),ot.pause=function(){gx(),L=!0},ot.resume=function(){L&&(L=!1,P=null,_o(),w_())},ot.flush=function(Ue,ht,Zt){if(Ue===void 0&&(Ue=!0),!L){gx();try{return ot[rB](Ue,null,Zt||1)}catch(Sr){Tr(ot[Dc](),1,22,"flush failed, telemetry will not be collected: "+al(Sr),{exception:Lt(Sr)})}}},ot.onunloadFlush=function(){if(!L)if(At||Ft)try{return ot[rB](!0,od,2)}catch(Ue){Tr(ot[Dc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+al(Ue),{exception:Lt(Ue)})}else ot.flush(!1)},ot.addHeader=function(Ue,ht){Ce[Ue]=ht},ot[LJ]=function(Ue,ht,Zt,Sr){ot.isInitialized()&&Tr(ot[Dc](),1,28,"Sender is already initialized"),Wa[LJ](Ue,ht,Zt,Sr);var Ln=ot.identifier;J=new JJe(ht.logger),S=0,P=null,ot[nB]=null,ae=0;var An=ot[Dc]();Fe=uge(zp("Sender"),ht.evtNamespace&&ht.evtNamespace()),Ye=OJe(Fe),ot._addHook(Yp(Ue,function($i){var xa=$i.cfg;xa.storagePrefix&&lJe(xa.storagePrefix);var t0=ix(null,xa,ht),ci=t0.getExtCfg(Ln,Jge),tAe=ci[iB];if(He&&tAe===He){var $J=xa[iB];$J&&$J!==tAe&&(ci[iB]=$J)}bt(ci[oB])&&(ci[oB]=xa[oB]),ze(ot,"_senderConfig",{g:s(function(){return ci},"g")}),lt!==ci[iB]&&(He=lt=ci[iB]),ht.activeStatus()===Dh.PENDING?ot.pause():ht.activeStatus()===Dh.ACTIVE&&ot.resume(),mr&&mr!==ci[FJ]&&qr(mr,function(oc){delete Ce[oc.header]}),et=ci[Uge],At=(ci[MJ]===!1||ci[QJ]===!1)&&qh(),Nt=ci[MJ]===!1&&qh(),Vt=ci[QJ]===!1&&qh(),Ft=ci[qge],Fr=!!ci.disableXhr,_l=ci.retryCodes;var zJ=ci[NJ],__=!!ci[Wge]&&(!!zJ||Ige()),rAe=ci.namePrefix,cXe=__!==Lr||__&&Rs!==rAe||__&&bi!==zJ;if(ot[Jh]){if(cXe)try{ot[Jh]=ot[Jh].createNew(An,ci,__)}catch(oc){Tr(ot[Dc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+al(oc),{exception:Lt(oc)})}_o()}else ot[Jh]=__?new zge(An,ci):new HJ(An,ci);Rs=rAe,Lr=__,bi=zJ,io=!ci[Gge]&&IE(!0),Hs=!!ci[Hge],ot._sample=new tXe(ci.samplingPercentage,An),xi=ci[oB],!bt(xi)&&!Zge(xi,xa)&&Tr(An,1,100,"Invalid Instrumentation key "+xi),mr=ci[FJ],he(He)&&!vge(He)&&mr&&mr[gi]>0?qr(mr,function(oc){T.addHeader(oc.header,oc.value)}):mr=null,Uo=ci.enableSendPromise;var nAe=Sl();go?go.SetConfig(nAe):(go=new qa,go[LJ](nAe,An));var Q7=ci.httpXHROverride,O7=null,cB=null,uXe=PN([3,1,2],ci.transports);O7=go&&go[D7](uXe,!1);var YJ=go&&go.getFallbackInst();Et=s(function(oc,XE){return Dr(YJ,oc,XE)},"_xhrSend"),Rn=s(function(oc,XE){return Dr(YJ,oc,XE,!1)},"_fallbackSend"),O7=Ft?Q7:O7||Q7||YJ,ot[nB]=function(oc,XE){return Dr(O7,oc,XE)},io&&(Le=T_);var KJ=PN([3,1],ci.unloadTransports);io||(KJ=KJ.filter(function(oc){return oc!==2})),cB=go&&go[D7](KJ,!0),cB=Ft?Q7:cB||Q7,(Ft||ci.unloadTransports||!Le)&&cB&&(Le=s(function(oc,XE){return Dr(cB,oc,XE)},"_syncUnloadSender")),Le||(Le=Et),Hn=ci.disableTelemetry,vi=ci.convertUndefined||Xh,ho=ci.isRetryDisabled,dn=ci.maxBatchInterval}))},ot.processTelemetry=function(Ue,ht){ht=ot._getTelCtx(ht);var Zt=ht[Dc]();try{var Sr=Xp(Ue,Zt);if(!Sr)return;var Ln=hx(Ue,Zt);if(!Ln)return;var An=J.serialize(Ln),$i=ot[Jh];_o(An);var xa={item:An,cnt:0};$i[VE](xa),w_()}catch(t0){Tr(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+al(t0),{exception:Lt(t0)})}ot.processNext(Ue,ht)},ot.isCompletelyIdle=function(){return!L&&Te===0&&ot._buffer[$E]()===0},ot.getOfflineListener=function(){return Ye},ot._xhrReadyStateChange=function(Ue,ht,Zt){if(!em(ht))return xf(Ue,ht,Zt)},ot[rB]=function(Ue,ht,Zt){Ue===void 0&&(Ue=!0);var Sr;if(!L)try{var Ln=ot[Jh];if(Hn)Ln[v_]();else if(Ln[$E]()>0){var An=Ln.getItems();M7(Zt||0,Ue),ht?Sr=ht.call(ot,An,Ue):Sr=ot[nB](An,Ue)}gx()}catch(xa){var $i=WC();(!$i||$i>9)&&Tr(ot[Dc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+al(xa),{exception:Lt(xa)})}return Sr},ot.getOfflineSupport=function(){return{getUrl:s(function(){return He},"getUrl"),createPayload:dt,serialize:ks,batch:ic,shouldProcess:s(function(Ue){return!!Xp(Ue)},"shouldProcess")}},ot._doTeardown=function(Ue,ht){ot.onunloadFlush(),KC(Ye,!1),eAe()},ot[zE]=function(Ue,ht,Zt){if(!em(Ue))return yu(Ue,ht)},ot[OJ]=function(Ue,ht){if(!em(Ue))return px(Ue,ht)},ot[P7]=function(Ue,ht){if(!em(Ue))return Jp(Ue)},ot._xdrOnLoad=function(Ue,ht){if(!em(ht))return js(Ue,ht)};function js(Ue,ht){var Zt=Kge(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,ot[P7](ht,0);else{var Sr=Br(Zt);Sr&&Sr[UJ]&&Sr[UJ]>Sr[qJ]&&!ho?ot[OJ](ht,Sr):ot[zE](ht,DN(Ue))}}s(js,"_xdrOnLoad");function Sl(){try{var Ue={xdrOnComplete:s(function(Zt,Sr,Ln){var An=mx(Ln);if(An)return js(Zt,An)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,Sr,Ln,An){var $i=mx(An);if($i)return ss(Zt.status,$i,Zt.url,$i[gi],Zt.statusText,Ln||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,Sr,Ln){var An=mx(Ln);if(An)return xf(Zt,An,An[gi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,Sr,Ln){return Zp(Zt,Sr,Ln)},"beaconOnRetry")},ht={enableSendPromise:Uo,isOneDs:!1,disableCredentials:!1,disableXhr:Fr,disableBeacon:!Vt,disableBeaconSync:!Nt,senderOnCompleteCallBack:Ue};return ht}catch{}return null}s(Sl,"_getSendPostMgrConfig");function xf(Ue,ht,Zt){Ue.readyState===4&&ss(Ue.status,ht,Ue.responseURL,Zt,$w(Ue),Kge(Ue)||Ue.response)}s(xf,"_xhrReadyStateChange");function yu(Ue,ht,Zt){Tr(ot[Dc](),2,26,"Failed to send telemetry.",{message:ht}),ot._buffer&&ot._buffer[Z3](Ue)}s(yu,"_onError");function px(Ue,ht){for(var Zt=[],Sr=[],Ln=ht.errors.reverse(),An=0,$i=Ln;An<$i.length;An++){var xa=$i[An],t0=Ue.splice(xa.index,1)[0];Ax(xa.statusCode)?Sr[u1](t0):Zt[u1](t0)}Ue[gi]>0&&ot[P7](Ue,ht[qJ]),Zt[gi]>0&&ot[zE](Zt,$w(null,["partial success",ht[qJ],"of",ht.itemsReceived].join(" "))),Sr[gi]>0&&(lB(Sr),Tr(ot[Dc](),2,40,"Partial success. Delivered: "+Ue[gi]+", Failed: "+Zt[gi]+". Will retry to send "+Sr[gi]+" our of "+ht[UJ]+" items"))}s(px,"_onPartialSuccess");function Jp(Ue,ht){ot._buffer&&ot._buffer[Z3](Ue)}s(Jp,"_onSuccess");function mx(Ue){try{if(Ue){var ht=Ue,Zt=ht.oriPayload;return Zt&&Zt[gi]?Zt:null}}catch{}return null}s(mx,"_getPayloadArr");function Xp(Ue,ht){if(Hn)return!1;if(!Ue)return ht&&Tr(ht,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[WJ])return ht&&Tr(ht,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[WJ]||(Ue[WJ]="EventData"),!ot[nB])return ht&&Tr(ht,1,28,"Sender was not initialized"),!1;if(dr(Ue))Ue[fge]=ot._sample[N7];else return ht&&Tr(ht,2,33,"Telemetry item was sampled out and not sent",{SampleRate:ot._sample[N7]}),!1;return!0}s(Xp,"_validate");function hx(Ue,ht){var Zt=Ue.iKey||xi,Sr=x.constructEnvelope(Ue,Zt,ht,vi);if(!Sr){Tr(ht,1,47,"Unable to create an AppInsights envelope");return}var Ln=!1;if(Ue[nc]&&Ue[nc][AJ]&&(qr(Ue[nc][AJ],function(An){try{An&&An(Sr)===!1&&(Ln=!0,i_(ht,"Telemetry processor check returns false"))}catch($i){Tr(ht,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+al($i),{exception:Lt($i)},!0)}}),delete Ue[nc][AJ]),!Ln)return Sr}s(hx,"_getEnvelope");function ks(Ue){var ht=Yge,Zt=ot[Dc]();try{var Sr=Xp(Ue,Zt),Ln=null;Sr&&(Ln=hx(Ue,Zt)),Ln&&(ht=J.serialize(Ln))}catch{}return ht}s(ks,"_serialize");function ic(Ue){var ht=Yge;return Ue&&Ue[gi]&&(ht="["+Ue.join(",")+"]"),ht}s(ic,"_batch");function dt(Ue){var ht=vo();return{urlString:He,data:Ue,headers:ht}}s(dt,"_createPayload");function dr(Ue){return ot._sample.isSampledIn(Ue)}s(dr,"_isSampledIn");function Pn(Ue,ht,Zt,Sr){ht===200&&Ue?ot._onSuccess(Ue,Ue[gi]):Sr&&ot[zE](Ue,Sr)}s(Pn,"_getOnComplete");function Dr(Ue,ht,Zt,Sr){Sr===void 0&&(Sr=!0);var Ln=s(function(xa,t0,ci){return Pn(ht,xa,t0,ci)},"onComplete"),An=Nn(ht),$i=Ue&&Ue.sendPOST;return $i&&An?(Sr&&ot._buffer[B7](ht),$i(An,Ln,!Zt)):null}s(Dr,"_doSend");function Nn(Ue){if(Je(Ue)&&Ue[gi]>0){var ht=ot[Jh].batchPayloads(Ue),Zt=vo(),Sr={data:ht,urlString:He,headers:Zt,disableXhrSync:Fr,disableFetchKeepAlive:!io,oriPayload:Ue};return Sr}return null}s(Nn,"_getPayload");function vo(){try{var Ue=Ce||{};return vge(He)&&(Ue[mge[6]]=mge[7]),Ue}catch{}return null}s(vo,"_getHeaders");function _o(Ue){var ht=Ue?Ue[gi]:0;return ot[Jh].size()+ht>et?((!Ye||Ye.isOnline())&&ot[rB](!0,null,10),!0):!1}s(_o,"_checkMaxSize");function ss(Ue,ht,Zt,Sr,Ln,An){var $i=null;if(ot._appId||($i=Br(An),$i&&$i.appId&&(ot._appId=$i.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Pc(Zt)){ot[zE](ht,Ln);return}if(Ye&&!Ye.isOnline()){if(!ho){var xa=10;lB(ht,xa),Tr(ot[Dc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(ht.length," items."))}return}!ho&&Ax(Ue)?(lB(ht),Tr(ot[Dc](),2,40,". Response code "+Ue+". Will retry to send "+ht[gi]+" items.")):ot[zE](ht,Ln)}else Pc(Zt),Ue===206?($i||($i=Br(An)),$i&&!ho?ot[OJ](ht,$i):ot[zE](ht,Ln)):(S=0,ot[P7](ht,Sr))}s(ss,"_checkResponsStatus");function Pc(Ue){return ae>=10?!1:!ee(Ue)&&Ue!==""&&Ue!==He?(He=Ue,++ae,!0):!1}s(Pc,"_checkAndUpdateEndPointUrl");function od(Ue,ht){if(Le)Le(Ue,!1);else{var Zt=go&&go[D7]([3],!0);return Dr(Zt,Ue,ht)}}s(od,"_doUnloadSend");function Zp(Ue,ht,Zt){var Sr=Ue,Ln=Sr&&Sr.oriPayload;if(Hs)Rn&&Rn(Ln,!0),Tr(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var An=[],$i=0;$i<Ln[gi];$i++){var xa=Ln[$i],t0=[xa],ci=Nn(t0);Zt(ci,ht)?ot._onSuccess(t0,t0[gi]):An[u1](xa)}An[gi]>0&&(Rn&&Rn(An,!0),Tr(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Zp,"_onBeaconRetry");function em(Ue){try{if(Ue&&Ue[gi])return he(Ue[0])}catch{}return null}s(em,"_isStringArr");function T_(Ue,ht){var Zt=null;if(Je(Ue)){for(var Sr=Ue[gi],Ln=0;Ln<Ue[gi];Ln++)Sr+=Ue[Ln].item[gi];var An=go.getSyncFetchPayload();An+Sr<=rXe?Zt=2:qh()?Zt=3:(Zt=1,Tr(ot[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var $i=go&&go[D7]([Zt],!0);return Dr($i,Ue,ht)}return null}s(T_,"_fetchKeepAliveSender");function lB(Ue,ht){if(ht===void 0&&(ht=1),!(!Ue||Ue[gi]===0)){var Zt=ot[Jh];Zt[Z3](Ue),S++;for(var Sr=0,Ln=Ue;Sr<Ln.length;Sr++){var An=Ln[Sr];An.cnt=An.cnt||0,An.cnt++,Zt[VE](An)}VJ(ht),w_()}}s(lB,"_resendPayload");function VJ(Ue){var ht=10,Zt;if(S<=1)Zt=ht;else{var Sr=(Math.pow(2,S)-1)/2,Ln=WA(Math.random()*Sr*ht)+1;Ln=Ue*Ln,Zt=_e(zn(Ln,3600),ht)}var An=wh()+Zt*1e3;P=An}s(VJ,"_setRetryTime");function w_(){if(!Q&&!L){var Ue=P?_e(0,P-wh()):0,ht=_e(dn,Ue);Q=Rh(function(){Q=null,ot[rB](!0,null,1)},ht)}}s(w_,"_setupTimer");function gx(){Q&&Q.cancel(),Q=null,P=null}s(gx,"_clearScheduledTimer");function Ax(Ue){return ee(_l)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:_l[gi]&&_l.indexOf(Ue)>-1}s(Ax,"_isRetriable");function F7(){var Ue="getNotifyMgr";return ot.core[Ue]?ot.core[Ue]():ot.core._notificationManager}s(F7,"_getNotifyMgr");function M7(Ue,ht){var Zt=F7();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,ht)}catch(Sr){Tr(ot[Dc](),1,74,"send request notification failed: "+al(Sr),{exception:Lt(Sr)})}}s(M7,"_notifySendRequest");function Zge(Ue,ht){var Zt=ht.disableInstrumentationKeyValidation,Sr=ee(Zt)?!1:Zt;if(Sr)return!0;var Ln="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",An=new RegExp(Ln);return An.test(Ue)}s(Zge,"_validateInstrumentationKey");function eAe(){ot[nB]=null,ot[Jh]=null,ot._appId=null,ot._sample=null,Ce={},Ye=null,S=0,P=null,L=!1,Q=null,J=null,ae=0,Te=0,Le=null,Fe=null,He=null,lt=null,et=0,At=!1,mr=null,Hn=!1,xi=null,vi=Xh,ho=!1,Lr=null,Rs=Xh,Fr=!1,io=!1,Hs=!1,Et=null,Rn=null,go=null,ze(ot,"_senderConfig",{g:s(function(){return BN({},Jge)},"g")})}s(eAe,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,P,L){var Q;S!==T.iKey&&!ee(S)?Q=qp(qp({},T),{iKey:S}):Q=T;var J=oXe[Q.baseType]||Vge;return J(P,Q,L)},x}(mt),E_="instrumentationKey",L7="connectionString",sB="endpointUrl",aB="userOverrideEndpointUrl",I_,jJ=void 0,sXe=(I_={diagnosticLogInterval:R3(aXe,1e4)},I_[L7]=jJ,I_.endpointUrl=jJ,I_[E_]=jJ,I_.extensionConfig={},I_);function aXe(A){return A&&A>0}s(aXe,"_chkDiagLevel");var lXe=function(){function A(x){var T=new It,S;(ee(x)||ee(x[E_])&&ee(x[L7]))&&Gr("Invalid input configuration"),tc(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),Q(),L.initialize=Q,L.track=P,m3(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function Q(){var J=id(x||{},sXe);S=J.cfg,T.addUnloadHook(Yp(J,function(){var ae=S[L7];if(bt(ae)){var Ce=Qw(function(Fe,He){Zu(ae,function(lt){var et=lt.value,At=S[E_];if(!lt.rejected&&et){S[L7]=et;var Nt=wJ(et);At=Nt.instrumentationkey||At}Fe(At)})}),Te=Qw(function(Fe,He){Zu(ae,function(lt){var et=lt.value,At=S[sB];if(!lt.rejected&&et){var Nt=wJ(et),Vt=Nt.ingestionendpoint;At=Vt?Vt+m_:At}Fe(At)})});S[E_]=Ce,S[sB]=S[aB]||Te}if(he(ae)){var Le=wJ(ae),Ye=Le.ingestionendpoint;S[sB]=S[aB]?S[aB]:Ye+m_,S[E_]=Le.instrumentationkey||S[E_]}S[sB]=S[aB]?S[aB]:S[sB]})),T.initialize(S,[new Xge])}s(Q,"_initialize")});function P(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(P,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=It,t.ApplicationInsights=lXe,t.Sender=Xge,t.SeverityLevel=QJe,t.arrForEach=qr,t.isNullOrUndefined=ee,t.proxyFunctions=m3,t.throwError=Gr})});var o2e=G(gg=>{"use strict";f();Object.defineProperty(gg,"__esModule",{value:!0});gg.bytePairEncode=gg.BinaryMap=gg.binaryMapKey=void 0;var Zat=s((t,e,r)=>{let n=r-e,i=16777215>>>Math.max(0,(3-n)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-n)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");gg.binaryMapKey=Zat;var Ate=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,r=0,n=e.length){let i=n<6+r,o=(0,gg.binaryMapKey)(e,r,n);return i?this.final.get(o):this.nested.get(o)?.get(e,6+r,n)}set(e,r){let n=(0,gg.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(n,r);return}let o=this.nested.get(n);if(o instanceof t)o.set(e.subarray(6),r);else{let a=new t;a.set(e.subarray(6),r),this.nested.set(n,a)}}};gg.BinaryMap=Ate;var hg=new Int32Array(128),wu=new Int32Array(128);function elt(t,e,r){if(r===1)return[e.get(t)];let n=2147483647,i=-1;for(;hg.length<r*2;)wu=new Int32Array(wu.length*2),hg=new Int32Array(hg.length*2);for(let c=0;c<r-1;c++){let u=e.get(t,c,c+2)??2147483647;u<n&&(n=u,i=c),wu[c]=c,hg[c]=u}wu[r-1]=r-1,hg[r-1]=2147483647,wu[r]=r,hg[r]=2147483647;let o=r+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,wu[c],wu[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");n!==2147483647;){hg[wu[i]]=a(i,1),i>0&&(hg[wu[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)wu[c]=wu[c+1];o--,i=-1,n=2147483647;for(let c=0;c<o-1;c++){let u=hg[wu[c]];hg[wu[c]]<n&&(n=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,wu[c],wu[c+1]));return l}s(elt,"bytePairEncode");gg.bytePairEncode=elt});var s2e=G(kM=>{"use strict";f();Object.defineProperty(kM,"__esModule",{value:!0});kM.makeTextEncoder=void 0;var yte=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let r=this.encoder.encode(e);return this.length=r.length,r}},Cte=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},tlt=s(()=>typeof Buffer<"u"?new Cte:new yte,"makeTextEncoder");kM.makeTextEncoder=tlt});var a2e=G(BM=>{"use strict";f();Object.defineProperty(BM,"__esModule",{value:!0});BM.LRUCache=void 0;var xte=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let r=this.nodes.get(e);if(r)return this.moveToHead(r),r.value}set(e,r){let n=this.nodes.get(e);if(n)n.value=r,this.moveToHead(n);else{let i=new vte(e,r);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};BM.LRUCache=xte;var vte=class{static{s(this,"Node")}constructor(e,r){this.key=e,this.value=r}}});var Ete=G(PM=>{"use strict";f();Object.defineProperty(PM,"__esModule",{value:!0});PM.TikTokenizer=void 0;var DM=o2e(),rlt=s2e(),nlt=a2e();function ilt(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return r(i),e}catch(n){throw new Error(`Failed to load from BPE encoder file stream: ${n}`)}function r(n){for(let i of n.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(r,"processBpeRanks")}s(ilt,"loadTikTokenBpe");function olt(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(olt,"escapeRegExp");var bte=class{static{s(this,"TikTokenizer")}constructor(e,r,n,i=8192){this.textEncoder=(0,rlt.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new nlt.LRUCache(i);let o=typeof e=="string"?ilt(e):e;this.init(o,r,n)}init(e,r,n){this.encoder=new DM.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(n,"gu"),this.specialTokensRegex=new RegExp(Array.from(r.keys()).map(i=>olt(i)).join("|")),this.specialTokensEncoder=r,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of r)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,r,n){let i=r,o=null;if(n&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||n&&n.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,r){let n=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,r),a>i&&this.encodeByIndex(e,n,i,a),o){if(i=i+this.encodeSpecialToken(n,o),i>=e.length)break}else break}return n}encodeSpecialToken(e,r){let n=this.specialTokensEncoder?.get(r[0]);return e.push(n),r.index+r[0].length}encodeByIndex(e,r,n,i){let o,a=e.substring(n,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)r.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)r.push(u),this.cache.set(o[0],[u]);else{let d=(0,DM.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)r.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,r,n,i,o,a,l){let c,u=e.substring(n,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,r.push(...p);else{let m=o-a;a+=m,l+=d.length,r.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,r.push(h);else break;else{let g=(0,DM.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)r.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)r.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,r,n){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,n),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,r,a,l);if(a=p,l=m,a>=r)break}if(u!==null){if(a++,a<=r&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=r)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,r,n){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,n),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,DM.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let B of k)i.push(B);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=r)return{tokenIds:i,text:e};let u=a-r,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>r){let m=this.encode(e,n),h=m.slice(m.length-r);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let r=[];for(let n of e){let i=[],o=this.decoder?.get(n);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(n);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}r.push(...i)}return this.textDecoder.decode(new Uint8Array(r))}};PM.TikTokenizer=bte});var A2e=G(Ya=>{"use strict";f();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createTokenizer=Ya.createByEncoderName=Ya.createByModelName=Ya.getRegexByModel=Ya.getRegexByEncoder=Ya.getSpecialTokensByModel=Ya.getSpecialTokensByEncoder=Ya.MODEL_TO_ENCODING=void 0;var slt=Ete(),alt=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);Ya.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var NM="<|endoftext|>",l2e="<|fim_prefix|>",c2e="<|fim_middle|>",u2e="<|fim_suffix|>",d2e="<|endofprompt|>",r8="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",f2e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",llt=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],p2e=llt.join("|");function Ite(t){let e="";if(Ya.MODEL_TO_ENCODING.has(t))e=Ya.MODEL_TO_ENCODING.get(t);else for(let[r,n]of alt)if(t.startsWith(r)){e=n;break}return e}s(Ite,"getEncoderFromModelName");async function clt(t,e){let r=require("fs"),n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${n.status}`);let i=await n.text();r.writeFileSync(e,i)}s(clt,"fetchAndSaveFile");function Tte(t){let e=new Map([[NM,50256]]);switch(t){case"o200k_base":e=new Map([[NM,199999],[d2e,200018]]);break;case"cl100k_base":e=new Map([[NM,100257],[l2e,100258],[c2e,100259],[u2e,100260],[d2e,100276]]);break;case"p50k_edit":e=new Map([[NM,50256],[l2e,50281],[c2e,50282],[u2e,50283]]);break;default:break}return e}s(Tte,"getSpecialTokensByEncoder");Ya.getSpecialTokensByEncoder=Tte;function ult(t){let e=Ite(t);return Tte(e)}s(ult,"getSpecialTokensByModel");Ya.getSpecialTokensByModel=ult;function m2e(t){switch(t){case"o200k_base":return p2e;case"cl100k_base":return f2e;default:break}return r8}s(m2e,"getRegexByEncoder");Ya.getRegexByEncoder=m2e;function dlt(t){let e=Ite(t);return m2e(e)}s(dlt,"getRegexByModel");Ya.getRegexByModel=dlt;async function flt(t,e=null){return h2e(Ite(t),e)}s(flt,"createByModelName");Ya.createByModelName=flt;async function h2e(t,e=null){let r,n,i=Tte(t);switch(t){case"o200k_base":r=p2e,n="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":r=f2e,n="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":r=r8,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":r=r8,n="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":r=r8,n="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":r=r8,n="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(n),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${n}`),await clt(n,u),console.log(`Saved file to ${u}`)),g2e(u,i,r)}s(h2e,"createByEncoderName");Ya.createByEncoderName=h2e;function g2e(t,e,r,n=8192){return new slt.TikTokenizer(t,e,r,n)}s(g2e,"createTokenizer");Ya.createTokenizer=g2e});var y2e=G(Ka=>{"use strict";f();Object.defineProperty(Ka,"__esModule",{value:!0});Ka.createTokenizer=Ka.createByEncoderName=Ka.createByModelName=Ka.getSpecialTokensByModel=Ka.getSpecialTokensByEncoder=Ka.getRegexByModel=Ka.getRegexByEncoder=Ka.MODEL_TO_ENCODING=Ka.TikTokenizer=void 0;var plt=Ete();Object.defineProperty(Ka,"TikTokenizer",{enumerable:!0,get:s(function(){return plt.TikTokenizer},"get")});var $x=A2e();Object.defineProperty(Ka,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return $x.MODEL_TO_ENCODING},"get")});Object.defineProperty(Ka,"getRegexByEncoder",{enumerable:!0,get:s(function(){return $x.getRegexByEncoder},"get")});Object.defineProperty(Ka,"getRegexByModel",{enumerable:!0,get:s(function(){return $x.getRegexByModel},"get")});Object.defineProperty(Ka,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return $x.getSpecialTokensByEncoder},"get")});Object.defineProperty(Ka,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return $x.getSpecialTokensByModel},"get")});Object.defineProperty(Ka,"createByModelName",{enumerable:!0,get:s(function(){return $x.createByModelName},"get")});Object.defineProperty(Ka,"createByEncoderName",{enumerable:!0,get:s(function(){return $x.createByEncoderName},"get")});Object.defineProperty(Ka,"createTokenizer",{enumerable:!0,get:s(function(){return $x.createTokenizer},"get")})});var Pte=G((bvr,U2e)=>{"use strict";f();U2e.exports=s(function(e,r){r===!0&&(r=0);var n="";if(typeof e=="string")try{n=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(n=e.protocol);var i=n.split(/\:|\+/).filter(Boolean);return typeof r=="number"?i[r]:i},"protocols")});var W2e=G((Tvr,q2e)=>{"use strict";f();var $ut=Pte();function zut(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var r=new URL(t);e.protocols=$ut(r),e.protocol=e.protocols[0],e.port=r.port,e.resource=r.hostname,e.host=r.host,e.user=r.username||"",e.password=r.password||"",e.pathname=r.pathname,e.hash=r.hash.slice(1),e.search=r.search.slice(1),e.href=r.href,e.query=Object.fromEntries(r.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(zut,"parsePath");q2e.exports=zut});var z2e=G((Svr,$2e)=>{"use strict";f();var Yut=W2e();function Kut(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Kut,"_interopDefaultLegacy");var Jut=Kut(Yut);function Xut(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=s(function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:s(function(){return t[n]},"get")})}),r}s(Xut,"getAugmentedNamespace");var H2e={},Zut="text/plain",edt="us-ascii",G2e=s((t,e)=>e.some(r=>r instanceof RegExp?r.test(t):r===t),"testParameter"),tdt=s((t,{stripHash:e})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:n,data:i,hash:o}=r.groups,a=n.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===edt)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==Zut)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function rdt(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return tdt(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];G2e(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])G2e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(rdt,"normalizeUrl");var ndt=Object.freeze({__proto__:null,default:rdt}),idt=Xut(ndt);Object.defineProperty(H2e,"__esModule",{value:!0});var odt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sdt=idt,adt=j2e(sdt),ldt=Jut.default,cdt=j2e(ldt);function j2e(t){return t&&t.__esModule?t:{default:t}}s(j2e,"_interopRequireDefault");var V2e=s(function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),r&&((typeof r>"u"?"undefined":odt(r))!=="object"&&(r={stripHash:!1}),e=(0,adt.default)(e,r));var o=(0,cdt.default)(e);if(o.parse_failed){var a=o.href.match(n);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");V2e.MAX_INPUT_LENGTH=2048;var udt=H2e.default=V2e;$2e.exports=udt});var J2e=G((Bvr,K2e)=>{"use strict";f();var ddt=Pte();function Y2e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=ddt(t);if(t=t.substring(t.indexOf("://")+3),Y2e(e))return!0;var r=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(r)&&t.indexOf("@")<t.indexOf(":")}s(Y2e,"isSsh");K2e.exports=Y2e});var eTe=G((Nvr,Z2e)=>{"use strict";f();var fdt=z2e(),X2e=J2e();function pdt(t){let e=fdt(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),X2e(e.protocols)||e.protocols.length===0&&X2e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(pdt,"gitUp");Z2e.exports=pdt});var rTe=G((Mvr,tTe)=>{"use strict";f();var mdt=eTe();function Nte(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var r=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;r.test(t)&&(t="https://github.com/"+t);var n=mdt(t),i=n.resource.split("."),o=null;switch(n.toString=function(E){return Nte.stringify(this,E)},n.source=i.length>2?i.slice(1-i.length).join("."):n.source=n.resource,n.git_suffix=/\.git$/.test(n.pathname),n.name=decodeURIComponent((n.pathname||n.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),n.owner=decodeURIComponent(n.user),n.source){case"git.cloudforge.com":n.owner=n.user,n.organization=i[0],n.source="cloudforge.com";break;case"visualstudio.com":if(n.resource==="vs-ssh.visualstudio.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3],n.full_name=o[2]+"/"+o[3]);break}else{o=n.name.split("/"),o.length===2?(n.owner=o[1],n.name=o[1],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name);break}case"dev.azure.com":case"azure.com":if(n.resource==="ssh.dev.azure.com"){o=n.name.split("/"),o.length===4&&(n.organization=o[1],n.owner=o[2],n.name=o[3]);break}else{o=n.name.split("/"),o.length===5?(n.organization=o[0],n.owner=o[1],n.name=o[4],n.full_name="_git/"+n.name):o.length===3?(n.name=o[2],o[0]==="DefaultCollection"?(n.owner=o[2],n.organization=o[0],n.full_name=n.organization+"/_git/"+n.name):(n.owner=o[0],n.full_name=n.owner+"/_git/"+n.name)):o.length===4&&(n.organization=o[0],n.owner=o[1],n.name=o[3],n.full_name=n.organization+"/"+n.owner+"/_git/"+n.name),n.query&&n.query.path&&(n.filepath=n.query.path.replace(/^\/+/g,"")),n.query&&n.query.version&&(n.ref=n.query.version.replace(/^GB/,""));break}default:o=n.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,n.owner=o.slice(0,a).join("/"),n.name=o[a],d&&p<0&&(n.commit=o[a+2])}n.ref="",n.filepathtype="",n.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(n.filepathtype=o[y+1],n.ref=o[y+2],o.length>y+3&&(n.filepath=o.slice(y+3).join("/"))),n.organization=n.owner;break}n.full_name||(n.full_name=n.owner,n.name&&(n.full_name&&(n.full_name+="/"),n.full_name+=n.name)),n.owner.startsWith("scm/")&&(n.source="bitbucket-server",n.owner=n.owner.replace("scm/",""),n.organization=n.owner,n.full_name=n.owner+"/"+n.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(n.pathname);return b!=null&&(n.source="bitbucket-server",b[1]==="users"?n.owner="~"+b[2]:n.owner=b[2],n.organization=n.owner,n.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(n.filepathtype=o[1],o.length>2&&(n.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(n.commit=o[2])),n.full_name=n.owner+"/"+n.name,n.query.at?n.ref=n.query.at:n.ref=""),e.length!==0&&n.ref&&(n.ref=Adt(n.href,e)||n.ref,n.filepath=n.href.split(n.ref+"/")[1]),n}s(Nte,"gitUrlParse");Nte.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var r=t.port?":"+t.port:"",n=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return r?"ssh://"+n+"@"+t.resource+r+"/"+t.full_name+i:n+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+n+"@"+t.resource+r+"/"+t.full_name+i;case"http":case"https":var o=t.token?hdt(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+r+"/"+gdt(t)+i;default:return t.href}};function hdt(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(hdt,"buildToken");function gdt(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(r){return encodeURIComponent(r)}).join("/");return e}}s(gdt,"buildPath");function Adt(t,e){var r="";return e.forEach(function(n){t.includes(n)&&n.length>r.length&&(r=n)}),r}s(Adt,"findLongestMatchingSubstring");tTe.exports=Nte});var fTe=G((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,r)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(n,i){n?r(n):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,r)=>{var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=()=>{n.status==200||n.status==0&&n.response?e(n.response):r()},n.onerror=r,n.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,r){for(var n=e+r,i=e;t[i]&&!(i>=n);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,r,n){if(!(n>0))return 0;for(var i=r,o=r+n-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(r>=o)break;e[r++]=l}else if(l<=2047){if(r+1>=o)break;e[r++]=192|l>>6,e[r++]=128|63&l}else if(l<=65535){if(r+2>=o)break;e[r++]=224|l>>12,e[r++]=128|l>>6&63,e[r++]=128|63&l}else{if(r+3>=o)break;e[r++]=240|l>>18,e[r++]=128|l>>12&63,e[r++]=128|l>>6&63,e[r++]=128|63&l}}return e[r]=0,r-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,r){return stringToUTF8Array(t,HEAPU8,e,r)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(r){t(new Uint8Array(r))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function r(i){e(i.instance,i.module)}s(r,"r");function n(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(n,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?n(r):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(r,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),n(r)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var r=GOT[e];return r||(r=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(r.required=!0),r},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,r=0;function n(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(n,"_");function i(){var b=n();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),r=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=n();r=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();for(var d=n(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<r;){var h=t[e++],g=n();if(h===1)u.memorySize=n(),u.memoryAlign=n(),u.tableSize=n(),u.tableAlign=n();else if(h===2)for(d=n(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=n();y--;){var v=i();256&n()&&u.tlsExports.add(v)}else if(h===4)for(y=n();y--;)i(),v=i(),(3&n())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var r in t)if(t.hasOwnProperty(r)){asmLibraryArg.hasOwnProperty(r)||(asmLibraryArg[r]=t[r]);var n=asmjsMangle(r);Module.hasOwnProperty(n)||(Module[n]=t[r]),r=="__main_argc_argv"&&(Module._main=t[r])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,r){var n=Module["dynCall_"+t];return r&&r.length?n.apply(null,[e].concat(r)):n.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,r){return t.includes("j")?dynCallLegacy(t,e,r):getWasmTableEntry(e).apply(null,r)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(r){if(stackRestore(e),r!==r+0)throw r;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,r=e+t+15&-16;return ___heap_base=r,GOT.__heap_base.value=r,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},r={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},n=1;n<t.length;++n)r.parameters.push(e[t[n]]),t[n]==="j"&&r.parameters.push("i32");return r}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var r=t.slice(0,1),n=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(n.length,e);for(var o=0;o<n.length;++o)e.push(i[n[o]]);r=="v"?e.push(0):e.push(1,i[r])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var r=[1];generateFuncType(e,r);var n=[0,97,115,109,1,0,0,0,1];uleb128Encode(r.length,n),n.push.apply(n,r),n.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(n));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var r=t;r<t+e;r++){var n=getWasmTableEntry(r);n&&functionsInTableMap.set(n,r)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var r=getEmptyTableSlot();try{setWasmTableEntry(r,t)}catch(n){if(!(n instanceof TypeError))throw n;setWasmTableEntry(r,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,r),r}s(addFunction,"addFunction");function updateGOT(t,e){for(var r in t)if(!isInternalSym(r)){var n=t[r];r.startsWith("orig$")&&(r=r.split("$")[1],e=!0),GOT[r]||(GOT[r]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[r].value==0)&&(typeof n=="function"?GOT[r].value=addFunction(n):typeof n=="number"?GOT[r].value=n:err("unhandled export type for `"+r+"`: "+typeof n))}}s(updateGOT,"updateGOT");function relocateExports(t,e,r){var n={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),n[i]=o}return updateGOT(n,r),n}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var r;return e&&(r=asmLibraryArg["orig$"+t]),r||(r=asmLibraryArg[t])&&r.stub&&(r=void 0),r||(r=Module[asmjsMangle(t)]),!r&&t.startsWith("invoke_")&&(r=createInvokeFunction(t.split("_")[1])),r}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var r;return e in t||(t[e]=function(){return r||(r=resolveSymbol(e)),r.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,r){e=e||{global:!0,nodelete:!0};var n=LDSO.loadedLibsByName[t];if(n)return e.global&&!n.global&&(n.global=!0,n.module!=="loading"&&mergeLibSymbols(n.module,t)),e.nodelete&&n.refcount!==1/0&&(n.refcount=1/0),n.refcount++,r&&(LDSO.loadedLibsByHandle[r]=n),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,r)}):loadWebAssemblyModule(i(t),e,r)}s(o,"s");function a(l){n.global&&mergeLibSymbols(l,t),n.module=l}return s(a,"a"),n={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=n,r&&(LDSO.loadedLibsByHandle[r]=n),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,r="i8"){switch(r.endsWith("*")&&(r="*"),r){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+r)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,r){HEAPU8.copyWithin(t,e,e+r)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var r=getHeapMax();if(t>r)return!1;for(var n=1;n<=4;n*=2){var i=e*(1+.2/n);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(r,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,r){if(PATH.isAbs(e))return e;var n;if(t===-100?n=FS.cwd():n=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!r)throw new FS.ErrnoError(44);return n}return PATH.join2(n,e)},"calculateAt"),doStat:s(function(t,e,r){try{var n=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[r>>2]=n.dev,HEAP32[r+8>>2]=n.ino,HEAP32[r+12>>2]=n.mode,HEAPU32[r+16>>2]=n.nlink,HEAP32[r+20>>2]=n.uid,HEAP32[r+24>>2]=n.gid,HEAP32[r+28>>2]=n.rdev,tempI64=[n.size>>>0,(tempDouble=n.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+40>>2]=tempI64[0],HEAP32[r+44>>2]=tempI64[1],HEAP32[r+48>>2]=4096,HEAP32[r+52>>2]=n.blocks;var i=n.atime.getTime(),o=n.mtime.getTime(),a=n.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+56>>2]=tempI64[0],HEAP32[r+60>>2]=tempI64[1],HEAPU32[r+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+72>>2]=tempI64[0],HEAP32[r+76>>2]=tempI64[1],HEAPU32[r+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+88>>2]=tempI64[0],HEAP32[r+92>>2]=tempI64[1],HEAPU32[r+96>>2]=a%1e3*1e3,tempI64=[n.ino>>>0,(tempDouble=n.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[r+104>>2]=tempI64[0],HEAP32[r+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,r,n,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&n)return 0;var o=HEAPU8.slice(t,t+r);FS.msync(e,o,i,r,n)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(r){if(typeof FS>"u"||!(r instanceof FS.ErrnoError))throw r;return r.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,r,n,i){try{var o=convertI32PairToI53Checked(e,r);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,n),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&n===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,r,n){for(var i=0,o=0;o<r;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,n);if(c<0)return-1;i+=c,n!==void 0&&(n+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,r,n){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,r);return HEAPU32[n>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let r=UTF8ToString(e);currentLogCallback(r,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,r,n,i){var o=currentParseCallback(e,{row:r,column:n});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,r=stackAlloc(e);return stringToUTF8Array(t,HEAP8,r,e),r}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,r){if(r===void 0&&(r=2147483647),r<2)return 0;for(var n=e,i=(r-=2)<2*t.length?r/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-n}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var r=HEAPU8[t++>>0];if(!r)return e;e+=String.fromCharCode(r)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var r=t.length,n=stackAlloc(4*(r+1)),i=n>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(r,n);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let r;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{r=e[0];let n=C._ts_language_version(r);if(n<MIN_COMPATIBLE_VERSION||VERSION<n)throw new Error(`Incompatible language version ${n}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else r=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],r),this}getLanguage(){return this.language}parse(e,r,n){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(n&&n.includedRanges){i=n.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,n.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],r?r[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,r,n,i){assertInternal(e),this[0]=r,this.language=n,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let r=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(r);if(r>0){let o=n;for(let a=0;a<r;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(n)}return i}}class Node{static{s(this,"Node")}constructor(e,r){assertInternal(e),this.tree=r}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let r=this.tree.language.fields.indexOf(e);if(r!==-1)return this.childForFieldId(r)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let n=r;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,n),n+=SIZE_OF_NODE;C._free(r)}}return this._namedChildren}descendantsOfType(e,r,n){Array.isArray(e)||(e=[e]),r||(r=ZERO_POINT),n||(n=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,r.row,r.column,n.row,n.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,r=e){if(typeof e!="number"||typeof r!="number")throw new Error("Arguments must be numbers");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(n,e,"i32"),setValue(n+SIZE_OF_INT,r,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,r=e){if(!isPoint(e)||!isPoint(r))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let n=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(n,e),marshalPoint(n+SIZE_OF_POINT,r),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),r=AsciiToString(e);return C._free(e),r}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,r){assertInternal(e),this.tree=r,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),r=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,r)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,r){assertInternal(e),this[0]=r,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let n=0,i=this.types.length;n<i;n++)C._ts_language_symbol_type(this[0],n)<2&&(this.types[n]=UTF8ToString(C._ts_language_symbol_name(this[0],n)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let n=0,i=this.fields.length;n<i;n++){let o=C._ts_language_field_name_for_id(this[0],n);this.fields[n]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let r=this.fields.indexOf(e);return r!==-1?r:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,r){let n=lengthBytesUTF8(e),i=C._malloc(n+1);stringToUTF8(e,i,n+1);let o=C._ts_language_symbol_for_name(this[0],i,n,r);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let r=C._ts_language_symbol_name(this[0],e);return r?UTF8ToString(r):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let r=lengthBytesUTF8(e),n=C._malloc(r+1);stringToUTF8(e,n,r+1);let i=C._ts_query_new(this[0],n,r,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(n,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(n),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let B=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,B===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(B===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let q=E[0].value,te=!0;switch(q){case"not-eq?":te=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let O=E[1].name,le=E[2].name;g[y].push(function(ie){let j,W;for(let Y of ie)Y.name===O&&(j=Y.node),Y.name===le&&(W=Y.node);return j===void 0||W===void 0||j.text===W.text===te})}else{let O=E[1].name,le=E[2].value;g[y].push(function(ie){for(let j of ie)if(j.name===O)return j.node.text===le===te;return!0})}break;case"not-match?":te=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let me=E[1].name,oe=new RegExp(E[2].value);g[y].push(function(O){for(let le of O)if(le.name===me)return oe.test(le.node.text)===te;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(O=>O.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${q}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(O=>O.type!=="string"))throw new Error(`Arguments to \`#${q}\` predicate must be a strings.".`);let H=q==="is?"?p:m;H[y]||(H[y]={}),H[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:q,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(n),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let r;if(e instanceof Uint8Array)r=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");r=Promise.resolve(o.readFileSync(i))}else r=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let n=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return r.then(i=>n(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,r,n,i,o,a,l,c){assertInternal(e),this[0]=r,this.captureNames=n,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,r,n,i){r||(r=ZERO_POINT),n||(n=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],r.row,r.column,n.row,n.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,r){let n=r-e,i=t.textCallback(e,null,r);for(e+=i.length;e<r;){let o=t.textCallback(e,null,r);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>r&&(i=i.slice(0,n)),i}s(getText,"getText");function unmarshalCaptures(t,e,r,n){for(let i=0,o=n.length;i<o;i++){let a=getValue(r,"i32"),l=unmarshalNode(e,r+=SIZE_OF_INT);r+=SIZE_OF_NODE,n[i]={name:t.captureNames[a],node:l}}return r}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let r=getValue(e,"i32");if(r===0)return null;let n=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=r,l.startIndex=n,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Ire=G((JTr,qTe)=>{f();var Ere=require("fs"),BQ=require("path"),L8=BQ.join,mft=BQ.dirname,OTe=Ere.accessSync&&function(t){try{Ere.accessSync(t)}catch{return!1}return!0}||Ere.existsSync||BQ.existsSync,UTe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function hft(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(UTe).map(function(c){c in t||(t[c]=UTe[c])}),t.module_root||(t.module_root=gft(__filename)),BQ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,r=[],n=0,i=t.try.length,o,a,l;n<i;n++){o=L8.apply(null,t.try[n].map(function(c){return t[c]||c})),r.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+r.map(function(c){return t.arrow+c}).join(`
`)),l.tries=r,l}s(hft,"bindings");qTe.exports=hft;function gft(t){for(var e=mft(t),r;;){if(e==="."&&(e=process.cwd()),OTe(L8(e,"dist")))return L8(e,"dist");if(OTe(L8(e,"compiled")))return e;if(r===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');r=e,e=L8(e,"..")}}s(gft,"getRoot")});var GTe=G((ewr,WTe)=>{f();WTe.exports=Ire()("node_sqlite3.node")});var VTe=G(jTe=>{f();var Aft=require("util");function yft(t,e,r){let n=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return Aft.inspect(l,!1,0)}).join(", ")+")";typeof r>"u"&&(r=-1),r<0&&(r+=arguments.length);let a=arguments[r];return typeof arguments[r]=="function"&&(arguments[r]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=HTe(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+HTe(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),n.apply(this,arguments)}}s(yft,"extendTrace");jTe.extendTrace=yft;function HTe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(HTe,"filter")});var KTe=G((zTe,YTe)=>{f();var Cft=require("path"),Gf=GTe(),jS=require("events").EventEmitter;YTe.exports=zTe=Gf;function VS(t){return function(e){let r,n=Array.prototype.slice.call(arguments,1);if(typeof n[n.length-1]=="function"){let o=n[n.length-1];r=s(function(a){a&&o(a)},"errBack")}let i=new DQ(this,e,r);return t.call(this,i,n)}}s(VS,"normalizeMethod");function wre(t,e){for(let r in e.prototype)t.prototype[r]=e.prototype[r]}s(wre,"inherits");Gf.cached={Database:s(function(t,e,r){if(t===""||t===":memory:")return new Ru(t,e,r);let n;if(t=Cft.resolve(t),!Gf.cached.objects[t])n=Gf.cached.objects[t]=new Ru(t,e,r);else{n=Gf.cached.objects[t];let o=typeof e=="number"?r:e;if(typeof o=="function"){let a=function(){o.call(n,null)};var i=a;s(a,"cb"),n.open?process.nextTick(a):n.once("open",a)}}return n},"Database"),objects:{}};var Ru=Gf.Database,DQ=Gf.Statement,Tre=Gf.Backup;wre(Ru,jS);wre(DQ,jS);wre(Tre,jS);Ru.prototype.prepare=VS(function(t,e){return e.length?t.bind.apply(t,e):t});Ru.prototype.run=VS(function(t,e){return t.run.apply(t,e).finalize(),this});Ru.prototype.get=VS(function(t,e){return t.get.apply(t,e).finalize(),this});Ru.prototype.all=VS(function(t,e){return t.all.apply(t,e).finalize(),this});Ru.prototype.each=VS(function(t,e){return t.each.apply(t,e).finalize(),this});Ru.prototype.map=VS(function(t,e){return t.map.apply(t,e).finalize(),this});Ru.prototype.backup=function(){let t;return arguments.length<=2?t=new Tre(this,arguments[0],"main","main",!0,arguments[1]):t=new Tre(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Gf.BUSY,Gf.LOCKED],t};DQ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(r,n){if(r)return e(r);let i={};if(n.length){let o=Object.keys(n[0]),a=o[0];if(o.length>2)for(let l=0;l<n.length;l++)i[n[l][a]]=n[l];else{let l=o[1];for(let c=0;c<n.length;c++)i[n[c][a]]=n[c][l]}}e(r,i)}),this.all.apply(this,t)};var $Te=!1,_re=["trace","profile","change"];Ru.prototype.addListener=Ru.prototype.on=function(t){let e=jS.prototype.addListener.apply(this,arguments);return _re.indexOf(t)>=0&&this.configure(t,!0),e};Ru.prototype.removeListener=function(t){let e=jS.prototype.removeListener.apply(this,arguments);return _re.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ru.prototype.removeAllListeners=function(t){let e=jS.prototype.removeAllListeners.apply(this,arguments);return _re.indexOf(t)>=0&&this.configure(t,!1),e};Gf.verbose=function(){if(!$Te){let t=VTe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ru.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(DQ.prototype,e)}),$Te=!0}return Gf}});var jQ=G(Xa=>{"use strict";f();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.thenable=Xa.typedArray=Xa.stringArray=Xa.array=Xa.func=Xa.error=Xa.number=Xa.string=Xa.boolean=void 0;function vft(t){return t===!0||t===!1}s(vft,"boolean");Xa.boolean=vft;function twe(t){return typeof t=="string"||t instanceof String}s(twe,"string");Xa.string=twe;function bft(t){return typeof t=="number"||t instanceof Number}s(bft,"number");Xa.number=bft;function Eft(t){return t instanceof Error}s(Eft,"error");Xa.error=Eft;function rwe(t){return typeof t=="function"}s(rwe,"func");Xa.func=rwe;function nwe(t){return Array.isArray(t)}s(nwe,"array");Xa.array=nwe;function Ift(t){return nwe(t)&&t.every(e=>twe(e))}s(Ift,"stringArray");Xa.stringArray=Ift;function Tft(t,e){return Array.isArray(t)&&t.every(e)}s(Tft,"typedArray");Xa.typedArray=Tft;function wft(t){return t&&rwe(t.then)}s(wft,"thenable");Xa.thenable=wft});var kre=G(Hf=>{"use strict";f();Object.defineProperty(Hf,"__esModule",{value:!0});Hf.generateUuid=Hf.parse=Hf.isUUID=Hf.v4=Hf.empty=void 0;var Q8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},O8=class t extends Q8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};O8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];O8._timeHighBits=["8","9","a","b"];Hf.empty=new Q8("00000000-0000-0000-0000-000000000000");function iwe(){return new O8}s(iwe,"v4");Hf.v4=iwe;var _ft=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function owe(t){return _ft.test(t)}s(owe,"isUUID");Hf.isUUID=owe;function Sft(t){if(!owe(t))throw new Error("invalid uuid");return new Q8(t)}s(Sft,"parse");Hf.parse=Sft;function Rft(){return iwe().asHex()}s(Rft,"generateUuid");Hf.generateUuid=Rft});var swe=G(rv=>{"use strict";f();Object.defineProperty(rv,"__esModule",{value:!0});rv.attachPartialResult=rv.ProgressFeature=rv.attachWorkDone=void 0;var tv=ii(),kft=kre(),QI=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r,t.Instances.set(this._token,this)}begin(e,r,n,i){let o={kind:"begin",title:e,percentage:r,message:n,cancellable:i};this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,o)}report(e,r){let n={kind:"report"};typeof e=="number"?(n.percentage=e,r!==void 0&&(n.message=r)):n.message=e,this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,n)}done(){t.Instances.delete(this._token),this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,{kind:"end"})}};QI.Instances=new Map;var VQ=class extends QI{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,r){super(e,r),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},U8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},$Q=class extends U8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function Bft(t,e){if(e===void 0||e.workDoneToken===void 0)return new U8;let r=e.workDoneToken;return delete e.workDoneToken,new QI(t,r)}s(Bft,"attachWorkDone");rv.attachWorkDone=Bft;var Dft=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(tv.WorkDoneProgressCancelNotification.type,r=>{let n=QI.Instances.get(r.token);(n instanceof VQ||n instanceof $Q)&&n.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new U8:new QI(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,kft.generateUuid)();return this.connection.sendRequest(tv.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new VQ(this.connection,e))}else return Promise.resolve(new $Q)}},"ProgressFeature");rv.ProgressFeature=Dft;var Bre;(function(t){t.type=new tv.ProgressType})(Bre||(Bre={}));var Dre=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,r){this._connection=e,this._token=r}report(e){this._connection.sendProgress(Bre.type,this._token,e)}};function Pft(t,e){if(e===void 0||e.partialResultToken===void 0)return;let r=e.partialResultToken;return delete e.partialResultToken,new Dre(t,r)}s(Pft,"attachPartialResult");rv.attachPartialResult=Pft});var awe=G(zQ=>{"use strict";f();Object.defineProperty(zQ,"__esModule",{value:!0});zQ.ConfigurationFeature=void 0;var Nft=ii(),Lft=jQ(),Fft=s(t=>class extends t{getConfiguration(e){return e?Lft.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let r={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(Nft.ConfigurationRequest.type,r).then(n=>Array.isArray(n)?Array.isArray(e)?n:n[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");zQ.ConfigurationFeature=Fft});var lwe=G(KQ=>{"use strict";f();Object.defineProperty(KQ,"__esModule",{value:!0});KQ.WorkspaceFoldersFeature=void 0;var YQ=ii(),Mft=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let r=e.workspace;r&&r.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new YQ.Emitter,this.connection.onNotification(YQ.DidChangeWorkspaceFoldersNotification.type,n=>{this._onDidChangeWorkspaceFolders.fire(n.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let r=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=r===!0||typeof r=="string"}getWorkspaceFolders(){return this.connection.sendRequest(YQ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(YQ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");KQ.WorkspaceFoldersFeature=Mft});var cwe=G(JQ=>{"use strict";f();Object.defineProperty(JQ,"__esModule",{value:!0});JQ.CallHierarchyFeature=void 0;var Pre=ii(),Qft=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Pre.CallHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let r=Pre.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let r=Pre.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onOutgoingCalls")}}},"CallHierarchyFeature");JQ.CallHierarchyFeature=Qft});var Lre=G(nv=>{"use strict";f();Object.defineProperty(nv,"__esModule",{value:!0});nv.SemanticTokensBuilder=nv.SemanticTokensDiff=nv.SemanticTokensFeature=void 0;var XQ=ii(),Oft=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(XQ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let r=XQ.SemanticTokensRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on"),onDelta:s(e=>{let r=XQ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onDelta"),onRange:s(e=>{let r=XQ.SemanticTokensRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onRange")}}},"SemanticTokensFeature");nv.SemanticTokensFeature=Oft;var ZQ=class{static{s(this,"SemanticTokensDiff")}constructor(e,r){this.originalSequence=e,this.modifiedSequence=r}computeDiff(){let e=this.originalSequence.length,r=this.modifiedSequence.length,n=0;for(;n<r&&n<e&&this.originalSequence[n]===this.modifiedSequence[n];)n++;if(n<r&&n<e){let i=e-1,o=r-1;for(;i>=n&&o>=n&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<n||o<n)&&(i++,o++);let a=i-n+1,l=this.modifiedSequence.slice(n,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:n,deleteCount:a-1}]:[{start:n,deleteCount:a,data:l}]}else return n<r?[{start:n,deleteCount:0,data:this.modifiedSequence.slice(n)}]:n<e?[{start:n,deleteCount:e-n}]:[]}};nv.SemanticTokensDiff=ZQ;var Nre=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,r,n,i,o){let a=e,l=r;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=n,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=r}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new ZQ(this._prevData,this._data).computeDiff()}:this.build()}};nv.SemanticTokensBuilder=Nre});var uwe=G(eO=>{"use strict";f();Object.defineProperty(eO,"__esModule",{value:!0});eO.ShowDocumentFeature=void 0;var Uft=ii(),qft=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(Uft.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");eO.ShowDocumentFeature=qft});var dwe=G(tO=>{"use strict";f();Object.defineProperty(tO,"__esModule",{value:!0});tO.FileOperationsFeature=void 0;var zS=ii(),Wft=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(zS.DidCreateFilesNotification.type,r=>{e(r)})}onDidRenameFiles(e){return this.connection.onNotification(zS.DidRenameFilesNotification.type,r=>{e(r)})}onDidDeleteFiles(e){return this.connection.onNotification(zS.DidDeleteFilesNotification.type,r=>{e(r)})}onWillCreateFiles(e){return this.connection.onRequest(zS.WillCreateFilesRequest.type,(r,n)=>e(r,n))}onWillRenameFiles(e){return this.connection.onRequest(zS.WillRenameFilesRequest.type,(r,n)=>e(r,n))}onWillDeleteFiles(e){return this.connection.onRequest(zS.WillDeleteFilesRequest.type,(r,n)=>e(r,n))}},"FileOperationsFeature");tO.FileOperationsFeature=Wft});var fwe=G(rO=>{"use strict";f();Object.defineProperty(rO,"__esModule",{value:!0});rO.LinkedEditingRangeFeature=void 0;var Gft=ii(),Hft=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(Gft.LinkedEditingRangeRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0))}},"LinkedEditingRangeFeature");rO.LinkedEditingRangeFeature=Hft});var pwe=G(nO=>{"use strict";f();Object.defineProperty(nO,"__esModule",{value:!0});nO.TypeHierarchyFeature=void 0;var Fre=ii(),jft=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Fre.TypeHierarchyPrepareRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),void 0)),"onPrepare"),onSupertypes:s(e=>{let r=Fre.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSupertypes"),onSubtypes:s(e=>{let r=Fre.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"onSubtypes")}}},"TypeHierarchyFeature");nO.TypeHierarchyFeature=jft});var hwe=G(iO=>{"use strict";f();Object.defineProperty(iO,"__esModule",{value:!0});iO.InlineValueFeature=void 0;var mwe=ii(),Vft=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(mwe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(mwe.InlineValueRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineValueFeature");iO.InlineValueFeature=Vft});var Awe=G(oO=>{"use strict";f();Object.defineProperty(oO,"__esModule",{value:!0});oO.FoldingRangeFeature=void 0;var gwe=ii(),$ft=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(gwe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let r=gwe.FoldingRangeRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"FoldingRangeFeature");oO.FoldingRangeFeature=$ft});var ywe=G(sO=>{"use strict";f();Object.defineProperty(sO,"__esModule",{value:!0});sO.InlayHintFeature=void 0;var Mre=ii(),zft=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Mre.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Mre.InlayHintRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on"),resolve:s(e=>this.connection.onRequest(Mre.InlayHintResolveRequest.type,(r,n)=>e(r,n)),"resolve")}}},"InlayHintFeature");sO.InlayHintFeature=zft});var Cwe=G(aO=>{"use strict";f();Object.defineProperty(aO,"__esModule",{value:!0});aO.DiagnosticFeature=void 0;var q8=ii(),Yft=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(q8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(q8.DocumentDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(q8.DocumentDiagnosticRequest.partialResult,r))),"on"),onWorkspace:s(e=>this.connection.onRequest(q8.WorkspaceDiagnosticRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(q8.WorkspaceDiagnosticRequest.partialResult,r))),"onWorkspace")}}},"DiagnosticFeature");aO.DiagnosticFeature=Yft});var Ore=G(lO=>{"use strict";f();Object.defineProperty(lO,"__esModule",{value:!0});lO.TextDocuments=void 0;var OI=ii(),Qre=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new OI.Emitter,this._onDidOpen=new OI.Emitter,this._onDidClose=new OI.Emitter,this._onDidSave=new OI.Emitter,this._onWillSave=new OI.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=OI.TextDocumentSyncKind.Incremental;let r=[];return r.push(e.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),r.push(e.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),r.push(e.onDidCloseTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(n.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),r.push(e.onWillSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:n.reason}))})),r.push(e.onWillSaveTextDocumentWaitUntil((n,i)=>{let o=this._syncedDocuments.get(n.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:n.reason}),i):[]})),r.push(e.onDidSaveTextDocument(n=>{let i=this._syncedDocuments.get(n.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),OI.Disposable.create(()=>{r.forEach(n=>n.dispose())})}};lO.TextDocuments=Qre});var qre=G(YS=>{"use strict";f();Object.defineProperty(YS,"__esModule",{value:!0});YS.NotebookDocuments=YS.NotebookSyncFeature=void 0;var jf=ii(),xwe=Ore(),Kft=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(jf.DidOpenNotebookDocumentNotification.type,r=>{e(r)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(jf.DidChangeNotebookDocumentNotification.type,r=>{e(r)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(jf.DidSaveNotebookDocumentNotification.type,r=>{e(r)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(jf.DidCloseNotebookDocumentNotification.type,r=>{e(r)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");YS.NotebookSyncFeature=Kft;var cO=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,jf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,jf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,jf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};cO.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Ure=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof xwe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new xwe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new jf.Emitter,this._onDidChange=new jf.Emitter,this._onDidSave=new jf.Emitter,this._onDidClose=new jf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let r=this.notebookCellMap.get(e);return r&&r[0]}findNotebookDocumentForCell(e){let r=typeof e=="string"?e:e.document,n=this.notebookCellMap.get(r);return n&&n[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let r=new cO,n=[];return n.push(this.cellTextDocuments.listen(r)),n.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)r.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),n.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)r.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)r.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let B=o.cells.splice(_,1,k);if(p.push({old:B[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)r.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),n.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),n.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)r.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),jf.Disposable.create(()=>{n.forEach(i=>i.dispose())})}updateCellMap(e){for(let r of e.cells)this.notebookCellMap.set(r.document,[r,e])}};YS.NotebookDocuments=Ure});var vwe=G(uO=>{"use strict";f();Object.defineProperty(uO,"__esModule",{value:!0});uO.MonikerFeature=void 0;var Jft=ii(),Xft=s(t=>class extends t{get moniker(){return{on:s(e=>{let r=Jft.MonikerRequest.type;return this.connection.onRequest(r,(n,i)=>e(n,i,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(r,n)))},"on")}}},"MonikerFeature");uO.MonikerFeature=Xft});var $re=G(mo=>{"use strict";f();Object.defineProperty(mo,"__esModule",{value:!0});mo.createConnection=mo.combineFeatures=mo.combineNotebooksFeatures=mo.combineLanguagesFeatures=mo.combineWorkspaceFeatures=mo.combineWindowFeatures=mo.combineClientFeatures=mo.combineTracerFeatures=mo.combineTelemetryFeatures=mo.combineConsoleFeatures=mo._NotebooksImpl=mo._LanguagesImpl=mo.BulkUnregistration=mo.BulkRegistration=mo.ErrorMessageTracker=void 0;var $t=ii(),Vf=jQ(),Gre=kre(),Kn=swe(),Zft=awe(),ept=lwe(),tpt=cwe(),rpt=Lre(),npt=uwe(),ipt=dwe(),opt=fwe(),spt=pwe(),apt=hwe(),lpt=Awe(),cpt=ywe(),upt=Cwe(),dpt=qre(),fpt=vwe();function Wre(t){if(t!==null)return t}s(Wre,"null2Undefined");var Hre=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let r=this._messages[e];r||(r=0),r++,this._messages[e]=r}sendErrors(e){Object.keys(this._messages).forEach(r=>{e.window.showErrorMessage(r)})}};mo.ErrorMessageTracker=Hre;var dO=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,r){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:r}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},jre=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...r){let n={type:$t.MessageType.Error,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(Wre)}showWarningMessage(e,...r){let n={type:$t.MessageType.Warning,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(Wre)}showInformationMessage(e,...r){let n={type:$t.MessageType.Info,message:e,actions:r};return this.connection.sendRequest($t.ShowMessageRequest.type,n).then(Wre)}},bwe=(0,npt.ShowDocumentFeature)((0,Kn.ProgressFeature)(jre)),Ewe;(function(t){function e(){return new fO}s(e,"create"),t.create=e})(Ewe||(mo.BulkRegistration=Ewe={}));var fO=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,r){let n=Vf.string(e)?e:e.method;if(this._registered.has(n))throw new Error(`${n} is already added to this registration`);let i=Gre.generateUuid();this._registrations.push({id:i,method:n,registerOptions:r||{}}),this._registered.add(n)}asRegistrationParams(){return{registrations:this._registrations}}},Iwe;(function(t){function e(){return new W8(void 0,[])}s(e,"create"),t.create=e})(Iwe||(mo.BulkUnregistration=Iwe={}));var W8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,r){this._connection=e,this._unregistrations=new Map,r.forEach(n=>{this._unregistrations.set(n.method,n)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let n of this._unregistrations.values())e.push(n);let r={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let r=Vf.string(e)?e:e.method,n=this._unregistrations.get(r);if(!n)return!1;let i={unregisterations:[n]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(r)},o=>{this._connection.console.info(`Un-registering request handler for ${n.id} failed.`)}),!0}},pO=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,r,n){return e instanceof fO?this.registerMany(e):e instanceof W8?this.registerSingle1(e,r,n):this.registerSingle2(e,r)}registerSingle1(e,r,n){let i=Vf.string(r)?r:r.method,o=Gre.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:n||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,r){let n=Vf.string(e)?e:e.method,i=Gre.generateUuid(),o={registrations:[{id:i,method:n,registerOptions:r||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,n).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${n} failed.`),Promise.reject(a)))}unregisterSingle(e,r){let n={unregisterations:[{id:e,method:r}]};return this.connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let r=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,r).then(()=>new W8(this._connection,r.registrations.map(n=>({id:n.id,method:n.method}))),n=>(this.connection.console.info("Bulk registration failed."),Promise.reject(n)))}},Vre=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function r(i){return i&&!!i.edit}s(r,"isApplyWorkspaceEditParams");let n=r(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,n)}},Twe=(0,ipt.FileOperationsFeature)((0,ept.WorkspaceFoldersFeature)((0,Zft.ConfigurationFeature)(Vre))),mO=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,r){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?r:void 0}).catch(()=>{})}},hO=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},gO=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kn.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,Kn.attachPartialResult)(this.connection,r)}};mo._LanguagesImpl=gO;var wwe=(0,lpt.FoldingRangeFeature)((0,fpt.MonikerFeature)((0,upt.DiagnosticFeature)((0,cpt.InlayHintFeature)((0,apt.InlineValueFeature)((0,spt.TypeHierarchyFeature)((0,opt.LinkedEditingRangeFeature)((0,rpt.SemanticTokensFeature)((0,tpt.CallHierarchyFeature)(gO))))))))),AO=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,Kn.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,r){return(0,Kn.attachPartialResult)(this.connection,r)}};mo._NotebooksImpl=AO;var _we=(0,dpt.NotebookSyncFeature)(AO);function Swe(t,e){return function(r){return e(t(r))}}s(Swe,"combineConsoleFeatures");mo.combineConsoleFeatures=Swe;function Rwe(t,e){return function(r){return e(t(r))}}s(Rwe,"combineTelemetryFeatures");mo.combineTelemetryFeatures=Rwe;function kwe(t,e){return function(r){return e(t(r))}}s(kwe,"combineTracerFeatures");mo.combineTracerFeatures=kwe;function Bwe(t,e){return function(r){return e(t(r))}}s(Bwe,"combineClientFeatures");mo.combineClientFeatures=Bwe;function Dwe(t,e){return function(r){return e(t(r))}}s(Dwe,"combineWindowFeatures");mo.combineWindowFeatures=Dwe;function Pwe(t,e){return function(r){return e(t(r))}}s(Pwe,"combineWorkspaceFeatures");mo.combineWorkspaceFeatures=Pwe;function Nwe(t,e){return function(r){return e(t(r))}}s(Nwe,"combineLanguagesFeatures");mo.combineLanguagesFeatures=Nwe;function Lwe(t,e){return function(r){return e(t(r))}}s(Lwe,"combineNotebooksFeatures");mo.combineNotebooksFeatures=Lwe;function ppt(t,e){function r(i,o,a){return i&&o?a(i,o):i||o}return s(r,"combine"),{__brand:"features",console:r(t.console,e.console,Swe),tracer:r(t.tracer,e.tracer,kwe),telemetry:r(t.telemetry,e.telemetry,Rwe),client:r(t.client,e.client,Bwe),window:r(t.window,e.window,Dwe),workspace:r(t.workspace,e.workspace,Pwe),languages:r(t.languages,e.languages,Nwe),notebooks:r(t.notebooks,e.notebooks,Lwe)}}s(ppt,"combineFeatures");mo.combineFeatures=ppt;function mpt(t,e,r){let n=r&&r.console?new(r.console(dO)):new dO,i=t(n);n.rawAttach(i);let o=r&&r.tracer?new(r.tracer(mO)):new mO,a=r&&r.telemetry?new(r.telemetry(hO)):new hO,l=r&&r.client?new(r.client(pO)):new pO,c=r&&r.window?new(r.window(bwe)):new bwe,u=r&&r.workspace?new(r.workspace(Twe)):new Twe,d=r&&r.languages?new(r.languages(wwe)):new wwe,p=r&&r.notebooks?new(r.notebooks(_we)):new _we,m=[n,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:Vf.thenable(E)?new Promise((_,k)=>{E.then(B=>_(B),B=>k(B))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(Vf.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=Vf.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return n},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),(0,Kn.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,Kn.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),Vf.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,Kn.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let B=k;B||(B={capabilities:{}});let N=B.capabilities;N||(N={},B.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=Vf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!Vf.number(N.textDocumentSync)&&!Vf.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=Vf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let q of m)q.fillServerCapabilities(N);return B})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(mpt,"createConnection");mo.createConnection=mpt});var Fwe=G(vd=>{"use strict";f();Object.defineProperty(vd,"__esModule",{value:!0});vd.resolveModulePath=vd.FileSystem=vd.resolveGlobalYarnPath=vd.resolveGlobalNodePath=vd.resolve=vd.uriToFilePath=void 0;var hpt=require("url"),Tm=require("path"),zre=require("fs"),Xre=require("child_process");function gpt(t){let e=hpt.parse(t);if(e.protocol!=="file:"||!e.path)return;let r=e.path.split("/");for(var n=0,i=r.length;n<i;n++)r[n]=decodeURIComponent(r[n]);if(process.platform==="win32"&&r.length>1){let o=r[0],a=r[1];o.length===0&&a.length>1&&a[1]===":"&&r.shift()}return Tm.normalize(r.join("/"))}s(gpt,"uriToFilePath");vd.uriToFilePath=gpt;function Yre(){return process.platform==="win32"}s(Yre,"isWindows");function yO(t,e,r,n){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&zre.existsSync(e)&&(u[i]?u[i]=e+Tm.delimiter+u[i]:u[i]=e,n&&n(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,Xre.fork)("",[],{cwd:r,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(yO,"resolve");vd.resolve=yO;function Kre(t){let e="npm",r=Object.create(null);Object.keys(process.env).forEach(o=>r[o]=process.env[o]),r.NO_UPDATE_NOTIFIER="true";let n={encoding:"utf8",env:r};Yre()&&(e="npm.cmd",n.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,Xre.spawnSync)(e,["config","get","prefix"],n).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Yre()?Tm.join(a,"node_modules"):Tm.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(Kre,"resolveGlobalNodePath");vd.resolveGlobalNodePath=Kre;function Apt(t){let e="yarn",r={encoding:"utf8"};Yre()&&(e="yarn.cmd",r.shell=!0);let n=s(()=>{},"handler");try{process.on("SIGPIPE",n);let i=(0,Xre.spawnSync)(e,["global","dir","--json"],r),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return Tm.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",n)}}s(Apt,"resolveGlobalYarnPath");vd.resolveGlobalYarnPath=Apt;var Jre;(function(t){let e;function r(){return e!==void 0||(process.platform==="win32"?e=!1:e=!zre.existsSync(__filename.toUpperCase())||!zre.existsSync(__filename.toLowerCase())),e}s(r,"isCaseSensitive"),t.isCaseSensitive=r;function n(i,o){return r()?Tm.normalize(o).indexOf(Tm.normalize(i))===0:Tm.normalize(o).toLowerCase().indexOf(Tm.normalize(i).toLowerCase())===0}s(n,"isParent"),t.isParent=n})(Jre||(vd.FileSystem=Jre={}));function ypt(t,e,r,n){return r?(Tm.isAbsolute(r)||(r=Tm.join(t,r)),yO(e,r,r,n).then(i=>Jre.isParent(r,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>yO(e,Kre(n),t,n))):yO(e,Kre(n),t,n)}s(ypt,"resolveModulePath");vd.resolveModulePath=ypt});var Zre=G((gSr,Mwe)=>{"use strict";f();Mwe.exports=ii()});var Qwe=G(CO=>{"use strict";f();Object.defineProperty(CO,"__esModule",{value:!0});CO.InlineCompletionFeature=void 0;var Cpt=ii(),xpt=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(Cpt.InlineCompletionRequest.type,(r,n)=>e(r,n,this.attachWorkDoneProgress(r))),"on")}}},"InlineCompletionFeature");CO.InlineCompletionFeature=xpt});var qwe=G(zc=>{"use strict";f();var vpt=zc&&zc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Uwe=zc&&zc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vpt(e,t,r)};Object.defineProperty(zc,"__esModule",{value:!0});zc.ProposedFeatures=zc.NotebookDocuments=zc.TextDocuments=zc.SemanticTokensBuilder=void 0;var bpt=Lre();Object.defineProperty(zc,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return bpt.SemanticTokensBuilder},"get")});var Ept=Qwe();Uwe(ii(),zc);var Ipt=Ore();Object.defineProperty(zc,"TextDocuments",{enumerable:!0,get:s(function(){return Ipt.TextDocuments},"get")});var Tpt=qre();Object.defineProperty(zc,"NotebookDocuments",{enumerable:!0,get:s(function(){return Tpt.NotebookDocuments},"get")});Uwe($re(),zc);var Owe;(function(t){t.all={__brand:"features",languages:Ept.InlineCompletionFeature}})(Owe||(zc.ProposedFeatures=Owe={}))});var Sa=G($f=>{"use strict";f();var wpt=$f&&$f.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),jwe=$f&&$f.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wpt(e,t,r)};Object.defineProperty($f,"__esModule",{value:!0});$f.createConnection=$f.Files=void 0;var Wwe=require("node:util"),ene=jQ(),_pt=$re(),G8=Fwe(),UI=Zre();jwe(Zre(),$f);jwe(qwe(),$f);var Gwe;(function(t){t.uriToFilePath=G8.uriToFilePath,t.resolveGlobalNodePath=G8.resolveGlobalNodePath,t.resolveGlobalYarnPath=G8.resolveGlobalYarnPath,t.resolve=G8.resolve,t.resolveModulePath=G8.resolveModulePath})(Gwe||($f.Files=Gwe={}));var Hwe;function xO(){if(Hwe!==void 0)try{Hwe.end()}catch{}}s(xO,"endProtocolConnection");var KS=!1,Vwe;function Spt(){let t="--clientProcessId";function e(r){try{let n=parseInt(r);isNaN(n)||(Vwe=setInterval(()=>{try{process.kill(n,0)}catch{xO(),process.exit(KS?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let r=2;r<process.argv.length;r++){let n=process.argv[r];if(n===t&&r+1<process.argv.length){e(process.argv[r+1]);return}else{let i=n.split("=");i[0]===t&&e(i[1])}}}s(Spt,"setupExitTimer");Spt();var Rpt={initialize:s(t=>{let e=t.processId;ene.number(e)&&Vwe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(KS?0:1)}},3e3)},"initialize"),get shutdownReceived(){return KS},set shutdownReceived(t){KS=t},exit:s(t=>{xO(),process.exit(t)},"exit")};function kpt(t,e,r,n){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=r,r=n),UI.ConnectionStrategy.is(t)||UI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=r),Bpt(o,a,l,i)}s(kpt,"createConnection");$f.createConnection=kpt;function Bpt(t,e,r,n){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new UI.IPCMessageReader(process),e=new UI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,UI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,UI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(ene.func(t.read)&&ene.func(t.on)){let c=t;c.on("end",()=>{xO(),process.exit(KS?0:1)}),c.on("close",()=>{xO(),process.exit(KS?0:1)})}let l=s(c=>{let u=(0,UI.createProtocolConnection)(t,e,c,r);return i&&Dpt(c),u},"connectionFactory");return(0,_pt.createConnection)(l,Rpt,n)}s(Bpt,"_createConnection");function Dpt(t){function e(n){return n.map(i=>typeof i=="string"?i:(0,Wwe.inspect)(i)).join(" ")}s(e,"serialize");let r=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=r.get(o)??0;a+=1,r.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?r.clear():r.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,Wwe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(Dpt,"patchConsole")});var wm=G((SSr,$we)=>{"use strict";f();$we.exports=Sa()});var O5e=G((O3r,Q5e)=>{"use strict";f();Q5e.exports=F5e;function F5e(t,e,r){t instanceof RegExp&&(t=L5e(t,r)),e instanceof RegExp&&(e=L5e(e,r));var n=M5e(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}s(F5e,"balanced");function L5e(t,e){var r=e.match(t);return r?r[0]:null}s(L5e,"maybeMatch");F5e.range=M5e;function M5e(t,e,r){var n,i,o,a,l,c=r.indexOf(t),u=r.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(n=[],o=r.length;d>=0&&!l;)d==c?(n.push(d),c=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=c<u&&c>=0?c:u;n.length&&(l=[o,a])}return l}s(M5e,"range")});var $5e=G((W3r,V5e)=>{f();var U5e=O5e();V5e.exports=Emt;var q5e="\0SLASH"+Math.random()+"\0",W5e="\0OPEN"+Math.random()+"\0",rie="\0CLOSE"+Math.random()+"\0",G5e="\0COMMA"+Math.random()+"\0",H5e="\0PERIOD"+Math.random()+"\0";function tie(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(tie,"numeric");function vmt(t){return t.split("\\\\").join(q5e).split("\\{").join(W5e).split("\\}").join(rie).split("\\,").join(G5e).split("\\.").join(H5e)}s(vmt,"escapeBraces");function bmt(t){return t.split(q5e).join("\\").split(W5e).join("{").split(rie).join("}").split(G5e).join(",").split(H5e).join(".")}s(bmt,"unescapeBraces");function j5e(t){if(!t)return[""];var e=[],r=U5e("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=j5e(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s(j5e,"parseCommaParts");function Emt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),rD(vmt(t),!0).map(bmt)):[]}s(Emt,"expandTop");function Imt(t){return"{"+t+"}"}s(Imt,"embrace");function Tmt(t){return/^-?0\d/.test(t)}s(Tmt,"isPadded");function wmt(t,e){return t<=e}s(wmt,"lte");function _mt(t,e){return t>=e}s(_mt,"gte");function rD(t,e){var r=[],n=U5e("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?rD(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=c||u,p=n.body.indexOf(",")>=0;if(!d&&!p)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+rie+n.post,rD(t)):[t];var m;if(d)m=n.body.split(/\.\./);else if(m=j5e(n.body),m.length===1&&(m=rD(m[0],!1).map(Imt),m.length===1))return o.map(function(oe){return n.pre+m[0]+oe});var h;if(d){var g=tie(m[0]),y=tie(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(tie(m[2])):1,E=wmt,_=y<g;_&&(b*=-1,E=_mt);var k=m.some(Tmt);h=[];for(var B=g;E(B,y);B+=b){var N;if(u)N=String.fromCharCode(B),N==="\\"&&(N="");else if(N=String(B),k){var q=v-N.length;if(q>0){var te=new Array(q+1).join("0");B<0?N="-"+te+N.slice(1):N=te+N}}h.push(N)}}else{h=[];for(var me=0;me<m.length;me++)h.push.apply(h,rD(m[me],!1))}for(var me=0;me<h.length;me++)for(var a=0;a<o.length;a++){var l=i+h[me]+o[a];(!e||d||l)&&r.push(l)}}return r}s(rD,"expand")});var Qs=G((eYr,h3e)=>{f();h3e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var yo=G((rYr,g3e)=>{"use strict";f();var Zs=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Boe=class extends Zs{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},Doe=class extends Zs{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},Poe=class extends Zs{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},Noe=class extends Zs{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Loe=class extends Zs{static{s(this,"ResponseStatusCodeError")}constructor(e,r,n,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=r,this.statusCode=r,this.headers=n}},Foe=class extends Zs{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Moe=class extends Zs{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Lq=class extends Zs{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},Qoe=class extends Lq{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},Ooe=class extends Zs{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Uoe=class extends Zs{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},qoe=class extends Zs{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},Woe=class extends Zs{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Goe=class extends Zs{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Hoe=class extends Zs{static{s(this,"SocketError")}constructor(e,r){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},joe=class extends Zs{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Voe=class extends Zs{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},$oe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,r,n){super(e),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=n?n.toString():void 0}},zoe=class extends Zs{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Yoe=class extends Zs{static{s(this,"RequestRetryError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=i,this.headers=n}},Koe=class extends Zs{static{s(this,"ResponseError")}constructor(e,r,{headers:n,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.data=i,this.headers=n}},Joe=class extends Zs{static{s(this,"SecureProxyConnectionError")}constructor(e,r,n){super(r,{cause:e,...n??{}}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};g3e.exports={AbortError:Lq,HTTPParserError:$oe,UndiciError:Zs,HeadersTimeoutError:Doe,HeadersOverflowError:Poe,BodyTimeoutError:Noe,RequestContentLengthMismatchError:Uoe,ConnectTimeoutError:Boe,ResponseStatusCodeError:Loe,InvalidArgumentError:Foe,InvalidReturnValueError:Moe,RequestAbortedError:Qoe,ClientDestroyedError:Woe,ClientClosedError:Goe,InformationalError:Ooe,SocketError:Hoe,NotSupportedError:joe,ResponseContentLengthMismatchError:qoe,BalancedPoolMissingUpstreamError:Voe,ResponseExceededMaxSizeError:zoe,RequestRetryError:Yoe,ResponseError:Koe,SecureProxyConnectionError:Joe}});var Mq=G((oYr,A3e)=>{"use strict";f();var Fq={},Xoe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<Xoe.length;++t){let e=Xoe[t],r=e.toLowerCase();Fq[e]=Fq[r]=r}Object.setPrototypeOf(Fq,null);A3e.exports={wellknownHeaderNames:Xoe,headerNameLowerCasedRecord:Fq}});var v3e=G((aYr,x3e)=>{"use strict";f();var{wellknownHeaderNames:y3e,headerNameLowerCasedRecord:_1t}=Mq(),Zoe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,r,n){if(n===void 0||n>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(n))>127)throw new TypeError("key must be ascii string");e.length!==++n?this.middle=new t(e,r,n):this.value=r}add(e,r){let n=e.length;if(n===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(n===++i){o.value=r;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,r,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,r,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,r,i);break}}}search(e){let r=e.length,n=0,i=this;for(;i!==null&&n<r;){let o=e[n];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(r===++n)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},Qq=class{static{s(this,"TernarySearchTree")}node=null;insert(e,r){this.node===null?this.node=new Zoe(e,r,0):this.node.add(e,r)}lookup(e){return this.node?.search(e)?.value??null}},C3e=new Qq;for(let t=0;t<y3e.length;++t){let e=_1t[y3e[t]];C3e.insert(e,e)}x3e.exports={TernarySearchTree:Qq,tree:C3e}});var yi=G((uYr,M3e)=>{"use strict";f();var kD=require("node:assert"),{kDestroyed:E3e,kBodyUsed:G5,kListeners:ese,kBody:b3e}=Qs(),{IncomingMessage:S1t}=require("node:http"),qq=require("node:stream"),R1t=require("node:net"),{Blob:k1t}=require("node:buffer"),B1t=require("node:util"),{stringify:D1t}=require("node:querystring"),{EventEmitter:P1t}=require("node:events"),{InvalidArgumentError:Hl}=yo(),{headerNameLowerCasedRecord:N1t}=Mq(),{tree:I3e}=v3e(),[L1t,F1t]=process.versions.node.split(".").map(t=>Number(t)),Uq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[b3e]=e,this[G5]=!1}async*[Symbol.asyncIterator](){kD(!this[G5],"disturbed"),this[G5]=!0,yield*this[b3e]}};function M1t(t){return Wq(t)?(R3e(t)===0&&t.on("data",function(){kD(!1)}),typeof t.readableDidRead!="boolean"&&(t[G5]=!1,P1t.prototype.on.call(t,"data",function(){this[G5]=!0})),t):t&&typeof t.pipeTo=="function"?new Uq(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&S3e(t)?new Uq(t):t}s(M1t,"wrapRequestBody");function Q1t(){}s(Q1t,"nop");function Wq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Wq,"isStream");function T3e(t){if(t===null)return!1;if(t instanceof k1t)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(T3e,"isBlobLike");function O1t(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=D1t(e);return r&&(t+="?"+r),t}s(O1t,"buildURL");function w3e(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(w3e,"isValidPort");function Oq(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(Oq,"isHttpOrHttpsPrefixed");function _3e(t){if(typeof t=="string"){if(t=new URL(t),!Oq(t.origin||t.protocol))throw new Hl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Hl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&w3e(t.port)===!1)throw new Hl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Hl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Hl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Hl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Hl("Invalid URL origin: the origin must be a string or null/undefined.");if(!Oq(t.origin||t.protocol))throw new Hl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,r=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,n=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),n&&n[0]!=="/"&&(n=`/${n}`),new URL(`${r}${n}`)}if(!Oq(t.origin||t.protocol))throw new Hl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(_3e,"parseURL");function U1t(t){if(t=_3e(t),t.pathname!=="/"||t.search||t.hash)throw new Hl("invalid url");return t}s(U1t,"parseOrigin");function q1t(t){if(t[0]==="["){let r=t.indexOf("]");return kD(r!==-1),t.substring(1,r)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(q1t,"getHostname");function W1t(t){if(!t)return null;kD(typeof t=="string");let e=q1t(t);return R1t.isIP(e)?"":e}s(W1t,"getServerName");function G1t(t){return JSON.parse(JSON.stringify(t))}s(G1t,"deepClone");function H1t(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(H1t,"isAsyncIterable");function S3e(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(S3e,"isIterable");function R3e(t){if(t==null)return 0;if(Wq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(T3e(t))return t.size!=null?t.size:null;if(D3e(t))return t.byteLength}return null}s(R3e,"bodyLength");function k3e(t){return t&&!!(t.destroyed||t[E3e]||qq.isDestroyed?.(t))}s(k3e,"isDestroyed");function j1t(t,e){t==null||!Wq(t)||k3e(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===S1t&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[E3e]=!0))}s(j1t,"destroy");var V1t=/timeout=(\d+)/;function $1t(t){let e=t.toString().match(V1t);return e?parseInt(e[1],10)*1e3:null}s($1t,"parseKeepAliveTimeout");function B3e(t){return typeof t=="string"?N1t[t]??t.toLowerCase():I3e.lookup(t)??t.toString("latin1").toLowerCase()}s(B3e,"headerNameToString");function z1t(t){return I3e.lookup(t)??t.toString("latin1").toLowerCase()}s(z1t,"bufferToLowerCasedHeaderName");function Y1t(t,e){e===void 0&&(e={});for(let r=0;r<t.length;r+=2){let n=B3e(t[r]),i=e[n];if(i)typeof i=="string"&&(i=[i],e[n]=i),i.push(t[r+1].toString("utf8"));else{let o=t[r+1];typeof o=="string"?e[n]=o:e[n]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s(Y1t,"parseHeaders");function K1t(t){let e=t.length,r=new Array(e),n=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?n=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),r[c]=o,r[c+1]=a;return n&&i!==-1&&(r[i]=Buffer.from(r[i]).toString("latin1")),r}s(K1t,"parseRawHeaders");function D3e(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(D3e,"isBuffer");function J1t(t,e,r){if(!t||typeof t!="object")throw new Hl("handler must be an object");if(typeof t.onConnect!="function")throw new Hl("invalid onConnect method");if(typeof t.onError!="function")throw new Hl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Hl("invalid onBodySent method");if(r||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Hl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Hl("invalid onHeaders method");if(typeof t.onData!="function")throw new Hl("invalid onData method");if(typeof t.onComplete!="function")throw new Hl("invalid onComplete method")}}s(J1t,"validateHandler");function X1t(t){return!!(t&&(qq.isDisturbed(t)||t[G5]))}s(X1t,"isDisturbed");function Z1t(t){return!!(t&&qq.isErrored(t))}s(Z1t,"isErrored");function eyt(t){return!!(t&&qq.isReadable(t))}s(eyt,"isReadable");function tyt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(tyt,"getSocketInfo");function ryt(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(r){let{done:n,value:i}=await e.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&r.enqueue(new Uint8Array(o))}return r.desiredSize>0},async cancel(r){await e.return()},type:"bytes"})}s(ryt,"ReadableStreamFrom");function nyt(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(nyt,"isFormDataLike");function iyt(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(iyt,"addAbortListener");var oyt=typeof String.prototype.toWellFormed=="function",syt=typeof String.prototype.isWellFormed=="function";function P3e(t){return oyt?`${t}`.toWellFormed():B1t.toUSVString(t)}s(P3e,"toUSVString");function ayt(t){return syt?`${t}`.isWellFormed():P3e(t)===`${t}`}s(ayt,"isUSVString");function N3e(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(N3e,"isTokenCharCode");function lyt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!N3e(t.charCodeAt(e)))return!1;return!0}s(lyt,"isValidHTTPToken");var cyt=/[^\t\x20-\x7e\x80-\xff]/;function uyt(t){return!cyt.test(t)}s(uyt,"isValidHeaderValue");function dyt(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(dyt,"parseRangeHeader");function fyt(t,e,r){return(t[ese]??=[]).push([e,r]),t.on(e,r),t}s(fyt,"addListener");function pyt(t){for(let[e,r]of t[ese]??[])t.removeListener(e,r);t[ese]=null}s(pyt,"removeAllListeners");function myt(t,e,r){try{e.onError(r),kD(e.aborted)}catch(n){t.emit("error",n)}}s(myt,"errorRequest");var L3e=Object.create(null);L3e.enumerable=!0;var tse={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},F3e={...tse,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(tse,null);Object.setPrototypeOf(F3e,null);M3e.exports={kEnumerableProperty:L3e,nop:Q1t,isDisturbed:X1t,isErrored:Z1t,isReadable:eyt,toUSVString:P3e,isUSVString:ayt,isBlobLike:T3e,parseOrigin:U1t,parseURL:_3e,getServerName:W1t,isStream:Wq,isIterable:S3e,isAsyncIterable:H1t,isDestroyed:k3e,headerNameToString:B3e,bufferToLowerCasedHeaderName:z1t,addListener:fyt,removeAllListeners:pyt,errorRequest:myt,parseRawHeaders:K1t,parseHeaders:Y1t,parseKeepAliveTimeout:$1t,destroy:j1t,bodyLength:R3e,deepClone:G1t,ReadableStreamFrom:ryt,isBuffer:D3e,validateHandler:J1t,getSocketInfo:tyt,isFormDataLike:nyt,buildURL:O1t,addAbortListener:iyt,isValidHTTPToken:lyt,isValidHeaderValue:uyt,isTokenCharCode:N3e,parseRangeHeader:dyt,normalizedMethodRecordsBase:tse,normalizedMethodRecords:F3e,isValidPort:w3e,isHttpOrHttpsPrefixed:Oq,nodeMajor:L1t,nodeMinor:F1t,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:M1t}});var H5=G((pYr,O3e)=>{"use strict";f();var Eo=require("node:diagnostics_channel"),nse=require("node:util"),Gq=nse.debuglog("undici"),rse=nse.debuglog("fetch"),v2=nse.debuglog("websocket"),Q3e=!1,hyt={beforeConnect:Eo.channel("undici:client:beforeConnect"),connected:Eo.channel("undici:client:connected"),connectError:Eo.channel("undici:client:connectError"),sendHeaders:Eo.channel("undici:client:sendHeaders"),create:Eo.channel("undici:request:create"),bodySent:Eo.channel("undici:request:bodySent"),headers:Eo.channel("undici:request:headers"),trailers:Eo.channel("undici:request:trailers"),error:Eo.channel("undici:request:error"),open:Eo.channel("undici:websocket:open"),close:Eo.channel("undici:websocket:close"),socketError:Eo.channel("undici:websocket:socket_error"),ping:Eo.channel("undici:websocket:ping"),pong:Eo.channel("undici:websocket:pong")};if(Gq.enabled||rse.enabled){let t=rse.enabled?rse:Gq;Eo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Eo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,n,r)}),Eo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,n,r,a.message)}),Eo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)}),Eo.channel("undici:request:headers").subscribe(e=>{let{request:{method:r,path:n,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",r,i,n,o)}),Eo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("trailers received from %s %s/%s",r,i,n)}),Eo.channel("undici:request:error").subscribe(e=>{let{request:{method:r,path:n,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",r,i,n,o.message)}),Q3e=!0}if(v2.enabled){if(!Q3e){let t=Gq.enabled?Gq:v2;Eo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Eo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",n,r)}),Eo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:r,protocol:n,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",n,r,a.message)}),Eo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:r,path:n,origin:i}}=e;t("sending request to %s %s/%s",r,i,n)})}Eo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:r}}=t;v2("connection opened %s%s",e,r?`:${r}`:"")}),Eo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:r,reason:n}=t;v2("closed connection to %s - %s %s",e.url,r,n)}),Eo.channel("undici:websocket:socket_error").subscribe(t=>{v2("connection errored - %s",t.message)}),Eo.channel("undici:websocket:ping").subscribe(t=>{v2("ping received")}),Eo.channel("undici:websocket:pong").subscribe(t=>{v2("pong received")})}O3e.exports={channels:hyt}});var H3e=G((hYr,G3e)=>{"use strict";f();var{InvalidArgumentError:ea,NotSupportedError:gyt}=yo(),Z1=require("node:assert"),{isValidHTTPToken:W3e,isValidHeaderValue:U3e,isStream:Ayt,destroy:yyt,isBuffer:Cyt,isFormDataLike:xyt,isIterable:vyt,isBlobLike:byt,buildURL:Eyt,validateHandler:Iyt,getServerName:Tyt,normalizedMethodRecords:wyt}=yi(),{channels:Fg}=H5(),{headerNameLowerCasedRecord:q3e}=Mq(),_yt=/[^\u0021-\u00ff]/,sp=Symbol("handler"),ise=class{static{s(this,"Request")}constructor(e,{path:r,method:n,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof r!="string")throw new ea("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&n!=="CONNECT")throw new ea("path must be an absolute URL or start with a slash");if(_yt.test(r))throw new ea("invalid request path");if(typeof n!="string")throw new ea("method must be a string");if(wyt[n]===void 0&&!W3e(n))throw new ea("invalid request method");if(u&&typeof u!="string")throw new ea("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new ea("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ea("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new ea("invalid reset");if(g!=null&&typeof g!="boolean")throw new ea("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=n,this.abort=null,i==null)this.body=null;else if(Ayt(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){yyt(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(Cyt(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(xyt(i)||vyt(i)||byt(i))this.body=i;else throw new ea("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?Eyt(r,a):r,this.origin=e,this.idempotent=l??(n==="HEAD"||n==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new ea("headers array must be even");for(let b=0;b<o.length;b+=2)Hq(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new ea("headers must be in key-value pair format");Hq(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)Hq(this,b[E],o[b[E]])}else if(o!=null)throw new ea("headers must be an object or an array");Iyt(v,n,u),this.servername=y||Tyt(this.host),this[sp]=v,Fg.create.hasSubscribers&&Fg.create.publish({request:this})}onBodySent(e){if(this[sp].onBodySent)try{return this[sp].onBodySent(e)}catch(r){this.abort(r)}}onRequestSent(){if(Fg.bodySent.hasSubscribers&&Fg.bodySent.publish({request:this}),this[sp].onRequestSent)try{return this[sp].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(Z1(!this.aborted),Z1(!this.completed),this.error)e(this.error);else return this.abort=e,this[sp].onConnect(e)}onResponseStarted(){return this[sp].onResponseStarted?.()}onHeaders(e,r,n,i){Z1(!this.aborted),Z1(!this.completed),Fg.headers.hasSubscribers&&Fg.headers.publish({request:this,response:{statusCode:e,headers:r,statusText:i}});try{return this[sp].onHeaders(e,r,n,i)}catch(o){this.abort(o)}}onData(e){Z1(!this.aborted),Z1(!this.completed);try{return this[sp].onData(e)}catch(r){return this.abort(r),!1}}onUpgrade(e,r,n){return Z1(!this.aborted),Z1(!this.completed),this[sp].onUpgrade(e,r,n)}onComplete(e){this.onFinally(),Z1(!this.aborted),this.completed=!0,Fg.trailers.hasSubscribers&&Fg.trailers.publish({request:this,trailers:e});try{return this[sp].onComplete(e)}catch(r){this.onError(r)}}onError(e){if(this.onFinally(),Fg.error.hasSubscribers&&Fg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[sp].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,r){return Hq(this,e,r),this}};function Hq(t,e,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new ea(`invalid ${e} header`);if(r===void 0)return;let n=q3e[e];if(n===void 0&&(n=e.toLowerCase(),q3e[n]===void 0&&!W3e(n)))throw new ea("invalid header key");if(Array.isArray(r)){let i=[];for(let o=0;o<r.length;o++)if(typeof r[o]=="string"){if(!U3e(r[o]))throw new ea(`invalid ${e} header`);i.push(r[o])}else if(r[o]===null)i.push("");else{if(typeof r[o]=="object")throw new ea(`invalid ${e} header`);i.push(`${r[o]}`)}r=i}else if(typeof r=="string"){if(!U3e(r))throw new ea(`invalid ${e} header`)}else r===null?r="":r=`${r}`;if(t.host===null&&n==="host"){if(typeof r!="string")throw new ea("invalid host header");t.host=r}else if(t.contentLength===null&&n==="content-length"){if(t.contentLength=parseInt(r,10),!Number.isFinite(t.contentLength))throw new ea("invalid content-length header")}else if(t.contentType===null&&n==="content-type")t.contentType=r,t.headers.push(e,r);else{if(n==="transfer-encoding"||n==="keep-alive"||n==="upgrade")throw new ea(`invalid ${n} header`);if(n==="connection"){let i=typeof r=="string"?r.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ea("invalid connection header");i==="close"&&(t.reset=!0)}else{if(n==="expect")throw new gyt("expect header not supported");t.headers.push(e,r)}}}s(Hq,"processHeader");G3e.exports=ise});var BD=G((yYr,j3e)=>{"use strict";f();var Syt=require("node:events"),jq=class extends Syt{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let r=Array.isArray(e[0])?e[0]:e,n=this.dispatch.bind(this);for(let i of r)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(n=i(n),n==null||typeof n!="function"||n.length!==2)throw new TypeError("invalid interceptor")}return new ose(this,n)}},ose=class extends jq{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,r){super(),this.#e=e,this.#t=r}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};j3e.exports=jq});var z5=G((vYr,V3e)=>{"use strict";f();var Ryt=BD(),{ClientDestroyedError:sse,ClientClosedError:kyt,InvalidArgumentError:j5}=yo(),{kDestroy:Byt,kClose:Dyt,kClosed:DD,kDestroyed:V5,kDispatch:ase,kInterceptors:b2}=Qs(),ey=Symbol("onDestroyed"),$5=Symbol("onClosed"),Vq=Symbol("Intercepted Dispatch"),lse=class extends Ryt{static{s(this,"DispatcherBase")}constructor(){super(),this[V5]=!1,this[ey]=null,this[DD]=!1,this[$5]=[]}get destroyed(){return this[V5]}get closed(){return this[DD]}get interceptors(){return this[b2]}set interceptors(e){if(e){for(let r=e.length-1;r>=0;r--)if(typeof this[b2][r]!="function")throw new j5("interceptor must be an function")}this[b2]=e}close(e){if(e===void 0)return new Promise((n,i)=>{this.close((o,a)=>o?i(o):n(a))});if(typeof e!="function")throw new j5("invalid callback");if(this[V5]){queueMicrotask(()=>e(new sse,null));return}if(this[DD]){this[$5]?this[$5].push(e):queueMicrotask(()=>e(null,null));return}this[DD]=!0,this[$5].push(e);let r=s(()=>{let n=this[$5];this[$5]=null;for(let i=0;i<n.length;i++)n[i](null,null)},"onClosed");this[Dyt]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(e,r){if(typeof e=="function"&&(r=e,e=null),r===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof r!="function")throw new j5("invalid callback");if(this[V5]){this[ey]?this[ey].push(r):queueMicrotask(()=>r(null,null));return}e||(e=new sse),this[V5]=!0,this[ey]=this[ey]||[],this[ey].push(r);let n=s(()=>{let i=this[ey];this[ey]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[Byt](e).then(()=>{queueMicrotask(n)})}[Vq](e,r){if(!this[b2]||this[b2].length===0)return this[Vq]=this[ase],this[ase](e,r);let n=this[ase].bind(this);for(let i=this[b2].length-1;i>=0;i--)n=this[b2][i](n);return this[Vq]=n,n(e,r)}dispatch(e,r){if(!r||typeof r!="object")throw new j5("handler must be an object");try{if(!e||typeof e!="object")throw new j5("opts must be an object.");if(this[V5]||this[ey])throw new sse;if(this[DD])throw new kyt;return this[Vq](e,r)}catch(n){if(typeof r.onError!="function")throw new j5("invalid onError method");return r.onError(n),!1}}};V3e.exports=lse});var hse=G((IYr,K3e)=>{"use strict";f();var Y5=0,cse=1e3,use=(cse>>1)-1,ty,dse=Symbol("kFastTimer"),ry=[],fse=-2,pse=-1,z3e=0,$3e=1;function mse(){Y5+=use;let t=0,e=ry.length;for(;t<e;){let r=ry[t];r._state===z3e?(r._idleStart=Y5-use,r._state=$3e):r._state===$3e&&Y5>=r._idleStart+r._idleTimeout&&(r._state=pse,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===pse?(r._state=fse,--e!==0&&(ry[t]=ry[e])):++t}ry.length=e,ry.length!==0&&Y3e()}s(mse,"onTick");function Y3e(){ty?ty.refresh():(clearTimeout(ty),ty=setTimeout(mse,use),ty.unref&&ty.unref())}s(Y3e,"refreshTimeout");var $q=class{static{s(this,"FastTimer")}[dse]=!0;_state=fse;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,r,n){this._onTimeout=e,this._idleTimeout=r,this._timerArg=n,this.refresh()}refresh(){this._state===fse&&ry.push(this),(!ty||ry.length===1)&&Y3e(),this._state=z3e}clear(){this._state=pse,this._idleStart=-1}};K3e.exports={setTimeout(t,e,r){return e<=cse?setTimeout(t,e,r):new $q(t,e,r)},clearTimeout(t){t[dse]?t.clear():clearTimeout(t)},setFastTimeout(t,e,r){return new $q(t,e,r)},clearFastTimeout(t){t.clear()},now(){return Y5},tick(t=0){Y5+=t-cse+1,mse(),mse()},reset(){Y5=0,ry.length=0,clearTimeout(ty),ty=null},kFastTimer:dse}});var PD=G((RYr,tBe)=>{"use strict";f();var Pyt=require("node:net"),J3e=require("node:assert"),eBe=yi(),{InvalidArgumentError:Nyt,ConnectTimeoutError:Lyt}=yo(),zq=hse();function X3e(){}s(X3e,"noop");var gse,Ase;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?Ase=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let n=this._sessionCache.get(r);n!==void 0&&n.deref()===void 0&&this._sessionCache.delete(r)})}get(e){let r=this._sessionCache.get(e);return r?r.deref():null}set(e,r){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(r)),this._sessionRegistry.register(r,e))}}:Ase=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:n}=this._sessionCache.keys().next();this._sessionCache.delete(n)}this._sessionCache.set(e,r)}}};function Fyt({allowH2:t,maxCachedSessions:e,socketPath:r,timeout:n,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new Nyt("maxCachedSessions must be a positive integer or zero");let a={path:r,...o},l=new Ase(e??100);return n=n??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){gse||(gse=require("node:tls")),h=h||a.servername||eBe.getServerName(d)||null;let _=h||u;J3e(_);let k=i||l.get(_)||null;m=m||443,b=gse.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(B){l.set(_,B)})}else J3e(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=Pyt.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=Myt(new WeakRef(b),{timeout:n,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(Fyt,"buildConnector");var Myt=process.platform==="win32"?(t,e)=>{if(!e.timeout)return X3e;let r=null,n=null,i=zq.setFastTimeout(()=>{r=setImmediate(()=>{n=setImmediate(()=>Z3e(t.deref(),e))})},e.timeout);return()=>{zq.clearFastTimeout(i),clearImmediate(r),clearImmediate(n)}}:(t,e)=>{if(!e.timeout)return X3e;let r=null,n=zq.setFastTimeout(()=>{r=setImmediate(()=>{Z3e(t.deref(),e)})},e.timeout);return()=>{zq.clearFastTimeout(n),clearImmediate(r)}};function Z3e(t,e){if(t==null)return;let r="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${e.hostname}:${e.port},`,r+=` timeout: ${e.timeout}ms)`,eBe.destroy(t,new Lyt(r))}s(Z3e,"onConnectTimeout");tBe.exports=Fyt});var rBe=G(Yq=>{"use strict";f();Object.defineProperty(Yq,"__esModule",{value:!0});Yq.enumToMap=void 0;function Qyt(t){let e={};return Object.keys(t).forEach(r=>{let n=t[r];typeof n=="number"&&(e[r]=n)}),e}s(Qyt,"enumToMap");Yq.enumToMap=Qyt});var nBe=G(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var Oyt=rBe(),Uyt;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(Uyt=Ut.ERROR||(Ut.ERROR={}));var qyt;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(qyt=Ut.TYPE||(Ut.TYPE={}));var Wyt;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(Wyt=Ut.FLAGS||(Ut.FLAGS={}));var Gyt;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(Gyt=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var cn;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(cn=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[cn.DELETE,cn.GET,cn.HEAD,cn.POST,cn.PUT,cn.CONNECT,cn.OPTIONS,cn.TRACE,cn.COPY,cn.LOCK,cn.MKCOL,cn.MOVE,cn.PROPFIND,cn.PROPPATCH,cn.SEARCH,cn.UNLOCK,cn.BIND,cn.REBIND,cn.UNBIND,cn.ACL,cn.REPORT,cn.MKACTIVITY,cn.CHECKOUT,cn.MERGE,cn["M-SEARCH"],cn.NOTIFY,cn.SUBSCRIBE,cn.UNSUBSCRIBE,cn.PATCH,cn.PURGE,cn.MKCALENDAR,cn.LINK,cn.UNLINK,cn.PRI,cn.SOURCE];Ut.METHODS_ICE=[cn.SOURCE];Ut.METHODS_RTSP=[cn.OPTIONS,cn.DESCRIBE,cn.ANNOUNCE,cn.SETUP,cn.PLAY,cn.PAUSE,cn.TEARDOWN,cn.GET_PARAMETER,cn.SET_PARAMETER,cn.REDIRECT,cn.RECORD,cn.FLUSH,cn.GET,cn.POST];Ut.METHOD_MAP=Oyt.enumToMap(cn);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var Hyt;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(Hyt=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var K5;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(K5=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:K5.CONNECTION,"content-length":K5.CONTENT_LENGTH,"proxy-connection":K5.CONNECTION,"transfer-encoding":K5.TRANSFER_ENCODING,upgrade:K5.UPGRADE}});var yse=G((MYr,iBe)=>{"use strict";f();var{Buffer:jyt}=require("node:buffer");iBe.exports=jyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var sBe=G((OYr,oBe)=>{"use strict";f();var{Buffer:Vyt}=require("node:buffer");oBe.exports=Vyt.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var ND=G((qYr,mBe)=>{"use strict";f();var aBe=["GET","HEAD","POST"],$yt=new Set(aBe),zyt=[101,204,205,304],lBe=[301,302,303,307,308],Yyt=new Set(lBe),cBe=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],Kyt=new Set(cBe),uBe=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],Jyt=new Set(uBe),Xyt=["follow","manual","error"],dBe=["GET","HEAD","OPTIONS","TRACE"],Zyt=new Set(dBe),eCt=["navigate","same-origin","no-cors","cors"],tCt=["omit","same-origin","include"],rCt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],nCt=["content-encoding","content-language","content-location","content-type","content-length"],iCt=["half"],fBe=["CONNECT","TRACE","TRACK"],oCt=new Set(fBe),pBe=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],sCt=new Set(pBe);mBe.exports={subresource:pBe,forbiddenMethods:fBe,requestBodyHeader:nCt,referrerPolicy:uBe,requestRedirect:Xyt,requestMode:eCt,requestCredentials:tCt,requestCache:rCt,redirectStatus:lBe,corsSafeListedMethods:aBe,nullBodyStatus:zyt,safeMethods:dBe,badPorts:cBe,requestDuplex:iCt,subresourceSet:sCt,badPortsSet:Kyt,redirectStatusSet:Yyt,corsSafeListedMethodsSet:$yt,safeMethodsSet:Zyt,forbiddenMethodsSet:oCt,referrerPolicySet:Jyt}});var xse=G((GYr,hBe)=>{"use strict";f();var Cse=Symbol.for("undici.globalOrigin.1");function aCt(){return globalThis[Cse]}s(aCt,"getGlobalOrigin");function lCt(t){if(t===void 0){Object.defineProperty(globalThis,Cse,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,Cse,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(lCt,"setGlobalOrigin");hBe.exports={getGlobalOrigin:aCt,setGlobalOrigin:lCt}});var Sd=G((VYr,bBe)=>{"use strict";f();var Jq=require("node:assert"),cCt=new TextEncoder,LD=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,uCt=/[\u000A\u000D\u0009\u0020]/,dCt=/[\u0009\u000A\u000C\u000D\u0020]/g,fCt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function pCt(t){Jq(t.protocol==="data:");let e=yBe(t,!0);e=e.slice(5);let r={position:0},n=J5(",",e,r),i=n.length;if(n=CCt(n,!0,!0),r.position>=e.length)return"failure";r.position++;let o=e.slice(i+1),a=CBe(o);if(/;(\u0020){0,}base64$/i.test(n)){let c=vBe(a);if(a=hCt(c),a==="failure")return"failure";n=n.slice(0,-6),n=n.replace(/(\u0020)+$/,""),n=n.slice(0,-1)}n.startsWith(";")&&(n="text/plain"+n);let l=vse(n);return l==="failure"&&(l=vse("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(pCt,"dataURLProcessor");function yBe(t,e=!1){if(!e)return t.href;let r=t.href,n=t.hash.length,i=n===0?r:r.substring(0,r.length-n);return!n&&r.endsWith("#")?i.slice(0,-1):i}s(yBe,"URLSerializer");function Xq(t,e,r){let n="";for(;r.position<e.length&&t(e[r.position]);)n+=e[r.position],r.position++;return n}s(Xq,"collectASequenceOfCodePoints");function J5(t,e,r){let n=e.indexOf(t,r.position),i=r.position;return n===-1?(r.position=e.length,e.slice(i)):(r.position=n,e.slice(i,r.position))}s(J5,"collectASequenceOfCodePointsFast");function CBe(t){let e=cCt.encode(t);return mCt(e)}s(CBe,"stringPercentDecode");function gBe(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(gBe,"isHexCharByte");function ABe(t){return t>=48&&t<=57?t-48:(t&223)-55}s(ABe,"hexByteToNumber");function mCt(t){let e=t.length,r=new Uint8Array(e),n=0;for(let i=0;i<e;++i){let o=t[i];o!==37?r[n++]=o:o===37&&!(gBe(t[i+1])&&gBe(t[i+2]))?r[n++]=37:(r[n++]=ABe(t[i+1])<<4|ABe(t[i+2]),i+=2)}return e===n?r:r.subarray(0,n)}s(mCt,"percentDecode");function vse(t){t=Kq(t,!0,!0);let e={position:0},r=J5("/",t,e);if(r.length===0||!LD.test(r)||e.position>t.length)return"failure";e.position++;let n=J5(";",t,e);if(n=Kq(n,!1,!0),n.length===0||!LD.test(n))return"failure";let i=r.toLowerCase(),o=n.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,Xq(u=>uCt.test(u),t,e);let l=Xq(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=xBe(t,e,!0),J5(";",t,e);else if(c=J5(";",t,e),c=Kq(c,!1,!0),c.length===0)continue;l.length!==0&&LD.test(l)&&(c.length===0||fCt.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(vse,"parseMIMEType");function hCt(t){t=t.replace(dCt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let r=Buffer.from(t,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}s(hCt,"forgivingBase64");function xBe(t,e,r){let n=e.position,i="";for(Jq(t[e.position]==='"'),e.position++;i+=Xq(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Jq(o==='"');break}}return r?i:t.slice(n,e.position)}s(xBe,"collectAnHTTPQuotedString");function gCt(t){Jq(t!=="failure");let{parameters:e,essence:r}=t,n=r;for(let[i,o]of e.entries())n+=";",n+=i,n+="=",LD.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),n+=o;return n}s(gCt,"serializeAMimeType");function ACt(t){return t===13||t===10||t===9||t===32}s(ACt,"isHTTPWhiteSpace");function Kq(t,e=!0,r=!0){return bse(t,e,r,ACt)}s(Kq,"removeHTTPWhitespace");function yCt(t){return t===13||t===10||t===9||t===12||t===32}s(yCt,"isASCIIWhitespace");function CCt(t,e=!0,r=!0){return bse(t,e,r,yCt)}s(CCt,"removeASCIIWhitespace");function bse(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t.charCodeAt(i));)i++;if(r)for(;o>0&&n(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(bse,"removeChars");function vBe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let r="",n=0,i=65535;for(;n<e;)n+i>e&&(i=e-n),r+=String.fromCharCode.apply(null,t.subarray(n,n+=i));return r}s(vBe,"isomorphicDecode");function xCt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(xCt,"minimizeSupportedMimeType");bBe.exports={dataURLProcessor:pCt,URLSerializer:yBe,collectASequenceOfCodePoints:Xq,collectASequenceOfCodePointsFast:J5,stringPercentDecode:CBe,parseMIMEType:vse,collectAnHTTPQuotedString:xBe,serializeAMimeType:gCt,removeChars:bse,removeHTTPWhitespace:Kq,minimizeSupportedMimeType:xCt,HTTP_TOKEN_CODEPOINTS:LD,isomorphicDecode:vBe}});var Ac=G((YYr,EBe)=>{"use strict";f();var{types:Mg,inspect:vCt}=require("node:util"),{markAsUncloneable:bCt}=require("node:worker_threads"),{toUSVString:ECt}=yi(),Pt={};Pt.converters={};Pt.util={};Pt.errors={};Pt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Pt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",r=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Pt.errors.exception({header:t.prefix,message:r})};Pt.errors.invalidArgument=function(t){return Pt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Pt.brandCheck=function(t,e,r){if(r?.strict!==!1){if(!(t instanceof e)){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let n=new TypeError("Illegal invocation");throw n.code="ERR_INVALID_THIS",n}};Pt.argumentLengthCheck=function({length:t},e,r){if(t<e)throw Pt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:r})};Pt.illegalConstructor=function(){throw Pt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Pt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Pt.util.markAsUncloneable=bCt||(()=>{});Pt.util.ConvertToInt=function(t,e,r,n){let i,o;e===64?(i=Math.pow(2,53)-1,r==="unsigned"?o=0:o=Math.pow(-2,53)+1):r==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),n?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Pt.errors.exception({header:"Integer conversion",message:`Could not convert ${Pt.util.Stringify(t)} to an integer.`});if(a=Pt.util.IntegerPart(a),a<o||a>i)throw Pt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&n?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Pt.util.IntegerPart(a),a=a%Math.pow(2,e),r==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Pt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Pt.util.Stringify=function(t){switch(Pt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return vCt(t);case"String":return`"${t}"`;default:return`${t}`}};Pt.sequenceConverter=function(t){return(e,r,n,i)=>{if(Pt.util.Type(e)!=="Object")throw Pt.errors.exception({header:r,message:`${n} (${Pt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Pt.errors.exception({header:r,message:`${n} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,r,`${n}[${l++}]`))}return a}};Pt.recordConverter=function(t,e){return(r,n,i)=>{if(Pt.util.Type(r)!=="Object")throw Pt.errors.exception({header:n,message:`${i} ("${Pt.util.Type(r)}") is not an Object.`});let o={};if(!Mg.isProxy(r)){let l=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let c of l){let u=t(c,n,i),d=e(r[c],n,i);o[u]=d}return o}let a=Reflect.ownKeys(r);for(let l of a)if(Reflect.getOwnPropertyDescriptor(r,l)?.enumerable){let u=t(l,n,i),d=e(r[l],n,i);o[u]=d}return o}};Pt.interfaceConverter=function(t){return(e,r,n,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Pt.errors.exception({header:r,message:`Expected ${n} ("${Pt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Pt.dictionaryConverter=function(t){return(e,r,n)=>{let i=Pt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Pt.errors.exception({header:r,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Pt.errors.exception({header:r,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,r,`${n}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Pt.errors.exception({header:r,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Pt.nullableConverter=function(t){return(e,r,n)=>e===null?e:t(e,r,n)};Pt.converters.DOMString=function(t,e,r,n){if(t===null&&n?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Pt.errors.exception({header:e,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Pt.converters.ByteString=function(t,e,r){let n=Pt.converters.DOMString(t,e,r);for(let i=0;i<n.length;i++)if(n.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${n.charCodeAt(i)} which is greater than 255.`);return n};Pt.converters.USVString=ECt;Pt.converters.boolean=function(t){return!!t};Pt.converters.any=function(t){return t};Pt.converters["long long"]=function(t,e,r){return Pt.util.ConvertToInt(t,64,"signed",void 0,e,r)};Pt.converters["unsigned long long"]=function(t,e,r){return Pt.util.ConvertToInt(t,64,"unsigned",void 0,e,r)};Pt.converters["unsigned long"]=function(t,e,r){return Pt.util.ConvertToInt(t,32,"unsigned",void 0,e,r)};Pt.converters["unsigned short"]=function(t,e,r,n){return Pt.util.ConvertToInt(t,16,"unsigned",n,e,r)};Pt.converters.ArrayBuffer=function(t,e,r,n){if(Pt.util.Type(t)!=="Object"||!Mg.isAnyArrayBuffer(t))throw Pt.errors.conversionFailed({prefix:e,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(n?.allowShared===!1&&Mg.isSharedArrayBuffer(t))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.TypedArray=function(t,e,r,n,i){if(Pt.util.Type(t)!=="Object"||!Mg.isTypedArray(t)||t.constructor.name!==e.name)throw Pt.errors.conversionFailed({prefix:r,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Mg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.DataView=function(t,e,r,n){if(Pt.util.Type(t)!=="Object"||!Mg.isDataView(t))throw Pt.errors.exception({header:e,message:`${r} is not a DataView.`});if(n?.allowShared===!1&&Mg.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.BufferSource=function(t,e,r,n){if(Mg.isAnyArrayBuffer(t))return Pt.converters.ArrayBuffer(t,e,r,{...n,allowShared:!1});if(Mg.isTypedArray(t))return Pt.converters.TypedArray(t,t.constructor,e,r,{...n,allowShared:!1});if(Mg.isDataView(t))return Pt.converters.DataView(t,e,r,{...n,allowShared:!1});throw Pt.errors.conversionFailed({prefix:e,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:["BufferSource"]})};Pt.converters["sequence<ByteString>"]=Pt.sequenceConverter(Pt.converters.ByteString);Pt.converters["sequence<sequence<ByteString>>"]=Pt.sequenceConverter(Pt.converters["sequence<ByteString>"]);Pt.converters["record<ByteString, ByteString>"]=Pt.recordConverter(Pt.converters.ByteString,Pt.converters.ByteString);EBe.exports={webidl:Pt}});var B0=G((JYr,MBe)=>{"use strict";f();var{Transform:ICt}=require("node:stream"),IBe=require("node:zlib"),{redirectStatusSet:TCt,referrerPolicySet:wCt,badPortsSet:_Ct}=ND(),{getGlobalOrigin:TBe}=xse(),{collectASequenceOfCodePoints:E2,collectAnHTTPQuotedString:SCt,removeChars:RCt,parseMIMEType:kCt}=Sd(),{performance:BCt}=require("node:perf_hooks"),{isBlobLike:DCt,ReadableStreamFrom:PCt,isValidHTTPToken:wBe,normalizedMethodRecordsBase:NCt}=yi(),I2=require("node:assert"),{isUint8Array:LCt}=require("node:util/types"),{webidl:FD}=Ac(),_Be=[],eW;try{eW=require("node:crypto");let t=["sha256","sha384","sha512"];_Be=eW.getHashes().filter(e=>t.includes(e))}catch{}function SBe(t){let e=t.urlList,r=e.length;return r===0?null:e[r-1].toString()}s(SBe,"responseURL");function FCt(t,e){if(!TCt.has(t.status))return null;let r=t.headersList.get("location",!0);return r!==null&&kBe(r)&&(RBe(r)||(r=MCt(r)),r=new URL(r,SBe(t))),r&&!r.hash&&(r.hash=e),r}s(FCt,"responseLocationURL");function RBe(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>126||r<32)return!1}return!0}s(RBe,"isValidEncodedURL");function MCt(t){return Buffer.from(t,"binary").toString("utf8")}s(MCt,"normalizeBinaryStringToUtf8");function QD(t){return t.urlList[t.urlList.length-1]}s(QD,"requestCurrentURL");function QCt(t){let e=QD(t);return LBe(e)&&_Ct.has(e.port)?"blocked":"allowed"}s(QCt,"requestBadPort");function OCt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(OCt,"isErrorLike");function UCt(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}s(UCt,"isValidReasonPhrase");var qCt=wBe;function kBe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(kBe,"isValidHeaderValue");function WCt(t,e){let{headersList:r}=e,n=(r.get("referrer-policy",!0)??"").split(","),i="";if(n.length>0)for(let o=n.length;o!==0;o--){let a=n[o-1].trim();if(wCt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(WCt,"setRequestReferrerPolicyOnRedirect");function GCt(){return"allowed"}s(GCt,"crossOriginResourcePolicyCheck");function HCt(){return"success"}s(HCt,"corsCheck");function jCt(){return"success"}s(jCt,"TAOCheck");function VCt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(VCt,"appendFetchMetadata");function $Ct(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&Ise(t.origin)&&!Ise(QD(t))&&(e=null);break;case"same-origin":tW(t,QD(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s($Ct,"appendRequestOriginHeader");function X5(t,e){return t}s(X5,"coarsenTime");function zCt(t,e,r){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:X5(t.domainLookupStartTime,r),domainLookupEndTime:X5(t.domainLookupEndTime,r),connectionStartTime:X5(t.connectionStartTime,r),connectionEndTime:X5(t.connectionEndTime,r),secureConnectionStartTime:X5(t.secureConnectionStartTime,r),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(zCt,"clampAndCoarsenConnectionTimingInfo");function YCt(t){return X5(BCt.now(),t)}s(YCt,"coarsenedSharedCurrentTime");function KCt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(KCt,"createOpaqueTimingInfo");function BBe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(BBe,"makePolicyContainer");function JCt(t){return{referrerPolicy:t.referrerPolicy}}s(JCt,"clonePolicyContainer");function XCt(t){let e=t.referrerPolicy;I2(e);let r=null;if(t.referrer==="client"){let l=TBe();if(!l||l.origin==="null")return"no-referrer";r=new URL(l)}else t.referrer instanceof URL&&(r=t.referrer);let n=Ese(r),i=Ese(r,!0);n.toString().length>4096&&(n=i);let o=tW(t,n),a=MD(n)&&!MD(t.url);switch(e){case"origin":return i??Ese(r,!0);case"unsafe-url":return n;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?n:i;case"strict-origin-when-cross-origin":{let l=QD(t);return tW(n,l)?n:MD(n)&&!MD(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(XCt,"determineRequestsReferrer");function Ese(t,e){return I2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(Ese,"stripURLForReferrer");function MD(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(r){if(r==null||r==="null")return!1;let n=new URL(r);return!!(n.protocol==="https:"||n.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(n.hostname)||n.hostname==="localhost"||n.hostname.includes("localhost.")||n.hostname.endsWith(".localhost"))}}s(MD,"isURLPotentiallyTrustworthy");function ZCt(t,e){if(eW===void 0)return!0;let r=DBe(e);if(r==="no metadata"||r.length===0)return!0;let n=txt(r),i=rxt(r,n);for(let o of i){let a=o.algo,l=o.hash,c=eW.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),nxt(c,l))return!0}return!1}s(ZCt,"bytesMatch");var ext=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function DBe(t){let e=[],r=!0;for(let n of t.split(" ")){r=!1;let i=ext.exec(n);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();_Be.includes(o)&&e.push(i.groups)}return r===!0?"no metadata":e}s(DBe,"parseMetadata");function txt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let r=1;r<t.length;++r){let n=t[r];if(n.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;n.algo[3]==="3"&&(e="sha384")}}return e}s(txt,"getStrongestMetadata");function rxt(t,e){if(t.length===1)return t;let r=0;for(let n=0;n<t.length;++n)t[n].algo===e&&(t[r++]=t[n]);return t.length=r,t}s(rxt,"filterMetadataListByAlgorithm");function nxt(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r]){if(t[r]==="+"&&e[r]==="-"||t[r]==="/"&&e[r]==="_")continue;return!1}return!0}s(nxt,"compareBase64Mixed");function ixt(t){}s(ixt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function tW(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(tW,"sameOrigin");function oxt(){let t,e;return{promise:new Promise((n,i)=>{t=n,e=i}),resolve:t,reject:e}}s(oxt,"createDeferredPromise");function sxt(t){return t.controller.state==="aborted"}s(sxt,"isAborted");function axt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(axt,"isCancelled");function lxt(t){return NCt[t.toLowerCase()]??t}s(lxt,"normalizeMethod");function cxt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return I2(typeof e=="string"),e}s(cxt,"serializeJavascriptValueToJSONString");var uxt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function PBe(t,e,r=0,n=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[r]:u,[n]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,uxt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(PBe,"createIterator");function dxt(t,e,r,n=0,i=1){let o=PBe(t,r,n,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return FD.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return FD.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return FD.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(FD.brandCheck(this,e),FD.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(dxt,"iteratorMixin");async function fxt(t,e,r){let n=e,i=r,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{n(await NBe(o))}catch(a){i(a)}}s(fxt,"fullyReadBody");function pxt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(pxt,"isReadableStreamLike");function mxt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(mxt,"readableStreamClose");var hxt=/[^\x00-\xFF]/;function Zq(t){return I2(!hxt.test(t)),t}s(Zq,"isomorphicEncode");async function NBe(t){let e=[],r=0;for(;;){let{done:n,value:i}=await t.read();if(n)return Buffer.concat(e,r);if(!LCt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),r+=i.length}}s(NBe,"readAllBytes");function gxt(t){I2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(gxt,"urlIsLocal");function Ise(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(Ise,"urlHasHttpsScheme");function LBe(t){I2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(LBe,"urlIsHttpHttpsScheme");function Axt(t,e){let r=t;if(!r.startsWith("bytes"))return"failure";let n={position:5};if(e&&E2(c=>c==="	"||c===" ",r,n),r.charCodeAt(n.position)!==61)return"failure";n.position++,e&&E2(c=>c==="	"||c===" ",r,n);let i=E2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},r,n),o=i.length?Number(i):null;if(e&&E2(c=>c==="	"||c===" ",r,n),r.charCodeAt(n.position)!==45)return"failure";n.position++,e&&E2(c=>c==="	"||c===" ",r,n);let a=E2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},r,n),l=a.length?Number(a):null;return n.position<r.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(Axt,"simpleRangeHeaderValue");function yxt(t,e,r){let n="bytes ";return n+=Zq(`${t}`),n+="-",n+=Zq(`${e}`),n+="/",n+=Zq(`${r}`),n}s(yxt,"buildContentRange");var Tse=class extends ICt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,r,n){if(!this._inflateStream){if(e.length===0){n();return}this._inflateStream=(e[0]&15)===8?IBe.createInflate(this.#e):IBe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,r,n)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function Cxt(t){return new Tse(t)}s(Cxt,"createInflate");function xxt(t){let e=null,r=null,n=null,i=FBe("content-type",t);if(i===null)return"failure";for(let o of i){let a=kCt(o);a==="failure"||a.essence==="*/*"||(n=a,n.essence!==r?(e=null,n.parameters.has("charset")&&(e=n.parameters.get("charset")),r=n.essence):!n.parameters.has("charset")&&e!==null&&n.parameters.set("charset",e))}return n??"failure"}s(xxt,"extractMimeType");function vxt(t){let e=t,r={position:0},n=[],i="";for(;r.position<e.length;){if(i+=E2(o=>o!=='"'&&o!==",",e,r),r.position<e.length)if(e.charCodeAt(r.position)===34){if(i+=SCt(e,r),r.position<e.length)continue}else I2(e.charCodeAt(r.position)===44),r.position++;i=RCt(i,!0,!0,o=>o===9||o===32),n.push(i),i=""}return n}s(vxt,"gettingDecodingSplitting");function FBe(t,e){let r=e.get(t,!0);return r===null?null:vxt(r)}s(FBe,"getDecodeSplit");var bxt=new TextDecoder;function Ext(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),bxt.decode(t))}s(Ext,"utf8DecodeBytes");var wse=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return TBe()}get origin(){return this.baseUrl?.origin}policyContainer=BBe()},_se=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new wse},Ixt=new _se;MBe.exports={isAborted:sxt,isCancelled:axt,isValidEncodedURL:RBe,createDeferredPromise:oxt,ReadableStreamFrom:PCt,tryUpgradeRequestToAPotentiallyTrustworthyURL:ixt,clampAndCoarsenConnectionTimingInfo:zCt,coarsenedSharedCurrentTime:YCt,determineRequestsReferrer:XCt,makePolicyContainer:BBe,clonePolicyContainer:JCt,appendFetchMetadata:VCt,appendRequestOriginHeader:$Ct,TAOCheck:jCt,corsCheck:HCt,crossOriginResourcePolicyCheck:GCt,createOpaqueTimingInfo:KCt,setRequestReferrerPolicyOnRedirect:WCt,isValidHTTPToken:wBe,requestBadPort:QCt,requestCurrentURL:QD,responseURL:SBe,responseLocationURL:FCt,isBlobLike:DCt,isURLPotentiallyTrustworthy:MD,isValidReasonPhrase:UCt,sameOrigin:tW,normalizeMethod:lxt,serializeJavascriptValueToJSONString:cxt,iteratorMixin:dxt,createIterator:PBe,isValidHeaderName:qCt,isValidHeaderValue:kBe,isErrorLike:OCt,fullyReadBody:fxt,bytesMatch:ZCt,isReadableStreamLike:pxt,readableStreamClose:mxt,isomorphicEncode:Zq,urlIsLocal:gxt,urlHasHttpsScheme:Ise,urlIsHttpHttpsScheme:LBe,readAllBytes:NBe,simpleRangeHeaderValue:Axt,buildContentRange:yxt,parseMetadata:DBe,createInflate:Cxt,extractMimeType:xxt,getDecodeSplit:FBe,utf8DecodeBytes:Ext,environmentSettingsObject:Ixt}});var Sv=G((eKr,QBe)=>{"use strict";f();QBe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Rse=G((rKr,OBe)=>{"use strict";f();var{Blob:Txt,File:wxt}=require("node:buffer"),{kState:ny}=Sv(),{webidl:Qg}=Ac(),Sse=class t{static{s(this,"FileLike")}constructor(e,r,n={}){let i=r,o=n.type,a=n.lastModified??Date.now();this[ny]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Qg.brandCheck(this,t),this[ny].blobLike.stream(...e)}arrayBuffer(...e){return Qg.brandCheck(this,t),this[ny].blobLike.arrayBuffer(...e)}slice(...e){return Qg.brandCheck(this,t),this[ny].blobLike.slice(...e)}text(...e){return Qg.brandCheck(this,t),this[ny].blobLike.text(...e)}get size(){return Qg.brandCheck(this,t),this[ny].blobLike.size}get type(){return Qg.brandCheck(this,t),this[ny].blobLike.type}get name(){return Qg.brandCheck(this,t),this[ny].name}get lastModified(){return Qg.brandCheck(this,t),this[ny].lastModified}get[Symbol.toStringTag](){return"File"}};Qg.converters.Blob=Qg.interfaceConverter(Txt);function _xt(t){return t instanceof wxt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(_xt,"isFileLike");OBe.exports={FileLike:Sse,isFileLike:_xt}});var UD=G((oKr,HBe)=>{"use strict";f();var{isBlobLike:rW,iteratorMixin:Sxt}=B0(),{kState:Qu}=Sv(),{kEnumerableProperty:Z5}=yi(),{FileLike:UBe,isFileLike:Rxt}=Rse(),{webidl:ts}=Ac(),{File:GBe}=require("node:buffer"),qBe=require("node:util"),WBe=globalThis.File??GBe,OD=class t{static{s(this,"FormData")}constructor(e){if(ts.util.markAsUncloneable(this),e!==void 0)throw ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Qu]=[]}append(e,r,n=void 0){ts.brandCheck(this,t);let i="FormData.append";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!rW(r))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),r=rW(r)?ts.converters.Blob(r,i,"value",{strict:!1}):ts.converters.USVString(r,i,"value"),n=arguments.length===3?ts.converters.USVString(n,i,"filename"):void 0;let o=kse(e,r,n);this[Qu].push(o)}delete(e){ts.brandCheck(this,t);let r="FormData.delete";ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Qu]=this[Qu].filter(n=>n.name!==e)}get(e){ts.brandCheck(this,t);let r="FormData.get";ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name");let n=this[Qu].findIndex(i=>i.name===e);return n===-1?null:this[Qu][n].value}getAll(e){ts.brandCheck(this,t);let r="FormData.getAll";return ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Qu].filter(n=>n.name===e).map(n=>n.value)}has(e){ts.brandCheck(this,t);let r="FormData.has";return ts.argumentLengthCheck(arguments,1,r),e=ts.converters.USVString(e,r,"name"),this[Qu].findIndex(n=>n.name===e)!==-1}set(e,r,n=void 0){ts.brandCheck(this,t);let i="FormData.set";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!rW(r))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),r=rW(r)?ts.converters.Blob(r,i,"name",{strict:!1}):ts.converters.USVString(r,i,"name"),n=arguments.length===3?ts.converters.USVString(n,i,"name"):void 0;let o=kse(e,r,n),a=this[Qu].findIndex(l=>l.name===e);a!==-1?this[Qu]=[...this[Qu].slice(0,a),o,...this[Qu].slice(a+1).filter(l=>l.name!==e)]:this[Qu].push(o)}[qBe.inspect.custom](e,r){let n=this[Qu].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});r.depth??=e,r.colors??=!0;let i=qBe.formatWithOptions(r,n);return`FormData ${i.slice(i.indexOf("]")+2)}`}};Sxt("FormData",OD,Qu,"name","value");Object.defineProperties(OD.prototype,{append:Z5,delete:Z5,get:Z5,getAll:Z5,has:Z5,set:Z5,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function kse(t,e,r){if(typeof e!="string"){if(Rxt(e)||(e=e instanceof Blob?new WBe([e],"blob",{type:e.type}):new UBe(e,"blob",{type:e.type})),r!==void 0){let n={type:e.type,lastModified:e.lastModified};e=e instanceof GBe?new WBe([e],r,n):new UBe(e,r,n)}}return{name:t,value:e}}s(kse,"makeEntry");HBe.exports={FormData:OD,makeEntry:kse}});var KBe=G((lKr,YBe)=>{"use strict";f();var{isUSVString:jBe,bufferToLowerCasedHeaderName:kxt}=yi(),{utf8DecodeBytes:Bxt}=B0(),{HTTP_TOKEN_CODEPOINTS:Dxt,isomorphicDecode:VBe}=Sd(),{isFileLike:Pxt}=Rse(),{makeEntry:Nxt}=UD(),nW=require("node:assert"),{File:Lxt}=require("node:buffer"),Fxt=globalThis.File??Lxt,Mxt=Buffer.from('form-data; name="'),$Be=Buffer.from("; filename"),Qxt=Buffer.from("--"),Oxt=Buffer.from(`--\r
`);function Uxt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(Uxt,"isAsciiString");function qxt(t){let e=t.length;if(e<27||e>70)return!1;for(let r=0;r<e;++r){let n=t.charCodeAt(r);if(!(n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||n===39||n===45||n===95))return!1}return!0}s(qxt,"validateBoundary");function Wxt(t,e){nW(e!=="failure"&&e.essence==="multipart/form-data");let r=e.parameters.get("boundary");if(r===void 0)return"failure";let n=Buffer.from(`--${r}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+n.length).equals(n))o.position+=n.length;else return"failure";if(o.position===t.length-2&&iW(t,Qxt,o)||o.position===t.length-4&&iW(t,Oxt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=Gxt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(n.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",Uxt(d)||(d=""),h=new Fxt([m],u,{type:d})):h=Bxt(Buffer.from(m)),nW(jBe(c)),nW(typeof h=="string"&&jBe(h)||Pxt(h)),i.push(Nxt(c,h,u))}}s(Wxt,"multipartFormDataParser");function Gxt(t,e){let r=null,n=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return r===null?"failure":{name:r,filename:n,contentType:i,encoding:o};let a=e4(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Bse(a,!0,!0,l=>l===9||l===32),!Dxt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,e4(l=>l===32||l===9,t,e),kxt(a)){case"content-disposition":{if(r=n=null,!iW(t,Mxt,e)||(e.position+=17,r=zBe(t,e),r===null))return"failure";if(iW(t,$Be,e)){let l=e.position+$Be.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,n=zBe(t,e),n===null))return"failure"}break}case"content-type":{let l=e4(c=>c!==10&&c!==13,t,e);l=Bse(l,!1,!0,c=>c===9||c===32),i=VBe(l);break}case"content-transfer-encoding":{let l=e4(c=>c!==10&&c!==13,t,e);l=Bse(l,!1,!0,c=>c===9||c===32),o=VBe(l);break}default:e4(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(Gxt,"parseMultipartFormDataHeaders");function zBe(t,e){nW(t[e.position-1]===34);let r=e4(n=>n!==10&&n!==13&&n!==34,t,e);return t[e.position]!==34?null:(e.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r)}s(zBe,"parseMultipartFormDataName");function e4(t,e,r){let n=r.position;for(;n<e.length&&t(e[n]);)++n;return e.subarray(r.position,r.position=n)}s(e4,"collectASequenceOfBytes");function Bse(t,e,r,n){let i=0,o=t.length-1;if(e)for(;i<t.length&&n(t[i]);)i++;if(r)for(;o>0&&n(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Bse,"removeChars");function iW(t,e,r){if(t.length<e.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[r.position+n])return!1;return!0}s(iW,"bufferStartsWith");YBe.exports={multipartFormDataParser:Wxt,validateBoundary:qxt}});var n4=G((dKr,i8e)=>{"use strict";f();var qD=yi(),{ReadableStreamFrom:Hxt,isBlobLike:JBe,isReadableStreamLike:jxt,readableStreamClose:Vxt,createDeferredPromise:$xt,fullyReadBody:zxt,extractMimeType:Yxt,utf8DecodeBytes:e8e}=B0(),{FormData:XBe}=UD(),{kState:r4}=Sv(),{webidl:Kxt}=Ac(),{Blob:Jxt}=require("node:buffer"),Dse=require("node:assert"),{isErrored:t8e,isDisturbed:Xxt}=require("node:stream"),{isArrayBuffer:Zxt}=require("node:util/types"),{serializeAMimeType:evt}=Sd(),{multipartFormDataParser:tvt}=KBe(),Pse;try{let t=require("node:crypto");Pse=s(e=>t.randomInt(0,e),"random")}catch{Pse=s(t=>Math.floor(Math.random(t)),"random")}var oW=new TextEncoder;function rvt(){}s(rvt,"noop");var Nse=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Lse;Nse&&(Lse=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!Xxt(e)&&!t8e(e)&&e.cancel("Response object has been garbage collected").catch(rvt)}));function r8e(t,e=!1){let r=null;t instanceof ReadableStream?r=t:JBe(t)?r=t.stream():r=new ReadableStream({async pull(c){let u=typeof i=="string"?oW.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>Vxt(c))},start(){},type:"bytes"}),Dse(jxt(r));let n=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(Zxt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(qD.isFormDataLike(t)){let c=`----formdata-undici-0${`${Pse(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=oW.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=oW.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=oW.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,n=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(JBe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(qD.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");r=t instanceof ReadableStream?t:Hxt(t)}if((typeof i=="string"||qD.isBuffer(i))&&(o=Buffer.byteLength(i)),n!=null){let c;r=new ReadableStream({async start(){c=n(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!t8e(r)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:r,source:i,length:o},a]}s(r8e,"extractBody");function nvt(t,e=!1){return t instanceof ReadableStream&&(Dse(!qD.isDisturbed(t),"The body has already been consumed."),Dse(!t.locked,"The stream is locked.")),r8e(t,e)}s(nvt,"safelyExtractBody");function ivt(t,e){let[r,n]=e.stream.tee();return Nse&&Lse.register(t,new WeakRef(r)),e.stream=r,{stream:n,length:e.length,source:e.source}}s(ivt,"cloneBody");function ovt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(ovt,"throwIfAborted");function svt(t){return{blob(){return t4(this,r=>{let n=ZBe(this);return n===null?n="":n&&(n=evt(n)),new Jxt([r],{type:n})},t)},arrayBuffer(){return t4(this,r=>new Uint8Array(r).buffer,t)},text(){return t4(this,e8e,t)},json(){return t4(this,lvt,t)},formData(){return t4(this,r=>{let n=ZBe(this);if(n!==null)switch(n.essence){case"multipart/form-data":{let i=tvt(r,n);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new XBe;return o[r4]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(r.toString()),o=new XBe;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return t4(this,r=>new Uint8Array(r),t)}}}s(svt,"bodyMixinMethods");function avt(t){Object.assign(t.prototype,svt(t))}s(avt,"mixinBody");async function t4(t,e,r){if(Kxt.brandCheck(t,r),n8e(t))throw new TypeError("Body is unusable: Body has already been read");ovt(t[r4]);let n=$xt(),i=s(a=>n.reject(a),"errorSteps"),o=s(a=>{try{n.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[r4].body==null?(o(Buffer.allocUnsafe(0)),n.promise):(await zxt(t[r4].body,o,i),n.promise)}s(t4,"consumeBody");function n8e(t){let e=t[r4].body;return e!=null&&(e.stream.locked||qD.isDisturbed(e.stream))}s(n8e,"bodyUnusable");function lvt(t){return JSON.parse(e8e(t))}s(lvt,"parseJSONFromBytes");function ZBe(t){let e=t[r4].headersList,r=Yxt(e);return r==="failure"?null:r}s(ZBe,"bodyMimeType");i8e.exports={extractBody:r8e,safelyExtractBody:nvt,cloneBody:ivt,mixinBody:avt,streamRegistry:Lse,hasFinalizationRegistry:Nse,bodyUnusable:n8e}});var h8e=G((mKr,m8e)=>{"use strict";f();var En=require("node:assert"),Vn=yi(),{channels:o8e}=H5(),Fse=hse(),{RequestContentLengthMismatchError:T2,ResponseContentLengthMismatchError:cvt,RequestAbortedError:d8e,HeadersTimeoutError:uvt,HeadersOverflowError:dvt,SocketError:dW,InformationalError:i4,BodyTimeoutError:fvt,HTTPParserError:pvt,ResponseExceededMaxSizeError:mvt}=yo(),{kUrl:f8e,kReset:Rd,kClient:Use,kParser:da,kBlocking:HD,kRunning:Zc,kPending:hvt,kSize:s8e,kWriting:kv,kQueue:Qm,kNoRef:WD,kKeepAliveDefaultTimeout:gvt,kHostHeader:Avt,kPendingIdx:yvt,kRunningIdx:ap,kError:lp,kPipelining:cW,kSocket:o4,kKeepAliveTimeoutValue:fW,kMaxHeadersSize:Mse,kKeepAliveMaxTimeout:Cvt,kKeepAliveTimeoutThreshold:xvt,kHeadersTimeout:vvt,kBodyTimeout:bvt,kStrictContentLength:qse,kMaxRequests:a8e,kCounter:Evt,kMaxResponseSize:Ivt,kOnError:Tvt,kResume:Rv,kHTTPContext:p8e}=Qs(),Og=nBe(),wvt=Buffer.alloc(0),sW=Buffer[Symbol.species],aW=Vn.addListener,_vt=Vn.removeAllListeners,Qse;async function Svt(){let t=process.env.JEST_WORKER_ID?yse():void 0,e;try{e=await WebAssembly.compile(sBe())}catch{e=await WebAssembly.compile(t||yse())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((r,n,i)=>0,"wasm_on_url"),wasm_on_status:s((r,n,i)=>{En(hl.ptr===r);let o=n-qg+Ug.byteOffset;return hl.onStatus(new sW(Ug.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(r=>(En(hl.ptr===r),hl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((r,n,i)=>{En(hl.ptr===r);let o=n-qg+Ug.byteOffset;return hl.onHeaderField(new sW(Ug.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((r,n,i)=>{En(hl.ptr===r);let o=n-qg+Ug.byteOffset;return hl.onHeaderValue(new sW(Ug.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((r,n,i,o)=>(En(hl.ptr===r),hl.onHeadersComplete(n,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((r,n,i)=>{En(hl.ptr===r);let o=n-qg+Ug.byteOffset;return hl.onBody(new sW(Ug.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(r=>(En(hl.ptr===r),hl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(Svt,"lazyllhttp");var Ose=null,Wse=Svt();Wse.catch();var hl=null,Ug=null,lW=0,qg=null,Rvt=0,GD=1,s4=2|GD,uW=4|GD,Gse=8|Rvt,Hse=class{static{s(this,"Parser")}constructor(e,r,{exports:n}){En(Number.isFinite(e[Mse])&&e[Mse]>0),this.llhttp=n,this.ptr=this.llhttp.llhttp_alloc(Og.TYPE.RESPONSE),this.client=e,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Mse],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[Ivt]}setTimeout(e,r){e!==this.timeoutValue||r&GD^this.timeoutType&GD?(this.timeout&&(Fse.clearTimeout(this.timeout),this.timeout=null),e&&(r&GD?this.timeout=Fse.setFastTimeout(l8e,e,new WeakRef(this)):(this.timeout=setTimeout(l8e,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(En(this.ptr!=null),En(hl==null),this.llhttp.llhttp_resume(this.ptr),En(this.timeoutType===uW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||wvt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){En(this.ptr!=null),En(hl==null),En(!this.paused);let{socket:r,llhttp:n}=this;e.length>lW&&(qg&&n.free(qg),lW=Math.ceil(e.length/4096)*4096,qg=n.malloc(lW)),new Uint8Array(n.memory.buffer,qg,lW).set(e);try{let i;try{Ug=e,hl=this,i=n.llhttp_execute(this.ptr,qg,e.length)}catch(a){throw a}finally{hl=null,Ug=null}let o=n.llhttp_get_error_pos(this.ptr)-qg;if(i===Og.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Og.ERROR.PAUSED)this.paused=!0,r.unshift(e.slice(o));else if(i!==Og.ERROR.OK){let a=n.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(n.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(n.memory.buffer,a,c).toString()+")"}throw new pvt(l,Og.ERROR[i],e.slice(o))}}catch(i){Vn.destroy(r,i)}}destroy(){En(this.ptr!=null),En(hl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Fse.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:r}=this;if(e.destroyed)return-1;let n=r[Qm][r[ap]];if(!n)return-1;n.onResponseStarted()}onHeaderField(e){let r=this.headers.length;(r&1)===0?this.headers.push(e):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let r=this.headers.length;(r&1)===1?(this.headers.push(e),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],e]);let n=this.headers[r-2];if(n.length===10){let i=Vn.bufferToLowerCasedHeaderName(n);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else n.length===14&&Vn.bufferToLowerCasedHeaderName(n)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&Vn.destroy(this.socket,new dvt)}onUpgrade(e){let{upgrade:r,client:n,socket:i,headers:o,statusCode:a}=this;En(r),En(n[o4]===i),En(!i.destroyed),En(!this.paused),En((o.length&1)===0);let l=n[Qm][n[ap]];En(l),En(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[da].destroy(),i[da]=null,i[Use]=null,i[lp]=null,_vt(i),n[o4]=null,n[p8e]=null,n[Qm][n[ap]++]=null,n.emit("disconnect",n[f8e],[n],new i4("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){Vn.destroy(i,c)}n[Rv]()}onHeadersComplete(e,r,n){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[Qm][i[ap]];if(!c)return-1;if(En(!this.upgrade),En(this.statusCode<200),e===100)return Vn.destroy(o,new dW("bad response",Vn.getSocketInfo(o))),-1;if(r&&!c.upgrade)return Vn.destroy(o,new dW("bad upgrade",Vn.getSocketInfo(o))),-1;if(En(this.timeoutType===s4),this.statusCode=e,this.shouldKeepAlive=n||c.method==="HEAD"&&!o[Rd]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[bvt];this.setTimeout(d,uW)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return En(i[Zc]===1),this.upgrade=!0,2;if(r)return En(i[Zc]===1),this.upgrade=!0,2;if(En((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[cW]){let d=this.keepAlive?Vn.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[xvt],i[Cvt]);p<=0?o[Rd]=!0:i[fW]=p}else i[fW]=i[gvt]}else o[Rd]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[HD]&&(o[HD]=!1,i[Rv]()),u?Og.ERROR.PAUSED:0)}onBody(e){let{client:r,socket:n,statusCode:i,maxResponseSize:o}=this;if(n.destroyed)return-1;let a=r[Qm][r[ap]];if(En(a),En(this.timeoutType===uW),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),En(i>=200),o>-1&&this.bytesRead+e.length>o)return Vn.destroy(n,new mvt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Og.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:r,statusCode:n,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(r.destroyed&&(!n||c))return-1;if(i)return;En(n>=100),En((this.headers.length&1)===0);let u=e[Qm][e[ap]];if(En(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(n<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return Vn.destroy(r,new cvt),-1;if(u.onComplete(o),e[Qm][e[ap]++]=null,r[kv])return En(e[Zc]===0),Vn.destroy(r,new i4("reset")),Og.ERROR.PAUSED;if(c){if(r[Rd]&&e[Zc]===0)return Vn.destroy(r,new i4("reset")),Og.ERROR.PAUSED;e[cW]==null||e[cW]===1?setImmediate(()=>e[Rv]()):e[Rv]()}else return Vn.destroy(r,new i4("reset")),Og.ERROR.PAUSED}}};function l8e(t){let{socket:e,timeoutType:r,client:n,paused:i}=t.deref();r===s4?(!e[kv]||e.writableNeedDrain||n[Zc]>1)&&(En(!i,"cannot be paused while waiting for headers"),Vn.destroy(e,new uvt)):r===uW?i||Vn.destroy(e,new fvt):r===Gse&&(En(n[Zc]===0&&n[fW]),Vn.destroy(e,new i4("socket idle timeout")))}s(l8e,"onParserTimeout");async function kvt(t,e){t[o4]=e,Ose||(Ose=await Wse,Wse=null),e[WD]=!1,e[kv]=!1,e[Rd]=!1,e[HD]=!1,e[da]=new Hse(t,e,Ose),aW(e,"error",function(n){En(n.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[da];if(n.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[lp]=n,this[Use][Tvt](n)}),aW(e,"readable",function(){let n=this[da];n&&n.readMore()}),aW(e,"end",function(){let n=this[da];if(n.statusCode&&!n.shouldKeepAlive){n.onMessageComplete();return}Vn.destroy(this,new dW("other side closed",Vn.getSocketInfo(this)))}),aW(e,"close",function(){let n=this[Use],i=this[da];i&&(!this[lp]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[da].destroy(),this[da]=null);let o=this[lp]||new dW("closed",Vn.getSocketInfo(this));if(n[o4]=null,n[p8e]=null,n.destroyed){En(n[hvt]===0);let a=n[Qm].splice(n[ap]);for(let l=0;l<a.length;l++){let c=a[l];Vn.errorRequest(n,c,o)}}else if(n[Zc]>0&&o.code!=="UND_ERR_INFO"){let a=n[Qm][n[ap]];n[Qm][n[ap]++]=null,Vn.errorRequest(n,a,o)}n[yvt]=n[ap],En(n[Zc]===0),n.emit("disconnect",n[f8e],[n],o),n[Rv]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h1",defaultPipelining:1,write(...n){return Pvt(t,...n)},resume(){Bvt(t)},destroy(n,i){r?queueMicrotask(i):e.destroy(n).on("close",i)},get destroyed(){return e.destroyed},busy(n){return!!(e[kv]||e[Rd]||e[HD]||n&&(t[Zc]>0&&!n.idempotent||t[Zc]>0&&(n.upgrade||n.method==="CONNECT")||t[Zc]>0&&Vn.bodyLength(n.body)!==0&&(Vn.isStream(n.body)||Vn.isAsyncIterable(n.body)||Vn.isFormDataLike(n.body))))}}}s(kvt,"connectH1");function Bvt(t){let e=t[o4];if(e&&!e.destroyed){if(t[s8e]===0?!e[WD]&&e.unref&&(e.unref(),e[WD]=!0):e[WD]&&e.ref&&(e.ref(),e[WD]=!1),t[s8e]===0)e[da].timeoutType!==Gse&&e[da].setTimeout(t[fW],Gse);else if(t[Zc]>0&&e[da].statusCode<200&&e[da].timeoutType!==s4){let r=t[Qm][t[ap]],n=r.headersTimeout!=null?r.headersTimeout:t[vvt];e[da].setTimeout(n,s4)}}}s(Bvt,"resumeH1");function Dvt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Dvt,"shouldSendContentLength");function Pvt(t,e){let{method:r,path:n,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(Vn.isFormDataLike(c)){Qse||(Qse=n4().extractBody);let[v,b]=Qse(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else Vn.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=Vn.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),Dvt(r)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[qse])return Vn.errorRequest(t,e,new T2),!1;process.emitWarning(new T2)}let h=t[o4],g=s(v=>{e.aborted||e.completed||(Vn.errorRequest(t,e,v||new d8e),Vn.destroy(c),Vn.destroy(h,new i4("aborted")))},"abort");try{e.onConnect(g)}catch(v){Vn.errorRequest(t,e,v)}if(e.aborted)return!1;r==="HEAD"&&(h[Rd]=!0),(o||r==="CONNECT")&&(h[Rd]=!0),l!=null&&(h[Rd]=l),t[a8e]&&h[Evt]++>=t[a8e]&&(h[Rd]=!0),a&&(h[HD]=!0);let y=`${r} ${n} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[Avt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[cW]&&!h[Rd]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return o8e.sendHeaders.hasSubscribers&&o8e.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?c8e(g,null,t,e,h,d,y,p):Vn.isBuffer(c)?c8e(g,c,t,e,h,d,y,p):Vn.isBlobLike(c)?typeof c.stream=="function"?u8e(g,c.stream(),t,e,h,d,y,p):Lvt(g,c,t,e,h,d,y,p):Vn.isStream(c)?Nvt(g,c,t,e,h,d,y,p):Vn.isIterable(c)?u8e(g,c,t,e,h,d,y,p):En(!1),!0}s(Pvt,"writeH1");function Nvt(t,e,r,n,i,o,a,l){En(o!==0||r[Zc]===0,"stream body cannot be pipelined");let c=!1,u=new pW({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){Vn.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new d8e;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,En(i.destroyed||i[kv]&&r[Zc]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?Vn.destroy(e,g):Vn.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(Nvt,"writeStream");function c8e(t,e,r,n,i,o,a,l){try{e?Vn.isBuffer(e)&&(En(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),n.onBodySent(e),!l&&n.reset!==!1&&(i[Rd]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(En(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),n.onRequestSent(),r[Rv]()}catch(c){t(c)}}s(c8e,"writeBuffer");async function Lvt(t,e,r,n,i,o,a,l){En(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new T2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),n.onBodySent(c),n.onRequestSent(),!l&&n.reset!==!1&&(i[Rd]=!0),r[Rv]()}catch(c){t(c)}}s(Lvt,"writeBlob");async function u8e(t,e,r,n,i,o,a,l){En(o!==0||r[Zc]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{En(c===null),i[lp]?h(i[lp]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new pW({abort:t,socket:i,request:n,contentLength:o,client:r,expectsPayload:l,header:a});try{for await(let m of e){if(i[lp])throw i[lp];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(u8e,"writeIterable");var pW=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:r,request:n,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=r,this.request=n,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,r[kv]=!0}write(e){let{socket:r,request:n,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(r[lp])throw r[lp];if(r.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[qse])throw new T2;process.emitWarning(new T2)}r.cork(),a===0&&(!l&&n.reset!==!1&&(r[Rd]=!0),i===null?r.write(`${c}transfer-encoding: chunked\r
`,"latin1"):r.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&r.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=r.write(e);return r.uncork(),n.onBodySent(e),d||r[da].timeout&&r[da].timeoutType===s4&&r[da].timeout.refresh&&r[da].timeout.refresh(),d}end(){let{socket:e,contentLength:r,client:n,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[kv]=!1,e[lp])throw e[lp];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):r===null&&e.write(`\r
0\r
\r
`,"latin1"),r!==null&&i!==r){if(n[qse])throw new T2;process.emitWarning(new T2)}e[da].timeout&&e[da].timeoutType===s4&&e[da].timeout.refresh&&e[da].timeout.refresh(),n[Rv]()}}destroy(e){let{socket:r,client:n,abort:i}=this;r[kv]=!1,e&&(En(n[Zc]<=1,"pipeline should only contain this request"),i(e))}};m8e.exports=kvt});var E8e=G((AKr,b8e)=>{"use strict";f();var cp=require("node:assert"),{pipeline:Fvt}=require("node:stream"),Fi=yi(),{RequestContentLengthMismatchError:jse,RequestAbortedError:g8e,SocketError:jD,InformationalError:Vse}=yo(),{kUrl:mW,kReset:gW,kClient:a4,kRunning:AW,kPending:Mvt,kQueue:Bv,kPendingIdx:$se,kRunningIdx:Om,kError:qm,kSocket:jl,kStrictContentLength:Qvt,kOnError:zse,kMaxConcurrentStreams:v8e,kHTTP2Session:Um,kResume:Dv,kSize:Ovt,kHTTPContext:Uvt}=Qs(),iy=Symbol("open streams"),A8e,y8e=!1,hW;try{hW=require("node:http2")}catch{hW={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:qvt,HTTP2_HEADER_METHOD:Wvt,HTTP2_HEADER_PATH:Gvt,HTTP2_HEADER_SCHEME:Hvt,HTTP2_HEADER_CONTENT_LENGTH:jvt,HTTP2_HEADER_EXPECT:Vvt,HTTP2_HEADER_STATUS:$vt}}=hW;function zvt(t){let e=[];for(let[r,n]of Object.entries(t))if(Array.isArray(n))for(let i of n)e.push(Buffer.from(r),Buffer.from(i));else e.push(Buffer.from(r),Buffer.from(n));return e}s(zvt,"parseH2Headers");async function Yvt(t,e){t[jl]=e,y8e||(y8e=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let r=hW.connect(t[mW],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[v8e]});r[iy]=0,r[a4]=t,r[jl]=e,Fi.addListener(r,"error",Jvt),Fi.addListener(r,"frameError",Xvt),Fi.addListener(r,"end",Zvt),Fi.addListener(r,"goaway",ebt),Fi.addListener(r,"close",function(){let{[a4]:i}=this,{[jl]:o}=i,a=this[jl][qm]||this[qm]||new jD("closed",Fi.getSocketInfo(o));if(i[Um]=null,i.destroyed){cp(i[Mvt]===0);let l=i[Bv].splice(i[Om]);for(let c=0;c<l.length;c++){let u=l[c];Fi.errorRequest(i,u,a)}}}),r.unref(),t[Um]=r,e[Um]=r,Fi.addListener(e,"error",function(i){cp(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[qm]=i,this[a4][zse](i)}),Fi.addListener(e,"end",function(){Fi.destroy(this,new jD("other side closed",Fi.getSocketInfo(this)))}),Fi.addListener(e,"close",function(){let i=this[qm]||new jD("closed",Fi.getSocketInfo(this));t[jl]=null,this[Um]!=null&&this[Um].destroy(i),t[$se]=t[Om],cp(t[AW]===0),t.emit("disconnect",t[mW],[t],i),t[Dv]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return rbt(t,...i)},resume(){Kvt(t)},destroy(i,o){n?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s(Yvt,"connectH2");function Kvt(t){let e=t[jl];e?.destroyed===!1&&(t[Ovt]===0&&t[v8e]===0?(e.unref(),t[Um].unref()):(e.ref(),t[Um].ref()))}s(Kvt,"resumeH2");function Jvt(t){cp(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[jl][qm]=t,this[a4][zse](t)}s(Jvt,"onHttp2SessionError");function Xvt(t,e,r){if(r===0){let n=new Vse(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[jl][qm]=n,this[a4][zse](n)}}s(Xvt,"onHttp2FrameError");function Zvt(){let t=new jD("other side closed",Fi.getSocketInfo(this[jl]));this.destroy(t),Fi.destroy(this[jl],t)}s(Zvt,"onHttp2SessionEnd");function ebt(t){let e=this[qm]||new jD(`HTTP/2: "GOAWAY" frame received with code ${t}`,Fi.getSocketInfo(this)),r=this[a4];if(r[jl]=null,r[Uvt]=null,this[Um]!=null&&(this[Um].destroy(e),this[Um]=null),Fi.destroy(this[jl],e),r[Om]<r[Bv].length){let n=r[Bv][r[Om]];r[Bv][r[Om]++]=null,Fi.errorRequest(r,n,e),r[$se]=r[Om]}cp(r[AW]===0),r.emit("disconnect",r[mW],[r],e),r[Dv]()}s(ebt,"onHTTP2GoAway");function tbt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(tbt,"shouldSendContentLength");function rbt(t,e){let r=t[Um],{method:n,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Fi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let B=u[k+0],N=u[k+1];if(Array.isArray(N))for(let q=0;q<N.length;q++)p[B]?p[B]+=`,${N[q]}`:p[B]=N[q];else p[B]=N}let m,{hostname:h,port:g}=t[mW];p[qvt]=o||`${h}${g?`:${g}`:""}`,p[Wvt]=n;let y=s(k=>{e.aborted||e.completed||(k=k||new g8e,Fi.errorRequest(t,e,k),m!=null&&Fi.destroy(m,k),Fi.destroy(d,k),t[Bv][t[Om]++]=null,t[Dv]())},"abort");try{e.onConnect(y)}catch(k){Fi.errorRequest(t,e,k)}if(e.aborted)return!1;if(n==="CONNECT")return r.ref(),m=r.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++r[iy],t[Bv][t[Om]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++r[iy],t[Bv][t[Om]++]=null}),m.once("close",()=>{r[iy]-=1,r[iy]===0&&r.unref()}),!0;p[Gvt]=i,p[Hvt]="https";let v=n==="PUT"||n==="POST"||n==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Fi.bodyLength(d);if(Fi.isFormDataLike(d)){A8e??=n4().extractBody;let[k,B]=A8e(d);p["content-type"]=B,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),tbt(n)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[Qvt])return Fi.errorRequest(t,e,new jse),!1;process.emitWarning(new jse)}b!=null&&(cp(d,"no body must not have content length"),p[jvt]=`${b}`),r.ref();let E=n==="GET"||n==="HEAD"||d===null;return l?(p[Vvt]="100-continue",m=r.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=r.request(p,{endStream:E,signal:c}),_()),++r[iy],m.once("response",k=>{let{[$vt]:B,...N}=k;if(e.onResponseStarted(),e.aborted){let q=new g8e;Fi.errorRequest(t,e,q),Fi.destroy(m,q);return}e.onHeaders(Number(B),zvt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",q=>{e.onData(q)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),r[iy]===0&&r.unref(),y(new Vse("HTTP/2: stream half-closed (remote)")),t[Bv][t[Om]++]=null,t[$se]=t[Om],t[Dv]()}),m.once("close",()=>{r[iy]-=1,r[iy]===0&&r.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,B)=>{y(new Vse(`HTTP/2: "frameError" received - type ${k}, code ${B}`))}),!0;function _(){!d||b===0?C8e(y,m,null,t,e,t[jl],b,v):Fi.isBuffer(d)?C8e(y,m,d,t,e,t[jl],b,v):Fi.isBlobLike(d)?typeof d.stream=="function"?x8e(y,m,d.stream(),t,e,t[jl],b,v):ibt(y,m,d,t,e,t[jl],b,v):Fi.isStream(d)?nbt(y,t[jl],v,m,d,t,e,b):Fi.isIterable(d)?x8e(y,m,d,t,e,t[jl],b,v):cp(!1)}s(_,"writeBodyH2")}s(rbt,"writeH2");function C8e(t,e,r,n,i,o,a,l){try{r!=null&&Fi.isBuffer(r)&&(cp(a===r.byteLength,"buffer body must have content length"),e.cork(),e.write(r),e.uncork(),e.end(),i.onBodySent(r)),l||(o[gW]=!0),i.onRequestSent(),n[Dv]()}catch(c){t(c)}}s(C8e,"writeBuffer");function nbt(t,e,r,n,i,o,a,l){cp(l!==0||o[AW]===0,"stream body cannot be pipelined");let c=Fvt(i,n,d=>{d?(Fi.destroy(c,d),t(d)):(Fi.removeAllListeners(c),a.onRequestSent(),r||(e[gW]=!0),o[Dv]())});Fi.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(nbt,"writeStream");async function ibt(t,e,r,n,i,o,a,l){cp(a===r.size,"blob body must have content length");try{if(a!=null&&a!==r.size)throw new jse;let c=Buffer.from(await r.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[gW]=!0),n[Dv]()}catch(c){t(c)}}s(ibt,"writeBlob");async function x8e(t,e,r,n,i,o,a,l){cp(a!==0||n[AW]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{cp(c===null),o[qm]?m(o[qm]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of r){if(o[qm])throw o[qm];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[gW]=!0),n[Dv]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(x8e,"writeIterable");b8e.exports=Yvt});var CW=G((xKr,w8e)=>{"use strict";f();var Wg=yi(),{kBodyUsed:VD}=Qs(),Kse=require("node:assert"),{InvalidArgumentError:obt}=yo(),sbt=require("node:events"),abt=[300,301,302,303,307,308],I8e=Symbol("body"),yW=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[I8e]=e,this[VD]=!1}async*[Symbol.asyncIterator](){Kse(!this[VD],"disturbed"),this[VD]=!0,yield*this[I8e]}},Yse=class{static{s(this,"RedirectHandler")}constructor(e,r,n,i){if(r!=null&&(!Number.isInteger(r)||r<0))throw new obt("maxRedirections must be a positive number");Wg.validateHandler(i,n.method,n.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...n,maxRedirections:0},this.maxRedirections=r,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Wg.isStream(this.opts.body)?(Wg.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Kse(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[VD]=!1,sbt.prototype.on.call(this.opts.body,"data",function(){this[VD]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new yW(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Wg.isIterable(this.opts.body)&&(this.opts.body=new yW(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,r,n){this.handler.onUpgrade(e,r,n)}onError(e){this.handler.onError(e)}onHeaders(e,r,n,i){if(this.location=this.history.length>=this.maxRedirections||Wg.isDisturbed(this.opts.body)?null:lbt(e,r),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,r,n,i);let{origin:o,pathname:a,search:l}=Wg.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=cbt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function lbt(t,e){if(abt.indexOf(t)===-1)return null;for(let r=0;r<e.length;r+=2)if(e[r].length===8&&Wg.headerNameToString(e[r])==="location")return e[r+1]}s(lbt,"parseLocation");function T8e(t,e,r){if(t.length===4)return Wg.headerNameToString(t)==="host";if(e&&Wg.headerNameToString(t).startsWith("content-"))return!0;if(r&&(t.length===13||t.length===6||t.length===19)){let n=Wg.headerNameToString(t);return n==="authorization"||n==="cookie"||n==="proxy-authorization"}return!1}s(T8e,"shouldRemoveHeader");function cbt(t,e,r){let n=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)T8e(t[i],e,r)||n.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))T8e(i,e,r)||n.push(i,t[i]);else Kse(t==null,"headers must be an object or an array");return n}s(cbt,"cleanRequestHeaders");w8e.exports=Yse});var xW=G((EKr,_8e)=>{"use strict";f();var ubt=CW();function dbt({maxRedirections:t}){return e=>s(function(n,i){let{maxRedirections:o=t}=n;if(!o)return e(n,i);let a=new ubt(e,o,n,i);return n={...n,maxRedirections:0},e(n,a)},"Intercept")}s(dbt,"createRedirectInterceptor");_8e.exports=dbt});var ZD=G((wKr,M8e)=>{"use strict";f();var oy=require("node:assert"),P8e=require("node:net"),fbt=require("node:http"),w2=yi(),{channels:l4}=H5(),pbt=H3e(),mbt=z5(),{InvalidArgumentError:Na,InformationalError:hbt,ClientDestroyedError:gbt}=yo(),Abt=PD(),{kUrl:Gg,kServerName:Pv,kClient:ybt,kBusy:Jse,kConnect:Cbt,kResuming:_2,kRunning:JD,kPending:XD,kSize:KD,kQueue:Wm,kConnected:xbt,kConnecting:c4,kNeedDrain:Lv,kKeepAliveDefaultTimeout:S8e,kHostHeader:vbt,kPendingIdx:Gm,kRunningIdx:sy,kError:bbt,kPipelining:vW,kKeepAliveTimeoutValue:Ebt,kMaxHeadersSize:Ibt,kKeepAliveMaxTimeout:Tbt,kKeepAliveTimeoutThreshold:wbt,kHeadersTimeout:_bt,kBodyTimeout:Sbt,kStrictContentLength:Rbt,kConnector:$D,kMaxRedirections:kbt,kMaxRequests:Xse,kCounter:Bbt,kClose:Dbt,kDestroy:Pbt,kDispatch:Nbt,kInterceptors:R8e,kLocalAddress:zD,kMaxResponseSize:Lbt,kOnError:Fbt,kHTTPContext:La,kMaxConcurrentStreams:Mbt,kResume:YD}=Qs(),Qbt=h8e(),Obt=E8e(),k8e=!1,Nv=Symbol("kClosedResolve"),B8e=s(()=>{},"noop");function N8e(t){return t[vW]??t[La]?.defaultPipelining??1}s(N8e,"getPipelining");var Zse=class extends mbt{static{s(this,"Client")}constructor(e,{interceptors:r,maxHeaderSize:n,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:B,maxRequestsPerClient:N,localAddress:q,maxResponseSize:te,autoSelectFamily:me,autoSelectFamilyAttemptTimeout:oe,maxConcurrentStreams:H,allowH2:O}={}){if(super(),d!==void 0)throw new Na("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Na("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Na("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Na("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Na("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(n!=null&&!Number.isFinite(n))throw new Na("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Na("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Na("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Na("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Na("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Na("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Na("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Na("bodyTimeout must be a positive integer or zero");if(B!=null&&typeof B!="function"&&typeof B!="object")throw new Na("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Na("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Na("maxRequestsPerClient must be a positive number");if(q!=null&&(typeof q!="string"||P8e.isIP(q)===0))throw new Na("localAddress must be valid string IP address");if(te!=null&&(!Number.isInteger(te)||te<-1))throw new Na("maxResponseSize must be a positive number");if(oe!=null&&(!Number.isInteger(oe)||oe<-1))throw new Na("autoSelectFamilyAttemptTimeout must be a positive number");if(O!=null&&typeof O!="boolean")throw new Na("allowH2 must be a valid boolean value");if(H!=null&&(typeof H!="number"||H<1))throw new Na("maxConcurrentStreams must be a positive integer, greater than 0");typeof B!="function"&&(B=Abt({...b,maxCachedSessions:_,allowH2:O,socketPath:y,timeout:l,...me?{autoSelectFamily:me,autoSelectFamilyAttemptTimeout:oe}:void 0,...B})),r?.Client&&Array.isArray(r.Client)?(this[R8e]=r.Client,k8e||(k8e=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[R8e]=[Ubt({maxRedirections:k})],this[Gg]=w2.parseOrigin(e),this[$D]=B,this[vW]=v??1,this[Ibt]=n||fbt.maxHeaderSize,this[S8e]=p??4e3,this[Tbt]=h??6e5,this[wbt]=g??2e3,this[Ebt]=this[S8e],this[Pv]=null,this[zD]=q??null,this[_2]=0,this[Lv]=0,this[vbt]=`host: ${this[Gg].hostname}${this[Gg].port?`:${this[Gg].port}`:""}\r
`,this[Sbt]=c??3e5,this[_bt]=i??3e5,this[Rbt]=E??!0,this[kbt]=k,this[Xse]=N,this[Nv]=null,this[Lbt]=te>-1?te:-1,this[Mbt]=H??100,this[La]=null,this[Wm]=[],this[sy]=0,this[Gm]=0,this[YD]=le=>eae(this,le),this[Fbt]=le=>L8e(this,le)}get pipelining(){return this[vW]}set pipelining(e){this[vW]=e,this[YD](!0)}get[XD](){return this[Wm].length-this[Gm]}get[JD](){return this[Gm]-this[sy]}get[KD](){return this[Wm].length-this[sy]}get[xbt](){return!!this[La]&&!this[c4]&&!this[La].destroyed}get[Jse](){return!!(this[La]?.busy(null)||this[KD]>=(N8e(this)||1)||this[XD]>0)}[Cbt](e){F8e(this),this.once("connect",e)}[Nbt](e,r){let n=e.origin||this[Gg].origin,i=new pbt(n,e,r);return this[Wm].push(i),this[_2]||(w2.bodyLength(i.body)==null&&w2.isIterable(i.body)?(this[_2]=1,queueMicrotask(()=>eae(this))):this[YD](!0)),this[_2]&&this[Lv]!==2&&this[Jse]&&(this[Lv]=2),this[Lv]<2}async[Dbt](){return new Promise(e=>{this[KD]?this[Nv]=e:e(null)})}async[Pbt](e){return new Promise(r=>{let n=this[Wm].splice(this[Gm]);for(let o=0;o<n.length;o++){let a=n[o];w2.errorRequest(this,a,e)}let i=s(()=>{this[Nv]&&(this[Nv](),this[Nv]=null),r(null)},"callback");this[La]?(this[La].destroy(e,i),this[La]=null):queueMicrotask(i),this[YD]()})}},Ubt=xW();function L8e(t,e){if(t[JD]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){oy(t[Gm]===t[sy]);let r=t[Wm].splice(t[sy]);for(let n=0;n<r.length;n++){let i=r[n];w2.errorRequest(t,i,e)}oy(t[KD]===0)}}s(L8e,"onError");async function F8e(t){oy(!t[c4]),oy(!t[La]);let{host:e,hostname:r,protocol:n,port:i}=t[Gg];if(r[0]==="["){let o=r.indexOf("]");oy(o!==-1);let a=r.substring(1,o);oy(P8e.isIP(a)),r=a}t[c4]=!0,l4.beforeConnect.hasSubscribers&&l4.beforeConnect.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[La]?.version,servername:t[Pv],localAddress:t[zD]},connector:t[$D]});try{let o=await new Promise((a,l)=>{t[$D]({host:e,hostname:r,protocol:n,port:i,servername:t[Pv],localAddress:t[zD]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){w2.destroy(o.on("error",B8e),new gbt);return}oy(o);try{t[La]=o.alpnProtocol==="h2"?await Obt(t,o):await Qbt(t,o)}catch(a){throw o.destroy().on("error",B8e),a}t[c4]=!1,o[Bbt]=0,o[Xse]=t[Xse],o[ybt]=t,o[bbt]=null,l4.connected.hasSubscribers&&l4.connected.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[La]?.version,servername:t[Pv],localAddress:t[zD]},connector:t[$D],socket:o}),t.emit("connect",t[Gg],[t])}catch(o){if(t.destroyed)return;if(t[c4]=!1,l4.connectError.hasSubscribers&&l4.connectError.publish({connectParams:{host:e,hostname:r,protocol:n,port:i,version:t[La]?.version,servername:t[Pv],localAddress:t[zD]},connector:t[$D],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(oy(t[JD]===0);t[XD]>0&&t[Wm][t[Gm]].servername===t[Pv];){let a=t[Wm][t[Gm]++];w2.errorRequest(t,a,o)}else L8e(t,o);t.emit("connectionError",t[Gg],[t],o)}t[YD]()}s(F8e,"connect");function D8e(t){t[Lv]=0,t.emit("drain",t[Gg],[t])}s(D8e,"emitDrain");function eae(t,e){t[_2]!==2&&(t[_2]=2,qbt(t,e),t[_2]=0,t[sy]>256&&(t[Wm].splice(0,t[sy]),t[Gm]-=t[sy],t[sy]=0))}s(eae,"resume");function qbt(t,e){for(;;){if(t.destroyed){oy(t[XD]===0);return}if(t[Nv]&&!t[KD]){t[Nv](),t[Nv]=null;return}if(t[La]&&t[La].resume(),t[Jse])t[Lv]=2;else if(t[Lv]===2){e?(t[Lv]=1,queueMicrotask(()=>D8e(t))):D8e(t);continue}if(t[XD]===0||t[JD]>=(N8e(t)||1))return;let r=t[Wm][t[Gm]];if(t[Gg].protocol==="https:"&&t[Pv]!==r.servername){if(t[JD]>0)return;t[Pv]=r.servername,t[La]?.destroy(new hbt("servername changed"),()=>{t[La]=null,eae(t)})}if(t[c4])return;if(!t[La]){F8e(t);return}if(t[La].destroyed||t[La].busy(r))return;!r.aborted&&t[La].write(r)?t[Gm]++:t[Wm].splice(t[Gm],1)}}s(qbt,"_resume");M8e.exports=Zse});var tae=G((kKr,Q8e)=>{"use strict";f();var bW=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};Q8e.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new bW}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new bW),this.head.push(e)}shift(){let e=this.tail,r=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),r}}});var U8e=G((PKr,O8e)=>{f();var{kFree:Wbt,kConnected:Gbt,kPending:Hbt,kQueued:jbt,kRunning:Vbt,kSize:$bt}=Qs(),S2=Symbol("pool"),rae=class{static{s(this,"PoolStats")}constructor(e){this[S2]=e}get connected(){return this[S2][Gbt]}get free(){return this[S2][Wbt]}get pending(){return this[S2][Hbt]}get queued(){return this[S2][jbt]}get running(){return this[S2][Vbt]}get size(){return this[S2][$bt]}};O8e.exports=rae});var lae=G((FKr,K8e)=>{"use strict";f();var zbt=z5(),Ybt=tae(),{kConnected:nae,kSize:q8e,kRunning:W8e,kPending:G8e,kQueued:eP,kBusy:Kbt,kFree:Jbt,kUrl:Xbt,kClose:Zbt,kDestroy:eEt,kDispatch:tEt}=Qs(),rEt=U8e(),kd=Symbol("clients"),Ou=Symbol("needDrain"),tP=Symbol("queue"),iae=Symbol("closed resolve"),oae=Symbol("onDrain"),H8e=Symbol("onConnect"),j8e=Symbol("onDisconnect"),V8e=Symbol("onConnectionError"),sae=Symbol("get dispatcher"),z8e=Symbol("add client"),Y8e=Symbol("remove client"),$8e=Symbol("stats"),aae=class extends zbt{static{s(this,"PoolBase")}constructor(){super(),this[tP]=new Ybt,this[kd]=[],this[eP]=0;let e=this;this[oae]=s(function(n,i){let o=e[tP],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[eP]--,a=!this.dispatch(l.opts,l.handler)}this[Ou]=a,!this[Ou]&&e[Ou]&&(e[Ou]=!1,e.emit("drain",n,[e,...i])),e[iae]&&o.isEmpty()&&Promise.all(e[kd].map(l=>l.close())).then(e[iae])},"onDrain"),this[H8e]=(r,n)=>{e.emit("connect",r,[e,...n])},this[j8e]=(r,n,i)=>{e.emit("disconnect",r,[e,...n],i)},this[V8e]=(r,n,i)=>{e.emit("connectionError",r,[e,...n],i)},this[$8e]=new rEt(this)}get[Kbt](){return this[Ou]}get[nae](){return this[kd].filter(e=>e[nae]).length}get[Jbt](){return this[kd].filter(e=>e[nae]&&!e[Ou]).length}get[G8e](){let e=this[eP];for(let{[G8e]:r}of this[kd])e+=r;return e}get[W8e](){let e=0;for(let{[W8e]:r}of this[kd])e+=r;return e}get[q8e](){let e=this[eP];for(let{[q8e]:r}of this[kd])e+=r;return e}get stats(){return this[$8e]}async[Zbt](){this[tP].isEmpty()?await Promise.all(this[kd].map(e=>e.close())):await new Promise(e=>{this[iae]=e})}async[eEt](e){for(;;){let r=this[tP].shift();if(!r)break;r.handler.onError(e)}await Promise.all(this[kd].map(r=>r.destroy(e)))}[tEt](e,r){let n=this[sae]();return n?n.dispatch(e,r)||(n[Ou]=!0,this[Ou]=!this[sae]()):(this[Ou]=!0,this[tP].push({opts:e,handler:r}),this[eP]++),!this[Ou]}[z8e](e){return e.on("drain",this[oae]).on("connect",this[H8e]).on("disconnect",this[j8e]).on("connectionError",this[V8e]),this[kd].push(e),this[Ou]&&queueMicrotask(()=>{this[Ou]&&this[oae](e[Xbt],[this,e])}),this}[Y8e](e){e.close(()=>{let r=this[kd].indexOf(e);r!==-1&&this[kd].splice(r,1)}),this[Ou]=this[kd].some(r=>!r[Ou]&&r.closed!==!0&&r.destroyed!==!0)}};K8e.exports={PoolBase:aae,kClients:kd,kNeedDrain:Ou,kAddClient:z8e,kRemoveClient:Y8e,kGetDispatcher:sae}});var u4=G((OKr,eDe)=>{"use strict";f();var{PoolBase:nEt,kClients:EW,kNeedDrain:iEt,kAddClient:oEt,kGetDispatcher:sEt}=lae(),aEt=ZD(),{InvalidArgumentError:cae}=yo(),J8e=yi(),{kUrl:X8e,kInterceptors:lEt}=Qs(),cEt=PD(),uae=Symbol("options"),dae=Symbol("connections"),Z8e=Symbol("factory");function uEt(t,e){return new aEt(t,e)}s(uEt,"defaultFactory");var fae=class extends nEt{static{s(this,"Pool")}constructor(e,{connections:r,factory:n=uEt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),r!=null&&(!Number.isFinite(r)||r<0))throw new cae("invalid connections");if(typeof n!="function")throw new cae("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new cae("connect must be a function or an object");typeof i!="function"&&(i=cEt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[lEt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[dae]=r||null,this[X8e]=J8e.parseOrigin(e),this[uae]={...J8e.deepClone(m),connect:i,allowH2:p},this[uae].interceptors=m.interceptors?{...m.interceptors}:void 0,this[Z8e]=n,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[EW].indexOf(v);b!==-1&&this[EW].splice(b,1)}})}[sEt](){for(let e of this[EW])if(!e[iEt])return e;if(!this[dae]||this[EW].length<this[dae]){let e=this[Z8e](this[X8e],this[uae]);return this[oEt](e),e}}};eDe.exports=fae});var oDe=G((WKr,iDe)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:dEt,InvalidArgumentError:fEt}=yo(),{PoolBase:pEt,kClients:eu,kNeedDrain:rP,kAddClient:mEt,kRemoveClient:hEt,kGetDispatcher:gEt}=lae(),AEt=u4(),{kUrl:pae,kInterceptors:yEt}=Qs(),{parseOrigin:tDe}=yi(),rDe=Symbol("factory"),IW=Symbol("options"),nDe=Symbol("kGreatestCommonDivisor"),R2=Symbol("kCurrentWeight"),k2=Symbol("kIndex"),up=Symbol("kWeight"),TW=Symbol("kMaxWeightPerServer"),wW=Symbol("kErrorPenalty");function CEt(t,e){if(t===0)return e;for(;e!==0;){let r=e;e=t%e,t=r}return t}s(CEt,"getGreatestCommonDivisor");function xEt(t,e){return new AEt(t,e)}s(xEt,"defaultFactory");var mae=class extends pEt{static{s(this,"BalancedPool")}constructor(e=[],{factory:r=xEt,...n}={}){if(super(),this[IW]=n,this[k2]=-1,this[R2]=0,this[TW]=this[IW].maxWeightPerServer||100,this[wW]=this[IW].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof r!="function")throw new fEt("factory must be a function.");this[yEt]=n.interceptors?.BalancedPool&&Array.isArray(n.interceptors.BalancedPool)?n.interceptors.BalancedPool:[],this[rDe]=r;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let r=tDe(e).origin;if(this[eu].find(i=>i[pae].origin===r&&i.closed!==!0&&i.destroyed!==!0))return this;let n=this[rDe](r,Object.assign({},this[IW]));this[mEt](n),n.on("connect",()=>{n[up]=Math.min(this[TW],n[up]+this[wW])}),n.on("connectionError",()=>{n[up]=Math.max(1,n[up]-this[wW]),this._updateBalancedPoolStats()}),n.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(n[up]=Math.max(1,n[up]-this[wW]),this._updateBalancedPoolStats())});for(let i of this[eu])i[up]=this[TW];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let r=0;r<this[eu].length;r++)e=CEt(this[eu][r][up],e);this[nDe]=e}removeUpstream(e){let r=tDe(e).origin,n=this[eu].find(i=>i[pae].origin===r&&i.closed!==!0&&i.destroyed!==!0);return n&&this[hEt](n),this}get upstreams(){return this[eu].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[pae].origin)}[gEt](){if(this[eu].length===0)throw new dEt;if(!this[eu].find(o=>!o[rP]&&o.closed!==!0&&o.destroyed!==!0)||this[eu].map(o=>o[rP]).reduce((o,a)=>o&&a,!0))return;let n=0,i=this[eu].findIndex(o=>!o[rP]);for(;n++<this[eu].length;){this[k2]=(this[k2]+1)%this[eu].length;let o=this[eu][this[k2]];if(o[up]>this[eu][i][up]&&!o[rP]&&(i=this[k2]),this[k2]===0&&(this[R2]=this[R2]-this[nDe],this[R2]<=0&&(this[R2]=this[TW])),o[up]>=this[R2]&&!o[rP])return o}return this[R2]=this[eu][i][up],this[k2]=i,this[eu][i]}};iDe.exports=mae});var d4=G((jKr,fDe)=>{"use strict";f();var{InvalidArgumentError:_W}=yo(),{kClients:Fv,kRunning:sDe,kClose:vEt,kDestroy:bEt,kDispatch:EEt,kInterceptors:IEt}=Qs(),TEt=z5(),wEt=u4(),_Et=ZD(),SEt=yi(),REt=xW(),aDe=Symbol("onConnect"),lDe=Symbol("onDisconnect"),cDe=Symbol("onConnectionError"),kEt=Symbol("maxRedirections"),uDe=Symbol("onDrain"),dDe=Symbol("factory"),hae=Symbol("options");function BEt(t,e){return e&&e.connections===1?new _Et(t,e):new wEt(t,e)}s(BEt,"defaultFactory");var gae=class extends TEt{static{s(this,"Agent")}constructor({factory:e=BEt,maxRedirections:r=0,connect:n,...i}={}){if(super(),typeof e!="function")throw new _W("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new _W("connect must be a function or an object");if(!Number.isInteger(r)||r<0)throw new _W("maxRedirections must be a positive number");n&&typeof n!="function"&&(n={...n}),this[IEt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[REt({maxRedirections:r})],this[hae]={...SEt.deepClone(i),connect:n},this[hae].interceptors=i.interceptors?{...i.interceptors}:void 0,this[kEt]=r,this[dDe]=e,this[Fv]=new Map,this[uDe]=(o,a)=>{this.emit("drain",o,[this,...a])},this[aDe]=(o,a)=>{this.emit("connect",o,[this,...a])},this[lDe]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[cDe]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[sDe](){let e=0;for(let r of this[Fv].values())e+=r[sDe];return e}[EEt](e,r){let n;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))n=String(e.origin);else throw new _W("opts.origin must be a non-empty string or URL.");let i=this[Fv].get(n);return i||(i=this[dDe](e.origin,this[hae]).on("drain",this[uDe]).on("connect",this[aDe]).on("disconnect",this[lDe]).on("connectionError",this[cDe]),this[Fv].set(n,i)),i.dispatch(e,r)}async[vEt](){let e=[];for(let r of this[Fv].values())e.push(r.close());this[Fv].clear(),await Promise.all(e)}async[bEt](e){let r=[];for(let n of this[Fv].values())r.push(n.destroy(e));this[Fv].clear(),await Promise.all(r)}};fDe.exports=gae});var Cae=G((zKr,gDe)=>{"use strict";f();var{kProxy:DEt,kClose:PEt,kDestroy:NEt,kInterceptors:LEt}=Qs(),{URL:nP}=require("node:url"),FEt=d4(),MEt=u4(),QEt=z5(),{InvalidArgumentError:kW,RequestAbortedError:OEt,SecureProxyConnectionError:UEt}=yo(),pDe=PD(),SW=Symbol("proxy agent"),RW=Symbol("proxy client"),iP=Symbol("proxy headers"),Aae=Symbol("request tls settings"),mDe=Symbol("proxy tls settings"),hDe=Symbol("connect endpoint function");function qEt(t){return t==="https:"?443:80}s(qEt,"defaultProtocolPort");function WEt(t,e){return new MEt(t,e)}s(WEt,"defaultFactory");var GEt=s(()=>{},"noop"),yae=class extends QEt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof nP)&&!e.uri)throw new kW("Proxy uri is mandatory");let{clientFactory:r=WEt}=e;if(typeof r!="function")throw new kW("Proxy opts.clientFactory must be a function.");let n=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=n;if(this[DEt]={uri:i,protocol:l},this[LEt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[Aae]=e.requestTls,this[mDe]=e.proxyTls,this[iP]=e.headers||{},e.auth&&e.token)throw new kW("opts.auth cannot be used in combination with opts.token");e.auth?this[iP]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[iP]["proxy-authorization"]=e.token:c&&u&&(this[iP]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=pDe({...e.proxyTls});this[hDe]=pDe({...e.requestTls}),this[RW]=r(n,{connect:p}),this[SW]=new FEt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${qEt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[RW].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[iP],host:m.host},servername:this[mDe]?.servername||d});if(v!==200&&(y.on("error",GEt).destroy(),h(new OEt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[Aae]?b=this[Aae].servername:b=m.servername,this[hDe]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new UEt(y)):h(y)}},"connect")})}dispatch(e,r){let n=HEt(e.headers);if(jEt(n),n&&!("host"in n)&&!("Host"in n)){let{host:i}=new nP(e.origin);n.host=i}return this[SW].dispatch({...e,headers:n},r)}#e(e){return typeof e=="string"?new nP(e):e instanceof nP?e:new nP(e.uri)}async[PEt](){await this[SW].close(),await this[RW].close()}async[NEt](){await this[SW].destroy(),await this[RW].destroy()}};function HEt(t){if(Array.isArray(t)){let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}return t}s(HEt,"buildHeaders");function jEt(t){if(t&&Object.keys(t).find(r=>r.toLowerCase()==="proxy-authorization"))throw new kW("Proxy-Authorization should be sent in ProxyAgent constructor")}s(jEt,"throwIfProxyAuthIsSent");gDe.exports=yae});var bDe=G((JKr,vDe)=>{"use strict";f();var VEt=z5(),{kClose:$Et,kDestroy:zEt,kClosed:ADe,kDestroyed:yDe,kDispatch:YEt,kNoProxyAgent:oP,kHttpProxyAgent:Mv,kHttpsProxyAgent:B2}=Qs(),CDe=Cae(),KEt=d4(),JEt={"http:":80,"https:":443},xDe=!1,xae=class extends VEt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,xDe||(xDe=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:r,httpsProxy:n,noProxy:i,...o}=e;this[oP]=new KEt(o);let a=r??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Mv]=new CDe({...o,uri:a}):this[Mv]=this[oP];let l=n??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[B2]=new CDe({...o,uri:l}):this[B2]=this[Mv],this.#o()}[YEt](e,r){let n=new URL(e.origin);return this.#n(n).dispatch(e,r)}async[$Et](){await this[oP].close(),this[Mv][ADe]||await this[Mv].close(),this[B2][ADe]||await this[B2].close()}async[zEt](e){await this[oP].destroy(e),this[Mv][yDe]||await this[Mv].destroy(e),this[B2][yDe]||await this[B2].destroy(e)}#n(e){let{protocol:r,host:n,port:i}=e;return n=n.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||JEt[r]||0,this.#r(n,i)?r==="https:"?this[B2]:this[Mv]:this[oP]}#r(e,r){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let n=0;n<this.#t.length;n++){let i=this.#t[n];if(!(i.port&&i.port!==r)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,r=e.split(/[,\s]/),n=[];for(let i=0;i<r.length;i++){let o=r[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);n.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=n}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};vDe.exports=xae});var BW=G((eJr,wDe)=>{"use strict";f();var f4=require("node:assert"),{kRetryHandlerDefaultRetry:EDe}=Qs(),{RequestRetryError:sP}=yo(),{isDisturbed:IDe,parseHeaders:XEt,parseRangeHeader:TDe,wrapRequestBody:ZEt}=yi();function eIt(t){let e=Date.now();return new Date(t).getTime()-e}s(eIt,"calculateRetryAfterHeader");var vae=class t{static{s(this,"RetryHandler")}constructor(e,r){let{retryOptions:n,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=n??{};this.dispatch=r.dispatch,this.handler=r.handler,this.opts={...i,body:ZEt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[EDe],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,r,n){this.handler.onUpgrade&&this.handler.onUpgrade(e,r,n)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[EDe](e,{state:r,opts:n},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=n,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=r;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?eIt(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,r,n,i){let o=XEt(r);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,r,n,i):(this.abort(new sP("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new sP("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=TDe(o["content-range"]);if(!l)return this.abort(new sP("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new sP("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return f4(this.start===c,"content-range mismatch"),f4(this.end==null||this.end===d,"content-range mismatch"),this.resume=n,!0}if(this.end==null){if(e===206){let l=TDe(o["content-range"]);if(l==null)return this.handler.onHeaders(e,r,n,i);let{start:c,size:u,end:d=u-1}=l;f4(c!=null&&Number.isFinite(c),"content-range mismatch"),f4(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return f4(Number.isFinite(this.start)),f4(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=n,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,r,n,i)}let a=new sP("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||IDe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},r.bind(this));function r(n){if(n!=null||this.aborted||IDe(this.opts.body))return this.handler.onError(n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(r,"onRetry")}};wDe.exports=vae});var SDe=G((nJr,_De)=>{"use strict";f();var tIt=BD(),rIt=BW(),bae=class extends tIt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,r={}){super(r),this.#e=e,this.#t=r}dispatch(e,r){let n=new rIt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(e,n)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};_De.exports=bae});var Sae=G((sJr,MDe)=>{"use strict";f();var PDe=require("node:assert"),{Readable:nIt}=require("node:stream"),{RequestAbortedError:NDe,NotSupportedError:iIt,InvalidArgumentError:oIt,AbortError:Eae}=yo(),LDe=yi(),{ReadableStreamFrom:sIt}=yi(),D0=Symbol("kConsume"),aP=Symbol("kReading"),Qv=Symbol("kBody"),RDe=Symbol("kAbort"),FDe=Symbol("kContentType"),kDe=Symbol("kContentLength"),aIt=s(()=>{},"noop"),Iae=class extends nIt{static{s(this,"BodyReadable")}constructor({resume:e,abort:r,contentType:n="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[RDe]=r,this[D0]=null,this[Qv]=null,this[FDe]=n,this[kDe]=i,this[aP]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new NDe),e&&this[RDe](),super.destroy(e)}_destroy(e,r){this[aP]?r(e):setImmediate(()=>{r(e)})}on(e,...r){return(e==="data"||e==="readable")&&(this[aP]=!0),super.on(e,...r)}addListener(e,...r){return this.on(e,...r)}off(e,...r){let n=super.off(e,...r);return(e==="data"||e==="readable")&&(this[aP]=this.listenerCount("data")>0||this.listenerCount("readable")>0),n}removeListener(e,...r){return this.off(e,...r)}push(e){return this[D0]&&e!==null?(wae(this[D0],e),this[aP]?super.push(e):!0):super.push(e)}async text(){return lP(this,"text")}async json(){return lP(this,"json")}async blob(){return lP(this,"blob")}async bytes(){return lP(this,"bytes")}async arrayBuffer(){return lP(this,"arrayBuffer")}async formData(){throw new iIt}get bodyUsed(){return LDe.isDisturbed(this)}get body(){return this[Qv]||(this[Qv]=sIt(this),this[D0]&&(this[Qv].getReader(),PDe(this[Qv].locked))),this[Qv]}async dump(e){let r=Number.isFinite(e?.limit)?e.limit:131072,n=e?.signal;if(n!=null&&(typeof n!="object"||!("aborted"in n)))throw new oIt("signal must be an AbortSignal");return n?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[kDe]>r&&this.destroy(new Eae);let a=s(()=>{this.destroy(n.reason??new Eae)},"onAbort");n?.addEventListener("abort",a),this.on("close",function(){n?.removeEventListener("abort",a),n?.aborted?o(n.reason??new Eae):i(null)}).on("error",aIt).on("data",function(l){r-=l.length,r<=0&&this.destroy()}).resume()})}};function lIt(t){return t[Qv]&&t[Qv].locked===!0||t[D0]}s(lIt,"isLocked");function cIt(t){return LDe.isDisturbed(t)||lIt(t)}s(cIt,"isUnusable");async function lP(t,e){return PDe(!t[D0]),new Promise((r,n)=>{if(cIt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{n(o)}).on("close",()=>{n(new TypeError("unusable"))}):n(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[D0]={type:e,stream:t,resolve:r,reject:n,length:0,body:[]},t.on("error",function(i){_ae(this[D0],i)}).on("close",function(){this[D0].body!==null&&_ae(this[D0],new NDe)}),uIt(t[D0])})})}s(lP,"consume");function uIt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let r=e.bufferIndex,n=e.buffer.length;for(let i=r;i<n;i++)wae(t,e.buffer[i])}else for(let r of e.buffer)wae(t,r);for(e.endEmitted?DDe(this[D0]):t.stream.on("end",function(){DDe(this[D0])}),t.stream.resume();t.stream.read()!=null;);}s(uIt,"consumeStart");function Tae(t,e){if(t.length===0||e===0)return"";let r=t.length===1?t[0]:Buffer.concat(t,e),n=r.length,i=n>2&&r[0]===239&&r[1]===187&&r[2]===191?3:0;return r.utf8Slice(i,n)}s(Tae,"chunksDecode");function BDe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),n=0;for(let i=0;i<t.length;++i){let o=t[i];r.set(o,n),n+=o.length}return r}s(BDe,"chunksConcat");function DDe(t){let{type:e,body:r,resolve:n,stream:i,length:o}=t;try{e==="text"?n(Tae(r,o)):e==="json"?n(JSON.parse(Tae(r,o))):e==="arrayBuffer"?n(BDe(r,o).buffer):e==="blob"?n(new Blob(r,{type:i[FDe]})):e==="bytes"&&n(BDe(r,o)),_ae(t)}catch(a){i.destroy(a)}}s(DDe,"consumeEnd");function wae(t,e){t.length+=e.length,t.body.push(e)}s(wae,"consumePush");function _ae(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(_ae,"consumeFinish");MDe.exports={Readable:Iae,chunksDecode:Tae}});var Rae=G((cJr,WDe)=>{f();var dIt=require("node:assert"),{ResponseStatusCodeError:QDe}=yo(),{chunksDecode:ODe}=Sae(),fIt=128*1024;async function pIt({callback:t,body:e,contentType:r,statusCode:n,statusMessage:i,headers:o}){dIt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>fIt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${n}${i?`: ${i}`:""}`;if(n===204||!r||!l){queueMicrotask(()=>t(new QDe(c,n,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{UDe(r)?d=JSON.parse(ODe(a,l)):qDe(r)&&(d=ODe(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new QDe(c,n,o,d)))}s(pIt,"getResolveErrorBodyCallback");var UDe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),qDe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");WDe.exports={getResolveErrorBodyCallback:pIt,isContentTypeApplicationJson:UDe,isContentTypeText:qDe}});var jDe=G((fJr,kae)=>{"use strict";f();var mIt=require("node:assert"),{Readable:hIt}=Sae(),{InvalidArgumentError:p4,RequestAbortedError:GDe}=yo(),P0=yi(),{getResolveErrorBodyCallback:gIt}=Rae(),{AsyncResource:AIt}=require("node:async_hooks"),DW=class extends AIt{static{s(this,"RequestHandler")}constructor(e,r){if(!e||typeof e!="object")throw new p4("invalid opts");let{signal:n,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof r!="function")throw new p4("invalid callback");if(d&&(typeof d!="number"||d<0))throw new p4("invalid highWaterMark");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new p4("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new p4("invalid method");if(l&&typeof l!="function")throw new p4("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw P0.isStream(a)&&P0.destroy(a.on("error",P0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=r,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=n,this.reason=null,this.removeAbortListener=null,P0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new GDe:this.removeAbortListener=P0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new GDe,this.res?P0.destroy(this.res.on("error",P0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,r){if(this.reason){e(this.reason);return}mIt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?P0.parseRawHeaders(r):P0.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?P0.parseHeaders(r):p,h=m["content-type"],g=m["content-length"],y=new hIt({resume:n,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(gIt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){P0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:r,callback:n,body:i,opaque:o}=this;n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:o})})),r&&(this.res=null,queueMicrotask(()=>{P0.destroy(r,e)})),i&&(this.body=null,P0.destroy(i,e)),this.removeAbortListener&&(r?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function HDe(t,e){if(e===void 0)return new Promise((r,n)=>{HDe.call(this,t,(i,o)=>i?n(i):r(o))});try{this.dispatch(t,new DW(t,e))}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(HDe,"request");kae.exports=HDe;kae.exports.RequestHandler=DW});var cP=G((hJr,zDe)=>{f();var{addAbortListener:yIt}=yi(),{RequestAbortedError:CIt}=yo(),m4=Symbol("kListener"),Hg=Symbol("kSignal");function VDe(t){t.abort?t.abort(t[Hg]?.reason):t.reason=t[Hg]?.reason??new CIt,$De(t)}s(VDe,"abort");function xIt(t,e){if(t.reason=null,t[Hg]=null,t[m4]=null,!!e){if(e.aborted){VDe(t);return}t[Hg]=e,t[m4]=()=>{VDe(t)},yIt(t[Hg],t[m4])}}s(xIt,"addSignal");function $De(t){t[Hg]&&("removeEventListener"in t[Hg]?t[Hg].removeEventListener("abort",t[m4]):t[Hg].removeListener("abort",t[m4]),t[Hg]=null,t[m4]=null)}s($De,"removeSignal");zDe.exports={addSignal:xIt,removeSignal:$De}});var XDe=G((yJr,JDe)=>{"use strict";f();var vIt=require("node:assert"),{finished:bIt,PassThrough:EIt}=require("node:stream"),{InvalidArgumentError:h4,InvalidReturnValueError:IIt}=yo(),Hm=yi(),{getResolveErrorBodyCallback:TIt}=Rae(),{AsyncResource:wIt}=require("node:async_hooks"),{addSignal:_It,removeSignal:YDe}=cP(),Bae=class extends wIt{static{s(this,"StreamHandler")}constructor(e,r,n){if(!e||typeof e!="object")throw new h4("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof n!="function")throw new h4("invalid callback");if(typeof r!="function")throw new h4("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new h4("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new h4("invalid method");if(c&&typeof c!="function")throw new h4("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Hm.isStream(l)&&Hm.destroy(l.on("error",Hm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=r,this.callback=n,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Hm.isStream(l)&&l.on("error",p=>{this.onError(p)}),_It(this,i)}onConnect(e,r){if(this.reason){e(this.reason);return}vIt(this.callback),this.abort=e,this.context=r}onHeaders(e,r,n,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Hm.parseRawHeaders(r):Hm.parseHeaders(r);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Hm.parseHeaders(r):d)["content-type"];p=new EIt,this.callback=null,this.runInAsyncScope(TIt,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new IIt("expected Writable");bIt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Hm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",n),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:r}=this;return r?r.write(e):!0}onComplete(e){let{res:r}=this;YDe(this),r&&(this.trailers=Hm.parseHeaders(e),r.end())}onError(e){let{res:r,callback:n,opaque:i,body:o}=this;YDe(this),this.factory=null,r?(this.res=null,Hm.destroy(r,e)):n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:i})})),o&&(this.body=null,Hm.destroy(o,e))}};function KDe(t,e,r){if(r===void 0)return new Promise((n,i)=>{KDe.call(this,t,e,(o,a)=>o?i(o):n(a))});try{this.dispatch(t,new Bae(t,e,r))}catch(n){if(typeof r!="function")throw n;let i=t?.opaque;queueMicrotask(()=>r(n,{opaque:i}))}}s(KDe,"stream");JDe.exports=KDe});var rPe=G((vJr,tPe)=>{"use strict";f();var{Readable:ePe,Duplex:SIt,PassThrough:RIt}=require("node:stream"),{InvalidArgumentError:uP,InvalidReturnValueError:kIt,RequestAbortedError:Dae}=yo(),dp=yi(),{AsyncResource:BIt}=require("node:async_hooks"),{addSignal:DIt,removeSignal:PIt}=cP(),ZDe=require("node:assert"),g4=Symbol("resume"),Pae=class extends ePe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[g4]=null}_read(){let{[g4]:e}=this;e&&(this[g4]=null,e())}_destroy(e,r){this._read(),r(e)}},Nae=class extends ePe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[g4]=e}_read(){this[g4]()}_destroy(e,r){!e&&!this._readableState.endEmitted&&(e=new Dae),r(e)}},Lae=class extends BIt{static{s(this,"PipelineHandler")}constructor(e,r){if(!e||typeof e!="object")throw new uP("invalid opts");if(typeof r!="function")throw new uP("invalid handler");let{signal:n,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new uP("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new uP("invalid method");if(a&&typeof a!="function")throw new uP("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new Pae().on("error",dp.nop),this.ret=new SIt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[g4]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new Dae),g&&c&&g(),dp.destroy(d,c),dp.destroy(p,c),dp.destroy(m,c),PIt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,DIt(this,n)}onConnect(e,r){let{ret:n,res:i}=this;if(this.reason){e(this.reason);return}ZDe(!i,"pipeline cannot be retried"),ZDe(!n.destroyed),this.abort=e,this.context=r}onHeaders(e,r,n){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?dp.parseRawHeaders(r):dp.parseHeaders(r);this.onInfo({statusCode:e,headers:c})}return}this.res=new Nae(n);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?dp.parseRawHeaders(r):dp.parseHeaders(r);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",dp.nop),c}if(!l||typeof l.on!="function")throw new kIt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;dp.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||dp.destroy(c,new Dae)}),this.body=l}onData(e){let{res:r}=this;return r.push(e)}onComplete(e){let{res:r}=this;r.push(null)}onError(e){let{ret:r}=this;this.handler=null,dp.destroy(r,e)}};function NIt(t,e){try{let r=new Lae(t,e);return this.dispatch({...t,body:r.req},r),r.ret}catch(r){return new RIt().destroy(r)}}s(NIt,"pipeline");tPe.exports=NIt});var lPe=G((IJr,aPe)=>{"use strict";f();var{InvalidArgumentError:Fae,SocketError:LIt}=yo(),{AsyncResource:FIt}=require("node:async_hooks"),nPe=yi(),{addSignal:MIt,removeSignal:iPe}=cP(),oPe=require("node:assert"),Mae=class extends FIt{static{s(this,"UpgradeHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Fae("invalid opts");if(typeof r!="function")throw new Fae("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Fae("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=r,this.abort=null,this.context=null,MIt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}oPe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new LIt("bad upgrade",null)}onUpgrade(e,r,n){oPe(e===101);let{callback:i,opaque:o,context:a}=this;iPe(this),this.callback=null;let l=this.responseHeaders==="raw"?nPe.parseRawHeaders(r):nPe.parseHeaders(r);this.runInAsyncScope(i,null,null,{headers:l,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;iPe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function sPe(t,e){if(e===void 0)return new Promise((r,n)=>{sPe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Mae(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(sPe,"upgrade");aPe.exports=sPe});var pPe=G((_Jr,fPe)=>{"use strict";f();var QIt=require("node:assert"),{AsyncResource:OIt}=require("node:async_hooks"),{InvalidArgumentError:Qae,SocketError:UIt}=yo(),cPe=yi(),{addSignal:qIt,removeSignal:uPe}=cP(),Oae=class extends OIt{static{s(this,"ConnectHandler")}constructor(e,r){if(!e||typeof e!="object")throw new Qae("invalid opts");if(typeof r!="function")throw new Qae("invalid callback");let{signal:n,opaque:i,responseHeaders:o}=e;if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new Qae("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=r,this.abort=null,qIt(this,n)}onConnect(e,r){if(this.reason){e(this.reason);return}QIt(this.callback),this.abort=e,this.context=r}onHeaders(){throw new UIt("bad connect",null)}onUpgrade(e,r,n){let{callback:i,opaque:o,context:a}=this;uPe(this),this.callback=null;let l=r;l!=null&&(l=this.responseHeaders==="raw"?cPe.parseRawHeaders(r):cPe.parseHeaders(r)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:n,opaque:o,context:a})}onError(e){let{callback:r,opaque:n}=this;uPe(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:n})}))}};function dPe(t,e){if(e===void 0)return new Promise((r,n)=>{dPe.call(this,t,(i,o)=>i?n(i):r(o))});try{let r=new Oae(t,e);this.dispatch({...t,method:"CONNECT"},r)}catch(r){if(typeof e!="function")throw r;let n=t?.opaque;queueMicrotask(()=>e(r,{opaque:n}))}}s(dPe,"connect");fPe.exports=dPe});var mPe=G((kJr,A4)=>{"use strict";f();A4.exports.request=jDe();A4.exports.stream=XDe();A4.exports.pipeline=rPe();A4.exports.upgrade=lPe();A4.exports.connect=pPe()});var qae=G((DJr,hPe)=>{"use strict";f();var{UndiciError:WIt}=yo(),Uae=class t extends WIt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};hPe.exports={MockNotMatchedError:Uae}});var y4=G((LJr,gPe)=>{"use strict";f();gPe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var dP=G((MJr,_Pe)=>{"use strict";f();var{MockNotMatchedError:D2}=qae(),{kDispatches:PW,kMockAgent:GIt,kOriginalDispatch:HIt,kOrigin:jIt,kGetNetConnect:VIt}=y4(),{buildURL:$It}=yi(),{STATUS_CODES:zIt}=require("node:http"),{types:{isPromise:YIt}}=require("node:util");function ay(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(ay,"matchValue");function yPe(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e.toLocaleLowerCase(),r]))}s(yPe,"lowerCaseEntries");function CPe(t,e){if(Array.isArray(t)){for(let r=0;r<t.length;r+=2)if(t[r].toLocaleLowerCase()===e.toLocaleLowerCase())return t[r+1];return}else return typeof t.get=="function"?t.get(e):yPe(t)[e.toLocaleLowerCase()]}s(CPe,"getHeaderByName");function Hae(t){let e=t.slice(),r=[];for(let n=0;n<e.length;n+=2)r.push([e[n],e[n+1]]);return Object.fromEntries(r)}s(Hae,"buildHeadersFromArray");function xPe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Hae(e)),t.headers(e?yPe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[r,n]of Object.entries(t.headers)){let i=CPe(e,r);if(!ay(n,i))return!1}return!0}s(xPe,"matchHeaders");function APe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let r=new URLSearchParams(e.pop());return r.sort(),[...e,r.toString()].join("?")}s(APe,"safeUrl");function KIt(t,{path:e,method:r,body:n,headers:i}){let o=ay(t.path,e),a=ay(t.method,r),l=typeof t.body<"u"?ay(t.body,n):!0,c=xPe(t,i);return o&&a&&l&&c}s(KIt,"matchKey");function vPe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(vPe,"getResponseData");function bPe(t,e){let r=e.query?$It(e.path,e.query):e.path,n=typeof r=="string"?APe(r):r,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>ay(APe(o),n));if(i.length===0)throw new D2(`Mock dispatch not matched for path '${n}'`);if(i=i.filter(({method:o})=>ay(o,e.method)),i.length===0)throw new D2(`Mock dispatch not matched for method '${e.method}' on path '${n}'`);if(i=i.filter(({body:o})=>typeof o<"u"?ay(o,e.body):!0),i.length===0)throw new D2(`Mock dispatch not matched for body '${e.body}' on path '${n}'`);if(i=i.filter(o=>xPe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new D2(`Mock dispatch not matched for headers '${o}' on path '${n}'`)}return i[0]}s(bPe,"getMockDispatch");function JIt(t,e,r){let n={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof r=="function"?{callback:r}:{...r},o={...n,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(JIt,"addMockDispatch");function Wae(t,e){let r=t.findIndex(n=>n.consumed?KIt(n,e):!1);r!==-1&&t.splice(r,1)}s(Wae,"deleteMockDispatch");function EPe(t){let{path:e,method:r,body:n,headers:i,query:o}=t;return{path:e,method:r,body:n,headers:i,query:o}}s(EPe,"buildKey");function Gae(t){let e=Object.keys(t),r=[];for(let n=0;n<e.length;++n){let i=e[n],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)r.push(a,Buffer.from(`${o[l]}`));else r.push(a,Buffer.from(`${o}`))}return r}s(Gae,"generateKeyValues");function IPe(t){return zIt[t]||"unknown"}s(IPe,"getStatusText");async function XIt(t){let e=[];for await(let r of t)e.push(r);return Buffer.concat(e).toString("utf8")}s(XIt,"getResponse");function TPe(t,e){let r=EPe(t),n=bPe(this[PW],r);n.timesInvoked++,n.data.callback&&(n.data={...n.data,...n.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=n,{timesInvoked:p,times:m}=n;if(n.consumed=!d&&p>=m,n.pending=p<m,c!==null)return Wae(this[PW],r),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[PW])},u):h(this[PW]);function h(y,v=o){let b=Array.isArray(t.headers)?Hae(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if(YIt(E)){E.then(N=>h(y,N));return}let _=vPe(E),k=Gae(a),B=Gae(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,IPe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(B),Wae(y,r)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(TPe,"mockDispatch");function ZIt(){let t=this[GIt],e=this[jIt],r=this[HIt];return s(function(i,o){if(t.isMockActive)try{TPe.call(this,i,o)}catch(a){if(a instanceof D2){let l=t[VIt]();if(l===!1)throw new D2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(wPe(l,e))r.call(this,i,o);else throw new D2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else r.call(this,i,o)},"dispatch")}s(ZIt,"buildMockDispatch");function wPe(t,e){let r=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(n=>ay(n,r.host)))}s(wPe,"checkNetConnect");function e2t(t){if(t){let{agent:e,...r}=t;return r}}s(e2t,"buildMockOptions");_Pe.exports={getResponseData:vPe,getMockDispatch:bPe,addMockDispatch:JIt,deleteMockDispatch:Wae,buildKey:EPe,generateKeyValues:Gae,matchValue:ay,getResponse:XIt,getStatusText:IPe,mockDispatch:TPe,buildMockDispatch:ZIt,checkNetConnect:wPe,buildMockOptions:e2t,getHeaderByName:CPe,buildHeadersFromArray:Hae}});var Jae=G((UJr,Kae)=>{"use strict";f();var{getResponseData:t2t,buildKey:r2t,addMockDispatch:jae}=dP(),{kDispatches:NW,kDispatchKey:LW,kDefaultHeaders:Vae,kDefaultTrailers:$ae,kContentLength:zae,kMockDispatch:FW}=y4(),{InvalidArgumentError:jg}=yo(),{buildURL:n2t}=yi(),C4=class{static{s(this,"MockScope")}constructor(e){this[FW]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new jg("waitInMs must be a valid integer > 0");return this[FW].delay=e,this}persist(){return this[FW].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new jg("repeatTimes must be a valid integer > 0");return this[FW].times=e,this}},Yae=class{static{s(this,"MockInterceptor")}constructor(e,r){if(typeof e!="object")throw new jg("opts must be an object");if(typeof e.path>"u")throw new jg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=n2t(e.path,e.query);else{let n=new URL(e.path,"data://");e.path=n.pathname+n.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[LW]=r2t(e),this[NW]=r,this[Vae]={},this[$ae]={},this[zae]=!1}createMockScopeDispatchData({statusCode:e,data:r,responseOptions:n}){let i=t2t(r),o=this[zae]?{"content-length":i.length}:{},a={...this[Vae],...o,...n.headers},l={...this[$ae],...n.trailers};return{statusCode:e,data:r,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new jg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new jg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new jg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=jae(this[NW],this[LW],o);return new C4(a)}let r={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let n=this.createMockScopeDispatchData(r),i=jae(this[NW],this[LW],n);return new C4(i)}replyWithError(e){if(typeof e>"u")throw new jg("error must be defined");let r=jae(this[NW],this[LW],{error:e});return new C4(r)}defaultReplyHeaders(e){if(typeof e>"u")throw new jg("headers must be defined");return this[Vae]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new jg("trailers must be defined");return this[$ae]=e,this}replyContentLength(){return this[zae]=!0,this}};Kae.exports.MockInterceptor=Yae;Kae.exports.MockScope=C4});var ele=G((GJr,NPe)=>{"use strict";f();var{promisify:i2t}=require("node:util"),o2t=ZD(),{buildMockDispatch:s2t}=dP(),{kDispatches:SPe,kMockAgent:RPe,kClose:kPe,kOriginalClose:BPe,kOrigin:DPe,kOriginalDispatch:a2t,kConnected:Xae}=y4(),{MockInterceptor:l2t}=Jae(),PPe=Qs(),{InvalidArgumentError:c2t}=yo(),Zae=class extends o2t{static{s(this,"MockClient")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new c2t("Argument opts.agent must implement Agent");this[RPe]=r.agent,this[DPe]=e,this[SPe]=[],this[Xae]=1,this[a2t]=this.dispatch,this[BPe]=this.close.bind(this),this.dispatch=s2t.call(this),this.close=this[kPe]}get[PPe.kConnected](){return this[Xae]}intercept(e){return new l2t(e,this[SPe])}async[kPe](){await i2t(this[BPe])(),this[Xae]=0,this[RPe][PPe.kClients].delete(this[DPe])}};NPe.exports=Zae});var nle=G((VJr,qPe)=>{"use strict";f();var{promisify:u2t}=require("node:util"),d2t=u4(),{buildMockDispatch:f2t}=dP(),{kDispatches:LPe,kMockAgent:FPe,kClose:MPe,kOriginalClose:QPe,kOrigin:OPe,kOriginalDispatch:p2t,kConnected:tle}=y4(),{MockInterceptor:m2t}=Jae(),UPe=Qs(),{InvalidArgumentError:h2t}=yo(),rle=class extends d2t{static{s(this,"MockPool")}constructor(e,r){if(super(e,r),!r||!r.agent||typeof r.agent.dispatch!="function")throw new h2t("Argument opts.agent must implement Agent");this[FPe]=r.agent,this[OPe]=e,this[LPe]=[],this[tle]=1,this[p2t]=this.dispatch,this[QPe]=this.close.bind(this),this.dispatch=f2t.call(this),this.close=this[MPe]}get[UPe.kConnected](){return this[tle]}intercept(e){return new m2t(e,this[LPe])}async[MPe](){await u2t(this[QPe])(),this[tle]=0,this[FPe][UPe.kClients].delete(this[OPe])}};qPe.exports=rle});var GPe=G((KJr,WPe)=>{"use strict";f();var g2t={pronoun:"it",is:"is",was:"was",this:"this"},A2t={pronoun:"they",is:"are",was:"were",this:"these"};WPe.exports=class{static{s(this,"Pluralizer")}constructor(e,r){this.singular=e,this.plural=r}pluralize(e){let r=e===1,n=r?g2t:A2t,i=r?this.singular:this.plural;return{...n,count:e,noun:i}}}});var jPe=G((eXr,HPe)=>{"use strict";f();var{Transform:y2t}=require("node:stream"),{Console:C2t}=require("node:console"),x2t=process.versions.icu?"\u2705":"Y ",v2t=process.versions.icu?"\u274C":"N ";HPe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new y2t({transform(r,n,i){i(null,r)}}),this.logger=new C2t({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let r=e.map(({method:n,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:n,Origin:u,Path:i,"Status code":o,Persistent:a?x2t:v2t,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(r),this.transform.read().toString()}}});var YPe=G((nXr,zPe)=>{"use strict";f();var{kClients:P2}=Qs(),b2t=d4(),{kAgent:ile,kMockAgentSet:MW,kMockAgentGet:VPe,kDispatches:ole,kIsMockActive:QW,kNetConnect:N2,kGetNetConnect:E2t,kOptions:OW,kFactory:UW}=y4(),I2t=ele(),T2t=nle(),{matchValue:w2t,buildMockOptions:_2t}=dP(),{InvalidArgumentError:$Pe,UndiciError:S2t}=yo(),R2t=BD(),k2t=GPe(),B2t=jPe(),sle=class extends R2t{static{s(this,"MockAgent")}constructor(e){if(super(e),this[N2]=!0,this[QW]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new $Pe("Argument opts.agent must implement Agent");let r=e?.agent?e.agent:new b2t(e);this[ile]=r,this[P2]=r[P2],this[OW]=_2t(e)}get(e){let r=this[VPe](e);return r||(r=this[UW](e),this[MW](e,r)),r}dispatch(e,r){return this.get(e.origin),this[ile].dispatch(e,r)}async close(){await this[ile].close(),this[P2].clear()}deactivate(){this[QW]=!1}activate(){this[QW]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[N2])?this[N2].push(e):this[N2]=[e];else if(typeof e>"u")this[N2]=!0;else throw new $Pe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[N2]=!1}get isMockActive(){return this[QW]}[MW](e,r){this[P2].set(e,r)}[UW](e){let r=Object.assign({agent:this},this[OW]);return this[OW]&&this[OW].connections===1?new I2t(e,r):new T2t(e,r)}[VPe](e){let r=this[P2].get(e);if(r)return r;if(typeof e!="string"){let n=this[UW]("http://localhost:9999");return this[MW](e,n),n}for(let[n,i]of Array.from(this[P2]))if(i&&typeof n!="string"&&w2t(n,e)){let o=this[UW](e);return this[MW](e,o),o[ole]=i[ole],o}}[E2t](){return this[N2]}pendingInterceptors(){let e=this[P2];return Array.from(e.entries()).flatMap(([r,n])=>n[ole].map(i=>({...i,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new B2t}={}){let r=this.pendingInterceptors();if(r.length===0)return;let n=new k2t("interceptor","interceptors").pluralize(r.length);throw new S2t(`
${n.count} ${n.noun} ${n.is} pending:

${e.format(r)}
`.trim())}};zPe.exports=sle});var qW=G((sXr,ZPe)=>{"use strict";f();var KPe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:D2t}=yo(),P2t=d4();XPe()===void 0&&JPe(new P2t);function JPe(t){if(!t||typeof t.dispatch!="function")throw new D2t("Argument agent must implement Agent");Object.defineProperty(globalThis,KPe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(JPe,"setGlobalDispatcher");function XPe(){return globalThis[KPe]}s(XPe,"getGlobalDispatcher");ZPe.exports={setGlobalDispatcher:JPe,getGlobalDispatcher:XPe}});var WW=G((uXr,e9e)=>{"use strict";f();e9e.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var r9e=G((pXr,t9e)=>{"use strict";f();var N2t=CW();t9e.exports=t=>{let e=t?.maxRedirections;return r=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return r(i,o);let c=new N2t(r,a,i,o);return r(l,c)},"redirectInterceptor")}});var i9e=G((gXr,n9e)=>{"use strict";f();var L2t=BW();n9e.exports=t=>e=>s(function(n,i){return e(n,new L2t({...n,retryOptions:{...t,...n.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var s9e=G((CXr,o9e)=>{"use strict";f();var F2t=yi(),{InvalidArgumentError:M2t,RequestAbortedError:Q2t}=yo(),O2t=WW(),ale=class extends O2t{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#n=!1;#r=0;#o=null;#s=null;constructor({maxSize:e},r){if(super(r),e!=null&&(!Number.isFinite(e)||e<1))throw new M2t("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=r}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#n=!0,this.#o=e}onHeaders(e,r,n,i){let a=F2t.parseHeaders(r)["content-length"];if(a!=null&&a>this.#e)throw new Q2t(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#n?!0:this.#s.onHeaders(e,r,n,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#r=this.#r+e.length,this.#r>=this.#e&&(this.#i=!0,this.#n?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#n){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function U2t({maxSize:t}={maxSize:1024*1024}){return e=>s(function(n,i){let{dumpMaxSize:o=t}=n,a=new ale({maxSize:o},i);return e(n,a)},"Intercept")}s(U2t,"createDumpInterceptor");o9e.exports=U2t});var c9e=G((bXr,l9e)=>{"use strict";f();var{isIP:q2t}=require("node:net"),{lookup:W2t}=require("node:dns"),G2t=WW(),{InvalidArgumentError:x4,InformationalError:H2t}=yo(),a9e=Math.pow(2,31)-1,lle=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#n,this.pick=e.pick??this.#r}get full(){return this.#i.size===this.#t}runLookup(e,r,n){let i=this.#i.get(e.hostname);if(i==null&&this.full){n(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){n(a??new H2t("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",n(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,r,n);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",n(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#n(e,r,n){W2t(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return n(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);n(null,a.values())})}#r(e,r,n){let i=null,{records:o,offset:a}=r,l;if(this.dualStack?(n==null&&(a==null||a===a9e?(r.offset=0,n=4):(r.offset++,n=(r.offset&1)===1?6:4)),o[n]!=null&&o[n].ips.length>0?l=o[n]:l=o[n===4?6:4]):l=o[n],l==null||l.ips.length===0)return i;l.offset==null||l.offset===a9e?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,r,n)):i}setRecords(e,r){let n=Date.now(),i={records:{4:null,6:null}};for(let o of r){o.timestamp=n,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,r){return new cle(this,e,r)}},cle=class extends G2t{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#n=null;#r=null;constructor(e,{origin:r,handler:n,dispatch:i},o){super(n),this.#r=r,this.#n=n,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#r,this.#t,(r,n)=>{if(r)return this.#n.onError(r);let i={...this.#t,origin:n};this.#i(i,this)});return}this.#n.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#r);default:this.#n.onError(e);break}}};l9e.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new x4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new x4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new x4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new x4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new x4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new x4("Invalid pick. Must be a function");let e=t?.dualStack??!0,r;e?r=t?.affinity??null:r=t?.affinity??4;let n={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:r,maxItems:t?.maxItems??1/0},i=new lle(n);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return q2t(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var L2=G((TXr,g9e)=>{"use strict";f();var{kConstruct:j2t}=Qs(),{kEnumerableProperty:v4}=yi(),{iteratorMixin:V2t,isValidHeaderName:fP,isValidHeaderValue:d9e}=B0(),{webidl:Zi}=Ac(),ule=require("node:assert"),GW=require("node:util"),el=Symbol("headers map"),N0=Symbol("headers map sorted");function u9e(t){return t===10||t===13||t===9||t===32}s(u9e,"isHTTPWhiteSpaceCharCode");function f9e(t){let e=0,r=t.length;for(;r>e&&u9e(t.charCodeAt(r-1));)--r;for(;r>e&&u9e(t.charCodeAt(e));)++e;return e===0&&r===t.length?t:t.substring(e,r)}s(f9e,"headerValueNormalize");function p9e(t,e){if(Array.isArray(e))for(let r=0;r<e.length;++r){let n=e[r];if(n.length!==2)throw Zi.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${n.length}.`});dle(t,n[0],n[1])}else if(typeof e=="object"&&e!==null){let r=Object.keys(e);for(let n=0;n<r.length;++n)dle(t,r[n],e[r[n]])}else throw Zi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(p9e,"fill");function dle(t,e,r){if(r=f9e(r),fP(e)){if(!d9e(r))throw Zi.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Zi.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(h9e(t)==="immutable")throw new TypeError("immutable");return fle(t).append(e,r,!1)}s(dle,"appendHeader");function m9e(t,e){return t[0]<e[0]?-1:1}s(m9e,"compareHeaderName");var HW=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[el]=new Map(e[el]),this[N0]=e[N0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[el]=new Map(e),this[N0]=null)}contains(e,r){return this[el].has(r?e:e.toLowerCase())}clear(){this[el].clear(),this[N0]=null,this.cookies=null}append(e,r,n){this[N0]=null;let i=n?e:e.toLowerCase(),o=this[el].get(i);if(o){let a=i==="cookie"?"; ":", ";this[el].set(i,{name:o.name,value:`${o.value}${a}${r}`})}else this[el].set(i,{name:e,value:r});i==="set-cookie"&&(this.cookies??=[]).push(r)}set(e,r,n){this[N0]=null;let i=n?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[r]),this[el].set(i,{name:e,value:r})}delete(e,r){this[N0]=null,r||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[el].delete(e)}get(e,r){return this[el].get(r?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:r}}of this[el])yield[e,r]}get entries(){let e={};if(this[el].size!==0)for(let{name:r,value:n}of this[el].values())e[r]=n;return e}rawValues(){return this[el].values()}get entriesList(){let e=[];if(this[el].size!==0)for(let{0:r,1:{name:n,value:i}}of this[el])if(r==="set-cookie")for(let o of this.cookies)e.push([n,o]);else e.push([n,i]);return e}toSortedArray(){let e=this[el].size,r=new Array(e);if(e<=32){if(e===0)return r;let n=this[el][Symbol.iterator](),i=n.next().value;r[0]=[i[0],i[1].value],ule(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=n.next().value,d=r[o]=[p[0],p[1].value],ule(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),r[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)r[a]=r[--a];r[c]=d}}if(!n.next().done)throw new TypeError("Unreachable");return r}else{let n=0;for(let{0:i,1:{value:o}}of this[el])r[n++]=[i,o],ule(o!==null);return r.sort(m9e)}}},jm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){Zi.util.markAsUncloneable(this),e!==j2t&&(this.#t=new HW,this.#e="none",e!==void 0&&(e=Zi.converters.HeadersInit(e,"Headers contructor","init"),p9e(this,e)))}append(e,r){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,2,"Headers.append");let n="Headers.append";return e=Zi.converters.ByteString(e,n,"name"),r=Zi.converters.ByteString(r,n,"value"),dle(this,e,r)}delete(e){if(Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.delete"),e=Zi.converters.ByteString(e,"Headers.delete","name"),!fP(e))throw Zi.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(e=Zi.converters.ByteString(e,r,"name"),!fP(e))throw Zi.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(e=Zi.converters.ByteString(e,r,"name"),!fP(e))throw Zi.errors.invalidArgument({prefix:r,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,r){Zi.brandCheck(this,t),Zi.argumentLengthCheck(arguments,2,"Headers.set");let n="Headers.set";if(e=Zi.converters.ByteString(e,n,"name"),r=Zi.converters.ByteString(r,n,"value"),r=f9e(r),fP(e)){if(!d9e(r))throw Zi.errors.invalidArgument({prefix:n,value:r,type:"header value"})}else throw Zi.errors.invalidArgument({prefix:n,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,r,!1)}getSetCookie(){Zi.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[N0](){if(this.#t[N0])return this.#t[N0];let e=[],r=this.#t.toSortedArray(),n=this.#t.cookies;if(n===null||n.length===1)return this.#t[N0]=r;for(let i=0;i<r.length;++i){let{0:o,1:a}=r[i];if(o==="set-cookie")for(let l=0;l<n.length;++l)e.push([o,n[l]]);else e.push([o,a])}return this.#t[N0]=e}[GW.inspect.custom](e,r){return r.depth??=e,`Headers ${GW.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,r){e.#e=r}static getHeadersList(e){return e.#t}static setHeadersList(e,r){e.#t=r}},{getHeadersGuard:h9e,setHeadersGuard:$2t,getHeadersList:fle,setHeadersList:z2t}=jm;Reflect.deleteProperty(jm,"getHeadersGuard");Reflect.deleteProperty(jm,"setHeadersGuard");Reflect.deleteProperty(jm,"getHeadersList");Reflect.deleteProperty(jm,"setHeadersList");V2t("Headers",jm,N0,0,1);Object.defineProperties(jm.prototype,{append:v4,delete:v4,get:v4,has:v4,set:v4,getSetCookie:v4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[GW.inspect.custom]:{enumerable:!1}});Zi.converters.HeadersInit=function(t,e,r){if(Zi.util.Type(t)==="Object"){let n=Reflect.get(t,Symbol.iterator);if(!GW.types.isProxy(t)&&n===jm.prototype.entries)try{return fle(t).entriesList}catch{}return typeof n=="function"?Zi.converters["sequence<sequence<ByteString>>"](t,e,r,n.bind(t)):Zi.converters["record<ByteString, ByteString>"](t,e,r)}throw Zi.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};g9e.exports={fill:p9e,compareHeaderName:m9e,Headers:jm,HeadersList:HW,getHeadersGuard:h9e,setHeadersGuard:$2t,setHeadersList:z2t,getHeadersList:fle}});var mP=G((SXr,w9e)=>{"use strict";f();var{Headers:b9e,HeadersList:A9e,fill:Y2t,getHeadersGuard:K2t,setHeadersGuard:E9e,setHeadersList:I9e}=L2(),{extractBody:y9e,cloneBody:J2t,mixinBody:X2t,hasFinalizationRegistry:Z2t,streamRegistry:eTt,bodyUnusable:tTt}=n4(),ple=yi(),C9e=require("node:util"),{kEnumerableProperty:L0}=ple,{isValidReasonPhrase:rTt,isCancelled:nTt,isAborted:iTt,isBlobLike:oTt,serializeJavascriptValueToJSONString:sTt,isErrorLike:aTt,isomorphicEncode:lTt,environmentSettingsObject:cTt}=B0(),{redirectStatusSet:uTt,nullBodyStatus:dTt}=ND(),{kState:fa,kHeaders:ly}=Sv(),{webidl:si}=Ac(),{FormData:fTt}=UD(),{URLSerializer:x9e}=Sd(),{kConstruct:VW}=Qs(),mle=require("node:assert"),{types:pTt}=require("node:util"),mTt=new TextEncoder("utf-8"),F2=class t{static{s(this,"Response")}static error(){return pP($W(),"immutable")}static json(e,r={}){si.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=si.converters.ResponseInit(r));let n=mTt.encode(sTt(e)),i=y9e(n),o=pP(b4({}),"response");return v9e(o,r,{body:i[0],type:"application/json"}),o}static redirect(e,r=302){si.argumentLengthCheck(arguments,1,"Response.redirect"),e=si.converters.USVString(e),r=si.converters["unsigned short"](r);let n;try{n=new URL(e,cTt.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!uTt.has(r))throw new RangeError(`Invalid status code ${r}`);let i=pP(b4({}),"immutable");i[fa].status=r;let o=lTt(x9e(n));return i[fa].headersList.append("location",o,!0),i}constructor(e=null,r={}){if(si.util.markAsUncloneable(this),e===VW)return;e!==null&&(e=si.converters.BodyInit(e)),r=si.converters.ResponseInit(r),this[fa]=b4({}),this[ly]=new b9e(VW),E9e(this[ly],"response"),I9e(this[ly],this[fa].headersList);let n=null;if(e!=null){let[i,o]=y9e(e);n={body:i,type:o}}v9e(this,r,n)}get type(){return si.brandCheck(this,t),this[fa].type}get url(){si.brandCheck(this,t);let e=this[fa].urlList,r=e[e.length-1]??null;return r===null?"":x9e(r,!0)}get redirected(){return si.brandCheck(this,t),this[fa].urlList.length>1}get status(){return si.brandCheck(this,t),this[fa].status}get ok(){return si.brandCheck(this,t),this[fa].status>=200&&this[fa].status<=299}get statusText(){return si.brandCheck(this,t),this[fa].statusText}get headers(){return si.brandCheck(this,t),this[ly]}get body(){return si.brandCheck(this,t),this[fa].body?this[fa].body.stream:null}get bodyUsed(){return si.brandCheck(this,t),!!this[fa].body&&ple.isDisturbed(this[fa].body.stream)}clone(){if(si.brandCheck(this,t),tTt(this))throw si.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=hle(this[fa]);return pP(e,K2t(this[ly]))}[C9e.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${C9e.formatWithOptions(r,n)}`}};X2t(F2);Object.defineProperties(F2.prototype,{type:L0,url:L0,status:L0,ok:L0,redirected:L0,statusText:L0,headers:L0,clone:L0,body:L0,bodyUsed:L0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(F2,{json:L0,redirect:L0,error:L0});function hle(t){if(t.internalResponse)return T9e(hle(t.internalResponse),t.type);let e=b4({...t,body:null});return t.body!=null&&(e.body=J2t(e,t.body)),e}s(hle,"cloneResponse");function b4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new A9e(t?.headersList):new A9e,urlList:t?.urlList?[...t.urlList]:[]}}s(b4,"makeResponse");function $W(t){let e=aTt(t);return b4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s($W,"makeNetworkError");function hTt(t){return t.type==="error"&&t.status===0}s(hTt,"isNetworkError");function jW(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(r,n){return n in e?e[n]:r[n]},set(r,n,i){return mle(!(n in e)),r[n]=i,!0}})}s(jW,"makeFilteredResponse");function T9e(t,e){if(e==="basic")return jW(t,{type:"basic",headersList:t.headersList});if(e==="cors")return jW(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return jW(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return jW(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});mle(!1)}s(T9e,"filterResponse");function gTt(t,e=null){return mle(nTt(t)),iTt(t)?$W(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):$W(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(gTt,"makeAppropriateNetworkError");function v9e(t,e,r){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!rTt(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[fa].status=e.status),"statusText"in e&&e.statusText!=null&&(t[fa].statusText=e.statusText),"headers"in e&&e.headers!=null&&Y2t(t[ly],e.headers),r){if(dTt.includes(t.status))throw si.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[fa].body=r.body,r.type!=null&&!t[fa].headersList.contains("content-type",!0)&&t[fa].headersList.append("content-type",r.type,!0)}}s(v9e,"initializeResponse");function pP(t,e){let r=new F2(VW);return r[fa]=t,r[ly]=new b9e(VW),I9e(r[ly],t.headersList),E9e(r[ly],e),Z2t&&t.body?.stream&&eTt.register(r,new WeakRef(t.body.stream)),r}s(pP,"fromInnerResponse");si.converters.ReadableStream=si.interfaceConverter(ReadableStream);si.converters.FormData=si.interfaceConverter(fTt);si.converters.URLSearchParams=si.interfaceConverter(URLSearchParams);si.converters.XMLHttpRequestBodyInit=function(t,e,r){return typeof t=="string"?si.converters.USVString(t,e,r):oTt(t)?si.converters.Blob(t,e,r,{strict:!1}):ArrayBuffer.isView(t)||pTt.isArrayBuffer(t)?si.converters.BufferSource(t,e,r):ple.isFormDataLike(t)?si.converters.FormData(t,e,r,{strict:!1}):t instanceof URLSearchParams?si.converters.URLSearchParams(t,e,r):si.converters.DOMString(t,e,r)};si.converters.BodyInit=function(t,e,r){return t instanceof ReadableStream?si.converters.ReadableStream(t,e,r):t?.[Symbol.asyncIterator]?t:si.converters.XMLHttpRequestBodyInit(t,e,r)};si.converters.ResponseInit=si.dictionaryConverter([{key:"status",converter:si.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:si.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:si.converters.HeadersInit}]);w9e.exports={isNetworkError:hTt,makeNetworkError:$W,makeResponse:b4,makeAppropriateNetworkError:gTt,filterResponse:T9e,Response:F2,cloneResponse:hle,fromInnerResponse:pP}});var k9e=G((BXr,R9e)=>{"use strict";f();var{kConnected:_9e,kSize:S9e}=Qs(),gle=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[_9e]===0&&this.value[S9e]===0?void 0:this.value}},Ale=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,r){e.on&&e.on("disconnect",()=>{e[_9e]===0&&e[S9e]===0&&this.finalizer(r)})}unregister(e){}};R9e.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:gle,FinalizationRegistry:Ale}):{WeakRef,FinalizationRegistry}}});var E4=G((NXr,j9e)=>{"use strict";f();var{extractBody:ATt,mixinBody:yTt,cloneBody:CTt,bodyUnusable:B9e}=n4(),{Headers:U9e,fill:xTt,HeadersList:JW,setHeadersGuard:Cle,getHeadersGuard:vTt,setHeadersList:q9e,getHeadersList:D9e}=L2(),{FinalizationRegistry:bTt}=k9e()(),YW=yi(),P9e=require("node:util"),{isValidHTTPToken:ETt,sameOrigin:N9e,environmentSettingsObject:zW}=B0(),{forbiddenMethodsSet:ITt,corsSafeListedMethodsSet:TTt,referrerPolicy:wTt,requestRedirect:_Tt,requestMode:STt,requestCredentials:RTt,requestCache:kTt,requestDuplex:BTt}=ND(),{kEnumerableProperty:tl,normalizedMethodRecordsBase:DTt,normalizedMethodRecords:PTt}=YW,{kHeaders:F0,kSignal:KW,kState:vs,kDispatcher:yle}=Sv(),{webidl:In}=Ac(),{URLSerializer:NTt}=Sd(),{kConstruct:XW}=Qs(),LTt=require("node:assert"),{getMaxListeners:L9e,setMaxListeners:F9e,getEventListeners:FTt,defaultMaxListeners:M9e}=require("node:events"),MTt=Symbol("abortController"),W9e=new bTt(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),ZW=new WeakMap;function Q9e(t){return e;function e(){let r=t.deref();if(r!==void 0){W9e.unregister(e),this.removeEventListener("abort",e),r.abort(this.reason);let n=ZW.get(r.signal);if(n!==void 0){if(n.size!==0){for(let i of n){let o=i.deref();o!==void 0&&o.abort(this.reason)}n.clear()}ZW.delete(r.signal)}}}}s(Q9e,"buildAbort");var O9e=!1,Ov=class t{static{s(this,"Request")}constructor(e,r={}){if(In.util.markAsUncloneable(this),e===XW)return;let n="Request constructor";In.argumentLengthCheck(arguments,1,n),e=In.converters.RequestInfo(e,n,"input"),r=In.converters.RequestInit(r,n,"init");let i=null,o=null,a=zW.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[yle]=r.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=eG({urlList:[b]}),o="cors"}else this[yle]=r.dispatcher||e[yle],LTt(e instanceof t),i=e[vs],l=e[KW];let c=zW.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&N9e(i.window,c)&&(u=i.window),r.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in r&&(u="no-window"),i=eG({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:zW.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(r).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),r.referrer!==void 0){let b=r.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!N9e(E,zW.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}r.referrerPolicy!==void 0&&(i.referrerPolicy=r.referrerPolicy);let p;if(r.mode!==void 0?p=r.mode:p=o,p==="navigate")throw In.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),r.credentials!==void 0&&(i.credentials=r.credentials),r.cache!==void 0&&(i.cache=r.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(i.redirect=r.redirect),r.integrity!=null&&(i.integrity=String(r.integrity)),r.keepalive!==void 0&&(i.keepalive=!!r.keepalive),r.method!==void 0){let b=r.method,E=PTt[b];if(E!==void 0)i.method=E;else{if(!ETt(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(ITt.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=DTt[_]??b,i.method=b}!O9e&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),O9e=!0)}r.signal!==void 0&&(l=r.signal),this[vs]=i;let m=new AbortController;if(this[KW]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[MTt]=m;let b=new WeakRef(m),E=Q9e(b);try{(typeof L9e=="function"&&L9e(l)===M9e||FTt(l,"abort").length>=M9e)&&F9e(1500,l)}catch{}YW.addAbortListener(l,E),W9e.register(m,{signal:l,abort:E},E)}}if(this[F0]=new U9e(XW),q9e(this[F0],i.headersList),Cle(this[F0],"request"),p==="no-cors"){if(!TTt.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);Cle(this[F0],"request-no-cors")}if(d){let b=D9e(this[F0]),E=r.headers!==void 0?r.headers:new JW(b);if(b.clear(),E instanceof JW){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else xTt(this[F0],E)}let h=e instanceof t?e[vs].body:null;if((r.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(r.body!=null){let[b,E]=ATt(r.body,i.keepalive);g=b,E&&!D9e(this[F0]).contains("content-type",!0)&&this[F0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(B9e(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[vs].body=v}get method(){return In.brandCheck(this,t),this[vs].method}get url(){return In.brandCheck(this,t),NTt(this[vs].url)}get headers(){return In.brandCheck(this,t),this[F0]}get destination(){return In.brandCheck(this,t),this[vs].destination}get referrer(){return In.brandCheck(this,t),this[vs].referrer==="no-referrer"?"":this[vs].referrer==="client"?"about:client":this[vs].referrer.toString()}get referrerPolicy(){return In.brandCheck(this,t),this[vs].referrerPolicy}get mode(){return In.brandCheck(this,t),this[vs].mode}get credentials(){return this[vs].credentials}get cache(){return In.brandCheck(this,t),this[vs].cache}get redirect(){return In.brandCheck(this,t),this[vs].redirect}get integrity(){return In.brandCheck(this,t),this[vs].integrity}get keepalive(){return In.brandCheck(this,t),this[vs].keepalive}get isReloadNavigation(){return In.brandCheck(this,t),this[vs].reloadNavigation}get isHistoryNavigation(){return In.brandCheck(this,t),this[vs].historyNavigation}get signal(){return In.brandCheck(this,t),this[KW]}get body(){return In.brandCheck(this,t),this[vs].body?this[vs].body.stream:null}get bodyUsed(){return In.brandCheck(this,t),!!this[vs].body&&YW.isDisturbed(this[vs].body.stream)}get duplex(){return In.brandCheck(this,t),"half"}clone(){if(In.brandCheck(this,t),B9e(this))throw new TypeError("unusable");let e=G9e(this[vs]),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let n=ZW.get(this.signal);n===void 0&&(n=new Set,ZW.set(this.signal,n));let i=new WeakRef(r);n.add(i),YW.addAbortListener(r.signal,Q9e(i))}return H9e(e,r.signal,vTt(this[F0]))}[P9e.inspect.custom](e,r){r.depth===null&&(r.depth=2),r.colors??=!0;let n={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${P9e.formatWithOptions(r,n)}`}};yTt(Ov);function eG(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new JW(t.headersList):new JW}}s(eG,"makeRequest");function G9e(t){let e=eG({...t,body:null});return t.body!=null&&(e.body=CTt(e,t.body)),e}s(G9e,"cloneRequest");function H9e(t,e,r){let n=new Ov(XW);return n[vs]=t,n[KW]=e,n[F0]=new U9e(XW),q9e(n[F0],t.headersList),Cle(n[F0],r),n}s(H9e,"fromInnerRequest");Object.defineProperties(Ov.prototype,{method:tl,url:tl,headers:tl,redirect:tl,clone:tl,signal:tl,duplex:tl,destination:tl,body:tl,bodyUsed:tl,isHistoryNavigation:tl,isReloadNavigation:tl,keepalive:tl,integrity:tl,cache:tl,credentials:tl,attribute:tl,referrerPolicy:tl,referrer:tl,mode:tl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});In.converters.Request=In.interfaceConverter(Ov);In.converters.RequestInfo=function(t,e,r){return typeof t=="string"?In.converters.USVString(t,e,r):t instanceof Ov?In.converters.Request(t,e,r):In.converters.USVString(t,e,r)};In.converters.AbortSignal=In.interfaceConverter(AbortSignal);In.converters.RequestInit=In.dictionaryConverter([{key:"method",converter:In.converters.ByteString},{key:"headers",converter:In.converters.HeadersInit},{key:"body",converter:In.nullableConverter(In.converters.BodyInit)},{key:"referrer",converter:In.converters.USVString},{key:"referrerPolicy",converter:In.converters.DOMString,allowedValues:wTt},{key:"mode",converter:In.converters.DOMString,allowedValues:STt},{key:"credentials",converter:In.converters.DOMString,allowedValues:RTt},{key:"cache",converter:In.converters.DOMString,allowedValues:kTt},{key:"redirect",converter:In.converters.DOMString,allowedValues:_Tt},{key:"integrity",converter:In.converters.DOMString},{key:"keepalive",converter:In.converters.boolean},{key:"signal",converter:In.nullableConverter(t=>In.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:In.converters.any},{key:"duplex",converter:In.converters.DOMString,allowedValues:BTt},{key:"dispatcher",converter:In.converters.any}]);j9e.exports={Request:Ov,makeRequest:eG,fromInnerRequest:H9e,cloneRequest:G9e}});var gP=G((MXr,s6e)=>{"use strict";f();var{makeNetworkError:Lo,makeAppropriateNetworkError:tG,filterResponse:xle,makeResponse:rG,fromInnerResponse:QTt}=mP(),{HeadersList:V9e}=L2(),{Request:OTt,cloneRequest:UTt}=E4(),Uv=require("node:zlib"),{bytesMatch:qTt,makePolicyContainer:WTt,clonePolicyContainer:GTt,requestBadPort:HTt,TAOCheck:jTt,appendRequestOriginHeader:VTt,responseLocationURL:$Tt,requestCurrentURL:Vg,setRequestReferrerPolicyOnRedirect:zTt,tryUpgradeRequestToAPotentiallyTrustworthyURL:YTt,createOpaqueTimingInfo:Tle,appendFetchMetadata:KTt,corsCheck:JTt,crossOriginResourcePolicyCheck:XTt,determineRequestsReferrer:ZTt,coarsenedSharedCurrentTime:hP,createDeferredPromise:ewt,isBlobLike:twt,sameOrigin:Ile,isCancelled:M2,isAborted:$9e,isErrorLike:rwt,fullyReadBody:nwt,readableStreamClose:iwt,isomorphicEncode:nG,urlIsLocal:owt,urlIsHttpHttpsScheme:wle,urlHasHttpsScheme:swt,clampAndCoarsenConnectionTimingInfo:awt,simpleRangeHeaderValue:lwt,buildContentRange:cwt,createInflate:uwt,extractMimeType:dwt}=B0(),{kState:J9e,kDispatcher:fwt}=Sv(),Q2=require("node:assert"),{safelyExtractBody:_le,extractBody:z9e}=n4(),{redirectStatusSet:X9e,nullBodyStatus:Z9e,safeMethodsSet:pwt,requestBodyHeader:mwt,subresourceSet:hwt}=ND(),gwt=require("node:events"),{Readable:Awt,pipeline:ywt,finished:Cwt}=require("node:stream"),{addAbortListener:xwt,isErrored:vwt,isReadable:iG,bufferToLowerCasedHeaderName:Y9e}=yi(),{dataURLProcessor:bwt,serializeAMimeType:Ewt,minimizeSupportedMimeType:Iwt}=Sd(),{getGlobalDispatcher:Twt}=qW(),{webidl:wwt}=Ac(),{STATUS_CODES:_wt}=require("node:http"),Swt=["GET","HEAD"],Rwt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",vle,oG=class extends gwt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function kwt(t){e6e(t,"fetch")}s(kwt,"handleFetchDone");function Bwt(t,e=void 0){wwt.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=ewt(),n;try{n=new OTt(t,e)}catch(d){return r.reject(d),r.promise}let i=n[J9e];if(n.signal.aborted)return ble(r,i,null,n.signal.reason),r.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return xwt(n.signal,()=>{l=!0,Q2(c!=null),c.abort(n.signal.reason);let d=a?.deref();ble(r,i,d,n.signal.reason)}),c=r6e({request:i,processResponseEndOfBody:kwt,processResponse:s(d=>{if(!l){if(d.aborted){ble(r,i,a,c.serializedAbortReason);return}if(d.type==="error"){r.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(QTt(d,"immutable")),r.resolve(a.deref()),r=null}},"processResponse"),dispatcher:n[fwt]}),r.promise}s(Bwt,"fetch");function e6e(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let r=t.urlList[0],n=t.timingInfo,i=t.cacheState;wle(r)&&n!==null&&(t.timingAllowPassed||(n=Tle({startTime:n.startTime}),i=""),n.endTime=hP(),t.timingInfo=n,t6e(n,r.href,e,globalThis,i))}s(e6e,"finalizeAndReportTiming");var t6e=performance.markResourceTiming;function ble(t,e,r,n){if(t&&t.reject(n),e.body!=null&&iG(e.body?.stream)&&e.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),r==null)return;let i=r[J9e];i.body!=null&&iG(i.body?.stream)&&i.body.stream.cancel(n).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(ble,"abortFetch");function r6e({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=Twt()}){Q2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=hP(u),p=Tle({startTime:d}),m={controller:new oG(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:r,processResponse:n,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return Q2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=GTt(t.client.policyContainer):t.policyContainer=WTt()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,hwt.has(t.destination),n6e(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(r6e,"fetching");async function n6e(t,e=!1){let r=t.request,n=null;if(r.localURLsOnly&&!owt(Vg(r))&&(n=Lo("local URLs only")),YTt(r),HTt(r)==="blocked"&&(n=Lo("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=ZTt(r)),n===null&&(n=await(async()=>{let o=Vg(r);return Ile(o,r.url)&&r.responseTainting==="basic"||o.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",await K9e(t)):r.mode==="same-origin"?Lo('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?Lo('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",await K9e(t)):wle(Vg(r))?(r.responseTainting="cors",await i6e(t)):Lo("URL scheme must be a HTTP(S) scheme")})()),e)return n;n.status!==0&&!n.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?n=xle(n,"basic"):r.responseTainting==="cors"?n=xle(n,"cors"):r.responseTainting==="opaque"?n=xle(n,"opaque"):Q2(!1));let i=n.status===0?n:n.internalResponse;if(i.urlList.length===0&&i.urlList.push(...r.urlList),r.timingAllowFailed||(n.timingAllowPassed=!0),n.type==="opaque"&&i.status===206&&i.rangeRequested&&!r.headers.contains("range",!0)&&(n=i=Lo()),n.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||Z9e.includes(i.status))&&(i.body=null,t.controller.dump=!0),r.integrity){let o=s(l=>Ele(t,Lo(l)),"processBodyError");if(r.responseTainting==="opaque"||n.body==null){o(n.error);return}let a=s(l=>{if(!qTt(l,r.integrity)){o("integrity mismatch");return}n.body=_le(l)[0],Ele(t,n)},"processBody");await nwt(n.body,a,o)}else Ele(t,n)}s(n6e,"mainFetch");function K9e(t){if(M2(t)&&t.request.redirectCount===0)return Promise.resolve(tG(t));let{request:e}=t,{protocol:r}=Vg(e);switch(r){case"about:":return Promise.resolve(Lo("about scheme is not supported"));case"blob:":{vle||(vle=require("node:buffer").resolveObjectURL);let n=Vg(e);if(n.search.length!==0)return Promise.resolve(Lo("NetworkError when attempting to fetch resource."));let i=vle(n.toString());if(e.method!=="GET"||!twt(i))return Promise.resolve(Lo("invalid method"));let o=rG(),a=i.size,l=nG(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=lwt(u,!0);if(d==="failure")return Promise.resolve(Lo("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Lo("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=z9e(h);o.body=g[0];let y=nG(`${h.size}`),v=cwt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=z9e(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let n=Vg(e),i=bwt(n);if(i==="failure")return Promise.resolve(Lo("failed to fetch the data URL"));let o=Ewt(i.mimeType);return Promise.resolve(rG({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:_le(i.body)[0]}))}case"file:":return Promise.resolve(Lo("not implemented... yet..."));case"http:":case"https:":return i6e(t).catch(n=>Lo(n));default:return Promise.resolve(Lo("unknown scheme"))}}s(K9e,"schemeFetch");function Dwt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(Dwt,"finalizeResponse");function Ele(t,e){let r=t.timingInfo,n=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=r),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;r.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(r=Tle(r),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=dwt(e.headersList);d!=="failure"&&(c.contentType=Iwt(d))}t.request.initiatorType!=null&&t6e(r,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?n():Cwt(i.body.stream,()=>{n()})}s(Ele,"fetchFinale");async function i6e(t){let e=t.request,r=null,n=null,i=t.timingInfo;if(e.serviceWorkers,r===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),n=r=await o6e(t),e.responseTainting==="cors"&&JTt(e,r)==="failure")return Lo("cors failure");jTt(e,r)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||r.type==="opaque")&&XTt(e.origin,e.client,e.destination,n)==="blocked"?Lo("blocked"):(X9e.has(n.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?r=Lo("unexpected redirect"):e.redirect==="manual"?r=n:e.redirect==="follow"?r=await Pwt(t,r):Q2(!1)),r.timingInfo=i,r)}s(i6e,"httpFetch");function Pwt(t,e){let r=t.request,n=e.internalResponse?e.internalResponse:e,i;try{if(i=$Tt(n,Vg(r).hash),i==null)return e}catch(a){return Promise.resolve(Lo(a))}if(!wle(i))return Promise.resolve(Lo("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(Lo("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(i.username||i.password)&&!Ile(r,i))return Promise.resolve(Lo('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Lo('URL cannot contain credentials for request mode "cors"'));if(n.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(Lo());if([301,302].includes(n.status)&&r.method==="POST"||n.status===303&&!Swt.includes(r.method)){r.method="GET",r.body=null;for(let a of mwt)r.headersList.delete(a)}Ile(Vg(r),i)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Q2(r.body.source!=null),r.body=_le(r.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=hP(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),r.urlList.push(i),zTt(r,n),n6e(t,!0)}s(Pwt,"httpRedirectFetch");async function o6e(t,e=!1,r=!1){let n=t.request,i=null,o=null,a=null,l=null,c=!1;n.window==="no-window"&&n.redirect==="error"?(i=t,o=n):(o=UTt(n),i={...t},i.request=o);let u=n.credentials==="include"||n.credentials==="same-origin"&&n.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=nG(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",nG(o.referrer.href),!0),VTt(o),KTt(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",Rwt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(swt(Vg(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Lo("only if cached");let m=await Nwt(i,u,r);!pwt.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return n.window==="no-window"?Lo():M2(t)?tG(t):Lo("proxy authentication required");if(a.status===421&&!r&&(n.body==null||n.body.source!=null)){if(M2(t))return tG(t);t.controller.connection.destroy(),a=await o6e(t,e,!0)}return a}s(o6e,"httpNetworkOrCacheFetch");async function Nwt(t,e=!1,r=!1){Q2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let n=t.request,i=null,o=t.timingInfo;null==null&&(n.cache="no-store");let l=r?"yes":"no";n.mode;let c=null;if(n.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(n.body!=null){let g=s(async function*(b){M2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{M2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{M2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of n.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=rG({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=rG({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),tG(t,g)):Lo(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{M2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if($9e(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){iwt(t.controller.controller),Dwt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),vwt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){$9e(t)?(i.aborted=!0,iG(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):iG(p)&&t.controller.controller.error(new TypeError("terminated",{cause:rwt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=Vg(n),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:n.method,body:v.isMockActive?n.body&&(n.body.source||n.body.stream):g,headers:n.headersList.entries,maxRedirections:0,upgrade:n.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=awt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=hP(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=hP(t.crossOriginIsolatedCapability)},onHeaders(_,k,B,N){if(_<200)return;let q=[],te="",me=new V9e;for(let ie=0;ie<k.length;ie+=2)me.append(Y9e(k[ie]),k[ie+1].toString("latin1"),!0);let oe=me.get("content-encoding",!0);oe&&(q=oe.toLowerCase().split(",").map(ie=>ie.trim())),te=me.get("location",!0),this.body=new Awt({read:B});let H=[],O=te&&n.redirect==="follow"&&X9e.has(_);if(q.length!==0&&n.method!=="HEAD"&&n.method!=="CONNECT"&&!Z9e.includes(_)&&!O)for(let ie=q.length-1;ie>=0;--ie){let j=q[ie];if(j==="x-gzip"||j==="gzip")H.push(Uv.createGunzip({flush:Uv.constants.Z_SYNC_FLUSH,finishFlush:Uv.constants.Z_SYNC_FLUSH}));else if(j==="deflate")H.push(uwt({flush:Uv.constants.Z_SYNC_FLUSH,finishFlush:Uv.constants.Z_SYNC_FLUSH}));else if(j==="br")H.push(Uv.createBrotliDecompress({flush:Uv.constants.BROTLI_OPERATION_FLUSH,finishFlush:Uv.constants.BROTLI_OPERATION_FLUSH}));else{H.length=0;break}}let le=this.onError.bind(this);return b({status:_,statusText:N,headersList:me,body:H.length?ywt(this.body,...H,ie=>{ie&&this.onError(ie)}).on("error",le):this.body.on("error",le)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,B){if(_!==101)return;let N=new V9e;for(let q=0;q<k.length;q+=2)N.append(Y9e(k[q]),k[q+1].toString("latin1"),!0);return b({status:_,statusText:_wt[_],headersList:N,socket:B}),!0}}))}s(h,"dispatch")}s(Nwt,"httpNetworkFetch");s6e.exports={fetch:Bwt,Fetch:oG,fetching:r6e,finalizeAndReportTiming:e6e}});var Sle=G((UXr,a6e)=>{"use strict";f();a6e.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var c6e=G((WXr,l6e)=>{"use strict";f();var{webidl:M0}=Ac(),sG=Symbol("ProgressEvent state"),Rle=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,r={}){e=M0.converters.DOMString(e,"ProgressEvent constructor","type"),r=M0.converters.ProgressEventInit(r??{}),super(e,r),this[sG]={lengthComputable:r.lengthComputable,loaded:r.loaded,total:r.total}}get lengthComputable(){return M0.brandCheck(this,t),this[sG].lengthComputable}get loaded(){return M0.brandCheck(this,t),this[sG].loaded}get total(){return M0.brandCheck(this,t),this[sG].total}};M0.converters.ProgressEventInit=M0.dictionaryConverter([{key:"lengthComputable",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:M0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:M0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:M0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);l6e.exports={ProgressEvent:Rle}});var d6e=G((jXr,u6e)=>{"use strict";f();function Lwt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(Lwt,"getEncoding");u6e.exports={getEncoding:Lwt}});var C6e=G((zXr,y6e)=>{"use strict";f();var{kState:I4,kError:kle,kResult:f6e,kAborted:AP,kLastProgressEventFired:Ble}=Sle(),{ProgressEvent:Fwt}=c6e(),{getEncoding:p6e}=d6e(),{serializeAMimeType:Mwt,parseMIMEType:m6e}=Sd(),{types:Qwt}=require("node:util"),{StringDecoder:h6e}=require("string_decoder"),{btoa:g6e}=require("node:buffer"),Owt={enumerable:!0,writable:!1,configurable:!1};function Uwt(t,e,r,n){if(t[I4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[I4]="loading",t[f6e]=null,t[kle]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[AP];)try{let{done:u,value:d}=await l;if(c&&!t[AP]&&queueMicrotask(()=>{qv("loadstart",t)}),c=!1,!u&&Qwt.isUint8Array(d))a.push(d),(t[Ble]===void 0||Date.now()-t[Ble]>=50)&&!t[AP]&&(t[Ble]=Date.now(),queueMicrotask(()=>{qv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[I4]="done";try{let p=qwt(a,r,e.type,n);if(t[AP])return;t[f6e]=p,qv("load",t)}catch(p){t[kle]=p,qv("error",t)}t[I4]!=="loading"&&qv("loadend",t)});break}}catch(u){if(t[AP])return;queueMicrotask(()=>{t[I4]="done",t[kle]=u,qv("error",t),t[I4]!=="loading"&&qv("loadend",t)});break}})()}s(Uwt,"readOperation");function qv(t,e){let r=new Fwt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(r)}s(qv,"fireAProgressEvent");function qwt(t,e,r,n){switch(e){case"DataURL":{let i="data:",o=m6e(r||"application/octet-stream");o!=="failure"&&(i+=Mwt(o)),i+=";base64,";let a=new h6e("latin1");for(let l of t)i+=g6e(a.write(l));return i+=g6e(a.end()),i}case"Text":{let i="failure";if(n&&(i=p6e(n)),i==="failure"&&r){let o=m6e(r);o!=="failure"&&(i=p6e(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),Wwt(t,i)}case"ArrayBuffer":return A6e(t).buffer;case"BinaryString":{let i="",o=new h6e("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(qwt,"packageData");function Wwt(t,e){let r=A6e(t),n=Gwt(r),i=0;n!==null&&(e=n,i=n==="UTF-8"?3:2);let o=r.slice(i);return new TextDecoder(e).decode(o)}s(Wwt,"decode");function Gwt(t){let[e,r,n]=t;return e===239&&r===187&&n===191?"UTF-8":e===254&&r===255?"UTF-16BE":e===255&&r===254?"UTF-16LE":null}s(Gwt,"BOMSniffing");function A6e(t){let e=t.reduce((n,i)=>n+i.byteLength,0),r=0;return t.reduce((n,i)=>(n.set(i,r),r+=i.byteLength,n),new Uint8Array(e))}s(A6e,"combineByteSequences");y6e.exports={staticPropertyDescriptors:Owt,readOperation:Uwt,fireAProgressEvent:qv}});var E6e=G((JXr,b6e)=>{"use strict";f();var{staticPropertyDescriptors:T4,readOperation:aG,fireAProgressEvent:x6e}=C6e(),{kState:O2,kError:v6e,kResult:lG,kEvents:Co,kAborted:Hwt}=Sle(),{webidl:Mo}=Ac(),{kEnumerableProperty:Bd}=yi(),Vm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[O2]="empty",this[lG]=null,this[v6e]=null,this[Co]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Mo.converters.Blob(e,{strict:!1}),aG(this,e,"ArrayBuffer")}readAsBinaryString(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Mo.converters.Blob(e,{strict:!1}),aG(this,e,"BinaryString")}readAsText(e,r=void 0){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Mo.converters.Blob(e,{strict:!1}),r!==void 0&&(r=Mo.converters.DOMString(r,"FileReader.readAsText","encoding")),aG(this,e,"Text",r)}readAsDataURL(e){Mo.brandCheck(this,t),Mo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Mo.converters.Blob(e,{strict:!1}),aG(this,e,"DataURL")}abort(){if(this[O2]==="empty"||this[O2]==="done"){this[lG]=null;return}this[O2]==="loading"&&(this[O2]="done",this[lG]=null),this[Hwt]=!0,x6e("abort",this),this[O2]!=="loading"&&x6e("loadend",this)}get readyState(){switch(Mo.brandCheck(this,t),this[O2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Mo.brandCheck(this,t),this[lG]}get error(){return Mo.brandCheck(this,t),this[v6e]}get onloadend(){return Mo.brandCheck(this,t),this[Co].loadend}set onloadend(e){Mo.brandCheck(this,t),this[Co].loadend&&this.removeEventListener("loadend",this[Co].loadend),typeof e=="function"?(this[Co].loadend=e,this.addEventListener("loadend",e)):this[Co].loadend=null}get onerror(){return Mo.brandCheck(this,t),this[Co].error}set onerror(e){Mo.brandCheck(this,t),this[Co].error&&this.removeEventListener("error",this[Co].error),typeof e=="function"?(this[Co].error=e,this.addEventListener("error",e)):this[Co].error=null}get onloadstart(){return Mo.brandCheck(this,t),this[Co].loadstart}set onloadstart(e){Mo.brandCheck(this,t),this[Co].loadstart&&this.removeEventListener("loadstart",this[Co].loadstart),typeof e=="function"?(this[Co].loadstart=e,this.addEventListener("loadstart",e)):this[Co].loadstart=null}get onprogress(){return Mo.brandCheck(this,t),this[Co].progress}set onprogress(e){Mo.brandCheck(this,t),this[Co].progress&&this.removeEventListener("progress",this[Co].progress),typeof e=="function"?(this[Co].progress=e,this.addEventListener("progress",e)):this[Co].progress=null}get onload(){return Mo.brandCheck(this,t),this[Co].load}set onload(e){Mo.brandCheck(this,t),this[Co].load&&this.removeEventListener("load",this[Co].load),typeof e=="function"?(this[Co].load=e,this.addEventListener("load",e)):this[Co].load=null}get onabort(){return Mo.brandCheck(this,t),this[Co].abort}set onabort(e){Mo.brandCheck(this,t),this[Co].abort&&this.removeEventListener("abort",this[Co].abort),typeof e=="function"?(this[Co].abort=e,this.addEventListener("abort",e)):this[Co].abort=null}};Vm.EMPTY=Vm.prototype.EMPTY=0;Vm.LOADING=Vm.prototype.LOADING=1;Vm.DONE=Vm.prototype.DONE=2;Object.defineProperties(Vm.prototype,{EMPTY:T4,LOADING:T4,DONE:T4,readAsArrayBuffer:Bd,readAsBinaryString:Bd,readAsText:Bd,readAsDataURL:Bd,abort:Bd,readyState:Bd,result:Bd,error:Bd,onloadstart:Bd,onprogress:Bd,onload:Bd,onabort:Bd,onerror:Bd,onloadend:Bd,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Vm,{EMPTY:T4,LOADING:T4,DONE:T4});b6e.exports={FileReader:Vm}});var cG=G((eZr,I6e)=>{"use strict";f();I6e.exports={kConstruct:Qs().kConstruct}});var _6e=G((rZr,w6e)=>{"use strict";f();var jwt=require("node:assert"),{URLSerializer:T6e}=Sd(),{isValidHeaderName:Vwt}=B0();function $wt(t,e,r=!1){let n=T6e(t,r),i=T6e(e,r);return n===i}s($wt,"urlEquals");function zwt(t){jwt(t!==null);let e=[];for(let r of t.split(","))r=r.trim(),Vwt(r)&&e.push(r);return e}s(zwt,"getFieldValues");w6e.exports={urlEquals:$wt,getFieldValues:zwt}});var k6e=G((oZr,R6e)=>{"use strict";f();var{kConstruct:Ywt}=cG(),{urlEquals:Kwt,getFieldValues:Dle}=_6e(),{kEnumerableProperty:U2,isDisturbed:Jwt}=yi(),{webidl:Zr}=Ac(),{Response:Xwt,cloneResponse:Zwt,fromInnerResponse:e_t}=mP(),{Request:cy,fromInnerRequest:t_t}=E4(),{kState:$m}=Sv(),{fetching:r_t}=gP(),{urlIsHttpHttpsScheme:uG,createDeferredPromise:w4,readAllBytes:n_t}=B0(),Ple=require("node:assert"),dG=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==Ywt&&Zr.illegalConstructor(),Zr.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,r={}){Zr.brandCheck(this,t);let n="Cache.match";Zr.argumentLengthCheck(arguments,1,n),e=Zr.converters.RequestInfo(e,n,"request"),r=Zr.converters.CacheQueryOptions(r,n,"options");let i=this.#r(e,r,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,r={}){Zr.brandCheck(this,t);let n="Cache.matchAll";return e!==void 0&&(e=Zr.converters.RequestInfo(e,n,"request")),r=Zr.converters.CacheQueryOptions(r,n,"options"),this.#r(e,r)}async add(e){Zr.brandCheck(this,t);let r="Cache.add";Zr.argumentLengthCheck(arguments,1,r),e=Zr.converters.RequestInfo(e,r,"request");let n=[e];return await this.addAll(n)}async addAll(e){Zr.brandCheck(this,t);let r="Cache.addAll";Zr.argumentLengthCheck(arguments,1,r);let n=[],i=[];for(let m of e){if(m===void 0)throw Zr.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(m=Zr.converters.RequestInfo(m),typeof m=="string")continue;let h=m[$m];if(!uG(h.url)||h.method!=="GET")throw Zr.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new cy(m)[$m];if(!uG(h.url))throw Zr.errors.exception({header:r,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=w4();o.push(r_t({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(Zr.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=Dle(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(Zr.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),n.push(g.promise)}let l=await Promise.all(n),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=w4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,r){Zr.brandCheck(this,t);let n="Cache.put";Zr.argumentLengthCheck(arguments,2,n),e=Zr.converters.RequestInfo(e,n,"request"),r=Zr.converters.Response(r,n,"response");let i=null;if(e instanceof cy?i=e[$m]:i=new cy(e)[$m],!uG(i.url)||i.method!=="GET")throw Zr.errors.exception({header:n,message:"Expected an http/s scheme when method is not GET"});let o=r[$m];if(o.status===206)throw Zr.errors.exception({header:n,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=Dle(o.headersList.get("vary"));for(let g of h)if(g==="*")throw Zr.errors.exception({header:n,message:"Got * vary field value"})}if(o.body&&(Jwt(o.body.stream)||o.body.stream.locked))throw Zr.errors.exception({header:n,message:"Response body is locked or disturbed"});let a=Zwt(o),l=w4();if(o.body!=null){let g=o.body.stream.getReader();n_t(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=w4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,r={}){Zr.brandCheck(this,t);let n="Cache.delete";Zr.argumentLengthCheck(arguments,1,n),e=Zr.converters.RequestInfo(e,n,"request"),r=Zr.converters.CacheQueryOptions(r,n,"options");let i=null;if(e instanceof cy){if(i=e[$m],i.method!=="GET"&&!r.ignoreMethod)return!1}else Ple(typeof e=="string"),i=new cy(e)[$m];let o=[],a={type:"delete",request:i,options:r};o.push(a);let l=w4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,r={}){Zr.brandCheck(this,t);let n="Cache.keys";e!==void 0&&(e=Zr.converters.RequestInfo(e,n,"request")),r=Zr.converters.CacheQueryOptions(r,n,"options");let i=null;if(e!==void 0)if(e instanceof cy){if(i=e[$m],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new cy(e)[$m]);let o=w4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,r);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=t_t(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let r=this.#e,n=[...r],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw Zr.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw Zr.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=r.indexOf(c);Ple(u!==-1),r.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw Zr.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!uG(c.url))throw Zr.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw Zr.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw Zr.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=r.indexOf(u);Ple(d!==-1),r.splice(d,1)}r.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=n,a}}#i(e,r,n){let i=[],o=n??this.#e;for(let a of o){let[l,c]=a;this.#n(e,l,c,r)&&i.push(a)}return i}#n(e,r,n=null,i){let o=new URL(e.url),a=new URL(r.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!Kwt(o,a,!0))return!1;if(n==null||i?.ignoreVary||!n.headersList.contains("vary"))return!0;let l=Dle(n.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=r.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#r(e,r,n=1/0){let i=null;if(e!==void 0)if(e instanceof cy){if(i=e[$m],i.method!=="GET"&&!r.ignoreMethod)return[]}else typeof e=="string"&&(i=new cy(e)[$m]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,r);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=e_t(l,"immutable");if(a.push(c.clone()),a.length>=n)break}return Object.freeze(a)}};Object.defineProperties(dG.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:U2,matchAll:U2,add:U2,addAll:U2,put:U2,delete:U2,keys:U2});var S6e=[{key:"ignoreSearch",converter:Zr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:Zr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:Zr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Zr.converters.CacheQueryOptions=Zr.dictionaryConverter(S6e);Zr.converters.MultiCacheQueryOptions=Zr.dictionaryConverter([...S6e,{key:"cacheName",converter:Zr.converters.DOMString}]);Zr.converters.Response=Zr.interfaceConverter(Xwt);Zr.converters["sequence<RequestInfo>"]=Zr.sequenceConverter(Zr.converters.RequestInfo);R6e.exports={Cache:dG}});var D6e=G((lZr,B6e)=>{"use strict";f();var{kConstruct:yP}=cG(),{Cache:fG}=k6e(),{webidl:tu}=Ac(),{kEnumerableProperty:CP}=yi(),pG=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==yP&&tu.illegalConstructor(),tu.util.markAsUncloneable(this)}async match(e,r={}){if(tu.brandCheck(this,t),tu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=tu.converters.RequestInfo(e),r=tu.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let n=this.#e.get(r.cacheName);return await new fG(yP,n).match(e,r)}}else for(let n of this.#e.values()){let o=await new fG(yP,n).match(e,r);if(o!==void 0)return o}}async has(e){tu.brandCheck(this,t);let r="CacheStorage.has";return tu.argumentLengthCheck(arguments,1,r),e=tu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)}async open(e){tu.brandCheck(this,t);let r="CacheStorage.open";if(tu.argumentLengthCheck(arguments,1,r),e=tu.converters.DOMString(e,r,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new fG(yP,i)}let n=[];return this.#e.set(e,n),new fG(yP,n)}async delete(e){tu.brandCheck(this,t);let r="CacheStorage.delete";return tu.argumentLengthCheck(arguments,1,r),e=tu.converters.DOMString(e,r,"cacheName"),this.#e.delete(e)}async keys(){return tu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(pG.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:CP,has:CP,open:CP,delete:CP,keys:CP});B6e.exports={CacheStorage:pG}});var N6e=G((dZr,P6e)=>{"use strict";f();P6e.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var Nle=G((pZr,O6e)=>{"use strict";f();function i_t(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}s(i_t,"isCTLExcludingHtab");function L6e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}s(L6e,"validateCookieName");function F6e(t){let e=t.length,r=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++r}for(;r<e;){let n=t.charCodeAt(r++);if(n<33||n>126||n===34||n===44||n===59||n===92)throw new Error("Invalid cookie value")}}s(F6e,"validateCookieValue");function M6e(t){for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}s(M6e,"validateCookiePath");function o_t(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(o_t,"validateCookieDomain");var s_t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],a_t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mG=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function Q6e(t){return typeof t=="number"&&(t=new Date(t)),`${s_t[t.getUTCDay()]}, ${mG[t.getUTCDate()]} ${a_t[t.getUTCMonth()]} ${t.getUTCFullYear()} ${mG[t.getUTCHours()]}:${mG[t.getUTCMinutes()]}:${mG[t.getUTCSeconds()]} GMT`}s(Q6e,"toIMFDate");function l_t(t){if(t<0)throw new Error("Invalid cookie max-age")}s(l_t,"validateCookieMaxAge");function c_t(t){if(t.name.length===0)return null;L6e(t.name),F6e(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(l_t(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(o_t(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(M6e(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${Q6e(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let r of t.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[n,...i]=r.split("=");e.push(`${n.trim()}=${i.join("=")}`)}return e.join("; ")}s(c_t,"stringify");O6e.exports={isCTLExcludingHtab:i_t,validateCookieName:L6e,validateCookiePath:M6e,validateCookieValue:F6e,toIMFDate:Q6e,stringify:c_t}});var q6e=G((gZr,U6e)=>{"use strict";f();var{maxNameValuePairSize:u_t,maxAttributeValueSize:d_t}=N6e(),{isCTLExcludingHtab:f_t}=Nle(),{collectASequenceOfCodePointsFast:hG}=Sd(),p_t=require("node:assert");function m_t(t){if(f_t(t))return null;let e="",r="",n="",i="";if(t.includes(";")){let o={position:0};e=hG(";",t,o),r=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};n=hG("=",e,o),i=e.slice(o.position+1)}return n=n.trim(),i=i.trim(),n.length+i.length>u_t?null:{name:n,value:i,..._4(r)}}s(m_t,"parseSetCookie");function _4(t,e={}){if(t.length===0)return e;p_t(t[0]===";"),t=t.slice(1);let r="";t.includes(";")?(r=hG(";",t,{position:0}),t=t.slice(r.length)):(r=t,t="");let n="",i="";if(r.includes("=")){let a={position:0};n=hG("=",r,a),i=r.slice(a.position+1)}else n=r;if(n=n.trim(),i=i.trim(),i.length>d_t)return _4(t,e);let o=n.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return _4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${n}=${i}`);return _4(t,e)}s(_4,"parseUnparsedAttributes");U6e.exports={parseSetCookie:m_t,parseUnparsedAttributes:_4}});var H6e=G((CZr,G6e)=>{"use strict";f();var{parseSetCookie:h_t}=q6e(),{stringify:g_t}=Nle(),{webidl:Mi}=Ac(),{Headers:gG}=L2();function A_t(t){Mi.argumentLengthCheck(arguments,1,"getCookies"),Mi.brandCheck(t,gG,{strict:!1});let e=t.get("cookie"),r={};if(!e)return r;for(let n of e.split(";")){let[i,...o]=n.split("=");r[i.trim()]=o.join("=")}return r}s(A_t,"getCookies");function y_t(t,e,r){Mi.brandCheck(t,gG,{strict:!1});let n="deleteCookie";Mi.argumentLengthCheck(arguments,2,n),e=Mi.converters.DOMString(e,n,"name"),r=Mi.converters.DeleteCookieAttributes(r),W6e(t,{name:e,value:"",expires:new Date(0),...r})}s(y_t,"deleteCookie");function C_t(t){Mi.argumentLengthCheck(arguments,1,"getSetCookies"),Mi.brandCheck(t,gG,{strict:!1});let e=t.getSetCookie();return e?e.map(r=>h_t(r)):[]}s(C_t,"getSetCookies");function W6e(t,e){Mi.argumentLengthCheck(arguments,2,"setCookie"),Mi.brandCheck(t,gG,{strict:!1}),e=Mi.converters.Cookie(e);let r=g_t(e);r&&t.append("Set-Cookie",r)}s(W6e,"setCookie");Mi.converters.DeleteCookieAttributes=Mi.dictionaryConverter([{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Mi.converters.Cookie=Mi.dictionaryConverter([{converter:Mi.converters.DOMString,key:"name"},{converter:Mi.converters.DOMString,key:"value"},{converter:Mi.nullableConverter(t=>typeof t=="number"?Mi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.nullableConverter(Mi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Mi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Mi.sequenceConverter(Mi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);G6e.exports={getCookies:A_t,deleteCookie:y_t,getSetCookies:C_t,setCookie:W6e}});var R4=G((bZr,V6e)=>{"use strict";f();var{webidl:jr}=Ac(),{kEnumerableProperty:Dd}=yi(),{kConstruct:j6e}=Qs(),{MessagePort:x_t}=require("node:worker_threads"),S4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,r={}){if(e===j6e){super(arguments[1],arguments[2]),jr.util.markAsUncloneable(this);return}let n="MessageEvent constructor";jr.argumentLengthCheck(arguments,1,n),e=jr.converters.DOMString(e,n,"type"),r=jr.converters.MessageEventInit(r,n,"eventInitDict"),super(e,r),this.#e=r,jr.util.markAsUncloneable(this)}get data(){return jr.brandCheck(this,t),this.#e.data}get origin(){return jr.brandCheck(this,t),this.#e.origin}get lastEventId(){return jr.brandCheck(this,t),this.#e.lastEventId}get source(){return jr.brandCheck(this,t),this.#e.source}get ports(){return jr.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,r=!1,n=!1,i=null,o="",a="",l=null,c=[]){return jr.brandCheck(this,t),jr.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:r,cancelable:n,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,r){let n=new t(j6e,e,r);return n.#e=r,n.#e.data??=null,n.#e.origin??="",n.#e.lastEventId??="",n.#e.source??=null,n.#e.ports??=[],n}},{createFastMessageEvent:v_t}=S4;delete S4.createFastMessageEvent;var AG=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,r={}){let n="CloseEvent constructor";jr.argumentLengthCheck(arguments,1,n),e=jr.converters.DOMString(e,n,"type"),r=jr.converters.CloseEventInit(r),super(e,r),this.#e=r,jr.util.markAsUncloneable(this)}get wasClean(){return jr.brandCheck(this,t),this.#e.wasClean}get code(){return jr.brandCheck(this,t),this.#e.code}get reason(){return jr.brandCheck(this,t),this.#e.reason}},yG=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,r){let n="ErrorEvent constructor";jr.argumentLengthCheck(arguments,1,n),super(e,r),jr.util.markAsUncloneable(this),e=jr.converters.DOMString(e,n,"type"),r=jr.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return jr.brandCheck(this,t),this.#e.message}get filename(){return jr.brandCheck(this,t),this.#e.filename}get lineno(){return jr.brandCheck(this,t),this.#e.lineno}get colno(){return jr.brandCheck(this,t),this.#e.colno}get error(){return jr.brandCheck(this,t),this.#e.error}};Object.defineProperties(S4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Dd,origin:Dd,lastEventId:Dd,source:Dd,ports:Dd,initMessageEvent:Dd});Object.defineProperties(AG.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Dd,code:Dd,wasClean:Dd});Object.defineProperties(yG.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Dd,filename:Dd,lineno:Dd,colno:Dd,error:Dd});jr.converters.MessagePort=jr.interfaceConverter(x_t);jr.converters["sequence<MessagePort>"]=jr.sequenceConverter(jr.converters.MessagePort);var Lle=[{key:"bubbles",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];jr.converters.MessageEventInit=jr.dictionaryConverter([...Lle,{key:"data",converter:jr.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:jr.nullableConverter(jr.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:jr.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);jr.converters.CloseEventInit=jr.dictionaryConverter([...Lle,{key:"wasClean",converter:jr.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:jr.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:jr.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);jr.converters.ErrorEventInit=jr.dictionaryConverter([...Lle,{key:"message",converter:jr.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:jr.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:jr.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:jr.converters.any}]);V6e.exports={MessageEvent:S4,CloseEvent:AG,ErrorEvent:yG,createFastMessageEvent:v_t}});var q2=G((TZr,$6e)=>{"use strict";f();var b_t="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",E_t={enumerable:!0,writable:!1,configurable:!1},I_t={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},T_t={NOT_SENT:0,PROCESSING:1,SENT:2},w_t={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},__t=2**16-1,S_t={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},R_t=Buffer.allocUnsafe(0),k_t={string:1,typedArray:2,arrayBuffer:3,blob:4};$6e.exports={uid:b_t,sentCloseFrameState:T_t,staticPropertyDescriptors:E_t,states:I_t,opcodes:w_t,maxUnsigned16Bit:__t,parserStates:S_t,emptyBuffer:R_t,sendHints:k_t}});var xP=G((_Zr,z6e)=>{"use strict";f();z6e.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var EP=G((RZr,nNe)=>{"use strict";f();var{kReadyState:vP,kController:B_t,kResponse:D_t,kBinaryType:P_t,kWebSocketURL:N_t}=xP(),{states:bP,opcodes:Wv}=q2(),{ErrorEvent:L_t,createFastMessageEvent:F_t}=R4(),{isUtf8:M_t}=require("node:buffer"),{collectASequenceOfCodePointsFast:Q_t,removeHTTPWhitespace:Y6e}=Sd();function O_t(t){return t[vP]===bP.CONNECTING}s(O_t,"isConnecting");function U_t(t){return t[vP]===bP.OPEN}s(U_t,"isEstablished");function q_t(t){return t[vP]===bP.CLOSING}s(q_t,"isClosing");function W_t(t){return t[vP]===bP.CLOSED}s(W_t,"isClosed");function Fle(t,e,r=(i,o)=>new Event(i,o),n={}){let i=r(t,n);e.dispatchEvent(i)}s(Fle,"fireEvent");function G_t(t,e,r){if(t[vP]!==bP.OPEN)return;let n;if(e===Wv.TEXT)try{n=rNe(r)}catch{J6e(t,"Received invalid UTF-8 in text frame.");return}else e===Wv.BINARY&&(t[P_t]==="blob"?n=new Blob([r]):n=H_t(r));Fle("message",t,F_t,{origin:t[N_t].origin,data:n})}s(G_t,"websocketMessageReceived");function H_t(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(H_t,"toArrayBuffer");function j_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let r=t.charCodeAt(e);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}s(j_t,"isValidSubprotocol");function V_t(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(V_t,"isValidStatusCode");function J6e(t,e){let{[B_t]:r,[D_t]:n}=t;r.abort(),n?.socket&&!n.socket.destroyed&&n.socket.destroy(),e&&Fle("error",t,(i,o)=>new L_t(i,o),{error:new Error(e),message:e})}s(J6e,"failWebsocketConnection");function X6e(t){return t===Wv.CLOSE||t===Wv.PING||t===Wv.PONG}s(X6e,"isControlFrame");function Z6e(t){return t===Wv.CONTINUATION}s(Z6e,"isContinuationFrame");function eNe(t){return t===Wv.TEXT||t===Wv.BINARY}s(eNe,"isTextBinaryFrame");function $_t(t){return eNe(t)||Z6e(t)||X6e(t)}s($_t,"isValidOpcode");function z_t(t){let e={position:0},r=new Map;for(;e.position<t.length;){let n=Q_t(";",t,e),[i,o=""]=n.split("=");r.set(Y6e(i,!0,!1),Y6e(o,!1,!0)),e.position++}return r}s(z_t,"parseExtensions");function Y_t(t){for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r<48||r>57)return!1}return!0}s(Y_t,"isValidClientWindowBits");var tNe=typeof process.versions.icu=="string",K6e=tNe?new TextDecoder("utf-8",{fatal:!0}):void 0,rNe=tNe?K6e.decode.bind(K6e):function(t){if(M_t(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};nNe.exports={isConnecting:O_t,isEstablished:U_t,isClosing:q_t,isClosed:W_t,fireEvent:Fle,isValidSubprotocol:j_t,isValidStatusCode:V_t,failWebsocketConnection:J6e,websocketMessageReceived:G_t,utf8Decode:rNe,isControlFrame:X6e,isContinuationFrame:Z6e,isTextBinaryFrame:eNe,isValidOpcode:$_t,parseExtensions:z_t,isValidClientWindowBits:Y_t}});var xG=G((DZr,iNe)=>{"use strict";f();var{maxUnsigned16Bit:K_t}=q2(),CG=16386,Mle,IP=null,k4=CG;try{Mle=require("node:crypto")}catch{Mle={randomFillSync:s(function(e,r,n){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function J_t(){return k4===CG&&(k4=0,Mle.randomFillSync(IP??=Buffer.allocUnsafe(CG),0,CG)),[IP[k4++],IP[k4++],IP[k4++],IP[k4++]]}s(J_t,"generateMask");var Qle=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let r=this.frameData,n=J_t(),i=r?.byteLength??0,o=i,a=6;i>K_t?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=n[0],l[a-3]=n[1],l[a-2]=n[2],l[a-1]=n[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=r[c]^n[c&3];return l}};iNe.exports={WebsocketFrameSend:Qle}});var Ule=G((LZr,dNe)=>{"use strict";f();var{uid:X_t,states:TP,sentCloseFrameState:vG,emptyBuffer:Z_t,opcodes:eSt}=q2(),{kReadyState:wP,kSentClose:bG,kByteParser:sNe,kReceivedClose:oNe,kResponse:aNe}=xP(),{fireEvent:tSt,failWebsocketConnection:Gv,isClosing:rSt,isClosed:nSt,isEstablished:iSt,parseExtensions:oSt}=EP(),{channels:B4}=H5(),{CloseEvent:sSt}=R4(),{makeRequest:aSt}=E4(),{fetching:lSt}=gP(),{Headers:cSt,getHeadersList:uSt}=L2(),{getDecodeSplit:dSt}=B0(),{WebsocketFrameSend:fSt}=xG(),Ole;try{Ole=require("node:crypto")}catch{}function pSt(t,e,r,n,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=aSt({urlList:[a],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=uSt(new cSt(o.headers));l.headersList=p}let c=Ole.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),lSt({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Gv(n,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Gv(n,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Gv(n,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Gv(n,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=Ole.createHash("sha1").update(c+X_t).digest("base64");if(m!==h){Gv(n,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=oSt(g),!y.has("permessage-deflate"))){Gv(n,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!dSt("sec-websocket-protocol",l.headersList).includes(v)){Gv(n,"Protocol was not set in the opening handshake.");return}p.socket.on("data",lNe),p.socket.on("close",cNe),p.socket.on("error",uNe),B4.open.hasSubscribers&&B4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(pSt,"establishWebSocketConnection");function mSt(t,e,r,n){if(!(rSt(t)||nSt(t)))if(!iSt(t))Gv(t,"Connection was closed before it was established."),t[wP]=TP.CLOSING;else if(t[bG]===vG.NOT_SENT){t[bG]=vG.PROCESSING;let i=new fSt;e!==void 0&&r===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&r!==void 0?(i.frameData=Buffer.allocUnsafe(2+n),i.frameData.writeUInt16BE(e,0),i.frameData.write(r,2,"utf-8")):i.frameData=Z_t,t[aNe].socket.write(i.createFrame(eSt.CLOSE)),t[bG]=vG.SENT,t[wP]=TP.CLOSING}else t[wP]=TP.CLOSING}s(mSt,"closeWebSocketConnection");function lNe(t){this.ws[sNe].write(t)||this.pause()}s(lNe,"onSocketData");function cNe(){let{ws:t}=this,{[aNe]:e}=t;e.socket.off("data",lNe),e.socket.off("close",cNe),e.socket.off("error",uNe);let r=t[bG]===vG.SENT&&t[oNe],n=1005,i="",o=t[sNe].closingInfo;o&&!o.error?(n=o.code??1005,i=o.reason):t[oNe]||(n=1006),t[wP]=TP.CLOSED,tSt("close",t,(a,l)=>new sSt(a,l),{wasClean:r,code:n,reason:i}),B4.close.hasSubscribers&&B4.close.publish({websocket:t,code:n,reason:i})}s(cNe,"onSocketClose");function uNe(t){let{ws:e}=this;e[wP]=TP.CLOSING,B4.socketError.hasSubscribers&&B4.socketError.publish(t),this.destroy()}s(uNe,"onSocketError");dNe.exports={establishWebSocketConnection:pSt,closeWebSocketConnection:mSt}});var pNe=G((QZr,fNe)=>{"use strict";f();var{createInflateRaw:hSt,Z_DEFAULT_WINDOWBITS:gSt}=require("node:zlib"),{isValidClientWindowBits:ASt}=EP(),ySt=Buffer.from([0,0,255,255]),EG=Symbol("kBuffer"),IG=Symbol("kLength"),qle=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,r,n){if(!this.#e){let i=gSt;if(this.#t.serverMaxWindowBits){if(!ASt(this.#t.serverMaxWindowBits)){n(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=hSt({windowBits:i}),this.#e[EG]=[],this.#e[IG]=0,this.#e.on("data",o=>{this.#e[EG].push(o),this.#e[IG]+=o.length}),this.#e.on("error",o=>{this.#e=null,n(o)})}this.#e.write(e),r&&this.#e.write(ySt),this.#e.flush(()=>{let i=Buffer.concat(this.#e[EG],this.#e[IG]);this.#e[EG].length=0,this.#e[IG]=0,n(null,i)})}};fNe.exports={PerMessageDeflate:qle}});var INe=G((qZr,ENe)=>{"use strict";f();var{Writable:CSt}=require("node:stream"),xSt=require("node:assert"),{parserStates:Pd,opcodes:D4,states:vSt,emptyBuffer:mNe,sentCloseFrameState:hNe}=q2(),{kReadyState:bSt,kSentClose:gNe,kResponse:ANe,kReceivedClose:yNe}=xP(),{channels:TG}=H5(),{isValidStatusCode:ESt,isValidOpcode:ISt,failWebsocketConnection:fp,websocketMessageReceived:CNe,utf8Decode:TSt,isControlFrame:xNe,isTextBinaryFrame:Wle,isContinuationFrame:wSt}=EP(),{WebsocketFrameSend:vNe}=xG(),{closeWebSocketConnection:bNe}=Ule(),{PerMessageDeflate:_St}=pNe(),Gle=class extends CSt{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#n=Pd.INFO;#r={};#o=[];#s;constructor(e,r){super(),this.ws=e,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new _St(r))}_write(e,r,n){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(n)}run(e){for(;this.#i;)if(this.#n===Pd.INFO){if(this.#t<2)return e();let r=this.consume(2),n=(r[0]&128)!==0,i=r[0]&15,o=(r[1]&128)===128,a=!n&&i!==D4.CONTINUATION,l=r[1]&127,c=r[0]&64,u=r[0]&32,d=r[0]&16;if(!ISt(i))return fp(this.ws,"Invalid opcode received"),e();if(o)return fp(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){fp(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){fp(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!Wle(i)){fp(this.ws,"Invalid frame type was fragmented.");return}if(Wle(i)&&this.#o.length>0){fp(this.ws,"Expected continuation frame");return}if(this.#r.fragmented&&a){fp(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&xNe(i)){fp(this.ws,"Control frame either too large or fragmented");return}if(wSt(i)&&this.#o.length===0&&!this.#r.compressed){fp(this.ws,"Unexpected continuation frame");return}l<=125?(this.#r.payloadLength=l,this.#n=Pd.READ_DATA):l===126?this.#n=Pd.PAYLOADLENGTH_16:l===127&&(this.#n=Pd.PAYLOADLENGTH_64),Wle(i)&&(this.#r.binaryType=i,this.#r.compressed=c!==0),this.#r.opcode=i,this.#r.masked=o,this.#r.fin=n,this.#r.fragmented=a}else if(this.#n===Pd.PAYLOADLENGTH_16){if(this.#t<2)return e();let r=this.consume(2);this.#r.payloadLength=r.readUInt16BE(0),this.#n=Pd.READ_DATA}else if(this.#n===Pd.PAYLOADLENGTH_64){if(this.#t<8)return e();let r=this.consume(8),n=r.readUInt32BE(0);if(n>2**31-1){fp(this.ws,"Received payload length > 2^31 bytes.");return}let i=r.readUInt32BE(4);this.#r.payloadLength=(n<<8)+i,this.#n=Pd.READ_DATA}else if(this.#n===Pd.READ_DATA){if(this.#t<this.#r.payloadLength)return e();let r=this.consume(this.#r.payloadLength);if(xNe(this.#r.opcode))this.#i=this.parseControlFrame(r),this.#n=Pd.INFO;else if(this.#r.compressed){this.#s.get("permessage-deflate").decompress(r,this.#r.fin,(n,i)=>{if(n){bNe(this.ws,1007,n.message,n.message.length);return}if(this.#o.push(i),!this.#r.fin){this.#n=Pd.INFO,this.#i=!0,this.run(e);return}CNe(this.ws,this.#r.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#n=Pd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(r),!this.#r.fragmented&&this.#r.fin){let n=Buffer.concat(this.#o);CNe(this.ws,this.#r.binaryType,n),this.#o.length=0}this.#n=Pd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return mNe;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let r=Buffer.allocUnsafe(e),n=0;for(;n!==e;){let i=this.#e[0],{length:o}=i;if(o+n===e){r.set(this.#e.shift(),n);break}else if(o+n>e){r.set(i.subarray(0,e-n),n),this.#e[0]=i.subarray(e-n);break}else r.set(this.#e.shift(),n),n+=i.length}return this.#t-=e,r}parseCloseBody(e){xSt(e.length!==1);let r;if(e.length>=2&&(r=e.readUInt16BE(0)),r!==void 0&&!ESt(r))return{code:1002,reason:"Invalid status code",error:!0};let n=e.subarray(2);n[0]===239&&n[1]===187&&n[2]===191&&(n=n.subarray(3));try{n=TSt(n)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:n,error:!1}}parseControlFrame(e){let{opcode:r,payloadLength:n}=this.#r;if(r===D4.CLOSE){if(n===1)return fp(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#r.closeInfo=this.parseCloseBody(e),this.#r.closeInfo.error){let{code:i,reason:o}=this.#r.closeInfo;return bNe(this.ws,i,o,o.length),fp(this.ws,o),!1}if(this.ws[gNe]!==hNe.SENT){let i=mNe;this.#r.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#r.closeInfo.code,0));let o=new vNe(i);this.ws[ANe].socket.write(o.createFrame(D4.CLOSE),a=>{a||(this.ws[gNe]=hNe.SENT)})}return this.ws[bSt]=vSt.CLOSING,this.ws[yNe]=!0,!1}else if(r===D4.PING){if(!this.ws[yNe]){let i=new vNe(e);this.ws[ANe].socket.write(i.createFrame(D4.PONG)),TG.ping.hasSubscribers&&TG.ping.publish({payload:e})}}else r===D4.PONG&&TG.pong.hasSubscribers&&TG.pong.publish({payload:e});return!0}get closingInfo(){return this.#r.closeInfo}};ENe.exports={ByteParser:Gle}});var RNe=G((HZr,SNe)=>{"use strict";f();var{WebsocketFrameSend:SSt}=xG(),{opcodes:TNe,sendHints:P4}=q2(),RSt=tae(),wNe=Buffer[Symbol.species],Hle=class{static{s(this,"SendQueue")}#e=new RSt;#t=!1;#i;constructor(e){this.#i=e}add(e,r,n){if(n!==P4.blob){let o=_Ne(e,n);if(!this.#t)this.#i.write(o,r);else{let a={promise:null,callback:r,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=_Ne(o,n)}),callback:r,frame:null};this.#e.push(i),this.#t||this.#n()}async#n(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let r=e.shift();r.promise!==null&&await r.promise,this.#i.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function _Ne(t,e){return new SSt(kSt(t,e)).createFrame(e===P4.string?TNe.TEXT:TNe.BINARY)}s(_Ne,"createFrame");function kSt(t,e){switch(e){case P4.string:return Buffer.from(t);case P4.arrayBuffer:case P4.blob:return new wNe(t);case P4.typedArray:return new wNe(t.buffer,t.byteOffset,t.byteLength)}}s(kSt,"toBuffer");SNe.exports={SendQueue:Hle}});var QNe=G(($Zr,MNe)=>{"use strict";f();var{webidl:qn}=Ac(),{URLSerializer:BSt}=Sd(),{environmentSettingsObject:kNe}=B0(),{staticPropertyDescriptors:Hv,states:_P,sentCloseFrameState:DSt,sendHints:wG}=q2(),{kWebSocketURL:BNe,kReadyState:jle,kController:PSt,kBinaryType:_G,kResponse:DNe,kSentClose:NSt,kByteParser:LSt}=xP(),{isConnecting:FSt,isEstablished:MSt,isClosing:QSt,isValidSubprotocol:OSt,fireEvent:PNe}=EP(),{establishWebSocketConnection:USt,closeWebSocketConnection:NNe}=Ule(),{ByteParser:qSt}=INe(),{kEnumerableProperty:pp,isBlobLike:LNe}=yi(),{getGlobalDispatcher:WSt}=qW(),{types:FNe}=require("node:util"),{ErrorEvent:GSt,CloseEvent:HSt}=R4(),{SendQueue:jSt}=RNe(),Q0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#n="";#r;constructor(e,r=[]){super(),qn.util.markAsUncloneable(this);let n="WebSocket constructor";qn.argumentLengthCheck(arguments,1,n);let i=qn.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,n,"options");e=qn.converters.USVString(e,n,"url"),r=i.protocols;let o=kNe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(c=>OSt(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[BNe]=new URL(a.href);let l=kNe.settingsObject;this[PSt]=USt(a,r,l,this,(c,u)=>this.#o(c,u),i),this[jle]=t.CONNECTING,this[NSt]=DSt.NOT_SENT,this[_G]="blob"}close(e=void 0,r=void 0){qn.brandCheck(this,t);let n="WebSocket.close";if(e!==void 0&&(e=qn.converters["unsigned short"](e,n,"code",{clamp:!0})),r!==void 0&&(r=qn.converters.USVString(r,n,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(r!==void 0&&(i=Buffer.byteLength(r),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");NNe(this,e,r,i)}send(e){qn.brandCheck(this,t);let r="WebSocket.send";if(qn.argumentLengthCheck(arguments,1,r),e=qn.converters.WebSocketSendData(e,r,"data"),FSt(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!MSt(this)||QSt(this)))if(typeof e=="string"){let n=Buffer.byteLength(e);this.#t+=n,this.#r.add(e,()=>{this.#t-=n},wG.string)}else FNe.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},wG.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#r.add(e,()=>{this.#t-=e.byteLength},wG.typedArray)):LNe(e)&&(this.#t+=e.size,this.#r.add(e,()=>{this.#t-=e.size},wG.blob))}get readyState(){return qn.brandCheck(this,t),this[jle]}get bufferedAmount(){return qn.brandCheck(this,t),this.#t}get url(){return qn.brandCheck(this,t),BSt(this[BNe])}get extensions(){return qn.brandCheck(this,t),this.#n}get protocol(){return qn.brandCheck(this,t),this.#i}get onopen(){return qn.brandCheck(this,t),this.#e.open}set onopen(e){qn.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return qn.brandCheck(this,t),this.#e.error}set onerror(e){qn.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return qn.brandCheck(this,t),this.#e.close}set onclose(e){qn.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return qn.brandCheck(this,t),this.#e.message}set onmessage(e){qn.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return qn.brandCheck(this,t),this[_G]}set binaryType(e){qn.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[_G]="blob":this[_G]=e}#o(e,r){this[DNe]=e;let n=new qSt(this,r);n.on("drain",VSt),n.on("error",$St.bind(this)),e.socket.ws=this,this[LSt]=n,this.#r=new jSt(e.socket),this[jle]=_P.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#n=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),PNe("open",this)}};Q0.CONNECTING=Q0.prototype.CONNECTING=_P.CONNECTING;Q0.OPEN=Q0.prototype.OPEN=_P.OPEN;Q0.CLOSING=Q0.prototype.CLOSING=_P.CLOSING;Q0.CLOSED=Q0.prototype.CLOSED=_P.CLOSED;Object.defineProperties(Q0.prototype,{CONNECTING:Hv,OPEN:Hv,CLOSING:Hv,CLOSED:Hv,url:pp,readyState:pp,bufferedAmount:pp,onopen:pp,onerror:pp,onclose:pp,close:pp,onmessage:pp,binaryType:pp,send:pp,extensions:pp,protocol:pp,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Q0,{CONNECTING:Hv,OPEN:Hv,CLOSING:Hv,CLOSED:Hv});qn.converters["sequence<DOMString>"]=qn.sequenceConverter(qn.converters.DOMString);qn.converters["DOMString or sequence<DOMString>"]=function(t,e,r){return qn.util.Type(t)==="Object"&&Symbol.iterator in t?qn.converters["sequence<DOMString>"](t):qn.converters.DOMString(t,e,r)};qn.converters.WebSocketInit=qn.dictionaryConverter([{key:"protocols",converter:qn.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:qn.converters.any,defaultValue:s(()=>WSt(),"defaultValue")},{key:"headers",converter:qn.nullableConverter(qn.converters.HeadersInit)}]);qn.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return qn.util.Type(t)==="Object"&&!(Symbol.iterator in t)?qn.converters.WebSocketInit(t):{protocols:qn.converters["DOMString or sequence<DOMString>"](t)}};qn.converters.WebSocketSendData=function(t){if(qn.util.Type(t)==="Object"){if(LNe(t))return qn.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||FNe.isArrayBuffer(t))return qn.converters.BufferSource(t)}return qn.converters.USVString(t)};function VSt(){this.ws[DNe].socket.resume()}s(VSt,"onParserDrain");function $St(t){let e,r;t instanceof HSt?(e=t.reason,r=t.code):e=t.message,PNe("error",this,()=>new GSt("error",{error:t,message:e})),NNe(this,r)}s($St,"onParserError");MNe.exports={WebSocket:Q0}});var Vle=G((KZr,ONe)=>{"use strict";f();function zSt(t){return t.indexOf("\0")===-1}s(zSt,"isValidLastEventId");function YSt(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s(YSt,"isASCIINumber");function KSt(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(KSt,"delay");ONe.exports={isValidLastEventId:zSt,isASCIINumber:YSt,delay:KSt}});var GNe=G((ZZr,WNe)=>{"use strict";f();var{Transform:JSt}=require("node:stream"),{isASCIINumber:UNe,isValidLastEventId:qNe}=Vle(),uy=[239,187,191],$le=10,SG=13,XSt=58,ZSt=32,zle=class extends JSt{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,r,n){if(e.length===0){n();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===uy[0]){n();return}this.checkBOM=!1,n();return;case 2:if(this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]){n();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]&&this.buffer[2]===uy[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,n();return}this.checkBOM=!1;break;default:this.buffer[0]===uy[0]&&this.buffer[1]===uy[1]&&this.buffer[2]===uy[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===$le){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===$le||this.buffer[this.pos]===SG){this.buffer[this.pos]===SG&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===$le||this.buffer[this.pos]===SG){this.buffer[this.pos]===SG&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}n()}parseLine(e,r){if(e.length===0)return;let n=e.indexOf(XSt);if(n===0)return;let i="",o="";if(n!==-1){i=e.subarray(0,n).toString("utf8");let a=n+1;e[a]===ZSt&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":r[i]===void 0?r[i]=o:r[i]+=`
${o}`;break;case"retry":UNe(o)&&(r[i]=o);break;case"id":qNe(o)&&(r[i]=o);break;case"event":o.length>0&&(r[i]=o);break}}processEvent(e){e.retry&&UNe(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&qNe(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};WNe.exports={EventSourceStream:zle}});var JNe=G((ren,KNe)=>{"use strict";f();var{pipeline:e5t}=require("node:stream"),{fetching:t5t}=gP(),{makeRequest:r5t}=E4(),{webidl:dy}=Ac(),{EventSourceStream:n5t}=GNe(),{parseMIMEType:i5t}=Sd(),{createFastMessageEvent:o5t}=R4(),{isNetworkError:HNe}=mP(),{delay:s5t}=Vle(),{kEnumerableProperty:W2}=yi(),{environmentSettingsObject:jNe}=B0(),VNe=!1,$Ne=3e3,SP=0,zNe=1,RP=2,a5t="anonymous",l5t="use-credentials",N4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#n=SP;#r=null;#o=null;#s;#a;constructor(e,r={}){super(),dy.util.markAsUncloneable(this);let n="EventSource constructor";dy.argumentLengthCheck(arguments,1,n),VNe||(VNe=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=dy.converters.USVString(e,n,"url"),r=dy.converters.EventSourceInitDict(r,n,"eventSourceInitDict"),this.#s=r.dispatcher,this.#a={lastEventId:"",reconnectionTime:$Ne};let i=jNe,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=a5t;r.withCredentials&&(a=l5t,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=jNe.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#r=r5t(l),this.#l()}get readyState(){return this.#n}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#n===RP)return;this.#n=SP;let e={request:this.#r,dispatcher:this.#s},r=s(n=>{HNe(n)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=r,e.processResponse=n=>{if(HNe(n))if(n.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=n.headersList.get("content-type",!0),o=i!==null?i5t(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(n.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#n=zNe,this.dispatchEvent(new Event("open")),this.#a.origin=n.urlList[n.urlList.length-1].origin;let l=new n5t({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(o5t(c.type,c.options))},"push")});e5t(n.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=t5t(e)}async#c(){this.#n!==RP&&(this.#n=SP,this.dispatchEvent(new Event("error")),await s5t(this.#a.reconnectionTime),this.#n===SP&&(this.#a.lastEventId.length&&this.#r.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){dy.brandCheck(this,t),this.#n!==RP&&(this.#n=RP,this.#o.abort(),this.#r=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},YNe={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:SP,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:zNe,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:RP,writable:!1}};Object.defineProperties(N4,YNe);Object.defineProperties(N4.prototype,YNe);Object.defineProperties(N4.prototype,{close:W2,onerror:W2,onmessage:W2,onopen:W2,readyState:W2,url:W2,withCredentials:W2});dy.converters.EventSourceInitDict=dy.dictionaryConverter([{key:"withCredentials",converter:dy.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:dy.converters.any}]);KNe.exports={EventSource:N4,defaultReconnectionTime:$Ne}});var t7e=G((oen,Bn)=>{"use strict";f();var c5t=ZD(),XNe=BD(),u5t=u4(),d5t=oDe(),f5t=d4(),p5t=Cae(),m5t=bDe(),h5t=SDe(),ZNe=yo(),kG=yi(),{InvalidArgumentError:RG}=ZNe,L4=mPe(),g5t=PD(),A5t=ele(),y5t=YPe(),C5t=nle(),x5t=qae(),v5t=BW(),{getGlobalDispatcher:e7e,setGlobalDispatcher:b5t}=qW(),E5t=WW(),I5t=CW(),T5t=xW();Object.assign(XNe.prototype,L4);Bn.exports.Dispatcher=XNe;Bn.exports.Client=c5t;Bn.exports.Pool=u5t;Bn.exports.BalancedPool=d5t;Bn.exports.Agent=f5t;Bn.exports.ProxyAgent=p5t;Bn.exports.EnvHttpProxyAgent=m5t;Bn.exports.RetryAgent=h5t;Bn.exports.RetryHandler=v5t;Bn.exports.DecoratorHandler=E5t;Bn.exports.RedirectHandler=I5t;Bn.exports.createRedirectInterceptor=T5t;Bn.exports.interceptors={redirect:r9e(),retry:i9e(),dump:s9e(),dns:c9e()};Bn.exports.buildConnector=g5t;Bn.exports.errors=ZNe;Bn.exports.util={parseHeaders:kG.parseHeaders,headerNameToString:kG.headerNameToString};function kP(t){return(e,r,n)=>{if(typeof r=="function"&&(n=r,r=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new RG("invalid url");if(r!=null&&typeof r!="object")throw new RG("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new RG("invalid opts.path");let a=r.path;r.path.startsWith("/")||(a=`/${a}`),e=new URL(kG.parseOrigin(e).origin+a)}else r||(r=typeof e=="object"?e:{}),e=kG.parseURL(e);let{agent:i,dispatcher:o=e7e()}=r;if(i)throw new RG("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...r,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:r.method||(r.body?"PUT":"GET")},n)}}s(kP,"makeDispatcher");Bn.exports.setGlobalDispatcher=b5t;Bn.exports.getGlobalDispatcher=e7e;var w5t=gP().fetch;Bn.exports.fetch=s(async function(e,r=void 0){try{return await w5t(e,r)}catch(n){throw n&&typeof n=="object"&&Error.captureStackTrace(n),n}},"fetch");Bn.exports.Headers=L2().Headers;Bn.exports.Response=mP().Response;Bn.exports.Request=E4().Request;Bn.exports.FormData=UD().FormData;Bn.exports.File=globalThis.File??require("node:buffer").File;Bn.exports.FileReader=E6e().FileReader;var{setGlobalOrigin:_5t,getGlobalOrigin:S5t}=xse();Bn.exports.setGlobalOrigin=_5t;Bn.exports.getGlobalOrigin=S5t;var{CacheStorage:R5t}=D6e(),{kConstruct:k5t}=cG();Bn.exports.caches=new R5t(k5t);var{deleteCookie:B5t,getCookies:D5t,getSetCookies:P5t,setCookie:N5t}=H6e();Bn.exports.deleteCookie=B5t;Bn.exports.getCookies=D5t;Bn.exports.getSetCookies=P5t;Bn.exports.setCookie=N5t;var{parseMIMEType:L5t,serializeAMimeType:F5t}=Sd();Bn.exports.parseMIMEType=L5t;Bn.exports.serializeAMimeType=F5t;var{CloseEvent:M5t,ErrorEvent:Q5t,MessageEvent:O5t}=R4();Bn.exports.WebSocket=QNe().WebSocket;Bn.exports.CloseEvent=M5t;Bn.exports.ErrorEvent=Q5t;Bn.exports.MessageEvent=O5t;Bn.exports.request=kP(L4.request);Bn.exports.stream=kP(L4.stream);Bn.exports.pipeline=kP(L4.pipeline);Bn.exports.connect=kP(L4.connect);Bn.exports.upgrade=kP(L4.upgrade);Bn.exports.MockClient=A5t;Bn.exports.MockPool=C5t;Bn.exports.MockAgent=y5t;Bn.exports.mockErrors=x5t;var{EventSource:U5t}=JNe();Bn.exports.EventSource=U5t});var di=G((len,r7e)=>{f();r7e.exports={options:{usePureJavaScript:!1}}});var o7e=G((uen,i7e)=>{f();var Yle={};i7e.exports=Yle;var n7e={};Yle.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=q5t(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=a;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};Yle.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=n7e[e];if(!r){r=n7e[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function q5t(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var a=0,l=t.at(r);a<o.length;++a)l+=o[a]<<8,o[a]=l%n,l=l/n|0;for(;l>0;)o.push(l%n),l=l/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}s(q5t,"_encodeWithByteBuffer")});var uo=G((pen,c7e)=>{f();var s7e=di(),a7e=o7e(),Be=c7e.exports=s7e.util=s7e.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Be.nextTick=process.nextTick,typeof setImmediate=="function"?Be.setImmediate=setImmediate:Be.setImmediate=Be.nextTick;return}if(typeof setImmediate=="function"){Be.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Be.nextTick=function(l){return setImmediate(l)};return}if(Be.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];Be.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Be.setImmediate;Be.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}Be.nextTick=Be.setImmediate})();Be.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Be.globalScope=function(){return Be.isNodejs?global:typeof self>"u"?window:self}();Be.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Be.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Be.isArrayBufferView=function(t){return t&&Be.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function BP(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(BP,"_checkBitsParam");Be.ByteBuffer=Kle;function Kle(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Be.isArrayBuffer(t)||Be.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Kle||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(Kle,"ByteStringBuffer");Be.ByteStringBuffer=Kle;var W5t=4096;Be.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>W5t&&(this.data.substr(0,1),this._constructedStringLength=0)};Be.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Be.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Be.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};Be.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Be.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Be.encodeUtf8(t))};Be.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Be.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Be.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Be.ByteStringBuffer.prototype.putInt=function(t,e){BP(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};Be.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Be.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Be.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt=function(t){BP(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Be.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Be.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Be.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Be.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Be.ByteStringBuffer.prototype.copy=function(){var t=Be.createBuffer(this.data);return t.read=this.read,t};Be.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Be.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Be.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Be.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Be.ByteStringBuffer.prototype.toString=function(){return Be.decodeUtf8(this.bytes())};function G5t(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=Be.isArrayBuffer(t),n=Be.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(G5t,"DataBuffer");Be.DataBuffer=G5t;Be.DataBuffer.prototype.length=function(){return this.write-this.read};Be.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};Be.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Be.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};Be.DataBuffer.prototype.putBytes=function(t,e){if(Be.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(Be.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof Be.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Be.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof Be.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Be.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Be.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Be.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Be.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Be.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Be.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Be.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Be.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Be.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Be.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Be.DataBuffer.prototype.putInt=function(t,e){BP(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Be.DataBuffer.prototype.putSignedInt=function(t,e){return BP(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Be.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Be.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Be.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Be.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Be.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Be.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Be.DataBuffer.prototype.getInt=function(t){BP(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Be.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};Be.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Be.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Be.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Be.DataBuffer.prototype.copy=function(){return new Be.DataBuffer(this)};Be.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Be.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Be.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Be.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};Be.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Be.binary.raw.encode(e);if(t==="hex")return Be.binary.hex.encode(e);if(t==="base64")return Be.binary.base64.encode(e);if(t==="utf8")return Be.text.utf8.decode(e);if(t==="utf16")return Be.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Be.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Be.encodeUtf8(t)),new Be.ByteBuffer(t)};Be.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};Be.xorBytes=function(t,e,r){for(var n="",i="",o="",a=0,l=0;r>0;--r,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(n+=o,o="",l=0),o+=String.fromCharCode(i),++l;return n+=o,n};Be.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};Be.bytesToHex=function(t){return Be.createBuffer(t).toHex()};Be.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var jv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Vv=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l7e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Be.encode64=function(t,e){for(var r="",n="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),r+=jv.charAt(i>>2),r+=jv.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=jv.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":jv.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Be.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,a=0;a<t.length;)r=Vv[t.charCodeAt(a++)-43],n=Vv[t.charCodeAt(a++)-43],i=Vv[t.charCodeAt(a++)-43],o=Vv[t.charCodeAt(a++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Be.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Be.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Be.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:a7e.encode,decode:a7e.decode}};Be.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Be.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Be.binary.hex.encode=Be.bytesToHex;Be.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};Be.binary.base64.encode=function(t,e){for(var r="",n="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],r+=jv.charAt(i>>2),r+=jv.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=jv.charAt((o&15)<<2|a>>6),r+=isNaN(a)?"=":jv.charAt(a&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};Be.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,a,l,c=0,u=r;c<t.length;)i=Vv[t.charCodeAt(c++)-43],o=Vv[t.charCodeAt(c++)-43],a=Vv[t.charCodeAt(c++)-43],l=Vv[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,a!==64&&(n[u++]=(o&15)<<4|a>>2,l!==64&&(n[u++]=(a&3)<<6|l));return e?u-r:n.subarray(0,u)};Be.binary.base58.encode=function(t,e){return Be.binary.baseN.encode(t,l7e,e)};Be.binary.base58.decode=function(t,e){return Be.binary.baseN.decode(t,l7e,e)};Be.text={utf8:{},utf16:{}};Be.text.utf8.encode=function(t,e,r){t=Be.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};Be.text.utf8.decode=function(t){return Be.decodeUtf8(String.fromCharCode.apply(null,t))};Be.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,a=r,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-r:n};Be.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Be.deflate=function(t,e,r){if(e=Be.decode64(t.deflate(Be.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};Be.inflate=function(t,e,r){var n=t.inflate(Be.encode64(e)).rval;return n===null?null:Be.decode64(n)};var Jle=s(function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=Be.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},"_setStorageObject"),Xle=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(Be.decode64(r))),r},"_getStorageObject"),H5t=s(function(t,e,r,n){var i=Xle(t,e);i===null&&(i={}),i[r]=n,Jle(t,e,i)},"_setItem"),j5t=s(function(t,e,r){var n=Xle(t,e);return n!==null&&(n=r in n?n[r]:null),n},"_getItem"),V5t=s(function(t,e,r){var n=Xle(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),Jle(t,e,n)}},"_removeItem"),$5t=s(function(t,e){Jle(t,e,null)},"_clearItems"),BG=s(function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,a=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return n},"_callStorageFunction");Be.setItem=function(t,e,r,n,i){BG(H5t,arguments,i)};Be.getItem=function(t,e,r,n){return BG(j5t,arguments,n)};Be.removeItem=function(t,e,r,n){BG(V5t,arguments,n)};Be.clearItems=function(t,e,r){BG($5t,arguments,r)};Be.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Be.format=function(t){for(var e=/%./g,r,n,i=0,o=[],a=0;r=e.exec(t);){n=t.substring(a,e.lastIndex-2),n.length>0&&o.push(n),a=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};Be.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=r===void 0?",":r,l=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Be.formatSize=function(t){return t>=1073741824?t=Be.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Be.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Be.formatNumber(t/1024,0)+" KiB":t=Be.formatNumber(t,0)+" bytes",t};Be.bytesFromIP=function(t){return t.indexOf(".")!==-1?Be.bytesFromIPv4(t):t.indexOf(":")!==-1?Be.bytesFromIPv6(t):null};Be.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Be.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};Be.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=Be.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=Be.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};Be.bytesToIP=function(t){return t.length===4?Be.bytesToIPv4(t):t.length===16?Be.bytesToIPv6(t):null};Be.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};Be.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=Be.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=r[r.length-1],l=e.length;!a||l!==a.end+1?r.push({start:l,end:l}):(a.end=l,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Be.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Be&&!t.update)return e(null,Be.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Be.cores=navigator.hardwareConcurrency,e(null,Be.cores);if(typeof Worker>"u")return Be.cores=1,e(null,Be.cores);if(typeof Blob>"u")return Be.cores=2,e(null,Be.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Be.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,Be.cores)}i(c,function(d,p){a.push(o(c,p)),n(a,l-1,c)})}s(n,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(r);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var DG=G((gen,u7e)=>{f();var Vl=di();uo();u7e.exports=Vl.cipher=Vl.cipher||{};Vl.cipher.algorithms=Vl.cipher.algorithms||{};Vl.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Vl.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Vl.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Vl.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Vl.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Vl.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Vl.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Vl.cipher.algorithms[t]=e};Vl.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Vl.cipher.algorithms?Vl.cipher.algorithms[t]:null};var Zle=Vl.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};Zle.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Vl.util.createBuffer(),this.output=t.output||Vl.util.createBuffer(),this.mode.start(e)};Zle.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Zle.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var tce=G((yen,d7e)=>{f();var $l=di();uo();$l.cipher=$l.cipher||{};var wi=d7e.exports=$l.cipher.modes=$l.cipher.modes||{};wi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.ecb.prototype.start=function(t){};wi.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};wi.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};wi.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};wi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};wi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=PG(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wi.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};wi.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};wi.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};wi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};wi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0};wi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=PG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};wi.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};wi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0};wi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=PG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};wi.ofb.prototype.decrypt=wi.ofb.prototype.encrypt;wi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0};wi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=PG(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}NG(this._inBlock)};wi.ctr.prototype.decrypt=wi.ctr.prototype.encrypt;wi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=$l.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=$l.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=$l.util.createBuffer(t.additionalData):r=$l.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=$l.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(ece(n*8)))}this._inBlock=this._j0.slice(0),NG(this._inBlock),this._partialBytes=0,r=$l.util.createBuffer(r),this._aDataLength=ece(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};wi.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var a=n%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),NG(this._inBlock)};wi.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),NG(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};wi.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=$l.util.createBuffer();var n=this._aDataLength.concat(ece(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};wi.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};wi.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};wi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};wi.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};wi.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/n|0,u=(n-1-a%n)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};wi.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function PG(t,e){if(typeof t=="string"&&(t=$l.util.createBuffer(t)),$l.util.isArray(t)&&t.length>4){var r=t;t=$l.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!$l.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}s(PG,"transformIV");function NG(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(NG,"inc32");function ece(t){return[t/4294967296|0,t&4294967295]}s(ece,"from64To32")});var $v=G((ven,h7e)=>{f();var rs=di();DG();tce();uo();h7e.exports=rs.aes=rs.aes||{};rs.aes.startEncrypting=function(t,e,r,n){var i=LG({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};rs.aes.createEncryptionCipher=function(t,e){return LG({key:t,output:null,decrypt:!1,mode:e})};rs.aes.startDecrypting=function(t,e,r,n){var i=LG({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};rs.aes.createDecryptionCipher=function(t,e){return LG({key:t,output:null,decrypt:!0,mode:e})};rs.aes.Algorithm=function(t,e){ice||p7e();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:s(function(n,i){return nce(r._w,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return nce(r._w,n,i,!0)},"decrypt")}}),r._init=!1};rs.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=rs.util.createBuffer(e);else if(rs.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=rs.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!rs.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!rs.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=m7e(e,t.decrypt&&!a),this._init=!0}};rs.aes._expandKey=function(t,e){return ice||p7e(),m7e(t,e)};rs.aes._updateBlock=nce;M4("AES-ECB",rs.cipher.modes.ecb);M4("AES-CBC",rs.cipher.modes.cbc);M4("AES-CFB",rs.cipher.modes.cfb);M4("AES-OFB",rs.cipher.modes.ofb);M4("AES-CTR",rs.cipher.modes.ctr);M4("AES-GCM",rs.cipher.modes.gcm);function M4(t,e){var r=s(function(){return new rs.aes.Algorithm(t,e)},"factory");rs.cipher.registerAlgorithm(t,r)}s(M4,"registerAlgorithm");var ice=!1,F4=4,Uu,rce,f7e,G2,zm;function p7e(){ice=!0,f7e=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Uu=new Array(256),rce=new Array(256),G2=new Array(4),zm=new Array(4);for(var e=0;e<4;++e)G2[e]=new Array(256),zm[e]=new Array(256);for(var r=0,n=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,Uu[r]=l,rce[l]=r,c=t[l],i=t[r],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(r^a)<<16^(r^o^a)<<8^(r^i^a);for(var p=0;p<4;++p)G2[p][r]=u,zm[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^a]]],n^=t[t[n]])}}s(p7e,"initialize");function m7e(t,e){for(var r=t.slice(0),n,i=1,o=r.length,a=o+6+1,l=F4*a,c=o;c<l;++c)n=r[c-1],c%o===0?(n=Uu[n>>>16&255]<<24^Uu[n>>>8&255]<<16^Uu[n&255]<<8^Uu[n>>>24]^f7e[i]<<24,i++):o>6&&c%o===4&&(n=Uu[n>>>24]<<24^Uu[n>>>16&255]<<16^Uu[n>>>8&255]<<8^Uu[n&255]),r[c]=r[c-o]^n;if(e){var u,d=zm[0],p=zm[1],m=zm[2],h=zm[3],g=r.slice(0);l=r.length;for(var c=0,y=l-F4;c<l;c+=F4,y-=F4)if(c===0||c===l-F4)g[c]=r[y],g[c+1]=r[y+3],g[c+2]=r[y+2],g[c+3]=r[y+1];else for(var v=0;v<F4;++v)u=r[y+v],g[c+(3&-v)]=d[Uu[u>>>24]]^p[Uu[u>>>16&255]]^m[Uu[u>>>8&255]]^h[Uu[u&255]];r=g}return r}s(m7e,"_expandKey");function nce(t,e,r,n){var i=t.length/4-1,o,a,l,c,u;n?(o=zm[0],a=zm[1],l=zm[2],c=zm[3],u=rce):(o=G2[0],a=G2[1],l=G2[2],c=G2[3],u=Uu);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[n?3:1]^t[1],m=e[2]^t[2],h=e[n?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;r[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],r[n?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],r[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],r[n?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(nce,"_updateBlock");function LG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=rs.cipher.createDecipher(r,t.key):n=rs.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var l=null;a instanceof rs.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(n,a)},n}s(LG,"_createCipher")});var zv=G((Ien,g7e)=>{f();var DP=di();DP.pki=DP.pki||{};var oce=g7e.exports=DP.pki.oids=DP.oids=DP.oids||{};function wt(t,e){oce[t]=e,oce[e]=t}s(wt,"_IN");function Io(t,e){oce[t]=e}s(Io,"_I_");wt("1.2.840.113549.1.1.1","rsaEncryption");wt("1.2.840.113549.1.1.4","md5WithRSAEncryption");wt("1.2.840.113549.1.1.5","sha1WithRSAEncryption");wt("1.2.840.113549.1.1.7","RSAES-OAEP");wt("1.2.840.113549.1.1.8","mgf1");wt("1.2.840.113549.1.1.9","pSpecified");wt("1.2.840.113549.1.1.10","RSASSA-PSS");wt("1.2.840.113549.1.1.11","sha256WithRSAEncryption");wt("1.2.840.113549.1.1.12","sha384WithRSAEncryption");wt("1.2.840.113549.1.1.13","sha512WithRSAEncryption");wt("1.3.101.112","EdDSA25519");wt("1.2.840.10040.4.3","dsa-with-sha1");wt("1.3.14.3.2.7","desCBC");wt("1.3.14.3.2.26","sha1");wt("1.3.14.3.2.29","sha1WithRSASignature");wt("2.16.840.1.101.3.4.2.1","sha256");wt("2.16.840.1.101.3.4.2.2","sha384");wt("2.16.840.1.101.3.4.2.3","sha512");wt("2.16.840.1.101.3.4.2.4","sha224");wt("2.16.840.1.101.3.4.2.5","sha512-224");wt("2.16.840.1.101.3.4.2.6","sha512-256");wt("1.2.840.113549.2.2","md2");wt("1.2.840.113549.2.5","md5");wt("1.2.840.113549.1.7.1","data");wt("1.2.840.113549.1.7.2","signedData");wt("1.2.840.113549.1.7.3","envelopedData");wt("1.2.840.113549.1.7.4","signedAndEnvelopedData");wt("1.2.840.113549.1.7.5","digestedData");wt("1.2.840.113549.1.7.6","encryptedData");wt("1.2.840.113549.1.9.1","emailAddress");wt("1.2.840.113549.1.9.2","unstructuredName");wt("1.2.840.113549.1.9.3","contentType");wt("1.2.840.113549.1.9.4","messageDigest");wt("1.2.840.113549.1.9.5","signingTime");wt("1.2.840.113549.1.9.6","counterSignature");wt("1.2.840.113549.1.9.7","challengePassword");wt("1.2.840.113549.1.9.8","unstructuredAddress");wt("1.2.840.113549.1.9.14","extensionRequest");wt("1.2.840.113549.1.9.20","friendlyName");wt("1.2.840.113549.1.9.21","localKeyId");wt("1.2.840.113549.1.9.22.1","x509Certificate");wt("1.2.840.113549.1.12.10.1.1","keyBag");wt("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");wt("1.2.840.113549.1.12.10.1.3","certBag");wt("1.2.840.113549.1.12.10.1.4","crlBag");wt("1.2.840.113549.1.12.10.1.5","secretBag");wt("1.2.840.113549.1.12.10.1.6","safeContentsBag");wt("1.2.840.113549.1.5.13","pkcs5PBES2");wt("1.2.840.113549.1.5.12","pkcs5PBKDF2");wt("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");wt("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");wt("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");wt("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");wt("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");wt("1.2.840.113549.2.7","hmacWithSHA1");wt("1.2.840.113549.2.8","hmacWithSHA224");wt("1.2.840.113549.2.9","hmacWithSHA256");wt("1.2.840.113549.2.10","hmacWithSHA384");wt("1.2.840.113549.2.11","hmacWithSHA512");wt("1.2.840.113549.3.7","des-EDE3-CBC");wt("2.16.840.1.101.3.4.1.2","aes128-CBC");wt("2.16.840.1.101.3.4.1.22","aes192-CBC");wt("2.16.840.1.101.3.4.1.42","aes256-CBC");wt("2.5.4.3","commonName");wt("2.5.4.4","surname");wt("2.5.4.5","serialNumber");wt("2.5.4.6","countryName");wt("2.5.4.7","localityName");wt("2.5.4.8","stateOrProvinceName");wt("2.5.4.9","streetAddress");wt("2.5.4.10","organizationName");wt("2.5.4.11","organizationalUnitName");wt("2.5.4.12","title");wt("2.5.4.13","description");wt("2.5.4.15","businessCategory");wt("2.5.4.17","postalCode");wt("2.5.4.42","givenName");wt("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");wt("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");wt("2.16.840.1.113730.1.1","nsCertType");wt("2.16.840.1.113730.1.13","nsComment");Io("2.5.29.1","authorityKeyIdentifier");Io("2.5.29.2","keyAttributes");Io("2.5.29.3","certificatePolicies");Io("2.5.29.4","keyUsageRestriction");Io("2.5.29.5","policyMapping");Io("2.5.29.6","subtreesConstraint");Io("2.5.29.7","subjectAltName");Io("2.5.29.8","issuerAltName");Io("2.5.29.9","subjectDirectoryAttributes");Io("2.5.29.10","basicConstraints");Io("2.5.29.11","nameConstraints");Io("2.5.29.12","policyConstraints");Io("2.5.29.13","basicConstraints");wt("2.5.29.14","subjectKeyIdentifier");wt("2.5.29.15","keyUsage");Io("2.5.29.16","privateKeyUsagePeriod");wt("2.5.29.17","subjectAltName");wt("2.5.29.18","issuerAltName");wt("2.5.29.19","basicConstraints");Io("2.5.29.20","cRLNumber");Io("2.5.29.21","cRLReason");Io("2.5.29.22","expirationDate");Io("2.5.29.23","instructionCode");Io("2.5.29.24","invalidityDate");Io("2.5.29.25","cRLDistributionPoints");Io("2.5.29.26","issuingDistributionPoint");Io("2.5.29.27","deltaCRLIndicator");Io("2.5.29.28","issuingDistributionPoint");Io("2.5.29.29","certificateIssuer");Io("2.5.29.30","nameConstraints");wt("2.5.29.31","cRLDistributionPoints");wt("2.5.29.32","certificatePolicies");Io("2.5.29.33","policyMappings");Io("2.5.29.34","policyConstraints");wt("2.5.29.35","authorityKeyIdentifier");Io("2.5.29.36","policyConstraints");wt("2.5.29.37","extKeyUsage");Io("2.5.29.46","freshestCRL");Io("2.5.29.54","inhibitAnyPolicy");wt("1.3.6.1.4.1.11129.2.4.2","timestampList");wt("1.3.6.1.5.5.7.1.1","authorityInfoAccess");wt("1.3.6.1.5.5.7.3.1","serverAuth");wt("1.3.6.1.5.5.7.3.2","clientAuth");wt("1.3.6.1.5.5.7.3.3","codeSigning");wt("1.3.6.1.5.5.7.3.4","emailProtection");wt("1.3.6.1.5.5.7.3.8","timeStamping")});var Ym=G((_en,y7e)=>{f();var bs=di();uo();zv();var nr=y7e.exports=bs.asn1=bs.asn1||{};nr.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};nr.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};nr.create=function(t,e,r,n,i){if(bs.util.isArray(n)){for(var o=[],a=0;a<n.length;++a)n[a]!==void 0&&o.push(n[a]);n=o}var l={tagClass:t,type:e,constructed:r,composed:r||bs.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=nr.copy(l)),l};nr.copy=function(t,e){var r;if(bs.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(nr.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:nr.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};nr.equals=function(t,e,r){if(bs.util.isArray(t)){if(!bs.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!nr.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&nr.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};nr.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function PP(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}s(PP,"_checkBufferLength");var z5t=s(function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;PP(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}},"_getValueLength");nr.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=bs.util.createBuffer(t));var r=t.length(),n=FG(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function FG(t,e,r,n){var i;PP(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=z5t(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(PP(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(FG(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(FG(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===nr.Class.UNIVERSAL&&l===nr.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&n.decodeBitStrings&&a===nr.Class.UNIVERSAL&&l===nr.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===nr.Type.BITSTRING&&(PP(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=FG(t,e,r+1,v),E=i-t.length();e-=E,l==nr.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===nr.Class.UNIVERSAL||_===nr.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===nr.Type.BMPSTRING)for(d="";c>0;c-=2)PP(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return nr.create(a,l,m,d,k)}s(FG,"_fromDer");nr.toDer=function(t){var e=bs.util.createBuffer(),r=t.tagClass|t.type,n=bs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=nr.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(nr.toDer(t.value[o]))}else if(t.type===nr.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===nr.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var a=n.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(n),e};nr.oidToDer=function(t){var e=t.split("."),r=bs.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,a,l=2;l<e.length;++l){n=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,n||(a|=128),i.push(a),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};nr.derToOid=function(t){var e;typeof t=="string"&&(t=bs.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};nr.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};nr.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,a,l,c)),e};nr.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};nr.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};nr.integerToDer=function(t){var e=bs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};nr.derToInteger=function(t){typeof t=="string"&&(t=bs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};nr.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&bs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=nr.validate(t.value[o],e.value[a],r,n),i?++o:e.value[a].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var A7e=/[^\\u0000-\\u00ff]/;nr.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case nr.Class.UNIVERSAL:n+="Universal:";break;case nr.Class.APPLICATION:n+="Application:";break;case nr.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case nr.Class.PRIVATE:n+="Private:";break}if(t.tagClass===nr.Class.UNIVERSAL)switch(n+=t.type,t.type){case nr.Type.NONE:n+=" (None)";break;case nr.Type.BOOLEAN:n+=" (Boolean)";break;case nr.Type.INTEGER:n+=" (Integer)";break;case nr.Type.BITSTRING:n+=" (Bit string)";break;case nr.Type.OCTETSTRING:n+=" (Octet string)";break;case nr.Type.NULL:n+=" (Null)";break;case nr.Type.OID:n+=" (Object Identifier)";break;case nr.Type.ODESC:n+=" (Object Descriptor)";break;case nr.Type.EXTERNAL:n+=" (External or Instance of)";break;case nr.Type.REAL:n+=" (Real)";break;case nr.Type.ENUMERATED:n+=" (Enumerated)";break;case nr.Type.EMBEDDED:n+=" (Embedded PDV)";break;case nr.Type.UTF8:n+=" (UTF8)";break;case nr.Type.ROID:n+=" (Relative Object Identifier)";break;case nr.Type.SEQUENCE:n+=" (Sequence)";break;case nr.Type.SET:n+=" (Set)";break;case nr.Type.PRINTABLESTRING:n+=" (Printable String)";break;case nr.Type.IA5String:n+=" (IA5String (ASCII))";break;case nr.Type.UTCTIME:n+=" (UTC time)";break;case nr.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case nr.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=nr.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(l+=","));n+=i+"Sub values: "+a+l}else{if(n+=i+"Value: ",t.type===nr.Type.OID){var c=nr.derToOid(t.value);n+=c,bs.pki&&bs.pki.oids&&c in bs.pki.oids&&(n+=" ("+bs.pki.oids[c]+") ")}if(t.type===nr.Type.INTEGER)try{n+=nr.derToInteger(t.value)}catch{n+="0x"+bs.util.bytesToHex(t.value)}else if(t.type===nr.Type.BITSTRING){if(t.value.length>1?n+="0x"+bs.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===nr.Type.OCTETSTRING)A7e.test(t.value)||(n+="("+t.value+") "),n+="0x"+bs.util.bytesToHex(t.value);else if(t.type===nr.Type.UTF8)try{n+=bs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+bs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===nr.Type.PRINTABLESTRING||t.type===nr.Type.IA5String?n+=t.value:A7e.test(t.value)?n+="0x"+bs.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var $g=G((ken,C7e)=>{f();var MG=di();C7e.exports=MG.md=MG.md||{};MG.md.algorithms=MG.md.algorithms||{}});var Q4=G((Den,x7e)=>{f();var fy=di();$g();uo();var Y5t=x7e.exports=fy.hmac=fy.hmac||{};Y5t.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in fy.md.algorithms)e=fy.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=fy.util.createBuffer(a);else if(fy.util.isArray(a)){var l=a;a=fy.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),r=fy.util.createBuffer(),n=fy.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);r.putByte(54^l),n.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)r.putByte(54),n.putByte(92);t=a,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var OG=G((Nen,I7e)=>{f();var zg=di();$g();uo();var b7e=I7e.exports=zg.md5=zg.md5||{};zg.md.md5=zg.md.algorithms.md5=b7e;b7e.create=function(){E7e||K5t();var t=null,e=zg.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=zg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=zg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),v7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=zg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(sce.substr(0,n.blockLength-a));for(var l,c=0,u=n.fullMessageLength.length-1;u>=0;--u)l=n.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};v7e(d,r,i);var p=zg.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},n};var sce=null,QG=null,NP=null,O4=null,E7e=!1;function K5t(){sce="\x80",sce+=zg.util.fillString("\0",64),QG=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],NP=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],O4=new Array(64);for(var t=0;t<64;++t)O4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);E7e=!0}s(K5t,"_init");function v7e(t,e,r){for(var n,i,o,a,l,c,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),c=l^o&(a^l),n=i+c+O4[d]+e[d],u=NP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<32;++d)c=a^l&(o^a),n=i+c+O4[d]+e[QG[d]],u=NP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<48;++d)c=o^a^l,n=i+c+O4[d]+e[QG[d]],u=NP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;for(;d<64;++d)c=a^(o|~l),n=i+c+O4[d]+e[QG[d]],u=NP[d],i=l,l=a,a=o,o+=n<<u|n>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(v7e,"_update")});var H2=G((Men,w7e)=>{f();var qG=di();uo();var T7e=w7e.exports=qG.pem=qG.pem||{};T7e.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=UG(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=UG(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=UG(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=UG(t.headers[i]);return t.procType&&(r+=`\r
`),r+=qG.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};T7e.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:qG.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(n),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(J5t(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function UG(t){for(var e=t.name+": ",r=[],n=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(UG,"foldHeader");function J5t(t){return t.replace(/^\s+/,"")}s(J5t,"ltrim")});var LP=G((Uen,S7e)=>{f();var Os=di();DG();tce();uo();S7e.exports=Os.des=Os.des||{};Os.des.startEncrypting=function(t,e,r,n){var i=WG({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createEncryptionCipher=function(t,e){return WG({key:t,output:null,decrypt:!1,mode:e})};Os.des.startDecrypting=function(t,e,r,n){var i=WG({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createDecryptionCipher=function(t,e){return WG({key:t,output:null,decrypt:!0,mode:e})};Os.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:s(function(n,i){return _7e(r._keys,n,i,!1)},"encrypt"),decrypt:s(function(n,i){return _7e(r._keys,n,i,!0)},"decrypt")}}),r._init=!1};Os.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Os.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=s4t(e),this._init=!0}};Yg("DES-ECB",Os.cipher.modes.ecb);Yg("DES-CBC",Os.cipher.modes.cbc);Yg("DES-CFB",Os.cipher.modes.cfb);Yg("DES-OFB",Os.cipher.modes.ofb);Yg("DES-CTR",Os.cipher.modes.ctr);Yg("3DES-ECB",Os.cipher.modes.ecb);Yg("3DES-CBC",Os.cipher.modes.cbc);Yg("3DES-CFB",Os.cipher.modes.cfb);Yg("3DES-OFB",Os.cipher.modes.ofb);Yg("3DES-CTR",Os.cipher.modes.ctr);function Yg(t,e){var r=s(function(){return new Os.des.Algorithm(t,e)},"factory");Os.cipher.registerAlgorithm(t,r)}s(Yg,"registerAlgorithm");var X5t=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Z5t=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],e4t=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],t4t=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],r4t=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],n4t=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],i4t=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],o4t=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function s4t(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var B=t.getInt32(),N=t.getInt32();_=(B>>>4^N)&252645135,N^=_,B^=_<<4,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>2^N)&858993459,N^=_,B^=_<<2,_=(N>>>-16^B)&65535,B^=_,N^=_<<-16,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=(N>>>8^B)&16711935,B^=_,N^=_<<8,_=(B>>>1^N)&1431655765,N^=_,B^=_<<1,_=B<<8|N>>>20&240,B=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var q=0;q<b.length;++q){b[q]?(B=B<<2|B>>>26,N=N<<2|N>>>26):(B=B<<1|B>>>27,N=N<<1|N>>>27),B&=-15,N&=-15;var te=e[B>>>28]|r[B>>>24&15]|n[B>>>20&15]|i[B>>>16&15]|o[B>>>12&15]|a[B>>>8&15]|l[B>>>4&15],me=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(me>>>16^te)&65535,v[E++]=te^_,v[E++]=me^_<<16}}return v}s(s4t,"_createKeys");function _7e(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(Z5t[h>>>24&63]|t4t[h>>>16&63]|n4t[h>>>8&63]|o4t[h&63]|X5t[g>>>24&63]|e4t[g>>>16&63]|r4t[g>>>8&63]|i4t[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,r[0]=l,r[1]=c}s(_7e,"_updateBlock");function WG(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Os.cipher.createDecipher(r,t.key):n=Os.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,a){var l=null;a instanceof Os.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(n,a)},n}s(WG,"_createCipher")});var GG=G((Gen,R7e)=>{f();var qu=di();Q4();$g();uo();var a4t=qu.pkcs5=qu.pkcs5||{},py;qu.util.isNodejs&&!qu.options.usePureJavaScript&&(py=require("crypto"));R7e.exports=qu.pbkdf2=a4t.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),qu.util.isNodejs&&!qu.options.usePureJavaScript&&py.pbkdf2&&(i===null||typeof i!="object")&&(py.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?py.pbkdf2Sync.length===4?py.pbkdf2(t,e,r,n,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):py.pbkdf2(t,e,r,n,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):py.pbkdf2Sync.length===4?py.pbkdf2Sync(t,e,r,n).toString("binary"):py.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in qu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=qu.md[i].create()}var a=i.digestLength;if(n>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(n/a),u=n-(c-1)*a,d=qu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(qu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=r;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=qu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(qu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=r)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=qu.util.xorBytes(m,h,a),g=h,++v,qu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var lce=G((Ven,N7e)=>{f();var Kg=di();$g();uo();var B7e=N7e.exports=Kg.sha256=Kg.sha256||{};Kg.md.sha256=Kg.md.algorithms.sha256=B7e;B7e.create=function(){D7e||l4t();var t=null,e=Kg.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Kg.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Kg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),k7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Kg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(ace.substr(0,n.blockLength-a));for(var l,c,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};k7e(p,r,i);var m=Kg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},n};var ace=null,D7e=!1,P7e=null;function l4t(){ace="\x80",ace+=Kg.util.fillString("\0",64),P7e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],D7e=!0}s(l4t,"_init");function k7e(t,e,r){for(var n,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=r.length();E>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),n=b+a+l+P7e[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+n>>>0,h=m,m=p,p=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(k7e,"_update")});var cce=G((Yen,L7e)=>{f();var Jg=di();uo();var HG=null;Jg.util.isNodejs&&!Jg.options.usePureJavaScript&&!process.versions["node-webkit"]&&(HG=require("crypto"));var c4t=L7e.exports=Jg.prng=Jg.prng||{};c4t.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=Jg.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Jg.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),Jg.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=Jg.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=Jg.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(B){return m.getRandomValues(B)},"getRandomValues"));var h=Jg.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(B){if(!(typeof QuotaExceededError<"u"&&B instanceof QuotaExceededError))throw B}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),HG?(e.seedFile=function(u,d){HG.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return HG.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var mp=G((Xen,uce)=>{f();var zl=di();$v();lce();cce();uo();(function(){if(zl.random&&zl.random.getBytes){uce.exports=zl.random;return}(function(t){var e={},r=new Array(4),n=zl.util.createBuffer();e.formatKey=function(p){var m=zl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),zl.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=zl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return zl.aes._updateBlock(p,m,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(p){return++p[3],p},e.md=zl.md.sha256;function i(){var p=zl.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=zl.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),zl.options.usePureJavaScript||!zl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!zl.random)zl.random=o;else for(var d in o)zl.random[d]=o[d];zl.random.createInstance=i,uce.exports=zl.random})(typeof jQuery<"u"?jQuery:null)})()});var fce=G((ttn,Q7e)=>{f();var Nd=di();uo();var dce=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],F7e=[1,2,3,5],u4t=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),d4t=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");Q7e.exports=Nd.rc2=Nd.rc2||{};Nd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Nd.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(dce[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-o,dce[r.at(128-o)&a]),l=127-o;l>=0;l--)r.setAt(l,dce[r.at(l+1)^r.at(l+o)]);return r};var M7e=s(function(t,e,r){var n=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=Nd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());r?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=u4t(g[u],F7e[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=d4t(g[u],F7e[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(r?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=r?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(r?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=Nd.util.createBuffer(g)),n=!1,i=Nd.util.createBuffer(),o=y||new Nd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(n||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(r)if(g)y=g(8,i,!r);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(n=!0,h.update()),!r&&(y=i.length()===0,y))if(g)y=g(8,o,!r);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");Nd.rc2.startEncrypting=function(t,e,r){var n=Nd.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Nd.rc2.createEncryptionCipher=function(t,e){return M7e(t,e,!0)};Nd.rc2.startDecrypting=function(t,e,r){var n=Nd.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Nd.rc2.createDecryptionCipher=function(t,e){return M7e(t,e,!1)}});var MP=G((itn,V7e)=>{f();var pce=di();V7e.exports=pce.jsbn=pce.jsbn||{};var my,f4t=0xdeadbeefcafe,O7e=(f4t&16777215)==15715070;function xt(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(xt,"BigInteger");pce.jsbn.BigInteger=xt;function fo(){return new xt(null)}s(fo,"nbi");function p4t(t,e,r,n,i,o){for(;--o>=0;){var a=e*this.data[t++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=a&67108863}return i}s(p4t,"am1");function m4t(t,e,r,n,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),r.data[n++]=c&1073741823}return i}s(m4t,"am2");function U7e(t,e,r,n,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+r.data[n]+i,i=(c>>28)+(d>>14)+l*u,r.data[n++]=c&268435455}return i}s(U7e,"am3");typeof navigator>"u"?(xt.prototype.am=U7e,my=28):O7e&&navigator.appName=="Microsoft Internet Explorer"?(xt.prototype.am=m4t,my=30):O7e&&navigator.appName!="Netscape"?(xt.prototype.am=p4t,my=26):(xt.prototype.am=U7e,my=28);xt.prototype.DB=my;xt.prototype.DM=(1<<my)-1;xt.prototype.DV=1<<my;var mce=52;xt.prototype.FV=Math.pow(2,mce);xt.prototype.F1=mce-my;xt.prototype.F2=2*my-mce;var h4t="0123456789abcdefghijklmnopqrstuvwxyz",jG=new Array,U4,hp;U4=48;for(hp=0;hp<=9;++hp)jG[U4++]=hp;U4=97;for(hp=10;hp<36;++hp)jG[U4++]=hp;U4=65;for(hp=10;hp<36;++hp)jG[U4++]=hp;function q7e(t){return h4t.charAt(t)}s(q7e,"int2char");function W7e(t,e){var r=jG[t.charCodeAt(e)];return r??-1}s(W7e,"intAt");function g4t(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(g4t,"bnpCopyTo");function A4t(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(A4t,"bnpFromInt");function Yv(t){var e=fo();return e.fromInt(t),e}s(Yv,"nbv");function y4t(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var a=r==8?t[n]&255:W7e(t,n);if(a<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+r>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&xt.ZERO.subTo(this,this)}s(y4t,"bnpFromString");function C4t(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(C4t,"bnpClamp");function x4t(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(n=this.data[a]>>l)>0&&(i=!0,o=q7e(n));a>=0;)l<e?(n=(this.data[a]&(1<<l)-1)<<e-l,n|=this.data[--a]>>(l+=this.DB-e)):(n=this.data[a]>>(l-=e)&r,l<=0&&(l+=this.DB,--a)),n>0&&(i=!0),i&&(o+=q7e(n));return i?o:"0"}s(x4t,"bnToString");function v4t(){var t=fo();return xt.ZERO.subTo(this,t),t}s(v4t,"bnNegate");function b4t(){return this.s<0?this.negate():this}s(b4t,"bnAbs");function E4t(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}s(E4t,"bnCompareTo");function VG(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}s(VG,"nbits");function I4t(){return this.t<=0?0:this.DB*(this.t-1)+VG(this.data[this.t-1]^this.s&this.DM)}s(I4t,"bnBitLength");function T4t(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}s(T4t,"bnpDLShiftTo");function w4t(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}s(w4t,"bnpDRShiftTo");function _4t(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),a=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>n|a,a=(this.data[l]&i)<<r;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(_4t,"bnpLShiftTo");function S4t(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)e.data[a-r-1]|=(this.data[a]&o)<<i,e.data[a-r]=this.data[a]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}s(S4t,"bnpRShiftTo");function R4t(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}s(R4t,"bnpSubTo");function k4t(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&xt.ZERO.subTo(e,e)}s(k4t,"bnpMultiplyTo");function B4t(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}s(B4t,"bnpSquareTo");function D4t(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=fo());var o=fo(),a=this.s,l=t.s,c=this.DB-VG(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=r.t,v=y-u,b=e??fo();for(o.dlShiftTo(v,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),xt.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=r.data[--y]==d?this.DM:Math.floor(r.data[y]*m+(r.data[y-1]+g)*h);if((r.data[y]+=o.am(0,E,r,v,0,u))<E)for(o.dlShiftTo(v,b),r.subTo(b,r);r.data[y]<--E;)r.subTo(b,r)}e!=null&&(r.drShiftTo(u,e),a!=l&&xt.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),a<0&&xt.ZERO.subTo(r,r)}}}s(D4t,"bnpDivRemTo");function P4t(t){var e=fo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(xt.ZERO)>0&&t.subTo(e,e),e}s(P4t,"bnMod");function j2(t){this.m=t}s(j2,"Classic");function N4t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(N4t,"cConvert");function L4t(t){return t}s(L4t,"cRevert");function F4t(t){t.divRemTo(this.m,null,t)}s(F4t,"cReduce");function M4t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(M4t,"cMulTo");function Q4t(t,e){t.squareTo(e),this.reduce(e)}s(Q4t,"cSqrTo");j2.prototype.convert=N4t;j2.prototype.revert=L4t;j2.prototype.reduce=F4t;j2.prototype.mulTo=M4t;j2.prototype.sqrTo=Q4t;function O4t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(O4t,"bnpInvDigit");function V2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(V2,"Montgomery");function U4t(t){var e=fo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(xt.ZERO)>0&&this.m.subTo(e,e),e}s(U4t,"montConvert");function q4t(t){var e=fo();return t.copyTo(e),this.reduce(e),e}s(q4t,"montRevert");function W4t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(W4t,"montReduce");function G4t(t,e){t.squareTo(e),this.reduce(e)}s(G4t,"montSqrTo");function H4t(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(H4t,"montMulTo");V2.prototype.convert=U4t;V2.prototype.revert=q4t;V2.prototype.reduce=W4t;V2.prototype.mulTo=H4t;V2.prototype.sqrTo=G4t;function j4t(){return(this.t>0?this.data[0]&1:this.s)==0}s(j4t,"bnpIsEven");function V4t(t,e){if(t>4294967295||t<1)return xt.ONE;var r=fo(),n=fo(),i=e.convert(this),o=VG(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var a=r;r=n,n=a}return e.revert(r)}s(V4t,"bnpExp");function $4t(t,e){var r;return t<256||e.isEven()?r=new j2(e):r=new V2(e),this.exp(t,r)}s($4t,"bnModPowInt");xt.prototype.copyTo=g4t;xt.prototype.fromInt=A4t;xt.prototype.fromString=y4t;xt.prototype.clamp=C4t;xt.prototype.dlShiftTo=T4t;xt.prototype.drShiftTo=w4t;xt.prototype.lShiftTo=_4t;xt.prototype.rShiftTo=S4t;xt.prototype.subTo=R4t;xt.prototype.multiplyTo=k4t;xt.prototype.squareTo=B4t;xt.prototype.divRemTo=D4t;xt.prototype.invDigit=O4t;xt.prototype.isEven=j4t;xt.prototype.exp=V4t;xt.prototype.toString=x4t;xt.prototype.negate=v4t;xt.prototype.abs=b4t;xt.prototype.compareTo=E4t;xt.prototype.bitLength=I4t;xt.prototype.mod=P4t;xt.prototype.modPowInt=$4t;xt.ZERO=Yv(0);xt.ONE=Yv(1);function z4t(){var t=fo();return this.copyTo(t),t}s(z4t,"bnClone");function Y4t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s(Y4t,"bnIntValue");function K4t(){return this.t==0?this.s:this.data[0]<<24>>24}s(K4t,"bnByteValue");function J4t(){return this.t==0?this.s:this.data[0]<<16>>16}s(J4t,"bnShortValue");function X4t(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(X4t,"bnpChunkSize");function Z4t(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(Z4t,"bnSigNum");function eRt(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Yv(r),i=fo(),o=fo(),a="";for(this.divRemTo(n,i,o);i.signum()>0;)a=(r+o.intValue()).toString(t).substr(1)+a,i.divRemTo(n,i,o);return o.intValue().toString(t)+a}s(eRt,"bnpToRadix");function tRt(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=W7e(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&xt.ZERO.subTo(this,this)}s(tRt,"bnpFromRadix");function rRt(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(xt.ONE.shiftLeft(t-1),hce,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(xt.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}s(rRt,"bnpFromNumber");function nRt(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}s(nRt,"bnToByteArray");function iRt(t){return this.compareTo(t)==0}s(iRt,"bnEquals");function oRt(t){return this.compareTo(t)<0?this:t}s(oRt,"bnMin");function sRt(t){return this.compareTo(t)>0?this:t}s(sRt,"bnMax");function aRt(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}s(aRt,"bnpBitwiseTo");function lRt(t,e){return t&e}s(lRt,"op_and");function cRt(t){var e=fo();return this.bitwiseTo(t,lRt,e),e}s(cRt,"bnAnd");function hce(t,e){return t|e}s(hce,"op_or");function uRt(t){var e=fo();return this.bitwiseTo(t,hce,e),e}s(uRt,"bnOr");function G7e(t,e){return t^e}s(G7e,"op_xor");function dRt(t){var e=fo();return this.bitwiseTo(t,G7e,e),e}s(dRt,"bnXor");function H7e(t,e){return t&~e}s(H7e,"op_andnot");function fRt(t){var e=fo();return this.bitwiseTo(t,H7e,e),e}s(fRt,"bnAndNot");function pRt(){for(var t=fo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(pRt,"bnNot");function mRt(t){var e=fo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(mRt,"bnShiftLeft");function hRt(t){var e=fo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(hRt,"bnShiftRight");function gRt(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(gRt,"lbit");function ARt(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+gRt(this.data[t]);return this.s<0?this.t*this.DB:-1}s(ARt,"bnGetLowestSetBit");function yRt(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(yRt,"cbit");function CRt(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=yRt(this.data[r]^e);return t}s(CRt,"bnBitCount");function xRt(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(xRt,"bnTestBit");function vRt(t,e){var r=xt.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}s(vRt,"bnpChangeBit");function bRt(t){return this.changeBit(t,hce)}s(bRt,"bnSetBit");function ERt(t){return this.changeBit(t,H7e)}s(ERt,"bnClearBit");function IRt(t){return this.changeBit(t,G7e)}s(IRt,"bnFlipBit");function TRt(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}s(TRt,"bnpAddTo");function wRt(t){var e=fo();return this.addTo(t,e),e}s(wRt,"bnAdd");function _Rt(t){var e=fo();return this.subTo(t,e),e}s(_Rt,"bnSubtract");function SRt(t){var e=fo();return this.multiplyTo(t,e),e}s(SRt,"bnMultiply");function RRt(t){var e=fo();return this.divRemTo(t,e,null),e}s(RRt,"bnDivide");function kRt(t){var e=fo();return this.divRemTo(t,null,e),e}s(kRt,"bnRemainder");function BRt(t){var e=fo(),r=fo();return this.divRemTo(t,e,r),new Array(e,r)}s(BRt,"bnDivideAndRemainder");function DRt(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(DRt,"bnpDMultiply");function PRt(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(PRt,"bnpDAddOffset");function FP(){}s(FP,"NullExp");function j7e(t){return t}s(j7e,"nNop");function NRt(t,e,r){t.multiplyTo(e,r)}s(NRt,"nMulTo");function LRt(t,e){t.squareTo(e)}s(LRt,"nSqrTo");FP.prototype.convert=j7e;FP.prototype.revert=j7e;FP.prototype.mulTo=NRt;FP.prototype.sqrTo=LRt;function FRt(t){return this.exp(t,new FP)}s(FRt,"bnPow");function MRt(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}s(MRt,"bnpMultiplyLowerTo");function QRt(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}s(QRt,"bnpMultiplyUpperTo");function q4(t){this.r2=fo(),this.q3=fo(),xt.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(q4,"Barrett");function ORt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fo();return t.copyTo(e),this.reduce(e),e}s(ORt,"barrettConvert");function URt(t){return t}s(URt,"barrettRevert");function qRt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(qRt,"barrettReduce");function WRt(t,e){t.squareTo(e),this.reduce(e)}s(WRt,"barrettSqrTo");function GRt(t,e,r){t.multiplyTo(e,r),this.reduce(r)}s(GRt,"barrettMulTo");q4.prototype.convert=ORt;q4.prototype.revert=URt;q4.prototype.reduce=qRt;q4.prototype.mulTo=GRt;q4.prototype.sqrTo=WRt;function HRt(t,e){var r=t.bitLength(),n,i=Yv(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new j2(e):e.isEven()?o=new q4(e):o=new V2(e);var a=new Array,l=3,c=n-1,u=(1<<n)-1;if(a[1]=o.convert(this),n>1){var d=fo();for(o.sqrTo(a[1],d);l<=u;)a[l]=fo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=fo(),y;for(r=VG(t.data[p])-1;p>=0;){for(r>=c?m=t.data[p]>>r-c&u:(m=(t.data[p]&(1<<r+1)-1)<<c-r,p>0&&(m|=t.data[p-1]>>this.DB+r-c)),l=n;(m&1)==0;)m>>=1,--l;if((r-=l)<0&&(r+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<r)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--r<0&&(r=this.DB-1,--p)}return o.revert(i)}s(HRt,"bnModPow");function jRt(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}s(jRt,"bnGCD");function VRt(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}s(VRt,"bnpModInt");function $Rt(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return xt.ZERO;for(var r=t.clone(),n=this.clone(),i=Yv(1),o=Yv(0),a=Yv(0),l=Yv(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(a,i),o.subTo(l,o)):(n.subTo(r,n),e&&a.subTo(i,a),l.subTo(o,l))}if(n.compareTo(xt.ONE)!=0)return xt.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s($Rt,"bnModInverse");var Km=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],zRt=(1<<26)/Km[Km.length-1];function YRt(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Km[Km.length-1]){for(e=0;e<Km.length;++e)if(r.data[0]==Km[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Km.length;){for(var n=Km[e],i=e+1;i<Km.length&&n<zRt;)n*=Km[i++];for(n=r.modInt(n);e<i;)if(n%Km[e++]==0)return!1}return r.millerRabin(t)}s(YRt,"bnIsProbablePrime");function KRt(t){var e=this.subtract(xt.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=JRt(),o,a=0;a<t;++a){do o=new xt(this.bitLength(),i);while(o.compareTo(xt.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(n,this);if(l.compareTo(xt.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(xt.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(KRt,"bnpMillerRabin");function JRt(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(JRt,"bnGetPrng");xt.prototype.chunkSize=X4t;xt.prototype.toRadix=eRt;xt.prototype.fromRadix=tRt;xt.prototype.fromNumber=rRt;xt.prototype.bitwiseTo=aRt;xt.prototype.changeBit=vRt;xt.prototype.addTo=TRt;xt.prototype.dMultiply=DRt;xt.prototype.dAddOffset=PRt;xt.prototype.multiplyLowerTo=MRt;xt.prototype.multiplyUpperTo=QRt;xt.prototype.modInt=VRt;xt.prototype.millerRabin=KRt;xt.prototype.clone=z4t;xt.prototype.intValue=Y4t;xt.prototype.byteValue=K4t;xt.prototype.shortValue=J4t;xt.prototype.signum=Z4t;xt.prototype.toByteArray=nRt;xt.prototype.equals=iRt;xt.prototype.min=oRt;xt.prototype.max=sRt;xt.prototype.and=cRt;xt.prototype.or=uRt;xt.prototype.xor=dRt;xt.prototype.andNot=fRt;xt.prototype.not=pRt;xt.prototype.shiftLeft=mRt;xt.prototype.shiftRight=hRt;xt.prototype.getLowestSetBit=ARt;xt.prototype.bitCount=CRt;xt.prototype.testBit=xRt;xt.prototype.setBit=bRt;xt.prototype.clearBit=ERt;xt.prototype.flipBit=IRt;xt.prototype.add=wRt;xt.prototype.subtract=_Rt;xt.prototype.multiply=SRt;xt.prototype.divide=RRt;xt.prototype.remainder=kRt;xt.prototype.divideAndRemainder=BRt;xt.prototype.modPow=HRt;xt.prototype.modInverse=$Rt;xt.prototype.pow=FRt;xt.prototype.gcd=jRt;xt.prototype.isProbablePrime=YRt});var W4=G((atn,K7e)=>{f();var Xg=di();$g();uo();var z7e=K7e.exports=Xg.sha1=Xg.sha1||{};Xg.md.sha1=Xg.md.algorithms.sha1=z7e;z7e.create=function(){Y7e||XRt();var t=null,e=Xg.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Xg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Xg.util.encodeUtf8(i));var a=i.length;n.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=a[1],a[1]=a[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),$7e(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Xg.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,a=o&n.blockLength-1;i.putBytes(gce.substr(0,n.blockLength-a));for(var l,c,u=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};$7e(p,r,i);var m=Xg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},n};var gce=null,Y7e=!1;function XRt(){gce="\x80",gce+=Xg.util.fillString("\0",64),Y7e=!0}s(XRt,"_init");function $7e(t,e,r){for(var n,i,o,a,l,c,u,d,p=r.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,u=l^o&(a^l),n=(i<<5|i>>>27)+u+c+1518500249+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=l^o&(a^l),n=(i<<5|i>>>27)+u+c+1518500249+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+1859775393+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+1859775393+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o&a|l&(o^a),n=(i<<5|i>>>27)+u+c+2400959708+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,u=o^a^l,n=(i<<5|i>>>27)+u+c+3395469782+n,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s($7e,"_update")});var Ace=G((utn,X7e)=>{f();var Zg=di();uo();mp();W4();var J7e=X7e.exports=Zg.pkcs1=Zg.pkcs1||{};J7e.encode_rsa_oaep=function(t,e,r){var n,i,o,a;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md)),o?o.start():o=Zg.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=Zg.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=$G(i,l-o.digestLength-1,a),v=Zg.util.xorBytes(g,y,g.length),b=$G(v,o.digestLength,a),E=Zg.util.xorBytes(i,b,i.length);return"\0"+E+v};J7e.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=Zg.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=$G(d,i.digestLength,o),m=Zg.util.xorBytes(u,p,u.length),h=$G(m,a-i.digestLength-1,o),g=Zg.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var B=g.charCodeAt(k),N=B&1^1,q=E?65534:0;v|=B&q,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function $G(t,e,r){r||(r=Zg.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+a),n+=r.digest().getBytes()}return n.substring(0,e)}s($G,"rsa_mgf1")});var Cce=G((ptn,yce)=>{f();var Kv=di();uo();MP();mp();(function(){if(Kv.prime){yce.exports=Kv.prime;return}var t=yce.exports=Kv.prime=Kv.prime||{},e=Kv.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||Kv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(r[g++%8],0)}while(v<0||+new Date-E<v);Kv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return Kv.util.estimateCores(function(B,N){B&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var B=[],N=0;N<v;++N)B[N]=new Worker(_);for(var q=v,N=0;N<v;++N)B[N].addEventListener("message",me);var te=!1;function me(oe){if(!te){--q;var H=oe.data;if(H.found){for(var O=0;O<B.length;++O)B[O].terminate();return te=!0,g(null,new e(H.prime,16))}y.bitLength()>p&&(y=u(p,m));var le=y.toString(16);oe.target.postMessage({hex:le,workLoad:b}),y.dAddOffset(E,0)}}s(me,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(n).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var QP=G((gtn,oLe)=>{f();var en=di();Ym();MP();zv();Ace();Cce();mp();uo();typeof eo>"u"&&(eo=en.jsbn.BigInteger);var eo,xce=en.util.isNodejs?require("crypto"):null,qe=en.asn1,gp=en.util;en.pki=en.pki||{};oLe.exports=en.pki.rsa=en.rsa=en.rsa||{};var Zn=en.pki,ZRt=[6,4,2,4,2,4,6,2],ekt={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},tkt={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rkt={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},nkt=en.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},ikt={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},okt=s(function(t){var e;if(t.algorithm in Zn.oids)e=Zn.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),o=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,n)),o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),qe.toDer(i).getBytes()},"emsaPkcs1v15encode"),nLe=s(function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(eo.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(eo.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new eo(en.util.bytesToHex(en.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(eo.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(n.modInverse(e.n)).mod(e.n),a},"_modPow");Zn.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=iLe(t,e,r)):(i=en.util.createBuffer(),i.putBytes(t));for(var a=new eo(i.toHex(),16),l=nLe(a,e,n),c=l.toString(16),u=en.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(en.util.hexToBytes(c)),u.getBytes()};Zn.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new eo(en.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=nLe(a,e,r),c=l.toString(16),u=en.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(en.util.hexToBytes(c)),n!==!1?zG(u.getBytes(),e,r):u.getBytes()};Zn.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||en.random,i={nextBytes:s(function(l){for(var c=n.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=r.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new eo(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Zn.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new eo(null);r.fromInt(30);for(var n=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new eo(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(eo.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(akt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(ZRt[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(eo.ONE),t.q1=t.q.subtract(eo.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(eo.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Zn.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zn.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Zn.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!en.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(Z7e("generateKeyPair"))return xce.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return n(l);n(null,{privateKey:Zn.privateKeyFromPem(u),publicKey:Zn.publicKeyFromPem(c)})});if(eLe("generateKey")&&eLe("exportKey"))return gp.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:rLe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return gp.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var c=Zn.privateKeyFromAsn1(qe.fromDer(en.util.createBuffer(l)));n(null,{privateKey:c,publicKey:Zn.setRsaPublicKey(c.n,c.e)})}});if(tLe("generateKey")&&tLe("exportKey")){var i=gp.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:rLe(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=gp.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Zn.privateKeyFromAsn1(qe.fromDer(en.util.createBuffer(p)));n(null,{privateKey:m,publicKey:Zn.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(Z7e("generateKeyPairSync")){var o=xce.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Zn.privateKeyFromPem(o.privateKey),publicKey:Zn.publicKeyFromPem(o.publicKey)}}}var a=Zn.rsa.createKeyPairGenerationState(t,e,r);if(!n)return Zn.rsa.stepKeyPairGenerationState(a,0),a.keys;skt(a,r,n)};Zn.setRsaPublicKey=Zn.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return iLe(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return en.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(n,r,!0);return Zn.rsa.encrypt(a,r,!0)},r.verify=function(n,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=zG(u,r,!0);var d=qe.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!qe.validate(d,ikt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=qe.derToOid(p.algorithmIdentifier);if(!(g===en.oids.md2||g===en.oids.md5||g===en.oids.sha1||g===en.oids.sha224||g===en.oids.sha256||g===en.oids.sha384||g===en.oids.sha512||g===en.oids["sha512-224"]||g===en.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===en.oids.md2||g===en.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=zG(u,r,!0),c===u},"verify")});var l=Zn.rsa.decrypt(i,r,!0,!1);return o.verify(n,l,r.n.bitLength())},r};Zn.setRsaPrivateKey=Zn.rsa.setPrivateKey=function(t,e,r,n,i,o,a,l){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Zn.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:zG};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return en.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:okt},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Zn.rsa.encrypt(m,c,p)},c};Zn.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zn.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};Zn.privateKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,ekt,e,r)&&(t=qe.fromDer(en.util.createBuffer(e.privateKey))),e={},r=[],!qe.validate(t,tkt,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,a,l,c,u,d,p;return i=en.util.createBuffer(e.privateKeyModulus).toHex(),o=en.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=en.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=en.util.createBuffer(e.privateKeyPrime1).toHex(),c=en.util.createBuffer(e.privateKeyPrime2).toHex(),u=en.util.createBuffer(e.privateKeyExponent1).toHex(),d=en.util.createBuffer(e.privateKeyExponent2).toHex(),p=en.util.createBuffer(e.privateKeyCoefficient).toHex(),Zn.setRsaPrivateKey(new eo(i,16),new eo(o,16),new eo(a,16),new eo(l,16),new eo(c,16),new eo(u,16),new eo(d,16),new eo(p,16))};Zn.privateKeyToAsn1=Zn.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.qInv))])};Zn.publicKeyFromAsn1=function(t){var e={},r=[];if(qe.validate(t,nkt,e,r)){var n=qe.derToOid(e.publicKeyOid);if(n!==Zn.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!qe.validate(t,rkt,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=en.util.createBuffer(e.publicKeyModulus).toHex(),a=en.util.createBuffer(e.publicKeyExponent).toHex();return Zn.setRsaPublicKey(new eo(o,16),new eo(a,16))};Zn.publicKeyToAsn1=Zn.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Zn.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[Zn.publicKeyToRSAPublicKey(t)])])};Zn.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,eA(t.e))])};function iLe(t,e,r){var n=en.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var a=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var c=0;c<a;++c)n.putByte(l)}else for(;a>0;){for(var u=0,d=en.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:n.putByte(l);a=u}return n.putByte(0),n.putBytes(t),n}s(iLe,"_encodePkcs1_v1_5");function zG(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=en.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(zG,"_decodePkcs1_v1_5");function skt(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return r(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){en.prime.generateProbablePrime(l,n,c)}s(o,"getPrime");function a(l,c){if(l)return r(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)!==0){t.p=null,i();return}if(t.q.subtract(eo.ONE).gcd(t.e).compareTo(eo.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(eo.ONE),t.q1=t.q.subtract(eo.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(eo.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Zn.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Zn.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}s(a,"finish")}s(skt,"_generateKeyPair");function eA(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=en.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)===0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}s(eA,"_bnToBytes");function akt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(akt,"_getMillerRabinTests");function Z7e(t){return en.util.isNodejs&&typeof xce[t]=="function"}s(Z7e,"_detectNodeCrypto");function eLe(t){return typeof gp.globalScope<"u"&&typeof gp.globalScope.crypto=="object"&&typeof gp.globalScope.crypto.subtle=="object"&&typeof gp.globalScope.crypto.subtle[t]=="function"}s(eLe,"_detectSubtleCrypto");function tLe(t){return typeof gp.globalScope<"u"&&typeof gp.globalScope.msCrypto=="object"&&typeof gp.globalScope.msCrypto.subtle=="object"&&typeof gp.globalScope.msCrypto.subtle[t]=="function"}s(tLe,"_detectSubtleMsCrypto");function rLe(t){for(var e=en.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s(rLe,"_intToUint8Array")});var vce=G((Ctn,uLe)=>{f();var ur=di();$v();Ym();LP();$g();zv();GG();H2();mp();fce();QP();uo();typeof sLe>"u"&&(sLe=ur.jsbn.BigInteger);var sLe,at=ur.asn1,ai=ur.pki=ur.pki||{};uLe.exports=ai.pbe=ur.pbe=ur.pbe||{};var $2=ai.oids,lkt={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},ckt={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},ukt={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};ai.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=ur.random.getBytesSync(r.saltSize),i=r.count,o=at.integerToDer(i),a,l,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,d,p;switch(r.algorithm){case"aes128":a=16,u=16,d=$2["aes128-CBC"],p=ur.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=$2["aes192-CBC"],p=ur.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=$2["aes256-CBC"],p=ur.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=$2.desCBC,p=ur.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),g=cLe(h),y=ur.pkcs5.pbkdf2(e,n,i,a,g),v=ur.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=dkt(n,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer($2.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer($2.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(r.algorithm==="3des"){a=24;var _=new ur.util.ByteBuffer(n),y=ai.pbe.generatePkcs12Key(e,_,1,i,a),v=ai.pbe.generatePkcs12Key(e,_,2,i,a),b=ur.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer($2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,n),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=r.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};ai.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!at.validate(t,lkt,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(n.encryptionOid),l=ai.pbe.getCipher(a,n.encryptionParams,e),c=ur.util.createBuffer(n.encryptedData);return l.update(c),l.finish()&&(r=at.fromDer(l.output)),r};ai.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return ur.pem.encode(r,{maxline:e})};ai.encryptedPrivateKeyFromPem=function(t){var e=ur.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};ai.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=ai.wrapRsaPrivateKey(ai.privateKeyToAsn1(t));return n=ai.encryptPrivateKeyInfo(n,e,r),ai.encryptedPrivateKeyToPem(n)}var i,o,a,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",a=16,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=ur.random.getBytesSync(16),l=ur.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=ur.random.getBytesSync(8),l=ur.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=ur.random.getBytesSync(8),l=ur.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=ur.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(ai.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:ur.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return ur.pem.encode(p)};ai.decryptRsaPrivateKey=function(t,e){var r=null,n=ur.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,a;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,a=ur.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=ur.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=ur.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=ur.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=ur.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return ur.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return ur.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return ur.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=ur.util.hexToBytes(n.dekInfo.parameters),c=ur.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(ur.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=ai.decryptPrivateKeyInfo(at.fromDer(r),e):r=at.fromDer(r),r!==null&&(r=ai.privateKeyFromAsn1(r)),r};ai.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in ur.md))throw new Error('"sha1" hash algorithm unavailable.');o=ur.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new ur.util.ByteBuffer,p=new ur.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new ur.util.ByteBuffer;g.fillWithByte(r,u);var y=u*Math.ceil(h/u),v=new ur.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new ur.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),B=1;B<=k;B++){var N=new ur.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var q=0;q<n;q++)o.start(),o.update(N.getBytes()),N=o.digest();var te=new ur.util.ByteBuffer;for(l=0;l<u;l++)te.putByte(N.at(l%c));var me=Math.ceil(h/u)+Math.ceil(m/u),oe=new ur.util.ByteBuffer;for(a=0;a<me;a++){var H=new ur.util.ByteBuffer(_.getBytes(u)),O=511;for(l=te.length()-1;l>=0;l--)O=O>>8,O+=te.at(l)+H.at(l),H.setAt(l,O&255);oe.putBuffer(H)}_=oe,d.putBuffer(N)}return d.truncate(d.length()-i),d};ai.pbe.getCipher=function(t,e,r){switch(t){case ai.oids.pkcs5PBES2:return ai.pbe.getCipherForPBES2(t,e,r);case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:return ai.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};ai.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!at.validate(e,ckt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(n.kdfOid),t!==ai.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(n.encOid),t!==ai.oids["aes128-CBC"]&&t!==ai.oids["aes192-CBC"]&&t!==ai.oids["aes256-CBC"]&&t!==ai.oids["des-EDE3-CBC"]&&t!==ai.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=n.kdfSalt,l=ur.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(ai.oids[t]){case"aes128-CBC":c=16,u=ur.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=ur.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=ur.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=ur.des.createDecryptionCipher;break;case"desCBC":c=8,u=ur.des.createDecryptionCipher;break}var d=lLe(n.prfOid),p=ur.pkcs5.pbkdf2(r,a,l,c,d),m=n.encIv,h=u(p);return h.start(m),h};ai.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!at.validate(e,ukt,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=ur.util.createBuffer(n.salt),l=ur.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case ai.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=ur.des.startDecrypting;break;case ai.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=ur.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=lLe(n.prfOid),m=ai.pbe.generatePkcs12Key(r,a,1,l,c,p);p.start();var h=ai.pbe.generatePkcs12Key(r,a,2,l,u,p);return d(m,h)};ai.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in ur.md))throw new Error('"md5" hash algorithm unavailable.');n=ur.md.md5.create()}e===null&&(e="");for(var i=[aLe(n,t+e)],o=16,a=1;o<r;++a,o+=16)i.push(aLe(n,i[a-1]+t+e));return i.join("").substr(0,r)};function aLe(t,e){return t.start().update(e).digest().getBytes()}s(aLe,"hash");function lLe(t){var e;if(!t)e="hmacWithSHA1";else if(e=ai.oids[at.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return cLe(e)}s(lLe,"prfOidToMessageDigest");function cLe(t){var e=ur.md;switch(t){case"hmacWithSHA224":e=ur.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(cLe,"prfAlgorithmToMessageDigest");function dkt(t,e,r,n){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,ur.util.hexToBytes(r.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(ai.oids[n]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(dkt,"createPbkdf2Params")});var bce=G((btn,pLe)=>{f();var G4=di();Ym();uo();var or=G4.asn1,H4=pLe.exports=G4.pkcs7asn1=G4.pkcs7asn1||{};G4.pkcs7=G4.pkcs7||{};G4.pkcs7.asn1=H4;var dLe={name:"ContentInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};H4.contentInfoValidator=dLe;var fLe={name:"EncryptedContentInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};H4.envelopedDataValidator={name:"EnvelopedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(fLe)};H4.encryptedDataValidator={name:"EncryptedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"}].concat(fLe)};var fkt={name:"SignerInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:or.Class.UNIVERSAL,type:or.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:or.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};H4.signedDataValidator={name:"SignedData",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},dLe,{name:"SignedData.Certificates",tagClass:or.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:or.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:or.Class.UNIVERSAL,type:or.Type.SET,capture:"signerInfos",optional:!0,value:[fkt]}]};H4.recipientInfoValidator={name:"RecipientInfo",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:or.Class.UNIVERSAL,type:or.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:or.Class.UNIVERSAL,type:or.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:or.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:or.Class.UNIVERSAL,type:or.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Ece=G((Itn,mLe)=>{f();var z2=di();uo();z2.mgf=z2.mgf||{};var pkt=mLe.exports=z2.mgf.mgf1=z2.mgf1=z2.mgf1||{};pkt.create=function(t){var e={generate:s(function(r,n){for(var i=new z2.util.ByteBuffer,o=Math.ceil(n/t.digestLength),a=0;a<o;a++){var l=new z2.util.ByteBuffer;l.putInt32(a),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()},"generate")};return e}});var gLe=G((_tn,hLe)=>{f();var YG=di();Ece();hLe.exports=YG.mgf=YG.mgf||{};YG.mgf.mgf1=YG.mgf1});var KG=G((Rtn,ALe)=>{f();var Y2=di();mp();uo();var mkt=ALe.exports=Y2.pss=Y2.pss||{};mkt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=Y2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||Y2.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<n+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new Y2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new Y2.util.ByteBuffer;b.fillWithByte(0,m-o-n-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-n-1,k=r.generate(v,_),B="";for(d=0;d<_;d++)B+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return B=String.fromCharCode(B.charCodeAt(0)&~N)+B.substr(1),B+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<n+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-n-1,y=u.substr(0,g),v=u.substr(g,n),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=r.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-n-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var B=_.substr(-o),N=new Y2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(B),e.start(),e.update(N.getBytes());var q=e.digest().getBytes();return v===q},l}});var ZG=G((Btn,bLe)=>{f();var tn=di();$v();Ym();LP();$g();gLe();zv();H2();KG();QP();uo();var V=tn.asn1,Wt=bLe.exports=tn.pki=tn.pki||{},to=Wt.oids,pa={};pa.CN=to.commonName;pa.commonName="CN";pa.C=to.countryName;pa.countryName="C";pa.L=to.localityName;pa.localityName="L";pa.ST=to.stateOrProvinceName;pa.stateOrProvinceName="ST";pa.O=to.organizationName;pa.organizationName="O";pa.OU=to.organizationalUnitName;pa.organizationalUnitName="OU";pa.E=to.emailAddress;pa.emailAddress="E";var CLe=tn.pki.rsa.publicKeyValidator,hkt={name:"Certificate",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:V.Class.UNIVERSAL,type:V.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:V.Class.UNIVERSAL,type:V.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:V.Class.UNIVERSAL,type:V.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:V.Class.UNIVERSAL,type:V.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},CLe,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:V.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:V.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:V.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},gkt={name:"rsapss",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:V.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:V.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:V.Class.UNIVERSAL,type:V.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:V.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:V.Class.UNIVERSAL,type:V.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Akt={name:"CertificationRequestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},CLe,{name:"CertificationRequestInfo.attributes",tagClass:V.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:V.Class.UNIVERSAL,type:V.Type.SET,constructed:!0}]}]}]},ykt={name:"CertificationRequest",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Akt,{name:"CertificationRequest.signatureAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,o,a=0;a<t.value.length;++a){n=t.value[a];for(var l=0;l<n.value.length;++l)o={},i=n.value[l],o.type=V.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in to&&(o.name=to[o.type],o.name in pa&&(o.shortName=pa[o.name])),e&&(e.update(o.type),e.update(o.value)),r.push(o)}return r};Wt.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=V.derToOid(n.value[0].value),o=n.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in to&&(l.name=to[l.type],l.name in pa&&(l.shortName=pa[l.name])),l.type===to.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function Jv(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}s(Jv,"_getAttribute");var JG=s(function(t,e,r){var n={};if(t!==to["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:to.sha1},mgf:{algorithmOid:to.mgf1,hash:{algorithmOid:to.sha1}},saltLength:20});var i={},o=[];if(!V.validate(e,gkt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=V.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=V.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=V.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},"_readSignatureParameters"),XG=s(function(t){switch(to[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return tn.md.sha1.create();case"md5WithRSAEncryption":return tn.md.md5.create();case"sha256WithRSAEncryption":return tn.md.sha256.create();case"sha384WithRSAEncryption":return tn.md.sha384.create();case"sha512WithRSAEncryption":return tn.md.sha512.create();case"RSASSA-PSS":return tn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),xLe=s(function(t){var e=t.certificate,r;switch(e.signatureOid){case to.sha1WithRSAEncryption:case to.sha1WithRSASignature:break;case to["RSASSA-PSS"]:var n,i;if(n=to[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||tn.md[n]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=n,o}if(i=to[e.signatureParameters.mgf.algorithmOid],i===void 0||tn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=tn.mgf[i].create(tn.md[n].create()),n=to[e.signatureParameters.hash.algorithmOid],n===void 0||tn.md[n]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=n,o}r=tn.pss.create(tn.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)},"_verifySignature");Wt.certificateFromPem=function(t,e,r){var n=tn.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=V.fromDer(n.body,r);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:V.toDer(Wt.certificateToAsn1(t)).getBytes()};return tn.pem.encode(r,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=tn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=V.fromDer(e.body);return Wt.publicKeyFromAsn1(n)};Wt.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:V.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return tn.pem.encode(r,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:V.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return tn.pem.encode(r,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||tn.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=V.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=V.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,r){var n=tn.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=V.fromDer(n.body,r);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:V.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return tn.pem.encode(r,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return Jv(t.issuer,e)},t.issuer.addField=function(e){Ap([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return Jv(t.subject,e)},t.subject.addField=function(e){Ap([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){Ap(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){Ap(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)vLe(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||tn.md.sha1.create();var n=to[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=Wt.getTBSCertificate(t);var o=V.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=n.attributes,o}var a=e.md;if(a===null){a=XG({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=V.toDer(l);a.update(c.getBytes())}return a!==null&&(r=xLe({certificate:t,md:a,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var o,a,l=0;r&&l<n.attributes.length;++l)o=n.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=to.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return tn.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var r={},n=[];if(!V.validate(t,hkt,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var o=V.derToOid(r.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=tn.util.createBuffer(r.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=tn.asn1.derToOid(r.certSignatureOid),a.signatureParameters=JG(a.signatureOid,r.certSignatureParams,!0),a.siginfo.algorithmOid=tn.asn1.derToOid(r.certinfoSignatureOid),a.siginfo.parameters=JG(a.siginfo.algorithmOid,r.certinfoSignatureParams,!1),a.signature=r.certSignature;var c=[];if(r.certValidity1UTCTime!==void 0&&c.push(V.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&c.push(V.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&c.push(V.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&c.push(V.generalizedTimeToDate(r.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=r.tbsCertificate,e){a.md=XG({signatureOid:a.signatureOid,type:"certificate"});var u=V.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=tn.md.sha1.create(),p=V.toDer(r.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return Jv(a.issuer,g)},a.issuer.addField=function(g){Ap([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(a.issuer.uniqueId=r.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=tn.md.sha1.create(),h=V.toDer(r.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return Jv(a.subject,g)},a.subject.addField=function(g){Ap([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(a.subject.uniqueId=r.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),r.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(r.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(n.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=V.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===V.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in to){if(e.name=to[e.id],e.name==="keyUsage"){var r=V.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)===128,e.nonRepudiation=(n&64)===64,e.keyEncipherment=(n&32)===32,e.dataEncipherment=(n&16)===16,e.keyAgreement=(n&8)===8,e.keyCertSign=(n&4)===4,e.cRLSign=(n&2)===2,e.encipherOnly=(n&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var r=V.fromDer(e.value);r.value.length>0&&r.value[0].type===V.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;r.value.length>0&&r.value[0].type===V.Type.INTEGER?o=r.value[0].value:r.value.length>1&&(o=r.value[1].value),o!==null&&(e.pathLenConstraint=V.derToInteger(o))}else if(e.name==="extKeyUsage")for(var r=V.fromDer(e.value),a=0;a<r.value.length;++a){var l=V.derToOid(r.value[a].value);l in to?e[to[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=V.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)===128,e.server=(n&64)===64,e.email=(n&32)===32,e.objsign=(n&16)===16,e.reserved=(n&8)===8,e.sslCA=(n&4)===4,e.emailCA=(n&2)===2,e.objCA=(n&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,r=V.fromDer(e.value),u=0;u<r.value.length;++u){c=r.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=tn.util.bytesToIP(c.value);break;case 8:d.oid=V.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=V.fromDer(e.value);e.subjectKeyIdentifier=tn.util.bytesToHex(r.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!V.validate(t,ykt,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var o=V.derToOid(r.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,a.signatureOid=tn.asn1.derToOid(r.csrSignatureOid),a.signatureParameters=JG(a.signatureOid,r.csrSignatureParams,!0),a.siginfo.algorithmOid=tn.asn1.derToOid(r.csrSignatureOid),a.siginfo.parameters=JG(a.siginfo.algorithmOid,r.csrSignatureParams,!1),a.signature=r.csrSignature,a.certificationRequestInfo=r.certificationRequestInfo,e){a.md=XG({signatureOid:a.signatureOid,type:"certification request"});var l=V.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=tn.md.sha1.create();return a.subject.getField=function(u){return Jv(a.subject,u)},a.subject.addField=function(u){Ap([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(r.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(r.subjectPublicKeyInfo),a.getAttribute=function(u){return Jv(a,u)},a.addAttribute=function(u){Ap([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return Jv(t.subject,e)},t.subject.addField=function(e){Ap([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return Jv(t,e)},t.addAttribute=function(e){Ap([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){Ap(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){Ap(e),t.attributes=e},t.sign=function(e,r){t.md=r||tn.md.sha1.create();var n=to[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=V.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=XG({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=V.toDer(n);r.update(i.getBytes())}return r!==null&&(e=xLe({certificate:t,md:r,signature:t.signature})),e},t};function j4(t){for(var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,o=0;o<i.length;++o){r=i[o];var a=r.value,l=V.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===V.Type.UTF8&&(a=tn.util.encodeUtf8(a))),n=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(r.type).getBytes()),V.create(V.Class.UNIVERSAL,l,!1,a)])]),e.value.push(n)}return e}s(j4,"_dnToAsn1");function Ap(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in pa&&(e.name=Wt.oids[pa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName>"u"&&e.name&&e.name in pa&&(e.shortName=pa[e.name]),e.type===to.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=V.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(vLe(e.extensions[i])))}if(typeof e.value>"u"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}s(Ap,"_fillMissingFields");function vLe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var n=0,i=0,o=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(o|=128,n=7);var a=String.fromCharCode(n);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(V.create(V.Class.UNIVERSAL,V.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in to?l.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(to[c]).getBytes())):c.indexOf(".")!==-1&&l.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var a=String.fromCharCode(n);i!==0&&(a+=String.fromCharCode(i)),t.value=V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=tn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=V.oidToDer(V.oidToDer(u.oid)):a=V.oidToDer(a));t.value.value.push(V.create(V.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=V.create(V.Class.UNIVERSAL,V.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[V.create(V.Class.CONTEXT_SPECIFIC,4,!0,[j4(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=tn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),v=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=tn.util.bytesFromIP(u.ip),a===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else u.type===8&&(u.oid?a=V.oidToDer(V.oidToDer(u.oid)):a=V.oidToDer(a));v.value.push(V.create(V.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}s(vLe,"_fillMissingExtensionFields");function Ice(t,e){switch(t){case to["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.hash.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.mgf.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(e.mgf.hash.algorithmOid).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(e.saltLength).getBytes())])),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,r);default:return V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")}}s(Ice,"_signatureParametersToAsn1");function Ckt(t){var e=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],o=i.value,a=V.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===V.Type.UTF8&&(o=tn.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(i.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[V.create(V.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(Ckt,"_CRIAttributesToAsn1");var xkt=new Date("1950-01-01T00:00:00Z"),vkt=new Date("2050-01-01T00:00:00Z");function yLe(t){return t>=xkt&&t<vkt?V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(t)):V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(t))}s(yLe,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=yLe(t.validity.notBefore),r=yLe(t.validity.notAfter),n=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes())]),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,tn.util.hexToBytes(t.serialNumber)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.siginfo.algorithmOid).getBytes()),Ice(t.siginfo.algorithmOid,t.siginfo.parameters)]),j4(t.issuer),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,r]),j4(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(V.create(V.Class.CONTEXT_SPECIFIC,2,!0,[V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),n};Wt.getCertificationRequestInfo=function(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),j4(t.subject),Wt.publicKeyToAsn1(t.publicKey),Ckt(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return j4(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureOid).getBytes()),Ice(t.signatureOid,t.signatureParameters)]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=V.create(V.Class.CONTEXT_SPECIFIC,3,!0,[]),r=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(Wt.certificateExtensionToAsn1(t[n]));return e};Wt.certificateExtensionToAsn1=function(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.id).getBytes())),t.critical&&e.value.push(V.create(V.Class.UNIVERSAL,V.Type.BOOLEAN,!1,"\xFF"));var r=t.value;return typeof t.value!="string"&&(r=V.toDer(r).getBytes()),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,r)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[e,V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureOid).getBytes()),Ice(t.signatureOid,t.signatureParameters)]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=r(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=tn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];tn.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=tn.pki.certificateFromPem(a));var l=r(a.subject);if(!l)return!1;tn.util.isArray(l)||(l=[l]);for(var c=V.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=V.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!tn.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=tn.pki.certificateFromPem(a)),n(a.subject),!e.hasCertificate(a))return null;var c=r(a.subject);if(!tn.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=V.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=V.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function r(a){return n(a),e.certs[a.hash]||null}s(r,"getBySubject");function n(a){if(!a.hash){var l=tn.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(j4(a),l),a.hash=l.digest().toHex()}}if(s(n,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;tn.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=r.verify?r.verify(_,l,n):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!tn.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var wce=G((Ntn,ILe)=>{f();var ns=di();Ym();Q4();zv();bce();vce();mp();QP();W4();uo();ZG();var Ie=ns.asn1,_i=ns.pki,UP=ILe.exports=ns.pkcs12=ns.pkcs12||{},ELe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},bkt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},ELe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Ekt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Ikt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},Tkt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function OP(t,e,r,n){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}s(OP,"_getBagsByAttribute");UP.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!Ie.validate(t,bkt,n,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:n.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=ns.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=OP(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=OP(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=OP(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return OP(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return OP(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(n.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=n.version.charCodeAt(0),o}if(Ie.derToOid(n.contentType)!==_i.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(n.contentType),o}var l=n.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Tce(l),n.mac){var c=null,u=0,d=Ie.derToOid(n.macAlgorithm);switch(d){case _i.oids.sha1:c=ns.md.sha1.create(),u=20;break;case _i.oids.sha256:c=ns.md.sha256.create(),u=32;break;case _i.oids.sha384:c=ns.md.sha384.create(),u=48;break;case _i.oids.sha512:c=ns.md.sha512.create(),u=64;break;case _i.oids.md5:c=ns.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new ns.util.ByteBuffer(n.macSalt),m="macIterations"in n?parseInt(ns.util.bytesToHex(n.macIterations),16):1,h=UP.generateKey(r,p,3,m,u,c),g=ns.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return wkt(a,l.value,e,r),a};function Tce(t){if(t.composed||t.constructed){for(var e=ns.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(Tce,"_decodePkcs7Data");function wkt(t,e,r,n){if(e=Ie.fromDer(e,r),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,ELe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case _i.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Tce(p).value;break;case _i.oids.encryptedData:d=_kt(p,n),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=Skt(d,r,n),t.safeContents.push(u)}}s(wkt,"_decodeAuthenticatedSafe");function _kt(t,e){var r={},n=[];if(!Ie.validate(t,ns.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var o=Ie.derToOid(r.contentType);if(o!==_i.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(r.encAlgorithm);var a=_i.pbe.getCipher(o,r.encParameter,e),l=Tce(r.encryptedContentAsn1),c=ns.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(_kt,"_decryptSafeContents");function Skt(t,e,r){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,Ekt,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:Rkt(a.bagAttributes)};n.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case _i.oids.pkcs8ShroudedKeyBag:if(m=_i.decryptPrivateKeyInfo(m,r),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case _i.oids.keyBag:try{u.key=_i.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case _i.oids.certBag:d=Tkt,p=s(function(){if(Ie.derToOid(a.certId)!==_i.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=_i.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return n}s(Skt,"_decodeSafeContents");function Rkt(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!Ie.validate(t[r],Ikt,n,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(n.oid);if(_i.oids[a]!==void 0){e[_i.oids[a]]=[];for(var l=0;l<n.values.length;++l)e[_i.oids[a]].push(n.values[l].value)}}return e}s(Rkt,"_decodeBagAttributes");UP.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,o;if(i!==null)i=ns.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var a=ns.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=_i.certificateFromPem(a));var l=ns.md.sha1.create();l.update(Ie.toDer(_i.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=ns.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,n.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(ns.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=_i.certificateFromPem(e));var h=m===0?o:void 0,g=_i.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=_i.wrapRsaPrivateKey(_i.privateKeyToAsn1(t));r===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_i.encryptPrivateKeyInfo(_,r,n)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),B=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(B)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),q;if(n.useMac){var l=ns.md.sha1.create(),te=new ns.util.ByteBuffer(ns.random.getBytes(n.saltSize)),me=n.count,t=UP.generateKey(r,te,3,me,20),oe=ns.hmac.create();oe.start(l,t),oe.update(Ie.toDer(N).getBytes());var H=oe.getMac();q=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,H.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,te.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(me).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),q])};UP.generateKey=ns.pbe.generatePkcs12Key});var Sce=G((Mtn,TLe)=>{f();var Xv=di();Ym();zv();vce();H2();GG();wce();KG();QP();uo();ZG();var _ce=Xv.asn1,V4=TLe.exports=Xv.pki=Xv.pki||{};V4.pemToDer=function(t){var e=Xv.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Xv.util.createBuffer(e.body)};V4.privateKeyFromPem=function(t){var e=Xv.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=_ce.fromDer(e.body);return V4.privateKeyFromAsn1(n)};V4.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:_ce.toDer(V4.privateKeyToAsn1(t)).getBytes()};return Xv.pem.encode(r,{maxline:e})};V4.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:_ce.toDer(t).getBytes()};return Xv.pem.encode(r,{maxline:e})}});var Nce=G((Otn,PLe)=>{f();var vt=di();Ym();Q4();OG();H2();Sce();mp();W4();uo();var nH=s(function(t,e,r,n){var i=vt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=vt.util.createBuffer(),d=vt.hmac.create();r=e+r;var p=Math.ceil(n/16),m=Math.ceil(n/20);d.start("MD5",l);var h=vt.util.createBuffer();u.putBytes(r);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),h.putBuffer(d.digest());d.start("SHA1",c);var y=vt.util.createBuffer();u.clear(),u.putBytes(r);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+r),y.putBuffer(d.digest());return i.putBytes(vt.util.xorBytes(h.getBytes(),y.getBytes(),n)),i},"prf_TLS1"),kkt=s(function(t,e,r){var n=vt.hmac.create();n.start("SHA1",t);var i=vt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},"hmac_sha1"),Bkt=s(function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"deflate"),Dkt=s(function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=vt.util.createBuffer(i),e.length=i.length,n=!0}catch{}return n},"inflate"),O0=s(function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return vt.util.createBuffer(t.getBytes(r))},"readVector"),yp=s(function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var r in z.CipherSuites){var n=z.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};z.handleUnexpected=function(t,e){var r=!t.open&&t.entity===z.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===z.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(n={version:{major:o.getByte(),minor:o.getByte()},random:vt.util.createBuffer(o.getBytes(32)),session_id:O0(o,1),extensions:[]},i?(n.cipher_suite=o.getBytes(2),n.compression_method=o.getByte()):(n.cipher_suites=O0(o,2),n.compression_methods=O0(o,1)),a=r-(a-o.length()),a>0){for(var l=O0(o,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:O0(l,2)});if(!i)for(var c=0;c<n.extensions.length;++c){var u=n.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=O0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(O0(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(n.cipher_suite);else for(var m=vt.util.createBuffer(n.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:vt.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return n};z.createSecurityParameters=function(t,e){var r=t.entity===z.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,o=r?n:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,r){var n=z.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=SLe,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=Nkt,t.session.resuming=!1,z.createSecurityParameters(t,n)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,r){var n=z.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==n.version.major||o.version.minor>n.version.minor)&&(o=null,i="")),i.length===0&&(i=vt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=n.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=Dce,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?qkt:Bce,t.session.resuming=!1,z.createSecurityParameters(t,n)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:O0(n,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=O0(i.certificate_list,3),a=vt.asn1.fromDer(o),o=vt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?wLe:Bce:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?wLe:Bce)),t.process()};z.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=Lkt,t.process()};z.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:O0(n,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=vt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=vt.random.getBytes(48)}t.expect=Dce,t.session.clientCertificate!==null&&(t.expect=Wkt),t.process()};z.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:O0(n,1),certificate_authorities:O0(n,2)};t.session.certificateRequest=i,t.expect=Fkt,t.process()};z.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o={signature:O0(n,2).getBytes()},a=vt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=Dce,t.process()};z.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,n.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!vt.util.isArray(o)?(o.message&&(n.message=o.message),o.alert&&(n.alert.description=o.alert)):typeof o=="number"&&(n.alert.description=o)),t.error(t,n)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=Okt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=SLe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=t.entity===z.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?Mkt:Gkt,t.process()};z.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var o=e.fragment.getBytes();n=vt.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=nH;if(n=d(c.master_secret,l,n.getBytes(),u),n.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?Qkt:Hkt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:n}),t.process()};z.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=vt.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var o=r.bytes(i+4);r.read+=4,n in rH[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:vt.md.md5.create(),sha1:vt.md.sha1.create()}),n!==z.HandshakeType.hello_request&&n!==z.HandshakeType.certificate_verify&&n!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),rH[t.entity][t.expect][n](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),o=r.getBytes(i);if(n===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(n===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,vt.util.createBuffer(o))}t.process()};var Pkt=0,Nkt=1,wLe=2,Lkt=3,Fkt=4,SLe=5,Mkt=6,Qkt=7,Okt=8,Ukt=0,qkt=1,Bce=2,Wkt=3,Dce=4,Gkt=5,Hkt=6,$=z.handleUnexpected,RLe=z.handleChangeCipherSpec,yc=z.handleAlert,Wu=z.handleHandshake,kLe=z.handleApplicationData,Cc=z.handleHeartbeat,Pce=[];Pce[z.ConnectionEnd.client]=[[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[RLe,yc,$,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,kLe,Cc],[$,yc,Wu,$,Cc]];Pce[z.ConnectionEnd.server]=[[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,$,Cc],[RLe,yc,$,$,Cc],[$,yc,Wu,$,Cc],[$,yc,Wu,kLe,Cc],[$,yc,Wu,$,Cc]];var Zv=z.handleHelloRequest,jkt=z.handleServerHello,BLe=z.handleCertificate,_Le=z.handleServerKeyExchange,Rce=z.handleCertificateRequest,eH=z.handleServerHelloDone,DLe=z.handleFinished,rH=[];rH[z.ConnectionEnd.client]=[[$,$,jkt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,BLe,_Le,Rce,eH,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,_Le,Rce,eH,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,Rce,eH,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,eH,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,DLe],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[Zv,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var Vkt=z.handleClientHello,$kt=z.handleClientKeyExchange,zkt=z.handleCertificateVerify;rH[z.ConnectionEnd.server]=[[$,Vkt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,BLe,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$kt,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,zkt,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,DLe],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];z.generateKeys=function(t,e){var r=nH,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,r=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),n={read:r(),write:r()};if(n.read.update=function(o,a){return n.read.cipherFunction(a,n.read)?n.read.compressFunction(o,a,n.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},n.write.update=function(o,a){return n.write.compressFunction(o,a,n.write)?n.write.cipherFunction(a,n.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:n.read.compressFunction=Dkt,n.write.compressFunction=Bkt;break;default:throw new Error("Unsupported compression algorithm.")}}return n};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=vt.util.createBuffer();return r.putInt32(e),r.putBytes(vt.random.getBytes(28)),r};z.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};z.createAlert=function(t,e){var r=vt.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:r})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=vt.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),o=vt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=vt.util.createBuffer();if(t.virtualHost){var c=vt.util.createBuffer();c.putByte(0),c.putByte(0);var u=vt.util.createBuffer();u.putByte(0),yp(u,2,vt.util.createBuffer(t.virtualHost));var d=vt.util.createBuffer();yp(d,2,u),yp(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=vt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),yp(g,1,vt.util.createBuffer(m)),yp(g,2,e),yp(g,1,o),p>0&&yp(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=vt.util.createBuffer();return n.putByte(z.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),yp(n,1,vt.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=vt.util.createBuffer();if(r!==null)try{vt.util.isArray(r)||(r=[r]);for(var o=null,a=0;a<r.length;++a){var l=vt.pem.decode(r[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=vt.util.createBuffer(l.body);o===null&&(o=vt.asn1.fromDer(u.bytes(),!1));var d=vt.util.createBuffer();yp(d,3,u),i.putBuffer(d)}r=vt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=vt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),yp(m,3,i),m};z.createClientKeyExchange=function(t){var e=vt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(vt.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,o=vt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,r=vt.util.createBuffer();return e>0&&(r.putByte(z.HandshakeType.server_key_exchange),r.putInt24(e)),r};z.getClientSignature=function(t,e){var r=vt.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,o){var a=null;if(n.getPrivateKey)try{a=n.getPrivateKey(n,n.session.clientCertificate),a=vt.pki.privateKeyFromPem(a)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(n,i)},t.getSignature(t,r,e)};z.createCertificateVerify=function(t,e){var r=e.length+2,n=vt.util.createBuffer();return n.putByte(z.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};z.createCertificateRequest=function(t){var e=vt.util.createBuffer();e.putByte(1);var r=vt.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],o=vt.pki.distinguishedNameToAsn1(i.subject),a=vt.asn1.toDer(o);r.putInt16(a.length()),r.putBuffer(a)}var l=1+e.length()+2+r.length(),c=vt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),yp(c,1,e),yp(c,2,r),c};z.createServerHelloDone=function(t){var e=vt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=vt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=vt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===z.ConnectionEnd.client,n=t.session.sp,i=12,o=nH,a=r?"client finished":"server finished";e=o(n.master_secret,a,e.getBytes(),i);var l=vt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,r){typeof r>"u"&&(r=e.length);var n=vt.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),o=Math.max(16,i-r-3);return n.putBytes(vt.random.getBytes(o)),n};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=z.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)n.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&n.push(z.createRecord(t,{type:e.type,data:vt.util.createBuffer(i)}))}for(var o=0;o<n.length&&!t.fail;++o){var a=n[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var kce=s(function(t){switch(t){case!0:return!0;case vt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case vt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case vt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case vt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case vt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case vt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),Ykt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return vt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return vt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return vt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return vt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return vt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return vt.pki.certificateError.unknown_ca;default:return vt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(o,a,l){var c=kce(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!vt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=Ykt(u))}return u},vt.pki.verifyCertificateChain(t.caStore,e,r)}catch(o){var i=o;(typeof i!="object"||vt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:kce(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:kce(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var o=null,a=null;if(i?a=vt.util.bytesToHex(i):r.order.length>0&&(a=r.order[0]),a!==null&&a in r.cache){o=r.cache[a],delete r.cache[a];for(var l in r.order)if(r.order[l]===a){r.order.splice(l,1);break}}return o},r.setSession=function(i,o){if(r.order.length===r.capacity){var a=r.order.shift();delete r.cache[a]}var a=vt.util.bytesToHex(i);r.order.push(a),r.cache[a]=o}}return r};z.createConnection=function(t){var e=null;t.caStore?vt.util.isArray(t.caStore)?e=vt.pki.createCaStore(t.caStore):e=t.caStore:e=vt.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in z.CipherSuites)r.push(z.CipherSuites[n])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:vt.util.createBuffer(),tlsData:vt.util.createBuffer(),data:vt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?Pkt:Ukt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=Pce[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:vt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:vt.md.md5.create(),sha1:vt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:vt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof vt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};PLe.exports=vt.tls=vt.tls||{};for(tH in z)typeof z[tH]!="function"&&(vt.tls[tH]=z[tH]);var tH;vt.tls.prf_tls1=nH;vt.tls.hmac_sha1=kkt;vt.tls.createSessionCache=z.createSessionCache;vt.tls.createConnection=z.createConnection});var FLe=G((Wtn,LLe)=>{f();var eb=di();$v();Nce();var Cp=LLe.exports=eb.tls;Cp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Cp.BulkCipherAlgorithm.aes,t.cipher_type=Cp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Cp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:NLe};Cp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=Cp.BulkCipherAlgorithm.aes,t.cipher_type=Cp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=Cp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:NLe};function NLe(t,e,r){var n=e.entity===eb.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:eb.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:eb.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=Zkt,t.write.cipherFunction=Kkt,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=Cp.hmac_sha1}s(NLe,"initConnectionState");function Kkt(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===Cp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=eb.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=Cp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(Jkt)&&(t.fragment=o.output,t.length=t.fragment.length(),r=!0),r}s(Kkt,"encrypt_aes_cbc_sha1");function Jkt(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}s(Jkt,"encrypt_aes_cbc_sha1_padding");function Xkt(t,e,r){var n=!0;if(r){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)n=n&&e.at(a)==o;n&&e.truncate(o+1)}return n}s(Xkt,"decrypt_aes_cbc_sha1_padding");function Zkt(t,e){var r=!1,n;t.version.minor===Cp.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(Xkt);var o=e.macLength,a=eb.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=eb.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=e3t(e.macKey,a,c)&&r,r}s(Zkt,"decrypt_aes_cbc_sha1");function e3t(t,e,r){var n=eb.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}s(e3t,"compareMacs")});var Mce=G((jtn,ULe)=>{f();var Es=di();$g();uo();var qP=ULe.exports=Es.sha512=Es.sha512||{};Es.md.sha512=Es.md.algorithms.sha512=qP;var QLe=Es.sha384=Es.sha512.sha384=Es.sha512.sha384||{};QLe.create=function(){return qP.create("SHA-384")};Es.md.sha384=Es.md.algorithms.sha384=QLe;Es.sha512.sha256=Es.sha512.sha256||{create:s(function(){return qP.create("SHA-512/256")},"create")};Es.md["sha512/256"]=Es.md.algorithms["sha512/256"]=Es.sha512.sha256;Es.sha512.sha224=Es.sha512.sha224||{create:s(function(){return qP.create("SHA-512/224")},"create")};Es.md["sha512/224"]=Es.md.algorithms["sha512/224"]=Es.sha512.sha224;qP.create=function(t){if(OLe||t3t(),typeof t>"u"&&(t="SHA-512"),!(t in K2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=K2[t],r=null,n=Es.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);n=Es.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=Es.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(c),MLe(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var c=Es.util.createBuffer();c.putBytes(n.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(Lce.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(r.length),g=0;g<r.length;++g)y[g]=r[g].slice(0);MLe(y,i,c);var v=Es.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var Lce=null,OLe=!1,Fce=null,K2=null;function t3t(){Lce="\x80",Lce+=Es.util.fillString("\0",128),Fce=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],K2={},K2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],K2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],K2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],K2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],OLe=!0}s(t3t,"_init");function MLe(t,e,r){for(var n,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,B,N,q,te,me,oe,H,O,le,ie,j,W,Y,ee,pe,re,fe,he=r.length();he>=128;){for(j=0;j<16;++j)e[j][0]=r.getInt32()>>>0,e[j][1]=r.getInt32()>>>0;for(;j<80;++j)ee=e[j-2],W=ee[0],Y=ee[1],n=((W>>>19|Y<<13)^(Y>>>29|W<<3)^W>>>6)>>>0,i=((W<<13|Y>>>19)^(Y<<3|W>>>29)^(W<<26|Y>>>6))>>>0,re=e[j-15],W=re[0],Y=re[1],o=((W>>>1|Y<<31)^(W>>>8|Y<<24)^W>>>7)>>>0,a=((W<<31|Y>>>1)^(W<<24|Y>>>8)^(W<<25|Y>>>7))>>>0,pe=e[j-7],fe=e[j-16],Y=i+pe[1]+a+fe[1],e[j][0]=n+pe[0]+o+fe[0]+(Y/4294967296>>>0)>>>0,e[j][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],B=t[3][0],N=t[3][1],q=t[4][0],te=t[4][1],me=t[5][0],oe=t[5][1],H=t[6][0],O=t[6][1],le=t[7][0],ie=t[7][1],j=0;j<80;++j)u=((q>>>14|te<<18)^(q>>>18|te<<14)^(te>>>9|q<<23))>>>0,d=((q<<18|te>>>14)^(q<<14|te>>>18)^(te<<23|q>>>9))>>>0,p=(H^q&(me^H))>>>0,m=(O^te&(oe^O))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=ie+d+m+Fce[j][1]+e[j][1],n=le+u+p+Fce[j][0]+e[j][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,le=H,ie=O,H=me,O=oe,me=q,oe=te,Y=N+i,q=B+n+(Y/4294967296>>>0)>>>0,te=Y>>>0,B=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=n+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+B+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+te,t[4][0]=t[4][0]+q+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+oe,t[5][0]=t[5][0]+me+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+O,t[6][0]=t[6][0]+H+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+ie,t[7][0]=t[7][0]+le+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,he-=128}}s(MLe,"_update")});var qLe=G(Qce=>{f();var r3t=di();Ym();var Yl=r3t.asn1;Qce.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};Qce.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Yl.Class.UNIVERSAL,type:Yl.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var eFe=G((Ktn,ZLe)=>{f();var xc=di();MP();mp();Mce();uo();var $Le=qLe(),n3t=$Le.publicKeyValidator,i3t=$Le.privateKeyValidator;typeof WLe>"u"&&(WLe=xc.jsbn.BigInteger);var WLe,qce=xc.util.ByteBuffer,Ld=typeof Buffer>"u"?Uint8Array:Buffer;xc.pki=xc.pki||{};ZLe.exports=xc.pki.ed25519=xc.ed25519=xc.ed25519||{};var Si=xc.ed25519;Si.constants={};Si.constants.PUBLIC_KEY_BYTE_LENGTH=32;Si.constants.PRIVATE_KEY_BYTE_LENGTH=64;Si.constants.SEED_BYTE_LENGTH=32;Si.constants.SIGN_BYTE_LENGTH=64;Si.constants.HASH_BYTE_LENGTH=64;Si.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=xc.random.getBytesSync(Si.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Si.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Si.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=hy({message:e,encoding:"binary"});for(var r=new Ld(Si.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Ld(Si.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return l3t(r,n),{publicKey:r,privateKey:n}};Si.privateKeyFromAsn1=function(t){var e={},r=[],n=xc.asn1.validate(t,i3t,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=xc.asn1.derToOid(e.privateKeyOid),a=xc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=hy({message:xc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Si.publicKeyFromAsn1=function(t){var e={},r=[],n=xc.asn1.validate(t,n3t,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var o=xc.asn1.derToOid(e.publicKeyOid),a=xc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return hy({message:l,encoding:"binary"})};Si.publicKeyFromPrivateKey=function(t){t=t||{};var e=hy({message:t.privateKey,encoding:"binary"});if(e.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Ld(Si.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};Si.sign=function(t){t=t||{};var e=hy(t),r=hy({message:t.privateKey,encoding:"binary"});if(r.length===Si.constants.SEED_BYTE_LENGTH){var n=Si.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.SEED_BYTE_LENGTH+" or "+Si.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Ld(Si.constants.SIGN_BYTE_LENGTH+e.length);c3t(i,e,e.length,r);for(var o=new Ld(Si.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Si.verify=function(t){t=t||{};var e=hy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=hy({message:t.signature,encoding:"binary"});if(r.length!==Si.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Si.constants.SIGN_BYTE_LENGTH);var n=hy({message:t.publicKey,encoding:"binary"});if(n.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Si.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Ld(Si.constants.SIGN_BYTE_LENGTH+e.length),o=new Ld(Si.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Si.constants.SIGN_BYTE_LENGTH;++a)i[a]=r[a];for(a=0;a<e.length;++a)i[a+Si.constants.SIGN_BYTE_LENGTH]=e[a];return u3t(o,i,i.length,n)>=0};function hy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Ld)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,r);e=new qce(e,r)}else if(!(e instanceof qce))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Ld(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}s(hy,"messageToNativeBuffer");var Wce=Tn(),iH=Tn([1]),o3t=Tn([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),s3t=Tn([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),GLe=Tn([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),HLe=Tn([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Oce=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),a3t=Tn([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function WP(t,e){var r=xc.md.sha512.create(),n=new qce(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Ld(Si.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(WP,"sha512");function l3t(t,e){var r=[Tn(),Tn(),Tn(),Tn()],n,i=WP(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Vce(r,i),jce(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}s(l3t,"crypto_sign_keypair");function c3t(t,e,r,n){var i,o,a=new Float64Array(64),l=[Tn(),Tn(),Tn(),Tn()],c=WP(n,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=WP(t.subarray(32),r+32);for(Gce(d),Vce(l,d),jce(t,l),i=32;i<64;++i)t[i]=n[i];var p=WP(t,r+64);for(Gce(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return zLe(t.subarray(32),a),u}s(c3t,"crypto_sign");function u3t(t,e,r,n){var i,o,a=new Ld(32),l=[Tn(),Tn(),Tn(),Tn()],c=[Tn(),Tn(),Tn(),Tn()];if(o=-1,r<64||d3t(c,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var u=WP(t,r);if(Gce(u),JLe(l,c,u),Vce(c,e.subarray(32)),Hce(l,c),jce(a,l),r-=64,YLe(e,0,a,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return o=r,o}s(u3t,"crypto_sign_open");function zLe(t,e){var r,n,i,o;for(n=63;n>=32;--n){for(r=0,i=n-32,o=n-12;i<o;++i)e[i]+=r-16*e[n]*Oce[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Oce[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Oce[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}s(zLe,"modL");function Gce(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;zLe(t,e)}s(Gce,"reduce");function Hce(t,e){var r=Tn(),n=Tn(),i=Tn(),o=Tn(),a=Tn(),l=Tn(),c=Tn(),u=Tn(),d=Tn();z4(r,t[1],t[0]),z4(d,e[1],e[0]),zo(r,r,d),$4(n,t[0],t[1]),$4(d,e[0],e[1]),zo(n,n,d),zo(i,t[3],e[3]),zo(i,i,s3t),zo(o,t[2],e[2]),$4(o,o,o),z4(a,n,r),z4(l,o,i),$4(c,o,i),$4(u,n,r),zo(t[0],a,l),zo(t[1],u,c),zo(t[2],c,l),zo(t[3],a,u)}s(Hce,"add");function jLe(t,e,r){for(var n=0;n<4;++n)XLe(t[n],e[n],r)}s(jLe,"cswap");function jce(t,e){var r=Tn(),n=Tn(),i=Tn();h3t(i,e[2]),zo(r,e[0],i),zo(n,e[1],i),oH(t,n),t[31]^=KLe(r)<<7}s(jce,"pack");function oH(t,e){var r,n,i,o=Tn(),a=Tn();for(r=0;r<16;++r)a[r]=e[r];for(Uce(a),Uce(a),Uce(a),n=0;n<2;++n){for(o[0]=a[0]-65517,r=1;r<15;++r)o[r]=a[r]-65535-(o[r-1]>>16&1),o[r-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,XLe(a,o,1-i)}for(r=0;r<16;r++)t[2*r]=a[r]&255,t[2*r+1]=a[r]>>8}s(oH,"pack25519");function d3t(t,e){var r=Tn(),n=Tn(),i=Tn(),o=Tn(),a=Tn(),l=Tn(),c=Tn();return tb(t[2],iH),f3t(t[1],e),J2(i,t[1]),zo(o,i,o3t),z4(i,i,t[2]),$4(o,t[2],o),J2(a,o),J2(l,a),zo(c,l,a),zo(r,c,i),zo(r,r,o),p3t(r,r),zo(r,r,i),zo(r,r,o),zo(r,r,o),zo(t[0],r,o),J2(n,t[0]),zo(n,n,o),VLe(n,i)&&zo(t[0],t[0],a3t),J2(n,t[0]),zo(n,n,o),VLe(n,i)?-1:(KLe(t[0])===e[31]>>7&&z4(t[0],Wce,t[0]),zo(t[3],t[0],t[1]),0)}s(d3t,"unpackneg");function f3t(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}s(f3t,"unpack25519");function p3t(t,e){var r=Tn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)J2(r,r),n!==1&&zo(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(p3t,"pow2523");function VLe(t,e){var r=new Ld(32),n=new Ld(32);return oH(r,t),oH(n,e),YLe(r,0,n,0)}s(VLe,"neq25519");function YLe(t,e,r,n){return m3t(t,e,r,n,32)}s(YLe,"crypto_verify_32");function m3t(t,e,r,n,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^r[n+o];return(1&a-1>>>8)-1}s(m3t,"vn");function KLe(t){var e=new Ld(32);return oH(e,t),e[0]&1}s(KLe,"par25519");function JLe(t,e,r){var n,i;for(tb(t[0],Wce),tb(t[1],iH),tb(t[2],iH),tb(t[3],Wce),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,jLe(t,e,n),Hce(e,t),Hce(t,t),jLe(t,e,n)}s(JLe,"scalarmult");function Vce(t,e){var r=[Tn(),Tn(),Tn(),Tn()];tb(r[0],GLe),tb(r[1],HLe),tb(r[2],iH),zo(r[3],GLe,HLe),JLe(t,r,e)}s(Vce,"scalarbase");function tb(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}s(tb,"set25519");function h3t(t,e){var r=Tn(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)J2(r,r),n!==2&&n!==4&&zo(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}s(h3t,"inv25519");function Uce(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}s(Uce,"car25519");function XLe(t,e,r){for(var n,i=~(r-1),o=0;o<16;++o)n=i&(t[o]^e[o]),t[o]^=n,e[o]^=n}s(XLe,"sel25519");function Tn(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}s(Tn,"gf");function $4(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}s($4,"A");function z4(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}s(z4,"Z");function J2(t,e){zo(t,e,e)}s(J2,"S");function zo(t,e,r){var n,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,B=0,N=0,q=0,te=0,me=0,oe=0,H=0,O=0,le=0,ie=0,j=0,W=0,Y=0,ee=0,pe=0,re=r[0],fe=r[1],he=r[2],Ne=r[3],Re=r[4],Je=r[5],Me=r[6],pt=r[7],Tt=r[8],Ct=r[9],bt=r[10],ce=r[11],Oe=r[12],ye=r[13],tt=r[14],X=r[15];n=e[0],o+=n*re,a+=n*fe,l+=n*he,c+=n*Ne,u+=n*Re,d+=n*Je,p+=n*Me,m+=n*pt,h+=n*Tt,g+=n*Ct,y+=n*bt,v+=n*ce,b+=n*Oe,E+=n*ye,_+=n*tt,k+=n*X,n=e[1],a+=n*re,l+=n*fe,c+=n*he,u+=n*Ne,d+=n*Re,p+=n*Je,m+=n*Me,h+=n*pt,g+=n*Tt,y+=n*Ct,v+=n*bt,b+=n*ce,E+=n*Oe,_+=n*ye,k+=n*tt,B+=n*X,n=e[2],l+=n*re,c+=n*fe,u+=n*he,d+=n*Ne,p+=n*Re,m+=n*Je,h+=n*Me,g+=n*pt,y+=n*Tt,v+=n*Ct,b+=n*bt,E+=n*ce,_+=n*Oe,k+=n*ye,B+=n*tt,N+=n*X,n=e[3],c+=n*re,u+=n*fe,d+=n*he,p+=n*Ne,m+=n*Re,h+=n*Je,g+=n*Me,y+=n*pt,v+=n*Tt,b+=n*Ct,E+=n*bt,_+=n*ce,k+=n*Oe,B+=n*ye,N+=n*tt,q+=n*X,n=e[4],u+=n*re,d+=n*fe,p+=n*he,m+=n*Ne,h+=n*Re,g+=n*Je,y+=n*Me,v+=n*pt,b+=n*Tt,E+=n*Ct,_+=n*bt,k+=n*ce,B+=n*Oe,N+=n*ye,q+=n*tt,te+=n*X,n=e[5],d+=n*re,p+=n*fe,m+=n*he,h+=n*Ne,g+=n*Re,y+=n*Je,v+=n*Me,b+=n*pt,E+=n*Tt,_+=n*Ct,k+=n*bt,B+=n*ce,N+=n*Oe,q+=n*ye,te+=n*tt,me+=n*X,n=e[6],p+=n*re,m+=n*fe,h+=n*he,g+=n*Ne,y+=n*Re,v+=n*Je,b+=n*Me,E+=n*pt,_+=n*Tt,k+=n*Ct,B+=n*bt,N+=n*ce,q+=n*Oe,te+=n*ye,me+=n*tt,oe+=n*X,n=e[7],m+=n*re,h+=n*fe,g+=n*he,y+=n*Ne,v+=n*Re,b+=n*Je,E+=n*Me,_+=n*pt,k+=n*Tt,B+=n*Ct,N+=n*bt,q+=n*ce,te+=n*Oe,me+=n*ye,oe+=n*tt,H+=n*X,n=e[8],h+=n*re,g+=n*fe,y+=n*he,v+=n*Ne,b+=n*Re,E+=n*Je,_+=n*Me,k+=n*pt,B+=n*Tt,N+=n*Ct,q+=n*bt,te+=n*ce,me+=n*Oe,oe+=n*ye,H+=n*tt,O+=n*X,n=e[9],g+=n*re,y+=n*fe,v+=n*he,b+=n*Ne,E+=n*Re,_+=n*Je,k+=n*Me,B+=n*pt,N+=n*Tt,q+=n*Ct,te+=n*bt,me+=n*ce,oe+=n*Oe,H+=n*ye,O+=n*tt,le+=n*X,n=e[10],y+=n*re,v+=n*fe,b+=n*he,E+=n*Ne,_+=n*Re,k+=n*Je,B+=n*Me,N+=n*pt,q+=n*Tt,te+=n*Ct,me+=n*bt,oe+=n*ce,H+=n*Oe,O+=n*ye,le+=n*tt,ie+=n*X,n=e[11],v+=n*re,b+=n*fe,E+=n*he,_+=n*Ne,k+=n*Re,B+=n*Je,N+=n*Me,q+=n*pt,te+=n*Tt,me+=n*Ct,oe+=n*bt,H+=n*ce,O+=n*Oe,le+=n*ye,ie+=n*tt,j+=n*X,n=e[12],b+=n*re,E+=n*fe,_+=n*he,k+=n*Ne,B+=n*Re,N+=n*Je,q+=n*Me,te+=n*pt,me+=n*Tt,oe+=n*Ct,H+=n*bt,O+=n*ce,le+=n*Oe,ie+=n*ye,j+=n*tt,W+=n*X,n=e[13],E+=n*re,_+=n*fe,k+=n*he,B+=n*Ne,N+=n*Re,q+=n*Je,te+=n*Me,me+=n*pt,oe+=n*Tt,H+=n*Ct,O+=n*bt,le+=n*ce,ie+=n*Oe,j+=n*ye,W+=n*tt,Y+=n*X,n=e[14],_+=n*re,k+=n*fe,B+=n*he,N+=n*Ne,q+=n*Re,te+=n*Je,me+=n*Me,oe+=n*pt,H+=n*Tt,O+=n*Ct,le+=n*bt,ie+=n*ce,j+=n*Oe,W+=n*ye,Y+=n*tt,ee+=n*X,n=e[15],k+=n*re,B+=n*fe,N+=n*he,q+=n*Ne,te+=n*Re,me+=n*Je,oe+=n*Me,H+=n*pt,O+=n*Tt,le+=n*Ct,ie+=n*bt,j+=n*ce,W+=n*Oe,Y+=n*ye,ee+=n*tt,pe+=n*X,o+=38*B,a+=38*N,l+=38*q,c+=38*te,u+=38*me,d+=38*oe,p+=38*H,m+=38*O,h+=38*le,g+=38*ie,y+=38*j,v+=38*W,b+=38*Y,E+=38*ee,_+=38*pe,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s(zo,"M")});var iFe=G((Ztn,nFe)=>{f();var U0=di();uo();mp();MP();nFe.exports=U0.kem=U0.kem||{};var tFe=U0.jsbn.BigInteger;U0.kem.rsa={};U0.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||U0.random,n={};return n.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new tFe(U0.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(l.compareTo(tFe.ONE)<=0);l=U0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=U0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},n.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},n};U0.kem.kdf1=function(t,e){rFe(this,t,0,e||t.digestLength)};U0.kem.kdf2=function(t,e){rFe(this,t,1,e||t.digestLength)};function rFe(t,e,r,n){t.generate=function(i,o){for(var a=new U0.util.ByteBuffer,l=Math.ceil(o/n)+r,c=new U0.util.ByteBuffer,u=r;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(n))}return a.truncate(a.length()-o),a.getBytes()}}s(rFe,"_createKDF")});var lFe=G((rrn,aFe)=>{f();var Qi=di();uo();aFe.exports=Qi.log=Qi.log||{};Qi.log.levels=["none","error","warning","info","debug","verbose","max"];var sH={},Yce=[],HP=null;Qi.log.LEVEL_LOCKED=2;Qi.log.NO_LEVEL_CHECK=4;Qi.log.INTERPOLATE=8;for(tA=0;tA<Qi.log.levels.length;++tA)$ce=Qi.log.levels[tA],sH[$ce]={index:tA,name:$ce.toUpperCase()};var $ce,tA;Qi.log.logMessage=function(t){for(var e=sH[t.level].index,r=0;r<Yce.length;++r){var n=Yce[r];if(n.flags&Qi.log.NO_LEVEL_CHECK)n.f(t);else{var i=sH[n.level].index;e<=i&&n.f(n,t)}}};Qi.log.prepareStandard=function(t){"standard"in t||(t.standard=sH[t.level].name+" ["+t.category+"] "+t.message)};Qi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Qi.util.format.apply(this,e)}};Qi.log.prepareStandardFull=function(t){"standardFull"in t||(Qi.log.prepareStandard(t),t.standardFull=t.standard)};for(zce=["error","warning","info","debug","verbose"],tA=0;tA<zce.length;++tA)(function(e){Qi.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:r,message:n,arguments:i};Qi.log.logMessage(o)}})(zce[tA]);var zce,tA;Qi.log.makeLogger=function(t){var e={flags:0,f:t};return Qi.log.setLevel(e,"none"),e};Qi.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&Qi.log.LEVEL_LOCKED))for(var n=0;n<Qi.log.levels.length;++n){var i=Qi.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};Qi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Qi.log.LEVEL_LOCKED:t.flags&=~Qi.log.LEVEL_LOCKED};Qi.log.addLogger=function(t){Yce.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(oFe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},jP=s(function(t,e){Qi.log.prepareStandard(e);var r=oFe[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},"f"),Y4=Qi.log.makeLogger(jP)):(jP=s(function(e,r){Qi.log.prepareStandardFull(r),console.log(r.standardFull)},"f"),Y4=Qi.log.makeLogger(jP)),Qi.log.setLevel(Y4,"debug"),Qi.log.addLogger(Y4),HP=Y4):console={log:s(function(){},"log")};var Y4,oFe,jP;HP!==null&&typeof window<"u"&&window.location&&(GP=new URL(window.location.href).searchParams,GP.has("console.level")&&Qi.log.setLevel(HP,GP.get("console.level").slice(-1)[0]),GP.has("console.lock")&&(sFe=GP.get("console.lock").slice(-1)[0],sFe=="true"&&Qi.log.lock(HP)));var GP,sFe;Qi.log.consoleLogger=HP});var uFe=G((orn,cFe)=>{f();cFe.exports=$g();OG();W4();lce();Mce()});var pFe=G((arn,fFe)=>{f();var Kt=di();$v();Ym();LP();zv();H2();bce();mp();uo();ZG();var Se=Kt.asn1,Gu=fFe.exports=Kt.pkcs7=Kt.pkcs7||{};Gu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=Se.fromDer(e.body);return Gu.messageFromAsn1(n)};Gu.messageToPem=function(t,e){var r={type:"PKCS7",body:Se.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(r,{maxline:e})};Gu.messageFromAsn1=function(t){var e={},r=[];if(!Se.validate(t,Gu.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=Se.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Gu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Gu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Gu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Gu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(n){if(Jce(t,n,Gu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,n)),o.length>0&&a.value[0].value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,t.signerInfos)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(n){var i=n.issuer,o=n.serialNumber;if(n.certificate){var a=n.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=n.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=n.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),n.detached?t.detachedContent=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();r(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(n){typeof n=="string"&&(n=Kt.pki.certificateFromPem(n)),t.certificates.push(n)},"addCertificate"),addCertificateRevokationList:s(function(n){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in n||(n[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=n[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in n)t.digestAlgorithmIdentifiers.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(a).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]));return n}s(e,"addDigestAlgorithmIds");function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Se.derToOid(t.contentInfo.value[0].value),a=Se.toDer(i);a.getByte(),Se.getBerValueLength(a),a=a.getBytes();for(var l in n)n[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=n[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(Kce(h)),d.authenticatedAttributesAsn1.value.push(Kce(h))}a=Se.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=v3t(t.signers)}s(r,"addSignerInfos")};Gu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Jce(t,e,Gu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),dFe(t)},"decrypt")},t};Gu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var r=Jce(t,e,Gu.asn1.envelopedDataValidator);t.recipients=y3t(r.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,C3t(t.recipients)),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,b3t(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===r.length){for(var a=!0,l=0;l<r.length;++l)if(o[l].type!==r[l].type||o[l].value!==r[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}dFe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,o;switch(r){case Kt.pki.oids["aes128-CBC"]:n=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:n=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:n=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:n=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function g3t(t){var e={},r=[];if(!Se.validate(t,Gu.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Se.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(g3t,"_recipientFromAsn1");function A3t(t){return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.encryptedContent.algorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")]),Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(A3t,"_recipientToAsn1");function y3t(t){for(var e=[],r=0;r<t.length;++r)e.push(g3t(t[r]));return e}s(y3t,"_recipientsFromAsn1");function C3t(t){for(var e=[],r=0;r<t.length;++r)e.push(A3t(t[r]));return e}s(C3t,"_recipientsToAsn1");function x3t(t){var e=Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Se.integerToDer(t.version).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Se.create(Se.Class.UNIVERSAL,Se.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.digestAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.signatureAlgorithm).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.NULL,!1,"")])),e.value.push(Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=Se.create(Se.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Kce(i))}e.value.push(r)}return e}s(x3t,"_signerToAsn1");function v3t(t){for(var e=[],r=0;r<t.length;++r)e.push(x3t(t[r]));return e}s(v3t,"_signersToAsn1");function Kce(t){var e;if(t.type===Kt.pki.oids.contentType)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Se.utcTimeToDate(i):i=Se.generalizedTimeToDate(i):i=new Date(o)}i>=r&&i<n?e=Se.create(Se.Class.UNIVERSAL,Se.Type.UTCTIME,!1,Se.dateToUtcTime(i)):e=Se.create(Se.Class.UNIVERSAL,Se.Type.GENERALIZEDTIME,!1,Se.dateToGeneralizedTime(i))}return Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.type).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SET,!0,[e])])}s(Kce,"_attributeToAsn1");function b3t(t){return[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(Kt.pki.oids.data).getBytes()),Se.create(Se.Class.UNIVERSAL,Se.Type.SEQUENCE,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OID,!1,Se.oidToDer(t.algorithm).getBytes()),t.parameter?Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Se.create(Se.Class.CONTEXT_SPECIFIC,0,!0,[Se.create(Se.Class.UNIVERSAL,Se.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(b3t,"_encryptedContentToAsn1");function Jce(t,e,r){var n={},i=[];if(!Se.validate(e,r,n,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Se.derToOid(n.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Kt.util.isArray(n.encryptedContent))for(var c=0;c<n.encryptedContent.length;++c){if(n.encryptedContent[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[c].value}else l=n.encryptedContent;t.encryptedContent={algorithm:Se.derToOid(n.encAlgorithm),parameter:Kt.util.createBuffer(n.encParameter.value),content:Kt.util.createBuffer(l)}}if(n.content){var l="";if(Kt.util.isArray(n.content))for(var c=0;c<n.content.length;++c){if(n.content[c].type!==Se.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[c].value}else l=n.content;t.content=Kt.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}s(Jce,"_fromAsn1");function dFe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(dFe,"_decryptContent")});var hFe=G((urn,mFe)=>{f();var rl=di();$v();Q4();OG();W4();uo();var lH=mFe.exports=rl.ssh=rl.ssh||{};lH.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+n+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+r+`\r
`;var a=rl.util.createBuffer();K4(a,n),rA(a,t.e),rA(a,t.n);var l=rl.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=rl.util.createBuffer();rA(u,t.d),rA(u,t.p),rA(u,t.q),rA(u,t.qInv);var d;if(!e)d=rl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=aH(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=rl.util.createBuffer();h.putBuffer(aH("\0\0\0\0",e)),h.putBuffer(aH("\0\0\0",e));var g=rl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(rl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=rl.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=aH("putty-private-key-file-mac-key",e),b=rl.util.createBuffer();K4(b,n),K4(b,i),K4(b,r),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=rl.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};lH.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=rl.util.createBuffer();return K4(n,r),rA(n,t.e),rA(n,t.n),r+" "+rl.util.encode64(n.bytes())+" "+e};lH.privateKeyToOpenSSH=function(t,e){return e?rl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):rl.pki.privateKeyToPem(t)};lH.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||rl.md.md5.create(),n="ssh-rsa",i=rl.util.createBuffer();K4(i,n),rA(i,t.e),rA(i,t.n),r.start(),r.update(i.getBytes());var o=r.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function rA(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=rl.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}s(rA,"_addBigIntegerToBuffer");function K4(t,e){t.putInt32(e.length),t.putString(e)}s(K4,"_addStringToBuffer");function aH(){for(var t=rl.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}s(aH,"_sha1")});var AFe=G((prn,gFe)=>{f();gFe.exports=di();$v();FLe();Ym();DG();LP();eFe();Q4();iFe();lFe();uFe();Ece();GG();H2();Ace();wce();pFe();Sce();Cce();cce();KG();mp();fce();hFe();Nce();uo()});var xFe=G(X2=>{"use strict";f();Object.defineProperty(X2,"__esModule",{value:!0});X2.convert=X2.Format=void 0;var VP=AFe(),rb;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(rb=X2.Format||(X2.Format={}));function yFe(t){var e=VP.pki.pemToDer(t),r=VP.asn1,n=r.fromDer(e.data.toString("binary")).value[0].value,i=n[0],o=i.tagClass===r.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=n.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(yFe,"myASN");function E3t(t){var e=yFe(t),r=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),n=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(r),"Valid	".concat(n),String(t)].join(`
`)}s(E3t,"txtFormat");function CFe(t,e){switch(e){case rb.der:return VP.pki.pemToDer(t);case rb.pem:return t;case rb.txt:return E3t(t);case rb.asn1:return yFe(t);case rb.fingerprint:var r=VP.md.sha1.create(),n=CFe(t,rb.der);return r.update(n.getBytes()),r.digest().toHex();case rb.x509:return VP.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(CFe,"convert");X2.convert=CFe});var wFe=G(Fd=>{"use strict";f();var nb=Fd&&Fd.__assign||function(){return nb=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nb.apply(this,arguments)},cH=Fd&&Fd.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Fd,"__esModule",{value:!0});Fd.convert=Fd.Format=Fd.addToGlobalAgent=Fd.get=void 0;var Xce=require("https"),I3t=require("tls"),vFe=require("child_process"),bFe=t7e(),gy=xFe();Object.defineProperty(Fd,"Format",{enumerable:!0,get:s(function(){return gy.Format},"get")});Object.defineProperty(Fd,"convert",{enumerable:!0,get:s(function(){return gy.convert},"get")});var EFe=process.platform==="darwin",IFe=Xce.globalAgent,dH={keychain:"all",unique:!0,excludeBundled:!0,format:gy.Format.pem};function TFe(t){if(t===void 0&&(t=dH),!EFe)return[];t=nb(nb({},dH),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,r=["find-certificate","-a","-p"],n=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,vFe.spawnSync)("/usr/bin/security",r.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});n=cH(cH([],n,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,vFe.spawnSync)("/usr/bin/security",r).stdout.toString().split(e).map(function(u){return u.trim()});n=cH(cH([],n,!0),a,!0)}if(t.unique||t.excludeBundled){var l=n.map(function(u){return(0,gy.convert)(u,gy.Format.fingerprint)}),c=t.excludeBundled?I3t.rootCertificates.map(function(u){return(0,gy.convert)(u,gy.Format.fingerprint)}):[];n=n.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return n.map(function(u){return(0,gy.convert)(u,t.format)})}s(TFe,"get");Fd.get=TFe;var uH=IFe.options.ca,T3t=s(function(t){if(t===void 0&&(t=dH),!!EFe){var e;Array.isArray(uH)?e=Array.from(uH):e=typeof uH<"u"?[uH]:[],TFe(nb(nb(nb({},dH),t),{format:gy.Format.pem,excludeBundled:!1})).forEach(function(r){return e.push(r)}),IFe.options.ca=e,Xce.Agent=function(r){return function(n){var i=typeof n<"u"?nb({},n):{};return typeof i.ca>"u"&&(i.ca=e),r.call(this,i)}}(Xce.Agent),(0,bFe.setGlobalDispatcher)(new bFe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Fd.addToGlobalAgent=T3t});var _Fe=G((vrn,Zce)=>{f();function w3t(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var r=typeof __webpack_require__=="function"?__non_webpack_require__:require;let n=r(e(__dirname,"crypt32.node")),i=[],o=new n.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(w3t,"all");process.platform!=="win32"?Zce.exports.all=()=>[]:Zce.exports.all=w3t});var FFe=G((Srn,LFe)=>{"use strict";f();function NFe(t,e,r){let n=e[r];if(t==null&&n.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${n.name}\` missing`);let i=typeof t;if(n.type&&i!==n.type){if(n.required===!1&&e.slice(r).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${n.name}\`, expected \`${n.type}\` but found \`${typeof t}\``)}return!0}s(NFe,"validateParameter");function S3t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(S3t,"hasOwnProperty");function R3t(t,e){return function(){let r=Array.prototype.slice.call(arguments),n=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=r[a];S3t(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),NFe(c,e,o)?n.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{n.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,n)});t.apply(this,n)}}s(R3t,"defineOperation");LFe.exports={defineOperation:R3t,validateParameter:NFe}});var lue=G((Brn,OFe)=>{"use strict";f();var Z4=Ire()("kerberos"),X4=Z4.KerberosClient,MFe=Z4.KerberosServer,ib=FFe().defineOperation,k3t=1,B3t=2,D3t=4,P3t=8,N3t=16,L3t=32,F3t=64,M3t=128,Q3t=256,QFe=0,O3t=9,U3t=6;X4.prototype.step=ib(X4.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);X4.prototype.wrap=ib(X4.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);X4.prototype.unwrap=ib(X4.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);MFe.prototype.step=ib(MFe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var q3t=ib(Z4.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),W3t=ib(Z4.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),G3t=ib(Z4.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:QFe}},{name:"callback",type:"function",required:!1}]),H3t=ib(Z4.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);OFe.exports={initializeClient:G3t,initializeServer:H3t,principalDetails:W3t,checkPassword:q3t,GSS_C_DELEG_FLAG:k3t,GSS_C_MUTUAL_FLAG:B3t,GSS_C_REPLAY_FLAG:D3t,GSS_C_SEQUENCE_FLAG:P3t,GSS_C_CONF_FLAG:N3t,GSS_C_INTEG_FLAG:L3t,GSS_C_ANON_FLAG:F3t,GSS_C_PROT_READY_FLAG:M3t,GSS_C_TRANS_FLAG:Q3t,GSS_C_NO_OID:QFe,GSS_MECH_OID_KRB5:O3t,GSS_MECH_OID_SPNEGO:U3t}});var UFe=G((Prn,j3t)=>{j3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var WFe=G((Nrn,qFe)=>{"use strict";f();var V3t=require("dns"),$3t=lue(),cue=class{static{s(this,"MongoAuthProcess")}constructor(e,r,n,i){i=i||{},this.host=e,this.port=r,this.serviceName=n||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=z3t(this),this.retries=10}init(e,r,n){let i=this;this.username=e,this.password=r;function o(a,l,c){if(!a)return c();V3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return n(a);let l={};r!=null&&Object.assign(l,{user:e,password:r});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;$3t.initializeClient(c,l,(u,d)=>{if(u)return n(u,null);i.client=d,n(null,d)})})}transition(e,r){if(this._transition==null)return r(new Error("Transition finished"));this._transition(e,r)}};function z3t(t){return(e,r)=>{t.client.step("",(n,i)=>{if(n)return r(n);t._transition=Y3t(t),r(null,i)})}}s(z3t,"firstTransition");function Y3t(t){return(e,r)=>{t.client.step(e,(n,i)=>{if(n&&t.retries===0)return r(n);if(n)return t.retries=t.retries-1,t.transition(e,r);t._transition=K3t(t),r(null,i||"")})}}s(Y3t,"secondTransition");function K3t(t){return(e,r)=>{t.client.unwrap(e,(n,i)=>{if(n)return r(n,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return r(o,!1);t._transition=J3t(t),r(null,a)})})}}s(K3t,"thirdTransition");function J3t(t){return(e,r)=>{t._transition=null,r(null,!0)}}s(J3t,"fourthTransition");qFe.exports={MongoAuthProcess:cue}});var HFe=G((Mrn,$P)=>{"use strict";f();var GFe=lue();$P.exports=GFe;$P.exports.Kerberos=GFe;$P.exports.version=UFe().version;$P.exports.processes={MongoAuthProcess:WFe().MongoAuthProcess}});var AMe=G(Tue=>{"use strict";f();Object.defineProperty(Tue,"__esModule",{value:!0});Tue.assertNever=RBt;function RBt(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(RBt,"assertNever")});var n9=G(vy=>{"use strict";f();Object.defineProperty(vy,"__esModule",{value:!0});vy.ChatCompletionContentPartOpaque=vy.ChatCompletionContentPartKind=vy.ChatRole=void 0;var kBt=AMe(),kH;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(kH||(vy.ChatRole=kH={}));(function(t){function e(r){switch(r){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,kBt.assertNever)(r,`unknown chat role ${r}}`)}}s(e,"display"),t.display=e})(kH||(vy.ChatRole=kH={}));var yMe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(yMe||(vy.ChatCompletionContentPartKind=yMe={}));var CMe;(function(t){function e(r,n){return!r.scope||(r.scope&n)!==0}s(e,"usableIn"),t.usableIn=e})(CMe||(vy.ChatCompletionContentPartOpaque=CMe={}))});var wue=G(lA=>{"use strict";f();Object.defineProperty(lA,"__esModule",{value:!0});lA.BaseTokensPerName=lA.BaseTokensPerMessage=lA.BaseTokensPerCompletion=lA.ChatRole=void 0;var xMe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(xMe||(lA.ChatRole=xMe={}));lA.BaseTokensPerCompletion=3;lA.BaseTokensPerMessage=3;lA.BaseTokensPerName=1});var bMe=G(DH=>{"use strict";f();Object.defineProperty(DH,"__esModule",{value:!0});DH.toOpenAiChatMessage=vMe;DH.toOpenAIChatMessages=PBt;var by=n9(),BH=wue(),BBt=ub();function _ue(t){return t.filter(e=>e.type===by.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(_ue,"onlyStringContent");function DBt(t){let e=t.map(r=>{if(r.type===by.ChatCompletionContentPartKind.Text)return{type:"text",text:r.text};if(r.type===by.ChatCompletionContentPartKind.Image)return{image_url:r.imageUrl,type:"image_url"};if(r.type===by.ChatCompletionContentPartKind.Opaque&&by.ChatCompletionContentPartOpaque.usableIn(r,BBt.OutputMode.OpenAI))return r}).filter(r=>!!r);return e.every(r=>r.type==="text")?e.map(r=>r.text).join(""):e}s(DBt,"stringAndImageContent");function vMe(t){switch(t.role){case by.ChatRole.System:return{role:BH.ChatRole.System,content:_ue(t.content),name:t.name};case by.ChatRole.User:return{role:BH.ChatRole.User,content:DBt(t.content),name:t.name};case by.ChatRole.Assistant:return{role:BH.ChatRole.Assistant,content:_ue(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case by.ChatRole.Tool:return{role:BH.ChatRole.Tool,content:_ue(t.content),tool_call_id:t.toolCallId};default:return}}s(vMe,"toOpenAiChatMessage");function PBt(t){return t.map(vMe).filter(e=>!!e)}s(PBt,"toOpenAIChatMessages")});var IMe=G(LH=>{"use strict";f();Object.defineProperty(LH,"__esModule",{value:!0});LH.toVsCodeChatMessage=EMe;LH.toVsCodeChatMessages=NBt;var NH=n9();function PH(t){return t.filter(e=>e.type===NH.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(PH,"onlyStringContent");var db;function EMe(t){switch(db??=require("vscode"),t.role){case NH.ChatRole.Assistant:let e=db.LanguageModelChatMessage.Assistant(PH(t.content),t.name);return t.toolCalls&&(e.content=[new db.LanguageModelTextPart(PH(t.content)),...t.toolCalls.map(r=>{let n;try{n=JSON.parse(r.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+r.id)}return new db.LanguageModelToolCallPart(r.id,r.function.name,n)})]),e;case NH.ChatRole.User:return db.LanguageModelChatMessage.User(PH(t.content),t.name);case NH.ChatRole.Tool:{let r=db.LanguageModelChatMessage.User("");return r.content=[new db.LanguageModelToolResultPart(t.toolCallId,[new db.LanguageModelTextPart(PH(t.content))])],r}default:return}}s(EMe,"toVsCodeChatMessage");function NBt(t){return t.map(EMe).filter(e=>!!e)}s(NBt,"toVsCodeChatMessages")});var ub=G(Xm=>{"use strict";f();Object.defineProperty(Xm,"__esModule",{value:!0});Xm.OutputMode=Xm.Raw=Xm.OpenAI=void 0;Xm.toMode=Sue;Xm.toVSCode=LBt;Xm.toOpenAI=FBt;var TMe=bMe(),wMe=IMe();Xm.OpenAI=wue();Xm.Raw=n9();var tT;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(tT||(Xm.OutputMode=tT={}));function Sue(t,e){switch(t){case tT.Raw:return e;case tT.VSCode:return e instanceof Array?(0,wMe.toVsCodeChatMessages)(e):(0,wMe.toVsCodeChatMessage)(e);case tT.OpenAI:return e instanceof Array?(0,TMe.toOpenAIChatMessages)(e):(0,TMe.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(Sue,"toMode");function LBt(t){return Sue(tT.VSCode,t)}s(LBt,"toVSCode");function FBt(t){return Sue(tT.OpenAI,t)}s(FBt,"toOpenAI")});var Rue=G(i9=>{"use strict";f();Object.defineProperty(i9,"__esModule",{value:!0});i9.jsonRetainedProps=void 0;i9.forEachNode=_Me;i9.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function _Me(t,e){if(e(t),t.type===1)for(let r of t.children)_Me(r,e)}s(_Me,"forEachNode")});var SMe=G(kue=>{"use strict";f();Object.defineProperty(kue,"__esModule",{value:!0});kue.once=MBt;function MBt(t){let e,r=!1,n=s((...i)=>(r||(e=t(...i),r=!0),e),"wrappedFunction");return n.clear=()=>{r=!1},n}s(MBt,"once")});var Nue=G(nu=>{"use strict";f();Object.defineProperty(nu,"__esModule",{value:!0});nu.BudgetExceededError=nu.MaterializedChatMessageImage=nu.MaterializedChatMessageBreakpoint=nu.MaterializedChatMessageOpaque=nu.MaterializedChatMessage=nu.MaterializedChatMessageTextChunk=nu.GenericMaterializedContainer=void 0;var oR=SMe(),j0=ub(),Ey=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,r,n,i,o,a,l){if(this.parent=e,this.id=r,this.name=n,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=pb(n)?await n.tokenCount(e):await n.upperBoundTokenCount(e);r+=i})),r}async upperBoundTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r}replaceNode(e,r){return MMe(e,this.children,r)}allMetadata(){return FMe(this)}findById(e){return Pue(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)QBt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof eh&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let r=0;return await Promise.all(this.children.map(async n=>{if(n instanceof eh||n instanceof t){let i=await n.baseMessageTokenCount(e);r+=i}})),r}removeLowestPriorityChild(){let e=[];return Due(this,e),e}};nu.GenericMaterializedContainer=Ey;var o9=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,r,n,i=[],o){this.parent=e,this.text=r,this.priority=n,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,oR.once)(async e=>await e.tokenLength({type:j0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};nu.MaterializedChatMessageTextChunk=o9;var eh=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,r,n,i,o,a,l,c,u){this.parent=e,this.id=r,this.role=n,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,r){let n=MMe(e,this.children,r);return n&&this.onChunksChange(),n}removeLowestPriorityChild(){let e=[];return Due(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return Pue(e,this)}_tokenCount=(0,oR.once)(async e=>{let r=this.toChatMessage();return e.countMessageTokens((0,j0.toMode)(e.mode,r))});_upperBound=(0,oR.once)(async e=>{let r=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async n=>{let i=await n.upperBoundTokenCount(e);r+=i})),r});baseMessageTokenCount=(0,oR.once)(e=>{let r=this.toChatMessage();return r.content=r.content.map(n=>n.type===j0.Raw.ChatCompletionContentPartKind.Text?{...n,text:""}:n.type===j0.Raw.ChatCompletionContentPartKind.Image?void 0:n).filter(n=>!!n),e.countMessageTokens((0,j0.toMode)(e.mode,r))});_text=(0,oR.once)(()=>{let e=[];for(let{content:r,isTextSibling:n}of NMe(this)){if(r instanceof rT||r instanceof fb){e.push(r);continue}if(r instanceof Zm){e.at(-1)instanceof Zm?e[e.length-1]=r:e.push(r);continue}if(r.lineBreakBefore===1||r.lineBreakBefore===2&&!n){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=r.text:e.push(r.text)}return e});toChatMessage(){let e=this.text.map(r=>{if(typeof r=="string")return{type:j0.Raw.ChatCompletionContentPartKind.Text,text:r};if(r instanceof rT)return{type:j0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:QMe(r.src),detail:r.detail}};if(r instanceof fb)return r.value;if(r instanceof Zm)return r.part;throw new Error("Unexpected element type")});if(this.role===j0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===j0.Raw.ChatRole.Assistant){let r={role:this.role,content:e};return this.name&&(r.name=this.name),this.toolCalls?.length&&(r.toolCalls=this.toolCalls.map(n=>({function:n.function,id:n.id,type:n.type}))),r}else return this.role===j0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===j0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};nu.MaterializedChatMessage=eh;var fb=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return this.part.tokenUsage&&j0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};nu.MaterializedChatMessageOpaque=fb;var Zm=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,r){this.parent=e,this.part=r}upperBoundTokenCount(e){return 0}isEmpty=!1};nu.MaterializedChatMessageBreakpoint=Zm;var rT=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,r,n,i,o=[],a,l){this.parent=e,this.id=r,this.src=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,oR.once)(async e=>e.tokenLength({type:j0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:QMe(this.src),detail:this.detail}}));isEmpty=!1};nu.MaterializedChatMessageImage=rT;function pb(t){return t instanceof Ey||t instanceof eh}s(pb,"isContainerType");function PMe(t){return t instanceof o9||t instanceof rT||t instanceof fb||t instanceof Zm}s(PMe,"isContentType");function QBt(t){if(!pb(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(QBt,"assertContainerOrChatMessage");function*NMe(t,e=!1){for(let r of t.children)r instanceof o9?(yield{content:r,isTextSibling:e},e=!0):r instanceof rT||r instanceof fb||r instanceof Zm?yield{content:r,isTextSibling:!1}:r instanceof fb?yield{content:r,isTextSibling:!0}:(r&&(yield*NMe(r,e)),e=!1)}s(NMe,"contentChunks");function OBt(t,e){let r;function n(i,o){if(PMe(i))(!r||i.priority<r.node.priority)&&(r={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)n(a,o);o.pop()}}if(s(n,"findLowestInTree"),n(t,[]),!r)throw new Error("No lowest priority node found");s9(r.node,e)}s(OBt,"removeLowestPriorityLegacy");var RMe=new WeakMap;function LMe(t){let e=RMe.get(t);if(e!==void 0)return e;let r=!1;return t instanceof Zm?r=!0:t instanceof eh?r=t.children.some(n=>n instanceof Zm):t instanceof Ey&&(r=t.children.some(LMe)),RMe.set(t,r),r}s(LMe,"hasCachePoint");function UBt(t){if(t instanceof eh)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof eh)return!1;return!0}s(UBt,"shouldLookForCachePointInNode");function Due(t,e){let r;if(t instanceof Ey&&t.has(1)){OBt(t,e);return}let n=UBt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(n&&LMe(c)&&(r=void 0,c instanceof Zm))){if(c instanceof Ey&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!r||c.priority<r.value.priority)r={chain:a,index:l,value:c};else if(c.priority===r.value.priority){r.lowestNested??=kMe(r.value);let u=kMe(c);u<r.lowestNested&&(r={chain:a,index:l,value:c,lowestNested:u})}}}if(!r)throw new FH(t);PMe(r.value)||r.value instanceof Ey&&r.value.has(2)||pb(r.value)&&!r.value.children.length?s9(r.value,e):Due(r.value,e)}s(Due,"removeLowestPriorityChild");var FH=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let r=[e];for(;r[0].parent;)r.unshift(r[0].parent);let n=r.map(i=>i instanceof eh?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${n.join(" -> ")})`)}};nu.BudgetExceededError=FH;function kMe(t){if(!pb(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let r of t.children)e=Math.min(e,r.priority);return e}s(kMe,"getLowestPriorityAmongChildren");function*FMe(t){yield*t.metadata;for(let e of t.children)pb(e)?yield*FMe(e):yield*e.metadata}s(FMe,"allMetadata");function MMe(t,e,r){for(let n=0;n<e.length;n++){let i=e[n];if(pb(i)){if(i.id===t){let a=e[n];return r.parent=i.parent,e[n]=r,a}let o=i.replaceNode(t,r);if(o)return o}}}s(MMe,"replaceNode");function*BMe(t){let e=[t];for(;e.length>0;){let r=e.pop();yield r,pb(r)&&e.push(...r.children)}}s(BMe,"forEachNode");function qBt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(qBt,"getRoot");function DMe(t){return t instanceof Ey&&t.keepWithId!==void 0}s(DMe,"isKeepWith");var Bue=new Set;function WBt(t,e){let r=new Set;for(let n of BMe(t))DMe(n)&&!Bue.has(n.keepWithId)&&r.add(n.keepWithId);if(r.size===0)return!1;for(let n of r)Bue.add(n);try{let n=qBt(t);for(let i of BMe(n))DMe(i)&&r.has(i.keepWithId)?s9(i,e):i instanceof eh&&i.toolCalls&&(i.toolCalls=GBt(i.toolCalls,o=>!(o.keepWith&&r.has(o.keepWith.id))),i.isEmpty&&s9(i,e))}finally{for(let n of r)Bue.delete(n)}}s(WBt,"removeOtherKeepWiths");function Pue(t,e){if(e.id===t)return e;for(let r of e.children)if(pb(r)){let n=Pue(t,r);if(n)return n}}s(Pue,"findNodeById");function s9(t,e){let r=t.parent;if(!r)return;let n=r.children.indexOf(t);n!==-1&&(r.children.splice(n,1),e.push(t),WBt(t,e),r.isEmpty?s9(r,e):r.onChunksChange())}s(s9,"removeNode");function QMe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let r of Object.keys(e))if(t.startsWith(r))return`data:${e[r]};base64,${t}`;return t}s(QMe,"getEncodedBase64");function GBt(t,e){for(let r=0;r<t.length;r++){if(e(t[r]))continue;let n=t.slice(0,r);for(let i=r+1;i<t.length;i++)e(t[i])&&n.push(t[i]);return n}return t}s(GBt,"filterIfDifferent")});var UMe=G(()=>{"use strict";f();function HBt(t,e,...r){return{ctor:t,props:e,children:r.flat()}}s(HBt,"_vscpp");function OMe(){throw new Error("This should not be invoked!")}s(OMe,"_vscppf");OMe.isFragment=!0;globalThis.vscpp=HBt;globalThis.vscppf=OMe});var Fue=G(MH=>{"use strict";f();Object.defineProperty(MH,"__esModule",{value:!0});MH.PromptElement=void 0;UMe();var Lue=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};MH.PromptElement=Lue});var Vue=G(Oi=>{"use strict";f();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.LogicalWrapper=Oi.IfEmpty=Oi.AbstractKeepWith=Oi.TokenLimit=Oi.Expandable=Oi.Chunk=Oi.LegacyPrioritization=Oi.ToolResult=Oi.PrioritizedList=Oi.Image=Oi.TextChunk=Oi.ToolMessage=Oi.AssistantMessage=Oi.UserMessage=Oi.SystemMessage=Oi.BaseChatMessage=void 0;Oi.isChatMessagePromptElement=jBt;Oi.useKeepWith=YBt;var l9=th(),vp=Fue();function jBt(t){return t instanceof QH||t instanceof OH||t instanceof UH}s(jBt,"isChatMessagePromptElement");var nT=class extends vp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.BaseChatMessage=nT;var QH=class extends nT{static{s(this,"SystemMessage")}constructor(e){e.role=l9.Raw.ChatRole.System,super(e)}};Oi.SystemMessage=QH;var OH=class extends nT{static{s(this,"UserMessage")}constructor(e){e.role=l9.Raw.ChatRole.User,super(e)}};Oi.UserMessage=OH;var UH=class extends nT{static{s(this,"AssistantMessage")}constructor(e){e.role=l9.Raw.ChatRole.Assistant,super(e)}};Oi.AssistantMessage=UH;var VBt=/\s+/g,Mue=class extends nT{static{s(this,"ToolMessage")}constructor(e){e.role=l9.Raw.ChatRole.Tool,super(e)}};Oi.ToolMessage=Mue;var qH=class extends vp.PromptElement{static{s(this,"TextChunk")}async prepare(e,r,n){let i=this.props.breakOnWhitespace?VBt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await $Bt(e,i,o,n);return vscpp(vscppf,null,a,l)}render(e){return e}};Oi.TextChunk=qH;async function $Bt(t,e,r,n){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<r.length;){let a;typeof e=="string"?a=r.indexOf(e,o===-1?0:o+e.length):a=e.exec(r)?.index??-1,a===-1&&(a=r.length);let l=i+r.slice(Math.max(0,o),a);if(await t.countTokens({type:l9.Raw.ChatCompletionContentPartKind.Text,text:l},n)>t.tokenBudget)return i;i=l,o=a}return i}s($Bt,"getTextContentBelowBudget");var Que=class extends vp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Image=Que;var Oue=class extends vp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:r=0,descending:n}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=n?r-o:r-e.length+o;return typeof i!="object"?vscpp(qH,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Oi.PrioritizedList=Oue;var Uue=class extends vp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Oi.ToolResult=Uue;var que=class extends vp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LegacyPrioritization=que;var Wue=class extends vp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.Chunk=Wue;var Gue=class extends vp.PromptElement{static{s(this,"Expandable")}async render(e,r){return vscpp(vscppf,null,await this.props.value(r))}};Oi.Expandable=Gue;var Hue=class extends vp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.TokenLimit=Hue;var WH=class extends vp.PromptElement{static{s(this,"AbstractKeepWith")}};Oi.AbstractKeepWith=WH;var zBt=0;function YBt(){let t=zBt++;return class extends WH{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(YBt,"useKeepWith");var jue=class extends vp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(a9,null,this.props.alt),vscpp(a9,{flexGrow:1},this.props.children))}};Oi.IfEmpty=jue;var a9=class extends vp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Oi.LogicalWrapper=a9});var WMe=G(c9=>{"use strict";f();Object.defineProperty(c9,"__esModule",{value:!0});c9.localize=KBt;c9.localize2=JBt;c9.getConfiguredDefaultLocale=XBt;function qMe(t,e){let r;return e.length===0?r=t:r=t.replace(/\{(\d+)\}/g,function(n,i){let o=i[0];return typeof e[o]<"u"?e[o]:n}),r}s(qMe,"_format");function KBt(t,e,...r){return qMe(e,r)}s(KBt,"localize");function JBt(t,e,...r){let n=qMe(e,r);return{original:n,value:n}}s(JBt,"localize2");function XBt(t){}s(XBt,"getConfiguredDefaultLocale")});var Kue=G(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=e8t;Qt.isLittleEndian=t8t;Qt.isBigSurOrNewer=r8t;var GMe=WMe();Qt.LANGUAGE_DEFAULT="en";var f9=!1,p9=!1,d9=!1,$Me=!1,zMe=!1,zue=!1,YMe=!1,Yue=!1,KMe=!1,JMe=!1,u9,GH=Qt.LANGUAGE_DEFAULT,$ue=Qt.LANGUAGE_DEFAULT,XMe,Iy,Ty=globalThis,V0;typeof Ty.vscode<"u"&&typeof Ty.vscode.process<"u"?V0=Ty.vscode.process:typeof process<"u"&&(V0=process);var ZMe=typeof V0?.versions?.electron=="string",ZBt=ZMe&&V0?.type==="renderer";if(typeof V0=="object"){f9=V0.platform==="win32",p9=V0.platform==="darwin",d9=V0.platform==="linux",$Me=d9&&!!V0.env.SNAP&&!!V0.env.SNAP_REVISION,YMe=ZMe,KMe=!!V0.env.CI||!!V0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,u9=Qt.LANGUAGE_DEFAULT,GH=Qt.LANGUAGE_DEFAULT;let t=V0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),r=e.availableLanguages["*"];u9=e.locale,$ue=e.osLocale,GH=r||Qt.LANGUAGE_DEFAULT,XMe=e._translationsConfigFile}catch{}zMe=!0}else typeof navigator=="object"&&!ZBt?(Iy=navigator.userAgent,f9=Iy.indexOf("Windows")>=0,p9=Iy.indexOf("Macintosh")>=0,Yue=(Iy.indexOf("Macintosh")>=0||Iy.indexOf("iPad")>=0||Iy.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,d9=Iy.indexOf("Linux")>=0,JMe=Iy?.indexOf("Mobi")>=0,zue=!0,u9=GMe.getConfiguredDefaultLocale(GMe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,GH=u9,$ue=navigator.language):console.error("Unable to resolve platform.");function e8t(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(e8t,"PlatformToString");var HH=0;p9?HH=1:f9?HH=3:d9&&(HH=2);Qt.isWindows=f9;Qt.isMacintosh=p9;Qt.isLinux=d9;Qt.isLinuxSnap=$Me;Qt.isNative=zMe;Qt.isElectron=YMe;Qt.isWeb=zue;Qt.isWebWorker=zue&&typeof Ty.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?Ty.origin:void 0;Qt.isIOS=Yue;Qt.isMobile=JMe;Qt.isCI=KMe;Qt.platform=HH;Qt.userAgent=Iy;Qt.language=GH;var HMe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function r(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(r,"isDefaultVariant"),t.isDefaultVariant=r;function n(){return Qt.language==="en"}s(n,"isDefault"),t.isDefault=n})(HMe||(Qt.Language=HMe={}));Qt.locale=u9;Qt.platformLocale=$ue;Qt.translationsConfigFile=XMe;Qt.setTimeout0IsFaster=typeof Ty.postMessage=="function"&&!Ty.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];Ty.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Ty.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();Qt.OS=p9||Yue?2:f9?1:3;var jMe=!0,VMe=!1;function t8t(){if(!VMe){VMe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,jMe=new Uint16Array(t.buffer)[0]===513}return jMe}s(t8t,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function r8t(t){return parseFloat(t)>=20}s(r8t,"isBigSurOrNewer")});var tQe=G(cA=>{"use strict";f();Object.defineProperty(cA,"__esModule",{value:!0});cA.arch=cA.platform=cA.env=cA.cwd=void 0;var eQe=Kue(),iT,Jue=globalThis.vscode;if(typeof Jue<"u"&&typeof Jue.process<"u"){let t=Jue.process;iT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?iT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:iT={get platform(){return eQe.isWindows?"win32":eQe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};cA.cwd=iT.cwd;cA.env=iT.env;cA.platform=iT.platform;cA.arch=iT.arch});var nQe=G(ar=>{"use strict";f();Object.defineProperty(ar,"__esModule",{value:!0});ar.delimiter=ar.sep=ar.toNamespacedPath=ar.parse=ar.format=ar.extname=ar.basename=ar.dirname=ar.relative=ar.resolve=ar.join=ar.isAbsolute=ar.normalize=ar.posix=ar.win32=void 0;var sR=tQe(),n8t=65,i8t=97,o8t=90,s8t=122,gb=46,Kl=47,Md=92,mb=58,a8t=63,jH=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function l8t(t,e){if(t===null||typeof t!="object")throw new jH(e,"Object",t)}s(l8t,"validateObject");function ma(t,e){if(typeof t!="string")throw new jH(e,"string",t)}s(ma,"validateString");var Qd=sR.platform==="win32";function li(t){return t===Kl||t===Md}s(li,"isPathSeparator");function Xue(t){return t===Kl}s(Xue,"isPosixPathSeparator");function hb(t){return t>=n8t&&t<=o8t||t>=i8t&&t<=s8t}s(hb,"isWindowsDeviceRoot");function VH(t,e,r,n){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Kl}if(n(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==gb||i.charCodeAt(i.length-2)!==gb){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===gb&&l!==-1?++l:l=-1}return i}s(VH,"normalizeString");function rQe(t,e){l8t(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${e.ext||""}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(rQe,"_format");ar.win32={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ma(o,"path"),o.length===0)continue}else e.length===0?o=sR.cwd():(o=sR.env[`=${e}`]||sR.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Md)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)li(d)&&(l=1,u=!0);else if(li(d))if(u=!0,li(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!li(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&li(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!li(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else hb(d)&&o.charCodeAt(1)===mb&&(c=o.slice(0,2),l=2,a>2&&li(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(l)}\\${r}`,n=u,u&&e.length>0)break}return r=VH(r,!n,"\\",li),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ma(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return Xue(o)?"\\":t;if(li(o))if(i=!0,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(n=`\\\\${u}\\${t.slice(c,l)}`,r=l)}}}else r=1;else hb(o)&&t.charCodeAt(1)===mb&&(n=t.slice(0,2),r=2,e>2&&li(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?VH(t.slice(r),!i,"\\",li):"";return a.length===0&&!i&&(a="."),a.length>0&&li(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ma(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return li(r)||e>2&&hb(r)&&t.charCodeAt(1)===mb&&li(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];ma(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&li(r.charCodeAt(0))){++i;let o=r.length;o>1&&li(r.charCodeAt(1))&&(++i,o>2&&(li(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&li(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ar.win32.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e)return"";let r=ar.win32.resolve(t),n=ar.win32.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Md;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Md;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Md;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Md;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Md&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(l+m)===Md)return n.slice(l+m+1);if(m===2)return n.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Md?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Md)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${n.slice(l,c)}`:(n.charCodeAt(l)===Md&&++l,n.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ar.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Md){if(e.charCodeAt(1)===Md){let r=e.charCodeAt(2);if(r!==a8t&&r!==gb)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(hb(e.charCodeAt(0))&&e.charCodeAt(1)===mb&&e.charCodeAt(2)===Md)return`\\\\?\\${e}`;return t},dirname(t){ma(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return li(i)?t:".";if(li(i)){if(r=n=1,li(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&li(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!li(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(r=n=l+1)}}}}else hb(i)&&t.charCodeAt(1)===mb&&(r=e>2&&li(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let l=e-1;l>=n;--l)if(li(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&hb(t.charCodeAt(0))&&t.charCodeAt(1)===mb&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(li(c)){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(li(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ma(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===mb&&hb(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(li(c)){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===gb?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:rQe.bind(null,"\\"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return li(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(li(i)){if(n=1,li(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!li(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&li(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!li(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(hb(i)&&t.charCodeAt(1)===mb){if(r<=2)return e.root=e.dir=t,e;if(n=2,li(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,l=-1,c=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),li(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===gb?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var c8t=(()=>{if(Qd){let t=/\\/g;return()=>{let e=sR.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>sR.cwd()})();ar.posix={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:c8t();ma(i,"path"),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Kl)}return e=VH(e,!r,"/",Xue),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,r=t.charCodeAt(t.length-1)===Kl;return t=VH(t,!e,"/",Xue),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ma(t,"path"),t.length>0&&t.charCodeAt(0)===Kl},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ma(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":ar.posix.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e||(t=ar.posix.resolve(t),e=ar.posix.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Kl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Kl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(r+u)===Kl?c=u:u===0&&(c=0));let d="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Kl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Kl,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Kl){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Kl){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Kl){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ma(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Kl){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),l===gb?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:rQe.bind(null,"/"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Kl,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){let d=t.charCodeAt(c);if(d===Kl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===gb?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ar.posix.win32=ar.win32.win32=ar.win32;ar.posix.posix=ar.win32.posix=ar.posix;ar.normalize=Qd?ar.win32.normalize:ar.posix.normalize;ar.isAbsolute=Qd?ar.win32.isAbsolute:ar.posix.isAbsolute;ar.join=Qd?ar.win32.join:ar.posix.join;ar.resolve=Qd?ar.win32.resolve:ar.posix.resolve;ar.relative=Qd?ar.win32.relative:ar.posix.relative;ar.dirname=Qd?ar.win32.dirname:ar.posix.dirname;ar.basename=Qd?ar.win32.basename:ar.posix.basename;ar.extname=Qd?ar.win32.extname:ar.posix.extname;ar.format=Qd?ar.win32.format:ar.posix.format;ar.parse=Qd?ar.win32.parse:ar.posix.parse;ar.toNamespacedPath=Qd?ar.win32.toNamespacedPath:ar.posix.toNamespacedPath;ar.sep=Qd?ar.win32.sep:ar.posix.sep;ar.delimiter=Qd?ar.win32.delimiter:ar.posix.delimiter});var uQe=G(aR=>{"use strict";f();Object.defineProperty(aR,"__esModule",{value:!0});aR.URI=void 0;aR.isUriComponents=A8t;aR.uriToFsPath=KH;var iQe=nQe(),zH=Kue(),u8t=/^\w[\w\d+.-]*$/,d8t=/^\//,f8t=/^\/\//;function p8t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!u8t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!d8t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(f8t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(p8t,"_validateUri");function m8t(t,e){return!t&&!e?"file":t}s(m8t,"_schemeFix");function h8t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==rh&&(e=rh+e):e=rh;break}return e}s(h8t,"_referenceResolution");var Yo="",rh="/",g8t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,YH=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||Yo,this.authority=e.authority||Yo,this.path=e.path||Yo,this.query=e.query||Yo,this.fragment=e.fragment||Yo):(this.scheme=m8t(e,a),this.authority=r||Yo,this.path=h8t(this.scheme,n||Yo),this.query=i||Yo,this.fragment=o||Yo,p8t(this,a))}get fsPath(){return KH(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=Yo),n===void 0?n=this.authority:n===null&&(n=Yo),i===void 0?i=this.path:i===null&&(i=Yo),o===void 0?o=this.query:o===null&&(o=Yo),a===void 0?a=this.fragment:a===null&&(a=Yo),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Ab(r,n,i,o,a)}static parse(e,r=!1){let n=g8t.exec(e);return n?new Ab(n[2]||Yo,$H(n[4]||Yo),$H(n[5]||Yo),$H(n[7]||Yo),$H(n[9]||Yo),r):new Ab(Yo,Yo,Yo,Yo,Yo)}static file(e){let r=Yo;if(zH.isWindows&&(e=e.replace(/\\/g,rh)),e[0]===rh&&e[1]===rh){let n=e.indexOf(rh,2);n===-1?(r=e.substring(2),e=rh):(r=e.substring(2,n),e=e.substring(n)||rh)}return new Ab("file",r,e,Yo,Yo)}static from(e,r){return new Ab(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return zH.isWindows&&e.scheme==="file"?n=t.file(iQe.win32.join(KH(e,!0),...r)).path:n=iQe.posix.join(e.path,...r),e.with({path:n})}toString(e=!1){return Zue(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Ab(e);return r._formatted=e.external??null,r._fsPath=e._sep===aQe?e.fsPath??null:null,r}}else return e}};aR.URI=YH;function A8t(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(A8t,"isUriComponents");var aQe=zH.isWindows?1:void 0,Ab=class extends YH{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=KH(this,!1)),this._fsPath}toString(e=!1){return e?Zue(this,!0):(this._formatted||(this._formatted=Zue(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=aQe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},lQe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function oQe(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let l=lQe[a];l!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=l):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(oQe,"encodeURIComponentFast");function y8t(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=lQe[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(y8t,"encodeURIComponentMinimal");function KH(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,zH.isWindows&&(r=r.replace(/\//g,"\\")),r}s(KH,"uriToFsPath");function Zue(t,e){let r=e?y8t:oQe,n="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=rh,n+=rh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),c&&(n+="#",n+=e?c:oQe(c,!1,!1)),n}s(Zue,"_asFormatted");function cQe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+cQe(t.substr(3)):t}}s(cQe,"decodeURIComponentGraceful");var sQe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function $H(t){return t.match(sQe)?t.replace(sQe,e=>cQe(e)):t}s($H,"percentDecode")});var rde=G(yb=>{"use strict";f();Object.defineProperty(yb,"__esModule",{value:!0});yb.PromptReference=yb.ChatResponseReferencePartStatusKind=yb.PromptMetadata=void 0;var m9=uQe(),ede=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};yb.PromptMetadata=ede;var dQe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(dQe||(yb.ChatResponseReferencePartStatusKind=dQe={}));var tde=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let r=s(n=>"scheme"in n?m9.URI.from(n):{uri:m9.URI.from(n.uri),range:n.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&r(e.anchor.value)}:r(e.anchor),e.iconPath&&("scheme"in e.iconPath?m9.URI.from(e.iconPath):"light"in e.iconPath?{light:m9.URI.from(e.iconPath.light),dark:m9.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,r,n){this.anchor=e,this.iconPath=r,this.options=n}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};yb.PromptReference=tde});var dde=G(cR=>{"use strict";f();Object.defineProperty(cR,"__esModule",{value:!0});cR.PromptRenderer=cR.MetadataMap=void 0;var C8t=Rue(),h9=Nue(),lR=ub(),Ma=Vue(),ude=rde(),fQe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(fQe||(cR.MetadataMap=fQe={}));var ide=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new XH(null,0);_tokenLimits=[];tracer=void 0;constructor(e,r,n,i){this._endpoint=e,this._ctor=r,this._props=n,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,r,n,i){let o=new Map;for(let[c,u]of r.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=gQe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof Ma.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:lR.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await mQe(v,()=>b.prepare?.(g[E],n,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await mQe(v,()=>b.render(v.node.getState(),_,n,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let B=await this._processPromptRenderPiece(new oT(_.tokenBudget,this._endpoint),b,E,k,n,i);E instanceof Ma.Expandable&&this._growables.push({initialConsume:B,elem:b.node}),e.consume(B)}}}async _processPromptRenderPiece(e,r,n,i,o,a){let l=hQe(i),c=new oT(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await x8t(this._tokenizer,r,n,l);return c.consume(u),await this._handlePromptChildren(r,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new oT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,r){let n=await this.renderRaw(e,r);return{...n,messages:(0,lR.toMode)(this._tokenizer.mode,n.messages)}}async renderRaw(e,r){await this._processPromptPieces(new oT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,r);let{container:n,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,r);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:n,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...n.toChatMessages()],l=await n.tokenCount(this._tokenizer),c=[...n.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof uA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(ZH),p=i.map(m=>{if(!(m instanceof uA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(ZH);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,r){let n=this._root.materialize(),i=[...n.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=n.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,r))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:n,allMetadata:i,removed:a}}async _grow(e,r,n,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof Ma.Expandable))throw new Error("unreachable: expected growable");let l=new XH(null,0,o.elem.id),c=new oT(n-r+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:lR.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(r-=o.initialConsume,r+=u,r>=n)break}return!0}_handlePromptChildren(e,r,n,i,o){if(e.ctor===Ma.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,r);return}let a=[];for(let l of r){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},JH(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(n,a,i,o)}_handleIntrinsic(e,r,n,i,o){switch(r){case"meta":return this._handleIntrinsicMeta(e,n,i);case"br":return this._handleIntrinsicLineBreak(e,n,i,n.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,n,i);case"references":return this._handleIntrinsicReferences(e,n,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,n,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,n.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,n,i,o)}throw new Error(`Unknown intrinsic element ${r}!`)}_handleIntrinsicCacheBreakpoint(e,r,n,i){if(n.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(r,i)}_handleIntrinsicMeta(e,r,n){if(n.length>0)throw new Error("<meta /> must not have children!");r.local?e.addMetadata(r.value):this._root.addMetadata(r.value)}_handleIntrinsicLineBreak(e,r,n,i,o){if(n.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,r){let n=e.appendPieceJSON(r.node);if(this.tracer?.includeInEpoch)for(let i of n.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,r,n){if(n.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...r.value)}_handleIntrinsicReferences(e,r,n){if(n.length>0)throw new Error("<reference /> must not have children!");for(let i of r.value)e.addMetadata(new uA(i))}_handleIntrinsicIgnoredFiles(e,r,n){if(n.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...r.value)}_handleExtrinsicTextChunkChildren(e,r,n,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new uA(c));else this._handleIntrinsic(e,l.name,l.props,JH(l.children),r.childIndex)}e.appendStringChild(o.join(""),n?.priority??Number.MAX_SAFE_INTEGER,a,r.childIndex,!0)}};cR.PromptRenderer=ide;async function x8t(t,e,r,n){let i=0;if((0,Ma.isChatMessagePromptElement)(r)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,lR.toMode)(t.mode,o))}for(let o of n)o.kind==="literal"&&(i+=await t.tokenLength({type:lR.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(x8t,"computeTokensConsumedByLiterals");function hQe(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new ade(String(t))):v8t(t)?JH(t.children,e):b8t(t)?JH(t,e):typeof t.ctor=="string"?e.push(new ode(t.ctor,t.props,t.children)):e.push(new sde(t.ctor,t.props,t.children)),e)}s(hQe,"flattenAndReduce");function JH(t,e=[]){for(let r of t)hQe(r,e);return e}s(JH,"flattenAndReduceArr");var ode=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,r,n){this.name=e,this.props=r,this.children=n}},sde=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,r,n){this.ctor=e,this.props=r,this.children=n}},ade=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,r){this.value=e,this.priority=r}},oT=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,r){this.tokenBudget=e,this.endpoint=r}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},XH=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,r,n){let i=new t(null,e);switch(i._metadata=r.references?.map(o=>new uA(ude.PromptReference.fromJSON(o)))??[],i._children=r.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,n);case 2:return g9.fromJSON(i,a,o);default:}}).filter(ZH),r.ctor){case 1:i._objFlags=r.flags??0,i._obj=new Ma.BaseChatMessage(r.props);break;case 2:{if(r.keepWithId!==void 0){let o=n.get(r.keepWithId);o||(o=(0,Ma.useKeepWith)(),n.set(r.keepWithId,o)),i._obj=new o(r.props||{})}else i._obj=new Ma.LogicalWrapper(r.props||{});i._objFlags=r.flags??0;break}case 3:i._obj=new Ma.Image(r.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,r,n=t._nextId++){this.parent=e,this.childIndex=r,this.id=n}setObj(e){this._obj=e,this._obj instanceof Ma.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof Ma.Chunk&&(this._objFlags|=2),this._obj instanceof Ma.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let r=t.fromJSON(this._children.length,e,new Map);return this._children.push(r),r}appendStringChild(e,r,n,i=this._children.length,o=!1){this._children.push(new g9(this,i,e,r,n,o))}appendLineBreak(e,r=this._children.length){this._children.push(new g9(this,r,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((r,n)=>r.childIndex-n.childIndex).map(r=>r.toJSON()).filter(ZH),props:{},references:this._metadata.filter(r=>r instanceof uA).map(r=>r.reference.toJSON())};if(this._obj&&(e.props=nde(this._obj.props,C8t.jsonRetainedProps)),this._obj instanceof Ma.BaseChatMessage)e.ctor=1,Object.assign(e.props,nde(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof Ma.Image)return{...e,ctor:3,props:{...e.props,...nde(this._obj.props,["src","detail"])}};this._obj instanceof Ma.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((r,n)=>r.childIndex-n.childIndex),this._obj instanceof Ma.Image)return new h9.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof Ma.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new h9.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof Ma.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof Ma.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,r=>this._children.map(n=>n.materialize(r)))}else{let r=new h9.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),n=>this._children.map(i=>i.materialize(n)),this._metadata,this._objFlags);return this._obj instanceof Ma.AbstractKeepWith&&(r.keepWithId=this._obj.id),r}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,r=this._children.length){if(!(this._obj instanceof Ma.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new lde({type:lR.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},r))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},lde=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,r){this.part=e,this.childIndex=r}toJSON(){}materialize(e){return new h9.MaterializedChatMessageBreakpoint(e,this.part)}},g9=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,r,n){return new t(e,r,n.text,n.priority,n.references?.map(i=>new uA(ude.PromptReference.fromJSON(i))),n.lineBreakBefore)}kind=2;constructor(e,r,n,i,o,a=!1){this.parent=e,this.childIndex=r,this.text=n,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let r=this.lineBreakBefore?1:this.childIndex===0?2:0;return new h9.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],r)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof uA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function v8t(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(v8t,"isFragmentCtor");function ZH(t){return t!==void 0}s(ZH,"isDefined");var cde=class extends ude.PromptMetadata{static{s(this,"InternalMetadata")}},uA=class extends cde{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function b8t(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(b8t,"isIterable");function nde(t,e){let r={};for(let n of e)t.hasOwnProperty(n)&&(r[n]=t[n]);return r}s(nde,"pickProps");function gQe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(gQe,"atPath");var pQe=new WeakSet;async function mQe(t,e){try{return await e()}catch(r){throw r instanceof Error&&!pQe.has(r)&&r.constructor.name!=="CancellationError"&&(pQe.add(r),r.message+=` (at tsx element ${gQe(t.path)})`),r}}s(mQe,"annotateError")});var AQe=G(ej=>{"use strict";f();Object.defineProperty(ej,"__esModule",{value:!0});ej.VSCodeTokenizer=void 0;var fde=ub(),pde=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=fde.OutputMode.VSCode;constructor(e,r){if(this.countTokens=e,r!==fde.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,r){return e.type===fde.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,r):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};ej.VSCodeTokenizer=pde});var yQe=G(uR=>{"use strict";f();Object.defineProperty(uR,"__esModule",{value:!0});uR.tracerCss=uR.tracerSrc=void 0;uR.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';uR.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var EQe=G(rj=>{"use strict";f();Object.defineProperty(rj,"__esModule",{value:!0});rj.HTMLTracer=void 0;var CQe=yQe(),sT=Nue(),E8t=ub(),mde=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return hde.create({epochs:this.epochs,traceData:vQe(this.traceData)})}serveRouter(e){return new tj({baseAddress:e,epochs:this.epochs,traceData:vQe(this.traceData)})}};rj.HTMLTracer=mde;var tj=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,r){let n=e,i=r,o=new URL(n.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,n,i);break;case`${a}/regen`:this.onRegen(o,n,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:r}=this.opts;return`<body>
			<style>${CQe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(r)};
				const DEFAULT_MODEL = ${JSON.stringify(await xQe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${CQe.tracerSrc}
			</script>
		</body>`}async onRegen(e,r,n){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await xQe(i.tokenizer,a),c=JSON.stringify(l);n.setHeader("Content-Type","application/json"),n.setHeader("Content-Length",Buffer.byteLength(c)),n.end(c)}onRoot(e,r,n){this.getHTML().then(i=>{n.setHeader("Content-Type","text/html"),n.setHeader("Content-Length",Buffer.byteLength(i)),n.end(i)})}},hde=class t extends tj{static{s(this,"RequestServer")}server;static async create(e){let{createServer:r}=await Promise.resolve().then(()=>require("http")),n=r((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{n.listen(0,"127.0.0.1",()=>a(n.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},n);return o}constructor(e,r){super(e),this.server=r}dispose(){this.server.closeAllConnections(),this.server.close()}};async function xQe(t,e){return{container:await bQe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(xQe,"serializeRenderData");async function bQe(t,e,r){let n={metadata:e.metadata.map(T8t),priority:e.priority};if(e instanceof sT.MaterializedChatMessageTextChunk)return{...n,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof sT.MaterializedChatMessageImage)return{...n,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof sT.MaterializedChatMessageOpaque||e instanceof sT.MaterializedChatMessageBreakpoint)return;{let i={...n,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>bQe(t,o,r||e instanceof sT.MaterializedChatMessage)))).filter(o=>!!o),tokens:r?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof sT.GenericMaterializedContainer)return{...i,type:0};if(e instanceof sT.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:E8t.Raw.ChatRole.display(e.role),text:o}}}I8t(e)}s(bQe,"serializeMaterialized");function I8t(t){throw new Error("unreachable")}s(I8t,"assertNever");function T8t(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(T8t,"serializeMetadata");var vQe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var TQe=G(IQe=>{"use strict";f();Object.defineProperty(IQe,"__esModule",{value:!0})});var _Qe=G(wQe=>{"use strict";f();Object.defineProperty(wQe,"__esModule",{value:!0})});var RQe=G(SQe=>{"use strict";f();Object.defineProperty(SQe,"__esModule",{value:!0})});var th=G(Is=>{"use strict";f();var w8t=Is&&Is.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[r]},"get")}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),aT=Is&&Is.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&w8t(e,t,r)};Object.defineProperty(Is,"__esModule",{value:!0});Is.contentType=Is.PromptRenderer=Is.MetadataMap=Is.PromptElement=Is.JSONTree=void 0;Is.renderPrompt=R8t;Is.renderElementJSON=k8t;var gde=ub(),kQe=dde(),_8t=AQe();aT(EQe(),Is);Is.JSONTree=Rue();aT(ub(),Is);aT(Vue(),Is);aT(rde(),Is);aT(TQe(),Is);aT(_Qe(),Is);aT(RQe(),Is);var S8t=Fue();Object.defineProperty(Is,"PromptElement",{enumerable:!0,get:s(function(){return S8t.PromptElement},"get")});var BQe=dde();Object.defineProperty(Is,"MetadataMap",{enumerable:!0,get:s(function(){return BQe.MetadataMap},"get")});Object.defineProperty(Is,"PromptRenderer",{enumerable:!0,get:s(function(){return BQe.PromptRenderer},"get")});async function R8t(t,e,r,n,i,o,a=gde.OutputMode.VSCode){let l="countTokens"in n?new _8t.VSCodeTokenizer((p,m)=>n.countTokens(p,m),a):n,c=new kQe.PromptRenderer(r,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(R8t,"renderPrompt");Is.contentType="application/vnd.codechat.prompt+json.1";function k8t(t,e,r,n){return new kQe.PromptRenderer({modelMaxPromptTokens:r?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:gde.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===gde.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(r?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(n)}s(k8t,"renderElementJSON")});var $9=G((KIn,yUe)=>{f();var uPt="2.0.0",dPt=Number.MAX_SAFE_INTEGER||9007199254740991,fPt=16,pPt=250,mPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];yUe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:fPt,MAX_SAFE_BUILD_LENGTH:pPt,MAX_SAFE_INTEGER:dPt,RELEASE_TYPES:mPt,SEMVER_SPEC_VERSION:uPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var z9=G((XIn,CUe)=>{f();var hPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};CUe.exports=hPt});var QR=G((vA,xUe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:B0e,MAX_SAFE_BUILD_LENGTH:gPt,MAX_LENGTH:APt}=$9(),yPt=z9();vA=xUe.exports={};var CPt=vA.re=[],xPt=vA.safeRe=[],hr=vA.src=[],vPt=vA.safeSrc=[],gr=vA.t={},bPt=0,D0e="[a-zA-Z0-9-]",EPt=[["\\s",1],["\\d",APt],[D0e,gPt]],IPt=s(t=>{for(let[e,r]of EPt)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},"makeSafeRegex"),ei=s((t,e,r)=>{let n=IPt(e),i=bPt++;yPt(t,i,e),gr[t]=i,hr[i]=e,vPt[i]=n,CPt[i]=new RegExp(e,r?"g":void 0),xPt[i]=new RegExp(n,r?"g":void 0)},"createToken");ei("NUMERICIDENTIFIER","0|[1-9]\\d*");ei("NUMERICIDENTIFIERLOOSE","\\d+");ei("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${D0e}*`);ei("MAINVERSION",`(${hr[gr.NUMERICIDENTIFIER]})\\.(${hr[gr.NUMERICIDENTIFIER]})\\.(${hr[gr.NUMERICIDENTIFIER]})`);ei("MAINVERSIONLOOSE",`(${hr[gr.NUMERICIDENTIFIERLOOSE]})\\.(${hr[gr.NUMERICIDENTIFIERLOOSE]})\\.(${hr[gr.NUMERICIDENTIFIERLOOSE]})`);ei("PRERELEASEIDENTIFIER",`(?:${hr[gr.NUMERICIDENTIFIER]}|${hr[gr.NONNUMERICIDENTIFIER]})`);ei("PRERELEASEIDENTIFIERLOOSE",`(?:${hr[gr.NUMERICIDENTIFIERLOOSE]}|${hr[gr.NONNUMERICIDENTIFIER]})`);ei("PRERELEASE",`(?:-(${hr[gr.PRERELEASEIDENTIFIER]}(?:\\.${hr[gr.PRERELEASEIDENTIFIER]})*))`);ei("PRERELEASELOOSE",`(?:-?(${hr[gr.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${hr[gr.PRERELEASEIDENTIFIERLOOSE]})*))`);ei("BUILDIDENTIFIER",`${D0e}+`);ei("BUILD",`(?:\\+(${hr[gr.BUILDIDENTIFIER]}(?:\\.${hr[gr.BUILDIDENTIFIER]})*))`);ei("FULLPLAIN",`v?${hr[gr.MAINVERSION]}${hr[gr.PRERELEASE]}?${hr[gr.BUILD]}?`);ei("FULL",`^${hr[gr.FULLPLAIN]}$`);ei("LOOSEPLAIN",`[v=\\s]*${hr[gr.MAINVERSIONLOOSE]}${hr[gr.PRERELEASELOOSE]}?${hr[gr.BUILD]}?`);ei("LOOSE",`^${hr[gr.LOOSEPLAIN]}$`);ei("GTLT","((?:<|>)?=?)");ei("XRANGEIDENTIFIERLOOSE",`${hr[gr.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ei("XRANGEIDENTIFIER",`${hr[gr.NUMERICIDENTIFIER]}|x|X|\\*`);ei("XRANGEPLAIN",`[v=\\s]*(${hr[gr.XRANGEIDENTIFIER]})(?:\\.(${hr[gr.XRANGEIDENTIFIER]})(?:\\.(${hr[gr.XRANGEIDENTIFIER]})(?:${hr[gr.PRERELEASE]})?${hr[gr.BUILD]}?)?)?`);ei("XRANGEPLAINLOOSE",`[v=\\s]*(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:\\.(${hr[gr.XRANGEIDENTIFIERLOOSE]})(?:${hr[gr.PRERELEASELOOSE]})?${hr[gr.BUILD]}?)?)?`);ei("XRANGE",`^${hr[gr.GTLT]}\\s*${hr[gr.XRANGEPLAIN]}$`);ei("XRANGELOOSE",`^${hr[gr.GTLT]}\\s*${hr[gr.XRANGEPLAINLOOSE]}$`);ei("COERCEPLAIN",`(^|[^\\d])(\\d{1,${B0e}})(?:\\.(\\d{1,${B0e}}))?(?:\\.(\\d{1,${B0e}}))?`);ei("COERCE",`${hr[gr.COERCEPLAIN]}(?:$|[^\\d])`);ei("COERCEFULL",hr[gr.COERCEPLAIN]+`(?:${hr[gr.PRERELEASE]})?(?:${hr[gr.BUILD]})?(?:$|[^\\d])`);ei("COERCERTL",hr[gr.COERCE],!0);ei("COERCERTLFULL",hr[gr.COERCEFULL],!0);ei("LONETILDE","(?:~>?)");ei("TILDETRIM",`(\\s*)${hr[gr.LONETILDE]}\\s+`,!0);vA.tildeTrimReplace="$1~";ei("TILDE",`^${hr[gr.LONETILDE]}${hr[gr.XRANGEPLAIN]}$`);ei("TILDELOOSE",`^${hr[gr.LONETILDE]}${hr[gr.XRANGEPLAINLOOSE]}$`);ei("LONECARET","(?:\\^)");ei("CARETTRIM",`(\\s*)${hr[gr.LONECARET]}\\s+`,!0);vA.caretTrimReplace="$1^";ei("CARET",`^${hr[gr.LONECARET]}${hr[gr.XRANGEPLAIN]}$`);ei("CARETLOOSE",`^${hr[gr.LONECARET]}${hr[gr.XRANGEPLAINLOOSE]}$`);ei("COMPARATORLOOSE",`^${hr[gr.GTLT]}\\s*(${hr[gr.LOOSEPLAIN]})$|^$`);ei("COMPARATOR",`^${hr[gr.GTLT]}\\s*(${hr[gr.FULLPLAIN]})$|^$`);ei("COMPARATORTRIM",`(\\s*)${hr[gr.GTLT]}\\s*(${hr[gr.LOOSEPLAIN]}|${hr[gr.XRANGEPLAIN]})`,!0);vA.comparatorTrimReplace="$1$2$3";ei("HYPHENRANGE",`^\\s*(${hr[gr.XRANGEPLAIN]})\\s+-\\s+(${hr[gr.XRANGEPLAIN]})\\s*$`);ei("HYPHENRANGELOOSE",`^\\s*(${hr[gr.XRANGEPLAINLOOSE]})\\s+-\\s+(${hr[gr.XRANGEPLAINLOOSE]})\\s*$`);ei("STAR","(<|>)?=?\\s*\\*");ei("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ei("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var vV=G((r2n,vUe)=>{f();var TPt=Object.freeze({loose:!0}),wPt=Object.freeze({}),_Pt=s(t=>t?typeof t!="object"?TPt:t:wPt,"parseOptions");vUe.exports=_Pt});var P0e=G((o2n,IUe)=>{f();var bUe=/^[0-9]+$/,EUe=s((t,e)=>{let r=bUe.test(t),n=bUe.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},"compareIdentifiers"),SPt=s((t,e)=>EUe(e,t),"rcompareIdentifiers");IUe.exports={compareIdentifiers:EUe,rcompareIdentifiers:SPt}});var au=G((l2n,SUe)=>{f();var bV=z9(),{MAX_LENGTH:TUe,MAX_SAFE_INTEGER:EV}=$9(),{safeRe:wUe,safeSrc:_Ue,t:IV}=QR(),RPt=vV(),{compareIdentifiers:OR}=P0e(),N0e=class t{static{s(this,"SemVer")}constructor(e,r){if(r=RPt(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>TUe)throw new TypeError(`version is longer than ${TUe} characters`);bV("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?wUe[IV.LOOSE]:wUe[IV.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>EV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>EV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>EV||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<EV)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(bV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),OR(this.major,e.major)||OR(this.minor,e.minor)||OR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(bV("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return OR(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(bV("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return OR(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=new RegExp(`^${this.options.loose?_Ue[IV.PRERELEASELOOSE]:_Ue[IV.PRERELEASE]}$`),o=`-${r}`.match(i);if(!o||o[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),OR(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};SUe.exports=N0e});var TT=G((d2n,kUe)=>{f();var RUe=au(),kPt=s((t,e,r=!1)=>{if(t instanceof RUe)return t;try{return new RUe(t,e)}catch(n){if(!r)return null;throw n}},"parse");kUe.exports=kPt});var DUe=G((m2n,BUe)=>{f();var BPt=TT(),DPt=s((t,e)=>{let r=BPt(t,e);return r?r.version:null},"valid");BUe.exports=DPt});var NUe=G((A2n,PUe)=>{f();var PPt=TT(),NPt=s((t,e)=>{let r=PPt(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null},"clean");PUe.exports=NPt});var MUe=G((x2n,FUe)=>{f();var LUe=au(),LPt=s((t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new LUe(t instanceof LUe?t.version:t,r).inc(e,n,i).version}catch{return null}},"inc");FUe.exports=LPt});var UUe=G((E2n,OUe)=>{f();var QUe=TT(),FPt=s((t,e)=>{let r=QUe(t,null,!0),n=QUe(e,null,!0),i=r.compare(n);if(i===0)return null;let o=i>0,a=o?r:n,l=o?n:r,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return r.major!==n.major?d+"major":r.minor!==n.minor?d+"minor":r.patch!==n.patch?d+"patch":"prerelease"},"diff");OUe.exports=FPt});var WUe=G((w2n,qUe)=>{f();var MPt=au(),QPt=s((t,e)=>new MPt(t,e).major,"major");qUe.exports=QPt});var HUe=G((R2n,GUe)=>{f();var OPt=au(),UPt=s((t,e)=>new OPt(t,e).minor,"minor");GUe.exports=UPt});var VUe=G((D2n,jUe)=>{f();var qPt=au(),WPt=s((t,e)=>new qPt(t,e).patch,"patch");jUe.exports=WPt});var zUe=G((L2n,$Ue)=>{f();var GPt=TT(),HPt=s((t,e)=>{let r=GPt(t,e);return r&&r.prerelease.length?r.prerelease:null},"prerelease");$Ue.exports=HPt});var Ip=G((Q2n,KUe)=>{f();var YUe=au(),jPt=s((t,e,r)=>new YUe(t,r).compare(new YUe(e,r)),"compare");KUe.exports=jPt});var XUe=G((q2n,JUe)=>{f();var VPt=Ip(),$Pt=s((t,e,r)=>VPt(e,t,r),"rcompare");JUe.exports=$Pt});var eqe=G((H2n,ZUe)=>{f();var zPt=Ip(),YPt=s((t,e)=>zPt(t,e,!0),"compareLoose");ZUe.exports=YPt});var TV=G(($2n,rqe)=>{f();var tqe=au(),KPt=s((t,e,r)=>{let n=new tqe(t,r),i=new tqe(e,r);return n.compare(i)||n.compareBuild(i)},"compareBuild");rqe.exports=KPt});var iqe=G((K2n,nqe)=>{f();var JPt=TV(),XPt=s((t,e)=>t.sort((r,n)=>JPt(r,n,e)),"sort");nqe.exports=XPt});var sqe=G((Z2n,oqe)=>{f();var ZPt=TV(),e9t=s((t,e)=>t.sort((r,n)=>ZPt(n,r,e)),"rsort");oqe.exports=e9t});var Y9=G((rTn,aqe)=>{f();var t9t=Ip(),r9t=s((t,e,r)=>t9t(t,e,r)>0,"gt");aqe.exports=r9t});var wV=G((oTn,lqe)=>{f();var n9t=Ip(),i9t=s((t,e,r)=>n9t(t,e,r)<0,"lt");lqe.exports=i9t});var L0e=G((lTn,cqe)=>{f();var o9t=Ip(),s9t=s((t,e,r)=>o9t(t,e,r)===0,"eq");cqe.exports=s9t});var F0e=G((dTn,uqe)=>{f();var a9t=Ip(),l9t=s((t,e,r)=>a9t(t,e,r)!==0,"neq");uqe.exports=l9t});var _V=G((mTn,dqe)=>{f();var c9t=Ip(),u9t=s((t,e,r)=>c9t(t,e,r)>=0,"gte");dqe.exports=u9t});var SV=G((ATn,fqe)=>{f();var d9t=Ip(),f9t=s((t,e,r)=>d9t(t,e,r)<=0,"lte");fqe.exports=f9t});var M0e=G((xTn,pqe)=>{f();var p9t=L0e(),m9t=F0e(),h9t=Y9(),g9t=_V(),A9t=wV(),y9t=SV(),C9t=s((t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return p9t(t,r,n);case"!=":return m9t(t,r,n);case">":return h9t(t,r,n);case">=":return g9t(t,r,n);case"<":return A9t(t,r,n);case"<=":return y9t(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");pqe.exports=C9t});var hqe=G((ETn,mqe)=>{f();var x9t=au(),v9t=TT(),{safeRe:RV,t:kV}=QR(),b9t=s((t,e)=>{if(t instanceof x9t)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?RV[kV.COERCEFULL]:RV[kV.COERCE]);else{let c=e.includePrerelease?RV[kV.COERCERTLFULL]:RV[kV.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",l=e.includePrerelease&&r[6]?`+${r[6]}`:"";return v9t(`${n}.${i}.${o}${a}${l}`,e)},"coerce");mqe.exports=b9t});var Aqe=G((wTn,gqe)=>{f();var Q0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};gqe.exports=Q0e});var Tp=G((RTn,vqe)=>{f();var E9t=/\s+/g,O0e=class t{static{s(this,"Range")}constructor(e,r){if(r=T9t(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof U0e)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(E9t," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!Cqe(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&D9t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&k9t)|(this.options.loose&&B9t))+":"+e,i=yqe.get(n);if(i)return i;let o=this.options.loose,a=o?qd[Hu.HYPHENRANGELOOSE]:qd[Hu.HYPHENRANGE];e=e.replace(a,W9t(this.options.includePrerelease)),Ts("hyphen replace",e),e=e.replace(qd[Hu.COMPARATORTRIM],_9t),Ts("comparator trim",e),e=e.replace(qd[Hu.TILDETRIM],S9t),Ts("tilde trim",e),e=e.replace(qd[Hu.CARETTRIM],R9t),Ts("caret trim",e);let l=e.split(" ").map(p=>P9t(p,this.options)).join(" ").split(/\s+/).map(p=>q9t(p,this.options));o&&(l=l.filter(p=>(Ts("loose invalid filter",p,this.options),!!p.match(qd[Hu.COMPARATORLOOSE])))),Ts("range list",l);let c=new Map,u=l.map(p=>new U0e(p,this.options));for(let p of u){if(Cqe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return yqe.set(n,d),d}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>xqe(n,r)&&e.set.some(i=>xqe(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new w9t(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(G9t(this.set[r],e,this.options))return!0;return!1}};vqe.exports=O0e;var I9t=Aqe(),yqe=new I9t,T9t=vV(),U0e=K9(),Ts=z9(),w9t=au(),{safeRe:qd,t:Hu,comparatorTrimReplace:_9t,tildeTrimReplace:S9t,caretTrimReplace:R9t}=QR(),{FLAG_INCLUDE_PRERELEASE:k9t,FLAG_LOOSE:B9t}=$9(),Cqe=s(t=>t.value==="<0.0.0-0","isNullSet"),D9t=s(t=>t.value==="","isAny"),xqe=s((t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},"isSatisfiable"),P9t=s((t,e)=>(Ts("comp",t,e),t=F9t(t,e),Ts("caret",t),t=N9t(t,e),Ts("tildes",t),t=Q9t(t,e),Ts("xrange",t),t=U9t(t,e),Ts("stars",t),t),"parseComparator"),ju=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),N9t=s((t,e)=>t.trim().split(/\s+/).map(r=>L9t(r,e)).join(" "),"replaceTildes"),L9t=s((t,e)=>{let r=e.loose?qd[Hu.TILDELOOSE]:qd[Hu.TILDE];return t.replace(r,(n,i,o,a,l)=>{Ts("tilde",t,n,i,o,a,l);let c;return ju(i)?c="":ju(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:ju(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(Ts("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Ts("tilde return",c),c})},"replaceTilde"),F9t=s((t,e)=>t.trim().split(/\s+/).map(r=>M9t(r,e)).join(" "),"replaceCarets"),M9t=s((t,e)=>{Ts("caret",t,e);let r=e.loose?qd[Hu.CARETLOOSE]:qd[Hu.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,l,c)=>{Ts("caret",t,i,o,a,l,c);let u;return ju(o)?u="":ju(a)?u=`>=${o}.0.0${n} <${+o+1}.0.0-0`:ju(l)?o==="0"?u=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:c?(Ts("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(Ts("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${n} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${n} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),Ts("caret return",u),u})},"replaceCaret"),Q9t=s((t,e)=>(Ts("replaceXRanges",t,e),t.split(/\s+/).map(r=>O9t(r,e)).join(" ")),"replaceXRanges"),O9t=s((t,e)=>{t=t.trim();let r=e.loose?qd[Hu.XRANGELOOSE]:qd[Hu.XRANGE];return t.replace(r,(n,i,o,a,l,c)=>{Ts("xRange",t,n,i,o,a,l,c);let u=ju(o),d=u||ju(a),p=d||ju(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),n=`${i+o}.${a}.${l}${c}`):d?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(n=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Ts("xRange return",n),n})},"replaceXRange"),U9t=s((t,e)=>(Ts("replaceStars",t,e),t.trim().replace(qd[Hu.STAR],"")),"replaceStars"),q9t=s((t,e)=>(Ts("replaceGTE0",t,e),t.trim().replace(qd[e.includePrerelease?Hu.GTE0PRE:Hu.GTE0],"")),"replaceGTE0"),W9t=s(t=>(e,r,n,i,o,a,l,c,u,d,p,m)=>(ju(n)?r="":ju(i)?r=`>=${n}.0.0${t?"-0":""}`:ju(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,ju(u)?c="":ju(d)?c=`<${+u+1}.0.0-0`:ju(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),"hyphenReplace"),G9t=s((t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ts(t[n].semver),t[n].semver!==U0e.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var K9=G((DTn,_qe)=>{f();var J9=Symbol("SemVer ANY"),G0e=class t{static{s(this,"Comparator")}static get ANY(){return J9}constructor(e,r){if(r=bqe(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),W0e("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===J9?this.value="":this.value=this.operator+this.semver.version,W0e("comp",this)}parse(e){let r=this.options.loose?Eqe[Iqe.COMPARATORLOOSE]:Eqe[Iqe.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Tqe(n[2],this.options.loose):this.semver=J9}toString(){return this.value}test(e){if(W0e("Comparator.test",e,this.options.loose),this.semver===J9||e===J9)return!0;if(typeof e=="string")try{e=new Tqe(e,this.options)}catch{return!1}return q0e(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new wqe(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new wqe(this.value,r).test(e.semver):(r=bqe(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||q0e(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||q0e(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};_qe.exports=G0e;var bqe=vV(),{safeRe:Eqe,t:Iqe}=QR(),q0e=M0e(),W0e=z9(),Tqe=au(),wqe=Tp()});var X9=G((LTn,Sqe)=>{f();var H9t=Tp(),j9t=s((t,e,r)=>{try{e=new H9t(e,r)}catch{return!1}return e.test(t)},"satisfies");Sqe.exports=j9t});var kqe=G((QTn,Rqe)=>{f();var V9t=Tp(),$9t=s((t,e)=>new V9t(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" ")),"toComparators");Rqe.exports=$9t});var Dqe=G((qTn,Bqe)=>{f();var z9t=au(),Y9t=Tp(),K9t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new Y9t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new z9t(n,r))}),n},"maxSatisfying");Bqe.exports=K9t});var Nqe=G((HTn,Pqe)=>{f();var J9t=au(),X9t=Tp(),Z9t=s((t,e,r)=>{let n=null,i=null,o=null;try{o=new X9t(e,r)}catch{return null}return t.forEach(a=>{o.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new J9t(n,r))}),n},"minSatisfying");Pqe.exports=Z9t});var Mqe=G(($Tn,Fqe)=>{f();var H0e=au(),e6t=Tp(),Lqe=Y9(),t6t=s((t,e)=>{t=new e6t(t,e);let r=new H0e("0.0.0");if(t.test(r)||(r=new H0e("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],o=null;i.forEach(a=>{let l=new H0e(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||Lqe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!r||Lqe(r,o))&&(r=o)}return r&&t.test(r)?r:null},"minVersion");Fqe.exports=t6t});var Oqe=G((KTn,Qqe)=>{f();var r6t=Tp(),n6t=s((t,e)=>{try{return new r6t(t,e).range||"*"}catch{return null}},"validRange");Qqe.exports=n6t});var BV=G((ZTn,Gqe)=>{f();var i6t=au(),Wqe=K9(),{ANY:o6t}=Wqe,s6t=Tp(),a6t=X9(),Uqe=Y9(),qqe=wV(),l6t=SV(),c6t=_V(),u6t=s((t,e,r,n)=>{t=new i6t(t,n),e=new s6t(e,n);let i,o,a,l,c;switch(r){case">":i=Uqe,o=l6t,a=qqe,l=">",c=">=";break;case"<":i=qqe,o=c6t,a=Uqe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a6t(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===o6t&&(h=new Wqe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,n)?p=h:a(h.semver,m.semver,n)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");Gqe.exports=u6t});var jqe=G((rwn,Hqe)=>{f();var d6t=BV(),f6t=s((t,e,r)=>d6t(t,e,">",r),"gtr");Hqe.exports=f6t});var $qe=G((own,Vqe)=>{f();var p6t=BV(),m6t=s((t,e,r)=>p6t(t,e,"<",r),"ltr");Vqe.exports=m6t});var Kqe=G((lwn,Yqe)=>{f();var zqe=Tp(),h6t=s((t,e,r)=>(t=new zqe(t,r),e=new zqe(e,r),t.intersects(e,r)),"intersects");Yqe.exports=h6t});var Xqe=G((dwn,Jqe)=>{f();var g6t=X9(),A6t=Ip();Jqe.exports=(t,e,r)=>{let n=[],i=null,o=null,a=t.sort((d,p)=>A6t(d,p,r));for(let d of a)g6t(d,e,r)?(o=d,i||(i=d)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let l=[];for(let[d,p]of n)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var iWe=G((pwn,nWe)=>{f();var Zqe=Tp(),V0e=K9(),{ANY:j0e}=V0e,Z9=X9(),$0e=Ip(),y6t=s((t,e,r={})=>{if(t===e)return!0;t=new Zqe(t,r),e=new Zqe(e,r);let n=!1;e:for(let i of t.set){for(let o of e.set){let a=x6t(i,o,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},"subset"),C6t=[new V0e(">=0.0.0-0")],eWe=[new V0e(">=0.0.0")],x6t=s((t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===j0e){if(e.length===1&&e[0].semver===j0e)return!0;r.includePrerelease?t=C6t:t=eWe}if(e.length===1&&e[0].semver===j0e){if(r.includePrerelease)return!0;e=eWe}let n=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=tWe(i,h,r):h.operator==="<"||h.operator==="<="?o=rWe(o,h,r):n.add(h.semver);if(n.size>1)return null;let a;if(i&&o){if(a=$0e(i.semver,o.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of n){if(i&&!Z9(h,String(i),r)||o&&!Z9(h,String(o),r))return null;for(let g of e)if(!Z9(h,String(g),r))return!1;return!0}let l,c,u,d,p=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=tWe(i,h,r),l===h&&l!==i)return!1}else if(i.operator===">="&&!Z9(i.semver,String(h),r))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=rWe(o,h,r),c===h&&c!==o)return!1}else if(o.operator==="<="&&!Z9(o.semver,String(h),r))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),tWe=s((t,e,r)=>{if(!t)return e;let n=$0e(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),rWe=s((t,e,r)=>{if(!t)return e;let n=$0e(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");nWe.exports=y6t});var Y0e=G((gwn,aWe)=>{f();var z0e=QR(),oWe=$9(),v6t=au(),sWe=P0e(),b6t=TT(),E6t=DUe(),I6t=NUe(),T6t=MUe(),w6t=UUe(),_6t=WUe(),S6t=HUe(),R6t=VUe(),k6t=zUe(),B6t=Ip(),D6t=XUe(),P6t=eqe(),N6t=TV(),L6t=iqe(),F6t=sqe(),M6t=Y9(),Q6t=wV(),O6t=L0e(),U6t=F0e(),q6t=_V(),W6t=SV(),G6t=M0e(),H6t=hqe(),j6t=K9(),V6t=Tp(),$6t=X9(),z6t=kqe(),Y6t=Dqe(),K6t=Nqe(),J6t=Mqe(),X6t=Oqe(),Z6t=BV(),eNt=jqe(),tNt=$qe(),rNt=Kqe(),nNt=Xqe(),iNt=iWe();aWe.exports={parse:b6t,valid:E6t,clean:I6t,inc:T6t,diff:w6t,major:_6t,minor:S6t,patch:R6t,prerelease:k6t,compare:B6t,rcompare:D6t,compareLoose:P6t,compareBuild:N6t,sort:L6t,rsort:F6t,gt:M6t,lt:Q6t,eq:O6t,neq:U6t,gte:q6t,lte:W6t,cmp:G6t,coerce:H6t,Comparator:j6t,Range:V6t,satisfies:$6t,toComparators:z6t,maxSatisfying:Y6t,minSatisfying:K6t,minVersion:J6t,validRange:X6t,outside:Z6t,gtr:eNt,ltr:tNt,intersects:rNt,simplifyRange:nNt,subset:iNt,SemVer:v6t,re:z0e.re,src:z0e.src,tokens:z0e.t,SEMVER_SPEC_VERSION:oWe.SEMVER_SPEC_VERSION,RELEASE_TYPES:oWe.RELEASE_TYPES,compareIdentifiers:sWe.compareIdentifiers,rcompareIdentifiers:sWe.rcompareIdentifiers}});var Z0=G(r6=>{"use strict";f();Object.defineProperty(r6,"__esModule",{value:!0});r6.dedent=void 0;function RWe(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=Array.from(typeof t=="string"?[t]:t);n[n.length-1]=n[n.length-1].replace(/\r?\n([\t ]*)$/,"");var i=n.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");n=n.map(function(l){return l.replace(o,`
`)})}n[0]=n[0].replace(/^\r?\n/,"");var a=n[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+n[c+1]}),a}s(RWe,"dedent");r6.dedent=RWe;r6.default=RWe});var MWe=G(cfe=>{"use strict";f();Object.defineProperty(cfe,"__esModule",{value:!0});cfe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var GWe=G(dfe=>{"use strict";f();Object.defineProperty(dfe,"__esModule",{value:!0});var QWe=require("worker_threads"),TNt=require("v8"),wNt=require("os"),OWe=MWe(),UV="ready",UWe="spawning",_Nt="busy",qV="off",qWe=wNt.cpus().length,WWe=process.version.replace("v","").split("."),SNt=parseInt(WWe[0]),RNt=parseInt(WWe[1]),ufe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=qWe,this.taskQueue=[],this.workers=[]}resurrect(e){let r=new QWe.Worker(OWe.workerFile,{eval:!0});e.status=UWe,e.worker=r,r.once("online",()=>process.nextTick(()=>{e.status=UV,r.removeAllListeners(),this.tick()})),r.once("error",n=>{console.error(n),e.status=qV,r.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===qV).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===UV){e=this.workers[c];break}if(typeof e>"u")return;let r=this.taskQueue.shift();e.status=_Nt;let{worker:n}=e,{handler:i,config:o,resolve:a,reject:l}=r;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=TNt.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;n.once("message",m=>{if(this.free(n),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),n.once("error",m=>{e.status=qV,l(m),this.tick()}),n.postMessage(p)}catch(c){this.free(n),l(c)}}enqueue({handler:e,config:r,resolve:n,reject:i}){this.taskQueue.push({handler:e,config:r,resolve:n,reject:i}),this.tick()}free(e){for(let r=0;r<this.workers.length;r++)if(e.threadId===this.workers[r].worker.threadId){this.workers[r].status=UV,this.workers[r].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:qWe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((r,n)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new QWe.Worker(OWe.workerFile,{eval:!0});this.workers.push({status:UWe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=UV,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&r()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=qV,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&n(u)})(a))}})}async teardown(){if(SNt>=12&&RNt>=5){let e=[];for(let{worker:r}of this.workers)e.push(r.terminate());await Promise.all(e),this.workers=[]}else await new Promise(r=>{let n=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{n++,n===this.workers.length&&(this.workers=[],r())})})}};dfe.default=new ufe});var WV=G(wT=>{"use strict";f();var kNt=wT&&wT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wT,"__esModule",{value:!0});var n6=kNt(GWe()),BNt=`job needs a function.
Try with:
> job(() => {...}, config)`,DNt=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function PNt(t,e={ctx:{},data:{}}){return new Promise((r,n)=>{if(typeof t!="function")return n(new Error(BNt));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return n(new Error(DNt));n6.default.enqueue({handler:t,config:e,resolve:r,reject:n})})}s(PNt,"job");wT.job=PNt;wT.stop=n6.default.teardown.bind(n6.default);wT.start=n6.default.setup.bind(n6.default)});var sGe=G(_T=>{"use strict";f();var _A=_T&&_T.__classPrivateFieldGet||function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},vfe=_T&&_T.__classPrivateFieldSet||function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Oy,Nb;Object.defineProperty(_T,"__esModule",{value:!0});var bfe=class{static{s(this,"AwaitLock")}constructor(){Oy.set(this,!1),Nb.set(this,new Set)}get acquired(){return _A(this,Oy,"f")}acquireAsync({timeout:e}={}){if(!_A(this,Oy,"f"))return vfe(this,Oy,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{_A(this,Nb,"f").add(i)});let r,n;return Promise.race([new Promise(i=>{r=s(()=>{clearTimeout(n),i()},"resolver"),_A(this,Nb,"f").add(r)}),new Promise((i,o)=>{n=setTimeout(()=>{_A(this,Nb,"f").delete(r),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return _A(this,Oy,"f")?!1:(vfe(this,Oy,!0,"f"),!0)}release(){if(!_A(this,Oy,"f"))throw new Error("Cannot release an unacquired lock");if(_A(this,Nb,"f").size>0){let[e]=_A(this,Nb,"f");_A(this,Nb,"f").delete(e),e()}else vfe(this,Oy,!1,"f")}};_T.default=bfe;Oy=new WeakMap,Nb=new WeakMap});var mVe=G((Uzn,pVe)=>{f();var lk=1e3,ck=lk*60,uk=ck*60,FT=uk*24,tUt=FT*7,rUt=FT*365.25;pVe.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return nUt(t);if(r==="number"&&isFinite(t))return e.long?oUt(t):iUt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function nUt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*rUt;case"weeks":case"week":case"w":return r*tUt;case"days":case"day":case"d":return r*FT;case"hours":case"hour":case"hrs":case"hr":case"h":return r*uk;case"minutes":case"minute":case"mins":case"min":case"m":return r*ck;case"seconds":case"second":case"secs":case"sec":case"s":return r*lk;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}s(nUt,"parse");function iUt(t){var e=Math.abs(t);return e>=FT?Math.round(t/FT)+"d":e>=uk?Math.round(t/uk)+"h":e>=ck?Math.round(t/ck)+"m":e>=lk?Math.round(t/lk)+"s":t+"ms"}s(iUt,"fmtShort");function oUt(t){var e=Math.abs(t);return e>=FT?bz(t,e,FT,"day"):e>=uk?bz(t,e,uk,"hour"):e>=ck?bz(t,e,ck,"minute"):e>=lk?bz(t,e,lk,"second"):t+" ms"}s(oUt,"fmtLong");function bz(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}s(bz,"plural")});var Zpe=G((Gzn,hVe)=>{f();function sUt(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=a,r.humanize=mVe(),r.destroy=u,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}s(e,"selectColor"),r.selectColor=e;function r(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=r.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,q)=>{if(N==="%%")return"%";k++;let te=r.formatters[q];if(typeof te=="function"){let me=v[k];N=te.call(b,me),v.splice(k,1),k--}return N}),r.formatArgs.call(b,v),(b.log||r.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=r.useColors(),y.color=r.selectColor(d),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==r.namespaces&&(h=r.namespaces,g=r.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof r.init=="function"&&r.init(y),y}s(r,"createDebug");function n(d,p){let m=r(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(n,"extend");function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...r.names.map(l),...r.skips.map(l).map(p=>"-"+p)].join(",");return r.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=r.skips.length;p<m;p++)if(r.skips[p].test(d))return!1;for(p=0,m=r.names.length;p<m;p++)if(r.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),r.enable(r.load()),r}s(sUt,"setup");hVe.exports=sUt});var gVe=G((tf,Ez)=>{f();tf.formatArgs=lUt;tf.save=cUt;tf.load=uUt;tf.useColors=aUt;tf.storage=dUt();tf.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();tf.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function aUt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(aUt,"useColors");function lUt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Ez.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}s(lUt,"formatArgs");tf.log=console.debug||console.log||(()=>{});function cUt(t){try{t?tf.storage.setItem("debug",t):tf.storage.removeItem("debug")}catch{}}s(cUt,"save");function uUt(){let t;try{t=tf.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(uUt,"load");function dUt(){try{return localStorage}catch{}}s(dUt,"localstorage");Ez.exports=Zpe()(tf);var{formatters:fUt}=Ez.exports;fUt.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var yVe=G((zzn,AVe)=>{"use strict";f();AVe.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var vVe=G((Kzn,xVe)=>{"use strict";f();var pUt=require("os"),CVe=require("tty"),Bp=yVe(),{env:ec}=process,Wb;Bp("no-color")||Bp("no-colors")||Bp("color=false")||Bp("color=never")?Wb=0:(Bp("color")||Bp("colors")||Bp("color=true")||Bp("color=always"))&&(Wb=1);"FORCE_COLOR"in ec&&(ec.FORCE_COLOR==="true"?Wb=1:ec.FORCE_COLOR==="false"?Wb=0:Wb=ec.FORCE_COLOR.length===0?1:Math.min(parseInt(ec.FORCE_COLOR,10),3));function eme(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s(eme,"translateLevel");function tme(t,e){if(Wb===0)return 0;if(Bp("color=16m")||Bp("color=full")||Bp("color=truecolor"))return 3;if(Bp("color=256"))return 2;if(t&&!e&&Wb===void 0)return 0;let r=Wb||0;if(ec.TERM==="dumb")return r;if(process.platform==="win32"){let n=pUt.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in ec)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in ec)||ec.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in ec)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(ec.TEAMCITY_VERSION)?1:0;if(ec.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in ec){let n=parseInt((ec.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(ec.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(ec.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(ec.TERM)||"COLORTERM"in ec?1:r}s(tme,"supportsColor");function mUt(t){let e=tme(t,t&&t.isTTY);return eme(e)}s(mUt,"getSupportLevel");xVe.exports={supportsColor:mUt,stdout:eme(tme(!0,CVe.isatty(1))),stderr:eme(tme(!0,CVe.isatty(2)))}});var EVe=G((Sc,Tz)=>{f();var hUt=require("tty"),Iz=require("util");Sc.init=bUt;Sc.log=CUt;Sc.formatArgs=AUt;Sc.save=xUt;Sc.load=vUt;Sc.useColors=gUt;Sc.destroy=Iz.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Sc.colors=[6,2,3,4,5,1];try{let t=vVe();t&&(t.stderr||t).level>=2&&(Sc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Sc.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function gUt(){return"colors"in Sc.inspectOpts?!!Sc.inspectOpts.colors:hUt.isatty(process.stderr.fd)}s(gUt,"useColors");function AUt(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+Tz.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=yUt()+e+" "+t[0]}s(AUt,"formatArgs");function yUt(){return Sc.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(yUt,"getDate");function CUt(...t){return process.stderr.write(Iz.format(...t)+`
`)}s(CUt,"log");function xUt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(xUt,"save");function vUt(){return process.env.DEBUG}s(vUt,"load");function bUt(t){t.inspectOpts={};let e=Object.keys(Sc.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Sc.inspectOpts[e[r]]}s(bUt,"init");Tz.exports=Zpe()(Sc);var{formatters:bVe}=Tz.exports;bVe.o=function(t){return this.inspectOpts.colors=this.useColors,Iz.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};bVe.O=function(t){return this.inspectOpts.colors=this.useColors,Iz.inspect(t,this.inspectOpts)}});var MT=G((tYn,rme)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?rme.exports=gVe():rme.exports=EVe()});var lme=G((oYn,_Ve)=>{f();var k6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,EUt=typeof AbortController=="function",wz=EUt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new IVe}abort(){this.signal.dispatchEvent("abort")}},IUt=typeof AbortSignal=="function",TUt=typeof wz.AbortSignal=="function",IVe=IUt?AbortSignal:TUt?wz.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let r={type:e,target:this};this.onabort(r),this._listeners.forEach(n=>n(r),this)}}onabort(){}addEventListener(e,r){e==="abort"&&this._listeners.push(r)}removeEventListener(e,r){e==="abort"&&(this._listeners=this._listeners.filter(n=>n!==r))}},sme=new Set,nme=s((t,e)=>{let r=`LRU_CACHE_OPTION_${t}`;_z(r)&&ame(r,`${t} option`,`options.${e}`,fk)},"deprecatedOption"),ime=s((t,e)=>{let r=`LRU_CACHE_METHOD_${t}`;if(_z(r)){let{prototype:n}=fk,{get:i}=Object.getOwnPropertyDescriptor(n,t);ame(r,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),wUt=s((t,e)=>{let r=`LRU_CACHE_PROPERTY_${t}`;if(_z(r)){let{prototype:n}=fk,{get:i}=Object.getOwnPropertyDescriptor(n,t);ame(r,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),TVe=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),_z=s(t=>!sme.has(t),"shouldWarn"),ame=s((t,e,r,n)=>{sme.add(t);let i=`The ${e} is deprecated. Please use ${r} instead.`;TVe(i,"DeprecationWarning",t,n)},"warn"),QT=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),wVe=s(t=>QT(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?dk:null:null,"getUintArray"),dk=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},ome=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let r=wVe(e);this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},fk=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:B}=e instanceof t?{}:e;if(r!==0&&!QT(r))throw new TypeError("max option must be a nonnegative integer");let N=r?wVe(r):Array;if(!N)throw new Error("invalid max value: "+r);if(this.max=r,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(r).fill(null),this.valList=new Array(r).fill(null),this.next=new N(r),this.prev=new N(r),this.head=0,this.tail=0,this.free=new ome(r),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!QT(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!B,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=QT(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||k||0,this.ttl){if(!QT(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let q="LRU_CACHE_UNBOUNDED";_z(q)&&(sme.add(q),TVe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",q,t))}B&&nme("stale","allowStale"),k&&nme("maxAge","ttl"),_&&nme("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new dk(this.max),this.starts=new dk(this.max),this.setItemTTL=(n,i,o=k6.now())=>{if(this.starts[n]=i!==0?o:0,this.ttls[n]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(n)&&this.delete(this.keyList[n])},i+1);a.unref&&a.unref()}},this.updateItemAge=n=>{this.starts[n]=this.ttls[n]!==0?k6.now():0};let e=0,r=s(()=>{let n=k6.now();if(this.ttlResolution>0){e=n;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return n},"getNow");this.getRemainingTTL=n=>{let i=this.keyMap.get(n);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||r())},this.isStale=n=>this.ttls[n]!==0&&this.starts[n]!==0&&(e||r())-this.starts[n]>this.ttls[n]}updateItemAge(e){}setItemTTL(e,r,n){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new dk(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,r,n,i)=>{if(!QT(n))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(n=i(r,e),!QT(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return n},this.addItemSize=(e,r)=>{this.sizes[e]=r;let n=this.maxSize-this.sizes[e];for(;this.calculatedSize>n;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,r){}requireSize(e,r,n,i){if(n||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.tail;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.head));)r=this.prev[r]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let r=this.head;!(!this.isValidIndex(r)||((e||!this.isStale(r))&&(yield r),r===this.tail));)r=this.next[r]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of this.indexes())if(e(this.valList[n],this.keyList[n],this))return this.get(this.keyList[n],r)}forEach(e,r=this){for(let n of this.indexes())e.call(r,this.valList[n],this.keyList[n],this)}rforEach(e,r=this){for(let n of this.rindexes())e.call(r,this.valList[n],this.keyList[n],this)}get prune(){return ime("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let r of this.rindexes({allowStale:!0}))this.isStale(r)&&(this.delete(this.keyList[r]),e=!0);return e}dump(){let e=[];for(let r of this.indexes({allowStale:!0})){let n=this.keyList[r],i=this.valList[r],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[r];let l=k6.now()-this.starts[r];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=k6.now()-i}this.set(r,n.value,n)}}dispose(e,r,n){}set(e,r,{ttl:n=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,r,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=r,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];r!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=r,this.addItemSize(u,a)),this.moveToTail(u)}if(n!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,n,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let r=this.head,n=this.keyList[r],i=this.valList[r];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,n,"evict"),this.disposeAfter&&this.disposed.push([i,n,"evict"])),this.removeItemSize(r),e&&(this.keyList[r]=null,this.valList[r]=null,this.free.push(r)),this.head=this.next[r],this.keyMap.delete(n),this.size--,r}has(e,{updateAgeOnHas:r=this.updateAgeOnHas}={}){let n=this.keyMap.get(e);return n!==void 0&&!this.isStale(n)?(r&&this.updateItemAge(n),!0):!1}peek(e,{allowStale:r=this.allowStale}={}){let n=this.keyMap.get(e);if(n!==void 0&&(r||!this.isStale(n))){let i=this.valList[n];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,r,n,i){let o=r===void 0?void 0:this.valList[r];if(this.isBackgroundFetch(o))return o;let a=new wz,l={signal:a.signal,options:n,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[r]===p&&(!n.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[r]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,r===void 0?(this.set(e,p,l.options),r=this.keyMap.get(e)):this.valList[r]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i});let h={allowStale:r,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return r&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),n&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return r&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:r=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?r?a.__staleWhileFetching:void 0:(i||this.delete(e),r?a:void 0):l?void 0:(this.moveToTail(o),n&&this.updateItemAge(o),a)}}connect(e,r){this.prev[r]=e,this.next[e]=r}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return ime("del","delete"),this.delete}delete(e){let r=!1;if(this.size!==0){let n=this.keyMap.get(e);if(n!==void 0)if(r=!0,this.size===1)this.clear();else{this.removeItemSize(n);let i=this.valList[n];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[n]=null,this.valList[n]=null,n===this.tail?this.tail=this.prev[n]:n===this.head?this.head=this.next[n]:(this.next[this.prev[n]]=this.next[n],this.prev[this.next[n]]=this.prev[n]),this.size--,this.free.push(n)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return r}clear(){for(let e of this.rindexes({allowStale:!0})){let r=this.valList[e];if(this.isBackgroundFetch(r))r.__abortController.abort();else{let n=this.keyList[e];this.dispose(r,n,"delete"),this.disposeAfter&&this.disposed.push([r,n,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return ime("reset","clear"),this.clear}get length(){return wUt("length","size"),this.size}static get AbortController(){return wz}static get AbortSignal(){return IVe}};_Ve.exports=fk});var dme=G((lYn,SVe)=>{"use strict";f();var B6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,r,n){super(e),this.type=r,this._name=n}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},cme=class extends B6{static{s(this,"FetchError")}constructor(e,r,n){super(e,r,"FetchError"),n&&(this.code=n.code,this.errno=n.errno,this.erroredSysCall=n.syscall)}},ume=class extends B6{static{s(this,"AbortError")}constructor(e,r="aborted"){super(e,r,"AbortError")}};SVe.exports={FetchBaseError:B6,FetchError:cme,AbortError:ume}});var $y=G((dYn,kVe)=>{"use strict";f();var{constants:{MAX_LENGTH:_Ut}}=require("buffer"),{pipeline:Sz,PassThrough:SUt}=require("stream"),{promisify:RUt}=require("util"),{createGunzip:kUt,createInflate:BUt,createBrotliDecompress:DUt,constants:{Z_SYNC_FLUSH:RVe}}=require("zlib"),PUt=MT()("helix-fetch:utils"),NUt=RUt(Sz),LUt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),FUt=s((t,e,r,n)=>{if(!LUt(t,e))return r;let i=s(o=>{o&&(PUt(`encountered error while decoding stream: ${o}`),n(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Sz(r,kUt({flush:RVe,finishFlush:RVe}),i);case"deflate":case"x-deflate":return Sz(r,BUt(),i);case"br":return Sz(r,DUt(),i);default:return r}},"decodeStream"),MUt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),Rz=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?QUt(t,e):OUt(t,e);default:return 0}},"calcSize"),QUt=s((t,e)=>(e.add(t),t.map(r=>e.has(r)?0:Rz(r,e)).reduce((r,n)=>r+n,0)),"calcArraySize"),OUt=s((t,e)=>{if(t==null)return 0;e.add(t);let r=0,n=[];for(let i in t)n.push(i);return n.push(...Object.getOwnPropertySymbols(t)),n.forEach(i=>{if(r+=Rz(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}r+=Rz(t[i],e)}),r},"calcObjectSize"),UUt=s(t=>Rz(t,new WeakSet),"sizeof"),qUt=s(async t=>{let e=new SUt,r=0,n=[];return e.on("data",i=>{if(r+i.length>_Ut)throw new Error("Buffer.constants.MAX_SIZE exceeded");n.push(i),r+=i.length}),await NUt(t,e),Buffer.concat(n,r)},"streamToBuffer");kVe.exports={decodeStream:FUt,isPlainObject:MUt,sizeof:UUt,streamToBuffer:qUt}});var Bz=G((mYn,NVe)=>{"use strict";f();var{PassThrough:BVe,Readable:zy}=require("stream"),{types:{isAnyArrayBuffer:PVe}}=require("util"),{FetchError:WUt,FetchBaseError:GUt}=dme(),{streamToBuffer:HUt}=$y(),jUt=Buffer.alloc(0),Dp=Symbol("Body internals"),VUt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),DVe=s(async t=>{if(t[Dp].disturbed)throw new TypeError("Already read");if(t[Dp].error)throw new TypeError(`Stream had error: ${t[Dp].error.message}`);t[Dp].disturbed=!0;let{stream:e}=t[Dp];return e===null?jUt:HUt(e)},"consume"),kz=class{static{s(this,"Body")}constructor(e){let r;e==null?r=null:e instanceof URLSearchParams?r=zy.from(e.toString()):e instanceof zy?r=e:Buffer.isBuffer(e)?r=zy.from(e):PVe(e)?r=zy.from(Buffer.from(e)):typeof e=="string"||e instanceof String?r=zy.from(e):r=zy.from(String(e)),this[Dp]={stream:r,disturbed:!1,error:null},e instanceof zy&&r.on("error",n=>{let i=n instanceof GUt?n:new WUt(`Invalid response body while trying to fetch ${this.url}: ${n.message}`,"system",n);this[Dp].error=i})}get body(){return this[Dp].stream}get bodyUsed(){return this[Dp].disturbed}async buffer(){return DVe(this)}async arrayBuffer(){return VUt(await this.buffer())}async text(){return(await DVe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(kz.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var $Ut=s(t=>{if(t[Dp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Dp],r=e;if(e instanceof zy){r=new BVe;let n=new BVe;e.pipe(r),e.pipe(n),t[Dp].stream=n}return r},"cloneStream"),zUt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||PVe(t)||t instanceof zy?null:"text/plain; charset=utf-8","guessContentType");NVe.exports={Body:kz,cloneStream:$Ut,guessContentType:zUt}});var pk=G((AYn,QVe)=>{"use strict";f();var{validateHeaderName:LVe,validateHeaderValue:FVe}=require("http"),{isPlainObject:YUt}=$y(),Yy=Symbol("Headers internals"),D6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof LVe=="function")LVe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let r=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}return e.toLowerCase()},"normalizeName"),MVe=s((t,e)=>{let r=typeof t!="string"?String(t):t;if(typeof FVe=="function")FVe(e,r);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let n=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}return r},"normalizeValue"),Dz=class t{static{s(this,"Headers")}constructor(e={}){if(this[Yy]={map:new Map},e instanceof t)e.forEach((r,n)=>{this.append(n,r)});else if(Array.isArray(e))e.forEach(([r,n])=>{this.append(r,n)});else if(YUt(e))for(let[r,n]of Object.entries(e))this.append(r,n)}set(e,r){this[Yy].map.set(D6(e),MVe(r,e))}has(e){return this[Yy].map.has(D6(e))}get(e){let r=this[Yy].map.get(D6(e));return r===void 0?null:r}append(e,r){let n=D6(e),i=MVe(r,e),o=this[Yy].map.get(n);this[Yy].map.set(n,o?`${o}, ${i}`:i)}delete(e){this[Yy].map.delete(D6(e))}forEach(e,r){for(let n of this.keys())e.call(r,this.get(n),n)}keys(){return Array.from(this[Yy].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Yy].map)}};Object.defineProperties(Dz.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));QVe.exports={Headers:Dz}});var fme=G((xYn,OVe)=>{"use strict";f();var{EventEmitter:KUt}=require("events"),mh=Symbol("AbortSignal internals"),mk=class{static{s(this,"AbortSignal")}constructor(){this[mh]={eventEmitter:new KUt,onabort:null,aborted:!1}}get aborted(){return this[mh].aborted}get onabort(){return this[mh].onabort}set onabort(e){this[mh].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,r){this[mh].eventEmitter.removeListener(e,r)}addEventListener(e,r){this[mh].eventEmitter.on(e,r)}dispatchEvent(e){let r={type:e,target:this},n=`on${e}`;typeof this[mh][n]=="function"&&this[n](r),this[mh].eventEmitter.emit(e,r)}fire(){this[mh].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(mk.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Nz=class extends mk{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[mh].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[mh].timerId)}};Object.defineProperties(Nz.prototype,{clear:{enumerable:!0}});var Pz=Symbol("AbortController internals"),Lz=class{static{s(this,"AbortController")}constructor(){this[Pz]={signal:new mk}}get signal(){return this[Pz].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Pz].signal.aborted||this[Pz].signal.fire()}};Object.defineProperties(Lz.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});OVe.exports={AbortController:Lz,AbortSignal:mk,TimeoutSignal:Nz}});var P6=G((EYn,WVe)=>{"use strict";f();var{randomBytes:JUt}=require("crypto"),{Readable:XUt}=require("stream"),mme=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),ZUt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),UVe=s(t=>`--${t}--\r
\r
`,"getFooter"),qVe=s((t,e,r)=>{let n="";return n+=`--${t}\r
`,n+=`Content-Disposition: form-data; name="${e}"`,mme(r)&&(n+=`; filename="${r.name}"\r
`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}\r
\r
`},"getHeader");async function*eqt(t,e){for(let[r,n]of t)yield qVe(e,r,n),mme(n)?yield*n.stream():yield n,yield`\r
`;yield UVe(e)}s(eqt,"formDataIterator");var tqt=s((t,e)=>{let r=0;for(let[n,i]of t)r+=Buffer.byteLength(qVe(e,n,i)),r+=mme(i)?i.size:Buffer.byteLength(String(i)),r+=Buffer.byteLength(`\r
`);return r+=Buffer.byteLength(UVe(e)),r},"getFormDataLength"),pme=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=JUt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=tqt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return XUt.from(eqt(this.fd,this.boundary))}};WVe.exports={isFormData:ZUt,FormDataSerializer:pme}});var HVe=G((wYn,GVe)=>{"use strict";f();var{AbortSignal:rqt}=fme(),{Body:nqt,cloneStream:iqt,guessContentType:oqt}=Bz(),{Headers:sqt}=pk(),{isPlainObject:aqt}=$y(),{isFormData:lqt,FormDataSerializer:cqt}=P6(),uqt=20,Gb=Symbol("Request internals"),Fz=class t extends nqt{static{s(this,"Request")}constructor(e,r={}){let n=e instanceof t?e:null,i=n?new URL(n.url):new URL(e),o=r.method||n&&n.method||"GET";if(o=o.toUpperCase(),(r.body!=null||n&&n.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=r.body||(n&&n.body?iqt(n):null),l=new sqt(r.headers||n&&n.headers||{});if(lqt(a)&&!l.has("content-type")){let p=new cqt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(aqt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=oqt(a);p&&l.set("content-type",p)}super(a);let c=n?n.signal:null;if("signal"in r&&(c=r.signal),c&&!(c instanceof rqt))throw new TypeError("signal needs to be an instance of AbortSignal");let u=r.redirect||n&&n.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=r.cache||n&&n.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Gb]={init:{...r},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},r.follow===void 0?!n||n.follow===void 0?this.follow=uqt:this.follow=n.follow:this.follow=r.follow,this.counter=r.counter||n&&n.counter||0,r.compress===void 0?!n||n.compress===void 0?this.compress=!0:this.compress=n.compress:this.compress=r.compress,r.decode===void 0?!n||n.decode===void 0?this.decode=!0:this.decode=n.decode:this.decode=r.decode}get method(){return this[Gb].method}get url(){return this[Gb].parsedURL.toString()}get headers(){return this[Gb].headers}get redirect(){return this[Gb].redirect}get cache(){return this[Gb].cache}get signal(){return this[Gb].signal}clone(){return new t(this)}get init(){return this[Gb].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Fz.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});GVe.exports={Request:Fz}});var hme=G((RYn,jVe)=>{"use strict";f();var{Body:dqt,cloneStream:fqt,guessContentType:pqt}=Bz(),{Headers:mqt}=pk(),{isPlainObject:hqt}=$y(),{isFormData:gqt,FormDataSerializer:Aqt}=P6(),hh=Symbol("Response internals"),Mz=class t extends dqt{static{s(this,"Response")}constructor(e=null,r={}){let n=new mqt(r.headers),i=e;if(gqt(i)&&!n.has("content-type")){let o=new Aqt(i);i=o.stream(),n.set("content-type",o.contentType()),!n.has("transfer-encoding")&&!n.has("content-length")&&n.set("content-length",o.length())}if(i!==null&&!n.has("content-type"))if(hqt(i))i=JSON.stringify(i),n.set("content-type","application/json");else{let o=pqt(i);o&&n.set("content-type",o)}super(i),this[hh]={url:r.url,status:r.status||200,statusText:r.statusText||"",headers:n,httpVersion:r.httpVersion,decoded:r.decoded,counter:r.counter}}get url(){return this[hh].url||""}get status(){return this[hh].status}get statusText(){return this[hh].statusText}get ok(){return this[hh].status>=200&&this[hh].status<300}get redirected(){return this[hh].counter>0}get headers(){return this[hh].headers}get httpVersion(){return this[hh].httpVersion}get decoded(){return this[hh].decoded}static redirect(e,r=302){if(![301,302,303,307,308].includes(r))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:r})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(fqt(this),{...this[hh]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Mz.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});jVe.exports={Response:Mz}});var $Ve=G((PYn,VVe)=>{"use strict";f();var yqt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),Cqt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),xqt=new Set([500,502,503,504]),vqt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},bqt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function OT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(OT,"toNumberOrZero");function Eqt(t){return t?xqt.has(t.status):!0}s(Eqt,"isErrorResponse");function gme(t){let e={};if(!t)return e;let r=t.trim().split(/,/);for(let n of r){let[i,o]=n.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(gme,"parseCacheControl");function Iqt(t){let e=[];for(let r in t){let n=t[r];e.push(n===!0?r:r+"="+n)}if(e.length)return e.join(", ")}s(Iqt,"formatCacheControl");VVe.exports=class{static{s(this,"CachePolicy")}constructor(e,r,{shared:n,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=n!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=gme(r.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=r.headers.vary?e.headers:null,this._reqcc=gme(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":Iqt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&Cqt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||yqt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let r=gme(e.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(e.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,r){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||r&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let n of r)if(e.headers[n]!==this._reqHeaders[n])return!1;return!0}_copyWithoutHopByHopHeaders(e){let r={};for(let n in e)vqt[n]||(r[n]=e[n]);if(e.connection){let n=e.connection.trim().split(/\s*,\s*/);for(let i of n)delete r[i]}if(r.warning){let n=r.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));n.length?r.warning=n.join(",").trim():delete r.warning}return r}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(r)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return e+r}_ageValue(){return OT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return OT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return OT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let n=Date.parse(this._resHeaders.expires);return Number.isNaN(n)||n<r?0:Math.max(e,(n-r)/1e3)}if(this._resHeaders["last-modified"]){let n=Date.parse(this._resHeaders["last-modified"]);if(isFinite(n)&&r>n)return Math.max(e,(r-n)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),r=e+OT(this._rescc["stale-if-error"]),n=e+OT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,r,n)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+OT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+OT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let r=this._copyWithoutHopByHopHeaders(e.headers);if(delete r["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let i=r["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?r["if-none-match"]=i.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(e,r){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&Eqt(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let n=!1;if(r.status!==void 0&&r.status!=304?n=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?n=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?n=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?n=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(n=!0),!n)return{policy:new this.constructor(e,r),modified:r.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in r.headers&&!bqt[a]?r.headers[a]:this._resHeaders[a];let o=Object.assign({},r,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var JVe=G((FYn,KVe)=>{"use strict";f();var Tqt=$Ve(),{Headers:wqt}=pk(),zVe=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),YVe=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),Ame=class{static{s(this,"CachePolicyWrapper")}constructor(e,r,n){this.policy=new Tqt(zVe(e),YVe(r),n)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(zVe(e))}responseHeaders(e){return new wqt(this.policy.responseHeaders(YVe(e)))}timeToLive(){return this.policy.timeToLive()}};KVe.exports=Ame});var e$e=G((OYn,ZVe)=>{"use strict";f();var{Readable:_qt}=require("stream"),{Headers:XVe}=pk(),{Response:Sqt}=hme(),Hb=Symbol("CacheableResponse internals"),Rqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),yme=class t extends Sqt{static{s(this,"CacheableResponse")}constructor(e,r){super(e,r);let n=new XVe(r.headers);this[Hb]={headers:n,bufferedBody:e}}get headers(){return this[Hb].headers}set headers(e){if(e instanceof XVe)this[Hb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return _qt.from(this[Hb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Hb].bufferedBody}async arrayBuffer(){return Rqt(this[Hb].bufferedBody)}async text(){return this[Hb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[Hb].bufferedBody,{url:e,status:r,statusText:n,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},kqt=s(async t=>{let e=await t.buffer(),{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new yme(e,{url:r,status:n,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");ZVe.exports={cacheableResponse:kqt}});var Qz=G((WYn,t$e)=>{"use strict";f();var Cme=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};t$e.exports={RequestAbortedError:Cme}});var s$e=G((jYn,o$e)=>{"use strict";f();var n$e=require("http"),i$e=require("https"),{Readable:Bqt}=require("stream"),Ky=MT()("helix-fetch:h1"),{RequestAbortedError:r$e}=Qz(),{decodeStream:Dqt}=$y(),Pqt=s((t,e)=>{let{h1:r,options:{h1:n,rejectUnauthorized:i}}=t;return e==="https:"?r.httpsAgent?r.httpsAgent:n||typeof i=="boolean"?(r.httpsAgent=new i$e.Agent(typeof i=="boolean"?{...n||{},rejectUnauthorized:i}:n),r.httpsAgent):void 0:r.httpAgent?r.httpAgent:n?(r.httpAgent=new n$e.Agent(n),r.httpAgent):void 0},"getAgent"),Nqt=s(t=>{t.h1={}},"setupContext"),Lqt=s(async({h1:t})=>{t.httpAgent&&(Ky("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&(Ky("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),Fqt=s((t,e,r)=>{let{statusCode:n,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?Dqt(n,c,t,r):t;return{statusCode:n,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),Mqt=s(async(t,e,r)=>{let{request:n}=e.protocol==="https:"?i$e:n$e,i=Pqt(t,e.protocol),o={...r,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{Ky(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{Ky(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{Ky(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new r$e),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new r$e);return}p.addEventListener("abort",m)}d=n(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(Fqt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&(Ky(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||(Ky(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof Bqt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");o$e.exports={request:Mqt,setupContext:Nqt,resetContext:Lqt}});var u$e=G((zYn,c$e)=>{"use strict";f();var{connect:Qqt,constants:Oqt}=require("http2"),{Readable:Uqt}=require("stream"),_s=MT()("helix-fetch:h2"),{RequestAbortedError:a$e}=Qz(),{decodeStream:qqt}=$y(),{NGHTTP2_CANCEL:N6}=Oqt,Wqt=5*60*1e3,Gqt=5e3,Hqt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),jqt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(r=>{e.on("close",r),_s(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),l$e=s((t,e,r,n=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=r?qqt(o,t,e,n):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(r&&a!==e)}},"createResponse"),Vqt=s((t,e,r,n,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=Gqt}}}=t,u=i[":path"],d=`${e}${u}`;_s(`received PUSH_PROMISE: ${d}, stream #${n.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{n.close(N6)},"rejectPush")),n.on("push",(p,m)=>{_s(`received push headers for ${e}${u}, stream #${n.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),n.setTimeout(c,()=>{_s(`closing pushed stream #${n.id} after ${c} ms of inactivity`),n.close(N6)}),l&&l(d,i,l$e(p,n,r))}),n.on("aborted",()=>{_s(`pushed stream #${n.id} aborted`)}),n.on("error",p=>{_s(`pushed stream #${n.id} encountered error: ${p}`)}),n.on("frameError",(p,m,h)=>{_s(`pushed stream #${n.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),$qt=s(async(t,e,r)=>{let{origin:n,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=Wqt,pushPromiseHandler:p,pushHandler:m}=c,h={...r},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let B=u[n];if(!B||B.closed||B.destroyed){let oe=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),H={...c,rejectUnauthorized:oe};v&&!v.inUse&&(H.createConnection=()=>(_s(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),B=Qqt(n,{...H,settings:{enablePush:!!(p||m)}}),B.setMaxListeners(1e3),B.setTimeout(d,()=>{_s(`closing session ${n} after ${d} ms of inactivity`),B.close()}),B.once("connect",()=>{_s(`session ${n} established`),_s(`caching session ${n}`),u[n]=B}),B.on("localSettings",le=>{_s(`session ${n} localSettings: ${JSON.stringify(le)}`)}),B.on("remoteSettings",le=>{_s(`session ${n} remoteSettings: ${JSON.stringify(le)}`)}),B.once("close",()=>{_s(`session ${n} closed`),u[n]===B&&(_s(`discarding cached session ${n}`),delete u[n])}),B.once("error",le=>{_s(`session ${n} encountered error: ${le}`),u[n]===B&&(_s(`discarding cached session ${n}`),delete u[n])}),B.on("frameError",(le,ie,j)=>{_s(`session ${n} encountered frameError: type: ${le}, code: ${ie}, id: ${j}`)}),B.once("goaway",(le,ie,j)=>{_s(`session ${n} received GOAWAY frame: errorCode: ${le}, lastStreamID: ${ie}, opaqueData: ${j?j.toString():void 0}`)}),B.on("stream",(le,ie,j)=>{Vqt(t,n,E,le,ie,j)})}else v&&v.id!==B.socket.id&&!v.inUse&&(_s(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());_s(`${g} ${e.host}${l}`);let N,{signal:q}=h,te=s(()=>{q.removeEventListener("abort",te),k(new a$e),N&&N.close(N6)},"onAbortSignal");if(q){if(q.aborted){k(new a$e);return}q.addEventListener("abort",te)}let me=s(oe=>{_s(`session ${n} encountered error during ${h.method} ${e.href}: ${oe}`),k(oe)},"onSessionError");B.once("error",me),N=B.request({":method":g,":path":l,...y}),N.once("response",oe=>{B.off("error",me),q&&q.removeEventListener("abort",te),_(l$e(oe,N,h.decode,k))}),N.once("error",oe=>{B.off("error",me),q&&q.removeEventListener("abort",te),N.rstCode!==N6&&(_s(`${h.method} ${e.href} failed with: ${oe.message}`),N.close(N6),k(oe))}),N.once("frameError",(oe,H,O)=>{B.off("error",me),_s(`encountered frameError during ${h.method} ${e.href}: type: ${oe}, code: ${H}, id: ${O}`)}),N.on("push",(oe,H)=>{_s(`received 'push' event: headers: ${JSON.stringify(oe)}, flags: ${H}`)}),b instanceof Uqt?b.pipe(N):(b&&N.write(b),N.end())})},"request");c$e.exports={request:$qt,setupContext:Hqt,resetContext:jqt}});var f$e=G((JYn,d$e)=>{"use strict";f();var{EventEmitter:zqt}=require("events"),Yqt=s(()=>{let t={},e=new zqt;return e.setMaxListeners(0),{acquire:s(r=>new Promise(n=>{if(!t[r]){t[r]=!0,n();return}let i=s(o=>{t[r]||(t[r]=!0,e.removeListener(r,i),n(o))},"tryAcquire");e.on(r,i)}),"acquire"),release:s((r,n)=>{Reflect.deleteProperty(t,r),setImmediate(()=>e.emit(r,n))},"release")}},"lock");d$e.exports=Yqt});var p$e=G((eKn,Kqt)=>{Kqt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var y$e=G((tKn,A$e)=>{"use strict";f();var{Readable:Jqt}=require("stream"),Xqt=require("tls"),{types:{isAnyArrayBuffer:Zqt}}=require("util"),eWt=lme(),xme=MT()("helix-fetch:core"),{RequestAbortedError:Oz}=Qz(),vme=s$e(),Uz=u$e(),tWt=f$e(),{isPlainObject:rWt}=$y(),{isFormData:nWt,FormDataSerializer:iWt}=P6(),{version:oWt}=p$e(),bme="h2",Eme="h2c",Ime="http/1.0",UT="http/1.1",sWt=100,aWt=60*60*1e3,lWt=[bme,UT,Ime],cWt=`helix-fetch/${oWt}`,uWt={method:"GET",compress:!0,decode:!0},m$e=0,h$e=tWt(),g$e=s((t,e)=>new Promise((r,n)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new Oz;n(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){n(new Oz);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof Oz||(xme(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),n(u))},"onError");o=Xqt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),m$e+=1,o.id=m$e,o.secureConnecting=!1,xme(`established TLS connection: #${o.id} (${o.servername})`),r(o)}),o.once("error",c)}),"connectTLS"),dWt=s(async(t,e)=>{let r=await h$e.acquire(t.origin);try{return r||(r=await g$e(t,e)),r}finally{h$e.release(t.origin,r)}},"connect"),fWt=s(async(t,e,r)=>{let n=`${e.protocol}//${e.host}`,i=t.alpnCache.get(n);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=UT,t.alpnCache.set(n,i),{protocol:i};case"http2:":return i=Eme,t.alpnCache.set(n,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:r,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await dWt(e,u);return i=d.alpnProtocol,i||(i=UT),t.alpnCache.set(n,i),{protocol:i,socket:d}},"determineProtocol"),pWt=s(t=>{let e={};return Object.keys(t).forEach(r=>{e[r.toLowerCase()]=t[r]}),e},"sanitizeHeaders"),mWt=s(async(t,e,r,n)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...r,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:n};u.socket=l,u.servername=a.host;let d=await g$e(e,u);return{protocol:d.alpnProtocol||UT,socket:d}}return{protocol:l.alpnProtocol||UT,socket:l}},"getProtocolAndSocketFromFactory"),hWt=s(async(t,e,r)=>{let n=new URL(e),i={...uWt,...r||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=pWt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=n.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(nWt(i.body)){let u=new iWt(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":rWt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Zqt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Jqt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await mWt(t.socketFactory,n,i,t.alpnProtocols):await fWt(t,n,a);switch(xme(`${n.host} -> ${l}`),l){case bme:try{return await Uz.request(t,n,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${n.protocol}//${n.host}`),u}case Eme:return Uz.request(t,new URL(`http://${n.host}${n.pathname}${n.hash}${n.search}`),c?{...i,socket:c}:i);case Ime:case UT:return vme.request(t,n,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),gWt=s(async t=>(t.alpnCache.clear(),Promise.all([vme.resetContext(t),Uz.resetContext(t)])),"resetContext"),AWt=s(t=>{let{options:{alpnProtocols:e=lWt,alpnCacheTTL:r=aWt,alpnCacheSize:n=sWt,userAgent:i=cWt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new eWt({max:n,ttl:r}),t.userAgent=i,t.socketFactory=o,vme.setupContext(t),Uz.setupContext(t)},"setupContext");A$e.exports={request:hWt,setupContext:AWt,resetContext:gWt,RequestAbortedError:Oz,ALPN_HTTP2:bme,ALPN_HTTP2C:Eme,ALPN_HTTP1_1:UT,ALPN_HTTP1_0:Ime}});var x$e=G((iKn,C$e)=>{"use strict";f();var yWt=MT()("helix-fetch:core"),{request:CWt,setupContext:xWt,resetContext:vWt,RequestAbortedError:bWt,ALPN_HTTP2:EWt,ALPN_HTTP2C:IWt,ALPN_HTTP1_1:TWt,ALPN_HTTP1_0:wWt}=y$e(),Tme=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},xWt(this)}api(){return{request:s(async(e,r)=>this.request(e,r),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:bWt,ALPN_HTTP2:EWt,ALPN_HTTP2C:IWt,ALPN_HTTP1_1:TWt,ALPN_HTTP1_0:wWt}}async request(e,r){return CWt(this,e,r)}setCA(e){this.options.ca=e}async reset(){return yWt("resetting context"),vWt(this)}};C$e.exports=new Tme().api()});var T$e=G((aKn,I$e)=>{"use strict";f();var{EventEmitter:_Wt}=require("events"),{Readable:L6}=require("stream"),wme=MT()("helix-fetch"),SWt=lme(),{Body:RWt}=Bz(),{Headers:kme}=pk(),{Request:qT}=HVe(),{Response:Sme}=hme(),{FetchBaseError:kWt,FetchError:F6,AbortError:qz}=dme(),{AbortController:BWt,AbortSignal:DWt,TimeoutSignal:PWt}=fme(),NWt=JVe(),{cacheableResponse:LWt}=e$e(),{sizeof:FWt}=$y(),{isFormData:MWt}=P6(),{context:QWt,RequestAbortedError:OWt}=x$e(),v$e=["GET","HEAD"],UWt=500,qWt=100*1024*1024,_me="push",b$e=s(async(t,e,r)=>{let{request:n}=t.context,i=e instanceof qT&&typeof r>"u"?e:new qT(e,r),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let B=new qz("The operation was aborted.");throw i.init.body instanceof L6&&i.init.body.destroy(B),B}try{h=await n(i.url,{...r,method:o,headers:i.headers.plain(),body:m&&!(m instanceof L6)&&!MWt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(B){throw m instanceof L6&&m.destroy(B),B instanceof TypeError?B:B instanceof OWt?new qz("The operation was aborted."):new F6(B.message,"system",B)}let g=s(()=>{l.removeEventListener("abort",g);let B=new qz("The operation was aborted.");i.init.body instanceof L6&&i.init.body.destroy(B),h.readable.emit("error",B)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:B}=E,N=B==null?null:new URL(B,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new F6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new F6(`maximum redirect reached at: ${i.url}`,"max-redirect");let q={headers:new kme(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof L6)throw l&&l.removeEventListener("abort",g),new F6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(q.method="GET",q.body=void 0,q.headers.delete("content-length")),l&&l.removeEventListener("abort",g),b$e(t,new qT(N,q))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new Sme(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),E$e=s(async(t,e,r)=>{if(t.options.maxCacheSize===0||!v$e.includes(e.method))return r;let n=new NWt(e,r,{shared:!1});if(n.storable()){let i=await LWt(r);return t.cache.set(e.url,{policy:n,response:i},n.timeToLive()),i}else return r},"cacheResponse"),WWt=s(async(t,e,r)=>{let n=new qT(e,r);if(t.options.maxCacheSize!==0&&v$e.includes(n.method)&&!["no-store","reload"].includes(n.cache)){let{policy:a,response:l}=t.cache.get(n.url)||{};if(a&&a.satisfiesWithoutRevalidation(n)){l.headers=new kme(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await b$e(t,n);return n.cache!=="no-store"?E$e(t,n,o):o},"cachingFetch"),GWt=s((t,e={})=>{let r=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([n,i])=>{Array.isArray(i)?i.forEach(o=>r.searchParams.append(n,o)):r.searchParams.append(n,i)}),r.href},"createUrl"),HWt=s(t=>new PWt(t),"timeoutSignal"),Rme=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:r}=this.options,n=typeof r=="number"&&r>=0?r:qWt,i=UWt;n===0&&(n=1,i=1);let o=s(({response:l},c)=>FWt(l),"sizeCalculation");this.cache=new SWt({max:i,maxSize:n,sizeCalculation:o}),this.eventEmitter=new _Wt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new Sme(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=QWt(this.options)}api(){return{fetch:s(async(e,r)=>this.fetch(e,r),"fetch"),Body:RWt,Headers:kme,Request:qT,Response:Sme,AbortController:BWt,AbortSignal:DWt,FetchBaseError:kWt,FetchError:F6,AbortError:qz,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:GWt,timeoutSignal:HWt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,r){return WWt(this,e,r)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(_me,e)}offPush(e){return this.eventEmitter.off(_me,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,r,n){wme(`received server push promise: ${e}, headers: ${JSON.stringify(r)}`);let i=new qT(e,{headers:r}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(wme(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(r)}`),n())}async pushHandler(e,r,n){wme(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(r)}, status: ${n.status}, respHeaders: ${JSON.stringify(n.headers)}`);let i=await E$e(this,new qT(e,{headers:r}),n);this.eventEmitter.emit(_me,e,i)}};I$e.exports=new Rme().api()});var _$e=G((uKn,w$e)=>{"use strict";f();w$e.exports=T$e()});var bYe=G((qui,vYe)=>{f();vYe.exports=xYe;xYe.sync=nVt;var yYe=require("fs");function rVt(t,e){var r=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!r||(r=r.split(";"),r.indexOf("")!==-1))return!0;for(var n=0;n<r.length;n++){var i=r[n].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(rVt,"checkPathExt");function CYe(t,e,r){return!t.isSymbolicLink()&&!t.isFile()?!1:rVt(e,r)}s(CYe,"checkStat");function xYe(t,e,r){yYe.stat(t,function(n,i){r(n,n?!1:CYe(i,t,e))})}s(xYe,"isexe");function nVt(t,e){return CYe(yYe.statSync(t),t,e)}s(nVt,"sync")});var _Ye=G((Hui,wYe)=>{f();wYe.exports=IYe;IYe.sync=iVt;var EYe=require("fs");function IYe(t,e,r){EYe.stat(t,function(n,i){r(n,n?!1:TYe(i,e))})}s(IYe,"isexe");function iVt(t,e){return TYe(EYe.statSync(t),e)}s(iVt,"sync");function TYe(t,e){return t.isFile()&&oVt(t,e)}s(TYe,"checkStat");function oVt(t,e){var r=t.mode,n=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=r&u||r&c&&i===a||r&l&&n===o||r&d&&o===0;return p}s(oVt,"checkMode")});var RYe=G((zui,SYe)=>{f();var $ui=require("fs"),VY;process.platform==="win32"||global.TESTING_WINDOWS?VY=bYe():VY=_Ye();SYe.exports=khe;khe.sync=sVt;function khe(t,e,r){if(typeof e=="function"&&(r=e,e={}),!r){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(n,i){khe(t,e||{},function(o,a){o?i(o):n(a)})})}VY(t,e||{},function(n,i){n&&(n.code==="EACCES"||e&&e.ignoreErrors)&&(n=null,i=!1),r(n,i)})}s(khe,"isexe");function sVt(t,e){try{return VY.sync(t,e||{})}catch(r){if(e&&e.ignoreErrors||r.code==="EACCES")return!1;throw r}}s(sVt,"sync")});var FYe=G((Jui,LYe)=>{f();var Nk=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",kYe=require("path"),aVt=Nk?";":":",BYe=RYe(),DYe=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),PYe=s((t,e)=>{let r=e.colon||aVt,n=t.match(/\//)||Nk&&t.match(/\\/)?[""]:[...Nk?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(r)],i=Nk?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=Nk?i.split(r):[""];return Nk&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:n,pathExt:o,pathExtExe:i}},"getPathInfo"),NYe=s((t,e,r)=>{typeof e=="function"&&(r=e,e={}),e||(e={});let{pathEnv:n,pathExt:i,pathExtExe:o}=PYe(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===n.length)return e.all&&a.length?d(a):p(DYe(t));let m=n[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=kYe.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];BYe(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return r?l(0).then(u=>r(null,u),r):l(0)},"which"),lVt=s((t,e)=>{e=e||{};let{pathEnv:r,pathExt:n,pathExtExe:i}=PYe(t,e),o=[];for(let a=0;a<r.length;a++){let l=r[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=kYe.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<n.length;p++){let m=d+n[p];try{if(BYe.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw DYe(t)},"whichSync");LYe.exports=NYe;NYe.sync=lVt});var QYe=G((edi,Bhe)=>{"use strict";f();var MYe=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"},"pathKey");Bhe.exports=MYe;Bhe.exports.default=MYe});var WYe=G((ndi,qYe)=>{"use strict";f();var OYe=require("path"),cVt=FYe(),uVt=QYe();function UYe(t,e){let r=t.options.env||process.env,n=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=cVt.sync(t.command,{path:r[uVt({env:r})],pathExt:e?OYe.delimiter:void 0})}catch{}finally{o&&process.chdir(n)}return a&&(a=OYe.resolve(i?t.options.cwd:"",a)),a}s(UYe,"resolveCommandAttempt");function dVt(t){return UYe(t)||UYe(t,!0)}s(dVt,"resolveCommand");qYe.exports=dVt});var GYe=G((sdi,Phe)=>{"use strict";f();var Dhe=/([()\][%!^"`<>&|;, *?])/g;function fVt(t){return t=t.replace(Dhe,"^$1"),t}s(fVt,"escapeCommand");function pVt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(Dhe,"^$1"),e&&(t=t.replace(Dhe,"^$1")),t}s(pVt,"escapeArgument");Phe.exports.command=fVt;Phe.exports.argument=pVt});var jYe=G((cdi,HYe)=>{"use strict";f();HYe.exports=/^#!(.*)/});var $Ye=G((ddi,VYe)=>{"use strict";f();var mVt=jYe();VYe.exports=(t="")=>{let e=t.match(mVt);if(!e)return null;let[r,n]=e[0].replace(/#! ?/,"").split(" "),i=r.split("/").pop();return i==="env"?n:n?`${i} ${n}`:i}});var YYe=G((pdi,zYe)=>{"use strict";f();var Nhe=require("fs"),hVt=$Ye();function gVt(t){let r=Buffer.alloc(150),n;try{n=Nhe.openSync(t,"r"),Nhe.readSync(n,r,0,150,0),Nhe.closeSync(n)}catch{}return hVt(r.toString())}s(gVt,"readShebang");zYe.exports=gVt});var ZYe=G((gdi,XYe)=>{"use strict";f();var AVt=require("path"),KYe=WYe(),JYe=GYe(),yVt=YYe(),CVt=process.platform==="win32",xVt=/\.(?:com|exe)$/i,vVt=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function bVt(t){t.file=KYe(t);let e=t.file&&yVt(t.file);return e?(t.args.unshift(t.file),t.command=e,KYe(t)):t.file}s(bVt,"detectShebang");function EVt(t){if(!CVt)return t;let e=bVt(t),r=!xVt.test(e);if(t.options.forceShell||r){let n=vVt.test(e);t.command=AVt.normalize(t.command),t.command=JYe.command(t.command),t.args=t.args.map(o=>JYe.argument(o,n));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(EVt,"parseNonShell");function IVt(t,e,r){e&&!Array.isArray(e)&&(r=e,e=null),e=e?e.slice(0):[],r=Object.assign({},r);let n={command:t,args:e,options:r,file:void 0,original:{command:t,args:e}};return r.shell?n:EVt(n)}s(IVt,"parse");XYe.exports=IVt});var rKe=G((Cdi,tKe)=>{"use strict";f();var Lhe=process.platform==="win32";function Fhe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(Fhe,"notFoundError");function TVt(t,e){if(!Lhe)return;let r=t.emit;t.emit=function(n,i){if(n==="exit"){let o=eKe(i,e);if(o)return r.call(t,"error",o)}return r.apply(t,arguments)}}s(TVt,"hookChildProcess");function eKe(t,e){return Lhe&&t===1&&!e.file?Fhe(e.original,"spawn"):null}s(eKe,"verifyENOENT");function wVt(t,e){return Lhe&&t===1&&!e.file?Fhe(e.original,"spawnSync"):null}s(wVt,"verifyENOENTSync");tKe.exports={hookChildProcess:TVt,verifyENOENT:eKe,verifyENOENTSync:wVt,notFoundError:Fhe}});var oKe=G((bdi,Lk)=>{"use strict";f();var nKe=require("child_process"),Mhe=ZYe(),Qhe=rKe();function iKe(t,e,r){let n=Mhe(t,e,r),i=nKe.spawn(n.command,n.args,n.options);return Qhe.hookChildProcess(i,n),i}s(iKe,"spawn");function _Vt(t,e,r){let n=Mhe(t,e,r),i=nKe.spawnSync(n.command,n.args,n.options);return i.error=i.error||Qhe.verifyENOENTSync(i.status,n),i}s(_Vt,"spawnSync");Lk.exports=iKe;Lk.exports.spawn=iKe;Lk.exports.sync=_Vt;Lk.exports._parse=Mhe;Lk.exports._enoent=Qhe});var t$t={};f1(t$t,{getTokenizer:()=>Do,getTokenizerAsync:()=>C2e,main:()=>jKe});module.exports=gXe(t$t);f();f();qAe().install();f();f();var hB="github.copilot";f();f();f();f();f();f();var ls=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,r){super(e,{cause:r}),this.name="CopilotAuthError"}};f();f();var bf=class t{static{s(this,"ExpConfig")}constructor(e,r,n){this.variables=e,this.assignmentContext=r,this.features=n}static createFallbackConfig(e,r){return V7(e,{reason:r}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var Ef="X-Copilot-RelatedPluginVersion-",gB=(W=>(W.Market="X-MSEdge-Market",W.CorpNet="X-FD-Corpnet",W.Build="X-VSCode-Build",W.ApplicationVersion="X-VSCode-AppVersion",W.TargetPopulation="X-VSCode-TargetPopulation",W.ClientId="X-MSEdge-ClientId",W.ExtensionName="X-VSCode-ExtensionName",W.ExtensionVersion="X-VSCode-ExtensionVersion",W.ExtensionRelease="X-VSCode-ExtensionRelease",W.Language="X-VSCode-Language",W.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",W.CopilotEngine="X-Copilot-Engine",W.CopilotOverrideEngine="X-Copilot-OverrideEngine",W.CopilotRepository="X-Copilot-Repository",W.CopilotFileType="X-Copilot-FileType",W.CopilotUserKind="X-Copilot-UserKind",W.CopilotDogfood="X-Copilot-Dogfood",W.CopilotCustomModel="X-Copilot-CustomModel",W.CopilotOrgs="X-Copilot-Orgs",W.CopilotCustomModelNames="X-Copilot-CustomModelNames",W.CopilotTrackingId="X-Copilot-CopilotTrackingId",W.CopilotClientVersion="X-Copilot-ClientVersion",W.CopilotRelatedPluginVersionCppTools=Ef+"msvscodecpptools",W.CopilotRelatedPluginVersionCMakeTools=Ef+"msvscodecmaketools",W.CopilotRelatedPluginVersionMakefileTools=Ef+"msvscodemakefiletools",W.CopilotRelatedPluginVersionCSharpDevKit=Ef+"msdotnettoolscsdevkit",W.CopilotRelatedPluginVersionPython=Ef+"mspythonpython",W.CopilotRelatedPluginVersionPylance=Ef+"mspythonvscodepylance",W.CopilotRelatedPluginVersionJavaPack=Ef+"vscjavavscodejavapack",W.CopilotRelatedPluginVersionTypescript=Ef+"vscodetypescriptlanguagefeatures",W.CopilotRelatedPluginVersionTypescriptNext=Ef+"msvscodevscodetypescriptnext",W.CopilotRelatedPluginVersionCSharp=Ef+"msdotnettoolscsharp",W))(gB||{});var tZe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},nI=class t{constructor(e){this.filters=e;for(let[r,n]of Object.entries(this.filters))n===""&&delete this.filters[r]}static{s(this,"FilterSettings")}extends(e){for(let[r,n]of Object.entries(e.filters))if(this.filters[r]!==n)return!1;return!0}addToTelemetry(e){for(let[r,n]of Object.entries(this.filters)){let i=tZe[r];i!==void 0&&(e.properties[i]=n)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(r=>`${r}:${this.filters[r]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,r){return new t({...this.filters,[e]:r})}};f();var on=class{static{s(this,"Fetcher")}#e;set rejectUnauthorized(e){this.#e=e}get rejectUnauthorized(){return this.#e}},AB=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,r){super(e,{cause:r}),this.name="HttpTimeoutError"}};function Lc(t){return!t||typeof t!="object"?!1:t instanceof AB||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Lc,"isAbortError");var N_=class extends SyntaxError{constructor(r,n){super(r);this.code=n;this.name="JsonParseError"}static{s(this,"JsonParseError")}},eg=class extends Error{static{s(this,"FetchResponseError")}constructor(e,r=`HTTP ${e.status} ${e.statusText}`){super(r),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},rZe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function yB(t,e=!0){return t instanceof Error?e&&"cause"in t&&yB(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof N_||t instanceof eg||t?.message?.startsWith("net::")||rZe.has(t.code??""):!1}s(yB,"isNetworkError");var xx=class{constructor(e,r,n,i,o){this.status=e;this.statusText=r;this.headers=n;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),r=this.headers.get("content-type");if(!r||!r.includes("json"))throw new N_(`Response content-type is ${r??"missing"} (status=${this.status})`,`ContentType=${r}`);try{return JSON.parse(e)}catch(n){if(n instanceof SyntaxError){let i=n.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||n.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new N_(`Response body truncated: actualLength=${o}`,"Truncated"):new N_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw n}}body(){return this.getBody()}};function iI(t,e,r,n,i,o,a,l,c){let u={...l,Authorization:`Bearer ${r}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Bs).sessionId,"VScode-MachineId":t.get(Bs).machineId,...n0(t),"X-GitHub-Api-Version":If};n&&(u["OpenAI-Intent"]=n);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(on);if(a){let h=p.makeAbortController();a.onCancellationRequested(()=>{Bt(t,"networking.cancelRequest",an.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if(nZe(h))return Bt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(iI,"postRequest");function nZe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(nZe,"isInterruptedNetworkError");f();f();var ac=class{static{s(this,"TelemetryUserConfig")}constructor(e,r,n,i){this.trackingId=r,this.optedIn=n??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,r=>{let n=r.getTokenValue("rt")==="1",i=r.getTokenValue("ft")??"",o=r.getTokenValue("tid"),a=r.organization_list,l=r.enterprise_list,c=r.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=n,this.ftFlag=i)})}};var BL=je(Ex()),DL=je(require("os"));var iZe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function oZe(t){let e={type:t.name,value:t.message},r=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(r?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let n of r.slice(t.toString().length+1).split(/\n/).reverse()){let i=n.match(iZe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(oZe,"buildExceptionDetail");function EX(t,e){let r=t.get(fn),n=r.getEditorInfo(),i=t.get(ac),o={"#editor":n.devName??n.name,"#editor_version":tg({name:n.devName??n.name,version:n.version}),"#plugin":r.getEditorPluginInfo().name,"#plugin_version":tg(r.getEditorPluginInfo()),"#session_id":t.get(Bs).sessionId,"#machine_id":t.get(Bs).machineId,"#architecture":DL.arch(),"#os_platform":DL.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(EX,"buildContext");function K1e(t,e){let r=t.get(po),n=t.get(fn).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:r.getBuildType()!=="dev"?`copilot-client@${r.getVersion()}`:void 0,deployed_to:r.getBuildType(),catalog_service:n.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:EX(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=oZe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,BL.SHA256)(BL.enc.Utf16.parse(u.join(`
`))).toString()),o}s(K1e,"buildPayload");f();var xB=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,r,n){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,r,n,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var X1e=je(Ex());var Jr=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,r){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let n=this.valueMap.keys().next().value;this.delete(n)}return this.valueMap.set(e,r),this}get(e){if(this.valueMap.has(e)){let r=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,r),r}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,r){new Map(this.valueMap).forEach(e,r)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},vB=class extends Jr{constructor(r,n=2*60*1e3){super(r);this.defaultTtl=n;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(r){let n=!1,i=this.expiration.get(r);return i!==void 0&&(i>performance.now()&&(n=super.has(r)),n||this.delete(r)),n}get(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.get(r);this.delete(r)}}peek(r){let n=this.expiration.get(r);if(n!==void 0){if(n>performance.now())return super.peek(r);this.delete(r)}}set(r,n,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(r,n);return this.expiration.set(r,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(r){return this.expiration.delete(r),super.delete(r)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}};var rg=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Jr}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let r=Date.now(),n=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return r-n[0]<6e5?!0:(n.push(r),n.shift(),this.cache.set(e,n),!1)}};f();var Tf=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,r=process.argv,n=process.env){return new t({debug:eye(r,n),verboseLogging:aZe(r,n),testMode:e,simulation:sZe(n)})}};function rm(t){return t.get(Tf).flags.testMode}s(rm,"isRunningInTest");function L_(t){return rm(t)}s(L_,"shouldFailForDebugPurposes");function bB(t){return t.get(Tf).flags.debug}s(bB,"isDebugEnabled");function Z1e(t){return t.get(Tf).flags.verboseLogging}s(Z1e,"isVerboseLoggingEnabled");function eye(t,e){return t.includes("--debug")||IX(e,"DEBUG")}s(eye,"determineDebugFlag");function sZe(t){return IX(t,"SIMULATION")}s(sZe,"determineSimulationFlag");function NL(t){return t.get(Tf).flags.simulation}s(NL,"isRunningInSimulation");function aZe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||IX(e,"VERBOSE")||eye(t,e)}s(aZe,"determineVerboseLoggingEnabled");function IX(t,e){for(let r of["GH_COPILOT_","GITHUB_COPILOT_"]){let n=t[`${r}${e}`];if(n)return n==="1"||n?.toLowerCase()==="true"}return!1}s(IX,"determineEnvFlagEnabled");f();var va=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var nye=require("os"),iye=je(require("path"));function EB(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(EB,"redactPaths");var lZe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),cZe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function wX(t){if(lZe.has(t))return t;for(let e of cZe)if(e.test(t))return t;return EB(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(wX,"redactMessage");function LL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(LL,"escapeForRegExp");var uZe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+LL((0,nye.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function TX(t){return t.replace(uZe,"~")}s(TX,"redactHomeDir");var oye="[\\\\/]?([^:)]*)(?=:\\d)",tye=new RegExp(LL(iye.sep),"g"),rye=new RegExp(LL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+oye,"gi");function _X(t,e,r=!1,n=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if(rye.test(l))i.stack+=`
${EB(l.replace(rye,(c,u)=>"./"+u.replace(tye,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${EB(l)}`;else{let c=!1;for(let{prefix:u,path:d}of n){let p=new RegExp(LL(d.replace(/[\\/]$/,""))+oye,"gi");if(p.test(l)){i.stack+=`
${EB(l.replace(p,(m,h)=>u+h.replace(tye,"/")))}`,c=!0;break}}if(c)continue;r?i.stack+=`
${TX(l)}`:i.stack+=`
    at [redacted]:0:0`}}else r&&o&&(i.stack=TX(o));return t.cause instanceof Error&&(i.cause=_X(t.cause,e,r,n)),i}s(_X,"cloneError");function sye(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(sye,"errorMessageWithoutPath");function aye(t,e){return _X(t,s(function(n){return TX(sye(n))},"prepareMessage"),!0,e)}s(aye,"prepareErrorForRestrictedTelemetry");function lye(t,e,r=!1){return _X(t,s(function(i){if(r)return wX(sye(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=EB(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(lye,"redactError");f();f();var Fc={};f1(Fc,{HasPropertyKey:()=>FL,IsArray:()=>ba,IsAsyncIterator:()=>SX,IsBigInt:()=>IB,IsBoolean:()=>h1,IsDate:()=>oI,IsFunction:()=>RX,IsIterator:()=>kX,IsNull:()=>BX,IsNumber:()=>i0,IsObject:()=>So,IsRegExp:()=>TB,IsString:()=>qo,IsSymbol:()=>DX,IsUint8Array:()=>g1,IsUndefined:()=>Ea});f();function FL(t,e){return e in t}s(FL,"HasPropertyKey");function SX(t){return So(t)&&!ba(t)&&!g1(t)&&Symbol.asyncIterator in t}s(SX,"IsAsyncIterator");function ba(t){return Array.isArray(t)}s(ba,"IsArray");function IB(t){return typeof t=="bigint"}s(IB,"IsBigInt");function h1(t){return typeof t=="boolean"}s(h1,"IsBoolean");function oI(t){return t instanceof globalThis.Date}s(oI,"IsDate");function RX(t){return typeof t=="function"}s(RX,"IsFunction");function kX(t){return So(t)&&!ba(t)&&!g1(t)&&Symbol.iterator in t}s(kX,"IsIterator");function BX(t){return t===null}s(BX,"IsNull");function i0(t){return typeof t=="number"}s(i0,"IsNumber");function So(t){return typeof t=="object"&&t!==null}s(So,"IsObject");function TB(t){return t instanceof globalThis.RegExp}s(TB,"IsRegExp");function qo(t){return typeof t=="string"}s(qo,"IsString");function DX(t){return typeof t=="symbol"}s(DX,"IsSymbol");function g1(t){return t instanceof globalThis.Uint8Array}s(g1,"IsUint8Array");function Ea(t){return t===void 0}s(Ea,"IsUndefined");function dZe(t){return t.map(e=>ML(e))}s(dZe,"ArrayType");function fZe(t){return new Date(t.getTime())}s(fZe,"DateType");function pZe(t){return new Uint8Array(t)}s(pZe,"Uint8ArrayType");function mZe(t){return new RegExp(t.source,t.flags)}s(mZe,"RegExpType");function hZe(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=ML(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=ML(t[r]);return e}s(hZe,"ObjectType");function ML(t){return ba(t)?dZe(t):oI(t)?fZe(t):g1(t)?pZe(t):TB(t)?mZe(t):So(t)?hZe(t):t}s(ML,"Visit");function cs(t){return ML(t)}s(cs,"Clone");function F_(t,e){return e===void 0?cs(t):cs({...e,...t})}s(F_,"CloneType");f();f();f();function QL(t){return ui(t)&&globalThis.Symbol.asyncIterator in t}s(QL,"IsAsyncIterator");function OL(t){return ui(t)&&globalThis.Symbol.iterator in t}s(OL,"IsIterator");function PX(t){return ui(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(PX,"IsStandardObject");function UL(t){return t instanceof globalThis.Promise}s(UL,"IsPromise");function xu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(xu,"IsDate");function cye(t){return t instanceof globalThis.Map}s(cye,"IsMap");function uye(t){return t instanceof globalThis.Set}s(uye,"IsSet");function wf(t){return globalThis.ArrayBuffer.isView(t)}s(wf,"IsTypedArray");function M_(t){return t instanceof globalThis.Uint8Array}s(M_,"IsUint8Array");function yn(t,e){return e in t}s(yn,"HasPropertyKey");function ui(t){return t!==null&&typeof t=="object"}s(ui,"IsObject");function Cn(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(Cn,"IsArray");function us(t){return t===void 0}s(us,"IsUndefined");function A1(t){return t===null}s(A1,"IsNull");function ng(t){return typeof t=="boolean"}s(ng,"IsBoolean");function Wr(t){return typeof t=="number"}s(Wr,"IsNumber");function qL(t){return globalThis.Number.isInteger(t)}s(qL,"IsInteger");function lc(t){return typeof t=="bigint"}s(lc,"IsBigInt");function Ui(t){return typeof t=="string"}s(Ui,"IsString");function Ix(t){return typeof t=="function"}s(Ix,"IsFunction");function y1(t){return typeof t=="symbol"}s(y1,"IsSymbol");function o0(t){return lc(t)||ng(t)||A1(t)||Wr(t)||Ui(t)||y1(t)||us(t)}s(o0,"IsValueType");var Jo;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){let l=ui(a);return t.AllowArrayObject?l:l&&!Cn(a)}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return r(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return t.AllowNaN?Wr(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=us(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Jo||(Jo={}));f();function gZe(t){return globalThis.Object.freeze(t).map(e=>wB(e))}s(gZe,"ImmutableArray");function AZe(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=wB(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=wB(t[r]);return globalThis.Object.freeze(e)}s(AZe,"ImmutableObject");function wB(t){return ba(t)?gZe(t):oI(t)?t:g1(t)?t:TB(t)?t:So(t)?AZe(t):t}s(wB,"Immutable");function rt(t,e){let r=e!==void 0?{...e,...t}:t;switch(Jo.InstanceMode){case"freeze":return wB(r);case"clone":return cs(r);default:return r}}s(rt,"CreateType");f();var xn=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ds=Symbol.for("TypeBox.Transform"),nm=Symbol.for("TypeBox.Readonly"),cc=Symbol.for("TypeBox.Optional"),_f=Symbol.for("TypeBox.Hint"),Ze=Symbol.for("TypeBox.Kind");function Q_(t){return So(t)&&t[nm]==="Readonly"}s(Q_,"IsReadonly");function sd(t){return So(t)&&t[cc]==="Optional"}s(sd,"IsOptional");function NX(t){return Pi(t,"Any")}s(NX,"IsAny");function LX(t){return Pi(t,"Argument")}s(LX,"IsArgument");function im(t){return Pi(t,"Array")}s(im,"IsArray");function sI(t){return Pi(t,"AsyncIterator")}s(sI,"IsAsyncIterator");function aI(t){return Pi(t,"BigInt")}s(aI,"IsBigInt");function C1(t){return Pi(t,"Boolean")}s(C1,"IsBoolean");function om(t){return Pi(t,"Computed")}s(om,"IsComputed");function sm(t){return Pi(t,"Constructor")}s(sm,"IsConstructor");function yZe(t){return Pi(t,"Date")}s(yZe,"IsDate");function am(t){return Pi(t,"Function")}s(am,"IsFunction");function lm(t){return Pi(t,"Integer")}s(lm,"IsInteger");function $s(t){return Pi(t,"Intersect")}s($s,"IsIntersect");function lI(t){return Pi(t,"Iterator")}s(lI,"IsIterator");function Pi(t,e){return So(t)&&Ze in t&&t[Ze]===e}s(Pi,"IsKindOf");function WL(t){return h1(t)||i0(t)||qo(t)}s(WL,"IsLiteralValue");function s0(t){return Pi(t,"Literal")}s(s0,"IsLiteral");function a0(t){return Pi(t,"MappedKey")}s(a0,"IsMappedKey");function ds(t){return Pi(t,"MappedResult")}s(ds,"IsMappedResult");function Tx(t){return Pi(t,"Never")}s(Tx,"IsNever");function CZe(t){return Pi(t,"Not")}s(CZe,"IsNot");function _B(t){return Pi(t,"Null")}s(_B,"IsNull");function cm(t){return Pi(t,"Number")}s(cm,"IsNumber");function Ia(t){return Pi(t,"Object")}s(Ia,"IsObject");function cI(t){return Pi(t,"Promise")}s(cI,"IsPromise");function uI(t){return Pi(t,"Record")}s(uI,"IsRecord");function oa(t){return Pi(t,"Ref")}s(oa,"IsRef");function FX(t){return Pi(t,"RegExp")}s(FX,"IsRegExp");function x1(t){return Pi(t,"String")}s(x1,"IsString");function SB(t){return Pi(t,"Symbol")}s(SB,"IsSymbol");function l0(t){return Pi(t,"TemplateLiteral")}s(l0,"IsTemplateLiteral");function xZe(t){return Pi(t,"This")}s(xZe,"IsThis");function oo(t){return So(t)&&Ds in t}s(oo,"IsTransform");function c0(t){return Pi(t,"Tuple")}s(c0,"IsTuple");function v1(t){return Pi(t,"Undefined")}s(v1,"IsUndefined");function qi(t){return Pi(t,"Union")}s(qi,"IsUnion");function vZe(t){return Pi(t,"Uint8Array")}s(vZe,"IsUint8Array");function bZe(t){return Pi(t,"Unknown")}s(bZe,"IsUnknown");function EZe(t){return Pi(t,"Unsafe")}s(EZe,"IsUnsafe");function IZe(t){return Pi(t,"Void")}s(IZe,"IsVoid");function wx(t){return So(t)&&Ze in t&&qo(t[Ze])}s(wx,"IsKind");function Ps(t){return NX(t)||LX(t)||im(t)||C1(t)||aI(t)||sI(t)||om(t)||sm(t)||yZe(t)||am(t)||lm(t)||$s(t)||lI(t)||s0(t)||a0(t)||ds(t)||Tx(t)||CZe(t)||_B(t)||cm(t)||Ia(t)||cI(t)||uI(t)||oa(t)||FX(t)||x1(t)||SB(t)||l0(t)||xZe(t)||c0(t)||v1(t)||qi(t)||vZe(t)||bZe(t)||EZe(t)||IZe(t)||wx(t)}s(Ps,"IsSchema");var De={};f1(De,{IsAny:()=>mye,IsArgument:()=>hye,IsArray:()=>gye,IsAsyncIterator:()=>Aye,IsBigInt:()=>yye,IsBoolean:()=>Cye,IsComputed:()=>xye,IsConstructor:()=>vye,IsDate:()=>bye,IsFunction:()=>Eye,IsImport:()=>kZe,IsInteger:()=>Iye,IsIntersect:()=>Tye,IsIterator:()=>wye,IsKind:()=>Xye,IsKindOf:()=>Ai,IsLiteral:()=>kB,IsLiteralBoolean:()=>BZe,IsLiteralNumber:()=>Sye,IsLiteralString:()=>_ye,IsLiteralValue:()=>Rye,IsMappedKey:()=>kye,IsMappedResult:()=>Bye,IsNever:()=>Dye,IsNot:()=>Pye,IsNull:()=>Nye,IsNumber:()=>Lye,IsObject:()=>Fye,IsOptional:()=>RZe,IsPromise:()=>Mye,IsProperties:()=>GL,IsReadonly:()=>SZe,IsRecord:()=>Qye,IsRecursive:()=>DZe,IsRef:()=>Oye,IsRegExp:()=>Uye,IsSchema:()=>ps,IsString:()=>qye,IsSymbol:()=>Wye,IsTemplateLiteral:()=>Gye,IsThis:()=>Hye,IsTransform:()=>jye,IsTuple:()=>Vye,IsUint8Array:()=>zye,IsUndefined:()=>$ye,IsUnion:()=>UX,IsUnionLiteral:()=>PZe,IsUnknown:()=>Yye,IsUnsafe:()=>Kye,IsVoid:()=>Jye,TypeGuardUnknownTypeError:()=>MX});f();var MX=class extends xn{static{s(this,"TypeGuardUnknownTypeError")}},TZe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function dye(t){try{return new RegExp(t),!0}catch{return!1}}s(dye,"IsPattern");function QX(t){if(!qo(t))return!1;for(let e=0;e<t.length;e++){let r=t.charCodeAt(e);if(r>=7&&r<=13||r===27||r===127)return!1}return!0}s(QX,"IsControlCharacterFree");function fye(t){return OX(t)||ps(t)}s(fye,"IsAdditionalProperties");function RB(t){return Ea(t)||IB(t)}s(RB,"IsOptionalBigInt");function Wo(t){return Ea(t)||i0(t)}s(Wo,"IsOptionalNumber");function OX(t){return Ea(t)||h1(t)}s(OX,"IsOptionalBoolean");function Ro(t){return Ea(t)||qo(t)}s(Ro,"IsOptionalString");function wZe(t){return Ea(t)||qo(t)&&QX(t)&&dye(t)}s(wZe,"IsOptionalPattern");function _Ze(t){return Ea(t)||qo(t)&&QX(t)}s(_Ze,"IsOptionalFormat");function pye(t){return Ea(t)||ps(t)}s(pye,"IsOptionalSchema");function SZe(t){return So(t)&&t[nm]==="Readonly"}s(SZe,"IsReadonly");function RZe(t){return So(t)&&t[cc]==="Optional"}s(RZe,"IsOptional");function mye(t){return Ai(t,"Any")&&Ro(t.$id)}s(mye,"IsAny");function hye(t){return Ai(t,"Argument")&&i0(t.index)}s(hye,"IsArgument");function gye(t){return Ai(t,"Array")&&t.type==="array"&&Ro(t.$id)&&ps(t.items)&&Wo(t.minItems)&&Wo(t.maxItems)&&OX(t.uniqueItems)&&pye(t.contains)&&Wo(t.minContains)&&Wo(t.maxContains)}s(gye,"IsArray");function Aye(t){return Ai(t,"AsyncIterator")&&t.type==="AsyncIterator"&&Ro(t.$id)&&ps(t.items)}s(Aye,"IsAsyncIterator");function yye(t){return Ai(t,"BigInt")&&t.type==="bigint"&&Ro(t.$id)&&RB(t.exclusiveMaximum)&&RB(t.exclusiveMinimum)&&RB(t.maximum)&&RB(t.minimum)&&RB(t.multipleOf)}s(yye,"IsBigInt");function Cye(t){return Ai(t,"Boolean")&&t.type==="boolean"&&Ro(t.$id)}s(Cye,"IsBoolean");function xye(t){return Ai(t,"Computed")&&qo(t.target)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))}s(xye,"IsComputed");function vye(t){return Ai(t,"Constructor")&&t.type==="Constructor"&&Ro(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(vye,"IsConstructor");function bye(t){return Ai(t,"Date")&&t.type==="Date"&&Ro(t.$id)&&Wo(t.exclusiveMaximumTimestamp)&&Wo(t.exclusiveMinimumTimestamp)&&Wo(t.maximumTimestamp)&&Wo(t.minimumTimestamp)&&Wo(t.multipleOfTimestamp)}s(bye,"IsDate");function Eye(t){return Ai(t,"Function")&&t.type==="Function"&&Ro(t.$id)&&ba(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(Eye,"IsFunction");function kZe(t){return Ai(t,"Import")&&FL(t,"$defs")&&So(t.$defs)&&GL(t.$defs)&&FL(t,"$ref")&&qo(t.$ref)&&t.$ref in t.$defs}s(kZe,"IsImport");function Iye(t){return Ai(t,"Integer")&&t.type==="integer"&&Ro(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(Iye,"IsInteger");function GL(t){return So(t)&&Object.entries(t).every(([e,r])=>QX(e)&&ps(r))}s(GL,"IsProperties");function Tye(t){return Ai(t,"Intersect")&&!(qo(t.type)&&t.type!=="object")&&ba(t.allOf)&&t.allOf.every(e=>ps(e)&&!jye(e))&&Ro(t.type)&&(OX(t.unevaluatedProperties)||pye(t.unevaluatedProperties))&&Ro(t.$id)}s(Tye,"IsIntersect");function wye(t){return Ai(t,"Iterator")&&t.type==="Iterator"&&Ro(t.$id)&&ps(t.items)}s(wye,"IsIterator");function Ai(t,e){return So(t)&&Ze in t&&t[Ze]===e}s(Ai,"IsKindOf");function _ye(t){return kB(t)&&qo(t.const)}s(_ye,"IsLiteralString");function Sye(t){return kB(t)&&i0(t.const)}s(Sye,"IsLiteralNumber");function BZe(t){return kB(t)&&h1(t.const)}s(BZe,"IsLiteralBoolean");function kB(t){return Ai(t,"Literal")&&Ro(t.$id)&&Rye(t.const)}s(kB,"IsLiteral");function Rye(t){return h1(t)||i0(t)||qo(t)}s(Rye,"IsLiteralValue");function kye(t){return Ai(t,"MappedKey")&&ba(t.keys)&&t.keys.every(e=>i0(e)||qo(e))}s(kye,"IsMappedKey");function Bye(t){return Ai(t,"MappedResult")&&GL(t.properties)}s(Bye,"IsMappedResult");function Dye(t){return Ai(t,"Never")&&So(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(Dye,"IsNever");function Pye(t){return Ai(t,"Not")&&ps(t.not)}s(Pye,"IsNot");function Nye(t){return Ai(t,"Null")&&t.type==="null"&&Ro(t.$id)}s(Nye,"IsNull");function Lye(t){return Ai(t,"Number")&&t.type==="number"&&Ro(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(Lye,"IsNumber");function Fye(t){return Ai(t,"Object")&&t.type==="object"&&Ro(t.$id)&&GL(t.properties)&&fye(t.additionalProperties)&&Wo(t.minProperties)&&Wo(t.maxProperties)}s(Fye,"IsObject");function Mye(t){return Ai(t,"Promise")&&t.type==="Promise"&&Ro(t.$id)&&ps(t.item)}s(Mye,"IsPromise");function Qye(t){return Ai(t,"Record")&&t.type==="object"&&Ro(t.$id)&&fye(t.additionalProperties)&&So(t.patternProperties)&&(e=>{let r=Object.getOwnPropertyNames(e.patternProperties);return r.length===1&&dye(r[0])&&So(e.patternProperties)&&ps(e.patternProperties[r[0]])})(t)}s(Qye,"IsRecord");function DZe(t){return So(t)&&_f in t&&t[_f]==="Recursive"}s(DZe,"IsRecursive");function Oye(t){return Ai(t,"Ref")&&Ro(t.$id)&&qo(t.$ref)}s(Oye,"IsRef");function Uye(t){return Ai(t,"RegExp")&&Ro(t.$id)&&qo(t.source)&&qo(t.flags)&&Wo(t.maxLength)&&Wo(t.minLength)}s(Uye,"IsRegExp");function qye(t){return Ai(t,"String")&&t.type==="string"&&Ro(t.$id)&&Wo(t.minLength)&&Wo(t.maxLength)&&wZe(t.pattern)&&_Ze(t.format)}s(qye,"IsString");function Wye(t){return Ai(t,"Symbol")&&t.type==="symbol"&&Ro(t.$id)}s(Wye,"IsSymbol");function Gye(t){return Ai(t,"TemplateLiteral")&&t.type==="string"&&qo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Gye,"IsTemplateLiteral");function Hye(t){return Ai(t,"This")&&Ro(t.$id)&&qo(t.$ref)}s(Hye,"IsThis");function jye(t){return So(t)&&Ds in t}s(jye,"IsTransform");function Vye(t){return Ai(t,"Tuple")&&t.type==="array"&&Ro(t.$id)&&i0(t.minItems)&&i0(t.maxItems)&&t.minItems===t.maxItems&&(Ea(t.items)&&Ea(t.additionalItems)&&t.minItems===0||ba(t.items)&&t.items.every(e=>ps(e)))}s(Vye,"IsTuple");function $ye(t){return Ai(t,"Undefined")&&t.type==="undefined"&&Ro(t.$id)}s($ye,"IsUndefined");function PZe(t){return UX(t)&&t.anyOf.every(e=>_ye(e)||Sye(e))}s(PZe,"IsUnionLiteral");function UX(t){return Ai(t,"Union")&&Ro(t.$id)&&So(t)&&ba(t.anyOf)&&t.anyOf.every(e=>ps(e))}s(UX,"IsUnion");function zye(t){return Ai(t,"Uint8Array")&&t.type==="Uint8Array"&&Ro(t.$id)&&Wo(t.minByteLength)&&Wo(t.maxByteLength)}s(zye,"IsUint8Array");function Yye(t){return Ai(t,"Unknown")&&Ro(t.$id)}s(Yye,"IsUnknown");function Kye(t){return Ai(t,"Unsafe")}s(Kye,"IsUnsafe");function Jye(t){return Ai(t,"Void")&&t.type==="void"&&Ro(t.$id)}s(Jye,"IsVoid");function Xye(t){return So(t)&&Ze in t&&qo(t[Ze])&&!TZe.includes(t[Ze])}s(Xye,"IsKind");function ps(t){return So(t)&&(mye(t)||hye(t)||gye(t)||Cye(t)||yye(t)||Aye(t)||xye(t)||vye(t)||bye(t)||Eye(t)||Iye(t)||Tye(t)||wye(t)||kB(t)||kye(t)||Bye(t)||Dye(t)||Pye(t)||Nye(t)||Lye(t)||Fye(t)||Mye(t)||Qye(t)||Oye(t)||Uye(t)||qye(t)||Wye(t)||Gye(t)||Hye(t)||Vye(t)||$ye(t)||UX(t)||zye(t)||Yye(t)||Kye(t)||Jye(t)||Xye(t))}s(ps,"IsSchema");f();var qX="(true|false)",BB="(0|[1-9][0-9]*)",WX="(.*)",NZe="(?!.*)",FKt=`^${qX}$`,ig=`^${BB}$`,og=`^${WX}$`,Zye=`^${NZe}$`;f();var um={};f1(um,{Clear:()=>FZe,Delete:()=>MZe,Entries:()=>LZe,Get:()=>UZe,Has:()=>QZe,Set:()=>OZe});f();var O_=new Map;function LZe(){return new Map(O_)}s(LZe,"Entries");function FZe(){return O_.clear()}s(FZe,"Clear");function MZe(t){return O_.delete(t)}s(MZe,"Delete");function QZe(t){return O_.has(t)}s(QZe,"Has");function OZe(t,e){O_.set(t,e)}s(OZe,"Set");function UZe(t){return O_.get(t)}s(UZe,"Get");var vu={};f1(vu,{Clear:()=>WZe,Delete:()=>GZe,Entries:()=>qZe,Get:()=>VZe,Has:()=>HZe,Set:()=>jZe});f();var U_=new Map;function qZe(){return new Map(U_)}s(qZe,"Entries");function WZe(){return U_.clear()}s(WZe,"Clear");function GZe(t){return U_.delete(t)}s(GZe,"Delete");function HZe(t){return U_.has(t)}s(HZe,"Has");function jZe(t,e){U_.set(t,e)}s(jZe,"Set");function VZe(t){return U_.get(t)}s(VZe,"Get");f();function eCe(t,e){return t.includes(e)}s(eCe,"SetIncludes");function tCe(t){return[...new Set(t)]}s(tCe,"SetDistinct");function $Ze(t,e){return t.filter(r=>e.includes(r))}s($Ze,"SetIntersect");function zZe(t,e){return t.reduce((r,n)=>$Ze(r,n),e)}s(zZe,"SetIntersectManyResolve");function rCe(t){return t.length===1?t[0]:t.length>1?zZe(t.slice(1),t[0]):[]}s(rCe,"SetIntersectMany");function nCe(t){let e=[];for(let r of t)e.push(...r);return e}s(nCe,"SetUnionMany");f();function _x(t){return rt({[Ze]:"Any"},t)}s(_x,"Any");f();function q_(t,e){return rt({[Ze]:"Array",type:"array",items:t},e)}s(q_,"Array");f();function iCe(t){return rt({[Ze]:"Argument",index:t})}s(iCe,"Argument");f();function W_(t,e){return rt({[Ze]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(W_,"AsyncIterator");f();f();function Xo(t,e,r){return rt({[Ze]:"Computed",target:t,parameters:e},r)}s(Xo,"Computed");f();f();function YZe(t,e){let{[e]:r,...n}=t;return n}s(YZe,"DiscardKey");function zs(t,e){return e.reduce((r,n)=>YZe(r,n),t)}s(zs,"Discard");f();function ni(t){return rt({[Ze]:"Never",not:{}},t)}s(ni,"Never");f();f();function zi(t){return rt({[Ze]:"MappedResult",properties:t})}s(zi,"MappedResult");f();f();function G_(t,e,r){return rt({[Ze]:"Constructor",type:"Constructor",parameters:t,returns:e},r)}s(G_,"Constructor");f();function sg(t,e,r){return rt({[Ze]:"Function",type:"Function",parameters:t,returns:e},r)}s(sg,"Function");f();f();f();f();function DB(t,e){return rt({[Ze]:"Union",anyOf:t},e)}s(DB,"UnionCreate");function KZe(t){return t.some(e=>sd(e))}s(KZe,"IsUnionOptional");function oCe(t){return t.map(e=>sd(e)?JZe(e):e)}s(oCe,"RemoveOptionalFromRest");function JZe(t){return zs(t,[cc])}s(JZe,"RemoveOptionalFromType");function XZe(t,e){return KZe(t)?Mc(DB(oCe(t),e)):DB(oCe(t),e)}s(XZe,"ResolveUnion");function ag(t,e){return t.length===1?rt(t[0],e):t.length===0?ni(e):XZe(t,e)}s(ag,"UnionEvaluated");f();function so(t,e){return t.length===0?ni(e):t.length===1?rt(t[0],e):DB(t,e)}s(so,"Union");f();f();f();var HL=class extends xn{static{s(this,"TemplateLiteralParserError")}};function ZZe(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(ZZe,"Unescape");function GX(t,e,r){return t[e]===r&&t.charCodeAt(e-1)!==92}s(GX,"IsNonEscaped");function E1(t,e){return GX(t,e,"(")}s(E1,"IsOpenParen");function PB(t,e){return GX(t,e,")")}s(PB,"IsCloseParen");function sCe(t,e){return GX(t,e,"|")}s(sCe,"IsSeparator");function eet(t){if(!(E1(t,0)&&PB(t,t.length-1)))return!1;let e=0;for(let r=0;r<t.length;r++)if(E1(t,r)&&(e+=1),PB(t,r)&&(e-=1),e===0&&r!==t.length-1)return!1;return!0}s(eet,"IsGroup");function tet(t){return t.slice(1,t.length-1)}s(tet,"InGroup");function ret(t){let e=0;for(let r=0;r<t.length;r++)if(E1(t,r)&&(e+=1),PB(t,r)&&(e-=1),sCe(t,r)&&e===0)return!0;return!1}s(ret,"IsPrecedenceOr");function net(t){for(let e=0;e<t.length;e++)if(E1(t,e))return!0;return!1}s(net,"IsPrecedenceAnd");function iet(t){let[e,r]=[0,0],n=[];for(let o=0;o<t.length;o++)if(E1(t,o)&&(e+=1),PB(t,o)&&(e-=1),sCe(t,o)&&e===0){let a=t.slice(r,o);a.length>0&&n.push(H_(a)),r=o+1}let i=t.slice(r);return i.length>0&&n.push(H_(i)),n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"or",expr:n}}s(iet,"Or");function oet(t){function e(i,o){if(!E1(i,o))throw new HL("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(E1(i,l)&&(a+=1),PB(i,l)&&(a-=1),a===0)return[o,l];throw new HL("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function r(i,o){for(let a=o;a<i.length;a++)if(E1(i,a))return[o,a];return[o,i.length]}s(r,"Range");let n=[];for(let i=0;i<t.length;i++)if(E1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);n.push(H_(l)),i=a}else{let[o,a]=r(t,i),l=t.slice(o,a);l.length>0&&n.push(H_(l)),i=a-1}return n.length===0?{type:"const",const:""}:n.length===1?n[0]:{type:"and",expr:n}}s(oet,"And");function H_(t){return eet(t)?H_(tet(t)):ret(t)?iet(t):net(t)?oet(t):{type:"const",const:ZZe(t)}}s(H_,"TemplateLiteralParse");function j_(t){return H_(t.slice(1,t.length-1))}s(j_,"TemplateLiteralParseExact");var HX=class extends xn{static{s(this,"TemplateLiteralFiniteError")}};function set(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(set,"IsNumberExpression");function aet(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(aet,"IsBooleanExpression");function cet(t){return t.type==="const"&&t.const===".*"}s(cet,"IsStringExpression");function dI(t){return set(t)||cet(t)?!1:aet(t)?!0:t.type==="and"?t.expr.every(e=>dI(e)):t.type==="or"?t.expr.every(e=>dI(e)):t.type==="const"?!0:(()=>{throw new HX("Unknown expression type")})()}s(dI,"IsTemplateLiteralExpressionFinite");function jL(t){let e=j_(t.pattern);return dI(e)}s(jL,"IsTemplateLiteralFinite");f();var jX=class extends xn{static{s(this,"TemplateLiteralGenerateError")}};function*aCe(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let r of aCe(t.slice(1)))yield`${e}${r}`}s(aCe,"GenerateReduce");function*uet(t){return yield*aCe(t.expr.map(e=>[...NB(e)]))}s(uet,"GenerateAnd");function*det(t){for(let e of t.expr)yield*NB(e)}s(det,"GenerateOr");function*fet(t){return yield t.const}s(fet,"GenerateConst");function*NB(t){return t.type==="and"?yield*uet(t):t.type==="or"?yield*det(t):t.type==="const"?yield*fet(t):(()=>{throw new jX("Unknown expression")})()}s(NB,"TemplateLiteralExpressionGenerate");function V_(t){let e=j_(t.pattern);return dI(e)?[...NB(e)]:[]}s(V_,"TemplateLiteralGenerate");f();f();function Ni(t,e){return rt({[Ze]:"Literal",const:t,type:typeof t},e)}s(Ni,"Literal");f();function VL(t){return rt({[Ze]:"Boolean",type:"boolean"},t)}s(VL,"Boolean");f();function $_(t){return rt({[Ze]:"BigInt",type:"bigint"},t)}s($_,"BigInt");f();function Sf(t){return rt({[Ze]:"Number",type:"number"},t)}s(Sf,"Number");f();function bu(t){return rt({[Ze]:"String",type:"string"},t)}s(bu,"String");function*pet(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield VL():e==="number"?yield Sf():e==="bigint"?yield $_():e==="string"?yield bu():yield(()=>{let r=e.split("|").map(n=>Ni(n.trim()));return r.length===0?ni():r.length===1?r[0]:ag(r)})()}s(pet,"FromUnion");function*met(t){if(t[1]!=="{"){let e=Ni("$"),r=VX(t.slice(1));return yield*[e,...r]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let r=pet(t.slice(2,e)),n=VX(t.slice(e+1));return yield*[...r,...n]}yield Ni(t)}s(met,"FromTerminal");function*VX(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let r=Ni(t.slice(0,e)),n=met(t.slice(e));return yield*[r,...n]}yield Ni(t)}s(VX,"FromSyntax");function lCe(t){return[...VX(t)]}s(lCe,"TemplateLiteralSyntax");f();var $X=class extends xn{static{s(this,"TemplateLiteralPatternError")}};function het(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(het,"Escape");function cCe(t,e){return l0(t)?t.pattern.slice(1,t.pattern.length-1):qi(t)?`(${t.anyOf.map(r=>cCe(r,e)).join("|")})`:cm(t)?`${e}${BB}`:lm(t)?`${e}${BB}`:aI(t)?`${e}${BB}`:x1(t)?`${e}${WX}`:s0(t)?`${e}${het(t.const.toString())}`:C1(t)?`${e}${qX}`:(()=>{throw new $X(`Unexpected Kind '${t[Ze]}'`)})()}s(cCe,"Visit");function zX(t){return`^${t.map(e=>cCe(e,"")).join("")}$`}s(zX,"TemplateLiteralPattern");f();function fI(t){let r=V_(t).map(n=>Ni(n));return ag(r)}s(fI,"TemplateLiteralToUnion");f();function $L(t,e){let r=qo(t)?zX(lCe(t)):zX(t);return rt({[Ze]:"TemplateLiteral",type:"string",pattern:r},e)}s($L,"TemplateLiteral");function get(t){return V_(t).map(r=>r.toString())}s(get,"FromTemplateLiteral");function Aet(t){let e=[];for(let r of t)e.push(...ad(r));return e}s(Aet,"FromUnion");function yet(t){return[t.toString()]}s(yet,"FromLiteral");function ad(t){return[...new Set(l0(t)?get(t):qi(t)?Aet(t.anyOf):s0(t)?yet(t.const):cm(t)?["[number]"]:lm(t)?["[number]"]:[])]}s(ad,"IndexPropertyKeys");f();function Cet(t,e,r){let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=Sx(t,ad(e[i]),r);return n}s(Cet,"FromProperties");function xet(t,e,r){return Cet(t,e.properties,r)}s(xet,"FromMappedResult");function uCe(t,e,r){let n=xet(t,e,r);return zi(n)}s(uCe,"IndexFromMappedResult");function fCe(t,e){return t.map(r=>pCe(r,e))}s(fCe,"FromRest");function vet(t){return t.filter(e=>!Tx(e))}s(vet,"FromIntersectRest");function bet(t,e){return zL(vet(fCe(t,e)))}s(bet,"FromIntersect");function Eet(t){return t.some(e=>Tx(e))?[]:t}s(Eet,"FromUnionRest");function Iet(t,e){return ag(Eet(fCe(t,e)))}s(Iet,"FromUnion");function Tet(t,e){return e in t?t[e]:e==="[number]"?ag(t):ni()}s(Tet,"FromTuple");function wet(t,e){return e==="[number]"?t:ni()}s(wet,"FromArray");function _et(t,e){return e in t?t[e]:ni()}s(_et,"FromProperty");function pCe(t,e){return $s(t)?bet(t.allOf,e):qi(t)?Iet(t.anyOf,e):c0(t)?Tet(t.items??[],e):im(t)?wet(t.items,e):Ia(t)?_et(t.properties,e):ni()}s(pCe,"IndexFromPropertyKey");function LB(t,e){return e.map(r=>pCe(t,r))}s(LB,"IndexFromPropertyKeys");function dCe(t,e){return ag(LB(t,e))}s(dCe,"FromSchema");function Sx(t,e,r){if(oa(t)||oa(e)){let n="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ps(t)||!Ps(e))throw new xn(n);return Xo("Index",[t,e])}return ds(e)?uCe(t,e,r):a0(e)?mCe(t,e,r):rt(Ps(e)?dCe(t,ad(e)):dCe(t,e),r)}s(Sx,"Index");function Ret(t,e,r){return{[e]:Sx(t,[e],cs(r))}}s(Ret,"MappedIndexPropertyKey");function ket(t,e,r){return e.reduce((n,i)=>({...n,...Ret(t,i,r)}),{})}s(ket,"MappedIndexPropertyKeys");function Bet(t,e,r){return ket(t,e.keys,r)}s(Bet,"MappedIndexProperties");function mCe(t,e,r){let n=Bet(t,e,r);return zi(n)}s(mCe,"IndexFromMappedKey");f();function z_(t,e){return rt({[Ze]:"Iterator",type:"Iterator",items:t},e)}s(z_,"Iterator");f();function Det(t){let e=[];for(let r in t)sd(t[r])||e.push(r);return e}s(Det,"RequiredKeys");function Pet(t,e){let r=Det(t),n=r.length>0?{[Ze]:"Object",type:"object",properties:t,required:r}:{[Ze]:"Object",type:"object",properties:t};return rt(n,e)}s(Pet,"_Object");var ao=Pet;f();function YL(t,e){return rt({[Ze]:"Promise",type:"Promise",item:t},e)}s(YL,"Promise");f();f();function Net(t){return rt(zs(t,[nm]))}s(Net,"RemoveReadonly");function Let(t){return rt({...t,[nm]:"Readonly"})}s(Let,"AddReadonly");function Fet(t,e){return e===!1?Net(t):Let(t)}s(Fet,"ReadonlyWithFlag");function ld(t,e){let r=e??!0;return ds(t)?hCe(t,r):Fet(t,r)}s(ld,"Readonly");function Met(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=ld(t[n],e);return r}s(Met,"FromProperties");function Qet(t,e){return Met(t.properties,e)}s(Qet,"FromMappedResult");function hCe(t,e){let r=Qet(t,e);return zi(r)}s(hCe,"ReadonlyFromMappedResult");f();function Rf(t,e){return rt(t.length>0?{[Ze]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Ze]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Rf,"Tuple");function gCe(t,e){return t in e?kf(t,e[t]):zi(e)}s(gCe,"FromMappedResult");function Oet(t){return{[t]:Ni(t)}}s(Oet,"MappedKeyToKnownMappedResultProperties");function Uet(t){let e={};for(let r of t)e[r]=Ni(r);return e}s(Uet,"MappedKeyToUnknownMappedResultProperties");function qet(t,e){return eCe(e,t)?Oet(t):Uet(e)}s(qet,"MappedKeyToMappedResultProperties");function Wet(t,e){let r=qet(t,e);return gCe(t,r)}s(Wet,"FromMappedKey");function FB(t,e){return e.map(r=>kf(t,r))}s(FB,"FromRest");function Get(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(e))r[n]=kf(t,e[n]);return r}s(Get,"FromProperties");function kf(t,e){let r={...e};return sd(e)?Mc(kf(t,zs(e,[cc]))):Q_(e)?ld(kf(t,zs(e,[nm]))):ds(e)?gCe(t,e.properties):a0(e)?Wet(t,e.keys):sm(e)?G_(FB(t,e.parameters),kf(t,e.returns),r):am(e)?sg(FB(t,e.parameters),kf(t,e.returns),r):sI(e)?W_(kf(t,e.items),r):lI(e)?z_(kf(t,e.items),r):$s(e)?Qc(FB(t,e.allOf),r):qi(e)?so(FB(t,e.anyOf),r):c0(e)?Rf(FB(t,e.items??[]),r):Ia(e)?ao(Get(t,e.properties),r):im(e)?q_(kf(t,e.items),r):cI(e)?YL(kf(t,e.item),r):e}s(kf,"FromSchemaType");function Het(t,e){let r={};for(let n of t)r[n]=kf(n,e);return r}s(Het,"MappedFunctionReturnType");function ACe(t,e,r){let n=Ps(t)?ad(t):t,i=e({[Ze]:"MappedKey",keys:n}),o=Het(n,i);return ao(o,r)}s(ACe,"Mapped");f();function jet(t){return rt(zs(t,[cc]))}s(jet,"RemoveOptional");function Vet(t){return rt({...t,[cc]:"Optional"})}s(Vet,"AddOptional");function $et(t,e){return e===!1?jet(t):Vet(t)}s($et,"OptionalWithFlag");function Mc(t,e){let r=e??!0;return ds(t)?yCe(t,r):$et(t,r)}s(Mc,"Optional");function zet(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Mc(t[n],e);return r}s(zet,"FromProperties");function Yet(t,e){return zet(t.properties,e)}s(Yet,"FromMappedResult");function yCe(t,e){let r=Yet(t,e);return zi(r)}s(yCe,"OptionalFromMappedResult");f();function MB(t,e={}){let r=t.every(i=>Ia(i)),n=Ps(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return rt(e.unevaluatedProperties===!1||Ps(e.unevaluatedProperties)||r?{...n,[Ze]:"Intersect",type:"object",allOf:t}:{...n,[Ze]:"Intersect",allOf:t},e)}s(MB,"IntersectCreate");function Ket(t){return t.every(e=>sd(e))}s(Ket,"IsIntersectOptional");function Jet(t){return zs(t,[cc])}s(Jet,"RemoveOptionalFromType");function CCe(t){return t.map(e=>sd(e)?Jet(e):e)}s(CCe,"RemoveOptionalFromRest");function Xet(t,e){return Ket(t)?Mc(MB(CCe(t),e)):MB(CCe(t),e)}s(Xet,"ResolveIntersect");function zL(t,e={}){if(t.length===1)return rt(t[0],e);if(t.length===0)return ni(e);if(t.some(r=>oo(r)))throw new Error("Cannot intersect transform types");return Xet(t,e)}s(zL,"IntersectEvaluated");f();function Qc(t,e){if(t.length===1)return rt(t[0],e);if(t.length===0)return ni(e);if(t.some(r=>oo(r)))throw new Error("Cannot intersect transform types");return MB(t,e)}s(Qc,"Intersect");f();function Bf(...t){let[e,r]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new xn("Ref: $ref must be a string");return rt({[Ze]:"Ref",$ref:e},r)}s(Bf,"Ref");function Zet(t,e){return Xo("Awaited",[Xo(t,e)])}s(Zet,"FromComputed");function ett(t){return Xo("Awaited",[Bf(t)])}s(ett,"FromRef");function ttt(t){return Qc(xCe(t))}s(ttt,"FromIntersect");function rtt(t){return so(xCe(t))}s(rtt,"FromUnion");function ntt(t){return Y_(t)}s(ntt,"FromPromise");function xCe(t){return t.map(e=>Y_(e))}s(xCe,"FromRest");function Y_(t,e){return rt(om(t)?Zet(t.target,t.parameters):$s(t)?ttt(t.allOf):qi(t)?rtt(t.anyOf):cI(t)?ntt(t.item):oa(t)?ett(t.$ref):t,e)}s(Y_,"Awaited");f();f();f();f();function vCe(t){let e=[];for(let r of t)e.push(cd(r));return e}s(vCe,"FromRest");function itt(t){let e=vCe(t);return nCe(e)}s(itt,"FromIntersect");function ott(t){let e=vCe(t);return rCe(e)}s(ott,"FromUnion");function stt(t){return t.map((e,r)=>r.toString())}s(stt,"FromTuple");function att(t){return["[number]"]}s(att,"FromArray");function ltt(t){return globalThis.Object.getOwnPropertyNames(t)}s(ltt,"FromProperties");function ctt(t){return YX?globalThis.Object.getOwnPropertyNames(t).map(r=>r[0]==="^"&&r[r.length-1]==="$"?r.slice(1,r.length-1):r):[]}s(ctt,"FromPatternProperties");function cd(t){return $s(t)?itt(t.allOf):qi(t)?ott(t.anyOf):c0(t)?stt(t.items??[]):im(t)?att(t.items):Ia(t)?ltt(t.properties):uI(t)?ctt(t.patternProperties):[]}s(cd,"KeyOfPropertyKeys");var YX=!1;function I1(t){YX=!0;let e=cd(t);return YX=!1,`^(${e.map(n=>`(${n})`).join("|")})$`}s(I1,"KeyOfPattern");function utt(t,e){return Xo("KeyOf",[Xo(t,e)])}s(utt,"FromComputed");function dtt(t){return Xo("KeyOf",[Bf(t)])}s(dtt,"FromRef");function ftt(t,e){let r=cd(t),n=ptt(r),i=ag(n);return rt(i,e)}s(ftt,"KeyOfFromType");function ptt(t){return t.map(e=>e==="[number]"?Sf():Ni(e))}s(ptt,"KeyOfPropertyKeysToRest");function K_(t,e){return om(t)?utt(t.target,t.parameters):oa(t)?dtt(t.$ref):ds(t)?bCe(t,e):ftt(t,e)}s(K_,"KeyOf");function mtt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=K_(t[n],cs(e));return r}s(mtt,"FromProperties");function htt(t,e){return mtt(t.properties,e)}s(htt,"FromMappedResult");function bCe(t,e){let r=htt(t,e);return zi(r)}s(bCe,"KeyOfFromMappedResult");f();function KL(t){let e=cd(t),r=LB(t,e);return e.map((n,i)=>[e[i],r[i]])}s(KL,"KeyOfPropertyEntries");function gtt(t){let e=[];for(let r of t)e.push(...cd(r));return tCe(e)}s(gtt,"CompositeKeys");function Att(t){return t.filter(e=>!Tx(e))}s(Att,"FilterNever");function ytt(t,e){let r=[];for(let n of t)r.push(...LB(n,[e]));return Att(r)}s(ytt,"CompositeProperty");function Ctt(t,e){let r={};for(let n of e)r[n]=zL(ytt(t,n));return r}s(Ctt,"CompositeProperties");function ECe(t,e){let r=gtt(t),n=Ctt(t,r);return ao(n,e)}s(ECe,"Composite");f();f();function JL(t){return rt({[Ze]:"Date",type:"Date"},t)}s(JL,"Date");f();function XL(t){return rt({[Ze]:"Null",type:"null"},t)}s(XL,"Null");f();function ZL(t){return rt({[Ze]:"Symbol",type:"symbol"},t)}s(ZL,"Symbol");f();function eF(t){return rt({[Ze]:"Undefined",type:"undefined"},t)}s(eF,"Undefined");f();function tF(t){return rt({[Ze]:"Uint8Array",type:"Uint8Array"},t)}s(tF,"Uint8Array");f();function dm(t){return rt({[Ze]:"Unknown"},t)}s(dm,"Unknown");function xtt(t){return t.map(e=>KX(e,!1))}s(xtt,"FromArray");function vtt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=ld(KX(t[r],!1));return e}s(vtt,"FromProperties");function rF(t,e){return e===!0?t:ld(t)}s(rF,"ConditionalReadonly");function KX(t,e){return SX(t)?rF(_x(),e):kX(t)?rF(_x(),e):ba(t)?ld(Rf(xtt(t))):g1(t)?tF():oI(t)?JL():So(t)?rF(ao(vtt(t)),e):RX(t)?rF(sg([],dm()),e):Ea(t)?eF():BX(t)?XL():DX(t)?ZL():IB(t)?$_():i0(t)?Ni(t):h1(t)?Ni(t):qo(t)?Ni(t):ao({})}s(KX,"FromValue");function ICe(t,e){return rt(KX(t,!0),e)}s(ICe,"Const");f();function TCe(t,e){return sm(t)?Rf(t.parameters,e):ni(e)}s(TCe,"ConstructorParameters");f();function wCe(t,e){if(Ea(t))throw new Error("Enum undefined or empty");let r=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(r)].map(o=>Ni(o));return so(i,{...e,[_f]:"Enum"})}s(wCe,"Enum");f();f();f();var XX=class extends xn{static{s(this,"ExtendsResolverError")}},nt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(nt||(nt={}));function Df(t){return t===nt.False?t:nt.True}s(Df,"IntoBooleanResult");function J_(t){throw new XX(t)}s(J_,"Throw");function Ha(t){return De.IsNever(t)||De.IsIntersect(t)||De.IsUnion(t)||De.IsUnknown(t)||De.IsAny(t)}s(Ha,"IsStructuralRight");function ja(t,e){return De.IsNever(e)?PCe(t,e):De.IsIntersect(e)?nF(t,e):De.IsUnion(e)?rZ(t,e):De.IsUnknown(e)?MCe(t,e):De.IsAny(e)?tZ(t,e):J_("StructuralRight")}s(ja,"StructuralRight");function tZ(t,e){return nt.True}s(tZ,"FromAnyRight");function btt(t,e){return De.IsIntersect(e)?nF(t,e):De.IsUnion(e)&&e.anyOf.some(r=>De.IsAny(r)||De.IsUnknown(r))?nt.True:De.IsUnion(e)?nt.Union:De.IsUnknown(e)||De.IsAny(e)?nt.True:nt.Union}s(btt,"FromAny");function Ett(t,e){return De.IsUnknown(t)?nt.False:De.IsAny(t)?nt.Union:De.IsNever(t)?nt.True:nt.False}s(Ett,"FromArrayRight");function Itt(t,e){return De.IsObject(e)&&iF(e)?nt.True:Ha(e)?ja(t,e):De.IsArray(e)?Df(ko(t.items,e.items)):nt.False}s(Itt,"FromArray");function Ttt(t,e){return Ha(e)?ja(t,e):De.IsAsyncIterator(e)?Df(ko(t.items,e.items)):nt.False}s(Ttt,"FromAsyncIterator");function wtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsBigInt(e)?nt.True:nt.False}s(wtt,"FromBigInt");function BCe(t,e){return De.IsLiteralBoolean(t)||De.IsBoolean(t)?nt.True:nt.False}s(BCe,"FromBooleanRight");function _tt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsBoolean(e)?nt.True:nt.False}s(_tt,"FromBoolean");function Stt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsConstructor(e)?t.parameters.length>e.parameters.length?nt.False:t.parameters.every((r,n)=>Df(ko(e.parameters[n],r))===nt.True)?Df(ko(t.returns,e.returns)):nt.False:nt.False}s(Stt,"FromConstructor");function Rtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsDate(e)?nt.True:nt.False}s(Rtt,"FromDate");function ktt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsFunction(e)?t.parameters.length>e.parameters.length?nt.False:t.parameters.every((r,n)=>Df(ko(e.parameters[n],r))===nt.True)?Df(ko(t.returns,e.returns)):nt.False:nt.False}s(ktt,"FromFunction");function DCe(t,e){return De.IsLiteral(t)&&Fc.IsNumber(t.const)||De.IsNumber(t)||De.IsInteger(t)?nt.True:nt.False}s(DCe,"FromIntegerRight");function Btt(t,e){return De.IsInteger(e)||De.IsNumber(e)?nt.True:Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):nt.False}s(Btt,"FromInteger");function nF(t,e){return e.allOf.every(r=>ko(t,r)===nt.True)?nt.True:nt.False}s(nF,"FromIntersectRight");function Dtt(t,e){return t.allOf.some(r=>ko(r,e)===nt.True)?nt.True:nt.False}s(Dtt,"FromIntersect");function Ptt(t,e){return Ha(e)?ja(t,e):De.IsIterator(e)?Df(ko(t.items,e.items)):nt.False}s(Ptt,"FromIterator");function Ntt(t,e){return De.IsLiteral(e)&&e.const===t.const?nt.True:Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsString(e)?FCe(t,e):De.IsNumber(e)?NCe(t,e):De.IsInteger(e)?DCe(t,e):De.IsBoolean(e)?BCe(t,e):nt.False}s(Ntt,"FromLiteral");function PCe(t,e){return nt.False}s(PCe,"FromNeverRight");function Ltt(t,e){return nt.True}s(Ltt,"FromNever");function _Ce(t){let[e,r]=[t,0];for(;De.IsNot(e);)e=e.not,r+=1;return r%2===0?e:dm()}s(_Ce,"UnwrapTNot");function Ftt(t,e){return De.IsNot(t)?ko(_Ce(t),e):De.IsNot(e)?ko(t,_Ce(e)):J_("Invalid fallthrough for Not")}s(Ftt,"FromNot");function Mtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsNull(e)?nt.True:nt.False}s(Mtt,"FromNull");function NCe(t,e){return De.IsLiteralNumber(t)||De.IsNumber(t)||De.IsInteger(t)?nt.True:nt.False}s(NCe,"FromNumberRight");function Qtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsInteger(e)||De.IsNumber(e)?nt.True:nt.False}s(Qtt,"FromNumber");function ud(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(ud,"IsObjectPropertyCount");function SCe(t){return iF(t)}s(SCe,"IsObjectStringLike");function RCe(t){return ud(t,0)||ud(t,1)&&"description"in t.properties&&De.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(De.IsString(t.properties.description.anyOf[0])&&De.IsUndefined(t.properties.description.anyOf[1])||De.IsString(t.properties.description.anyOf[1])&&De.IsUndefined(t.properties.description.anyOf[0]))}s(RCe,"IsObjectSymbolLike");function JX(t){return ud(t,0)}s(JX,"IsObjectNumberLike");function kCe(t){return ud(t,0)}s(kCe,"IsObjectBooleanLike");function Ott(t){return ud(t,0)}s(Ott,"IsObjectBigIntLike");function Utt(t){return ud(t,0)}s(Utt,"IsObjectDateLike");function qtt(t){return iF(t)}s(qtt,"IsObjectUint8ArrayLike");function Wtt(t){let e=Sf();return ud(t,0)||ud(t,1)&&"length"in t.properties&&Df(ko(t.properties.length,e))===nt.True}s(Wtt,"IsObjectFunctionLike");function Gtt(t){return ud(t,0)}s(Gtt,"IsObjectConstructorLike");function iF(t){let e=Sf();return ud(t,0)||ud(t,1)&&"length"in t.properties&&Df(ko(t.properties.length,e))===nt.True}s(iF,"IsObjectArrayLike");function Htt(t){let e=sg([_x()],_x());return ud(t,0)||ud(t,1)&&"then"in t.properties&&Df(ko(t.properties.then,e))===nt.True}s(Htt,"IsObjectPromiseLike");function LCe(t,e){return ko(t,e)===nt.False||De.IsOptional(t)&&!De.IsOptional(e)?nt.False:nt.True}s(LCe,"Property");function Oc(t,e){return De.IsUnknown(t)?nt.False:De.IsAny(t)?nt.Union:De.IsNever(t)||De.IsLiteralString(t)&&SCe(e)||De.IsLiteralNumber(t)&&JX(e)||De.IsLiteralBoolean(t)&&kCe(e)||De.IsSymbol(t)&&RCe(e)||De.IsBigInt(t)&&Ott(e)||De.IsString(t)&&SCe(e)||De.IsSymbol(t)&&RCe(e)||De.IsNumber(t)&&JX(e)||De.IsInteger(t)&&JX(e)||De.IsBoolean(t)&&kCe(e)||De.IsUint8Array(t)&&qtt(e)||De.IsDate(t)&&Utt(e)||De.IsConstructor(t)&&Gtt(e)||De.IsFunction(t)&&Wtt(e)?nt.True:De.IsRecord(t)&&De.IsString(ZX(t))?e[_f]==="Record"?nt.True:nt.False:De.IsRecord(t)&&De.IsNumber(ZX(t))?ud(e,0)?nt.True:nt.False:nt.False}s(Oc,"FromObjectRight");function jtt(t,e){return Ha(e)?ja(t,e):De.IsRecord(e)?Pf(t,e):De.IsObject(e)?(()=>{for(let r of Object.getOwnPropertyNames(e.properties)){if(!(r in t.properties)&&!De.IsOptional(e.properties[r]))return nt.False;if(De.IsOptional(e.properties[r]))return nt.True;if(LCe(t.properties[r],e.properties[r])===nt.False)return nt.False}return nt.True})():nt.False}s(jtt,"FromObject");function Vtt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)&&Htt(e)?nt.True:De.IsPromise(e)?Df(ko(t.item,e.item)):nt.False}s(Vtt,"FromPromise");function ZX(t){return ig in t.patternProperties?Sf():og in t.patternProperties?bu():J_("Unknown record key pattern")}s(ZX,"RecordKey");function eZ(t){return ig in t.patternProperties?t.patternProperties[ig]:og in t.patternProperties?t.patternProperties[og]:J_("Unable to get record value schema")}s(eZ,"RecordValue");function Pf(t,e){let[r,n]=[ZX(e),eZ(e)];return De.IsLiteralString(t)&&De.IsNumber(r)&&Df(ko(t,n))===nt.True?nt.True:De.IsUint8Array(t)&&De.IsNumber(r)||De.IsString(t)&&De.IsNumber(r)||De.IsArray(t)&&De.IsNumber(r)?ko(t,n):De.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(LCe(n,t.properties[i])===nt.False)return nt.False;return nt.True})():nt.False}s(Pf,"FromRecordRight");function $tt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?ko(eZ(t),eZ(e)):nt.False}s($tt,"FromRecord");function ztt(t,e){let r=De.IsRegExp(t)?bu():t,n=De.IsRegExp(e)?bu():e;return ko(r,n)}s(ztt,"FromRegExp");function FCe(t,e){return De.IsLiteral(t)&&Fc.IsString(t.const)||De.IsString(t)?nt.True:nt.False}s(FCe,"FromStringRight");function Ytt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsString(e)?nt.True:nt.False}s(Ytt,"FromString");function Ktt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsSymbol(e)?nt.True:nt.False}s(Ktt,"FromSymbol");function Jtt(t,e){return De.IsTemplateLiteral(t)?ko(fI(t),e):De.IsTemplateLiteral(e)?ko(t,fI(e)):J_("Invalid fallthrough for TemplateLiteral")}s(Jtt,"FromTemplateLiteral");function Xtt(t,e){return De.IsArray(e)&&t.items!==void 0&&t.items.every(r=>ko(r,e.items)===nt.True)}s(Xtt,"IsArrayOfTuple");function Ztt(t,e){return De.IsNever(t)?nt.True:De.IsUnknown(t)?nt.False:De.IsAny(t)?nt.Union:nt.False}s(Ztt,"FromTupleRight");function ert(t,e){return Ha(e)?ja(t,e):De.IsObject(e)&&iF(e)||De.IsArray(e)&&Xtt(t,e)?nt.True:De.IsTuple(e)?Fc.IsUndefined(t.items)&&!Fc.IsUndefined(e.items)||!Fc.IsUndefined(t.items)&&Fc.IsUndefined(e.items)?nt.False:Fc.IsUndefined(t.items)&&!Fc.IsUndefined(e.items)||t.items.every((r,n)=>ko(r,e.items[n])===nt.True)?nt.True:nt.False:nt.False}s(ert,"FromTuple");function trt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsUint8Array(e)?nt.True:nt.False}s(trt,"FromUint8Array");function rrt(t,e){return Ha(e)?ja(t,e):De.IsObject(e)?Oc(t,e):De.IsRecord(e)?Pf(t,e):De.IsVoid(e)?ort(t,e):De.IsUndefined(e)?nt.True:nt.False}s(rrt,"FromUndefined");function rZ(t,e){return e.anyOf.some(r=>ko(t,r)===nt.True)?nt.True:nt.False}s(rZ,"FromUnionRight");function nrt(t,e){return t.anyOf.every(r=>ko(r,e)===nt.True)?nt.True:nt.False}s(nrt,"FromUnion");function MCe(t,e){return nt.True}s(MCe,"FromUnknownRight");function irt(t,e){return De.IsNever(e)?PCe(t,e):De.IsIntersect(e)?nF(t,e):De.IsUnion(e)?rZ(t,e):De.IsAny(e)?tZ(t,e):De.IsString(e)?FCe(t,e):De.IsNumber(e)?NCe(t,e):De.IsInteger(e)?DCe(t,e):De.IsBoolean(e)?BCe(t,e):De.IsArray(e)?Ett(t,e):De.IsTuple(e)?Ztt(t,e):De.IsObject(e)?Oc(t,e):De.IsUnknown(e)?nt.True:nt.False}s(irt,"FromUnknown");function ort(t,e){return De.IsUndefined(t)||De.IsUndefined(t)?nt.True:nt.False}s(ort,"FromVoidRight");function srt(t,e){return De.IsIntersect(e)?nF(t,e):De.IsUnion(e)?rZ(t,e):De.IsUnknown(e)?MCe(t,e):De.IsAny(e)?tZ(t,e):De.IsObject(e)?Oc(t,e):De.IsVoid(e)?nt.True:nt.False}s(srt,"FromVoid");function ko(t,e){return De.IsTemplateLiteral(t)||De.IsTemplateLiteral(e)?Jtt(t,e):De.IsRegExp(t)||De.IsRegExp(e)?ztt(t,e):De.IsNot(t)||De.IsNot(e)?Ftt(t,e):De.IsAny(t)?btt(t,e):De.IsArray(t)?Itt(t,e):De.IsBigInt(t)?wtt(t,e):De.IsBoolean(t)?_tt(t,e):De.IsAsyncIterator(t)?Ttt(t,e):De.IsConstructor(t)?Stt(t,e):De.IsDate(t)?Rtt(t,e):De.IsFunction(t)?ktt(t,e):De.IsInteger(t)?Btt(t,e):De.IsIntersect(t)?Dtt(t,e):De.IsIterator(t)?Ptt(t,e):De.IsLiteral(t)?Ntt(t,e):De.IsNever(t)?Ltt(t,e):De.IsNull(t)?Mtt(t,e):De.IsNumber(t)?Qtt(t,e):De.IsObject(t)?jtt(t,e):De.IsRecord(t)?$tt(t,e):De.IsString(t)?Ytt(t,e):De.IsSymbol(t)?Ktt(t,e):De.IsTuple(t)?ert(t,e):De.IsPromise(t)?Vtt(t,e):De.IsUint8Array(t)?trt(t,e):De.IsUndefined(t)?rrt(t,e):De.IsUnion(t)?nrt(t,e):De.IsUnknown(t)?irt(t,e):De.IsVoid(t)?srt(t,e):J_(`Unknown left type operand '${t[Ze]}'`)}s(ko,"Visit");function Rx(t,e){return ko(t,e)}s(Rx,"ExtendsCheck");f();f();f();function art(t,e,r,n,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=X_(t[a],e,r,n,cs(i));return o}s(art,"FromProperties");function lrt(t,e,r,n,i){return art(t.properties,e,r,n,i)}s(lrt,"FromMappedResult");function QCe(t,e,r,n,i){let o=lrt(t,e,r,n,i);return zi(o)}s(QCe,"ExtendsFromMappedResult");function crt(t,e,r,n){let i=Rx(t,e);return i===nt.Union?so([r,n]):i===nt.True?r:n}s(crt,"ExtendsResolve");function X_(t,e,r,n,i){return ds(t)?QCe(t,e,r,n,i):a0(t)?rt(OCe(t,e,r,n,i)):rt(crt(t,e,r,n),i)}s(X_,"Extends");function urt(t,e,r,n,i){return{[t]:X_(Ni(t),e,r,n,cs(i))}}s(urt,"FromPropertyKey");function drt(t,e,r,n,i){return t.reduce((o,a)=>({...o,...urt(a,e,r,n,i)}),{})}s(drt,"FromPropertyKeys");function frt(t,e,r,n,i){return drt(t.keys,e,r,n,i)}s(frt,"FromMappedKey");function OCe(t,e,r,n,i){let o=frt(t,e,r,n,i);return zi(o)}s(OCe,"ExtendsFromMappedKey");f();function prt(t){return t.allOf.every(e=>T1(e))}s(prt,"Intersect");function mrt(t){return t.anyOf.some(e=>T1(e))}s(mrt,"Union");function hrt(t){return!T1(t.not)}s(hrt,"Not");function T1(t){return t[Ze]==="Intersect"?prt(t):t[Ze]==="Union"?mrt(t):t[Ze]==="Not"?hrt(t):t[Ze]==="Undefined"}s(T1,"ExtendsUndefinedCheck");f();function UCe(t,e){return Z_(fI(t),e)}s(UCe,"ExcludeFromTemplateLiteral");function grt(t,e){let r=t.filter(n=>Rx(n,e)===nt.False);return r.length===1?r[0]:so(r)}s(grt,"ExcludeRest");function Z_(t,e,r={}){return l0(t)?rt(UCe(t,e),r):ds(t)?rt(qCe(t,e),r):rt(qi(t)?grt(t.anyOf,e):Rx(t,e)!==nt.False?ni():t,r)}s(Z_,"Exclude");function Art(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=Z_(t[n],e);return r}s(Art,"FromProperties");function yrt(t,e){return Art(t.properties,e)}s(yrt,"FromMappedResult");function qCe(t,e){let r=yrt(t,e);return zi(r)}s(qCe,"ExcludeFromMappedResult");f();f();f();function WCe(t,e){return eS(fI(t),e)}s(WCe,"ExtractFromTemplateLiteral");function Crt(t,e){let r=t.filter(n=>Rx(n,e)!==nt.False);return r.length===1?r[0]:so(r)}s(Crt,"ExtractRest");function eS(t,e,r){return l0(t)?rt(WCe(t,e),r):ds(t)?rt(GCe(t,e),r):rt(qi(t)?Crt(t.anyOf,e):Rx(t,e)!==nt.False?t:ni(),r)}s(eS,"Extract");function xrt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=eS(t[n],e);return r}s(xrt,"FromProperties");function vrt(t,e){return xrt(t.properties,e)}s(vrt,"FromMappedResult");function GCe(t,e){let r=vrt(t,e);return zi(r)}s(GCe,"ExtractFromMappedResult");f();function HCe(t,e){return sm(t)?rt(t.returns,e):ni(e)}s(HCe,"InstanceType");f();f();function oF(t){return ld(Mc(t))}s(oF,"ReadonlyOptional");f();function pI(t,e,r){return rt({[Ze]:"Record",type:"object",patternProperties:{[t]:e}},r)}s(pI,"RecordCreateFromPattern");function nZ(t,e,r){let n={};for(let i of t)n[i]=e;return ao(n,{...r,[_f]:"Record"})}s(nZ,"RecordCreateFromKeys");function brt(t,e,r){return jL(t)?nZ(ad(t),e,r):pI(t.pattern,e,r)}s(brt,"FromTemplateLiteralKey");function Ert(t,e,r){return nZ(ad(so(t)),e,r)}s(Ert,"FromUnionKey");function Irt(t,e,r){return nZ([t.toString()],e,r)}s(Irt,"FromLiteralKey");function Trt(t,e,r){return pI(t.source,e,r)}s(Trt,"FromRegExpKey");function wrt(t,e,r){let n=Ea(t.pattern)?og:t.pattern;return pI(n,e,r)}s(wrt,"FromStringKey");function _rt(t,e,r){return pI(og,e,r)}s(_rt,"FromAnyKey");function Srt(t,e,r){return pI(Zye,e,r)}s(Srt,"FromNeverKey");function Rrt(t,e,r){return ao({true:e,false:e},r)}s(Rrt,"FromBooleanKey");function krt(t,e,r){return pI(ig,e,r)}s(krt,"FromIntegerKey");function Brt(t,e,r){return pI(ig,e,r)}s(Brt,"FromNumberKey");function sF(t,e,r={}){return qi(t)?Ert(t.anyOf,e,r):l0(t)?brt(t,e,r):s0(t)?Irt(t.const,e,r):C1(t)?Rrt(t,e,r):lm(t)?krt(t,e,r):cm(t)?Brt(t,e,r):FX(t)?Trt(t,e,r):x1(t)?wrt(t,e,r):NX(t)?_rt(t,e,r):Tx(t)?Srt(t,e,r):ni(r)}s(sF,"Record");function aF(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(aF,"RecordPattern");function jCe(t){let e=aF(t);return e===og?bu():e===ig?Sf():bu({pattern:e})}s(jCe,"RecordKey");function lF(t){return t.patternProperties[aF(t)]}s(lF,"RecordValue");function Drt(t,e){return e.parameters=QB(t,e.parameters),e.returns=fm(t,e.returns),e}s(Drt,"FromConstructor");function Prt(t,e){return e.parameters=QB(t,e.parameters),e.returns=fm(t,e.returns),e}s(Prt,"FromFunction");function Nrt(t,e){return e.allOf=QB(t,e.allOf),e}s(Nrt,"FromIntersect");function Lrt(t,e){return e.anyOf=QB(t,e.anyOf),e}s(Lrt,"FromUnion");function Frt(t,e){return Ea(e.items)||(e.items=QB(t,e.items)),e}s(Frt,"FromTuple");function Mrt(t,e){return e.items=fm(t,e.items),e}s(Mrt,"FromArray");function Qrt(t,e){return e.items=fm(t,e.items),e}s(Qrt,"FromAsyncIterator");function Ort(t,e){return e.items=fm(t,e.items),e}s(Ort,"FromIterator");function Urt(t,e){return e.item=fm(t,e.item),e}s(Urt,"FromPromise");function qrt(t,e){let r=jrt(t,e.properties);return{...e,...ao(r)}}s(qrt,"FromObject");function Wrt(t,e){let r=fm(t,jCe(e)),n=fm(t,lF(e)),i=sF(r,n);return{...e,...i}}s(Wrt,"FromRecord");function Grt(t,e){return e.index in t?t[e.index]:dm()}s(Grt,"FromArgument");function Hrt(t,e){let r=Q_(e),n=sd(e),i=fm(t,e);return r&&n?oF(i):r&&!n?ld(i):!r&&n?Mc(i):i}s(Hrt,"FromProperty");function jrt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:Hrt(t,e[n])}),{})}s(jrt,"FromProperties");function QB(t,e){return e.map(r=>fm(t,r))}s(QB,"FromTypes");function fm(t,e){return sm(e)?Drt(t,e):am(e)?Prt(t,e):$s(e)?Nrt(t,e):qi(e)?Lrt(t,e):c0(e)?Frt(t,e):im(e)?Mrt(t,e):sI(e)?Qrt(t,e):lI(e)?Ort(t,e):cI(e)?Urt(t,e):Ia(e)?qrt(t,e):uI(e)?Wrt(t,e):LX(e)?Grt(t,e):e}s(fm,"FromType");function VCe(t,e){return fm(e,F_(t))}s(VCe,"Instantiate");f();function $Ce(t){return rt({[Ze]:"Integer",type:"integer"},t)}s($Ce,"Integer");f();f();f();function Vrt(t,e,r){return{[t]:pm(Ni(t),e,cs(r))}}s(Vrt,"MappedIntrinsicPropertyKey");function $rt(t,e,r){return t.reduce((i,o)=>({...i,...Vrt(o,e,r)}),{})}s($rt,"MappedIntrinsicPropertyKeys");function zrt(t,e,r){return $rt(t.keys,e,r)}s(zrt,"MappedIntrinsicProperties");function zCe(t,e,r){let n=zrt(t,e,r);return zi(n)}s(zCe,"IntrinsicFromMappedKey");function Yrt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),r].join("")}s(Yrt,"ApplyUncapitalize");function Krt(t){let[e,r]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),r].join("")}s(Krt,"ApplyCapitalize");function Jrt(t){return t.toUpperCase()}s(Jrt,"ApplyUppercase");function Xrt(t){return t.toLowerCase()}s(Xrt,"ApplyLowercase");function Zrt(t,e,r){let n=j_(t.pattern);if(!dI(n))return{...t,pattern:YCe(t.pattern,e)};let a=[...NB(n)].map(u=>Ni(u)),l=KCe(a,e),c=so(l);return $L([c],r)}s(Zrt,"FromTemplateLiteral");function YCe(t,e){return typeof t=="string"?e==="Uncapitalize"?Yrt(t):e==="Capitalize"?Krt(t):e==="Uppercase"?Jrt(t):e==="Lowercase"?Xrt(t):t:t.toString()}s(YCe,"FromLiteralValue");function KCe(t,e){return t.map(r=>pm(r,e))}s(KCe,"FromRest");function pm(t,e,r={}){return a0(t)?zCe(t,e,r):l0(t)?Zrt(t,e,r):qi(t)?so(KCe(t.anyOf,e),r):s0(t)?Ni(YCe(t.const,e),r):rt(t,r)}s(pm,"Intrinsic");function JCe(t,e={}){return pm(t,"Capitalize",e)}s(JCe,"Capitalize");f();function XCe(t,e={}){return pm(t,"Lowercase",e)}s(XCe,"Lowercase");f();function ZCe(t,e={}){return pm(t,"Uncapitalize",e)}s(ZCe,"Uncapitalize");f();function exe(t,e={}){return pm(t,"Uppercase",e)}s(exe,"Uppercase");f();f();f();f();f();function ent(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=kx(t[i],e,cs(r));return n}s(ent,"FromProperties");function tnt(t,e,r){return ent(t.properties,e,r)}s(tnt,"FromMappedResult");function txe(t,e,r){let n=tnt(t,e,r);return zi(n)}s(txe,"OmitFromMappedResult");function rnt(t,e){return t.map(r=>iZ(r,e))}s(rnt,"FromIntersect");function nnt(t,e){return t.map(r=>iZ(r,e))}s(nnt,"FromUnion");function int(t,e){let{[e]:r,...n}=t;return n}s(int,"FromProperty");function ont(t,e){return e.reduce((r,n)=>int(r,n),t)}s(ont,"FromProperties");function snt(t,e){let r=zs(t,[Ds,"$id","required","properties"]),n=ont(t.properties,e);return ao(n,r)}s(snt,"FromObject");function ant(t){let e=t.reduce((r,n)=>WL(n)?[...r,Ni(n)]:r,[]);return so(e)}s(ant,"UnionFromPropertyKeys");function iZ(t,e){return $s(t)?Qc(rnt(t.allOf,e)):qi(t)?so(nnt(t.anyOf,e)):Ia(t)?snt(t,e):ao({})}s(iZ,"OmitResolve");function kx(t,e,r){let n=ba(e)?ant(e):e,i=Ps(e)?ad(e):e,o=oa(t),a=oa(e);return ds(t)?txe(t,i,r):a0(e)?rxe(t,e,r):o&&a?Xo("Omit",[t,n],r):!o&&a?Xo("Omit",[t,n],r):o&&!a?Xo("Omit",[t,n],r):rt({...iZ(t,i),...r})}s(kx,"Omit");function lnt(t,e,r){return{[e]:kx(t,[e],cs(r))}}s(lnt,"FromPropertyKey");function cnt(t,e,r){return e.reduce((n,i)=>({...n,...lnt(t,i,r)}),{})}s(cnt,"FromPropertyKeys");function unt(t,e,r){return cnt(t,e.keys,r)}s(unt,"FromMappedKey");function rxe(t,e,r){let n=unt(t,e,r);return zi(n)}s(rxe,"OmitFromMappedKey");f();f();f();function dnt(t,e,r){let n={};for(let i of globalThis.Object.getOwnPropertyNames(t))n[i]=Bx(t[i],e,cs(r));return n}s(dnt,"FromProperties");function fnt(t,e,r){return dnt(t.properties,e,r)}s(fnt,"FromMappedResult");function nxe(t,e,r){let n=fnt(t,e,r);return zi(n)}s(nxe,"PickFromMappedResult");function pnt(t,e){return t.map(r=>oZ(r,e))}s(pnt,"FromIntersect");function mnt(t,e){return t.map(r=>oZ(r,e))}s(mnt,"FromUnion");function hnt(t,e){let r={};for(let n of e)n in t&&(r[n]=t[n]);return r}s(hnt,"FromProperties");function gnt(t,e){let r=zs(t,[Ds,"$id","required","properties"]),n=hnt(t.properties,e);return ao(n,r)}s(gnt,"FromObject");function Ant(t){let e=t.reduce((r,n)=>WL(n)?[...r,Ni(n)]:r,[]);return so(e)}s(Ant,"UnionFromPropertyKeys");function oZ(t,e){return $s(t)?Qc(pnt(t.allOf,e)):qi(t)?so(mnt(t.anyOf,e)):Ia(t)?gnt(t,e):ao({})}s(oZ,"PickResolve");function Bx(t,e,r){let n=ba(e)?Ant(e):e,i=Ps(e)?ad(e):e,o=oa(t),a=oa(e);return ds(t)?nxe(t,i,r):a0(e)?ixe(t,e,r):o&&a?Xo("Pick",[t,n],r):!o&&a?Xo("Pick",[t,n],r):o&&!a?Xo("Pick",[t,n],r):rt({...oZ(t,i),...r})}s(Bx,"Pick");function ynt(t,e,r){return{[e]:Bx(t,[e],cs(r))}}s(ynt,"FromPropertyKey");function Cnt(t,e,r){return e.reduce((n,i)=>({...n,...ynt(t,i,r)}),{})}s(Cnt,"FromPropertyKeys");function xnt(t,e,r){return Cnt(t,e.keys,r)}s(xnt,"FromMappedKey");function ixe(t,e,r){let n=xnt(t,e,r);return zi(n)}s(ixe,"PickFromMappedKey");f();f();function vnt(t,e){return Xo("Partial",[Xo(t,e)])}s(vnt,"FromComputed");function bnt(t){return Xo("Partial",[Bf(t)])}s(bnt,"FromRef");function Ent(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=Mc(t[r]);return e}s(Ent,"FromProperties");function Int(t){let e=zs(t,[Ds,"$id","required","properties"]),r=Ent(t.properties);return ao(r,e)}s(Int,"FromObject");function oxe(t){return t.map(e=>sxe(e))}s(oxe,"FromRest");function sxe(t){return om(t)?vnt(t.target,t.parameters):oa(t)?bnt(t.$ref):$s(t)?Qc(oxe(t.allOf)):qi(t)?so(oxe(t.anyOf)):Ia(t)?Int(t):aI(t)||C1(t)||lm(t)||s0(t)||_B(t)||cm(t)||x1(t)||SB(t)||v1(t)?t:ao({})}s(sxe,"PartialResolve");function tS(t,e){return ds(t)?axe(t,e):rt({...sxe(t),...e})}s(tS,"Partial");function Tnt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=tS(t[n],cs(e));return r}s(Tnt,"FromProperties");function wnt(t,e){return Tnt(t.properties,e)}s(wnt,"FromMappedResult");function axe(t,e){let r=wnt(t,e);return zi(r)}s(axe,"PartialFromMappedResult");f();f();function _nt(t,e){return Xo("Required",[Xo(t,e)])}s(_nt,"FromComputed");function Snt(t){return Xo("Required",[Bf(t)])}s(Snt,"FromRef");function Rnt(t){let e={};for(let r of globalThis.Object.getOwnPropertyNames(t))e[r]=zs(t[r],[cc]);return e}s(Rnt,"FromProperties");function knt(t){let e=zs(t,[Ds,"$id","required","properties"]),r=Rnt(t.properties);return ao(r,e)}s(knt,"FromObject");function lxe(t){return t.map(e=>cxe(e))}s(lxe,"FromRest");function cxe(t){return om(t)?_nt(t.target,t.parameters):oa(t)?Snt(t.$ref):$s(t)?Qc(lxe(t.allOf)):qi(t)?so(lxe(t.anyOf)):Ia(t)?knt(t):aI(t)||C1(t)||lm(t)||s0(t)||_B(t)||cm(t)||x1(t)||SB(t)||v1(t)?t:ao({})}s(cxe,"RequiredResolve");function rS(t,e){return ds(t)?uxe(t,e):rt({...cxe(t),...e})}s(rS,"Required");function Bnt(t,e){let r={};for(let n of globalThis.Object.getOwnPropertyNames(t))r[n]=rS(t[n],e);return r}s(Bnt,"FromProperties");function Dnt(t,e){return Bnt(t.properties,e)}s(Dnt,"FromMappedResult");function uxe(t,e){let r=Dnt(t,e);return zi(r)}s(uxe,"RequiredFromMappedResult");function Pnt(t,e){return e.map(r=>oa(r)?sZ(t,r.$ref):u0(t,r))}s(Pnt,"DereferenceParameters");function sZ(t,e){return e in t?oa(t[e])?sZ(t,t[e].$ref):u0(t,t[e]):ni()}s(sZ,"Dereference");function Nnt(t){return Y_(t[0])}s(Nnt,"FromAwaited");function Lnt(t){return Sx(t[0],t[1])}s(Lnt,"FromIndex");function Fnt(t){return K_(t[0])}s(Fnt,"FromKeyOf");function Mnt(t){return tS(t[0])}s(Mnt,"FromPartial");function Qnt(t){return kx(t[0],t[1])}s(Qnt,"FromOmit");function Ont(t){return Bx(t[0],t[1])}s(Ont,"FromPick");function Unt(t){return rS(t[0])}s(Unt,"FromRequired");function qnt(t,e,r){let n=Pnt(t,r);return e==="Awaited"?Nnt(n):e==="Index"?Lnt(n):e==="KeyOf"?Fnt(n):e==="Partial"?Mnt(n):e==="Omit"?Qnt(n):e==="Pick"?Ont(n):e==="Required"?Unt(n):ni()}s(qnt,"FromComputed");function Wnt(t,e){return q_(u0(t,e))}s(Wnt,"FromArray");function Gnt(t,e){return W_(u0(t,e))}s(Gnt,"FromAsyncIterator");function Hnt(t,e,r){return G_(OB(t,e),u0(t,r))}s(Hnt,"FromConstructor");function jnt(t,e,r){return sg(OB(t,e),u0(t,r))}s(jnt,"FromFunction");function Vnt(t,e){return Qc(OB(t,e))}s(Vnt,"FromIntersect");function $nt(t,e){return z_(u0(t,e))}s($nt,"FromIterator");function znt(t,e){return ao(globalThis.Object.keys(e).reduce((r,n)=>({...r,[n]:u0(t,e[n])}),{}))}s(znt,"FromObject");function Ynt(t,e){let[r,n]=[u0(t,lF(e)),aF(e)],i=F_(e);return i.patternProperties[n]=r,i}s(Ynt,"FromRecord");function Knt(t,e){return oa(e)?{...sZ(t,e.$ref),[Ds]:e[Ds]}:e}s(Knt,"FromTransform");function Jnt(t,e){return Rf(OB(t,e))}s(Jnt,"FromTuple");function Xnt(t,e){return so(OB(t,e))}s(Xnt,"FromUnion");function OB(t,e){return e.map(r=>u0(t,r))}s(OB,"FromTypes");function u0(t,e){return sd(e)?rt(u0(t,zs(e,[cc])),e):Q_(e)?rt(u0(t,zs(e,[nm])),e):oo(e)?rt(Knt(t,e),e):im(e)?rt(Wnt(t,e.items),e):sI(e)?rt(Gnt(t,e.items),e):om(e)?rt(qnt(t,e.target,e.parameters)):sm(e)?rt(Hnt(t,e.parameters,e.returns),e):am(e)?rt(jnt(t,e.parameters,e.returns),e):$s(e)?rt(Vnt(t,e.allOf),e):lI(e)?rt($nt(t,e.items),e):Ia(e)?rt(znt(t,e.properties),e):uI(e)?rt(Ynt(t,e)):c0(e)?rt(Jnt(t,e.items||[]),e):qi(e)?rt(Xnt(t,e.anyOf),e):e}s(u0,"FromType");function Znt(t,e){return e in t?u0(t,t[e]):ni()}s(Znt,"ComputeType");function dxe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,r)=>({...e,[r]:Znt(t,r)}),{})}s(dxe,"ComputeModuleProperties");var aZ=class{static{s(this,"TModule")}constructor(e){let r=dxe(e),n=this.WithIdentifiers(r);this.$defs=n}Import(e,r){let n={...this.$defs,[e]:rt(this.$defs[e],r)};return rt({[Ze]:"Import",$defs:n,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((r,n)=>({...r,[n]:{...e[n],$id:n}}),{})}};function fxe(t){return new aZ(t)}s(fxe,"Module");f();function pxe(t,e){return rt({[Ze]:"Not",not:t},e)}s(pxe,"Not");f();function mxe(t,e){return am(t)?Rf(t.parameters,e):ni()}s(mxe,"Parameters");f();var eit=0;function hxe(t,e={}){Ea(e.$id)&&(e.$id=`T${eit++}`);let r=F_(t({[Ze]:"This",$ref:`${e.$id}`}));return r.$id=e.$id,rt({[_f]:"Recursive",...r},e)}s(hxe,"Recursive");f();function gxe(t,e){let r=qo(t)?new globalThis.RegExp(t):t;return rt({[Ze]:"RegExp",type:"RegExp",source:r.source,flags:r.flags},e)}s(gxe,"RegExp");f();function tit(t){return $s(t)?t.allOf:qi(t)?t.anyOf:c0(t)?t.items??[]:[]}s(tit,"RestResolve");function Axe(t){return tit(t)}s(Axe,"Rest");f();function yxe(t,e){return am(t)?rt(t.returns,e):ni(e)}s(yxe,"ReturnType");f();var lZ=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new cZ(this.schema,e)}},cZ=class{static{s(this,"TransformEncodeBuilder")}constructor(e,r){this.schema=e,this.decode=r}EncodeTransform(e,r){let o={Encode:s(a=>r[Ds].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(r[Ds].Decode(a)),"Decode")};return{...r,[Ds]:o}}EncodeSchema(e,r){let n={Decode:this.decode,Encode:e};return{...r,[Ds]:n}}Encode(e){return oo(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function Cxe(t){return new lZ(t)}s(Cxe,"Transform");f();function xxe(t={}){return rt({[Ze]:t[Ze]??"Unsafe"},t)}s(xxe,"Unsafe");f();function vxe(t){return rt({[Ze]:"Void",type:"void"},t)}s(vxe,"Void");f();var uZ={};f1(uZ,{Any:()=>_x,Argument:()=>iCe,Array:()=>q_,AsyncIterator:()=>W_,Awaited:()=>Y_,BigInt:()=>$_,Boolean:()=>VL,Capitalize:()=>JCe,Composite:()=>ECe,Const:()=>ICe,Constructor:()=>G_,ConstructorParameters:()=>TCe,Date:()=>JL,Enum:()=>wCe,Exclude:()=>Z_,Extends:()=>X_,Extract:()=>eS,Function:()=>sg,Index:()=>Sx,InstanceType:()=>HCe,Instantiate:()=>VCe,Integer:()=>$Ce,Intersect:()=>Qc,Iterator:()=>z_,KeyOf:()=>K_,Literal:()=>Ni,Lowercase:()=>XCe,Mapped:()=>ACe,Module:()=>fxe,Never:()=>ni,Not:()=>pxe,Null:()=>XL,Number:()=>Sf,Object:()=>ao,Omit:()=>kx,Optional:()=>Mc,Parameters:()=>mxe,Partial:()=>tS,Pick:()=>Bx,Promise:()=>YL,Readonly:()=>ld,ReadonlyOptional:()=>oF,Record:()=>sF,Recursive:()=>hxe,Ref:()=>Bf,RegExp:()=>gxe,Required:()=>rS,Rest:()=>Axe,ReturnType:()=>yxe,String:()=>bu,Symbol:()=>ZL,TemplateLiteral:()=>$L,Transform:()=>Cxe,Tuple:()=>Rf,Uint8Array:()=>tF,Uncapitalize:()=>ZCe,Undefined:()=>eF,Union:()=>so,Unknown:()=>dm,Unsafe:()=>xxe,Uppercase:()=>exe,Void:()=>vxe});f();var I=uZ;f();f();function rit(t){switch(t.errorType){case Ke.ArrayContains:return"Expected array to contain at least one matching value";case Ke.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Ke.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Ke.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Ke.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Ke.ArrayUniqueItems:return"Expected array elements to be unique";case Ke.Array:return"Expected array";case Ke.AsyncIterator:return"Expected AsyncIterator";case Ke.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Ke.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Ke.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Ke.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Ke.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Ke.BigInt:return"Expected bigint";case Ke.Boolean:return"Expected boolean";case Ke.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Ke.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Ke.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Ke.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Ke.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Ke.Date:return"Expected Date";case Ke.Function:return"Expected function";case Ke.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Ke.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Ke.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Ke.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Ke.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Ke.Integer:return"Expected integer";case Ke.IntersectUnevaluatedProperties:return"Unexpected property";case Ke.Intersect:return"Expected all values to match";case Ke.Iterator:return"Expected Iterator";case Ke.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Ke.Never:return"Never";case Ke.Not:return"Value should not match";case Ke.Null:return"Expected null";case Ke.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Ke.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Ke.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Ke.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Ke.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Ke.Number:return"Expected number";case Ke.Object:return"Expected object";case Ke.ObjectAdditionalProperties:return"Unexpected property";case Ke.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Ke.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Ke.ObjectRequiredProperty:return"Expected required property";case Ke.Promise:return"Expected Promise";case Ke.RegExp:return"Expected string to match regular expression";case Ke.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Ke.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Ke.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Ke.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Ke.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Ke.String:return"Expected string";case Ke.Symbol:return"Expected symbol";case Ke.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Ke.Tuple:return"Expected tuple";case Ke.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Ke.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Ke.Uint8Array:return"Expected Uint8Array";case Ke.Undefined:return"Expected undefined";case Ke.Union:return"Expected union value";case Ke.Void:return"Expected void";case Ke.Kind:return`Expected kind '${t.schema[Ze]}'`;default:return"Unknown error type"}}s(rit,"DefaultErrorFunction");var nit=rit;function bxe(){return nit}s(bxe,"GetErrorFunction");f();var dZ=class extends xn{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function iit(t,e){let r=e.find(n=>n.$id===t.$ref);if(r===void 0)throw new dZ(t);return Yi(r,e)}s(iit,"Resolve");function Rl(t,e){return!Ui(t.$id)||e.some(r=>r.$id===t.$id)||e.push(t),e}s(Rl,"Pushref");function Yi(t,e){return t[Ze]==="This"||t[Ze]==="Ref"?iit(t,e):t}s(Yi,"Deref");f();var fZ=class extends xn{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},d0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(d0||(d0={}));var nS=BigInt("14695981039346656037"),[oit,sit]=[BigInt("1099511628211"),BigInt("18446744073709551616")],ait=Array.from({length:256}).map((t,e)=>BigInt(e)),Exe=new Float64Array(1),Ixe=new DataView(Exe.buffer),Txe=new Uint8Array(Exe.buffer);function*lit(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let r=0;r<e;r++)yield t>>8*(e-1-r)&255}s(lit,"NumberToBytes");function cit(t){Uc(d0.Array);for(let e of t)iS(e)}s(cit,"ArrayType");function uit(t){Uc(d0.Boolean),Uc(t?1:0)}s(uit,"BooleanType");function dit(t){Uc(d0.BigInt),Ixe.setBigInt64(0,t);for(let e of Txe)Uc(e)}s(dit,"BigIntType");function fit(t){Uc(d0.Date),iS(t.getTime())}s(fit,"DateType");function pit(t){Uc(d0.Null)}s(pit,"NullType");function mit(t){Uc(d0.Number),Ixe.setFloat64(0,t);for(let e of Txe)Uc(e)}s(mit,"NumberType");function hit(t){Uc(d0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())iS(e),iS(t[e])}s(hit,"ObjectType");function git(t){Uc(d0.String);for(let e=0;e<t.length;e++)for(let r of lit(t.charCodeAt(e)))Uc(r)}s(git,"StringType");function Ait(t){Uc(d0.Symbol),iS(t.description)}s(Ait,"SymbolType");function yit(t){Uc(d0.Uint8Array);for(let e=0;e<t.length;e++)Uc(t[e])}s(yit,"Uint8ArrayType");function Cit(t){return Uc(d0.Undefined)}s(Cit,"UndefinedType");function iS(t){if(Cn(t))return cit(t);if(ng(t))return uit(t);if(lc(t))return dit(t);if(xu(t))return fit(t);if(A1(t))return pit(t);if(Wr(t))return mit(t);if(ui(t))return hit(t);if(Ui(t))return git(t);if(y1(t))return Ait(t);if(M_(t))return yit(t);if(us(t))return Cit(t);throw new fZ(t)}s(iS,"Visit");function Uc(t){nS=nS^ait[t],nS=nS*oit%sit}s(Uc,"FNV1A64");function Dx(t){return nS=BigInt("14695981039346656037"),iS(t),nS}s(Dx,"Hash");f();var pZ=class extends xn{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function xit(t){return t[Ze]==="Any"||t[Ze]==="Unknown"}s(xit,"IsAnyOrUnknown");function Ei(t){return t!==void 0}s(Ei,"IsDefined");function vit(t,e,r){return!0}s(vit,"FromAny");function bit(t,e,r){return!0}s(bit,"FromArgument");function Eit(t,e,r){if(!Cn(r)||Ei(t.minItems)&&!(r.length>=t.minItems)||Ei(t.maxItems)&&!(r.length<=t.maxItems)||!r.every(o=>kl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of r){let l=Dx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(Ei(t.contains)||Wr(t.minContains)||Wr(t.maxContains)))return!0;let n=Ei(t.contains)?t.contains:ni(),i=r.reduce((o,a)=>kl(n,e,a)?o+1:o,0);return!(i===0||Wr(t.minContains)&&i<t.minContains||Wr(t.maxContains)&&i>t.maxContains)}s(Eit,"FromArray");function Iit(t,e,r){return QL(r)}s(Iit,"FromAsyncIterator");function Tit(t,e,r){return!(!lc(r)||Ei(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ei(t.maximum)&&!(r<=t.maximum)||Ei(t.minimum)&&!(r>=t.minimum)||Ei(t.multipleOf)&&r%t.multipleOf!==BigInt(0))}s(Tit,"FromBigInt");function wit(t,e,r){return ng(r)}s(wit,"FromBoolean");function _it(t,e,r){return kl(t.returns,e,r.prototype)}s(_it,"FromConstructor");function Sit(t,e,r){return!(!xu(r)||Ei(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)||Ei(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)||Ei(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)||Ei(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)||Ei(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0)}s(Sit,"FromDate");function Rit(t,e,r){return Ix(r)}s(Rit,"FromFunction");function kit(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return kl(i,[...e,...n],r)}s(kit,"FromImport");function Bit(t,e,r){return!(!qL(r)||Ei(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ei(t.maximum)&&!(r<=t.maximum)||Ei(t.minimum)&&!(r>=t.minimum)||Ei(t.multipleOf)&&r%t.multipleOf!==0)}s(Bit,"FromInteger");function Dit(t,e,r){let n=t.allOf.every(i=>kl(i,e,r));if(t.unevaluatedProperties===!1){let i=new RegExp(I1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a));return n&&o}else if(Ps(t.unevaluatedProperties)){let i=new RegExp(I1(t)),o=Object.getOwnPropertyNames(r).every(a=>i.test(a)||kl(t.unevaluatedProperties,e,r[a]));return n&&o}else return n}s(Dit,"FromIntersect");function Pit(t,e,r){return OL(r)}s(Pit,"FromIterator");function Nit(t,e,r){return r===t.const}s(Nit,"FromLiteral");function Lit(t,e,r){return!1}s(Lit,"FromNever");function Fit(t,e,r){return!kl(t.not,e,r)}s(Fit,"FromNot");function Mit(t,e,r){return A1(r)}s(Mit,"FromNull");function Qit(t,e,r){return!(!Jo.IsNumberLike(r)||Ei(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)||Ei(t.minimum)&&!(r>=t.minimum)||Ei(t.maximum)&&!(r<=t.maximum)||Ei(t.multipleOf)&&r%t.multipleOf!==0)}s(Qit,"FromNumber");function Oit(t,e,r){if(!Jo.IsObjectLike(r)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let n=Object.getOwnPropertyNames(t.properties);for(let i of n){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!kl(o,e,r[i])||(T1(o)||xit(o))&&!(i in r))return!1}else if(Jo.IsExactOptionalProperty(r,i)&&!kl(o,e,r[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(r);return t.required&&t.required.length===n.length&&i.length===n.length?!0:i.every(o=>n.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(r).every(o=>n.includes(o)||kl(t.additionalProperties,e,r[o])):!0}s(Oit,"FromObject");function Uit(t,e,r){return UL(r)}s(Uit,"FromPromise");function qit(t,e,r){if(!Jo.IsRecordLike(r)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties))return!1;let[n,i]=Object.entries(t.patternProperties)[0],o=new RegExp(n),a=Object.entries(r).every(([u,d])=>o.test(u)?kl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(r).every(([u,d])=>o.test(u)?!0:kl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(r).every(u=>o.test(u)):!0;return a&&l&&c}s(qit,"FromRecord");function Wit(t,e,r){return kl(Yi(t,e),e,r)}s(Wit,"FromRef");function Git(t,e,r){let n=new RegExp(t.source,t.flags);return Ei(t.minLength)&&!(r.length>=t.minLength)||Ei(t.maxLength)&&!(r.length<=t.maxLength)?!1:n.test(r)}s(Git,"FromRegExp");function Hit(t,e,r){return!Ui(r)||Ei(t.minLength)&&!(r.length>=t.minLength)||Ei(t.maxLength)&&!(r.length<=t.maxLength)||Ei(t.pattern)&&!new RegExp(t.pattern).test(r)?!1:Ei(t.format)?um.Has(t.format)?um.Get(t.format)(r):!1:!0}s(Hit,"FromString");function jit(t,e,r){return y1(r)}s(jit,"FromSymbol");function Vit(t,e,r){return Ui(r)&&new RegExp(t.pattern).test(r)}s(Vit,"FromTemplateLiteral");function $it(t,e,r){return kl(Yi(t,e),e,r)}s($it,"FromThis");function zit(t,e,r){if(!Cn(r)||t.items===void 0&&r.length!==0||r.length!==t.maxItems)return!1;if(!t.items)return!0;for(let n=0;n<t.items.length;n++)if(!kl(t.items[n],e,r[n]))return!1;return!0}s(zit,"FromTuple");function Yit(t,e,r){return us(r)}s(Yit,"FromUndefined");function Kit(t,e,r){return t.anyOf.some(n=>kl(n,e,r))}s(Kit,"FromUnion");function Jit(t,e,r){return!(!M_(r)||Ei(t.maxByteLength)&&!(r.length<=t.maxByteLength)||Ei(t.minByteLength)&&!(r.length>=t.minByteLength))}s(Jit,"FromUint8Array");function Xit(t,e,r){return!0}s(Xit,"FromUnknown");function Zit(t,e,r){return Jo.IsVoidLike(r)}s(Zit,"FromVoid");function eot(t,e,r){return vu.Has(t[Ze])?vu.Get(t[Ze])(t,r):!1}s(eot,"FromKind");function kl(t,e,r){let n=Ei(t.$id)?Rl(t,e):e,i=t;switch(i[Ze]){case"Any":return vit(i,n,r);case"Argument":return bit(i,n,r);case"Array":return Eit(i,n,r);case"AsyncIterator":return Iit(i,n,r);case"BigInt":return Tit(i,n,r);case"Boolean":return wit(i,n,r);case"Constructor":return _it(i,n,r);case"Date":return Sit(i,n,r);case"Function":return Rit(i,n,r);case"Import":return kit(i,n,r);case"Integer":return Bit(i,n,r);case"Intersect":return Dit(i,n,r);case"Iterator":return Pit(i,n,r);case"Literal":return Nit(i,n,r);case"Never":return Lit(i,n,r);case"Not":return Fit(i,n,r);case"Null":return Mit(i,n,r);case"Number":return Qit(i,n,r);case"Object":return Oit(i,n,r);case"Promise":return Uit(i,n,r);case"Record":return qit(i,n,r);case"Ref":return Wit(i,n,r);case"RegExp":return Git(i,n,r);case"String":return Hit(i,n,r);case"Symbol":return jit(i,n,r);case"TemplateLiteral":return Vit(i,n,r);case"This":return $it(i,n,r);case"Tuple":return zit(i,n,r);case"Undefined":return Yit(i,n,r);case"Union":return Kit(i,n,r);case"Uint8Array":return Jit(i,n,r);case"Unknown":return Xit(i,n,r);case"Void":return Zit(i,n,r);default:if(!vu.Has(i[Ze]))throw new pZ(i);return eot(i,n,r)}}s(kl,"Visit");function pi(...t){return t.length===3?kl(t[0],t[1],t[2]):kl(t[0],[],t[1])}s(pi,"Check");var Ke;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Ke||(Ke={}));var mZ=class extends xn{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function w1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(w1,"EscapeKey");function Ii(t){return t!==void 0}s(Ii,"IsDefined");var Px=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function er(t,e,r,n,i=[]){return{type:t,schema:e,path:r,value:n,message:bxe()({errorType:t,path:r,schema:e,value:n,errors:i}),errors:i}}s(er,"Create");function*tot(t,e,r,n){}s(tot,"FromAny");function*rot(t,e,r,n){}s(rot,"FromArgument");function*not(t,e,r,n){if(!Cn(n))return yield er(Ke.Array,t,r,n);Ii(t.minItems)&&!(n.length>=t.minItems)&&(yield er(Ke.ArrayMinItems,t,r,n)),Ii(t.maxItems)&&!(n.length<=t.maxItems)&&(yield er(Ke.ArrayMaxItems,t,r,n));for(let a=0;a<n.length;a++)yield*Bl(t.items,e,`${r}/${a}`,n[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of n){let c=Dx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield er(Ke.ArrayUniqueItems,t,r,n)),!(Ii(t.contains)||Ii(t.minContains)||Ii(t.maxContains)))return;let i=Ii(t.contains)?t.contains:ni(),o=n.reduce((a,l,c)=>Bl(i,e,`${r}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield er(Ke.ArrayContains,t,r,n)),Wr(t.minContains)&&o<t.minContains&&(yield er(Ke.ArrayMinContains,t,r,n)),Wr(t.maxContains)&&o>t.maxContains&&(yield er(Ke.ArrayMaxContains,t,r,n))}s(not,"FromArray");function*iot(t,e,r,n){QL(n)||(yield er(Ke.AsyncIterator,t,r,n))}s(iot,"FromAsyncIterator");function*oot(t,e,r,n){if(!lc(n))return yield er(Ke.BigInt,t,r,n);Ii(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.BigIntExclusiveMaximum,t,r,n)),Ii(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.BigIntExclusiveMinimum,t,r,n)),Ii(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.BigIntMaximum,t,r,n)),Ii(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.BigIntMinimum,t,r,n)),Ii(t.multipleOf)&&n%t.multipleOf!==BigInt(0)&&(yield er(Ke.BigIntMultipleOf,t,r,n))}s(oot,"FromBigInt");function*sot(t,e,r,n){ng(n)||(yield er(Ke.Boolean,t,r,n))}s(sot,"FromBoolean");function*aot(t,e,r,n){yield*Bl(t.returns,e,r,n.prototype)}s(aot,"FromConstructor");function*lot(t,e,r,n){if(!xu(n))return yield er(Ke.Date,t,r,n);Ii(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)&&(yield er(Ke.DateExclusiveMaximumTimestamp,t,r,n)),Ii(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)&&(yield er(Ke.DateExclusiveMinimumTimestamp,t,r,n)),Ii(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)&&(yield er(Ke.DateMaximumTimestamp,t,r,n)),Ii(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)&&(yield er(Ke.DateMinimumTimestamp,t,r,n)),Ii(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0&&(yield er(Ke.DateMultipleOfTimestamp,t,r,n))}s(lot,"FromDate");function*cot(t,e,r,n){Ix(n)||(yield er(Ke.Function,t,r,n))}s(cot,"FromFunction");function*uot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Bl(o,[...e,...i],r,n)}s(uot,"FromImport");function*dot(t,e,r,n){if(!qL(n))return yield er(Ke.Integer,t,r,n);Ii(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.IntegerExclusiveMaximum,t,r,n)),Ii(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.IntegerExclusiveMinimum,t,r,n)),Ii(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.IntegerMaximum,t,r,n)),Ii(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.IntegerMinimum,t,r,n)),Ii(t.multipleOf)&&n%t.multipleOf!==0&&(yield er(Ke.IntegerMultipleOf,t,r,n))}s(dot,"FromInteger");function*fot(t,e,r,n){let i=!1;for(let o of t.allOf)for(let a of Bl(o,e,r,n))i=!0,yield a;if(i)return yield er(Ke.Intersect,t,r,n);if(t.unevaluatedProperties===!1){let o=new RegExp(I1(t));for(let a of Object.getOwnPropertyNames(n))o.test(a)||(yield er(Ke.IntersectUnevaluatedProperties,t,`${r}/${a}`,n))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(I1(t));for(let a of Object.getOwnPropertyNames(n))if(!o.test(a)){let l=Bl(t.unevaluatedProperties,e,`${r}/${a}`,n[a]).next();l.done||(yield l.value)}}}s(fot,"FromIntersect");function*pot(t,e,r,n){OL(n)||(yield er(Ke.Iterator,t,r,n))}s(pot,"FromIterator");function*mot(t,e,r,n){n!==t.const&&(yield er(Ke.Literal,t,r,n))}s(mot,"FromLiteral");function*hot(t,e,r,n){yield er(Ke.Never,t,r,n)}s(hot,"FromNever");function*got(t,e,r,n){Bl(t.not,e,r,n).next().done===!0&&(yield er(Ke.Not,t,r,n))}s(got,"FromNot");function*Aot(t,e,r,n){A1(n)||(yield er(Ke.Null,t,r,n))}s(Aot,"FromNull");function*yot(t,e,r,n){if(!Jo.IsNumberLike(n))return yield er(Ke.Number,t,r,n);Ii(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)&&(yield er(Ke.NumberExclusiveMaximum,t,r,n)),Ii(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)&&(yield er(Ke.NumberExclusiveMinimum,t,r,n)),Ii(t.maximum)&&!(n<=t.maximum)&&(yield er(Ke.NumberMaximum,t,r,n)),Ii(t.minimum)&&!(n>=t.minimum)&&(yield er(Ke.NumberMinimum,t,r,n)),Ii(t.multipleOf)&&n%t.multipleOf!==0&&(yield er(Ke.NumberMultipleOf,t,r,n))}s(yot,"FromNumber");function*Cot(t,e,r,n){if(!Jo.IsObjectLike(n))return yield er(Ke.Object,t,r,n);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield er(Ke.ObjectMinProperties,t,r,n)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield er(Ke.ObjectMaxProperties,t,r,n));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(n);for(let l of i)a.includes(l)||(yield er(Ke.ObjectRequiredProperty,t.properties[l],`${r}/${w1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield er(Ke.ObjectAdditionalProperties,t,`${r}/${w1(l)}`,n[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*Bl(t.additionalProperties,e,`${r}/${w1(l)}`,n[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*Bl(c,e,`${r}/${w1(l)}`,n[l]),T1(t)&&!(l in n)&&(yield er(Ke.ObjectRequiredProperty,c,`${r}/${w1(l)}`,void 0))):Jo.IsExactOptionalProperty(n,l)&&(yield*Bl(c,e,`${r}/${w1(l)}`,n[l]))}}s(Cot,"FromObject");function*xot(t,e,r,n){UL(n)||(yield er(Ke.Promise,t,r,n))}s(xot,"FromPromise");function*vot(t,e,r,n){if(!Jo.IsRecordLike(n))return yield er(Ke.Object,t,r,n);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)&&(yield er(Ke.ObjectMinProperties,t,r,n)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties)&&(yield er(Ke.ObjectMaxProperties,t,r,n));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(n))a.test(l)&&(yield*Bl(o,e,`${r}/${w1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(n))a.test(l)||(yield*Bl(t.additionalProperties,e,`${r}/${w1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(n))if(!a.test(l))return yield er(Ke.ObjectAdditionalProperties,t,`${r}/${w1(l)}`,c)}}s(vot,"FromRecord");function*bot(t,e,r,n){yield*Bl(Yi(t,e),e,r,n)}s(bot,"FromRef");function*Eot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);if(Ii(t.minLength)&&!(n.length>=t.minLength)&&(yield er(Ke.StringMinLength,t,r,n)),Ii(t.maxLength)&&!(n.length<=t.maxLength)&&(yield er(Ke.StringMaxLength,t,r,n)),!new RegExp(t.source,t.flags).test(n))return yield er(Ke.RegExp,t,r,n)}s(Eot,"FromRegExp");function*Iot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);Ii(t.minLength)&&!(n.length>=t.minLength)&&(yield er(Ke.StringMinLength,t,r,n)),Ii(t.maxLength)&&!(n.length<=t.maxLength)&&(yield er(Ke.StringMaxLength,t,r,n)),Ui(t.pattern)&&(new RegExp(t.pattern).test(n)||(yield er(Ke.StringPattern,t,r,n))),Ui(t.format)&&(um.Has(t.format)?um.Get(t.format)(n)||(yield er(Ke.StringFormat,t,r,n)):yield er(Ke.StringFormatUnknown,t,r,n))}s(Iot,"FromString");function*Tot(t,e,r,n){y1(n)||(yield er(Ke.Symbol,t,r,n))}s(Tot,"FromSymbol");function*wot(t,e,r,n){if(!Ui(n))return yield er(Ke.String,t,r,n);new RegExp(t.pattern).test(n)||(yield er(Ke.StringPattern,t,r,n))}s(wot,"FromTemplateLiteral");function*_ot(t,e,r,n){yield*Bl(Yi(t,e),e,r,n)}s(_ot,"FromThis");function*Sot(t,e,r,n){if(!Cn(n))return yield er(Ke.Tuple,t,r,n);if(t.items===void 0&&n.length!==0)return yield er(Ke.TupleLength,t,r,n);if(n.length!==t.maxItems)return yield er(Ke.TupleLength,t,r,n);if(t.items)for(let i=0;i<t.items.length;i++)yield*Bl(t.items[i],e,`${r}/${i}`,n[i])}s(Sot,"FromTuple");function*Rot(t,e,r,n){us(n)||(yield er(Ke.Undefined,t,r,n))}s(Rot,"FromUndefined");function*kot(t,e,r,n){if(pi(t,e,n))return;let i=t.anyOf.map(o=>new Px(Bl(o,e,r,n)));yield er(Ke.Union,t,r,n,i)}s(kot,"FromUnion");function*Bot(t,e,r,n){if(!M_(n))return yield er(Ke.Uint8Array,t,r,n);Ii(t.maxByteLength)&&!(n.length<=t.maxByteLength)&&(yield er(Ke.Uint8ArrayMaxByteLength,t,r,n)),Ii(t.minByteLength)&&!(n.length>=t.minByteLength)&&(yield er(Ke.Uint8ArrayMinByteLength,t,r,n))}s(Bot,"FromUint8Array");function*Dot(t,e,r,n){}s(Dot,"FromUnknown");function*Pot(t,e,r,n){Jo.IsVoidLike(n)||(yield er(Ke.Void,t,r,n))}s(Pot,"FromVoid");function*Not(t,e,r,n){vu.Get(t[Ze])(t,n)||(yield er(Ke.Kind,t,r,n))}s(Not,"FromKind");function*Bl(t,e,r,n){let i=Ii(t.$id)?[...e,t]:e,o=t;switch(o[Ze]){case"Any":return yield*tot(o,i,r,n);case"Argument":return yield*rot(o,i,r,n);case"Array":return yield*not(o,i,r,n);case"AsyncIterator":return yield*iot(o,i,r,n);case"BigInt":return yield*oot(o,i,r,n);case"Boolean":return yield*sot(o,i,r,n);case"Constructor":return yield*aot(o,i,r,n);case"Date":return yield*lot(o,i,r,n);case"Function":return yield*cot(o,i,r,n);case"Import":return yield*uot(o,i,r,n);case"Integer":return yield*dot(o,i,r,n);case"Intersect":return yield*fot(o,i,r,n);case"Iterator":return yield*pot(o,i,r,n);case"Literal":return yield*mot(o,i,r,n);case"Never":return yield*hot(o,i,r,n);case"Not":return yield*got(o,i,r,n);case"Null":return yield*Aot(o,i,r,n);case"Number":return yield*yot(o,i,r,n);case"Object":return yield*Cot(o,i,r,n);case"Promise":return yield*xot(o,i,r,n);case"Record":return yield*vot(o,i,r,n);case"Ref":return yield*bot(o,i,r,n);case"RegExp":return yield*Eot(o,i,r,n);case"String":return yield*Iot(o,i,r,n);case"Symbol":return yield*Tot(o,i,r,n);case"TemplateLiteral":return yield*wot(o,i,r,n);case"This":return yield*_ot(o,i,r,n);case"Tuple":return yield*Sot(o,i,r,n);case"Undefined":return yield*Rot(o,i,r,n);case"Union":return yield*kot(o,i,r,n);case"Uint8Array":return yield*Bot(o,i,r,n);case"Unknown":return yield*Dot(o,i,r,n);case"Void":return yield*Pot(o,i,r,n);default:if(!vu.Has(o[Ze]))throw new mZ(t);return yield*Not(o,i,r,n)}}s(Bl,"Visit");function lg(...t){let e=t.length===3?Bl(t[0],t[1],"",t[2]):Bl(t[0],[],"",t[1]);return new Px(e)}s(lg,"Errors");f();f();var oS=class extends xn{static{s(this,"TransformDecodeCheckError")}constructor(e,r,n){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},hZ=class extends xn{static{s(this,"TransformDecodeError")}constructor(e,r,n,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=r,this.value=n,this.error=i}};function Ns(t,e,r){try{return oo(t)?t[Ds].Decode(r):r}catch(n){throw new hZ(t,e,r,n)}}s(Ns,"Default");function Lot(t,e,r,n){return Cn(n)?Ns(t,r,n.map((i,o)=>mm(t.items,e,`${r}/${o}`,i))):Ns(t,r,n)}s(Lot,"FromArray");function Fot(t,e,r,n){if(!ui(n)||o0(n))return Ns(t,r,n);let i=KL(t),o=i.map(d=>d[0]),a={...n};for(let[d,p]of i)d in a&&(a[d]=mm(p,e,`${r}/${d}`,a[d]));if(!oo(t.unevaluatedProperties))return Ns(t,r,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Ns(c,`${r}/${d}`,u[d]));return Ns(t,r,u)}s(Fot,"FromIntersect");function Mot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=mm(o,[...e,...i],r,n);return Ns(t,r,a)}s(Mot,"FromImport");function Qot(t,e,r,n){return Ns(t,r,mm(t.not,e,r,n))}s(Qot,"FromNot");function Oot(t,e,r,n){if(!ui(n))return Ns(t,r,n);let i=cd(t),o={...n};for(let u of i)yn(o,u)&&(us(o[u])&&(!v1(t.properties[u])||Jo.IsExactOptionalProperty(o,u))||(o[u]=mm(t.properties[u],e,`${r}/${u}`,o[u])));if(!Ps(t.additionalProperties))return Ns(t,r,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Ns(l,`${r}/${u}`,c[u]));return Ns(t,r,c)}s(Oot,"FromObject");function Uot(t,e,r,n){if(!ui(n))return Ns(t,r,n);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...n};for(let d of Object.getOwnPropertyNames(n))o.test(d)&&(a[d]=mm(t.patternProperties[i],e,`${r}/${d}`,a[d]));if(!Ps(t.additionalProperties))return Ns(t,r,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Ns(c,`${r}/${d}`,u[d]));return Ns(t,r,u)}s(Uot,"FromRecord");function qot(t,e,r,n){let i=Yi(t,e);return Ns(t,r,mm(i,e,r,n))}s(qot,"FromRef");function Wot(t,e,r,n){let i=Yi(t,e);return Ns(t,r,mm(i,e,r,n))}s(Wot,"FromThis");function Got(t,e,r,n){return Cn(n)&&Cn(t.items)?Ns(t,r,t.items.map((i,o)=>mm(i,e,`${r}/${o}`,n[o]))):Ns(t,r,n)}s(Got,"FromTuple");function Hot(t,e,r,n){for(let i of t.anyOf){if(!pi(i,e,n))continue;let o=mm(i,e,r,n);return Ns(t,r,o)}return Ns(t,r,n)}s(Hot,"FromUnion");function mm(t,e,r,n){let i=Rl(t,e),o=t;switch(t[Ze]){case"Array":return Lot(o,i,r,n);case"Import":return Mot(o,i,r,n);case"Intersect":return Fot(o,i,r,n);case"Not":return Qot(o,i,r,n);case"Object":return Oot(o,i,r,n);case"Record":return Uot(o,i,r,n);case"Ref":return qot(o,i,r,n);case"Symbol":return Ns(o,r,n);case"This":return Wot(o,i,r,n);case"Tuple":return Got(o,i,r,n);case"Union":return Hot(o,i,r,n);default:return Ns(o,r,n)}}s(mm,"Visit");function sS(t,e,r){return mm(t,e,"",r)}s(sS,"TransformDecode");f();var aS=class extends xn{static{s(this,"TransformEncodeCheckError")}constructor(e,r,n){super("The encoded value does not match the expected schema"),this.schema=e,this.value=r,this.error=n}},gZ=class extends xn{static{s(this,"TransformEncodeError")}constructor(e,r,n,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=r,this.value=n,this.error=i}};function uc(t,e,r){try{return oo(t)?t[Ds].Encode(r):r}catch(n){throw new gZ(t,e,r,n)}}s(uc,"Default");function jot(t,e,r,n){let i=uc(t,r,n);return Cn(i)?i.map((o,a)=>hm(t.items,e,`${r}/${a}`,o)):i}s(jot,"FromArray");function Vot(t,e,r,n){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=uc(t,r,n);return hm(o,[...e,...i],r,a)}s(Vot,"FromImport");function $ot(t,e,r,n){let i=uc(t,r,n);if(!ui(n)||o0(n))return i;let o=KL(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=hm(m,e,`${r}/${p}`,l[p]));if(!oo(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=uc(u,`${r}/${p}`,d[p]));return d}s($ot,"FromIntersect");function zot(t,e,r,n){return uc(t.not,r,uc(t,r,n))}s(zot,"FromNot");function Yot(t,e,r,n){let i=uc(t,r,n);if(!ui(i))return i;let o=cd(t),a={...i};for(let d of o)yn(a,d)&&(us(a[d])&&(!v1(t.properties[d])||Jo.IsExactOptionalProperty(a,d))||(a[d]=hm(t.properties[d],e,`${r}/${d}`,a[d])));if(!Ps(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=uc(c,`${r}/${d}`,u[d]));return u}s(Yot,"FromObject");function Kot(t,e,r,n){let i=uc(t,r,n);if(!ui(n))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(n))a.test(p)&&(l[p]=hm(t.patternProperties[o],e,`${r}/${p}`,l[p]));if(!Ps(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=uc(u,`${r}/${p}`,d[p]));return d}s(Kot,"FromRecord");function Jot(t,e,r,n){let i=Yi(t,e),o=hm(i,e,r,n);return uc(t,r,o)}s(Jot,"FromRef");function Xot(t,e,r,n){let i=Yi(t,e),o=hm(i,e,r,n);return uc(t,r,o)}s(Xot,"FromThis");function Zot(t,e,r,n){let i=uc(t,r,n);return Cn(t.items)?t.items.map((o,a)=>hm(o,e,`${r}/${a}`,i[a])):[]}s(Zot,"FromTuple");function est(t,e,r,n){for(let i of t.anyOf){if(!pi(i,e,n))continue;let o=hm(i,e,r,n);return uc(t,r,o)}for(let i of t.anyOf){let o=hm(i,e,r,n);if(pi(t,e,o))return uc(t,r,o)}return uc(t,r,n)}s(est,"FromUnion");function hm(t,e,r,n){let i=Rl(t,e),o=t;switch(t[Ze]){case"Array":return jot(o,i,r,n);case"Import":return Vot(o,i,r,n);case"Intersect":return $ot(o,i,r,n);case"Not":return zot(o,i,r,n);case"Object":return Yot(o,i,r,n);case"Record":return Kot(o,i,r,n);case"Ref":return Jot(o,i,r,n);case"This":return Xot(o,i,r,n);case"Tuple":return Zot(o,i,r,n);case"Union":return est(o,i,r,n);default:return uc(o,r,n)}}s(hm,"Visit");function lS(t,e,r){return hm(t,e,"",r)}s(lS,"TransformEncode");f();function tst(t,e){return oo(t)||dl(t.items,e)}s(tst,"FromArray");function rst(t,e){return oo(t)||dl(t.items,e)}s(rst,"FromAsyncIterator");function nst(t,e){return oo(t)||dl(t.returns,e)||t.parameters.some(r=>dl(r,e))}s(nst,"FromConstructor");function ist(t,e){return oo(t)||dl(t.returns,e)||t.parameters.some(r=>dl(r,e))}s(ist,"FromFunction");function ost(t,e){return oo(t)||oo(t.unevaluatedProperties)||t.allOf.some(r=>dl(r,e))}s(ost,"FromIntersect");function sst(t,e){let r=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),n=t.$defs[t.$ref];return oo(t)||dl(n,[...r,...e])}s(sst,"FromImport");function ast(t,e){return oo(t)||dl(t.items,e)}s(ast,"FromIterator");function lst(t,e){return oo(t)||dl(t.not,e)}s(lst,"FromNot");function cst(t,e){return oo(t)||Object.values(t.properties).some(r=>dl(r,e))||Ps(t.additionalProperties)&&dl(t.additionalProperties,e)}s(cst,"FromObject");function ust(t,e){return oo(t)||dl(t.item,e)}s(ust,"FromPromise");function dst(t,e){let r=Object.getOwnPropertyNames(t.patternProperties)[0],n=t.patternProperties[r];return oo(t)||dl(n,e)||Ps(t.additionalProperties)&&oo(t.additionalProperties)}s(dst,"FromRecord");function fst(t,e){return oo(t)?!0:dl(Yi(t,e),e)}s(fst,"FromRef");function pst(t,e){return oo(t)?!0:dl(Yi(t,e),e)}s(pst,"FromThis");function mst(t,e){return oo(t)||!us(t.items)&&t.items.some(r=>dl(r,e))}s(mst,"FromTuple");function hst(t,e){return oo(t)||t.anyOf.some(r=>dl(r,e))}s(hst,"FromUnion");function dl(t,e){let r=Rl(t,e),n=t;if(t.$id&&AZ.has(t.$id))return!1;switch(t.$id&&AZ.add(t.$id),t[Ze]){case"Array":return tst(n,r);case"AsyncIterator":return rst(n,r);case"Constructor":return nst(n,r);case"Function":return ist(n,r);case"Import":return sst(n,r);case"Intersect":return ost(n,r);case"Iterator":return ast(n,r);case"Not":return lst(n,r);case"Object":return cst(n,r);case"Promise":return ust(n,r);case"Record":return dst(n,r);case"Ref":return fst(n,r);case"This":return pst(n,r);case"Tuple":return mst(n,r);case"Union":return hst(n,r);default:return oo(t)}}s(dl,"Visit");var AZ=new Set;function _1(t,e){return AZ.clear(),dl(t,e)}s(_1,"HasTransform");var yZ=class{static{s(this,"TypeCheck")}constructor(e,r,n,i){this.schema=e,this.references=r,this.checkFunc=n,this.code=i,this.hasTransform=_1(e,r)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return lg(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new oS(this.schema,e,this.Errors(e).First());return this.hasTransform?sS(this.schema,this.references,e):e}Encode(e){let r=this.hasTransform?lS(this.schema,this.references,e):e;if(!this.checkFunc(r))throw new aS(this.schema,e,this.Errors(e).First());return r}},S1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function r(o){return o===95}s(r,"IsUnderscore"),t.IsUnderscore=r;function n(o){return o>=65&&o<=90||o>=97&&o<=122}s(n,"IsAlpha"),t.IsAlpha=n;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(S1||(S1={}));var cF;(function(t){function e(o){return o.length===0?!1:S1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function r(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(S1.IsAlpha(l)||S1.IsNumeric(l)||S1.DollarSign(l)||S1.IsUnderscore(l)))return!1}return!0}s(r,"IsAccessor");function n(o){return o.replace(/'/g,"\\'")}s(n,"EscapeHyphen");function i(o,a){return r(a)?`${o}.${a}`:`${o}['${n(a)}']`}s(i,"Encode"),t.Encode=i})(cF||(cF={}));var CZ;(function(t){function e(r){let n=[];for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);S1.IsNumeric(o)||S1.IsAlpha(o)?n.push(r.charAt(i)):n.push(`_${o}_`)}return n.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(CZ||(CZ={}));var xZ;(function(t){function e(r){return r.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(xZ||(xZ={}));var vZ=class extends xn{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},uF=class extends xn{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},mI;(function(t){function e(a,l,c){return Jo.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${cF.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function r(a){return Jo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(r,"IsObjectLike"),t.IsObjectLike=r;function n(a){return Jo.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(n,"IsRecordLike"),t.IsRecordLike=n;function i(a){return Jo.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Jo.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(mI||(mI={}));var ms;(function(t){function e(ce){return ce[Ze]==="Any"||ce[Ze]==="Unknown"}s(e,"IsAnyOrUnknown");function*r(ce,Oe,ye){yield"true"}s(r,"FromAny");function*n(ce,Oe,ye){yield"true"}s(n,"FromArgument");function*i(ce,Oe,ye){yield`Array.isArray(${ye})`;let[tt,X]=[Me("value","any"),Me("acc","number")];Wr(ce.maxItems)&&(yield`${ye}.length <= ${ce.maxItems}`),Wr(ce.minItems)&&(yield`${ye}.length >= ${ce.minItems}`);let ne=he(ce.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${ne})`,ps(ce.contains)||Wr(ce.minContains)||Wr(ce.maxContains)){let We=ps(ce.contains)?ce.contains:ni(),Pe=he(We,Oe,"value"),be=Wr(ce.minContains)?[`(count >= ${ce.minContains})`]:[],ze=Wr(ce.maxContains)?[`(count <= ${ce.maxContains})`]:[],it=`const count = value.reduce((${X}, ${tt}) => ${Pe} ? acc + 1 : acc, 0)`,gt=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${gt}})(${ye})`}ce.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(ce,Oe,ye){yield`(typeof ${ye} === 'bigint')`,lc(ce.exclusiveMaximum)&&(yield`${ye} < BigInt(${ce.exclusiveMaximum})`),lc(ce.exclusiveMinimum)&&(yield`${ye} > BigInt(${ce.exclusiveMinimum})`),lc(ce.maximum)&&(yield`${ye} <= BigInt(${ce.maximum})`),lc(ce.minimum)&&(yield`${ye} >= BigInt(${ce.minimum})`),lc(ce.multipleOf)&&(yield`(${ye} % BigInt(${ce.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(ce,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(ce,Oe,ye){yield*re(ce.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(ce,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,Wr(ce.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${ce.exclusiveMaximumTimestamp}`),Wr(ce.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${ce.exclusiveMinimumTimestamp}`),Wr(ce.maximumTimestamp)&&(yield`${ye}.getTime() <= ${ce.maximumTimestamp}`),Wr(ce.minimumTimestamp)&&(yield`${ye}.getTime() >= ${ce.minimumTimestamp}`),Wr(ce.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${ce.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(ce,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(ce,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(ce.$defs).reduce((X,ne)=>[...X,ce.$defs[ne]],[]);yield*re(Bf(ce.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(ce,Oe,ye){yield`Number.isInteger(${ye})`,Wr(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Wr(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Wr(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Wr(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Wr(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(m,"FromInteger");function*h(ce,Oe,ye){let tt=ce.allOf.map(X=>he(X,Oe,ye)).join(" && ");if(ce.unevaluatedProperties===!1){let X=Re(`${new RegExp(I1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key))`;yield`(${tt} && ${ne})`}else if(ps(ce.unevaluatedProperties)){let X=Re(`${new RegExp(I1(ce))};`),ne=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key) || ${he(ce.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${ne})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(ce,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(ce,Oe,ye){typeof ce.const=="number"||typeof ce.const=="boolean"?yield`(${ye} === ${ce.const})`:yield`(${ye} === '${xZ.Escape(ce.const)}')`}s(y,"FromLiteral");function*v(ce,Oe,ye){yield"false"}s(v,"FromNever");function*b(ce,Oe,ye){yield`(!${he(ce.not,Oe,ye)})`}s(b,"FromNot");function*E(ce,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(ce,Oe,ye){yield mI.IsNumberLike(ye),Wr(ce.exclusiveMaximum)&&(yield`${ye} < ${ce.exclusiveMaximum}`),Wr(ce.exclusiveMinimum)&&(yield`${ye} > ${ce.exclusiveMinimum}`),Wr(ce.maximum)&&(yield`${ye} <= ${ce.maximum}`),Wr(ce.minimum)&&(yield`${ye} >= ${ce.minimum}`),Wr(ce.multipleOf)&&(yield`(${ye} % ${ce.multipleOf}) === 0`)}s(_,"FromNumber");function*k(ce,Oe,ye){yield mI.IsObjectLike(ye),Wr(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Wr(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let tt=Object.getOwnPropertyNames(ce.properties);for(let X of tt){let ne=cF.Encode(ye,X),We=ce.properties[X];if(ce.required&&ce.required.includes(X))yield*re(We,Oe,ne),(T1(We)||e(We))&&(yield`('${X}' in ${ye})`);else{let Pe=he(We,Oe,ne);yield mI.IsExactOptionalProperty(ye,X,Pe)}}if(ce.additionalProperties===!1)if(ce.required&&ce.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let X=`[${tt.map(ne=>`'${ne}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${X}.includes(key))`}if(typeof ce.additionalProperties=="object"){let X=he(ce.additionalProperties,Oe,`${ye}[key]`),ne=`[${tt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${ne}.includes(key) || ${X}))`}}s(k,"FromObject");function*B(ce,Oe,ye){yield`${ye} instanceof Promise`}s(B,"FromPromise");function*N(ce,Oe,ye){yield mI.IsRecordLike(ye),Wr(ce.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${ce.minProperties}`),Wr(ce.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${ce.maxProperties}`);let[tt,X]=Object.entries(ce.patternProperties)[0],ne=Re(`${new RegExp(tt)}`),We=he(X,Oe,"value"),Pe=ps(ce.additionalProperties)?he(ce.additionalProperties,Oe,ye):ce.additionalProperties===!1?"false":"true",be=`(${ne}.test(key) ? ${We} : ${Pe})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*q(ce,Oe,ye){let tt=Yi(ce,Oe);if(fe.functions.has(ce.$ref))return yield`${Ne(ce.$ref)}(${ye})`;yield*re(tt,Oe,ye)}s(q,"FromRef");function*te(ce,Oe,ye){let tt=Re(`${new RegExp(ce.source,ce.flags)};`);yield`(typeof ${ye} === 'string')`,Wr(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Wr(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),yield`${tt}.test(${ye})`}s(te,"FromRegExp");function*me(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,Wr(ce.maxLength)&&(yield`${ye}.length <= ${ce.maxLength}`),Wr(ce.minLength)&&(yield`${ye}.length >= ${ce.minLength}`),ce.pattern!==void 0&&(yield`${Re(`${new RegExp(ce.pattern)};`)}.test(${ye})`),ce.format!==void 0&&(yield`format('${ce.format}', ${ye})`)}s(me,"FromString");function*oe(ce,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(oe,"FromSymbol");function*H(ce,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${Re(`${new RegExp(ce.pattern)};`)}.test(${ye})`}s(H,"FromTemplateLiteral");function*O(ce,Oe,ye){yield`${Ne(ce.$ref)}(${ye})`}s(O,"FromThis");function*le(ce,Oe,ye){if(yield`Array.isArray(${ye})`,ce.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${ce.maxItems})`;for(let tt=0;tt<ce.items.length;tt++)yield`${he(ce.items[tt],Oe,`${ye}[${tt}]`)}`}s(le,"FromTuple");function*ie(ce,Oe,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*j(ce,Oe,ye){yield`(${ce.anyOf.map(X=>he(X,Oe,ye)).join(" || ")})`}s(j,"FromUnion");function*W(ce,Oe,ye){yield`${ye} instanceof Uint8Array`,Wr(ce.maxByteLength)&&(yield`(${ye}.length <= ${ce.maxByteLength})`),Wr(ce.minByteLength)&&(yield`(${ye}.length >= ${ce.minByteLength})`)}s(W,"FromUint8Array");function*Y(ce,Oe,ye){yield"true"}s(Y,"FromUnknown");function*ee(ce,Oe,ye){yield mI.IsVoidLike(ye)}s(ee,"FromVoid");function*pe(ce,Oe,ye){let tt=fe.instances.size;fe.instances.set(tt,ce),yield`kind('${ce[Ze]}', ${tt}, ${ye})`}s(pe,"FromKind");function*re(ce,Oe,ye,tt=!0){let X=Ui(ce.$id)?[...Oe,ce]:Oe,ne=ce;if(tt&&Ui(ce.$id)){let We=Ne(ce.$id);if(fe.functions.has(We))return yield`${We}(${ye})`;{fe.functions.set(We,"<deferred>");let Pe=Je(We,ce,Oe,"value",!1);return fe.functions.set(We,Pe),yield`${We}(${ye})`}}switch(ne[Ze]){case"Any":return yield*r(ne,X,ye);case"Argument":return yield*n(ne,X,ye);case"Array":return yield*i(ne,X,ye);case"AsyncIterator":return yield*o(ne,X,ye);case"BigInt":return yield*a(ne,X,ye);case"Boolean":return yield*l(ne,X,ye);case"Constructor":return yield*c(ne,X,ye);case"Date":return yield*u(ne,X,ye);case"Function":return yield*d(ne,X,ye);case"Import":return yield*p(ne,X,ye);case"Integer":return yield*m(ne,X,ye);case"Intersect":return yield*h(ne,X,ye);case"Iterator":return yield*g(ne,X,ye);case"Literal":return yield*y(ne,X,ye);case"Never":return yield*v(ne,X,ye);case"Not":return yield*b(ne,X,ye);case"Null":return yield*E(ne,X,ye);case"Number":return yield*_(ne,X,ye);case"Object":return yield*k(ne,X,ye);case"Promise":return yield*B(ne,X,ye);case"Record":return yield*N(ne,X,ye);case"Ref":return yield*q(ne,X,ye);case"RegExp":return yield*te(ne,X,ye);case"String":return yield*me(ne,X,ye);case"Symbol":return yield*oe(ne,X,ye);case"TemplateLiteral":return yield*H(ne,X,ye);case"This":return yield*O(ne,X,ye);case"Tuple":return yield*le(ne,X,ye);case"Undefined":return yield*ie(ne,X,ye);case"Union":return yield*j(ne,X,ye);case"Uint8Array":return yield*W(ne,X,ye);case"Unknown":return yield*Y(ne,X,ye);case"Void":return yield*ee(ne,X,ye);default:if(!vu.Has(ne[Ze]))throw new vZ(ce);return yield*pe(ne,X,ye)}}s(re,"Visit");let fe={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function he(ce,Oe,ye,tt=!0){return`(${[...re(ce,Oe,ye,tt)].join(" && ")})`}s(he,"CreateExpression");function Ne(ce){return`check_${CZ.Encode(ce)}`}s(Ne,"CreateFunctionName");function Re(ce){let Oe=`local_${fe.variables.size}`;return fe.variables.set(Oe,`const ${Oe} = ${ce}`),Oe}s(Re,"CreateVariable");function Je(ce,Oe,ye,tt,X=!0){let[ne,We]=[`
`,it=>"".padStart(it," ")],Pe=Me("value","any"),be=pt("boolean"),ze=[...re(Oe,ye,tt,X)].map(it=>`${We(4)}${it}`).join(` &&${ne}`);return`function ${ce}(${Pe})${be} {${ne}${We(2)}return (${ne}${ze}${ne}${We(2)})
}`}s(Je,"CreateFunction");function Me(ce,Oe){let ye=fe.language==="typescript"?`: ${Oe}`:"";return`${ce}${ye}`}s(Me,"CreateParameter");function pt(ce){return fe.language==="typescript"?`: ${ce}`:""}s(pt,"CreateReturns");function Tt(ce,Oe,ye){let tt=Je("check",ce,Oe,"value"),X=Me("value","any"),ne=pt("boolean"),We=[...fe.functions.values()],Pe=[...fe.variables.values()],be=Ui(ce.$id)?`return function check(${X})${ne} {
  return ${Ne(ce.$id)}(value)
}`:`return ${tt}`;return[...Pe,...We,be].join(`
`)}s(Tt,"Build");function Ct(...ce){let Oe={language:"javascript"},[ye,tt,X]=ce.length===2&&Cn(ce[1])?[ce[0],ce[1],Oe]:ce.length===2&&!Cn(ce[1])?[ce[0],[],ce[1]]:ce.length===3?[ce[0],ce[1],ce[2]]:ce.length===1?[ce[0],[],Oe]:[null,[],Oe];if(fe.language=X.language,fe.variables.clear(),fe.functions.clear(),fe.instances.clear(),!ps(ye))throw new uF(ye);for(let ne of tt)if(!ps(ne))throw new uF(ne);return Tt(ye,tt,X)}s(Ct,"Code"),t.Code=Ct;function bt(ce,Oe=[]){let ye=Ct(ce,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),X=new Map(fe.instances);function ne(ze,it,gt){if(!vu.Has(ze)||!X.has(it))return!1;let Ot=vu.Get(ze),lr=X.get(it);return Ot(lr,gt)}s(ne,"typeRegistryFunction");function We(ze,it){return um.Has(ze)?um.Get(ze)(it):!1}s(We,"formatRegistryFunction");function Pe(ze){return Dx(ze)}s(Pe,"hashFunction");let be=tt(ne,We,Pe);return new yZ(ce,Oe,be,ye)}s(bt,"Compile"),t.Compile=bt})(ms||(ms={}));var ZF=je(Ex());f();f();var dc=[];for(let t=0;t<256;++t)dc.push((t+256).toString(16).slice(1));function wxe(t,e=0){return(dc[t[e+0]]+dc[t[e+1]]+dc[t[e+2]]+dc[t[e+3]]+"-"+dc[t[e+4]]+dc[t[e+5]]+"-"+dc[t[e+6]]+dc[t[e+7]]+"-"+dc[t[e+8]]+dc[t[e+9]]+"-"+dc[t[e+10]]+dc[t[e+11]]+dc[t[e+12]]+dc[t[e+13]]+dc[t[e+14]]+dc[t[e+15]]).toLowerCase()}s(wxe,"unsafeStringify");f();var _xe=require("crypto");var fF=new Uint8Array(256),dF=fF.length;function bZ(){return dF>fF.length-16&&((0,_xe.randomFillSync)(fF),dF=0),fF.slice(dF,dF+=16)}s(bZ,"rng");f();f();var Sxe=require("crypto"),EZ={randomUUID:Sxe.randomUUID};function gst(t,e,r){if(EZ.randomUUID&&!e&&!t)return EZ.randomUUID();t=t||{};let n=t.random??t.rng?.()??bZ();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return wxe(n)}s(gst,"v4");var sr=gst;var eM=je(ii());function SS(t){return t===1}s(SS,"isRestricted");var xat=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],YB=8192,vat=21;var Pl=class{static{s(this,"TelemetryReporters")}getReporter(e,r=0){return SS(r)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(tM(e))return this.reporterRestricted;if(L_(e))return new xB}getFTReporter(e){if(iIe(e))return this.reporterFT;if(L_(e))return new xB}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=Promise.resolve();this.reporter&&(e=this.reporter.dispose(),this.reporter=void 0);let r=Promise.resolve();this.reporterRestricted&&(r=this.reporterRestricted.dispose(),this.reporterRestricted=void 0);let n=Promise.resolve();this.reporterFT&&(n=this.reporterFT.dispose(),this.reporterFT=void 0),await Promise.all([e,r,n])}},bat=I.Object({},{additionalProperties:I.String()}),Eat=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),Iat=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function Tat(t){return Iat.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(Tat,"isOomError");function wat(t){return yB(t)?"network":Tat(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(wat,"getErrorType");var an=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=ms.Compile(bat)}static{this.validateTelemetryMeasurements=ms.Compile(Eat)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,r,n){this.properties=e,this.measurements=r,this.issuedTime=n}static createAndMarkAsIssued(e,r){return new t(e||{},r||{},Ks())}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Ks())}async extendWithExpTelemetry(e){let{filters:r,exp:n}=await e.get(Dt).getFallbackExpAndFilters();n.addToTelemetry(this),r.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=tg(e.get(fn).getEditorInfo()),this.properties.editor_plugin_version=tg(e.get(fn).getEditorPluginInfo());let r=e.get(Bs);this.properties.client_machineid=r.machineId,this.properties.client_sessionid=r.sessionId,this.properties.copilot_version=`copilot/${vI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let n=e.get(fn);this.properties.common_extname=n.getEditorPluginInfo().name,this.properties.common_extversion=n.getEditorPluginInfo().version,this.properties.common_vscodeversion=tg(n.getEditorInfo());let i=e.get(on);this.properties.fetcher=i.name;let o=i.proxySettings;this.properties.proxy_enabled=o?"true":"false",this.properties.proxy_auth=o?.proxyAuth?"true":"false",this.properties.proxy_kerberos_spn=o?.kerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=i.rejectUnauthorized?"true":"false"}extendWithConfigProperties(e){let r=cIe(e);r["copilot.build"]=uIe(e),r["copilot.buildType"]=Ff(e),this.properties={...this.properties,...r}}extendWithRequestId(e){let r={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...r}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,r){if(SS(e))return r;let n={};for(let i in r)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(n[i]=r[i]);return n}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let r={};for(let n in e){let i=t.keysExemptedFromSanitization.includes(n)?n:n.replace(/\./g,"_");r[i]=e[n]}return r}static multiplexProperties(e){let r={...e};for(let n in e){let i=e[n],o=i?.length??0;if(o>YB){let a=0,l=0;for(;o>0&&l<vat;){l+=1;let c=n;l>1&&(c=n+"_"+(l<10?"0":"")+l);let u=a+YB;o<YB&&(u=a+o),r[c]=i.slice(a,u),o-=YB,a+=YB}}}return r}updateMeasurements(e){let r=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=r,this.displayedTime!==void 0){let n=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=n}this.measurements.current_time===void 0&&(this.measurements.current_time=Rat(e))}validateData(e,r){let n;if(t.validateTelemetryProperties.Check(this.properties)||(n={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);n===void 0?n={problem:"measurements",error:i}:(n.problem="both",n.error+=`; ${i}`)}if(n===void 0)return!0;if(L_(e))throw new Error(`Invalid telemetry data: ${n.problem} ${n.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return xI(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:n.problem,validationError:n.error}),r),SS(r)&&xI(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:n.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,r,n,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),n==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,r)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,oIe(e))}},fg=class t extends an{static{s(this,"TelemetryWithExp")}constructor(e,r,n,i){super(e,r,n),this.filtersAndExp=i}extendedBy(e,r){let n={...this.properties,...e},i={...this.measurements,...r},o=new t(n,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new nI({}),exp:bf.createEmptyConfig()})}};function KB(t,e,r,n){t.get(Pl).getReporter(t,e)?.sendTelemetryEvent(r,an.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(KB,"sendTelemetryEvent");function _at(t,e,r,n){t.get(Pl).getReporter(t,e)?.sendTelemetryErrorEvent(r,an.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(_at,"sendTelemetryErrorEvent");function Sat(t,e,r,n){t.get(Pl).getFTReporter(t)?.sendTelemetryEvent(r,an.maybeRemoveRepoInfoFromPropertiesHack(e,n.properties),n.measurements)}s(Sat,"sendFTTelemetryEvent");function RS(t){return t.isFimEnabled?{promptPrefixCharLen:t.prefix.length,promptSuffixCharLen:t.suffix.length}:{promptCharLen:t.prefix.length}}s(RS,"telemetrizePromptLength");function Ks(){return performance.now()}s(Ks,"now");function Rat(t){return Math.floor(t/1e3)}s(Rat,"nowSeconds");function tM(t){return t.get(ac).optedIn}s(tM,"shouldSendRestricted");function iIe(t){return t.get(ac).ftFlag!==""}s(iIe,"shouldSendFinetuningTelemetry");function Bt(t,e,r,n){return t.get(va).register(kat(t,e,Ks(),r?.extendedBy(),n))}s(Bt,"telemetry");async function kat(t,e,r,n,i=0){let o=n||an.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",r),(!SS(i)||tM(t))&&KB(t,i,e,o),SS(i)&&xat.includes(e)&&iIe(t)&&Sat(t,i,e,o)}s(kat,"_telemetry");function V7(t,e){return t.get(va).register(Bat(t,e,Ks()))}s(V7,"telemetryExpProblem");async function Bat(t,e,r){let n="expProblem",i=an.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",r),KB(t,0,n,i)}s(Bat,"_telemetryExpProblem");function Xee(t,e,r,n){return t.get(va).register(Dat(t,e,r,n))}s(Xee,"telemetryRaw");async function Dat(t,e,r,n){let i={...r,...oIe(t)};KB(t,0,e,{properties:i,measurements:n})}s(Dat,"_telemetryRaw");function oIe(t){let e=t.get(fn),r={unique_id:sr(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:tg(e.getEditorInfo())},n=t.get(ac);return n.trackingId&&(r.copilot_trackingId=n.trackingId),n.organizationsList&&(r.organizations_list=n.organizationsList),n.enterpriseList&&(r.enterprise_list=n.enterpriseList),n.sku&&(r.sku=n.sku),r}s(oIe,"createRequiredProperties");var Jee=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let r;try{r=JSON.stringify(e)}catch{r=String(e)}super(r),this.name="CopilotNonError",this.code=(0,ZF.SHA256)(ZF.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function Ta(t,e,r,n,i){return t.get(va).register(sIe(t,e,Ks(),r,{...n},i))}s(Ta,"telemetryException");async function sIe(t,e,r,n,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Lc(a)||a instanceof ls||a instanceof eM.ConnectionError||a instanceof eM.ResponseError)return}else{if(a=new Jee(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(fn).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=tM(t),d=lye(a,c,u),p=wat(a),m=p==="exception",h=an.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",r),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=wX(y.value):y.value="[redacted]");if(o??=K1e(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},n&&(o.context["#origin"]=n,o.transaction=n),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=aye(a,c),v=an.createAndMarkAsIssued({origin:n??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",r),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,KB(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(rg).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),KB(t,0,`error.${p}`,h)}s(sIe,"_telemetryException");function Eu(t,e,r,n){let i=s(async(...o)=>{try{await e(...o)}catch(a){await sIe(t,a,Ks(),r,n)}},"wrapped");return(...o)=>t.get(va).register(i(...o))}s(Eu,"telemetryCatch");function xI(t,e,r,n){return t.get(va).register(Pat(t,e,Ks(),r?.extendedBy(),n))}s(xI,"telemetryError");async function Pat(t,e,r,n,i=0){if(SS(i)&&!tM(t))return;let o=n||an.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",r),_at(t,i,e,o)}s(Pat,"_telemetryError");function aIe(t,e,r,n,i){let o=an.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(r.logprobs)for(let[a,l]of Object.entries(r.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(n),Bt(t,"engine.completion",o,1)}s(aIe,"logEngineCompletion");function lIe(t,e,r){let n={};if(e.isFimEnabled?n={promptPrefixJson:JSON.stringify(e.prefix),promptSuffixJson:JSON.stringify(e.suffix)}:n={promptJson:JSON.stringify(e.prefix)},e.context){let o=r.properties["request.option.extra"]?JSON.parse(r.properties["request.option.extra"]):{};o.context=e.context,n["request.option.extra"]=JSON.stringify(o)}let i=r.extendedBy(n);return Bt(t,"engine.prompt",i,1)}s(lIe,"logEnginePrompt");f();f();var dIe=je(ii()),fIe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Zee;(r=>(r.method="github/didChangeAuth",r.type=new dIe.ProtocolNotificationType(r.method)))(Zee||={});f();var pIe=je(ii()),ete;(r=>(r.method="copilot/ipCodeCitation",r.type=new pIe.NotificationType(r.method)))(ete||={});f();var mIe=je(ii()),rM;(r=>(r.method="context/update",r.type=new mIe.ProtocolRequestType(r.method)))(rM||={});f();f();var Gx="Cancelled";f();var pn=je(ii()),JB=I.String(),hd=I.Object({uri:JB}),bI=I.Intersect([hd,I.Object({version:I.Optional(I.Integer())})]),Qmr=I.Required(bI),Nl=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),wa=I.Object({start:Nl,end:Nl}),tte=I.Union([I.Integer(),I.String()]),Omr=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var hIe=je(ii()),rte;(r=>(r.method="textDocument/didFocus",r.type=new hIe.ProtocolNotificationType(r.method)))(rte||={});f();var Nat=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean(),showInlineMessage:I.Boolean()}),Lat=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),gIe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),AIe=I.Object({editorInfo:I.Optional(gIe),editorPluginInfo:I.Optional(gIe),relatedPluginInfo:I.Optional(I.Array(Lat)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(Nat)),githubAppId:I.Optional(I.String())});f();var XB=je(ii());var nM=(r=>(r[r.Invoked=1]="Invoked",r[r.Automatic=2]="Automatic",r))(nM||{}),Fat=I.Enum(nM),Mat=I.Object({triggerKind:Fat,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:wa,tooltipSignature:I.Optional(I.String())}))}),yIe=I.Object({textDocument:bI,position:Nl,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:Mat,data:I.Optional(I.Unknown())}),nte;(r=>(r.method="textDocument/inlineCompletion",r.type=new XB.ProtocolRequestType(r.method)))(nte||={});var CIe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),xIe=I.Object({item:CIe}),ite;(r=>(r.method="textDocument/didShowCompletion",r.type=new XB.ProtocolNotificationType(r.method)))(ite||={});var vIe=I.Object({item:CIe,acceptedLength:I.Integer({minimum:1})}),ote;(r=>(r.method="textDocument/didPartiallyAcceptCompletion",r.type=new XB.ProtocolNotificationType(r.method)))(ote||={});f();var bIe=je(ii()),ste;(r=>(r.method="textDocument/inlineCompletionPrompt",r.type=new bIe.ProtocolRequestType(r.method)))(ste||={});f();var EIe=je(ii()),IIe=I.Object({textDocument:bI,position:Nl}),Qat=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),TIe=I.Object({item:Qat}),ate;(r=>(r.method="textDocument/didShowInlineEdit",r.type=new EIe.ProtocolNotificationType(r.method)))(ate||={});f();var iM=je(ii());var wIe=I.Object({textDocument:bI,position:Nl,partialResultToken:I.Optional(tte),workDoneToken:I.Optional(tte)}),oM;(n=>(n.method="textDocument/copilotPanelCompletion",n.type=new iM.ProtocolRequestType(n.method),n.partialResult=new iM.ProgressType))(oM||={});f();var _Ie=je(ii()),lte;(r=>(r.method="copilot/related",r.type=new _Ie.ProtocolRequestType(r.method)))(lte||={});f();var SIe=je(ii()),cte;(r=>(r.method="statusNotification",r.type=new SIe.ProtocolNotificationType(r.method)))(cte||={});var RIe=je(require("events"));var sM="CopilotToken",m0=class{static{s(this,"CopilotTokenNotifier")}#e=new RIe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.#e.emit(sM,e)}onToken(e){return this.#e.on(sM,e),pn.Disposable.create(()=>this.#e.off(sM,e))}};function ia(t,e){let r=Eu(t,e,`event.${sM}`);return t.get(m0).onToken(r)}s(ia,"onCopilotToken");function ZB(t,e){return t.get(m0).emitToken(e)}s(ZB,"emitCopilotToken");function kIe(t){return t.get(m0).lastToken}s(kIe,"getLastCopilotToken");f();var aM=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function ute(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(r=>t.includes(r))}s(ute,"findKnownOrg");function BIe(t){let e=t.organization_list??[];return ute(e)??""}s(BIe,"getUserKind");f();f();var EI=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(EI||{}),$a=class{static{s(this,"LogTarget")}},pg=class{static{s(this,"TelemetryLogSender")}},_t=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,r,...n){e.get($a).logIt(e,r,this.category,...n)}debug(e,...r){this.log(e,4,...r)}info(e,...r){this.log(e,3,...r)}warn(e,...r){this.log(e,2,...r)}error(e,...r){e.get(pg).sendError(e,this.category,...r),this.log(e,1,...r)}exception(e,r,n){if(r instanceof Error&&r.name==="Canceled"&&r.message==="Canceled")return;let i=n;n.startsWith(".")&&(i=n.substring(1),n=`${this.category}${n}`),e.get(pg).sendException(e,r,n);let o=r instanceof Error?r:new Error(`Non-error thrown: ${String(r)}`);this.log(e,1,`${i}:`,o)}},Mr=new _t("default");f();var za=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,r,...n){return this.showWarningMessage(r,...n)}};f();var pc=class{static{s(this,"UrlOpener")}};var Oat=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],DIe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",PIe="https://gh.io/copilot-network-errors",Iu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,r){if(!(r instanceof Error))return;let n=r;n.code&&Oat.includes(n.code)&&!this.didNotifyBefore(n.code)&&(this.notifiedErrorCodes.push(n.code),this.displayCertificateErrorNotification(e,n))}async displayCertificateErrorNotification(e,r){new _t("certificates").error(e,`${DIe} Please visit ${PIe} to learn more. Original cause:`,r);let n={title:"Learn more"};return e.get(za).showWarningMessage(DIe,n).then(i=>{if(i?.title===n.title)return e.get(pc).open(PIe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function lM(){return typeof process>"u"}s(lM,"isWeb");var dte=class extends eg{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Mf(t,e,r,n={}){n={...n,headers:{Authorization:`Bearer ${e.accessToken}`,...lM()?{}:n0(t),...n.headers}};let i=await t.get(on).fetch(new URL(r,e.apiUrl).href,n);if(i.status>=500)throw new eg(i);if(!i.headers.get("x-github-request-id"))throw new dte(i);return i}s(Mf,"apiFetch");f();f();var FIe=require("os"),uM=require("path");f();var NIe;(()=>{"use strict";var t={975:H=>{function O(j){if(typeof j!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(j))}s(O,"e");function le(j,W){for(var Y,ee="",pe=0,re=-1,fe=0,he=0;he<=j.length;++he){if(he<j.length)Y=j.charCodeAt(he);else{if(Y===47)break;Y=47}if(Y===47){if(!(re===he-1||fe===1))if(re!==he-1&&fe===2){if(ee.length<2||pe!==2||ee.charCodeAt(ee.length-1)!==46||ee.charCodeAt(ee.length-2)!==46){if(ee.length>2){var Ne=ee.lastIndexOf("/");if(Ne!==ee.length-1){Ne===-1?(ee="",pe=0):pe=(ee=ee.slice(0,Ne)).length-1-ee.lastIndexOf("/"),re=he,fe=0;continue}}else if(ee.length===2||ee.length===1){ee="",pe=0,re=he,fe=0;continue}}W&&(ee.length>0?ee+="/..":ee="..",pe=2)}else ee.length>0?ee+="/"+j.slice(re+1,he):ee=j.slice(re+1,he),pe=he-re-1;re=he,fe=0}else Y===46&&fe!==-1?++fe:fe=-1}return ee}s(le,"r");var ie={resolve:s(function(){for(var j,W="",Y=!1,ee=arguments.length-1;ee>=-1&&!Y;ee--){var pe;ee>=0?pe=arguments[ee]:(j===void 0&&(j=process.cwd()),pe=j),O(pe),pe.length!==0&&(W=pe+"/"+W,Y=pe.charCodeAt(0)===47)}return W=le(W,!Y),Y?W.length>0?"/"+W:"/":W.length>0?W:"."},"resolve"),normalize:s(function(j){if(O(j),j.length===0)return".";var W=j.charCodeAt(0)===47,Y=j.charCodeAt(j.length-1)===47;return(j=le(j,!W)).length!==0||W||(j="."),j.length>0&&Y&&(j+="/"),W?"/"+j:j},"normalize"),isAbsolute:s(function(j){return O(j),j.length>0&&j.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var j,W=0;W<arguments.length;++W){var Y=arguments[W];O(Y),Y.length>0&&(j===void 0?j=Y:j+="/"+Y)}return j===void 0?".":ie.normalize(j)},"join"),relative:s(function(j,W){if(O(j),O(W),j===W||(j=ie.resolve(j))===(W=ie.resolve(W)))return"";for(var Y=1;Y<j.length&&j.charCodeAt(Y)===47;++Y);for(var ee=j.length,pe=ee-Y,re=1;re<W.length&&W.charCodeAt(re)===47;++re);for(var fe=W.length-re,he=pe<fe?pe:fe,Ne=-1,Re=0;Re<=he;++Re){if(Re===he){if(fe>he){if(W.charCodeAt(re+Re)===47)return W.slice(re+Re+1);if(Re===0)return W.slice(re+Re)}else pe>he&&(j.charCodeAt(Y+Re)===47?Ne=Re:Re===0&&(Ne=0));break}var Je=j.charCodeAt(Y+Re);if(Je!==W.charCodeAt(re+Re))break;Je===47&&(Ne=Re)}var Me="";for(Re=Y+Ne+1;Re<=ee;++Re)Re!==ee&&j.charCodeAt(Re)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+W.slice(re+Ne):(re+=Ne,W.charCodeAt(re)===47&&++re,W.slice(re))},"relative"),_makeLong:s(function(j){return j},"_makeLong"),dirname:s(function(j){if(O(j),j.length===0)return".";for(var W=j.charCodeAt(0),Y=W===47,ee=-1,pe=!0,re=j.length-1;re>=1;--re)if((W=j.charCodeAt(re))===47){if(!pe){ee=re;break}}else pe=!1;return ee===-1?Y?"/":".":Y&&ee===1?"//":j.slice(0,ee)},"dirname"),basename:s(function(j,W){if(W!==void 0&&typeof W!="string")throw new TypeError('"ext" argument must be a string');O(j);var Y,ee=0,pe=-1,re=!0;if(W!==void 0&&W.length>0&&W.length<=j.length){if(W.length===j.length&&W===j)return"";var fe=W.length-1,he=-1;for(Y=j.length-1;Y>=0;--Y){var Ne=j.charCodeAt(Y);if(Ne===47){if(!re){ee=Y+1;break}}else he===-1&&(re=!1,he=Y+1),fe>=0&&(Ne===W.charCodeAt(fe)?--fe==-1&&(pe=Y):(fe=-1,pe=he))}return ee===pe?pe=he:pe===-1&&(pe=j.length),j.slice(ee,pe)}for(Y=j.length-1;Y>=0;--Y)if(j.charCodeAt(Y)===47){if(!re){ee=Y+1;break}}else pe===-1&&(re=!1,pe=Y+1);return pe===-1?"":j.slice(ee,pe)},"basename"),extname:s(function(j){O(j);for(var W=-1,Y=0,ee=-1,pe=!0,re=0,fe=j.length-1;fe>=0;--fe){var he=j.charCodeAt(fe);if(he!==47)ee===-1&&(pe=!1,ee=fe+1),he===46?W===-1?W=fe:re!==1&&(re=1):W!==-1&&(re=-1);else if(!pe){Y=fe+1;break}}return W===-1||ee===-1||re===0||re===1&&W===ee-1&&W===Y+1?"":j.slice(W,ee)},"extname"),format:s(function(j){if(j===null||typeof j!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof j);return function(W,Y){var ee=Y.dir||Y.root,pe=Y.base||(Y.name||"")+(Y.ext||"");return ee?ee===Y.root?ee+pe:ee+"/"+pe:pe}(0,j)},"format"),parse:s(function(j){O(j);var W={root:"",dir:"",base:"",ext:"",name:""};if(j.length===0)return W;var Y,ee=j.charCodeAt(0),pe=ee===47;pe?(W.root="/",Y=1):Y=0;for(var re=-1,fe=0,he=-1,Ne=!0,Re=j.length-1,Je=0;Re>=Y;--Re)if((ee=j.charCodeAt(Re))!==47)he===-1&&(Ne=!1,he=Re+1),ee===46?re===-1?re=Re:Je!==1&&(Je=1):re!==-1&&(Je=-1);else if(!Ne){fe=Re+1;break}return re===-1||he===-1||Je===0||Je===1&&re===he-1&&re===fe+1?he!==-1&&(W.base=W.name=fe===0&&pe?j.slice(1,he):j.slice(fe,he)):(fe===0&&pe?(W.name=j.slice(1,re),W.base=j.slice(1,he)):(W.name=j.slice(fe,re),W.base=j.slice(fe,he)),W.ext=j.slice(re,he)),fe>0?W.dir=j.slice(0,fe-1):pe&&(W.dir="/"),W},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,H.exports=ie}},e={};function r(H){var O=e[H];if(O!==void 0)return O.exports;var le=e[H]={exports:{}};return t[H](le,le.exports,r),le.exports}s(r,"r"),r.d=(H,O)=>{for(var le in O)r.o(O,le)&&!r.o(H,le)&&Object.defineProperty(H,le,{enumerable:!0,get:O[le]})},r.o=(H,O)=>Object.prototype.hasOwnProperty.call(H,O),r.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:s(()=>m,"URI"),Utils:s(()=>oe,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(H,O){if(!H.scheme&&O)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${H.authority}", path: "${H.path}", query: "${H.query}", fragment: "${H.fragment}"}`);if(H.scheme&&!o.test(H.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(H.path){if(H.authority){if(!a.test(H.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(H.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(O){return O instanceof m||!!O&&typeof O.authority=="string"&&typeof O.fragment=="string"&&typeof O.path=="string"&&typeof O.query=="string"&&typeof O.scheme=="string"&&typeof O.fsPath=="string"&&typeof O.with=="function"&&typeof O.toString=="function"}scheme;authority;path;query;fragment;constructor(O,le,ie,j,W,Y=!1){typeof O=="object"?(this.scheme=O.scheme||u,this.authority=O.authority||u,this.path=O.path||u,this.query=O.query||u,this.fragment=O.fragment||u):(this.scheme=function(ee,pe){return ee||pe?ee:"file"}(O,Y),this.authority=le||u,this.path=function(ee,pe){switch(ee){case"https":case"http":case"file":pe?pe[0]!==d&&(pe=d+pe):pe=d}return pe}(this.scheme,ie||u),this.query=j||u,this.fragment=W||u,c(this,Y))}get fsPath(){return E(this,!1)}with(O){if(!O)return this;let{scheme:le,authority:ie,path:j,query:W,fragment:Y}=O;return le===void 0?le=this.scheme:le===null&&(le=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),j===void 0?j=this.path:j===null&&(j=u),W===void 0?W=this.query:W===null&&(W=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),le===this.scheme&&ie===this.authority&&j===this.path&&W===this.query&&Y===this.fragment?this:new g(le,ie,j,W,Y)}static parse(O,le=!1){let ie=p.exec(O);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),le):new g(u,u,u,u,u)}static file(O){let le=u;if(i&&(O=O.replace(/\\/g,d)),O[0]===d&&O[1]===d){let ie=O.indexOf(d,2);ie===-1?(le=O.substring(2),O=d):(le=O.substring(2,ie),O=O.substring(ie)||d)}return new g("file",le,O,u,u)}static from(O){let le=new g(O.scheme,O.authority,O.path,O.query,O.fragment);return c(le,!0),le}toString(O=!1){return _(this,O)}toJSON(){return this}static revive(O){if(O){if(O instanceof m)return O;{let le=new g(O);return le._formatted=O.external,le._fsPath=O._sep===h?O.fsPath:null,le}}return O}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(O=!1){return O?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let O={$mid:1};return this._fsPath&&(O.fsPath=this._fsPath,O._sep=h),this._formatted&&(O.external=this._formatted),this.path&&(O.path=this.path),this.scheme&&(O.scheme=this.scheme),this.authority&&(O.authority=this.authority),this.query&&(O.query=this.query),this.fragment&&(O.fragment=this.fragment),O}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(H,O,le){let ie,j=-1;for(let W=0;W<H.length;W++){let Y=H.charCodeAt(W);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||O&&Y===47||le&&Y===91||le&&Y===93||le&&Y===58)j!==-1&&(ie+=encodeURIComponent(H.substring(j,W)),j=-1),ie!==void 0&&(ie+=H.charAt(W));else{ie===void 0&&(ie=H.substr(0,W));let ee=y[Y];ee!==void 0?(j!==-1&&(ie+=encodeURIComponent(H.substring(j,W)),j=-1),ie+=ee):j===-1&&(j=W)}}return j!==-1&&(ie+=encodeURIComponent(H.substring(j))),ie!==void 0?ie:H}s(v,"m");function b(H){let O;for(let le=0;le<H.length;le++){let ie=H.charCodeAt(le);ie===35||ie===63?(O===void 0&&(O=H.substr(0,le)),O+=y[ie]):O!==void 0&&(O+=H[le])}return O!==void 0?O:H}s(b,"y");function E(H,O){let le;return le=H.authority&&H.path.length>1&&H.scheme==="file"?`//${H.authority}${H.path}`:H.path.charCodeAt(0)===47&&(H.path.charCodeAt(1)>=65&&H.path.charCodeAt(1)<=90||H.path.charCodeAt(1)>=97&&H.path.charCodeAt(1)<=122)&&H.path.charCodeAt(2)===58?O?H.path.substr(1):H.path[1].toLowerCase()+H.path.substr(2):H.path,i&&(le=le.replace(/\//g,"\\")),le}s(E,"v");function _(H,O){let le=O?b:v,ie="",{scheme:j,authority:W,path:Y,query:ee,fragment:pe}=H;if(j&&(ie+=j,ie+=":"),(W||j==="file")&&(ie+=d,ie+=d),W){let re=W.indexOf("@");if(re!==-1){let fe=W.substr(0,re);W=W.substr(re+1),re=fe.lastIndexOf(":"),re===-1?ie+=le(fe,!1,!1):(ie+=le(fe.substr(0,re),!1,!1),ie+=":",ie+=le(fe.substr(re+1),!1,!0)),ie+="@"}W=W.toLowerCase(),re=W.lastIndexOf(":"),re===-1?ie+=le(W,!1,!0):(ie+=le(W.substr(0,re),!1,!0),ie+=W.substr(re))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let re=Y.charCodeAt(1);re>=65&&re<=90&&(Y=`/${String.fromCharCode(re+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let re=Y.charCodeAt(0);re>=65&&re<=90&&(Y=`${String.fromCharCode(re+32)}:${Y.substr(2)}`)}ie+=le(Y,!0,!1)}return ee&&(ie+="?",ie+=le(ee,!1,!1)),pe&&(ie+="#",ie+=O?pe:v(pe,!1,!1)),ie}s(_,"b");function k(H){try{return decodeURIComponent(H)}catch{return H.length>3?H.substr(0,3)+k(H.substr(3)):H}}s(k,"C");let B=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(H){return H.match(B)?H.replace(B,O=>k(O)):H}s(N,"w");var q=r(975);let te=q.posix||q,me="/";var oe;(function(H){H.joinPath=function(O,...le){return O.with({path:te.join(O.path,...le)})},H.resolvePath=function(O,...le){let ie=O.path,j=!1;ie[0]!==me&&(ie=me+ie,j=!0);let W=te.resolve(ie,...le);return j&&W[0]===me&&!O.authority&&(W=W.substring(1)),O.with({path:W})},H.dirname=function(O){if(O.path.length===0||O.path===me)return O;let le=te.dirname(O.path);return le.length===1&&le.charCodeAt(0)===46&&(le=""),O.with({path:le})},H.basename=function(O){return te.basename(O.path)},H.extname=function(O){return te.extname(O.path)}})(oe||(oe={})),NIe=n})();var{URI:Hx,Utils:cM}=NIe;function MIe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+MIe(t.substring(3)):t}}s(MIe,"decodeURIComponentGraceful");var LIe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fte(t){return t.match(LIe)?t.replace(LIe,e=>MIe(e)):t}s(fte,"percentDecode");function fl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Hx.file(t).toString()}s(fl,"makeFsUri");function kS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Hx.parse(e[1]+e[2],!0):Hx.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(kS,"parseUri");function QIe(t){return kS(t),t}s(QIe,"validateUri");function Ll(t){try{return kS(t).toString()}catch{return t}}s(Ll,"normalizeUri");var OIe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function aa(t){let e=kS(t);if(!OIe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,FIe.platform)()==="win32"){let r=e.path;return e.authority?r=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(r)&&(r=r.substring(1)),(0,uM.normalize)(r)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(aa,"fsPath");function Go(t){try{return aa(t)}catch{return}}s(Go,"getFsPath");function dM(t){let e=Go(t);if(e)return Hx.file(e).toString()}s(dM,"getFsUri");function II(t,...e){let r,n=Go(t);return n?r=fl((0,uM.resolve)(n,...e)):r=cM.resolvePath(kS(t),...e.map(i=>UIe(i))).toString(),typeof t=="string"?r:{uri:r}}s(II,"resolveFilePath");function bo(t,...e){let r=cM.joinPath(kS(t),...e.map(UIe)).toString();return typeof t=="string"?r:{uri:r}}s(bo,"joinPath");function UIe(t){return Uat(t)?t.replaceAll("\\","/"):t}s(UIe,"pathToURIPath");function Uat(t){return/^[^/\\]*\\/.test(t)}s(Uat,"isWinPath");function Ti(t){return fte((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ti,"basename");function gd(t){let e=cM.dirname(kS(t)),r;return OIe.has(e.scheme)&&e.scheme!=="file"?r=e.with({scheme:"file",fragment:""}).toString():r=e.toString(),typeof t=="string"?r:{uri:r}}s(gd,"dirname");var Fl=class{static{s(this,"NetworkConfiguration")}},e8={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function pte(t,e,r){if(r&&rm(t)){for(let n of r){let i=Xr(t,n);if(i)return i}return}for(let n of e){let i=Xr(t,n);if(i)return i}}s(pte,"urlConfigOverride");function qat(t,e){switch(e){case"api":return pte(t,[ft.DebugOverrideCapiUrl,ft.DebugOverrideCapiUrlLegacy],[ft.DebugTestOverrideCapiUrl,ft.DebugTestOverrideCapiUrlLegacy]);case"proxy":return pte(t,[ft.DebugOverrideProxyUrl,ft.DebugOverrideProxyUrlLegacy],[ft.DebugTestOverrideProxyUrl,ft.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!pM(t))return pte(t,[ft.DebugSnippyOverrideUrl])}}s(qat,"getEndpointOverrideUrl");function jx(t,e,r,...n){let i=qat(t,r)??e.endpoints[r];return bo(i,...n)}s(jx,"getEndpointUrl");function fM(t){return kIe(t)?.endpoints??e8}s(fM,"getLastKnownEndpoints");var Ad=new _t("auth"),GIe=60;function BS(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",r=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?r||=e.replace("://","://api."):r?.includes("://api.")&&(e||=r.replace("://api.","://")),(!e||!r)&&(e="https://github.com",r="https://api.github.com"),{apiUrl:r,serverUrl:e}}s(BS,"fillGitHubUrls");function qIe(){return Math.floor(Date.now()/1e3)}s(qIe,"nowSeconds");async function mM(t,e){let r=an.createAndMarkAsIssued({},{});Bt(t,"auth.new_login");let n=await Wat(t,e),i=await n.json(),o=i.user_notification;if(WIe(t,o,e),n.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return Ad.info(t,d),xI(t,"auth.unknown_401",r),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!n.ok||!i.token){Ad.info(t,`Invalid copilot token: missing token: ${n.status} ${n.statusText}`),xI(t,"auth.invalid_token",r.extendedBy({status:n.status.toString(),status_text:n.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&WIe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=qIe()+i.refresh_in+GIe;let l=await mte(t,e),c;l.ok&&(c=await l.json());let u=new TI(i,c);return ZB(t,u),Bt(t,"auth.new_token",r.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:qIe()})),{kind:"success",copilotToken:u}}s(mM,"authFromGitHubSession");async function Wat(t,e){let r={"X-GitHub-Api-Version":If},n=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Mf(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(Wat,"fetchCopilotToken");async function mte(t,e){let r={"X-GitHub-Api-Version":If},n=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Mf(t,e,n,{timeout:12e4,headers:r})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(mte,"fetchCopilotUserInfo");function WIe(t,e,r){e&&t.get(za).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async n=>{let i=n?.title===e.title,o=i||n?.title==="Dismiss";if(i){let a=t.get(fn).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(pc).open(l)}e.notification_id&&o&&await Gat(t,e.notification_id,r)}).catch(n=>{Ad.exception(t,n,"copilotToken.notification")})}s(WIe,"notifyUser");async function Gat(t,e,r){let n=r.devOverride?.notificationUrl??"copilot_internal/notification",i=await Mf(t,r,n,{method:"POST",headers:{"X-GitHub-Api-Version":If},body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&Ad.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(Gat,"sendNotificationResultToGitHub");var TI=class{constructor(e,r){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new aM(r)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??e8}needsRefresh(){return(this.envelope.expires_at-GIe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return ute(this.organization_list||[])!==void 0}parseToken(e){let r=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");r.set(a,l)}return r}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();f();var zIe=je(jIe()),YIe=je($Ie()),h0=je(require("os"));var DS=class{constructor(e,r,n,i=!1){this.ctx=e;this.namespace=r;this.includeAuthorizationHeader=i;this.onCopilotToken=s(e=>{this.token=e;let r=e.getTokenValue("tid");r!==void 0&&(this.tags["ai.user.id"]=r)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,r)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let n=e.headers??{};n["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(n.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:n,body:e.data};this.ctx.get(on).fetch(e.urlString,i).then(o=>o.text().then(a=>{r(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{Mr.debug(this.ctx,"Error sending telemetry",o),r(0,{})})},"sendPOST")};this.client=new YIe.ApplicationInsights({instrumentationKey:n,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:e.get(Fl).getTelemetryUrl(),extensionConfig:{[zIe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Hat(e),this.commonProperties=jat(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,r,n){r={...r,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...r,...n},baseType:"EventData",baseData:{name:i,properties:r,measurements:n}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(this.qualifyEventName(e),r,n)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Hat(t){let e={},r=t.get(Bs);e["ai.session.id"]=r.sessionId;let n=t.get(ac);return n.trackingId&&(e["ai.user.id"]=n.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${h0.type()} ${h0.release()}`,e["ai.device.osArchitecture"]=h0.arch(),e["ai.device.osPlatform"]=h0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(po).getVersion(),e}s(Hat,"getTags");function jat(t){let e={};e.common_os=h0.platform(),e.common_platformversion=h0.release(),e.common_arch=h0.arch(),e.common_cpu=Array.from(new Set(h0.cpus().map(n=>n.model))).join();let r=t.get(Bs);return e.common_vscodemachineid=r.machineId,e.common_vscodesessionid=r.sessionId,e.common_uikind=r.uiKind,e.common_remotename=r.remoteName,e.common_isnewappinstall="",e}s(jat,"getCommonProperties");var Vat="7d7048df-6dd0-4048-bb23-b716c1461f8f",$at="3fdd7f28-937a-48c8-9a21-ba337db23bd1",zat="f0000000-0000-0000-0000-000000000000",g0=class{constructor(){this._initialized=!1}static{s(this,"TelemetryInitialization")}get isInitialized(){return this._initialized}get isEnabled(){return this._enabled??!1}async initialize(e,r,n){let i=e.get(Pl).deactivate();if(this._namespace=r,this._enabled=n,this._initialized=!0,n){let o=e.get(Pl);o.setReporter(new DS(e,r,Vat)),o.setRestrictedReporter(new DS(e,r,$at)),o.setFTReporter(new DS(e,r,zat,!0))}await i}reInitialize(e){return this._initialized?this.initialize(e,this._namespace,this._enabled):Promise.reject(new Error("Cannot re-initialize telemetry that has not been initialized."))}};function AM(t,e,r){return t.get(g0).initialize(t,e,r)}s(AM,"setupTelemetryReporters");var mn=class{constructor(e,r,n){this.authPersistence=e;this._copilotTokenManager=r;this.env=n;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;#t;getCopilotTokenManager(){return this._copilotTokenManager}updateEnterpriseConfig(e,r){if(this.#t=void 0,this.authPersistence.setAuthAuthority(void 0),r?.uri?.match(/^https?:\/\//))try{this.authPersistence.setAuthAuthority(new URL(r.uri).host),this.#t=r.uri}catch(n){Ad.exception(e,n,`Ignoring invalid github-enterprise.uri: <${r.uri}>`)}}getConfiguredUrls(){let e=this.#t??"https://github.com";return{serverUrl:e,apiUrl:e.replace("://","://api.")}}async checkAndUpdateStatus(e,r){let n=r?.localChecksOnly??!1,i;return r?.githubAppId!==void 0?i=await this.getPersistedSession(e,r):i=await this.getSession(e),i===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):n?{status:"MaybeOK",user:i.login}:(r?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(e,i,r?.freshSignIn??!1),user:i.login})}async getTokenWithSignUpLimited(e,r,n){try{await this._copilotTokenManager.getToken()}catch(i){if(i instanceof Qf)return n&&i.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e,r)?this.getTokenWithSignUpLimited(e,r,!1):i.result.reason==="HTTP401"?"NotSignedIn":i.result.reason;throw i}return"OK"}async getSession(e){let r=Yat(this.env)??this.#e;if(r)return{...r,...BS(r)};if(r!==null)return await this.getPersistedSession(e)}async getPersistedSession(e,r){let n=await this.authPersistence.getAuthRecord(r);if(n===void 0)return;let i={...this.getConfiguredUrls(),accessToken:n.oauth_token,login:n.user,githubAppId:n.githubAppId};return n.dev_override&&Ff(e)==="dev"&&(i.devOverride={copilotTokenUrl:n.dev_override.copilot_token_url,copilotUserInfoUrl:n.dev_override.copilot_user_info_url,notificationUrl:n.dev_override.notification_url,contentRestrictionsUrl:n.dev_override.content_restrictions_url}),i}async signUpLimited(e,r){let n="copilot_internal/subscribe_limited_user";try{return(await(await Mf(e,r,n,{method:"POST",headers:{"X-GitHub-Api-Version":If},body:JSON.stringify({restricted_telemetry:e.get(g0).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(i){return Ad.exception(e,i,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:r,githubAppId:n,serverUrl:i}){await this.authPersistence.saveAuthRecord({oauth_token:e,user:r,githubAppId:n},new URL(i||this.getConfiguredUrls().serverUrl).host),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,r=!0){this.#e=e,r&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord(),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Yat(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Yat,"getSessionFromEnv");f();var Ki=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#n;#r=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,r,n){this.#t===e&&this.#i===r&&!n&&!this.#n&&!this.#r||(this.#t=e,this.#i=r,this.#n=n,this.#r=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,r){this.forceStatus("Error",e,r)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#n};this.didChange(e)}},yM=class extends Ki{static{s(this,"NoOpStatusReporter")}didChange(){}};var Qr=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Qf=class extends ls{constructor(r){super(r.message??"");this.result=r}static{s(this,"TokenResultError")}},CM=class extends Qr{constructor(r,n=!1){super(n);this.ctx=r;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let r=await this.getGitHubSession();if(!r)throw new Qf({reason:"NotSignedIn"});if(!r.accessToken)throw new Qf({reason:"HTTP401"});let n=await mM(this.ctx,r);if(n.kind==="failure"){if(n.message)throw new Qf(n);let i=new Error(`Unexpected error getting Copilot token: ${n.reason}`);throw i.code=`CopilotToken.${n.reason}`,i}return n.copilotToken}async getToken(){if(!this.primed){let r=new Error("Token requested before initialization");if(KIe(this.ctx))throw r;Ad.exception(this.ctx,r,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let r=this.fetchCopilotToken().then(n=>this.tokenPromise!==r?n:(this.token=n,this.tokenPromise=void 0,this.ctx.get(Ki).forceNormal(),this.token),n=>{if(this.tokenPromise!==r)throw n;this.tokenPromise=void 0;let i=this.ctx.get(Ki);if(n instanceof Qf)switch(n.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(n.message||"No access to Copilot found.");break}else i.setWarning(String(n));throw n});this.tokenPromise=r}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(r){r!==void 0?(Bt(this.ctx,"auth.reset_token_"+r),Ad.debug(this.ctx,`Resetting copilot token on HTTP error ${r}`)):Ad.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},PS=class extends CM{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(mn).getSession(this.ctx)}};f();var mg=class{static{s(this,"Clock")}now(){return new Date}};f();var ym=class{static{s(this,"ExpConfigMaker")}},t8=class extends ym{constructor(r={}){super();this.defaultFilters=r}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(r,n,i){let o=r.get(on),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",n.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return bf.createFallbackConfig(r,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return bf.createFallbackConfig(r,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return Ta(r,m,"fetchExperiments"),bf.createFallbackConfig(r,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new bf(d.Parameters,u.AssignmentContext,p.join(";"))}},xM=class extends ym{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(bf.createEmptyConfig())}};f();f();var vM=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let r=this.getValue(e),n=this.getUpcomingValues(e);return[r,n]}},hte=class extends vM{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},JIe=s(t=>new hte(t),"DEFAULT_GRANULARITY"),bM=class extends vM{constructor(r,n=.5,i=new Date().setUTCHours(0,0,0,0)){super(r);this.prefix=r;this.fetchBeforeFactor=n;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(r){isNaN(r)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=r}setByCallBuckets(r){isNaN(r)?this.numByCallBuckets=void 0:this.numByCallBuckets=r}getValue(r){return this.prefix+this.getTimePeriodBucketString(r)+(this.numByCallBuckets?this.timeHash(r):"")}getTimePeriodBucketString(r){return this.timePeriodLengthMs?this.dateToTimePartString(r):""}getUpcomingValues(r){let n=[],i=this.getUpcomingTimePeriodBucketStrings(r),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)n.push(this.prefix+a+l);return n}getUpcomingTimePeriodBucketStrings(r){if(this.timePeriodLengthMs===void 0)return[""];if((r.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(r)];{let n=new Date(r.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(r),this.getTimePeriodBucketString(n)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(r=>r.toString())}timeHash(r){return this.numByCallBuckets==null?0:7883*(r.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(r){return this.timePeriodLengthMs==null?"":Math.floor((r.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var XIe="X-Copilot-ClientTimeBucket",EM=class{constructor(e,r){this.specs=new Map;this.prefix=e,this.clock=r,this.defaultGranularity=JIe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[r,n]of this.specs.entries())if(e.extends(r))return n;return this.defaultGranularity}update(e,r,n){if(r=r>1?r:NaN,n=n>0?n:NaN,isNaN(r)&&isNaN(n))this.specs.delete(e);else{let i=new bM(this.prefix);isNaN(r)||i.setByCallBuckets(r),isNaN(n)||i.setTimePeriod(n*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let r=this.selectGranularity(e),[n,i]=r.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(XIe,n),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(XIe,o))}}};f();f();f();function Kat(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Kat,"getIntegrationId");function Vx(t){let e={...n0(t),"X-GitHub-Api-Version":If},r=Kat(t.get(fn));return r&&(e["Copilot-Integration-Id"]=r),e}s(Vx,"getCapiHeaders");function IM(t,e,...r){return jx(t,e,"api",...r)}s(IM,"getCapiUrl");async function wI(t,e){let r=await t.get(Qr).getToken(),n=IM(t,r,e),i={Authorization:`Bearer ${r.token}`,...Vx(t)};return await t.get(on).fetch(new URL(n).href,{method:"GET",headers:i})}s(wI,"fetchCapiUrl");async function ZIe(t,e,r){let n=await t.get(Qr).getToken(),i=IM(t,n,e),o={Authorization:`Bearer ${n.token}`,...Vx(t)};return await t.get(on).fetch(new URL(i).href,{method:"POST",headers:o,body:r})}s(ZIe,"postCapiUrl");f();var e2e=10*60*1e3,ln={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},t2e=new Set([ln.O1Ga,ln.O3Mini,ln.O1Mini,ln.Gemini20Pro,ln.Gemini20Flash]);function Of(t){switch(t){case"edits":case"user":case"inline":return[ln.Gpt4o,ln.Gpt4turbo,ln.Gpt4,ln.O1Mini,ln.O1Ga,ln.Claude35Sonnet,ln.O3Mini,ln.Gemini20Flash,ln.Claude37Sonnet,ln.Claude37SonnetThought,ln.Gpt45,ln.Gpt41,ln.CopilotBase];case"meta":case"suggestions":case"synonyms":return[ln.Gpt4oMini,ln.Gpt4o,ln.Gpt35turbo,ln.Gpt41,ln.CopilotBase];case"gitCommit":return[ln.Gpt4oMini,ln.Gpt4o,ln.Gpt4,ln.Gpt41,ln.CopilotBase];case"codeReview":return[ln.Gpt4,ln.Gpt4o,ln.Gpt41,ln.CopilotBase];case"nesStubs":return[ln.Gpt4oMini,ln.Gpt4o,ln.Gpt41,ln.CopilotBase]}}s(Of,"getSupportedModelFamiliesForPrompt");var _M={textEmbedding3Small:"text-embedding-3-small"},Jat=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),Xat=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:Jat,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),r2e=I.Object({data:I.Array(Xat)}),Tu=class{static{s(this,"ModelMetadataProvider")}},TM=class extends Tu{constructor(r){super();this.ctx=r;this._metadata=[];this._lastFetchTime=0;ia(r,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(n=>n.is_chat_fallback)}async fetchMetadata(){let r=await wI(this.ctx,"/models");if(r.status<200||r.status>=300){if(r.status===429&&this._metadata.length>0){Mr.error(this.ctx,"Rate limited while fetching models from CAPI",{status:r.status,statusText:r.statusText});return}throw Mr.error(this.ctx,"Failed to fetch models from CAPI",{status:r.status,statusText:r.statusText}),new eg(r)}await this.processModels(r)}async fetchModel(r){let n=await wI(this.ctx,`/models/${r}`);if(!n.ok){Mr.error(this.ctx,`Failed to fetch model ${r} from CAPI`,{status:n.status,statusText:n.statusText});return}return await n.json()}async acceptModelPolicy(r){return(await ZIe(this.ctx,`/models/${r}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(r){try{let n=await r.json();this._metadata=n.data,this._lastFetchTime=Date.now()}catch(n){Mr.error(this.ctx,"Failed to parse models from CAPI",{error:n})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>e2e}},wM=class extends Tu{constructor(r,n){super();this.ctx=r;this.delegate=n;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let r=this.ctx.get(Dt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatExpModelIds(n),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(r){let n=this._exp_models_cache.get(r);if(n){let[o,a]=n;if(Date.now()-a<e2e)return o}let i=await this.delegate.fetchModel(r);if(i)return this._exp_models_cache.set(r,[i,Date.now()]),i}async acceptModelPolicy(r){return await this.delegate.acceptModelPolicy(r)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function n2e(t){let e=Xr(t,ft.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(n2e,"getUserSelectedModelConfiguration");f();f();f();var NS=class extends Error{constructor(r,n){super(r,{cause:n});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var i2e=je(require("node:fs/promises")),SM=je(require("node:path"));async function RM(t){return await i2e.readFile(gte(t))}s(RM,"readFile");function gte(t){return SM.default.resolve(SM.default.extname(__filename)!==".ts"?__dirname:SM.default.resolve(__dirname,"../../dist"),t)}s(gte,"locateFile");var LS=je(y2e());var n8=new Map;function Do(t="o200k_base"){let e=n8.get(t);return e!==void 0?e:n8.get("o200k_base")}s(Do,"getTokenizer");async function C2e(t="o200k_base"){return await _te,Do(t)}s(C2e,"getTokenizerAsync");async function mlt(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await RM(t),r=new Map,n=[];for(let i=0;i<e.length;i++){if(e[i]!==255||n.length===0){n.push(e[i]);continue}r.set(Uint8Array.from(n),r.size),n=[]}return r.set(Uint8Array.from(n),r.size),r}s(mlt,"parseTikTokenNoIndex");var LM=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let r=(0,LS.createTokenizer)(await mlt(`resources/${e}.tiktoken.noindex`),(0,LS.getSpecialTokensByEncoder)(e),(0,LS.getRegexByEncoder)(e),32768);return new t(r)}catch(r){throw r instanceof Error?new NS("Could not load tokenizer",r):r}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(n=>this.detokenize([n]))}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(-o),l=this.tokenize(a);for(;l.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(-o),l=this.tokenize(a);return l.length<r?{text:e,tokens:l}:(l=l.slice(-r),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=4,i=1,o=Math.min(e.length,r*n),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<r+2&&o<e.length;)o=Math.min(e.length,o+r*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<r?{text:e,tokens:l}:(l=l.slice(0,r),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},wte=class{constructor(){this.hash=s(e=>{let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);r=(r<<5)-r+i,r&=r&65535}return r},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(r=>r.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,r){let n=this.tokenizeStrings(e).slice(-r);return{text:n.join(""),tokens:n.map(this.hash)}}takeFirstTokens(e,r){let n=this.tokenizeStrings(e).slice(0,r);return{text:n.join(""),tokens:n.map(this.hash)}}takeLastLinesTokens(e,r){let{text:n}=this.takeLastTokens(e,r);if(n.length===e.length||e[e.length-n.length-1]===`
`)return n;let i=n.indexOf(`
`);return n.substring(i+1)}},hlt={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},FM=class{constructor(e="o200k_base",r){this.languageId=r;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){throw new Error("Not implemented")}detokenize(e){throw new Error("Not implemented")}tokenizeStrings(e){throw new Error("Not implemented")}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?hlt[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(-Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeFirstTokens(e,r){if(r<=0)return{text:"",tokens:[]};let n=e.slice(0,Math.floor(r*this.getEffectiveTokenLength()));return{text:n,tokens:Array.from({length:this.tokenLength(n)},(i,o)=>o)}}takeLastLinesTokens(e,r){throw new Error("Not implemented")}},_te=(async()=>{n8.set("mock",new wte),n8.set("cl100k_base",await LM.create("cl100k_base")),n8.set("o200k_base",await LM.create("o200k_base"))})();f();f();var glt=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},v2e=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ste,MM,b2e,Rte=class extends xn{static{s(this,"AssertError")}constructor(e){let r=e.First();super(r===void 0?"Invalid Value":r.message),Ste.add(this),MM.set(this,void 0),glt(this,MM,e,"f"),this.error=r}Errors(){return new Px(v2e(this,Ste,"m",b2e).call(this))}};MM=new WeakMap,Ste=new WeakSet,b2e=s(function*(){this.error&&(yield this.error),yield*v2e(this,MM,"f")},"_AssertError_Iterator");function x2e(t,e,r){if(!pi(t,e,r))throw new Rte(lg(t,e,r))}s(x2e,"AssertValue");function QM(...t){return t.length===3?x2e(t[0],t[1],t[2]):x2e(t[0],[],t[1])}s(QM,"Assert");f();f();f();function Alt(t){let e={};for(let r of Object.getOwnPropertyNames(t))e[r]=Ji(t[r]);for(let r of Object.getOwnPropertySymbols(t))e[r]=Ji(t[r]);return e}s(Alt,"FromObject");function ylt(t){return t.map(e=>Ji(e))}s(ylt,"FromArray");function Clt(t){return t.slice()}s(Clt,"FromTypedArray");function xlt(t){return new Map(Ji([...t.entries()]))}s(xlt,"FromMap");function vlt(t){return new Set(Ji([...t.entries()]))}s(vlt,"FromSet");function blt(t){return new Date(t.toISOString())}s(blt,"FromDate");function Ji(t){if(Cn(t))return ylt(t);if(xu(t))return blt(t);if(wf(t))return Clt(t);if(cye(t))return xlt(t);if(uye(t))return vlt(t);if(ui(t))return Alt(t);if(o0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Ji,"Clone");var A0=class extends xn{static{s(this,"ValueCreateError")}constructor(e,r){super(r),this.schema=e}};function Xi(t){return Ix(t)?t():Ji(t)}s(Xi,"FromDefault");function Elt(t,e){return yn(t,"default")?Xi(t.default):{}}s(Elt,"FromAny");function Ilt(t,e){return{}}s(Ilt,"FromArgument");function Tlt(t,e){if(t.uniqueItems===!0&&!yn(t,"default"))throw new A0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!yn(t,"default"))throw new A0(t,"Array with the contains constraint requires a default value");return"default"in t?Xi(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(r=>yd(t.items,e)):[]}s(Tlt,"FromArray");function wlt(t,e){return yn(t,"default")?Xi(t.default):async function*(){}()}s(wlt,"FromAsyncIterator");function _lt(t,e){return yn(t,"default")?Xi(t.default):BigInt(0)}s(_lt,"FromBigInt");function Slt(t,e){return yn(t,"default")?Xi(t.default):!1}s(Slt,"FromBoolean");function Rlt(t,e){if(yn(t,"default"))return Xi(t.default);{let r=yd(t.returns,e);return typeof r=="object"&&!Array.isArray(r)?class{constructor(){for(let[n,i]of Object.entries(r)){let o=this;o[n]=i}}}:class{}}}s(Rlt,"FromConstructor");function klt(t,e){return yn(t,"default")?Xi(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(klt,"FromDate");function Blt(t,e){return yn(t,"default")?Xi(t.default):()=>yd(t.returns,e)}s(Blt,"FromFunction");function Dlt(t,e){let r=globalThis.Object.values(t.$defs),n=t.$defs[t.$ref];return yd(n,[...e,...r])}s(Dlt,"FromImport");function Plt(t,e){return yn(t,"default")?Xi(t.default):t.minimum!==void 0?t.minimum:0}s(Plt,"FromInteger");function Nlt(t,e){if(yn(t,"default"))return Xi(t.default);{let r=t.allOf.reduce((n,i)=>{let o=yd(i,e);return typeof o=="object"?{...n,...o}:o},{});if(!pi(t,e,r))throw new A0(t,"Intersect produced invalid value. Consider using a default value.");return r}}s(Nlt,"FromIntersect");function Llt(t,e){return yn(t,"default")?Xi(t.default):function*(){}()}s(Llt,"FromIterator");function Flt(t,e){return yn(t,"default")?Xi(t.default):t.const}s(Flt,"FromLiteral");function Mlt(t,e){if(yn(t,"default"))return Xi(t.default);throw new A0(t,"Never types cannot be created. Consider using a default value.")}s(Mlt,"FromNever");function Qlt(t,e){if(yn(t,"default"))return Xi(t.default);throw new A0(t,"Not types must have a default value")}s(Qlt,"FromNot");function Olt(t,e){return yn(t,"default")?Xi(t.default):null}s(Olt,"FromNull");function Ult(t,e){return yn(t,"default")?Xi(t.default):t.minimum!==void 0?t.minimum:0}s(Ult,"FromNumber");function qlt(t,e){if(yn(t,"default"))return Xi(t.default);{let r=new Set(t.required),n={};for(let[i,o]of Object.entries(t.properties))r.has(i)&&(n[i]=yd(o,e));return n}}s(qlt,"FromObject");function Wlt(t,e){return yn(t,"default")?Xi(t.default):Promise.resolve(yd(t.item,e))}s(Wlt,"FromPromise");function Glt(t,e){let[r,n]=Object.entries(t.patternProperties)[0];if(yn(t,"default"))return Xi(t.default);if(r===og||r===ig)return{};{let i=r.slice(1,r.length-1).split("|"),o={};for(let a of i)o[a]=yd(n,e);return o}}s(Glt,"FromRecord");function Hlt(t,e){return yn(t,"default")?Xi(t.default):yd(Yi(t,e),e)}s(Hlt,"FromRef");function jlt(t,e){if(yn(t,"default"))return Xi(t.default);throw new A0(t,"RegExp types cannot be created. Consider using a default value.")}s(jlt,"FromRegExp");function Vlt(t,e){if(t.pattern!==void 0){if(yn(t,"default"))return Xi(t.default);throw new A0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(yn(t,"default"))return Xi(t.default);throw new A0(t,"String types with formats must specify a default value")}else return yn(t,"default")?Xi(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(Vlt,"FromString");function $lt(t,e){return yn(t,"default")?Xi(t.default):"value"in t?Symbol.for(t.value):Symbol()}s($lt,"FromSymbol");function zlt(t,e){if(yn(t,"default"))return Xi(t.default);if(!jL(t))throw new A0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return V_(t)[0]}s(zlt,"FromTemplateLiteral");function Ylt(t,e){if(E2e++>nct)throw new A0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return yn(t,"default")?Xi(t.default):yd(Yi(t,e),e)}s(Ylt,"FromThis");function Klt(t,e){return yn(t,"default")?Xi(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((r,n)=>yd(t.items[n],e))}s(Klt,"FromTuple");function Jlt(t,e){if(yn(t,"default"))return Xi(t.default)}s(Jlt,"FromUndefined");function Xlt(t,e){if(yn(t,"default"))return Xi(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return yd(t.anyOf[0],e)}s(Xlt,"FromUnion");function Zlt(t,e){return yn(t,"default")?Xi(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(Zlt,"FromUint8Array");function ect(t,e){return yn(t,"default")?Xi(t.default):{}}s(ect,"FromUnknown");function tct(t,e){if(yn(t,"default"))return Xi(t.default)}s(tct,"FromVoid");function rct(t,e){if(yn(t,"default"))return Xi(t.default);throw new Error("User defined types must specify a default value")}s(rct,"FromKind");function yd(t,e){let r=Rl(t,e),n=t;switch(n[Ze]){case"Any":return Elt(n,r);case"Argument":return Ilt(n,r);case"Array":return Tlt(n,r);case"AsyncIterator":return wlt(n,r);case"BigInt":return _lt(n,r);case"Boolean":return Slt(n,r);case"Constructor":return Rlt(n,r);case"Date":return klt(n,r);case"Function":return Blt(n,r);case"Import":return Dlt(n,r);case"Integer":return Plt(n,r);case"Intersect":return Nlt(n,r);case"Iterator":return Llt(n,r);case"Literal":return Flt(n,r);case"Never":return Mlt(n,r);case"Not":return Qlt(n,r);case"Null":return Olt(n,r);case"Number":return Ult(n,r);case"Object":return qlt(n,r);case"Promise":return Wlt(n,r);case"Record":return Glt(n,r);case"Ref":return Hlt(n,r);case"RegExp":return jlt(n,r);case"String":return Vlt(n,r);case"Symbol":return $lt(n,r);case"TemplateLiteral":return zlt(n,r);case"This":return Ylt(n,r);case"Tuple":return Klt(n,r);case"Undefined":return Jlt(n,r);case"Union":return Xlt(n,r);case"Uint8Array":return Zlt(n,r);case"Unknown":return ect(n,r);case"Void":return tct(n,r);default:if(!vu.Has(n[Ze]))throw new A0(n,"Unknown type");return rct(n,r)}}s(yd,"Visit");var nct=512,E2e=0;function Uf(...t){return E2e=0,t.length===2?yd(t[0],t[1]):yd(t[0],[])}s(Uf,"Create");var OM=class extends xn{static{s(this,"ValueCastError")}constructor(e,r){super(r),this.schema=e}};function ict(t,e,r){if(t[Ze]==="Object"&&typeof r=="object"&&!A1(r)){let n=t,i=Object.getOwnPropertyNames(r),o=Object.entries(n.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Ze]==="Literal"&&d.const===r[u]?l:0,m=pi(d,e,r[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return pi(t,e,r)?1:0}s(ict,"ScoreUnion");function oct(t,e,r){let n=t.anyOf.map(a=>Yi(a,e)),[i,o]=[n[0],0];for(let a of n){let l=ict(a,e,r);l>o&&(i=a,o=l)}return i}s(oct,"SelectUnion");function sct(t,e,r){if("default"in t)return typeof r=="function"?t.default:Ji(t.default);{let n=oct(t,e,r);return i8(n,e,r)}}s(sct,"CastUnion");function act(t,e,r){return pi(t,e,r)?Ji(r):Uf(t,e)}s(act,"DefaultClone");function lct(t,e,r){return pi(t,e,r)?r:Uf(t,e)}s(lct,"Default");function cct(t,e,r){if(pi(t,e,r))return Ji(r);let n=Cn(r)?Ji(r):Uf(t,e),i=Wr(t.minItems)&&n.length<t.minItems?[...n,...Array.from({length:t.minItems-n.length},()=>null)]:n,a=(Wr(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>Cm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!pi(t,e,l))throw new OM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s(cct,"FromArray");function uct(t,e,r){if(pi(t,e,r))return Uf(t,e);let n=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!n.has(o)&&r.prototype[o]===void 0||(i.prototype[o]=Cm(a,e,r.prototype[o]));return i}s(uct,"FromConstructor");function dct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cm(i,[...e,...n],r)}s(dct,"FromImport");function fct(t,e,r){let n=Uf(t,e),i=ui(n)&&ui(r)?{...n,...r}:r;return pi(t,e,i)?i:Uf(t,e)}s(fct,"FromIntersect");function pct(t,e,r){throw new OM(t,"Never types cannot be cast")}s(pct,"FromNever");function mct(t,e,r){if(pi(t,e,r))return r;if(r===null||typeof r!="object")return Uf(t,e);let n=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!n.has(o)&&r[o]===void 0||(i[o]=Cm(a,e,r[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(r))o.includes(a)||(i[a]=Cm(t.additionalProperties,e,r[a]))}return i}s(mct,"FromObject");function hct(t,e,r){if(pi(t,e,r))return Ji(r);if(r===null||typeof r!="object"||Array.isArray(r)||r instanceof Date)return Uf(t,e);let n=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[n],o={};for(let[a,l]of Object.entries(r))o[a]=Cm(i,e,l);return o}s(hct,"FromRecord");function gct(t,e,r){return Cm(Yi(t,e),e,r)}s(gct,"FromRef");function Act(t,e,r){return Cm(Yi(t,e),e,r)}s(Act,"FromThis");function yct(t,e,r){return pi(t,e,r)?Ji(r):Cn(r)?t.items===void 0?[]:t.items.map((n,i)=>Cm(n,e,r[i])):Uf(t,e)}s(yct,"FromTuple");function Cct(t,e,r){return pi(t,e,r)?Ji(r):sct(t,e,r)}s(Cct,"FromUnion");function Cm(t,e,r){let n=Ui(t.$id)?Rl(t,e):e,i=t;switch(t[Ze]){case"Array":return cct(i,n,r);case"Constructor":return uct(i,n,r);case"Import":return dct(i,n,r);case"Intersect":return fct(i,n,r);case"Never":return pct(i,n,r);case"Object":return mct(i,n,r);case"Record":return hct(i,n,r);case"Ref":return gct(i,n,r);case"This":return Act(i,n,r);case"Tuple":return yct(i,n,r);case"Union":return Cct(i,n,r);case"Date":case"Symbol":case"Uint8Array":return act(t,e,r);default:return lct(i,n,r)}}s(Cm,"Visit");function i8(...t){return t.length===3?Cm(t[0],t[1],t[2]):Cm(t[0],[],t[1])}s(i8,"Cast");f();function xct(t){return wx(t)&&t[Ze]!=="Unsafe"}s(xct,"IsCheckable");function vct(t,e,r){return Cn(r)?r.map(n=>Cd(t.items,e,n)):r}s(vct,"FromArray");function bct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Cd(i,[...e,...n],r)}s(bct,"FromImport");function Ect(t,e,r){let n=t.unevaluatedProperties,o=t.allOf.map(l=>Cd(l,e,Ji(r))).reduce((l,c)=>ui(c)?{...l,...c}:c,{});if(!ui(r)||!ui(o)||!wx(n))return o;let a=cd(t);for(let l of Object.getOwnPropertyNames(r))a.includes(l)||pi(n,e,r[l])&&(o[l]=Cd(n,e,r[l]));return o}s(Ect,"FromIntersect");function Ict(t,e,r){if(!ui(r)||Cn(r))return r;let n=t.additionalProperties;for(let i of Object.getOwnPropertyNames(r)){if(yn(t.properties,i)){r[i]=Cd(t.properties[i],e,r[i]);continue}if(wx(n)&&pi(n,e,r[i])){r[i]=Cd(n,e,r[i]);continue}delete r[i]}return r}s(Ict,"FromObject");function Tct(t,e,r){if(!ui(r))return r;let n=t.additionalProperties,i=Object.getOwnPropertyNames(r),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){r[c]=Cd(a,e,r[c]);continue}if(wx(n)&&pi(n,e,r[c])){r[c]=Cd(n,e,r[c]);continue}delete r[c]}return r}s(Tct,"FromRecord");function wct(t,e,r){return Cd(Yi(t,e),e,r)}s(wct,"FromRef");function _ct(t,e,r){return Cd(Yi(t,e),e,r)}s(_ct,"FromThis");function Sct(t,e,r){if(!Cn(r))return r;if(us(t.items))return[];let n=Math.min(r.length,t.items.length);for(let i=0;i<n;i++)r[i]=Cd(t.items[i],e,r[i]);return r.length>n?r.slice(0,n):r}s(Sct,"FromTuple");function Rct(t,e,r){for(let n of t.anyOf)if(xct(n)&&pi(n,e,r))return Cd(n,e,r);return r}s(Rct,"FromUnion");function Cd(t,e,r){let n=Ui(t.$id)?Rl(t,e):e,i=t;switch(i[Ze]){case"Array":return vct(i,n,r);case"Import":return bct(i,n,r);case"Intersect":return Ect(i,n,r);case"Object":return Ict(i,n,r);case"Record":return Tct(i,n,r);case"Ref":return wct(i,n,r);case"This":return _ct(i,n,r);case"Tuple":return Sct(i,n,r);case"Union":return Rct(i,n,r);default:return r}}s(Cd,"Visit");function UM(...t){return t.length===3?Cd(t[0],t[1],t[2]):Cd(t[0],[],t[1])}s(UM,"Clean");f();function qM(t){return Ui(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(qM,"IsStringNumeric");function kct(t){return lc(t)||ng(t)||Wr(t)}s(kct,"IsValueToString");function o8(t){return t===!0||Wr(t)&&t===1||lc(t)&&t===BigInt("1")||Ui(t)&&(t.toLowerCase()==="true"||t==="1")}s(o8,"IsValueTrue");function s8(t){return t===!1||Wr(t)&&(t===0||Object.is(t,-0))||lc(t)&&t===BigInt("0")||Ui(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(s8,"IsValueFalse");function Bct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Bct,"IsTimeStringWithTimeZone");function Dct(t){return Ui(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Dct,"IsTimeStringWithoutTimeZone");function Pct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Pct,"IsDateTimeStringWithTimeZone");function Nct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(Nct,"IsDateTimeStringWithoutTimeZone");function Lct(t){return Ui(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(Lct,"IsDateString");function Fct(t,e){let r=T2e(t);return r===e?r:t}s(Fct,"TryConvertLiteralString");function Mct(t,e){let r=w2e(t);return r===e?r:t}s(Mct,"TryConvertLiteralNumber");function Qct(t,e){let r=I2e(t);return r===e?r:t}s(Qct,"TryConvertLiteralBoolean");function Oct(t,e){return Ui(t.const)?Fct(e,t.const):Wr(t.const)?Mct(e,t.const):ng(t.const)?Qct(e,t.const):e}s(Oct,"TryConvertLiteral");function I2e(t){return o8(t)?!0:s8(t)?!1:t}s(I2e,"TryConvertBoolean");function Uct(t){let e=s(r=>r.split(".")[0],"truncateInteger");return qM(t)?BigInt(e(t)):Wr(t)?BigInt(Math.trunc(t)):s8(t)?BigInt(0):o8(t)?BigInt(1):t}s(Uct,"TryConvertBigInt");function T2e(t){return y1(t)&&t.description!==void 0?t.description.toString():kct(t)?t.toString():t}s(T2e,"TryConvertString");function w2e(t){return qM(t)?parseFloat(t):o8(t)?1:s8(t)?0:t}s(w2e,"TryConvertNumber");function qct(t){return qM(t)?parseInt(t):Wr(t)?Math.trunc(t):o8(t)?1:s8(t)?0:t}s(qct,"TryConvertInteger");function Wct(t){return Ui(t)&&t.toLowerCase()==="null"?null:t}s(Wct,"TryConvertNull");function Gct(t){return Ui(t)&&t==="undefined"?void 0:t}s(Gct,"TryConvertUndefined");function Hct(t){return xu(t)?t:Wr(t)?new Date(t):o8(t)?new Date(1):s8(t)?new Date(0):qM(t)?new Date(parseInt(t)):Dct(t)?new Date(`1970-01-01T${t}.000Z`):Bct(t)?new Date(`1970-01-01T${t}`):Nct(t)?new Date(`${t}.000Z`):Pct(t)?new Date(t):Lct(t)?new Date(`${t}T00:00:00.000Z`):t}s(Hct,"TryConvertDate");function jct(t,e,r){return(Cn(r)?r:[r]).map(i=>xm(t.items,e,i))}s(jct,"FromArray");function Vct(t,e,r){return Uct(r)}s(Vct,"FromBigInt");function $ct(t,e,r){return I2e(r)}s($ct,"FromBoolean");function zct(t,e,r){return Hct(r)}s(zct,"FromDate");function Yct(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return xm(i,[...e,...n],r)}s(Yct,"FromImport");function Kct(t,e,r){return qct(r)}s(Kct,"FromInteger");function Jct(t,e,r){return t.allOf.reduce((n,i)=>xm(i,e,n),r)}s(Jct,"FromIntersect");function Xct(t,e,r){return Oct(t,r)}s(Xct,"FromLiteral");function Zct(t,e,r){return Wct(r)}s(Zct,"FromNull");function eut(t,e,r){return w2e(r)}s(eut,"FromNumber");function tut(t,e,r){if(!ui(r))return r;for(let n of Object.getOwnPropertyNames(t.properties))yn(r,n)&&(r[n]=xm(t.properties[n],e,r[n]));return r}s(tut,"FromObject");function rut(t,e,r){if(!ui(r))return r;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(r))r[a]=xm(o,e,l);return r}s(rut,"FromRecord");function nut(t,e,r){return xm(Yi(t,e),e,r)}s(nut,"FromRef");function iut(t,e,r){return T2e(r)}s(iut,"FromString");function sut(t,e,r){return Ui(r)||Wr(r)?Symbol(r):r}s(sut,"FromSymbol");function aut(t,e,r){return xm(Yi(t,e),e,r)}s(aut,"FromThis");function lut(t,e,r){return Cn(r)&&!us(t.items)?r.map((i,o)=>o<t.items.length?xm(t.items[o],e,i):i):r}s(lut,"FromTuple");function cut(t,e,r){return Gct(r)}s(cut,"FromUndefined");function uut(t,e,r){for(let n of t.anyOf){let i=xm(n,e,Ji(r));if(pi(n,e,i))return i}return r}s(uut,"FromUnion");function xm(t,e,r){let n=Rl(t,e),i=t;switch(t[Ze]){case"Array":return jct(i,n,r);case"BigInt":return Vct(i,n,r);case"Boolean":return $ct(i,n,r);case"Date":return zct(i,n,r);case"Import":return Yct(i,n,r);case"Integer":return Kct(i,n,r);case"Intersect":return Jct(i,n,r);case"Literal":return Xct(i,n,r);case"Null":return Zct(i,n,r);case"Number":return eut(i,n,r);case"Object":return tut(i,n,r);case"Record":return rut(i,n,r);case"Ref":return nut(i,n,r);case"String":return iut(i,n,r);case"Symbol":return sut(i,n,r);case"This":return aut(i,n,r);case"Tuple":return lut(i,n,r);case"Undefined":return cut(i,n,r);case"Union":return uut(i,n,r);default:return r}}s(xm,"Visit");function WM(...t){return t.length===3?xm(t[0],t[1],t[2]):xm(t[0],[],t[1])}s(WM,"Convert");f();function _2e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!pi(e,r,n))throw new oS(e,n,lg(e,r,n).First());return _1(e,r)?sS(e,r,n):n}s(_2e,"Decode");f();function B1(t,e){let r=yn(t,"default")?t.default:void 0,n=Ix(r)?r():Ji(r);return us(e)?n:ui(e)&&ui(n)?Object.assign(n,e):e}s(B1,"ValueOrDefault");function kte(t){return wx(t)&&"default"in t}s(kte,"HasDefaultProperty");function dut(t,e,r){if(Cn(r)){for(let i=0;i<r.length;i++)r[i]=_u(t.items,e,r[i]);return r}let n=B1(t,r);if(!Cn(n))return n;for(let i=0;i<n.length;i++)n[i]=_u(t.items,e,n[i]);return n}s(dut,"FromArray");function fut(t,e,r){return xu(r)?r:B1(t,r)}s(fut,"FromDate");function put(t,e,r){let n=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return _u(i,[...e,...n],r)}s(put,"FromImport");function mut(t,e,r){let n=B1(t,r);return t.allOf.reduce((i,o)=>{let a=_u(o,e,n);return ui(a)?{...i,...a}:a},{})}s(mut,"FromIntersect");function hut(t,e,r){let n=B1(t,r);if(!ui(n))return n;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=_u(t.properties[o],e,n[o]);us(a)||(n[o]=_u(t.properties[o],e,n[o]))}if(!kte(t.additionalProperties))return n;for(let o of Object.getOwnPropertyNames(n))i.includes(o)||(n[o]=_u(t.additionalProperties,e,n[o]));return n}s(hut,"FromObject");function gut(t,e,r){let n=B1(t,r);if(!ui(n))return n;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(n))l.test(c)&&kte(a)&&(n[c]=_u(a,e,n[c]));if(!kte(i))return n;for(let c of Object.getOwnPropertyNames(n))l.test(c)||(n[c]=_u(i,e,n[c]));return n}s(gut,"FromRecord");function Aut(t,e,r){return _u(Yi(t,e),e,B1(t,r))}s(Aut,"FromRef");function yut(t,e,r){return _u(Yi(t,e),e,r)}s(yut,"FromThis");function Cut(t,e,r){let n=B1(t,r);if(!Cn(n)||us(t.items))return n;let[i,o]=[t.items,Math.max(t.items.length,n.length)];for(let a=0;a<o;a++)a<i.length&&(n[a]=_u(i[a],e,n[a]));return n}s(Cut,"FromTuple");function xut(t,e,r){let n=B1(t,r);for(let i of t.anyOf){let o=_u(i,e,Ji(n));if(pi(i,e,o))return o}return n}s(xut,"FromUnion");function _u(t,e,r){let n=Rl(t,e),i=t;switch(i[Ze]){case"Array":return dut(i,n,r);case"Date":return fut(i,n,r);case"Import":return put(i,n,r);case"Intersect":return mut(i,n,r);case"Object":return hut(i,n,r);case"Record":return gut(i,n,r);case"Ref":return Aut(i,n,r);case"This":return yut(i,n,r);case"Tuple":return Cut(i,n,r);case"Union":return xut(i,n,r);default:return B1(i,r)}}s(_u,"Visit");function GM(...t){return t.length===3?_u(t[0],t[1],t[2]):_u(t[0],[],t[1])}s(GM,"Default");f();f();var vm={};f1(vm,{Delete:()=>but,Format:()=>a8,Get:()=>Iut,Has:()=>Eut,Set:()=>vut,ValuePointerRootDeleteError:()=>jM,ValuePointerRootSetError:()=>HM});f();var HM=class extends xn{static{s(this,"ValuePointerRootSetError")}constructor(e,r,n){super("Cannot set root value"),this.value=e,this.path=r,this.update=n}},jM=class extends xn{static{s(this,"ValuePointerRootDeleteError")}constructor(e,r){super("Cannot delete root value"),this.value=e,this.path=r}};function S2e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(S2e,"Escape");function*a8(t){if(t==="")return;let[e,r]=[0,0];for(let n=0;n<t.length;n++)t.charAt(n)==="/"?(n===0||(r=n,yield S2e(t.slice(e,r))),e=n+1):r=n;yield S2e(t.slice(e))}s(a8,"Format");function vut(t,e,r){if(e==="")throw new HM(t,e,r);let[n,i,o]=[null,t,""];for(let a of a8(e))i[a]===void 0&&(i[a]={}),n=i,i=i[a],o=a;n[o]=r}s(vut,"Set");function but(t,e){if(e==="")throw new jM(t,e);let[r,n,i]=[null,t,""];for(let o of a8(e)){if(n[o]===void 0||n[o]===null)return;r=n,n=n[o],i=o}if(Array.isArray(r)){let o=parseInt(i);r.splice(o,1)}else delete r[i]}s(but,"Delete");function Eut(t,e){if(e==="")return!0;let[r,n,i]=[null,t,""];for(let o of a8(e)){if(n[o]===void 0)return!1;r=n,n=n[o],i=o}return Object.getOwnPropertyNames(r).includes(i)}s(Eut,"Has");function Iut(t,e){if(e==="")return t;let r=t;for(let n of a8(e)){if(r[n]===void 0)return;r=r[n]}return r}s(Iut,"Get");f();function Tut(t,e){if(!ui(e))return!1;let r=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],n=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return r.length!==n.length?!1:r.every(i=>_I(t[i],e[i]))}s(Tut,"ObjectType");function wut(t,e){return xu(e)&&t.getTime()===e.getTime()}s(wut,"DateType");function _ut(t,e){return!Cn(e)||t.length!==e.length?!1:t.every((r,n)=>_I(r,e[n]))}s(_ut,"ArrayType");function Sut(t,e){return!wf(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((r,n)=>_I(r,e[n]))}s(Sut,"TypedArrayType");function Rut(t,e){return t===e}s(Rut,"ValueType");function _I(t,e){if(xu(t))return wut(t,e);if(wf(t))return Sut(t,e);if(Cn(t))return _ut(t,e);if(ui(t))return Tut(t,e);if(o0(t))return Rut(t,e);throw new Error("ValueEquals: Unable to compare value")}s(_I,"Equal");var kut=ao({type:Ni("insert"),path:bu(),value:dm()}),But=ao({type:Ni("update"),path:bu(),value:dm()}),Dut=ao({type:Ni("delete"),path:bu()}),k2e=so([kut,But,Dut]),VM=class extends xn{static{s(this,"ValueDiffError")}constructor(e,r){super(r),this.value=e}};function $M(t,e){return{type:"update",path:t,value:e}}s($M,"CreateUpdate");function B2e(t,e){return{type:"insert",path:t,value:e}}s(B2e,"CreateInsert");function D2e(t){return{type:"delete",path:t}}s(D2e,"CreateDelete");function R2e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new VM(t,"Cannot diff objects with symbols")}s(R2e,"AssertDiffable");function*Put(t,e,r){if(R2e(e),R2e(r),!PX(r))return yield $M(t,r);let n=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(r);for(let o of i)yn(e,o)||(yield B2e(`${t}/${o}`,r[o]));for(let o of n)yn(r,o)&&(_I(e,r)||(yield*zM(`${t}/${o}`,e[o],r[o])));for(let o of n)yn(r,o)||(yield D2e(`${t}/${o}`))}s(Put,"ObjectType");function*Nut(t,e,r){if(!Cn(r))return yield $M(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*zM(`${t}/${n}`,e[n],r[n]);for(let n=0;n<r.length;n++)n<e.length||(yield B2e(`${t}/${n}`,r[n]));for(let n=e.length-1;n>=0;n--)n<r.length||(yield D2e(`${t}/${n}`))}s(Nut,"ArrayType");function*Lut(t,e,r){if(!wf(r)||e.length!==r.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(r).constructor.name)return yield $M(t,r);for(let n=0;n<Math.min(e.length,r.length);n++)yield*zM(`${t}/${n}`,e[n],r[n])}s(Lut,"TypedArrayType");function*Fut(t,e,r){e!==r&&(yield $M(t,r))}s(Fut,"ValueType");function*zM(t,e,r){if(PX(e))return yield*Put(t,e,r);if(Cn(e))return yield*Nut(t,e,r);if(wf(e))return yield*Lut(t,e,r);if(o0(e))return yield*Fut(t,e,r);throw new VM(e,"Unable to diff value")}s(zM,"Visit");function P2e(t,e){return[...zM("",t,e)]}s(P2e,"Diff");function Mut(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(Mut,"IsRootUpdate");function Qut(t){return t.length===0}s(Qut,"IsIdentity");function N2e(t,e){if(Mut(e))return Ji(e[0].value);if(Qut(e))return Ji(t);let r=Ji(t);for(let n of e)switch(n.type){case"insert":{vm.Set(r,n.path,n.value);break}case"update":{vm.Set(r,n.path,n.value);break}case"delete":{vm.Delete(r,n.path);break}}return r}s(N2e,"Patch");f();function L2e(...t){let[e,r,n]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=_1(e,r)?lS(e,r,n):n;if(!pi(e,r,i))throw new aS(e,i,lg(e,r,i).First());return i}s(L2e,"Encode");f();function YM(t){return ui(t)&&!Cn(t)}s(YM,"IsStandardObject");var KM=class extends xn{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function Out(t,e,r,n){if(!YM(r))vm.Set(t,e,Ji(n));else{let i=Object.getOwnPropertyNames(r),o=Object.getOwnPropertyNames(n);for(let a of i)o.includes(a)||delete r[a];for(let a of o)i.includes(a)||(r[a]=null);for(let a of o)Bte(t,`${e}/${a}`,r[a],n[a])}}s(Out,"ObjectType");function Uut(t,e,r,n){if(!Cn(r))vm.Set(t,e,Ji(n));else{for(let i=0;i<n.length;i++)Bte(t,`${e}/${i}`,r[i],n[i]);r.splice(n.length)}}s(Uut,"ArrayType");function qut(t,e,r,n){if(wf(r)&&r.length===n.length)for(let i=0;i<r.length;i++)r[i]=n[i];else vm.Set(t,e,Ji(n))}s(qut,"TypedArrayType");function Wut(t,e,r,n){r!==n&&vm.Set(t,e,n)}s(Wut,"ValueType");function Bte(t,e,r,n){if(Cn(n))return Uut(t,e,r,n);if(wf(n))return qut(t,e,r,n);if(YM(n))return Out(t,e,r,n);if(o0(n))return Wut(t,e,r,n)}s(Bte,"Visit");function F2e(t){return wf(t)||o0(t)}s(F2e,"IsNonMutableValue");function Gut(t,e){return YM(t)&&Cn(e)||Cn(t)&&YM(e)}s(Gut,"IsMismatchedValue");function M2e(t,e){if(F2e(t)||F2e(e))throw new KM("Only object and array types can be mutated at the root level");if(Gut(t,e))throw new KM("Cannot assign due type mismatch of assignable values");Bte(t,"",t,e)}s(M2e,"Mutate");f();var JM=class extends xn{static{s(this,"ParseError")}constructor(e){super(e)}},Dte;(function(t){let e=new Map([["Assert",(o,a,l)=>(QM(o,a,l),l)],["Cast",(o,a,l)=>i8(o,a,l)],["Clean",(o,a,l)=>UM(o,a,l)],["Clone",(o,a,l)=>Ji(l)],["Convert",(o,a,l)=>WM(o,a,l)],["Decode",(o,a,l)=>_1(o,a)?sS(o,a,l):l],["Default",(o,a,l)=>GM(o,a,l)],["Encode",(o,a,l)=>_1(o,a)?lS(o,a,l):l]]);function r(o){e.delete(o)}s(r,"Delete"),t.Delete=r;function n(o,a){e.set(o,a)}s(n,"Set"),t.Set=n;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(Dte||(Dte={}));var Q2e=["Clone","Clean","Default","Convert","Assert","Decode"];function Hut(t,e,r,n){return t.reduce((i,o)=>{let a=Dte.Get(o);if(us(a))throw new JM(`Unable to find Parse operation '${o}'`);return a(e,r,i)},n)}s(Hut,"ParseValue");function O2e(...t){let[e,r,n,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?Cn(t[0])?[t[0],t[1],[],t[2]]:[Q2e,t[0],t[1],t[2]]:t.length===2?[Q2e,t[0],[],t[1]]:(()=>{throw new JM("Invalid Arguments")})();return Hut(e,r,n,i)}s(O2e,"Parse");f();var zx={};f1(zx,{Assert:()=>QM,Cast:()=>i8,Check:()=>pi,Clean:()=>UM,Clone:()=>Ji,Convert:()=>WM,Create:()=>Uf,Decode:()=>_2e,Default:()=>GM,Diff:()=>P2e,Edit:()=>k2e,Encode:()=>L2e,Equal:()=>_I,Errors:()=>lg,Hash:()=>Dx,Mutate:()=>M2e,Parse:()=>O2e,Patch:()=>N2e,ValueErrorIterator:()=>Px});f();var jut={capabilities:{family:"gpt-3.5-turbo",object:"model_capabilities",supports:{streaming:!0},tokenizer:"cl100k_base",type:"completion"},id:"copilot-codex",model_picker_enabled:!0,name:"GPT-3.5 Turbo",object:"model",preview:!1,version:"copilot-codex"},Vut="gpt-4o-copilot",qf=class t{constructor(e,r=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;r&&ia(this._ctx,n=>this.refreshAvailableModels(n))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let r of this.onModelsFetchedCallbacks)r()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return Vut}parseModelsResponse(e){try{return zx.Parse(r2e,e)}catch(r){Mr.exception(this._ctx,r,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let r=await this.fetchModels(e);r&&(this.fetchedModelData=r)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",e.getTokenValue("fcv1")=="1"?Promise.resolve([jut]):await this.fetch()}async fetch(){let e=await wI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(Mr.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let n=this.getGenericCompletionModels().find(i=>i.modelId===e);return n?n.tokenizer:"o200k_base"}static filterCompletionModels(e,r){return e.filter(n=>n.capabilities.type==="completion").filter(n=>!r||n.preview===!1||n.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,r){return e.filter(n=>!r||n.preview===!1||n.preview===void 0)}static mapCompletionModels(e){return e.map(r=>({modelId:r.id,label:r.name,preview:!!r.preview,tokenizer:r.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let r=this.getDefaultModelId(),n=n2e(this._ctx);if(n){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(n)||(l.length>0&&Mr.error(this._ctx,`User selected model ${n} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),n=null),r===n&&(n=null)}let i=Xr(this._ctx,ft.DebugOverrideEngine)||Xr(this._ctx,ft.DebugOverrideEngineLegacy);if(i)return new Yx(i,"override");let o=e?this._ctx.get(Dt).customEngine(e):"",a=e?this._ctx.get(Dt).customEngineTargetEngine(e):void 0;return n?o&&a&&n===a?new Yx(o,"exp"):new Yx(n,"modelpicker"):o?new Yx(o,"exp"):this.customModels.length>0?new Yx(this.customModels[0],"custommodel"):new Yx(r,"default")}},Yx=class{constructor(e,r){this.modelId=e;this.modelChoiceSource=r}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Kx(t,e=void 0){let r=t.get(qf),n=r.getCurrentModelRequestInfo(e),i=r.getTokenizerForModel(n.modelId);return{headers:n.headers,modelId:n.modelId,engineChoiceSource:n.modelChoiceSource,tokenizer:i}}s(Kx,"getEngineRequestInfo");f();f();var lo=class{static{s(this,"FileSystem")}};var nTe=je(rTe());function iTe(t){return t!==void 0&&t!==0}s(iTe,"isRepoInfo");function oTe(t){if(t===void 0||t===0)return"";let e=D1(t);if(e==="github/github")return e;let r=ydt(t)?.toLowerCase();return r!==void 0?r:""}s(oTe,"getDogFood");function D1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(D1,"tryGetGitHubNWO");function ydt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(ydt,"tryGetADONWO");function Jx(t,e){let r=gd(e);return Cdt(t,r)}s(Jx,"extractRepoInfoInBackground");var Cdt=Edt(xdt,1e4);async function xdt(t,e){let r=dM(e);if(!r)return;let n=await vdt(t,r);if(!n)return;let i=t.get(lo),o=bo(n,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=bdt(a)??"",c=Fte(l),u={uri:n};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s(xdt,"extractRepoInfo");function Fte(t){let e;try{if(e=(0,nTe.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(Fte,"parseRepoUrl");async function vdt(t,e){let r=e+"_add_to_make_longer",n=t.get(lo);for(;e!=="file:///"&&e.length<r.length;){let i=bo(e,".git","config"),o=!1;try{await n.stat(i),o=!0}catch{o=!1}if(o)return e;r=e,e=gd(e)}}s(vdt,"getRepoBaseUri");function bdt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,r=/^\s*\[remote.([^"\s]+)/,n=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(r);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(n);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(bdt,"getRepoUrlFromConfigText");var Lte=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function Edt(t,e){let r=new Jr(e),n=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=r.get(a);if(l)return l.result;if(n.has(a))return 0;let c=t(i,...o);return n.add(a),c.then(u=>{r.set(a,new Lte(u)),n.delete(a)}),0}}s(Edt,"computeInBackgroundAndMemoize");f();f();f();f();var Idt={tokenizerName:"o200k_base"};function Tdt(t){return{...Idt,...t}}s(Tdt,"cursorContextOptions");function l8(t,e={}){let r=Tdt(e),n=Do(r.tokenizerName);if(r.maxLineCount!==void 0&&r.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(r.maxTokenLength!==void 0&&r.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(r.maxLineCount===0||r.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:r.tokenizerName};let i=t.source.slice(0,t.offset);return r.maxLineCount!==void 0&&(i=i.split(`
`).slice(-r.maxLineCount).join(`
`)),r.maxTokenLength!==void 0&&(i=n.takeLastLinesTokens(i,r.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:n.tokenLength(i),tokenizerName:r.tokenizerName}}s(l8,"getCursorContext");f();f();var wdt={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function sTe(t){let e=wdt[t.semantics],r=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${r} ${e} from ${t.relativePath}:`:`Compare ${r} ${e}:`,snippet:t.snippet}}s(sTe,"announceSnippet");var Mte=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,r){if(this.cache[e]=r,this.keys.length>this.size){this.keys.push(e);let n=this.keys.shift()??"";delete this.cache[n]}}get(e){return this.cache[e]}};var Qte=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=kdt.get(e.languageId)??Rdt}tokenize(e){return new Set(_dt(e).filter(r=>!this.stopsForLanguage.has(r)))}},aTe=new Mte(20),MS=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Qte(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,r="descending"){return r=="ascending"?e.sort((n,i)=>n.score>i.score?1:-1):r=="descending"?e.sort((n,i)=>n.score>i.score?-1:1):e}async retrieveAllSnippets(e,r="descending"){let n=[];if(e.source.length===0||(await this.referenceTokens).size===0)return n;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=aTe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(n.length&&d>0&&n[n.length-1].endLine>d){n[n.length-1].score<h&&(n[n.length-1].score=h,n[n.length-1].startLine=d,n[n.length-1].endLine=p);continue}n.push({score:h,startLine:d,endLine:p})}return l&&aTe.put(o,a),this.sortScoredSnippets(n,r)}findMatches(e,r){return this.findBestMatch(e,r)}async findBestMatch(e,r){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let n=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<r;a++)if(i[a].score!==0){let l=n.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function _dt(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(_dt,"splitIntoWords");var Sdt=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Rdt=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Sdt]),kdt=new Map([]);f();f();f();function Ote(t,e,r){return{type:"virtual",indentation:t,subs:e,label:r}}s(Ote,"virtualNode");function lTe(t,e,r,n,i){if(r==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:r,subs:n,label:i}}s(lTe,"lineNode");function Ute(t){return{type:"blank",lineNumber:t,subs:[]}}s(Ute,"blankNode");function XM(t){return{type:"top",indentation:-1,subs:t??[]}}s(XM,"topNode");function mc(t){return t.type==="blank"}s(mc,"isBlank");function RI(t){return t.type==="line"}s(RI,"isLine");function kI(t){return t.type==="virtual"}s(kI,"isVirtual");function cTe(t,e){return Hc(t,r=>{r.label=r.label?e(r.label)?void 0:r.label:void 0},"bottomUp"),t}s(cTe,"clearLabelsIf");function BI(t,e){switch(t.type){case"line":case"virtual":{let r=t.subs.map(n=>BI(n,e));return{...t,subs:r,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(r=>BI(r,e)),label:t.label?e(t.label):void 0}}}s(BI,"mapLabels");function Hc(t,e,r){function n(i){r==="topDown"&&e(i),i.subs.forEach(o=>{n(o)}),r==="bottomUp"&&e(i)}s(n,"_visit"),n(t)}s(Hc,"visitTree");function qte(t,e,r,n){let i=e;function o(a){i=r(a,i)}return s(o,"visitor"),Hc(t,o,n),i}s(qte,"foldTree");function ZM(t,e,r){let n=s(o=>{if(r!==void 0&&r(o))return o;{let a=o.subs.map(n).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=n(t);return i!==void 0?i:XM()}s(ZM,"rebuildTree");f();function Ddt(t){let e=t.split(`
`),r=e.map(u=>u.match(/^\s*/)[0].length),n=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,r[u]);return[lTe(r[u],u,n[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<n.length&&(n[h]===""||r[h]>d);)if(n[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(Ute(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<n.length&&n[c]==="";)a.push(Ute(c)),c+=1;if(c<n.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${n.length}`);return XM(a)}s(Ddt,"parseRaw");function c8(t,e){function r(n){if(RI(n)){let i=e.find(o=>o.matches(n.sourceLine));i&&(n.label=i.label)}}s(r,"visitor"),Hc(t,r,"bottomUp")}s(c8,"labelLines");function eQ(t){function e(r){if(kI(r)&&r.label===void 0){let n=r.subs.filter(i=>!mc(i));n.length===1&&(r.label=n[0].label)}}s(e,"visitor"),Hc(t,e,"bottomUp")}s(eQ,"labelVirtualInherited");function u8(t){return Object.keys(t).map(e=>{let r;return t[e].test?r=s(n=>t[e].test(n),"matches"):r=t[e],{matches:r,label:e}})}s(u8,"buildLabelRules");function Wte(t){let r=ZM(t,s(function(n){if(n.subs.length===0||n.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return n;let i=[],o;for(let a=0;a<n.subs.length;a++){let l=n.subs[a],c=n.subs[a-1];if(l.label==="opener"&&c!==void 0&&RI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(RI(l)||kI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&mc(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[Ote(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),mc(l)||(o=l)}return n.subs=i,n},"rebuilder"));return cTe(t,n=>n==="newVirtual"),r}s(Wte,"combineClosersAndOpeners");function uTe(t,e=mc,r){return ZM(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=Ote(l,a,r);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),mc(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(uTe,"groupBlocks");function DI(t){return ZM(t,s(function(r){return kI(r)&&r.label===void 0&&r.subs.length<=1?r.subs.length===0?void 0:r.subs[0]:(r.subs.length===1&&kI(r.subs[0])&&r.subs[0].label===void 0&&(r.subs=r.subs[0].subs),r)},"rebuilder"))}s(DI,"flattenVirtual");var Pdt={opener:/^[[({]/,closer:/^[\])}]/},Ndt=u8(Pdt),dTe={};function Gte(t,e){dTe[t]=e}s(Gte,"registerLanguageSpecificParser");function d8(t,e){let r=Ddt(t),n=dTe[e??""];return n?n(r):(c8(r,Ndt),Wte(r))}s(d8,"parseTree");function tQ(t,e){let r=[],n=e.length;if(n==0)return[];if(n<t)return[[0,n]];for(let i=0;i<n-t+1;i++)r.push([i,i+t]);return r}s(tQ,"getBasicWindowDelineations");var rQ=class t extends MS{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return tQ(this.windowLength,e)}_getCursorContextInfo(e){return l8(e,{maxLineCount:this.windowLength})}similarityScore(e,r){return Ldt(e,r)}};function Ldt(t,e){let r=new Set;return t.forEach(n=>{e.has(n)&&r.add(n)}),r.size/(t.size+e.size-r.size)}s(Ldt,"computeScore");f();f();var nQ=je(fTe());var jte={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function y0(t){return t in jte&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(y0,"isSupportedLanguageId");function iQ(t){if(!(t in jte))throw new Error(`Unrecognized language: ${t}`);return jte[t]}s(iQ,"languageIdToWasmLanguage");var Hte=new Map;async function Fdt(t){let e;try{e=await RM(`tree-sitter-${t}.wasm`)}catch(r){throw r instanceof Error&&"code"in r&&typeof r.code=="string"&&r.name==="Error"?new NS(`Could not load tree-sitter-${t}.wasm`,r):r}return nQ.default.Language.load(e)}s(Fdt,"loadWasmLanguage");function Mdt(t){let e=iQ(t);if(!Hte.has(e)){let r=Fdt(e);Hte.set(e,r)}return Hte.get(e)}s(Mdt,"getLanguage");var Vte=class extends Error{static{s(this,"WrappedError")}constructor(e,r){super(e,{cause:r})}};async function P1(t,e){await nQ.default.init({locateFile:s(o=>gte(o),"locateFile")});let r;try{r=new nQ.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Vte(`Could not init Parse for language <${t}>`,o):o}let n=await Mdt(t);r.setLanguage(n);let i=r.parse(e);return r.delete(),i}s(P1,"parseTreeSitter");function pTe(t){switch(iQ(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(pTe,"getBlockCloseToken");function Qdt(t,e){let r=[];for(let n of t){if(!n[1]){let i=e.tree.getLanguage();n[1]=i.query(n[0])}r.push(...n[1].matches(e))}return r}s(Qdt,"innerQuery");var Odt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function mTe(t){return Qdt([Odt],t).length==1}s(mTe,"queryPythonIsDocstring");var oQ=class t extends MS{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,r){super(e),this.windowLength=r}static{this.FACTORY=s(e=>({to:s(r=>new t(r,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return tQ(this.windowLength,e)}_getCursorContextInfo(e){return l8(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,r=this.referenceDoc.offset,n=e?this.referenceDoc.source.slice(e,r):l8(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(n)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,r){return Udt(e,r)}async getEnclosingMemberStart(e,r){let n;try{n=await P1(this.referenceDoc.languageId,e);let i=n.rootNode.namedDescendantForIndex(r);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{n?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function Udt(t,e){let r=new Set;return e.forEach(n=>{t.has(n)&&r.add(n)}),r.size}s(Udt,"computeScore");var qdt=0,Wdt=60,Gdt=4,Hdt=1,jdt=20,Vdt=1e4,f8={snippetLength:Wdt,threshold:qdt,maxTopSnippets:Gdt,maxCharPerFile:Vdt,maxNumberOfFiles:jdt,maxSnippetsPerFile:Hdt,useSubsetMatching:!1};var sQ={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function $dt(t,e){return(e.useSubsetMatching?oQ.FACTORY(e.snippetLength):rQ.FACTORY(e.snippetLength)).to(t)}s($dt,"getMatcher");async function hTe(t,e,r){let n=$dt(t,r);return r.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<r.maxCharPerFile&&o.source.length>0).slice(0,r.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await n.findMatches(a,r.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>r.threshold).sort((o,a)=>o.score-a.score).slice(-r.maxTopSnippets)}s(hTe,"getSimilarSnippets");var p8=500,m8=8192-p8,gTe=4;var aQ=10,lQ=15;var zdt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function h8(t){return t=t.toLowerCase(),zdt[t]??t}s(h8,"normalizeLanguageId");var $te=class{constructor(e){this.ctx=e;this.cache=new Jr(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,r){let n=e.stringify()+`
`+JSON.stringify(r),i=this.cache.get(n);return i||(i=new zte(()=>this.ctx.get(ym).fetchExperiments(this.ctx,r,e.toHeaders()),1e3*60*60),this.cache.set(n,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},zte=class{constructor(e,r=1/0){this.producer=e;this.expirationMs=r}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function Kdt(t){return"uri"in t}s(Kdt,"isCompletionsFiltersInfo");var Dt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new $te(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,r){this.dynamicFilters[e]=r}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let r of this.dynamicFilterGroups)Object.assign(e,r());for(let[r,n]of Object.entries(this.dynamicFilters))e[r]=n();return e}registerUpcomingDynamicFilter(e,r){this.upcomingDynamicFilters[e]=r}async updateExPValuesAndAssignments(e,r=an.createAndMarkAsIssued(),n=void 0){if(r instanceof fg)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&Kdt(e)?Jx(this.ctx,e.uri):void 0,o=D1(i)??"",a=oTe(i)??"",l=e?.languageId??"",c=Kx(this.ctx).modelId;n??=await this.ctx.get(Qr).getToken();let u=BIe(n),d=n.getTokenValue("ft")??"",p=n.getTokenValue("ol")??"",m=n.getTokenValue("cml")??"",h=n.getTokenValue("tid")??"",g=n.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),B=k.newFilterSettings,N=await this.getExpConfig(B,g),q=new Promise(te=>setTimeout(te,t.upcomingDynamicFilterCheckDelayMs));for(let te of k.otherFilterSettingsToPrefetch)q=q.then(async()=>{await new Promise(me=>setTimeout(me,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(te,g)});return this.prepareForUpcomingFilters(B,g),new fg(r.properties,r.measurements,r.issuedTime,{filters:B,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Bs).machineId;this.granularityDirectory=new EM(e,this.ctx.get(mg))}return this.granularityDirectory}makeFilterSettings(e){return new nI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,r){try{return this.assignments.fetchExpConfig(e,r)}catch(n){return bf.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(n)}`)}}async prepareForUpcomingFilters(e,r){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[n,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(n,i()),r)}stringify(){let e=this.assignments.getCachedExpConfig(new nI({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),r=fM(this.ctx),n=await this.getExpConfig(e,r);return{filters:e,exp:n}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??lQ}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??aQ}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let r=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return r?r.split(",").map(n=>n.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??m8+p8}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}ideEnableCopilotNewBilling(e){return e.filtersAndExp.exp.variables.ideenablecopilotnewbilling??!1}recentEditsInPrompt(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinprompt??!1}recentEditsEditCount(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditcount??5}recentEditsMaxFiles(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxfiles??5}recentEditsContextLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditscontextlines??3}recentEditsEditMergeLineDistance(e){return e.filtersAndExp.exp.variables.copilotrecenteditseditmergelinedistance??3}recentEditsRemoveDeletedLines(e){return e.filtersAndExp.exp.variables.copilotrecenteditsremovedeletedlines??!1}recentEditsInsertionsBeforeDeletions(e){return e.filtersAndExp.exp.variables.copilotrecenteditsinsertionsbeforedeletions??!1}recentEditsAppendNoReplyMarker(e){return e.filtersAndExp.exp.variables.copilotrecenteditsappendnoreplymarker??!1}recentEditsMaxLinesBetweenEdits(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesbetweenedits??100}recentEditsActiveDocDistanceLimitFromCursor(e){return e.filtersAndExp.exp.variables.copilotrecenteditsactivedocdistancelimitfromcursor??100}recentEditsMaxLinesPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxlinesperedit??10}recentEditsMaxCharsPerEdit(e){return e.filtersAndExp.exp.variables.copilotrecenteditsmaxcharsperedit??2e3}recentEditsSummarizationFormat(e){return e.filtersAndExp.exp.variables.copilotrecenteditsummarizationformat??"diff"}recentEditsDebounceTimeout(e){return e.filtersAndExp.exp.variables.copilotrecenteditsdebouncetimeout??500}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}triggerCompletionAfterAccept(e){return e.filtersAndExp.exp.variables.copilottriggercompletionafteraccept}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}vscodeDebounceThreshold(e){return e.filtersAndExp.exp.variables.copilotvscodedebouncethreshold}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??100}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}enableMultilineAfterAccept(e){return e.filtersAndExp.exp.variables.copilotmultilineafteraccept??!1}completionsElisionStrategy(e){switch(e.filtersAndExp.exp.variables.copilotcompletionselisionstrategy??""){case"elidableText":return"elidableText";case"elidableTextWithoutChunks":return"elidableTextWithoutChunks";default:return"wishlist"}}approximateElision(e){return e.filtersAndExp.exp.variables.copilotapproximateelision??!1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}};f();var Ag=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let r;return this.children.find(n=>(r=n.statementAt(e),r!==void 0)),r??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",r=""){let n=[`${e}${this.description}`];return this.children.forEach(i=>{n.push(i.dump(`${r}+- `,i.nextSibling===void 0?`${r}   `:`${r}|  `))}),n.join(`
`)}dumpPath(e="",r="",n=!1){if(this.parent){let i=this.parent.dumpPath(e,r,!0),o=i.length-i.lastIndexOf(`
`)-1-r.length,a=" ".repeat(o),l=n?`
${r}${a}+- `:"";return i+this.description+l}else{let i=n?`
${r}+- `:"";return e+this.description+i}}},jc=class{constructor(e,r,n,i){this.languageId=e;this.text=r;this.startOffset=n;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return g8.languageIds.has(e)||A8.languageIds.has(e)||y8.languageIds.has(e)||C8.languageIds.has(e)||x8.languageIds.has(e)||v8.languageIds.has(e)||b8.languageIds.has(e)||E8.languageIds.has(e)}static create(e,r,n,i){if(g8.languageIds.has(e))return new g8(e,r,n,i);if(A8.languageIds.has(e))return new A8(e,r,n,i);if(y8.languageIds.has(e))return new y8(e,r,n,i);if(v8.languageIds.has(e))return new v8(e,r,n,i);if(C8.languageIds.has(e))return new C8(e,r,n,i);if(x8.languageIds.has(e))return new x8(e,r,n,i);if(b8.languageIds.has(e))return new b8(e,r,n,i);if(E8.languageIds.has(e))return new E8(e,r,n,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let r;return this.statements.find(n=>(r=n.statementAt(e),r!==void 0)),r}async build(){let e=[];this.clear();let r=await this.parse();this.getStatementQuery(r).captures(r.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await P1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,r){return e.query(r)}offsetToPosition(e){let r=this.text.slice(0,e).split(`
`),n=r.length-1,i=r[r.length-1].length;return{row:n,column:i}}dump(e=""){let r=[];return this.statements.forEach((n,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);r.push(n.dump(`${e} ${o} `,`${e} ${a} `))}),r.join(`
`)}},Yte=class t extends Ag{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},g8=class extends jc{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Yte(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Kte=class t extends Ag{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},A8=class extends jc{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Kte(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Jte=class t extends Ag{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},y8=class extends jc{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Jte(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Xte=class t extends Ag{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},C8=class extends jc{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Xte(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Zte=class t extends Ag{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},x8=class extends jc{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Zte(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},ere=class t extends Ag{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},v8=class extends jc{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new ere(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},tre=class t extends Ag{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},b8=class extends jc{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new tre(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},rre=class t extends Ag{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},E8=class extends jc{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new rre(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};var nre={};f1(nre,{activationEvents:()=>g0t,badges:()=>h0t,browser:()=>A0t,bugs:()=>a0t,build:()=>t0t,buildType:()=>r0t,categories:()=>p0t,contributes:()=>ire,default:()=>I0t,dependencies:()=>b0t,description:()=>Zdt,devDependencies:()=>v0t,displayName:()=>Xdt,enabledApiProposals:()=>C0t,engines:()=>f0t,extensionPack:()=>d0t,homepage:()=>o0t,icon:()=>c0t,keywords:()=>m0t,license:()=>s0t,main:()=>y0t,name:()=>Jdt,overrides:()=>E0t,preview:()=>i0t,pricing:()=>u0t,publisher:()=>n0t,qna:()=>l0t,scripts:()=>x0t,version:()=>e0t});var Jdt="copilot",Xdt="GitHub Copilot",Zdt="Your AI pair programmer",e0t="1.335.0",t0t="1624",r0t="prod",n0t="GitHub",i0t=!1,o0t="https://github.com/features/copilot?editor=vscode",s0t="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",a0t={url:"https://github.com/microsoft/vscode-copilot-release/issues"},l0t="https://github.com/github-community/community/discussions/categories/copilot",c0t="assets/Copilot-App-Icon.png",u0t="Trial",d0t=["GitHub.copilot-chat","GitHub.copilot"],f0t={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},p0t=["AI","Chat","Programming Languages","Machine Learning"],m0t=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],h0t=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],g0t=["onStartupFinished"],A0t="./dist/web",y0t="./dist/extension",C0t=["inlineCompletionsAdditions"],ire={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completion Model"__ command or open the model picker from the Copilot menu. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers)"},"github.copilot.inlineSuggest.enable":{type:"boolean",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Show inline suggestions"},"github.copilot.editor.enableAutoCompletions":{type:"boolean",scope:"language-overridable",default:!0,deprecationMessage:"This setting has no effect. Please use github.copilot.enable instead.",description:"Automatically show inline completions"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},x0t={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},v0t={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},b0t={"@adobe/helix-fetch":"github:devm33/helix-fetch#1088e599270f36632703f138d88c2100cbe468db","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},E0t={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},I0t={name:Jdt,displayName:Xdt,description:Zdt,version:e0t,build:t0t,buildType:r0t,publisher:n0t,preview:i0t,homepage:o0t,license:s0t,bugs:a0t,qna:l0t,icon:c0t,pricing:u0t,extensionPack:d0t,engines:f0t,categories:p0t,keywords:m0t,badges:h0t,activationEvents:g0t,browser:A0t,main:y0t,enabledApiProposals:C0t,contributes:ire,scripts:x0t,devDependencies:v0t,dependencies:b0t,overrides:E0t};var ft={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",UseAsyncCompletions:"internal.useAsyncCompletions",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",VSCodeDebounceThreshold:"internal.vscodeDebounceThreshold",RecentEditsInPrompt:"internal.recentEditsInPrompt",RecentEditsEditCount:"internal.recentEditsEditCount",RecentEditsMaxFiles:"internal.recentEditsMaxFiles",RecentEditsContextLines:"internal.recentEditsContextLines",RecentEditsEditMergeLineDistance:"internal.recentEditsEditMergeLineDistance",RecentEditsRemoveDeletedLines:"internal.recentEditsRemoveDeletedLines",InsertionsBeforeDeletions:"internal.recentEditsInsertionsBeforeDeletions",RecentEditsAppendNoReplyMarker:"internal.recentEditsAppendNoReplyMarker",RecentEditsMaxLinesBetweenEdits:"internal.recentEditsMaxLinesBetweenEdits",RecentEditsActiveDocDistanceLimitFromCursor:"internal.recentEditsActiveDocDistanceLimitFromCursor",RecentEditsSummarizationFormat:"internal.recentEditsSummarizationFormat",RecentEditsMaxLinesPerEdit:"internal.recentEditsMaxLinesPerEdit",RecentEditsMaxCharsPerEdit:"internal.recentEditsMaxCharsPerEdit",RecentEditsDebounceTimeout:"internal.recentEditsDebounceTimeout",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",MultilineAfterAccept:"internal.multilineAfterAccept",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt"};function CTe(t){return["server","parsingandserver"].includes(t)}s(CTe,"shouldDoServerTrimming");var bm=class{static{s(this,"BlockModeConfig")}},OS=class extends bm{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,r,n){let i=e.get(Dt).overrideBlockMode(n);if(i)return ATe(i,r);let o=e.get(Dt).enableProgressiveReveal(n);return Xr(e,ft.AlwaysRequestMultiline)??o?ATe("moremultiline",r):r=="ruby"?"parsing":y0(r)?"parsingandserver":"server"}};function T0t(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(T0t,"blockModeRequiresTreeSitter");function ATe(t,e){return t==="moremultiline"&&jc.isSupported(e)?t:T0t(t)&&!y0(e)?"server":t}s(ATe,"toApplicableBlockMode");var yg=class{static{s(this,"ConfigProvider")}},US=class extends yg{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return _0t(e)}getOptionalConfig(e){return S0t(e)}dumpForTelemetry(){return{}}},PI=class extends yg{constructor(r,n){super();this.baseConfigProvider=r;this.overrides=n}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(r){return this.overrides.get(r)}getConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getConfig(r)}getOptionalConfig(r){return this.getOptionalOverride(r)??this.baseConfigProvider.getOptionalConfig(r)}setConfig(r,n){n!==void 0?this.overrides.set(r,n):this.overrides.delete(r)}dumpForTelemetry(){let r=this.baseConfigProvider.dumpForTelemetry();for(let n of[ft.ShowEditorCompletions,ft.EnableAutoCompletions,ft.DelayCompletions,ft.FilterCompletions]){let i=this.overrides.get(n);i!==void 0&&(r[n]=JSON.stringify(i))}return r}};function w0t(t){return t?.type==="object"&&"properties"in t}s(w0t,"isContributesObject");function xTe(t,e){let r=t,n=[];for(let i of e.split(".")){let o=[...n,i].join(".");r&&typeof r=="object"&&o in r?(r=r[o],n.length=0):n.push(i)}if(!(r===void 0||n.length>0))return r}s(xTe,"getConfigKeyRecursively");function _0t(t){if(QS.has(t))return QS.get(t);throw new Error(`Missing config default value: ${hB}.${t}`)}s(_0t,"getConfigDefaultForKey");function S0t(t){return QS.get(t)}s(S0t,"getOptionalConfigDefaultForKey");var QS=new Map([[ft.DebugOverrideCppHeadersEnableSwitch,!1],[ft.RelatedFilesVSCodeCSharp,!1],[ft.RelatedFilesVSCodeTypeScript,!1],[ft.RelatedFilesVSCode,!1],[ft.IncludeNeighboringFiles,!1],[ft.ExcludeRelatedFiles,!1],[ft.ContextProviders,[]],[ft.DebugUseEditorFetcher,null],[ft.DebugUseElectronFetcher,null],[ft.DebugOverrideLogLevels,{}],[ft.DebugSnippyOverrideUrl,""],[ft.FetchStrategy,"auto"],[ft.UseSubsetMatching,null],[ft.ContextProviderTimeBudget,void 0],[ft.DebugOverrideCapiUrl,""],[ft.DebugTestOverrideCapiUrl,""],[ft.DebugOverrideProxyUrl,""],[ft.DebugTestOverrideProxyUrl,""],[ft.DebugOverrideEngine,""],[ft.UseAsyncCompletions,void 0],[ft.EnableSpeculativeRequests,void 0],[ft.AlwaysRequestMultiline,void 0],[ft.ModelAlwaysTerminatesSingleline,void 0],[ft.TrimCompletionsAggressively,void 0],[ft.VSCodeDebounceThreshold,void 0],[ft.RecentEditsInPrompt,void 0],[ft.RecentEditsEditCount,void 0],[ft.RecentEditsMaxFiles,void 0],[ft.RecentEditsContextLines,void 0],[ft.RecentEditsEditMergeLineDistance,void 0],[ft.RecentEditsRemoveDeletedLines,void 0],[ft.InsertionsBeforeDeletions,void 0],[ft.RecentEditsAppendNoReplyMarker,void 0],[ft.RecentEditsMaxLinesBetweenEdits,void 0],[ft.RecentEditsActiveDocDistanceLimitFromCursor,void 0],[ft.RecentEditsSummarizationFormat,void 0],[ft.RecentEditsMaxLinesPerEdit,void 0],[ft.RecentEditsMaxCharsPerEdit,void 0],[ft.RecentEditsDebounceTimeout,void 0],[ft.MultilineAfterAccept,void 0],[ft.NESXTab,void 0],[ft.UseWorkspaceContextCoordinator,void 0],[ft.CompletionsDelay,void 0],[ft.UseSplitContextPrompt,void 0],[ft.ShowEditorCompletions,void 0],[ft.DelayCompletions,void 0],[ft.FilterCompletions,void 0]]);for(let t of Object.values(ft)){let e=ire.configuration[0],r=[],n=`${hB}.${t}`.split(".");for(;n.length>0;){r.push(n.shift());let i=e.properties[r.join(".")];if(w0t(i))r.length=0,e=i;else if(n.length==0&&i?.default!==void 0){if(QS.has(t))throw new Error(`Duplicate config default value ${hB}.${t}`);QS.set(t,i.default)}}if(!QS.has(t))throw new Error(`Missing config default value ${hB}.${t}`)}function Xr(t,e){return t.get(yg).getConfig(e)}s(Xr,"getConfig");function cIe(t){return t.get(yg).dumpForTelemetry()}s(cIe,"dumpForTelemetry");var po=class{constructor(){this.packageJson=nre}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function pM(t){return t.get(po).isProduction()}s(pM,"isProduction");function KIe(t){return t.get(po).getBuildType()==="dev"}s(KIe,"isDevBuild");function Ff(t){return t.get(po).getBuildType()}s(Ff,"getBuildType");function uIe(t){return t.get(po).getBuild()}s(uIe,"getBuild");function vI(t){return t.get(po).getVersion()}s(vI,"getVersion");var Bs=class{constructor(e,r,n="none",i="desktop"){this.sessionId=e;this.machineId=r;this.remoteName=n;this.uiKind=i}static{s(this,"EditorSession")}};function tg({name:t,version:e}){return`${t}/${e}`}s(tg,"formatNameAndVersion");var fn=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},If="2025-05-01";function n0(t){let e=t.get(fn);return{"Editor-Version":tg(e.getEditorInfo()),"Editor-Plugin-Version":tg(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":vI(t)}}s(n0,"editorVersionHeaders");var yTe="Iv1.b507a08c87ecfe98",_a=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??yTe}fallbackAppId(){return yTe}};f();f();f();var NI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var vTe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],bTe={".php":[".blade"]},I8=Object.keys(NI).flatMap(t=>NI[t].extensions);var ore=je(require("node:path"));var WS=class{constructor(e,r,n){this.languageId=e;this.isGuess=r;this.fileExtension=n}static{s(this,"Language")}},T8=class{static{s(this,"LanguageDetection")}},sre=new Map,qS=new Map;for(let[t,{extensions:e,filenames:r}]of Object.entries(NI)){for(let n of e)sre.set(n,[...sre.get(n)??[],t]);for(let n of r??[])qS.set(n,[...qS.get(n)??[],t])}var are=class extends T8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let r=Ti(e.uri),n=ore.extname(r).toLowerCase(),i=this.extensionWithoutTemplateLanguage(r,n),o=this.detectLanguageId(r,i),a=this.computeFullyQualifiedExtension(n,i);return o?new WS(o.languageId,o.isGuess,a):new WS(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,r){if(vTe.includes(r)){let n=e.substring(0,e.lastIndexOf(".")),i=ore.extname(n).toLowerCase();if(i.length>0&&I8.includes(i)&&this.isExtensionValidForTemplateLanguage(r,i))return i}return r}isExtensionValidForTemplateLanguage(e,r){let n=bTe[e];return!n||n.includes(r)}detectLanguageId(e,r){if(qS.has(e))return{languageId:qS.get(e)[0],isGuess:!1};let n=sre.get(r)??[];if(n.length>0)return{languageId:n[0],isGuess:n.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),qS.has(e))return{languageId:qS.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,r){return e!==r?r+e:e}},lre=class extends T8{constructor(r){super();this.delegate=r}static{s(this,"GroupingLanguageDetection")}detectLanguage(r){let n=this.delegate.detectLanguage(r),i=n.languageId;return i==="c"||i==="cpp"?new WS("cpp",n.isGuess,n.fileExtension):n}},cre=class extends T8{constructor(r){super();this.delegate=r}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(r){return r.uri.startsWith("untitled:")||r.uri.startsWith("vscode-notebook-cell:")?new WS(r.languageId,!0,""):this.delegate.detectLanguage(r)}},R0t=new lre(new cre(new are));function Xx({uri:t,languageId:e}){let r=R0t.detectLanguage({uri:t,languageId:"UNKNOWN"});return r.languageId==="UNKNOWN"?e:r.languageId}s(Xx,"detectLanguage");f();f();f();f();function N1(t){if(t.isCancellationRequested)throw new cQ}s(N1,"throwIfCancellationRequested");function dQ(t){return t instanceof cQ?!0:t instanceof Error&&t.name===ure&&t.message===ure}s(dQ,"isCancellationError");var cQ=class extends Error{static{s(this,"CancellationError")}constructor(){super(ure),this.name=this.message}},ure="Canceled",uQ=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function LI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(LI,"isTypeDefinition");var Vc=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,r){this.start=e,this.length=r}static fromBounds(e,r){return new t(e,r-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,r){let n=[],i=this.start;for(i=ITe(e,e.length,i),ETe(n,r);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?n.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(n.push(`
`),i=ITe(e,e.length,++i),ETe(n,r)):i++;return n.join("")}};function ETe(t,e){for(let r=0;r<e;r++)t.push(" ")}s(ETe,"appendIndent");function ITe(t,e,r){for(;r<e&&(t[r]===" "||t[r]==="	");)r++;return r}s(ITe,"consumeIndent");var Cg=class{constructor(e,r,n,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=r;this.unqualifiedName=n;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},hc=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,r){let n=await P1(this.languageId,e),i=n.getLanguage(),a=this.getOrCreateQuery(i,r).matches(n.rootNode);return{tree:n,matches:a}}async executeQuery(e,r,n){let i;try{i=await this.findMatches(r,n);let o=new uQ,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,r,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,r){let n=this.queriesCache.get(r);return n||(n=e.query(r),this.queriesCache.set(r,n)),n}createSymbolRange(e,r,n,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=Vc.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(n):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=n.length,c=m);let y=Vc.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new Cg(r,"","",Vc.fromBounds(o,a),Vc.fromBounds(u,d),Vc.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(n),E=this.createNameFromScopes(n,e.toArray());return E=g?`${g}.${E}`:E,new Cg(r,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,r){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(r.extentRange);)e.pop();e.push(r)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var fQ=class extends hc{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,r){return this.executeQuery(e,r,k0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},pQ=class extends hc{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,B0t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,D0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var k0t=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`;var B0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,D0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var hQ=class extends hc{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,r){return this.executeQuery(e,r,P0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},gQ=class extends hc{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}extractReferences(e,r){return this.executeQuery(e,r,N0t)}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,L0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var P0t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`;var N0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,L0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var F0t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),AQ=class extends hc{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,r){return this.executeQuery(e,r,M0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},yQ=class extends hc{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,Q0t)).filter(i=>!F0t.has(i.unqualifiedName))}};var M0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,Q0t=`
(call_expression function: (_) @name) @reference
`;f();var O0t=new Set(["int","str","float","bool","list","dict","tuple","set"]),CQ=class extends hc{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,r){return this.executeQuery(e,r,U0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},xQ=class extends hc{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,q0t)).filter(i=>!O0t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){let i=await this.executeQuery(e,r,W0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(n)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}};var U0t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,q0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;var W0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var G0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),GS=class extends hc{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,r){return this.executeQuery(e,r,H0t)}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},HS=class extends hc{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){return(await this.executeQuery(e,r,j0t)).filter(i=>!G0t.has(i.unqualifiedName))}async extractLocalReferences(e,r,n){throw new Error("Method not implemented.")}};var H0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,j0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var V0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),vQ=class extends GS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,r){return Promise.all([this.executeQuery(e,r,$0t),super.extractSymbols(e,r)]).then(([n,i])=>[...n,...i])}createNameFromScopes(e,r){return r.map(n=>n.nameRange.getText(e)).join(".")}},bQ=class extends HS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,r){return r.length>0?r[r.length-1].nameRange.getText(e):""}async extractReferences(e,r){let[n,i]=await Promise.all([this.executeQuery(e,r,z0t),super.extractReferences(e,r)]);return[...n.filter(o=>!V0t.has(o.unqualifiedName)),...i]}},$0t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,z0t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var EQ=[{symbolExtractor:new hQ,referenceExtractor:new gQ,languageId:"java"},{symbolExtractor:new fQ,referenceExtractor:new pQ,languageId:"go"},{symbolExtractor:new CQ,referenceExtractor:new xQ,languageId:"python"},{symbolExtractor:new GS,referenceExtractor:new HS,languageId:"typescript"},{symbolExtractor:new vQ,referenceExtractor:new bQ,languageId:"typescriptreact"},{symbolExtractor:new AQ,referenceExtractor:new yQ,languageId:"javascript"}];function TTe(t){let e=Xx({uri:t});if(e&&EQ.some(r=>e===r.languageId))return e}s(TTe,"getSupportedLanguageIdForMultiLanguageProvider");var wTe=EQ.map(t=>t.referenceExtractor),IQ=EQ.map(t=>t.symbolExtractor),dre=EQ.map(t=>NI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();var Y0t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},K0t=u8(Y0t);function _Te(t){let e=t;return c8(e,K0t),e=Wte(e),e=DI(e),eQ(e),Hc(e,r=>{if(r.label==="class"||r.label==="interface")for(let n of r.subs)!mc(n)&&(n.label===void 0||n.label==="annotation")&&(n.label="member")},"bottomUp"),e}s(_Te,"processJava");f();var J0t={heading:/^# /,subheading:/^## /,subsubheading:/### /},X0t=u8(J0t);function STe(t){let e=t;if(c8(e,X0t),mc(e))return e;function r(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(r,"headingLevel");let n=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=r(o);if(a===void 0||mc(o))n[n.length-1].subs.push(o);else{for(;n.length<a;)n.push(n[n.length-1]);for(n[a-1].subs.push(o),n[a]=o;n.length>a+1;)n.pop()}}return e=uTe(e),e=DI(e),eQ(e),e}s(STe,"processMarkdown");f();function RTe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(RTe,"deparseLine");Gte("markdown",STe);Gte("java",_Te);var Z0t={worthUp:.9,worthSibling:.88,worthDown:.8};function fre(t,e,r=Do(),n=Z0t){let i=BI(t,o=>o?1:void 0);return Hc(i,o=>{if(mc(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*n.worthUp)},"bottomUp"),Hc(i,o=>{if(mc(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(n.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,n.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),eft(i,e,r)}s(fre,"fromTreeWithFocussedLines");function eft(t,e,r=Do()){let n=qte(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[RTe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new St(n,e,r)}s(eft,"fromTreeWithValuedLines");function Su(t,e=!0,r=!0,n,i=Do()){let o=typeof t=="string"?d8(t):d8(t.source,t.languageId);DI(o);let a=BI(o,l=>e&&l!=="closer");return Hc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Hc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),r&&Hc(a,l=>{l.label||=(RI(l)||mc(l))&&l.lineNumber==0},"topDown"),fre(a,n,i)}s(Su,"elidableTextForSourceCode");f();var w8=class t{constructor(e,r,n,i="strict",o){this.text=e;this._value=r;this._cost=n;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&r>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=r=>Do().tokenLength(r+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var S8="elidableTextChunk",St=class t{constructor(e,r,n=Do()){this.metadata=r;this.tokenizer=n;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new w8(c,a,n.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&Su(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(r=>r.adjustValue(e))}recost(e=r=>Do().tokenLength(r+`
`)){this.lines.forEach(r=>r.recost(e))}elide(e,r="[...]",n=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(r+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:c,priorityQueue:u,chunksToLinesMap:d}=rft(this.lines,i);if(c<=e)return kTe(l);nft(u,a);let p=c;for(;p>e&&u.length>0;){let h=u.shift().originalIndex,g=l[h];if(g.markedForRemoval)continue;p=sft(l,h,g,d,r,p);let v=n?ift(l,h):"",b=oft(v,r,g,o);l[h]=b,p-=g.cost,p+=b.cost;let E=h+1;if(E<l.length){let k=l[E];_8(k,r)&&(p-=k.cost,k.markedForRemoval=!0)}let _=h-1;if(_>=0){let k=l[_];_8(k,r)&&(p-=k.cost,k.markedForRemoval=!0)}}if(p>e)throw new Error(`Could not elide text to fit into ${e} tokens. Total cost is ${p}.`);let m=l.filter(h=>!h.markedForRemoval);for(let h=m.length-1;h>0;h--)_8(m[h],r)&&_8(m[h-1],r)&&m.splice(h,1);return kTe(m)}};function tft(t){return t?.text.match(/^\s*/)?.[0]??""}s(tft,"getIndentation");function _8(t,e){return t?.text.trim()===e.trim()}s(_8,"isEllipsis");function kTe(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(kTe,"produceElidedText");function rft(t,e){let r=0,n=[],i=new Map;return{lines:t.map((a,l)=>{let c=a.copy();e==="removeLeastBangForBuck"&&c.adjustValue(1/c.cost),r+=c.cost,n.push({originalIndex:l,value:c.value});let u=c.metadata?.get(S8);if(u)for(let d of u)i.has(d)||i.set(d,new Set),i.get(d).add(l);return c}),totalCost:r,priorityQueue:n,chunksToLinesMap:i}}s(rft,"initializeElisionContext");function nft(t,e){t.sort((r,n)=>r.value!==n.value?r.value-n.value:e==="bottomToTop"?n.originalIndex-r.originalIndex:r.originalIndex-n.originalIndex)}s(nft,"sortPriorityQueue");function ift(t,e){let r="";for(let n=e;n>=0;n--){let i=t[n];if(!i.markedForRemoval&&i.text.trim()!==""){r=tft(i);break}}return r}s(ift,"getClosestIndentation");function oft(t,e,r,n){let i=t+e;return new w8(i,1/0,n.tokenLength(i+`
`),"loose",r.metadata)}s(oft,"getNewEllipsis");function sft(t,e,r,n,i,o){let a=r.metadata?.get(S8);if(a&&a.size>0){let l=new Set;for(let c of a){let u=n.get(c);if(u)for(let d of u)d!==e&&!t[d].markedForRemoval&&l.add(d)}for(let c of l){let u=t[c];if(!_8(u,i)&&!u.markedForRemoval){let d=u.metadata?.get(S8);d&&d.size>0&&[...a].every(p=>d.has(p))&&(u.markedForRemoval=!0,o-=u.cost)}}}return o}s(sft,"handleChunks");f();f();function Em(){}s(Em,"Diff");Em.prototype={diff:s(function(e,r){var n,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),r=this.castInput(r,i),e=this.removeEmpty(this.tokenize(e,i)),r=this.removeEmpty(this.tokenize(r,i));var c=r.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(n=i.timeout)!==null&&n!==void 0?n:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],r,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(BTe(a,g[0].lastComponent,r,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var B=void 0,N=g[k-1],q=g[k+1];N&&(g[k-1]=void 0);var te=!1;if(q){var me=q.oldPos-k;te=q&&0<=me&&me<c}var oe=N&&N.oldPos+1<u;if(!te&&!oe){g[k]=void 0;continue}if(!oe||te&&N.oldPos<q.oldPos?B=a.addToPath(q,!0,!1,0,i):B=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(B,r,e,k,i),B.oldPos+1>=u&&y+1>=c)return l(BTe(a,B.lastComponent,r,e,a.useLongestToken));g[k]=B,B.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,r,n,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===r&&a.removed===n?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:r,removed:n,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:r,removed:n,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,r,n,i,o){for(var a=r.length,l=n.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(n[c+1],r[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,r,n){return n.comparator?n.comparator(e,r):e===r||n.ignoreCase&&e.toLowerCase()===r.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var r=[],n=0;n<e.length;n++)e[n]&&r.push(e[n]);return r},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function BTe(t,e,r,n,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(n.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=r.slice(u,u+p.count);m=m.map(function(h,g){var y=n[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(r.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(BTe,"buildValues");var sTr=new Em;function DTe(t,e){var r;for(r=0;r<t.length&&r<e.length;r++)if(t[r]!=e[r])return t.slice(0,r);return t.slice(0,r)}s(DTe,"longestCommonPrefix");function PTe(t,e){var r;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(r=0;r<t.length&&r<e.length;r++)if(t[t.length-(r+1)]!=e[e.length-(r+1)])return t.slice(-r);return t.slice(-r)}s(PTe,"longestCommonSuffix");function pre(t,e,r){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return r+t.slice(e.length)}s(pre,"replacePrefix");function mre(t,e,r){if(!e)return t+r;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+r}s(mre,"replaceSuffix");function R8(t,e){return pre(t,e,"")}s(R8,"removePrefix");function TQ(t,e){return mre(t,e,"")}s(TQ,"removeSuffix");function NTe(t,e){return e.slice(0,aft(t,e))}s(NTe,"maximumOverlap");function aft(t,e){var r=0;t.length>e.length&&(r=t.length-e.length);var n=e.length;t.length<e.length&&(n=t.length);var i=Array(n),o=0;i[0]=0;for(var a=1;a<n;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=r;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(aft,"overlapCount");var wQ="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",lft=new RegExp("[".concat(wQ,"]+|\\s+|[^").concat(wQ,"]"),"ug"),_Q=new Em;_Q.equals=function(t,e,r){return r.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};_Q.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else r=t.match(lft)||[];var n=[],i=null;return r.forEach(function(o){/\s/.test(o)?i==null?n.push(o):n.push(n.pop()+o):/\s/.test(i)?n[n.length-1]==i?n.push(n.pop()+o):n.push(i+o):n.push(o),i=o}),n};_Q.join=function(t){return t.map(function(e,r){return r==0?e:e.replace(/^\s+/,"")}).join("")};_Q.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var r=null,n=null,i=null;return t.forEach(function(o){o.added?n=o:o.removed?i=o:((n||i)&&LTe(r,i,n,o),r=o,n=null,i=null)}),(n||i)&&LTe(r,i,n,null),t};function LTe(t,e,r,n){if(e&&r){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=r.value.match(/^\s*/)[0],l=r.value.match(/\s*$/)[0];if(t){var c=DTe(i,a);t.value=mre(t.value,a,c),e.value=R8(e.value,c),r.value=R8(r.value,c)}if(n){var u=PTe(o,l);n.value=pre(n.value,l,u),e.value=TQ(e.value,u),r.value=TQ(r.value,u)}}else if(r)t&&(r.value=r.value.replace(/^\s*/,"")),n&&(n.value=n.value.replace(/^\s*/,""));else if(t&&n){var d=n.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=DTe(d,p);e.value=R8(e.value,h);var g=PTe(R8(d,h),m);e.value=TQ(e.value,g),n.value=pre(n.value,d,g),t.value=mre(t.value,d,d.slice(0,d.length-g.length))}else if(n){var y=n.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=NTe(v,y);e.value=TQ(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=NTe(E,_);e.value=R8(e.value,k)}}s(LTe,"dedupeWhitespaceInChangeObjects");var cft=new Em;cft.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(wQ,"]+|[^\\S\\n\\r]+|[^").concat(wQ,"]"),"ug");return t.match(e)||[]};var yre=new Em;yre.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var r=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var i=0;i<n.length;i++){var o=n[i];i%2&&!e.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r};yre.equals=function(t,e,r){return r.ignoreWhitespace?((!r.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Em.prototype.equals.call(this,t,e,r)};var uft=new Em;uft.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var dft=new Em;dft.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function hre(t){"@babel/helpers - typeof";return hre=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hre(t)}s(hre,"_typeof");var k8=new Em;k8.useLongestToken=!0;k8.tokenize=yre.tokenize;k8.castInput=function(t,e){var r=e.undefinedReplacement,n=e.stringifyReplacer,i=n===void 0?function(o,a){return typeof a>"u"?r:a}:n;return typeof t=="string"?t:JSON.stringify(gre(t,null,null,i),i,"  ")};k8.equals=function(t,e,r){return Em.prototype.equals.call(k8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),r)};function gre(t,e,r,n,i){e=e||[],r=r||[],n&&(t=n(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return r[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),r.push(a),o=0;o<t.length;o+=1)a[o]=gre(t[o],e,r,n,i);return e.pop(),r.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),hre(t)==="object"&&t!==null){e.push(t),a={},r.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=gre(t[c],e,r,n,c);e.pop(),r.pop()}else a=t;return a}s(gre,"canonicalize");var Are=new Em;Are.tokenize=function(t){return t.slice()};Are.join=Are.removeEmpty=function(t){return t};var FTe=require("fs");async function MTe(t,e,r,n,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(r.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;N1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await pft([y])).elide(b).getText();l-=n.tokenLength(E),u.push({uri:h,value:E})}}return u}s(MTe,"symbolRangesToCodeSnippets");async function pft(t){if(t.length===0)return new St([]);let e=t[0].node.fileName,r=[],n="";try{let i=Go(e);i&&(n=(await FTe.promises.readFile(i)).toString())}catch{}for(let i of t)QTe(i,n).forEach(o=>r.push(o));return new St(r)}s(pft,"sameFileSymbolRangeToElidableText");function QTe(t,e){let n=[],i=t.node,o=e.substring(Cre(e,i.commentRange.start),i.commentRange.end);n.push([xre(o),1-3e-4]);let a=Cre(e,i.bodyRange.start),l=Cre(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(LI(i.kind)&&(c="BEGIN "+c.trimStart()),n.push([xre(c),1-1e-4]),t.children.length>0)for(let u of t.children)n.push(...QTe(u,e));else{let u=1-(LI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);n.push([xre(d),u])}return LI(i.kind)&&n.push(["END "+c.substring(6),1-1e-4]),n.filter(u=>u[0].length>0)}s(QTe,"prepareForElidableText");function Cre(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(Cre,"shiftLeftToNearestLineEndingOrAlphanumeric");function xre(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let r=t.length-1;for(;r>=0&&(t[r]==="\r"||t[r]===`
`||t[r]===" "||t[r]==="	");)r--;return t.substring(e,r+1)}s(xre,"trimLineEndingsAndTrailingWhitespace");var vre=class{constructor(e,r){this.referenceExtractors=new Map;this.index=e;for(let n of r)this.referenceExtractors.set(n.languageId,n)}static{s(this,"ContextRetrievalStrategy")}},Zx=class extends vre{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,r,n,i){super(e,r),this.caseSensitive=n,this.typesOnly=i}async getContextAtPositionAsync(e,r,n,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];N1(a);let c=await l.extractReferences(e,r);N1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,n));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>LI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,r,n){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,n),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>r.mlcpMaxSymbolMatches)){if(d.length+m.length>r.mlcpMaxContextItems){d.push(...m.slice(0,r.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,r){if(N1(r),LI(e.kind)){let n=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",r),i=await Promise.all(n.map(o=>this.makeSymbolRangeNodeFromDefinition(o,r)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,r,n){let i=e.extentRange.end<=n,o=r.extentRange.end<=n;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-n),l=Math.abs(r.extentRange.start-n);return a-l}},SQ=class{constructor(e,r){this.strategies=new Map;this.strategies.set("go",new Zx(e,r,!0,!0)),this.strategies.set("java",new Zx(e,r,!0,!0)),this.strategies.set("python",new Zx(e,r,!0,!1)),this.strategies.set("typescript",new Zx(e,r,!0,!0)),this.strategies.set("typescriptreact",new Zx(e,r,!0,!0)),this.strategies.set("javascript",new Zx(e,r,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,r,n,i,o,a,l){let c=await this.getContextAtPositionAsync(e,r,n,i,o,l);N1(l);let u=Do();return MTe(c,a,e,u,l)}async getContextAtPositionAsync(e,r,n,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,r,n,i,o,a):[]}};f();f();f();f();var FI={Id:"id"},C0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Li={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var RQ=class{constructor(e,r,n){this.tableName=e;this.createOptimizations=r;this.extraCreateDeclarations=n;this.primaryKey=new bre(FI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(r=>r.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,r){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let n=[this.cachedInsertQueryStrings.prefix,Array(r).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&n.push("ON CONFLICT DO NOTHING"),n.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},B8=class t extends RQ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${C0.FilePath}');`]);this.fields=[new N8(C0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new xd(C0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},D8=class t extends RQ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Li.DocumentId}', '${Li.ExtentStart}', '${Li.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Li.UnqualifiedName}');`],`FOREIGN KEY(${Li.DocumentId}) REFERENCES Document(${FI.Id}) ON DELETE CASCADE`);this.fields=[new xd(Li.DocumentId),new N8(Li.FullyQualifiedName,{notNull:!0}),new N8(Li.UnqualifiedName,{notNull:!0}),new xd(Li.CommentStart,{notNull:!0}),new xd(Li.CommentLength,{notNull:!0}),new xd(Li.NameStart,{notNull:!0}),new xd(Li.NameLength,{notNull:!0}),new xd(Li.BodyStart,{notNull:!0}),new xd(Li.BodyLength,{notNull:!0}),new xd(Li.ExtentStart,{notNull:!0}),new xd(Li.ExtentLength,{notNull:!0}),new xd(Li.SymbolKind,{notNull:!0}),new xd(Li.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},P8=class{constructor(e,r){this.name=e;this.notNull=r?.notNull??!1}static{s(this,"SQLField")}},N8=class extends P8{static{s(this,"StringColumn")}constructor(e,r){super(e,{notNull:r?.notNull}),this.collate=r?.collate??!1,this.noCase=r?.noCase??!1,this.unique=r?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,r=this.noCase?"NOCASE":void 0,n=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,r,n,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},xd=class extends P8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},bre=class extends P8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var kQ=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let r=await e;if(r)return await this.create(r),r}async create(e){let r=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),n=this.queryGenerator.createTableQueries();for(let i of n)await r(i)}async insert(e,r){let n=await this.init;n&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(r,e.length);n.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?Wf(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let r=await this.init;if(r)return Wf(r,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${FI.Id} = ?`,[e])}},L1=class t extends kQ{static{s(this,"DocumentTable")}static{this.tableName=B8.tableName}createQueryGenerator(){return new B8}async updateTimestamp(e,r){let n=await this.init;n&&await Wf(n,`UPDATE ${t.tableName} SET ${C0.LastWriteTimeUtc} = ? WHERE ${C0.FilePath} = ?`,[r,e])}async deleteAllWithPath(e){let r=await this.init;r&&await Wf(r,`DELETE FROM ${t.tableName} WHERE ${C0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let r=await this.init;return r?Wf(r,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${C0.FilePath} = ?`,[e]):[]}},Ja=class t extends kQ{static{s(this,"SymbolTable")}static{this.tableName=D8.tableName}createQueryGenerator(){return new D8}async clearAllSymbolsFromDocument(e){let r=await this.init;if(r)return Wf(r,`DELETE FROM ${t.tableName} WHERE ${Li.DocumentId} = ?`,[e])}};async function Wf(t,e,r){return new Promise((n,i)=>t.all(e,r,(o,a)=>{o&&i(o),n(a)}))}s(Wf,"runPromisifiedDBQuery");var PQ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${L1.tableName} ON ${Ja.tableName}.${Li.DocumentId} = ${L1.tableName}.${FI.Id}`;this.db=this.initDb(e),this.documentTable=new L1(this.db),this.symbolTable=new Ja(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let r;try{r=await Promise.resolve().then(()=>je(KTe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let n;try{n=await new Promise((i,o)=>{let a=new r.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Wf(n,"pragma journal_mode=wal",[]),await Wf(n,"pragma synchronous=normal",[]),await Wf(n,"pragma optimize=0x10002",[]),await Wf(n,"pragma foreign_keys = ON",[]),n}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((r,n)=>{e.close(i=>i?n(i):r())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,r){return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Li.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,r])}async querySymbolsUsingUnqualifiedNames(e,r){let n=e.map(()=>"?").join(", "),i=r?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.UnqualifiedName} ${i}IN (${n})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Li.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${L1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Li.ExtentStart} <= ? AND (${Ja.tableName}.${Li.ExtentStart} + ${Ja.tableName}.${Li.ExtentLength}) >= ?`].join(`
`),[e,r,r])}async querySymbolsContainedByRange(e,r,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${L1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Li.ExtentStart} >= ? AND (${Ja.tableName}.${Li.ExtentStart} + ${Ja.tableName}.${Li.ExtentLength}) <= ?`,`ORDER BY ${Ja.tableName}.${Li.ExtentStart}`].join(`
`),[e,r,n])}async querySymbolsByQualifiedNamePrefix(e,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${L1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Li.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ja.tableName}.${Li.ExtentStart}`].join(`
`),[e,`${r}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,r,n=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:r}],n)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,r){return this.documentTable.updateTimestamp(e,r)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,r){let n=await this.db;return n?(await this.documentTable.init,await this.symbolTable.init,Wf(n,e,r)):[]}};var NQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new PQ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,r,n){let i=await this.getOrCreateDocumentAsync(e,r);await this.database.clearAllSymbolsFromDocument(i.id),n.length>0&&await this.database.insertSymbols(n.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,r)}async addDocumentsAsync(e){for(let r of e)r=r.toLowerCase(),await this.database.insertDocument(r,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,r){return await this.database.updateDocumentTimestamp(e.toLowerCase(),r)}async fuzzyMatchSymbolsAsync(e,r){return $S(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,r))}async findPotentialDefinitionsAsync(e,r,n){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,r);i.push(...c),N1(n)}return $S(i)}async getDefinitionsAsync(e){return $S(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,r){let n=await this.database.querySymbolsContainingPosition(e.toLowerCase(),r);return $S(n)}async findSymbolsContainedByRangeAsync(e,r,n){return $S(await this.database.querySymbolsContainedByRange(e.toLowerCase(),r,n))}async findSymbolsByFullyQualifiedNamePrefix(e,r){return $S(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),r))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let r=await this.database.getDocument(e);if(r?.at(0))return r[0]}async getOrCreateDocumentAsync(e,r){let n=await this.database.getDocument(e);if(n?.at(0))return n[0];await this.database.insertDocument(e,r,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function $S(t){return t.map(e=>new Cg(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Vc(e.commentStart,e.commentLength),new Vc(e.nameStart,e.nameLength),new Vc(e.bodyStart,e.bodyLength),new Vc(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s($S,"symbolsToSymbolRanges");var FQ=je(require("fs/promises"));var LQ=class{static{s(this,"Index")}constructor(e,r){this.storage=new NQ(e),this.symbolExtractors=r}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,r){let n=Go(e);if(!n)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await FQ.stat(n)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.find(d=>d.languageId==r);if(!l)return;let c=(await FQ.readFile(n)).toString(),u=await l.extractSymbols(e,c);await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,u)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(r=>r.filePath)}};f();function Sre(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(r=>xft(r))}s(Sre,"isIndexWorkerData");var F8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},ev=class extends F8{constructor(r,n){super(n);this.id=r;this.id=r}static{s(this,"IndexRequest")}},MQ=class extends F8{constructor(r){super($c.Cancel);this.messageIdToCancel=r}static{s(this,"CancellationNotification")}},$c={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},QQ=class extends ev{constructor(r,n,i){super(r,$c.CreateIndex);this.baseWorkspaceFolderUri=n;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},OQ=class extends ev{constructor(r,n){super(r,$c.RemoveIndex);this.baseWorkspaceFolderUri=n}static{s(this,"RemoveIndexRequest")}},UQ=class extends ev{constructor(r,n,i){super(r,$c.AddOrInvalidated);this.fileUri=n;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},qQ=class extends ev{constructor(r,n){super(r,$c.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=n}static{s(this,"GetAllDocumentsRequest")}},WQ=class extends ev{constructor(r,n,i,o,a,l){super(r,$c.GetContext);this.fileUri=n;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},GQ=class extends ev{static{s(this,"ExitRequest")}constructor(e){super(e,$c.Exit)}},Im=class extends F8{constructor(r,n,i){super($c.Response);this.id=r;this.error=n;this.data=i;n&&"code"in n&&typeof n.code=="string"&&(this.code=n.code)}static{s(this,"ResponseMessage")}};function xft(t){return"databaseFilePath"in t&&"rootPath"in t}s(xft,"isIndexableWorkspaceFolder");var JTe=je(ii()),MI=require("worker_threads");var HQ=class{static{s(this,"IndexInfo")}constructor(e){this.index=new LQ(e,IQ),this.contextRetreival=new SQ(this.index.reader,wTe)}},Rre=class t{constructor(e,r){this.indices=new Map;this.cancellationTokens=new Map;for(let n of r){let i=aa(n.rootPath);this.indices.set(i,new HQ(n.databaseFilePath))}this.port=e,this.port.on("message",n=>void this.dispatchMessage(n,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,r,n){try{let i=new JTe.CancellationTokenSource;n.set(e.id,i);let o;switch(e.operation){case $c.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,r,i.token);break;case $c.GetContext:o=await t.dispatchGetContext(e,r,i.token);break;case $c.Cancel:n.get(e.id)?.cancel(),o=new Im(e.id,void 0,void 0);break;case $c.Exit:o=await this.dispatchExit(e,r,i.token);break;case $c.CreateIndex:o=await t.dispatchCreateIndex(e,r,i.token);break;case $c.RemoveIndex:o=await t.dispatchRemoveIndex(e,r,i.token);break;case $c.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,r,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),n.get(e.id)?.dispose(),n.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new Im(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,r,n){let i=aa(e.baseWorkspaceFolderUri),o,a;return r.has(i)?a=await r.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new Im(e.id,o,a)}static async dispatchAddOrInvalidate(e,r,n){let i=aa(e.fileUri),o=t.getIndexInfo(i,r)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new Im(e.id,a,void 0)}static async dispatchGetContext(e,r,n){let i=aa(e.fileUri),o=t.getIndexInfo(i,r)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,n):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new Im(e.id,a,l)}async dispatchExit(e,r,n){for(let i of r.values())await i.index.dispose();r.clear(),this.port?.postMessage(new Im(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,r,n){let i=aa(e.baseWorkspaceFolderUri);return r.has(i)||r.set(i,new HQ(e.databaseFilePath)),new Im(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,r,n){let i=aa(e.baseWorkspaceFolderUri);if(r.has(i)){let o=r.get(i);o&&await o.index.dispose(),r.delete(i)}return new Im(e.id,void 0,void 0)}static getIndexInfo(e,r){for(let[n,i]of r)if(e.startsWith(n))return i}};function XTe(){return Sre(MI.workerData)}s(XTe,"isIndexWorker");function ZTe(){let t=MI.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Sre(MI.workerData))throw new Error("Worker data must provide a valid database path.");let e=MI.workerData.cwd;process.cwd=()=>e,new Rre(t,MI.workerData.indexWorkspaceRoots)}s(ZTe,"runIndexWorker");f();var M8=je(require("util"));function ewe(t){let e=new console.Console(process.stderr,process.stderr);function r(n,...i){if(Ff(t)==="dev")return t.get($a).logIt(t,n,"console",...i)}return s(r,"logIt"),e.debug=(...n)=>r(4,...n),e.info=(...n)=>r(3,...n),e.warn=(...n)=>r(2,...n),e.error=(...n)=>r(1,...n),e.assert=(n,...i)=>{n||(i.length===0?r(2,"Assertion failed"):r(2,"Assertion failed:",M8.format(...i)))},e.dir=(n,i)=>r(4,M8.inspect(n,i)),e.log=e.debug.bind(e),e.trace=(...n)=>{let i=new Error(M8.format(...n));i.name="Trace",e.log(i)},e}s(ewe,"createConsole");var WKe=je(require("fs/promises")),GKe=je(require("os")),Lp=je(wm()),HKe=require("worker_threads");f();f();var SO=require("assert");f();f();var Ppt={right:Qpt,center:Opt},Npt=0,vO=1,Lpt=2,bO=3,tne=class{static{s(this,"UI")}constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&x0.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),x0.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=x0.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let o="";n.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>x0.stringWidth(a)&&(d+=" ".repeat(u-x0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=Ppt[e[l].align];d=m(d,u),x0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-x0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[bO]&&(o+=" ".repeat(p[bO])),o+=zwe(e[l],d,"| "),o+=d,o+=zwe(e[l],d," |"),p[vO]&&(o+=" ".repeat(p[vO])),i===0&&r.length>0&&(o=this.renderInline(o,r[r.length-1]))}),r.push({text:o.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,o=r.text,a=x0.stringWidth(o.trimRight());return r.span?this.wrap?i<a?e:(r.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(r.hidden=!0,o+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=n[a],this.wrap?i=x0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[Npt]||0).fill("")),i.push(...new Array(o.padding[Lpt]||0).fill(""))),i.forEach((l,c)=>{r[c]||r.push([]);let u=r[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[bO]||0)+(e.padding[vO]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||x0.stringWidth(a.text));let r=e.length,n=this.width,i=e.map(a=>{if(a.width)return r--,n-=a.width,a.width}),o=r?Math.floor(n/r):0;return i.map((a,l)=>a===void 0?Math.max(o,Fpt(e[l])):a)}};function zwe(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}s(zwe,"addBorder");function Fpt(t){let e=t.padding||[],r=1+(e[bO]||0)+(e[vO]||0);return t.border?r+4:r}s(Fpt,"_minWidth");function Mpt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(Mpt,"getWindowWidth");function Qpt(t,e){t=t.trim();let r=x0.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}s(Qpt,"alignRight");function Opt(t,e){t=t.trim();let r=x0.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}s(Opt,"alignCenter");var x0;function Ywe(t,e){return x0=e,new tne({width:t?.width||Mpt(),wrap:t?.wrap})}s(Ywe,"cliui");f();var Kwe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function rne(t){return t.replace(Kwe,"")}s(rne,"stripAnsi");function Jwe(t,e){let[r,n]=t.match(Kwe)||["",""];t=rne(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return r&&n&&(i=`${r}${i}${n}`),i}s(Jwe,"wrap");function nne(t){return Ywe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:rne,wrap:Jwe})}s(nne,"ui");f();var JS=require("path"),EO=require("fs");function ine(t,e){let r=(0,JS.resolve)(".",t),n;for((0,EO.statSync)(r).isDirectory()||(r=(0,JS.dirname)(r));;){if(n=e(r,(0,EO.readdirSync)(r)),n)return(0,JS.resolve)(r,n);if(r=(0,JS.dirname)(n=r),n===r)break}}s(ine,"default");var p_e=require("util"),m_e=require("fs"),h_e=require("url");f();var r_e=require("util"),_O=require("path");f();function qI(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);n&&(n=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?n=!0:a!=="-"&&a!=="_"&&(r+=a)}return r}}s(qI,"camelCase");function IO(t,e){let r=t.toLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let o=r.charAt(i),a=t.charAt(i);o!==a&&i>0?n+=`${e}${r.charAt(i)}`:n+=a}return n}s(IO,"decamelize");function TO(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(TO,"looksLikeNumber");f();f();function Xwe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,r=null,n=null,i=null,o=[];for(let a=0;a<t.length;a++){if(r=n,n=t.charAt(a),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),o[e]||(o[e]=""),o[e]+=n}return o}s(Xwe,"tokenizeArgString");f();var zf;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(zf||(zf={}));var F1,wO=class{static{s(this,"YargsParser")}constructor(e){F1=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=Xwe(e),o=typeof e=="string",a=Upt(Object.assign(Object.create(null),n.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),c=Object.assign(Object.create(null),n.default),u=n.configObjects||[],d=n.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=n.__||F1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(X){let ne=typeof X=="object"?X.key:X,We=Object.keys(X).map(function(Pe){return{boolean:"bools",string:"strings",number:"numbers"}[Pe]}).filter(Boolean).pop();We&&(v[We][ne]=!0),v.arrays[ne]=!0,v.keys.push(ne)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(X){v.bools[X]=!0,v.keys.push(X)}),[].concat(n.string||[]).filter(Boolean).forEach(function(X){v.strings[X]=!0,v.keys.push(X)}),[].concat(n.number||[]).filter(Boolean).forEach(function(X){v.numbers[X]=!0,v.keys.push(X)}),[].concat(n.count||[]).filter(Boolean).forEach(function(X){v.counts[X]=!0,v.keys.push(X)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(X){v.normalize[X]=!0,v.keys.push(X)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([X,ne])=>{typeof ne=="number"&&(v.nargs[X]=ne,v.keys.push(X))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([X,ne])=>{typeof ne=="function"&&(v.coercions[X]=ne,v.keys.push(X))}),typeof n.config<"u"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(X){v.configs[X]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([X,ne])=>{(typeof ne=="boolean"||typeof ne=="function")&&(v.configs[X]=ne)})),Ne(n.key,a,n.default,v.arrays),Object.keys(c).forEach(function(X){(v.aliases[X]||[]).forEach(function(ne){c[ne]=c[X]})});let _=null;tt();let k=[],B=Object.assign(Object.create(null),{_:[]}),N={};for(let X=0;X<i.length;X++){let ne=i[X],We=ne.replace(/^-{3,}/,"---"),Pe,be,ze,it,gt,Ot;if(ne!=="--"&&/^-/.test(ne)&&Tt(ne))q(ne);else if(We.match(/^---+(=|$)/)){q(ne);continue}else if(ne.match(/^--.+=/)||!l["short-option-groups"]&&ne.match(/^-.+=/))it=ne.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(Re(it[1],v.arrays)?X=me(X,it[1],i,it[2]):Re(it[1],v.nargs)!==!1?X=te(X,it[1],i,it[2]):oe(it[1],it[2],!0));else if(ne.match(E)&&l["boolean-negation"])it=ne.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],oe(be,Re(be,v.arrays)?[!1]:!1));else if(ne.match(/^--.+/)||!l["short-option-groups"]&&ne.match(/^-[^-]+/))it=ne.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],Re(be,v.arrays)?X=me(X,be,i):Re(be,v.nargs)!==!1?X=te(X,be,i):(gt=i[X+1],gt!==void 0&&(!gt.match(/^-/)||gt.match(b))&&!Re(be,v.bools)&&!Re(be,v.counts)||/^(true|false)$/.test(gt)?(oe(be,gt),X++):oe(be,bt(be))));else if(ne.match(/^-.\..+=/))it=ne.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&oe(it[1],it[2]);else if(ne.match(/^-.\..+/)&&!ne.match(b))gt=i[X+1],it=ne.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],gt!==void 0&&!gt.match(/^-/)&&!Re(be,v.bools)&&!Re(be,v.counts)?(oe(be,gt),X++):oe(be,bt(be)));else if(ne.match(/^-[^-]+/)&&!ne.match(b)){ze=ne.slice(1,-1).split(""),Pe=!1;for(let lr=0;lr<ze.length;lr++){if(gt=ne.slice(lr+2),ze[lr+1]&&ze[lr+1]==="="){Ot=ne.slice(lr+3),be=ze[lr],Re(be,v.arrays)?X=me(X,be,i,Ot):Re(be,v.nargs)!==!1?X=te(X,be,i,Ot):oe(be,Ot),Pe=!0;break}if(gt==="-"){oe(ze[lr],gt);continue}if(/[A-Za-z]/.test(ze[lr])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(gt)&&Re(gt,v.bools)===!1){oe(ze[lr],gt),Pe=!0;break}if(ze[lr+1]&&ze[lr+1].match(/\W/)){oe(ze[lr],gt),Pe=!0;break}else oe(ze[lr],bt(ze[lr]))}be=ne.slice(-1)[0],!Pe&&be!=="-"&&(Re(be,v.arrays)?X=me(X,be,i):Re(be,v.nargs)!==!1?X=te(X,be,i):(gt=i[X+1],gt!==void 0&&(!/^(-|--)[^-]/.test(gt)||gt.match(b))&&!Re(be,v.bools)&&!Re(be,v.counts)||/^(true|false)$/.test(gt)?(oe(be,gt),X++):oe(be,bt(be))))}else if(ne.match(/^-[0-9]$/)&&ne.match(b)&&Re(ne.slice(1),v.bools))be=ne.slice(1),oe(be,bt(be));else if(ne==="--"){k=i.slice(X+1);break}else if(l["halt-at-non-option"]){k=i.slice(X);break}else q(ne)}Y(B,!0),Y(B,!1),ie(B),W(),re(B,v.aliases,c,!0),ee(B),l["set-placeholder-key"]&&pe(B),Object.keys(v.counts).forEach(function(X){fe(B,X.split("."))||oe(X,0)}),p&&k.length&&(B[m]=[]),k.forEach(function(X){B[m].push(X)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(B).filter(X=>X!=="--"&&X.includes("-")).forEach(X=>{delete B[X]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(X=>a[X])).forEach(X=>{l["camel-case-expansion"]&&X.includes("-")&&delete B[X.split(".").map(ne=>qI(ne)).join(".")],delete B[X]});function q(X){let ne=le("_",X);(typeof ne=="string"||typeof ne=="number")&&B._.push(ne)}s(q,"pushPositional");function te(X,ne,We,Pe){let be,ze=Re(ne,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(Pe)||(_=Error(y("Argument unexpected for: %s",ne))),oe(ne,bt(ne)),X;let it=ye(Pe)?0:1;if(l["nargs-eats-options"])We.length-(X+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",ne))),it=ze;else{for(be=X+1;be<We.length&&(!We[be].match(/^-[^0-9]/)||We[be].match(b)||Tt(We[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",ne)))}let gt=Math.min(it,ze);for(!ye(Pe)&&gt>0&&(oe(ne,Pe),gt--),be=X+1;be<gt+X+1;be++)oe(ne,We[be]);return X+gt}s(te,"eatNargs");function me(X,ne,We,Pe){let be=[],ze=Pe||We[X+1],it=Re(ne,v.nargs);if(Re(ne,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(Pe)&&/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)){if(c[ne]!==void 0){let gt=c[ne];be=Array.isArray(gt)?gt:[gt]}}else{ye(Pe)||be.push(O(ne,Pe,!0));for(let gt=X+1;gt<We.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=We[gt],/^-/.test(ze)&&!b.test(ze)&&!Tt(ze)));gt++)X=gt,be.push(O(ne,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",ne))),oe(ne,be),X}s(me,"eatArray");function oe(X,ne,We=o){if(/-/.test(X)&&l["camel-case-expansion"]){let ze=X.split(".").map(function(it){return qI(it)}).join(".");H(X,ze)}let Pe=O(X,ne,We),be=X.split(".");he(B,be,Pe),v.aliases[X]&&v.aliases[X].forEach(function(ze){let it=ze.split(".");he(B,it,Pe)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),gt=[].concat(be);gt.shift(),it=it.concat(gt),(v.aliases[X]||[]).includes(it.join("."))||he(B,it,Pe)}),Re(X,v.normalize)&&!Re(X,v.arrays)&&[X].concat(v.aliases[X]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return ne},set(gt){ne=typeof gt=="string"?F1.normalize(gt):gt}})})}s(oe,"setArg");function H(X,ne){v.aliases[X]&&v.aliases[X].length||(v.aliases[X]=[ne],h[ne]=!0),v.aliases[ne]&&v.aliases[ne].length||H(ne,X)}s(H,"addNewAlias");function O(X,ne,We){We&&(ne=qpt(ne)),(Re(X,v.bools)||Re(X,v.counts))&&typeof ne=="string"&&(ne=ne==="true");let Pe=Array.isArray(ne)?ne.map(function(be){return le(X,be)}):le(X,ne);return Re(X,v.counts)&&(ye(Pe)||typeof Pe=="boolean")&&(Pe=one()),Re(X,v.normalize)&&Re(X,v.arrays)&&(Array.isArray(ne)?Pe=ne.map(be=>F1.normalize(be)):Pe=F1.normalize(ne)),Pe}s(O,"processValue");function le(X,ne){return!l["parse-positional-numbers"]&&X==="_"||!Re(X,v.strings)&&!Re(X,v.bools)&&!Array.isArray(ne)&&(TO(ne)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${ne}`)))||!ye(ne)&&Re(X,v.numbers))&&(ne=Number(ne)),ne}s(le,"maybeCoerceNumber");function ie(X){let ne=Object.create(null);re(ne,v.aliases,c),Object.keys(v.configs).forEach(function(We){let Pe=X[We]||ne[We];if(Pe)try{let be=null,ze=F1.resolve(F1.cwd(),Pe),it=v.configs[We];if(typeof it=="function"){try{be=it(ze)}catch(gt){be=gt}if(be instanceof Error){_=be;return}}else be=F1.require(ze);j(be)}catch(be){be.name==="PermissionDenied"?_=be:X[We]&&(_=Error(y("Invalid JSON config file: %s",Pe)))}})}s(ie,"setConfig");function j(X,ne){Object.keys(X).forEach(function(We){let Pe=X[We],be=ne?ne+"."+We:We;typeof Pe=="object"&&Pe!==null&&!Array.isArray(Pe)&&l["dot-notation"]?j(Pe,be):(!fe(B,be.split("."))||Re(be,v.arrays)&&l["combine-arrays"])&&oe(be,Pe)})}s(j,"setConfigObject");function W(){typeof u<"u"&&u.forEach(function(X){j(X)})}s(W,"setConfigObjects");function Y(X,ne){if(typeof d>"u")return;let We=typeof d=="string"?d:"",Pe=F1.env();Object.keys(Pe).forEach(function(be){if(We===""||be.lastIndexOf(We,0)===0){let ze=be.split("__").map(function(it,gt){return gt===0&&(it=it.substring(We.length)),qI(it)});(ne&&v.configs[ze.join(".")]||!ne)&&!fe(X,ze)&&oe(ze.join("."),Pe[be])}})}s(Y,"applyEnvVars");function ee(X){let ne,We=new Set;Object.keys(X).forEach(function(Pe){if(!We.has(Pe)&&(ne=Re(Pe,v.coercions),typeof ne=="function"))try{let be=le(Pe,ne(X[Pe]));[].concat(v.aliases[Pe]||[],Pe).forEach(ze=>{We.add(ze),X[ze]=be})}catch(be){_=be}})}s(ee,"applyCoercions");function pe(X){return v.keys.forEach(ne=>{~ne.indexOf(".")||typeof X[ne]>"u"&&(X[ne]=void 0)}),X}s(pe,"setPlaceholderKeys");function re(X,ne,We,Pe=!1){Object.keys(We).forEach(function(be){fe(X,be.split("."))||(he(X,be.split("."),We[be]),Pe&&(g[be]=!0),(ne[be]||[]).forEach(function(ze){fe(X,ze.split("."))||he(X,ze.split("."),We[be])}))})}s(re,"applyDefaultsAndAliases");function fe(X,ne){let We=X;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(be){We=We[be]||{}});let Pe=ne[ne.length-1];return typeof We!="object"?!1:Pe in We}s(fe,"hasKey");function he(X,ne,We){let Pe=X;l["dot-notation"]||(ne=[ne.join(".")]),ne.slice(0,-1).forEach(function(Ot){Ot=Zwe(Ot),typeof Pe=="object"&&Pe[Ot]===void 0&&(Pe[Ot]={}),typeof Pe[Ot]!="object"||Array.isArray(Pe[Ot])?(Array.isArray(Pe[Ot])?Pe[Ot].push({}):Pe[Ot]=[Pe[Ot],{}],Pe=Pe[Ot][Pe[Ot].length-1]):Pe=Pe[Ot]});let be=Zwe(ne[ne.length-1]),ze=Re(ne.join("."),v.arrays),it=Array.isArray(We),gt=l["duplicate-arguments-array"];!gt&&Re(be,v.nargs)&&(gt=!0,(!ye(Pe[be])&&v.nargs[be]===1||Array.isArray(Pe[be])&&Pe[be].length===v.nargs[be])&&(Pe[be]=void 0)),We===one()?Pe[be]=one(Pe[be]):Array.isArray(Pe[be])?gt&&ze&&it?Pe[be]=l["flatten-duplicate-arrays"]?Pe[be].concat(We):(Array.isArray(Pe[be][0])?Pe[be]:[Pe[be]]).concat([We]):!gt&&!!ze==!!it?Pe[be]=We:Pe[be]=Pe[be].concat([We]):Pe[be]===void 0&&ze?Pe[be]=it?We:[We]:gt&&!(Pe[be]===void 0||Re(be,v.counts)||Re(be,v.bools))?Pe[be]=[Pe[be],We]:Pe[be]=We}s(he,"setKey");function Ne(...X){X.forEach(function(ne){Object.keys(ne||{}).forEach(function(We){v.aliases[We]||(v.aliases[We]=[].concat(a[We]||[]),v.aliases[We].concat(We).forEach(function(Pe){if(/-/.test(Pe)&&l["camel-case-expansion"]){let be=qI(Pe);be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].concat(We).forEach(function(Pe){if(Pe.length>1&&/[A-Z]/.test(Pe)&&l["camel-case-expansion"]){let be=IO(Pe,"-");be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].forEach(function(Pe){v.aliases[Pe]=[We].concat(v.aliases[We].filter(function(be){return Pe!==be}))}))})})}s(Ne,"extendAliases");function Re(X,ne){let We=[].concat(v.aliases[X]||[],X),Pe=Object.keys(ne),be=We.find(ze=>Pe.includes(ze));return be?ne[be]:!1}s(Re,"checkAllAliases");function Je(X){let ne=Object.keys(v);return[].concat(ne.map(Pe=>v[Pe])).some(function(Pe){return Array.isArray(Pe)?Pe.includes(X):Pe[X]})}s(Je,"hasAnyFlag");function Me(X,...ne){return[].concat(...ne).some(function(Pe){let be=X.match(Pe);return be&&Je(be[1])})}s(Me,"hasFlagsMatching");function pt(X){if(X.match(b)||!X.match(/^-[^-]+/))return!1;let ne=!0,We,Pe=X.slice(1).split("");for(let be=0;be<Pe.length;be++){if(We=X.slice(be+2),!Je(Pe[be])){ne=!1;break}if(Pe[be+1]&&Pe[be+1]==="="||We==="-"||/[A-Za-z]/.test(Pe[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||Pe[be+1]&&Pe[be+1].match(/\W/))break}return ne}s(pt,"hasAllShortFlags");function Tt(X){return l["unknown-options-as-args"]&&Ct(X)}s(Tt,"isUnknownOptionAsArg");function Ct(X){return X=X.replace(/^-{3,}/,"--"),X.match(b)||pt(X)?!1:!Me(X,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(Ct,"isUnknownOption");function bt(X){return!Re(X,v.bools)&&!Re(X,v.counts)&&`${X}`in c?c[X]:ce(Oe(X))}s(bt,"defaultValue");function ce(X){return{[zf.BOOLEAN]:!0,[zf.STRING]:"",[zf.NUMBER]:void 0,[zf.ARRAY]:[]}[X]}s(ce,"defaultForType");function Oe(X){let ne=zf.BOOLEAN;return Re(X,v.strings)?ne=zf.STRING:Re(X,v.numbers)?ne=zf.NUMBER:Re(X,v.bools)?ne=zf.BOOLEAN:Re(X,v.arrays)&&(ne=zf.ARRAY),ne}s(Oe,"guessType");function ye(X){return X===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(X=>Re(X,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",X)),!0):Re(X,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",X)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,B),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function Upt(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(r[o]=i)}),r}s(Upt,"combineAliases");function one(t){return t!==void 0?t+1:1}s(one,"increment");function Zwe(t){return t==="__proto__"?"___proto___":t}s(Zwe,"sanitizeKey");function qpt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(qpt,"stripQuotes");var n_e=require("fs");var sne,ane,lne,e_e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,t_e=(ane=(sne=process==null?void 0:process.versions)===null||sne===void 0?void 0:sne.node)!==null&&ane!==void 0?ane:(lne=process==null?void 0:process.version)===null||lne===void 0?void 0:lne.slice(1);if(t_e&&Number(t_e.match(/^([^.]+)/)[1])<e_e)throw Error(`yargs parser supports a minimum Node.js version of ${e_e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Wpt=process?process.env:{},i_e=new wO({cwd:process.cwd,env:s(()=>Wpt,"env"),format:r_e.format,normalize:_O.normalize,resolve:_O.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,n_e.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),H8=s(function(e,r){return i_e.parse(e.slice(),r).argv},"Parser");H8.detailed=function(t,e){return i_e.parse(t.slice(),e)};H8.camelCase=qI;H8.decamelize=IO;H8.looksLikeNumber=TO;var o_e=H8;var Sm=require("path");f();function Gpt(){return Hpt()?0:1}s(Gpt,"getProcessArgvBinIndex");function Hpt(){return jpt()&&!process.defaultApp}s(Hpt,"isBundledElectronApp");function jpt(){return!!process.versions.electron}s(jpt,"isElectronApp");function s_e(){return process.argv[Gpt()]}s(s_e,"getProcessArgvBin");f();var gs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var XS=require("fs"),a_e=require("util"),l_e=require("path");var c_e={fs:{readFileSync:XS.readFileSync,writeFile:XS.writeFile},format:a_e.format,resolve:l_e.resolve,exists:s(t=>{try{return(0,XS.statSync)(t).isFile()}catch{return!1}},"exists")};f();var _m,cne=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),_m.format.apply(_m.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?r:n;this.cache[this.locale][r]&&(a=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),_m.format.apply(_m.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,o){let a=r[o+1];n+=i,typeof a<"u"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,o=r.cb,a=this._resolveLocaleFile(n,i),l=JSON.stringify(this.cache[i],null,2);_m.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{_m.fs.readFileSync&&(e=JSON.parse(_m.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=_m.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=_m.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return _m.exists(e)}};function u_e(t,e){_m=e;let r=new cne(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}s(u_e,"y18n");var Vpt=s(t=>u_e(t,c_e),"y18n"),d_e=Vpt;var $pt="require is not supported by ESM",f_e="loading a directory of commands is not supported yet for ESM",j8;try{j8=(0,h_e.fileURLToPath)(importMetaUrlShim)}catch{j8=process.cwd()}var zpt=j8.substring(0,j8.lastIndexOf("node_modules")),g_e={assert:{notStrictEqual:SO.notStrictEqual,strictEqual:SO.strictEqual},cliui:nne,findUp:ine,getEnv:s(t=>process.env[t],"getEnv"),inspect:p_e.inspect,getCallerFile:s(()=>{throw new gs(f_e)},"getCallerFile"),getProcessArgvBin:s_e,mainFilename:zpt||process.cwd(),Parser:o_e,path:{basename:Sm.basename,dirname:Sm.dirname,extname:Sm.extname,relative:Sm.relative,resolve:Sm.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:m_e.readFileSync,require:s(()=>{throw new gs($pt)},"require"),requireDirectory:s(()=>{throw new gs(f_e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:d_e({directory:(0,Sm.resolve)(j8,"../../../locales"),updateFiles:!1})};f();f();f();function ku(t,e,r,n){r.assert.notStrictEqual(t,e,n)}s(ku,"assertNotStrictEqual");function une(t,e){e.assert.strictEqual(typeof t,"string")}s(une,"assertSingleKey");function ZS(t){return Object.keys(t)}s(ZS,"objectKeys");f();function As(t){return!!t&&!!t.then&&typeof t.then=="function"}s(As,"isPromise");f();f();f();function iv(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===r.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(n,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(n,"").split("|"),variadic:c})}),o}s(iv,"parseCommand");var Ypt=["first","second","third","fourth","fifth","sixth"];function Cr(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[iv(`cmd ${t}`),e,r]}s(n,"parseArgs");try{let i=0,[o,a,l]=n(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new gs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new gs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=A_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&y_e(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=A_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&y_e(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(Cr,"argsert");function A_e(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(A_e,"guessType");function y_e(t,e,r){throw new gs(`Invalid ${Ypt[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(y_e,"argumentTypeError");var RO=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0,i=!1){if(Cr("<array|function> [boolean] [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=r,a.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=r,o.global=n,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...n[r]||[],r];return i.option?!o.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function C_e(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(C_e,"commandMiddlewareFactory");function WI(t,e,r,n){return r.reduce((i,o)=>{if(o.applyBeforeValidation!==n)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(As(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return As(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(WI,"applyMiddleware");f();function GI(t,e,r=n=>{throw n}){try{let n=Kpt(t)?t():t;return As(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}s(GI,"maybeAsyncResult");function Kpt(t){return typeof t=="function"}s(Kpt,"isFunction");f();function dne(t){if(typeof require>"u")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}s(dne,"whichModule");var e5=/(^\*)|(^\$0)/,fne=class{static{s(this,"CommandInstance")}constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,o,a){let l=[],c=C_e(o);if(i=i||(()=>{}),Array.isArray(e))if(Jpt(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(Zpt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(x_e(n)){this.addHandler([e].concat(l),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=iv(e);l=l.map(m=>iv(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>e5.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(e5,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),r!==!1&&this.usage.command(e,r,d,l,a),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=r.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,r,n.aliases,u,i,o,a);return As(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,r)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,o,a,l,c){let u=r.builder,d=n;if(kO(u)){n.getInternalMethods().getUsageInstance().freeze();let p=u(n.getInternalMethods().reset(i),c);if(As(p))return p.then(m=>(d=b_e(m)?m:n,this.parseAndUpdateUsage(e,r,d,o,a,l)))}else Xpt(u)&&(n.getInternalMethods().getUsageInstance().freeze(),d=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,r,d,o,a,l)}parseAndUpdateUsage(e,r,n,i,o,a){e&&n.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let l=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return As(l)?l.then(c=>({aliases:n.parsed.aliases,innerArgv:c})):{aliases:n.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=e5.test(r.original)?r.original.replace(e5,"").trim():r.original,i=e.filter(o=>!e5.test(o));return i.push(n),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,r,n,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);n=GI(n,d=>(u(d),d))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,u,!1,!1),n=WI(n,a,l,!1),n=GI(n,d=>{let p=r.handler(d);return As(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),As(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}applyMiddlewareAndGetResult(e,r,n,i,o,a,l){let c={};if(o)return n;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(r,n,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares),d=WI(n,l,u,!0);return As(d)?d.then(p=>this.handleValidationAndGetResult(e,r,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,r,d,i,a,l,u,c)}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,r._.length);o.length;){let c=o.shift();this.populatePositional(c,r,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,r,l)}return r._=n.commands.concat(r._.map(c=>""+c)),this.postProcessPositionals(r,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=iv(e);return n.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a,r.demand[o]=!0}),n.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(r.array.push(o),r.default[o]=[]),r.alias[o]=a}),r}postProcessPositionals(e,r,n,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(n.default,o.default);for(let u of Object.keys(n.alias))o.alias[u]=(o.alias[u]||[]).concat(n.alias[u]);o.array=o.array.concat(n.array),o.config={};let a=[];if(Object.keys(r).forEach(u=>{r[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(r);Object.keys(r).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(r[d]||(r[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,r){let{default:n}=e.getOptions();return Object.prototype.hasOwnProperty.call(n,r)||Object.prototype.hasOwnProperty.call(n,this.shim.Parser.camelCase(r))}isInConfigs(e,r){let{configObjects:n}=e.getOptions();return n.some(i=>Object.prototype.hasOwnProperty.call(i,r))||n.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(r)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=e5.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(kO(r))return r(e,!0);x_e(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=dne(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;ku(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();ku(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function v_e(t,e,r,n){return new fne(t,e,r,n)}s(v_e,"command");function x_e(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(x_e,"isCommandBuilderDefinition");function Jpt(t){return t.every(e=>typeof e=="string")}s(Jpt,"isCommandAndAliases");function kO(t){return typeof t=="function"}s(kO,"isCommandBuilderCallback");function Xpt(t){return typeof t=="object"}s(Xpt,"isCommandBuilderOptionDefinitions");function Zpt(t){return typeof t=="object"&&!Array.isArray(t)}s(Zpt,"isCommandHandlerDefinition");f();f();function ov(t={},e=()=>!0){let r={};return ZS(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}s(ov,"objFilter");f();function sv(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}s(sv,"setBlocking");function emt(t){return typeof t=="boolean"}s(emt,"isBoolean");function I_e(t,e){let r=e.y18n.__,n={},i=[];n.failFn=s(function(O){i.push(O)},"failFn");let o=null,a=null,l=!0;n.showHelpOnFail=s(function(O=!0,le){let[ie,j]=typeof O=="string"?[!0,O]:[O,le];return t.getInternalMethods().isGlobalContext()&&(a=j),o=j,l=ie,n},"showHelpOnFailFn");let c=!1;n.fail=s(function(O,le){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let j=i.length-1;j>=0;--j){let W=i[j];if(emt(W)){if(le)throw le;if(O)throw Error(O)}else W(O,le,n)}else{if(t.getExitProcess()&&sv(!0),!c){c=!0,l&&(t.showHelp("error"),ie.error()),(O||le)&&ie.error(O||le);let j=o||a;j&&((O||le)&&ie.error(""),ie.error(j))}if(le=le||new gs(O),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,le);throw le}},"fail");let u=[],d=!1;n.usage=(H,O)=>H===null?(d=!0,u=[],n):(d=!1,u.push([H,O||""]),n),n.getUsage=()=>u,n.getUsageDisabled=()=>d,n.getPositionalGroupName=()=>r("Positionals:");let p=[];n.example=(H,O)=>{p.push([H,O||""])};let m=[];n.command=s(function(O,le,ie,j,W=!1){ie&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([O,le||"",ie,j,W])},"command"),n.getCommands=()=>m;let h={};n.describe=s(function(O,le){Array.isArray(O)?O.forEach(ie=>{n.describe(ie,le)}):typeof O=="object"?Object.keys(O).forEach(ie=>{n.describe(ie,O[ie])}):h[O]=le},"describe"),n.getDescriptions=()=>h;let g=[];n.epilog=H=>{g.push(H)};let y=!1,v;n.wrap=H=>{y=!0,v=H},n.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=te(),y=!0),v);let b="__yargsString__:";n.deferY18nLookup=H=>b+H,n.help=s(function(){if(k)return k;_();let O=t.customScriptName?t.$0:e.path.basename(t.$0),le=t.getDemandedOptions(),ie=t.getDemandedCommands(),j=t.getDeprecatedOptions(),W=t.getGroups(),Y=t.getOptions(),ee=[];ee=ee.concat(Object.keys(h)),ee=ee.concat(Object.keys(le)),ee=ee.concat(Object.keys(ie)),ee=ee.concat(Object.keys(Y.default)),ee=ee.filter(N),ee=Object.keys(ee.reduce((Me,pt)=>(pt!=="_"&&(Me[pt]=!0),Me),{}));let pe=n.getWrap(),re=e.cliui({width:pe,wrap:!!pe});if(!d){if(u.length)u.forEach(Me=>{re.div({text:`${Me[0].replace(/\$0/g,O)}`}),Me[1]&&re.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),re.div();else if(m.length){let Me=null;ie._?Me=`${O} <${r("command")}>
`:Me=`${O} [${r("command")}]
`,re.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){re.div(r("Commands:"));let Me=t.getInternalMethods().getContext(),pt=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((Ct,bt)=>Ct[0].localeCompare(bt[0])));let Tt=O?`${O} `:"";m.forEach(Ct=>{let bt=`${Tt}${pt}${Ct[0].replace(/^\$0 ?/,"")}`;re.span({text:bt,padding:[0,2,0,2],width:E(m,pe,`${O}${pt}`)+4},{text:Ct[1]});let ce=[];Ct[2]&&ce.push(`[${r("default")}]`),Ct[3]&&Ct[3].length&&ce.push(`[${r("aliases:")} ${Ct[3].join(", ")}]`),Ct[4]&&(typeof Ct[4]=="string"?ce.push(`[${r("deprecated: %s",Ct[4])}]`):ce.push(`[${r("deprecated")}]`)),ce.length?re.div({text:ce.join(" "),padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}let fe=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);ee=ee.filter(Me=>!t.parsed.newAliases[Me]&&fe.every(pt=>(Y.alias[pt]||[]).indexOf(Me)===-1));let he=r("Options:");W[he]||(W[he]=[]),B(ee,Y.alias,W,he);let Ne=s(Me=>/^--/.test(BO(Me)),"isLongSwitch"),Re=Object.keys(W).filter(Me=>W[Me].length>0).map(Me=>{let pt=W[Me].filter(N).map(Tt=>{if(fe.includes(Tt))return Tt;for(let Ct=0,bt;(bt=fe[Ct])!==void 0;Ct++)if((Y.alias[bt]||[]).includes(Tt))return bt;return Tt});return{groupName:Me,normalizedKeys:pt}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:pt})=>{let Tt=pt.reduce((Ct,bt)=>(Ct[bt]=[bt].concat(Y.alias[bt]||[]).map(ce=>Me===n.getPositionalGroupName()?ce:(/^[0-9]$/.test(ce)?Y.boolean.includes(bt)?"-":"--":ce.length>1?"--":"-")+ce).sort((ce,Oe)=>Ne(ce)===Ne(Oe)?0:Ne(ce)?1:-1).join(", "),Ct),{});return{groupName:Me,normalizedKeys:pt,switches:Tt}});if(Re.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).some(({normalizedKeys:Me,switches:pt})=>!Me.every(Tt=>Ne(pt[Tt])))&&Re.filter(({groupName:Me})=>Me!==n.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:pt})=>{Me.forEach(Tt=>{Ne(pt[Tt])&&(pt[Tt]=tmt(pt[Tt],4))})}),Re.forEach(({groupName:Me,normalizedKeys:pt,switches:Tt})=>{re.div(Me),pt.forEach(Ct=>{let bt=Tt[Ct],ce=h[Ct]||"",Oe=null;ce.includes(b)&&(ce=r(ce.substring(b.length))),Y.boolean.includes(Ct)&&(Oe=`[${r("boolean")}]`),Y.count.includes(Ct)&&(Oe=`[${r("count")}]`),Y.string.includes(Ct)&&(Oe=`[${r("string")}]`),Y.normalize.includes(Ct)&&(Oe=`[${r("string")}]`),Y.array.includes(Ct)&&(Oe=`[${r("array")}]`),Y.number.includes(Ct)&&(Oe=`[${r("number")}]`);let ye=s(ne=>typeof ne=="string"?`[${r("deprecated: %s",ne)}]`:`[${r("deprecated")}]`,"deprecatedExtra"),tt=[Ct in j?ye(j[Ct]):null,Oe,Ct in le?`[${r("required")}]`:null,Y.choices&&Y.choices[Ct]?`[${r("choices:")} ${n.stringifiedValues(Y.choices[Ct])}]`:null,q(Y.default[Ct],Y.defaultDescription[Ct])].filter(Boolean).join(" ");re.span({text:BO(bt),padding:[0,2,0,2+E_e(bt)],width:E(Tt,pe)+4},ce);let X=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!X?re.div({text:tt,padding:[0,0,0,2],align:"right"}):re.div()}),re.div()}),p.length&&(re.div(r("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,O)}),p.forEach(Me=>{Me[1]===""?re.div({text:Me[0],padding:[0,2,0,2]}):re.div({text:Me[0],padding:[0,2,0,2],width:E(p,pe)+4},{text:Me[1]})}),re.div()),g.length>0){let Me=g.map(pt=>pt.replace(/\$0/g,O)).join(`
`);re.div(`${Me}
`)}return re.toString().replace(/\s*$/,"")},"help");function E(H,O,le){let ie=0;return Array.isArray(H)||(H=Object.values(H).map(j=>[j])),H.forEach(j=>{ie=Math.max(e.stringWidth(le?`${le} ${BO(j[0])}`:BO(j[0]))+E_e(j[0]),ie)}),O&&(ie=Math.min(ie,parseInt((O*.5).toString(),10))),ie}s(E,"maxWidth");function _(){let H=t.getDemandedOptions(),O=t.getOptions();(Object.keys(O.alias)||[]).forEach(le=>{O.alias[le].forEach(ie=>{h[ie]&&n.describe(le,h[ie]),ie in H&&t.demandOption(le,H[ie]),O.boolean.includes(ie)&&t.boolean(le),O.count.includes(ie)&&t.count(le),O.string.includes(ie)&&t.string(le),O.normalize.includes(ie)&&t.normalize(le),O.array.includes(ie)&&t.array(le),O.number.includes(ie)&&t.number(le)})})}s(_,"normalizeAliases");let k;n.cacheHelpMessage=function(){k=this.help()},n.clearCachedHelpMessage=function(){k=void 0},n.hasCachedHelpMessage=function(){return!!k};function B(H,O,le,ie){let j=[],W=null;return Object.keys(le).forEach(Y=>{j=j.concat(le[Y])}),H.forEach(Y=>{W=[Y].concat(O[Y]),W.some(ee=>j.indexOf(ee)!==-1)||le[ie].push(Y)}),j}s(B,"addUngroupedKeys");function N(H){return t.getOptions().hiddenOptions.indexOf(H)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),n.showHelp=H=>{let O=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:O[H])(n.help())},n.functionDescription=H=>["(",H.name?e.Parser.decamelize(H.name,"-"):r("generated-value"),")"].join(""),n.stringifiedValues=s(function(O,le){let ie="",j=le||", ",W=[].concat(O);return!O||!W.length||W.forEach(Y=>{ie.length&&(ie+=j),ie+=JSON.stringify(Y)}),ie},"stringifiedValues");function q(H,O){let le=`[${r("default:")} `;if(H===void 0&&!O)return null;if(O)le+=O;else switch(typeof H){case"string":le+=`"${H}"`;break;case"object":le+=JSON.stringify(H);break;default:le+=H}return`${le}]`}s(q,"defaultString");function te(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(te,"windowWidth");let me=null;n.version=H=>{me=H},n.showVersion=H=>{let O=t.getInternalMethods().getLoggerInstance();H||(H="error"),(typeof H=="function"?H:O[H])(me)},n.reset=s(function(O){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=ov(h,le=>!O[le]),n},"reset");let oe=[];return n.freeze=s(function(){oe.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),n.unfreeze=s(function(O=!1){let le=oe.pop();le&&(O?(h={...le.descriptions,...h},m=[...le.commands,...m],u=[...le.usages,...u],p=[...le.examples,...p],g=[...le.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=le)},"unfreeze"),n}s(I_e,"usage");function pne(t){return typeof t=="object"}s(pne,"isIndentedText");function tmt(t,e){return pne(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(tmt,"addIndentation");function E_e(t){return pne(t)?t.indentation:0}s(E_e,"getIndentation");function BO(t){return pne(t)?t.text:t}s(BO,"getText");f();f();var T_e=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,w_e=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var mne=class{static{s(this,"Completion")}constructor(e,r,n,i){var o,a,l;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,r,n,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(kO(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,n),this.optionCompletions(a,e,r,n),this.choicesFromOptionsCompletions(a,e,r,n),this.choicesFromPositionalsCompletions(a,e,r,n),i(null,a)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&!this.previousArgHasChoices(r)&&this.usage.getCommands().forEach(o=>{let a=iv(o[0]).cmd;if(r.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,r,n,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(r)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(r,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,r,n,i){if(this.previousArgHasChoices(r)){let o=this.getPreviousArgChoices(r);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,r,n,i){if(i===""&&e.length>0&&this.previousArgHasChoices(r))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[n._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let r=e[e.length-1],n="";if(!r.startsWith("-")&&e.length>1&&(n=r,r=e[e.length-2]),!r.startsWith("-"))return;let i=r.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!n||c.startsWith(n))}previousArgHasChoices(e){let r=this.getPreviousArgChoices(e);return r!==void 0&&r.length>0}argsContainKey(e,r,n){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(r)||n&&i(`no-${r}`))return!0;if(this.aliases){for(let o of this.aliases[r])if(i(o))return!0}return!1}completeOptionKey(e,r,n,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(n)&&p(e)?"-":"--";r.push(m+u),i&&r.push(m+"no-"+u)}customCompletion(e,r,n,i){if(ku(this.customCompletionFunction,null,this.shim),nmt(this.customCompletionFunction)){let o=this.customCompletionFunction(n,r);return As(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return imt(this.customCompletionFunction)?this.customCompletionFunction(n,r,(o=i)=>this.defaultCompletion(e,r,n,o),o=>{i(null,o)}):this.customCompletionFunction(n,r,o=>{i(null,o)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,n,r):a=>this.defaultCompletion(e,a,n,r);return As(i)?i.then(o):o(i)}generateCompletionScript(e,r){let n=this.zshShell?w_e:T_e,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function __e(t,e,r,n){return new mne(t,e,r,n)}s(__e,"completion");function nmt(t){return t.length<3}s(nmt,"isSyncCompletionFunction");function imt(t){return t.length>3}s(imt,"isFallbackCompletionFunction");f();f();function S_e(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:n>1&&i>1&&e.charAt(n-2)===t.charAt(i-1)&&e.charAt(n-1)===t.charAt(i-2)?r[n][i]=r[n-2][i-2]+1:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}s(S_e,"levenshtein");var R_e=["$0","--","_"];function k_e(t,e,r){let n=r.y18n.__,i=r.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!R_e.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let B=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+B;N<p._.length&&p._.slice(N).forEach(q=>{q=String(q),!_.commands.includes(q)&&!E.includes(q)&&E.push(q)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{R_e.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=n("Invalid values:");g.forEach(v=>{y+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){Cr("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(ku(m,void 0,r),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${n("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){Cr("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[r.Parser.camelCase(m)]!==void 0&&p[r.Parser.camelCase(h)]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=S_e(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(n("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=ov(a,m=>!p[m]),c=ov(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();ku(p,void 0,r),{implied:a,conflicting:c}=p},"unfreeze"),o}s(k_e,"validation");f();var hne=[],V8;function DO(t,e,r,n){V8=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=smt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}omt(a),hne.push(a),i=o?JSON.parse(V8.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=DO(i,V8.path.dirname(a),r,V8)}return hne=[],r?B_e(i,t):Object.assign({},i,t)}s(DO,"applyExtends");function omt(t){if(hne.indexOf(t)>-1)throw new gs(`Circular extended configurations: '${t}'.`)}s(omt,"checkForCircularExtends");function smt(t,e){return V8.path.resolve(t,e)}s(smt,"getPathToDefaultConfig");function B_e(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(n,"isObject"),Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=B_e(t[i],e[i]):r[i]=e[i];return r}s(B_e,"mergeDeep");var Er=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},de=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Ra,HI,$8,Yf,v0,PO,av,jI,NO,Kf,LO,Jf,xg,b0,Xf,FO,t5,Ml,Or,MO,QO,E0,VI,r5,$I,lv,OO,Fn,zI,YI,KI,jn,UO,vg,la;function J_e(t){return(e=[],r=t.process.cwd(),n)=>{let i=new wne(e,r,n,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(J_e,"YargsFactory");var D_e=Symbol("copyDoubleDash"),P_e=Symbol("copyDoubleDash"),gne=Symbol("deleteFromParserHintObject"),N_e=Symbol("emitWarning"),L_e=Symbol("freeze"),F_e=Symbol("getDollarZero"),JI=Symbol("getParserConfiguration"),M_e=Symbol("getUsageConfiguration"),Ane=Symbol("guessLocale"),Q_e=Symbol("guessVersion"),O_e=Symbol("parsePositionalNumbers"),yne=Symbol("pkgUp"),cv=Symbol("populateParserHintArray"),n5=Symbol("populateParserHintSingleValueDictionary"),Cne=Symbol("populateParserHintArrayDictionary"),xne=Symbol("populateParserHintDictionary"),vne=Symbol("sanitizeKey"),bne=Symbol("setKey"),Ene=Symbol("unfreeze"),U_e=Symbol("validateAsync"),q_e=Symbol("getCommandInstance"),W_e=Symbol("getContext"),G_e=Symbol("getHasOutput"),H_e=Symbol("getLoggerInstance"),j_e=Symbol("getParseContext"),V_e=Symbol("getUsageInstance"),$_e=Symbol("getValidationInstance"),qO=Symbol("hasParseCallback"),z_e=Symbol("isGlobalContext"),XI=Symbol("postProcess"),Y_e=Symbol("rebase"),Ine=Symbol("reset"),z8=Symbol("runYargsParserAndExecuteCommands"),Tne=Symbol("runValidation"),K_e=Symbol("setHasOutput"),ZI=Symbol("kTrackManuallySetKeys"),wne=class{static{s(this,"YargsInstance")}constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Ra.set(this,void 0),HI.set(this,void 0),$8.set(this,{commands:[],fullCommands:[]}),Yf.set(this,null),v0.set(this,null),PO.set(this,"show-hidden"),av.set(this,null),jI.set(this,!0),NO.set(this,{}),Kf.set(this,!0),LO.set(this,[]),Jf.set(this,void 0),xg.set(this,{}),b0.set(this,!1),Xf.set(this,null),FO.set(this,!0),t5.set(this,void 0),Ml.set(this,""),Or.set(this,void 0),MO.set(this,void 0),QO.set(this,{}),E0.set(this,null),VI.set(this,null),r5.set(this,{}),$I.set(this,{}),lv.set(this,void 0),OO.set(this,!1),Fn.set(this,void 0),zI.set(this,!1),YI.set(this,!1),KI.set(this,!1),jn.set(this,void 0),UO.set(this,{}),vg.set(this,null),la.set(this,void 0),Er(this,Fn,i,"f"),Er(this,lv,e,"f"),Er(this,HI,r,"f"),Er(this,MO,n,"f"),Er(this,Jf,new RO(this),"f"),this.$0=this[F_e](),this[Ine](),Er(this,Ra,de(this,Ra,"f"),"f"),Er(this,jn,de(this,jn,"f"),"f"),Er(this,la,de(this,la,"f"),"f"),Er(this,Or,de(this,Or,"f"),"f"),de(this,Or,"f").showHiddenOpt=de(this,PO,"f"),Er(this,t5,this[P_e](),"f")}addHelpOpt(e,r){let n="help";return Cr("[string|boolean] [string]",[e,r],arguments.length),de(this,Xf,"f")&&(this[gne](de(this,Xf,"f")),Er(this,Xf,null,"f")),e===!1&&r===void 0?this:(Er(this,Xf,typeof e=="string"?e:n,"f"),this.boolean(de(this,Xf,"f")),this.describe(de(this,Xf,"f"),r||de(this,jn,"f").deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Cr("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:de(this,PO,"f");return this.boolean(n),this.describe(n,r||de(this,jn,"f").deferY18nLookup("Show hidden options")),de(this,Or,"f").showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Cr("<object|string|array> [string|array]",[e,r],arguments.length),this[Cne](this.alias.bind(this),"alias",e,r),this}array(e){return Cr("<array|string>",[e],arguments.length),this[cv]("array",e),this[ZI](e),this}boolean(e){return Cr("<array|string>",[e],arguments.length),this[cv]("boolean",e),this[ZI](e),this}check(e,r){return Cr("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>GI(()=>e(n,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&de(this,jn,"f").fail(o.toString(),o):de(this,jn,"f").fail(de(this,Fn,"f").y18n.__("Argument check failed: %s",e.toString())),n),o=>(de(this,jn,"f").fail(o.message?o.message:o.toString(),o),n)),!1,r),this}choices(e,r){return Cr("<object|string|array> [string|array]",[e,r],arguments.length),this[Cne](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Cr("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new gs("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new gs("coerce callback must be provided");return de(this,Or,"f").key[e]=!0,de(this,Jf,"f").addCoerceMiddleware((n,i)=>{let o;return Object.prototype.hasOwnProperty.call(n,e)?GI(()=>(o=i.getAliases(),r(n[e])),l=>{n[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])n[u]=l;return n},l=>{throw new gs(l.message)}):n},e),this}conflicts(e,r){return Cr("<string|object> [string|array]",[e,r],arguments.length),de(this,la,"f").conflicts(e,r),this}config(e="config",r,n){return Cr("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=DO(e,de(this,HI,"f"),this[JI]()["deep-merge-config"]||!1,de(this,Fn,"f")),de(this,Or,"f").configObjects=(de(this,Or,"f").configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||de(this,jn,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{de(this,Or,"f").config[i]=n||!0}),this)}completion(e,r,n){return Cr("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),Er(this,v0,e||de(this,v0,"f")||"completion","f"),!r&&r!==!1&&(r="generate completion script"),this.command(de(this,v0,"f"),r),n&&de(this,Yf,"f").registerFunction(n),this}command(e,r,n,i,o,a){return Cr("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,o,a],arguments.length),de(this,Ra,"f").addHandler(e,r,n,i,o,a),this}commands(e,r,n,i,o,a){return this.command(e,r,n,i,o,a)}commandDir(e,r){Cr("<string> [object]",[e,r],arguments.length);let n=de(this,MO,"f")||de(this,Fn,"f").require;return de(this,Ra,"f").addDirectory(e,n,de(this,Fn,"f").getCallerFile(),r),this}count(e){return Cr("<array|string>",[e],arguments.length),this[cv]("count",e),this[ZI](e),this}default(e,r,n){return Cr("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(une(e,de(this,Fn,"f")),de(this,Or,"f").defaultDescription[e]=n),typeof r=="function"&&(une(e,de(this,Fn,"f")),de(this,Or,"f").defaultDescription[e]||(de(this,Or,"f").defaultDescription[e]=de(this,jn,"f").functionDescription(r)),r=r.call()),this[n5](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Cr("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),de(this,Or,"f").demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{ku(n,!0,de(this,Fn,"f")),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(ku(n,!0,de(this,Fn,"f")),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{ku(n,!0,de(this,Fn,"f")),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n>"u")&&this.demandOption(e),this}demandOption(e,r){return Cr("<object|string|array> [string]",[e,r],arguments.length),this[n5](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Cr("<string> [string|boolean]",[e,r],arguments.length),de(this,Or,"f").deprecatedOptions[e]=r,this}describe(e,r){return Cr("<object|string|array> [string]",[e,r],arguments.length),this[bne](e,!0),de(this,jn,"f").describe(e,r),this}detectLocale(e){return Cr("<boolean>",[e],arguments.length),Er(this,jI,e,"f"),this}env(e){return Cr("[string|boolean]",[e],arguments.length),e===!1?delete de(this,Or,"f").envPrefix:de(this,Or,"f").envPrefix=e||"",this}epilogue(e){return Cr("<string>",[e],arguments.length),de(this,jn,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Cr("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):de(this,jn,"f").example(e,r),this}exit(e,r){Er(this,b0,!0,"f"),Er(this,av,r,"f"),de(this,Kf,"f")&&de(this,Fn,"f").process.exit(e)}exitProcess(e=!0){return Cr("[boolean]",[e],arguments.length),Er(this,Kf,e,"f"),this}fail(e){if(Cr("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new gs("Invalid first argument. Expected function or boolean 'false'");return de(this,jn,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Cr("<array> [function]",[e,r],arguments.length),r?de(this,Yf,"f").getCompletion(e,r):new Promise((n,i)=>{de(this,Yf,"f").getCompletion(e,(o,a)=>{o?i(o):n(a)})})}getDemandedOptions(){return Cr([],0),de(this,Or,"f").demandedOptions}getDemandedCommands(){return Cr([],0),de(this,Or,"f").demandedCommands}getDeprecatedOptions(){return Cr([],0),de(this,Or,"f").deprecatedOptions}getDetectLocale(){return de(this,jI,"f")}getExitProcess(){return de(this,Kf,"f")}getGroups(){return Object.assign({},de(this,xg,"f"),de(this,$I,"f"))}getHelp(){if(Er(this,b0,!0,"f"),!de(this,jn,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[z8](de(this,lv,"f"),void 0,void 0,0,!0);if(As(r))return r.then(()=>de(this,jn,"f").help())}let e=de(this,Ra,"f").runDefaultBuilderOn(this);if(As(e))return e.then(()=>de(this,jn,"f").help())}return Promise.resolve(de(this,jn,"f").help())}getOptions(){return de(this,Or,"f")}getStrict(){return de(this,zI,"f")}getStrictCommands(){return de(this,YI,"f")}getStrictOptions(){return de(this,KI,"f")}global(e,r){return Cr("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?de(this,Or,"f").local=de(this,Or,"f").local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{de(this,Or,"f").local.includes(n)||de(this,Or,"f").local.push(n)}),this}group(e,r){Cr("<string|array> <string>",[e,r],arguments.length);let n=de(this,$I,"f")[r]||de(this,xg,"f")[r];de(this,$I,"f")[r]&&delete de(this,$I,"f")[r];let i={};return de(this,xg,"f")[r]=(n||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return Cr("<string>",[e],arguments.length),de(this,Or,"f").hiddenOptions.push(e),this}implies(e,r){return Cr("<string|object> [number|string|array]",[e,r],arguments.length),de(this,la,"f").implies(e,r),this}locale(e){return Cr("[string]",[e],arguments.length),e===void 0?(this[Ane](),de(this,Fn,"f").y18n.getLocale()):(Er(this,jI,!1,"f"),de(this,Fn,"f").y18n.setLocale(e),this)}middleware(e,r,n){return de(this,Jf,"f").addMiddleware(e,!!r,n)}nargs(e,r){return Cr("<string|object|array> [number]",[e,r],arguments.length),this[n5](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Cr("<array|string>",[e],arguments.length),this[cv]("normalize",e),this}number(e){return Cr("<array|string>",[e],arguments.length),this[cv]("number",e),this[ZI](e),this}option(e,r){if(Cr("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),this[ZI](e),de(this,vg,"f")&&(e==="version"||r?.alias==="version")&&this[N_e](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),de(this,Or,"f").key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(de(this,Or,"f").defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let o=r.describe||r.description||r.desc,a=de(this,jn,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Cr("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[L_e](),typeof e>"u"&&(e=de(this,lv,"f")),typeof r=="object"&&(Er(this,VI,r,"f"),r=n),typeof r=="function"&&(Er(this,E0,r,"f"),r=!1),r||Er(this,lv,e,"f"),de(this,E0,"f")&&Er(this,Kf,!1,"f");let i=this[z8](e,!!r),o=this.parsed;return de(this,Yf,"f").setParsed(this.parsed),As(i)?i.then(a=>(de(this,E0,"f")&&de(this,E0,"f").call(this,de(this,av,"f"),a,de(this,Ml,"f")),a)).catch(a=>{throw de(this,E0,"f")&&de(this,E0,"f")(a,this.parsed.argv,de(this,Ml,"f")),a}).finally(()=>{this[Ene](),this.parsed=o}):(de(this,E0,"f")&&de(this,E0,"f").call(this,de(this,av,"f"),i,de(this,Ml,"f")),this[Ene](),this.parsed=o,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return As(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(As(i))throw new gs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Cr("<object>",[e],arguments.length),Er(this,QO,e,"f"),this}pkgConf(e,r){Cr("<string> [string]",[e,r],arguments.length);let n=null,i=this[yne](r||de(this,HI,"f"));return i[e]&&typeof i[e]=="object"&&(n=DO(i[e],r||de(this,HI,"f"),this[JI]()["deep-merge-config"]||!1,de(this,Fn,"f")),de(this,Or,"f").configObjects=(de(this,Or,"f").configObjects||[]).concat(n)),this}positional(e,r){Cr("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=ov(r,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:n.includes(a));let i=de(this,$8,"f").fullCommands[de(this,$8,"f").fullCommands.length-1],o=i?de(this,Ra,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return ZS(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(r[a]=!0):l[e]&&!(a in r)&&(r[a]=l[e])}),this.group(e,de(this,jn,"f").getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Cr("[boolean]",[e],arguments.length),Er(this,OO,e,"f"),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Cr("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&de(this,Or,"f").narg[e]?this:(this[n5](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Cr("[string] [string]",[e,r],arguments.length),e=e||this.$0,de(this,t5,"f").log(de(this,Yf,"f").generateCompletionScript(e,r||de(this,v0,"f")||"completion")),this}showHelp(e){if(Cr("[string|function]",[e],arguments.length),Er(this,b0,!0,"f"),!de(this,jn,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[z8](de(this,lv,"f"),void 0,void 0,0,!0);if(As(n))return n.then(()=>{de(this,jn,"f").showHelp(e)}),this}let r=de(this,Ra,"f").runDefaultBuilderOn(this);if(As(r))return r.then(()=>{de(this,jn,"f").showHelp(e)}),this}return de(this,jn,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Cr("[boolean|string] [string]",[e,r],arguments.length),de(this,jn,"f").showHelpOnFail(e,r),this}showVersion(e){return Cr("[string|function]",[e],arguments.length),de(this,jn,"f").showVersion(e),this}skipValidation(e){return Cr("<array|string>",[e],arguments.length),this[cv]("skipValidation",e),this}strict(e){return Cr("[boolean]",[e],arguments.length),Er(this,zI,e!==!1,"f"),this}strictCommands(e){return Cr("[boolean]",[e],arguments.length),Er(this,YI,e!==!1,"f"),this}strictOptions(e){return Cr("[boolean]",[e],arguments.length),Er(this,KI,e!==!1,"f"),this}string(e){return Cr("<array|string>",[e],arguments.length),this[cv]("string",e),this[ZI](e),this}terminalWidth(){return Cr([],0),de(this,Fn,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Cr("<object>",[e],arguments.length),Er(this,jI,!1,"f"),de(this,Fn,"f").y18n.updateLocale(e),this}usage(e,r,n,i){if(Cr("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(ku(e,null,de(this,Fn,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new gs(".usage() description must start with $0 if being used as alias for .command()")}else return de(this,jn,"f").usage(e),this}usageConfiguration(e){return Cr("<object>",[e],arguments.length),Er(this,UO,e,"f"),this}version(e,r,n){let i="version";if(Cr("[boolean|string] [string] [string]",[e,r,n],arguments.length),de(this,vg,"f")&&(this[gne](de(this,vg,"f")),de(this,jn,"f").version(void 0),Er(this,vg,null,"f")),arguments.length===0)n=this[Q_e](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return Er(this,vg,typeof e=="string"?e:i,"f"),r=r||de(this,jn,"f").deferY18nLookup("Show version number"),de(this,jn,"f").version(n||void 0),this.boolean(de(this,vg,"f")),this.describe(de(this,vg,"f"),r),this}wrap(e){return Cr("<number|null|undefined>",[e],arguments.length),de(this,jn,"f").wrap(e),this}[(Ra=new WeakMap,HI=new WeakMap,$8=new WeakMap,Yf=new WeakMap,v0=new WeakMap,PO=new WeakMap,av=new WeakMap,jI=new WeakMap,NO=new WeakMap,Kf=new WeakMap,LO=new WeakMap,Jf=new WeakMap,xg=new WeakMap,b0=new WeakMap,Xf=new WeakMap,FO=new WeakMap,t5=new WeakMap,Ml=new WeakMap,Or=new WeakMap,MO=new WeakMap,QO=new WeakMap,E0=new WeakMap,VI=new WeakMap,r5=new WeakMap,$I=new WeakMap,lv=new WeakMap,OO=new WeakMap,Fn=new WeakMap,zI=new WeakMap,YI=new WeakMap,KI=new WeakMap,jn=new WeakMap,UO=new WeakMap,vg=new WeakMap,la=new WeakMap,D_e)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[P_e](){return{log:s((...e)=>{this[qO]()||console.log(...e),Er(this,b0,!0,"f"),de(this,Ml,"f").length&&Er(this,Ml,de(this,Ml,"f")+`
`,"f"),Er(this,Ml,de(this,Ml,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[qO]()||console.error(...e),Er(this,b0,!0,"f"),de(this,Ml,"f").length&&Er(this,Ml,de(this,Ml,"f")+`
`,"f"),Er(this,Ml,de(this,Ml,"f")+e.join(" "),"f")},"error")}}[gne](e){ZS(de(this,Or,"f")).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=de(this,Or,"f")[r];Array.isArray(n)?n.includes(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete de(this,jn,"f").getDescriptions()[e]}[N_e](e,r,n){de(this,NO,"f")[n]||(de(this,Fn,"f").process.emitWarning(e,r),de(this,NO,"f")[n]=!0)}[L_e](){de(this,LO,"f").push({options:de(this,Or,"f"),configObjects:de(this,Or,"f").configObjects.slice(0),exitProcess:de(this,Kf,"f"),groups:de(this,xg,"f"),strict:de(this,zI,"f"),strictCommands:de(this,YI,"f"),strictOptions:de(this,KI,"f"),completionCommand:de(this,v0,"f"),output:de(this,Ml,"f"),exitError:de(this,av,"f"),hasOutput:de(this,b0,"f"),parsed:this.parsed,parseFn:de(this,E0,"f"),parseContext:de(this,VI,"f")}),de(this,jn,"f").freeze(),de(this,la,"f").freeze(),de(this,Ra,"f").freeze(),de(this,Jf,"f").freeze()}[F_e](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(de(this,Fn,"f").process.argv()[0])?r=de(this,Fn,"f").process.argv().slice(1,2):r=de(this,Fn,"f").process.argv().slice(0,1),e=r.map(n=>{let i=this[Y_e](de(this,HI,"f"),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),de(this,Fn,"f").getEnv("_")&&de(this,Fn,"f").getProcessArgvBin()===de(this,Fn,"f").getEnv("_")&&(e=de(this,Fn,"f").getEnv("_").replace(`${de(this,Fn,"f").path.dirname(de(this,Fn,"f").process.execPath())}/`,"")),e}[JI](){return de(this,QO,"f")}[M_e](){return de(this,UO,"f")}[Ane](){if(!de(this,jI,"f"))return;let e=de(this,Fn,"f").getEnv("LC_ALL")||de(this,Fn,"f").getEnv("LC_MESSAGES")||de(this,Fn,"f").getEnv("LANG")||de(this,Fn,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[Q_e](){return this[yne]().version||"unknown"}[O_e](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)de(this,Fn,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[yne](e){let r=e||"*";if(de(this,r5,"f")[r])return de(this,r5,"f")[r];let n={};try{let i=e||de(this,Fn,"f").mainFilename;!e&&de(this,Fn,"f").path.extname(i)&&(i=de(this,Fn,"f").path.dirname(i));let o=de(this,Fn,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});ku(o,void 0,de(this,Fn,"f")),n=JSON.parse(de(this,Fn,"f").readFileSync(o,"utf8"))}catch{}return de(this,r5,"f")[r]=n||{},de(this,r5,"f")[r]}[cv](e,r){r=[].concat(r),r.forEach(n=>{n=this[vne](n),de(this,Or,"f")[e].push(n)})}[n5](e,r,n,i){this[xne](e,r,n,i,(o,a,l)=>{de(this,Or,"f")[o][a]=l})}[Cne](e,r,n,i){this[xne](e,r,n,i,(o,a,l)=>{de(this,Or,"f")[o][a]=(de(this,Or,"f")[o][a]||[]).concat(l)})}[xne](e,r,n,i,o){if(Array.isArray(n))n.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(n))for(let a of ZS(n))e(a,n[a]);else o(r,this[vne](n),i)}[vne](e){return e==="__proto__"?"___proto___":e}[bne](e,r){return this[n5](this[bne].bind(this),"key",e,r),this}[Ene](){var e,r,n,i,o,a,l,c,u,d,p,m;let h=de(this,LO,"f").pop();ku(h,void 0,de(this,Fn,"f"));let g;e=this,r=this,n=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){Er(e,Or,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){Er(r,Kf,y,"f")}}.value,groups:{set value(y){Er(n,xg,y,"f")}}.value,output:{set value(y){Er(i,Ml,y,"f")}}.value,exitError:{set value(y){Er(o,av,y,"f")}}.value,hasOutput:{set value(y){Er(a,b0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){Er(l,zI,y,"f")}}.value,strictCommands:{set value(y){Er(c,YI,y,"f")}}.value,strictOptions:{set value(y){Er(u,KI,y,"f")}}.value,completionCommand:{set value(y){Er(d,v0,y,"f")}}.value,parseFn:{set value(y){Er(p,E0,y,"f")}}.value,parseContext:{set value(y){Er(m,VI,y,"f")}}.value}=h,de(this,Or,"f").configObjects=g,de(this,jn,"f").unfreeze(),de(this,la,"f").unfreeze(),de(this,Ra,"f").unfreeze(),de(this,Jf,"f").unfreeze()}[U_e](e,r){return GI(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[q_e].bind(this),getContext:this[W_e].bind(this),getHasOutput:this[G_e].bind(this),getLoggerInstance:this[H_e].bind(this),getParseContext:this[j_e].bind(this),getParserConfiguration:this[JI].bind(this),getUsageConfiguration:this[M_e].bind(this),getUsageInstance:this[V_e].bind(this),getValidationInstance:this[$_e].bind(this),hasParseCallback:this[qO].bind(this),isGlobalContext:this[z_e].bind(this),postProcess:this[XI].bind(this),reset:this[Ine].bind(this),runValidation:this[Tne].bind(this),runYargsParserAndExecuteCommands:this[z8].bind(this),setHasOutput:this[K_e].bind(this)}}[q_e](){return de(this,Ra,"f")}[W_e](){return de(this,$8,"f")}[G_e](){return de(this,b0,"f")}[H_e](){return de(this,t5,"f")}[j_e](){return de(this,VI,"f")||{}}[V_e](){return de(this,jn,"f")}[$_e](){return de(this,la,"f")}[qO](){return!!de(this,E0,"f")}[z_e](){return de(this,FO,"f")}[XI](e,r,n,i){return n||As(e)||(r||(e=this[D_e](e)),(this[JI]()["parse-positional-numbers"]||this[JI]()["parse-positional-numbers"]===void 0)&&(e=this[O_e](e)),i&&(e=WI(e,this,de(this,Jf,"f").getMiddleware(),!1))),e}[Ine](e={}){Er(this,Or,de(this,Or,"f")||{},"f");let r={};r.local=de(this,Or,"f").local||[],r.configObjects=de(this,Or,"f").configObjects||[];let n={};r.local.forEach(a=>{n[a]=!0,(e[a]||[]).forEach(l=>{n[l]=!0})}),Object.assign(de(this,$I,"f"),Object.keys(de(this,xg,"f")).reduce((a,l)=>{let c=de(this,xg,"f")[l].filter(u=>!(u in n));return c.length>0&&(a[l]=c),a},{})),Er(this,xg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{r[a]=(de(this,Or,"f")[a]||[]).filter(l=>!n[l])}),o.forEach(a=>{r[a]=ov(de(this,Or,"f")[a],l=>!n[l])}),r.envPrefix=de(this,Or,"f").envPrefix,Er(this,Or,r,"f"),Er(this,jn,de(this,jn,"f")?de(this,jn,"f").reset(n):I_e(this,de(this,Fn,"f")),"f"),Er(this,la,de(this,la,"f")?de(this,la,"f").reset(n):k_e(this,de(this,jn,"f"),de(this,Fn,"f")),"f"),Er(this,Ra,de(this,Ra,"f")?de(this,Ra,"f").reset():v_e(de(this,jn,"f"),de(this,la,"f"),de(this,Jf,"f"),de(this,Fn,"f")),"f"),de(this,Yf,"f")||Er(this,Yf,__e(this,de(this,jn,"f"),de(this,Ra,"f"),de(this,Fn,"f")),"f"),de(this,Jf,"f").reset(),Er(this,v0,null,"f"),Er(this,Ml,"","f"),Er(this,av,null,"f"),Er(this,b0,!1,"f"),this.parsed=!1,this}[Y_e](e,r){return de(this,Fn,"f").path.relative(e,r)}[z8](e,r,n,i=0,o=!1){let a=!!n||o;e=e||de(this,lv,"f"),de(this,Or,"f").__=de(this,Fn,"f").y18n.__,de(this,Or,"f").configuration=this[JI]();let l=!!de(this,Or,"f").configuration["populate--"],c=Object.assign({},de(this,Or,"f").configuration,{"populate--":!0}),u=de(this,Fn,"f").Parser.detailed(e,Object.assign({},de(this,Or,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,de(this,VI,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===de(this,Xf,"f")&&d[y]?h=!0:y===de(this,vg,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&de(this,jn,"f").clearCachedHelpMessage();try{if(this[Ane](),r)return this[XI](d,l,!!n,!1);de(this,Xf,"f")&&[de(this,Xf,"f")].concat(m[de(this,Xf,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),Er(this,FO,!1,"f");let y=de(this,Ra,"f").getCommands(),v=de(this,Yf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==de(this,v0,"f")){let B=de(this,Ra,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[XI](B,l,!!n,!1)}else if(!E&&k!==de(this,v0,"f")){E=k;break}!de(this,Ra,"f").hasDefaultCommand()&&de(this,OO,"f")&&E&&!b&&de(this,la,"f").recommendCommands(E,y)}de(this,v0,"f")&&d._.includes(de(this,v0,"f"))&&!v&&(de(this,Kf,"f")&&sv(!0),this.showCompletionScript(),this.exit(0))}if(de(this,Ra,"f").hasDefaultCommand()&&!b){let E=de(this,Ra,"f").runCommand(null,this,u,0,o,h||g||o);return this[XI](E,l,!!n,!1)}if(v){de(this,Kf,"f")&&sv(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${de(this,Yf,"f").completionKey}`)+1);return de(this,Yf,"f").getCompletion(E,(_,k)=>{if(_)throw new gs(_.message);(k||[]).forEach(B=>{de(this,t5,"f").log(B)}),this.exit(0)}),this[XI](d,!l,!!n,!1)}if(de(this,b0,"f")||(h?(de(this,Kf,"f")&&sv(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(de(this,Kf,"f")&&sv(!0),a=!0,de(this,jn,"f").showVersion("log"),this.exit(0))),!a&&de(this,Or,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>de(this,Or,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new gs(u.error.message);if(!v){let E=this[Tne](m,{},u.error);n||(p=WI(d,this,de(this,Jf,"f").getMiddleware(),!0)),p=this[U_e](E,p??d),As(p)&&!n&&(p=p.then(()=>WI(d,this,de(this,Jf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof gs)de(this,jn,"f").fail(y.message,y);else throw y}return this[XI](p??d,l,!!n,!0)}[Tne](e,r,n,i){let o={...this.getDemandedOptions()};return a=>{if(n)throw new gs(n.message);de(this,la,"f").nonOptionCount(a),de(this,la,"f").requiredArguments(a,o);let l=!1;de(this,YI,"f")&&(l=de(this,la,"f").unknownCommands(a)),de(this,zI,"f")&&!l?de(this,la,"f").unknownArguments(a,e,r,!!i):de(this,KI,"f")&&de(this,la,"f").unknownArguments(a,e,{},!1,!1),de(this,la,"f").limitedChoices(a),de(this,la,"f").implications(a),de(this,la,"f").conflicting(a)}}[K_e](){Er(this,b0,!0,"f")}[ZI](e){if(typeof e=="string")de(this,Or,"f").key[e]=!0;else for(let r of e)de(this,Or,"f").key[r]=!0}};function b_e(t){return!!t&&typeof t.getInternalMethods=="function"}s(b_e,"isYargsInstance");var amt=J_e(g_e),X_e=amt;f();f();var Y8="apps",_ne="hosts",K8=class{constructor(e,r){this.ctx=e;this.persistenceManager=r}static{s(this,"AuthPersistence")}#e;setAuthAuthority(e){this.#e=e}async getAuthRecord({githubAppId:e}={}){let r=this.getAuthAuthority(),n=await this.persistenceManager.read(Y8,this.authRecordKey(this.ctx,r,e));return!e&&!n?(e=this.ctx.get(_a).fallbackAppId(),n=await this.persistenceManager.read(Y8,this.authRecordKey(this.ctx,r,e))):e??=this.ctx.get(_a).findAppIdToAuthenticate(),n?{...n,oauth_token:n.access_token||n.oauth_token,user:n.login||n.user,githubAppId:e}:await this.legacyAuthRecordMaybe(r)}async legacyAuthRecordMaybe(e){let r=await this.persistenceManager.read(_ne,e);if(r){let n=this.ctx.get(_a).fallbackAppId();return{...r,githubAppId:n}}}async saveAuthRecord(e,r=this.getAuthAuthority()){await this.persistenceManager.update(Y8,this.authRecordKey(this.ctx,r,e.githubAppId),e)}async deleteAuthRecord(){let e=this.getAuthAuthority(),r=await this.getAuthRecord();if(r){let n=this.ctx.get(_a).fallbackAppId();r.githubAppId===n&&await this.persistenceManager.delete(_ne,e),await this.persistenceManager.delete(Y8,this.authRecordKey(this.ctx,e)),await this.persistenceManager.delete(Y8,this.authRecordKey(this.ctx,e,n))}}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(_ne)}authRecordKey(e,r,n){let i=n??e.get(_a).findAppIdToAuthenticate();return`${r}:${i}`}getAuthAuthority(){return this.#e??"github.com"}};f();f();var Z_e={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function eSe(t,e,r){let n=an.createAndMarkAsIssued({authSource:e,authType:r});return Bt(t,Z_e.NewGitHubLogin,n)}s(eSe,"telemetryNewGitHubLogin");function tSe(t,e){let r=an.createAndMarkAsIssued({authType:e});return Bt(t,Z_e.GitHubLoginSuccess,r)}s(tSe,"telemetryGitHubLoginSuccess");var Sne=class extends ls{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function lmt(t,e,{serverUrl:r}){let n={method:"POST",headers:{Accept:"application/json",...n0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",r).href;try{i=await t.get(on).fetch(o,n)}catch(a){throw a instanceof Error&&yB(a)?new ls(`Could not log in with device flow on ${r}: ${a.message}`):a}if(!i.ok)throw new ls(`Could not log in with device flow on ${r}: HTTP ${i.status}`);return await i.json()}s(lmt,"requestDeviceFlowStage1");async function cmt(t,e,r,{serverUrl:n}){let i={method:"POST",headers:{Accept:"application/json",...n0(t)},json:{client_id:r,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(on).fetch(new URL("login/oauth/access_token",n).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new Sne(a):new ls(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(cmt,"requestDeviceFlowStage2");async function umt(t,e){tSe(t,"deviceFlow");let n=await(await Mf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in n)throw new ls(`Error retrieving user information: ${String(n.errors)}`);return n}s(umt,"requestUserInfo");var e2=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,r,n){try{return await this.getTokenUnguarded(e,r,n)}catch(i){throw e.get(Iu).notifyUser(e,i),i}}async getTokenUnguarded(e,r,n){eSe(e,"unknown","deviceFlow");let i=await lmt(e,r,n),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await cmt(e,i.device_code,r,n);if(a-=c,l=u.access_token,l){let d=await umt(e,{...n,accessToken:l});return{...n,githubAppId:r,login:d.login,accessToken:l}}c=u.interval??c}throw new ls("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var I0=class{static{s(this,"CitationManager")}},WO=class extends I0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,r){}};f();f();f();var dmt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1,showInlineMessage:!1},Ho=class{constructor(){this.capabilities={...dmt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let r;for(r in e){let n=e[r];n!==void 0&&(this.capabilities[r]=n)}}getCapabilities(){return this.capabilities}};f();f();f();f();function M1(t,e){let r=T0(t,e);return r===-1?void 0:t[r]}s(M1,"findLastMonotonous");function T0(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(T0,"findLastIdxMonotonous");function rSe(t,e){let r=t2(t,e);return r===t.length?void 0:t[r]}s(rSe,"findFirstMonotonous");function t2(t,e,r=0,n=t.length){let i=r,o=n;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(t2,"findFirstIdxMonotonousOrArrLen");var J8=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let r=T0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=r+1,r===-1?void 0:this._array[r]}};f();var Rne=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?GO.isErrorNoTelemetry(e)?new GO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(r=>{r(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},nSe=new Rne;function r2(t){nSe.onUnexpectedError(t)}s(r2,"onBugIndicatingError");function i5(t){fmt(t)||nSe.onUnexpectedError(t)}s(i5,"onUnexpectedError");var kne="Canceled";function fmt(t){return t instanceof bg?!0:t instanceof Error&&t.name===kne&&t.message===kne}s(fmt,"isCancellationError");var bg=class extends Error{static{s(this,"CancellationError")}constructor(){super(kne),this.name=this.message}};function X8(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(X8,"illegalArgument");function iSe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(iSe,"illegalState");var GO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let r=new t;return r.message=e.message,r.stack=e.stack,r}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},vn=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function n2(t,e,r=(n,i)=>n===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!r(t[n],e[n]))return!1;return!0}s(n2,"equals");function*o5(t,e){let r,n;for(let i of t)n!==void 0&&e(n,i)?r.push(i):(r&&(yield r),r=[i]),n=i;r&&(yield r)}s(o5,"groupAdjacentBy");function sSe(t,e){for(let r=0;r<=t.length;r++)e(r===0?void 0:t[r-1],r===t.length?void 0:t[r])}s(sSe,"forEachAdjacent");function aSe(t,e){for(let r=0;r<t.length;r++)e(r===0?void 0:t[r-1],t[r],r+1===t.length?void 0:t[r+1])}s(aSe,"forEachWithNeighbors");function lSe(t){return t.filter(e=>!!e)}s(lSe,"coalesce");function cSe(t,e){for(let r of e)t.push(r)}s(cSe,"pushMany");var uSe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function r(c){return c>0}l.isGreaterThan=r,s(r,"isGreaterThan");function n(c){return c===0}l.isNeitherLessOrGreaterThan=n,s(n,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(uSe||={});function w0(t,e){return(r,n)=>e(t(r),t(n))}s(w0,"compareBy");var _0=s((t,e)=>t-e,"numberComparator");function dSe(t){return(e,r)=>-t(e,r)}s(dSe,"reverseOrder");var HO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let r=this.firstIdx;for(;r<this.items.length&&e(this.items[r]);)r++;let n=r===this.firstIdx?null:this.items.slice(this.firstIdx,r);return this.firstIdx=r,n}takeFromEndWhile(e){let r=this.lastIdx;for(;r>=0&&e(this.items[r]);)r--;let n=r===this.lastIdx?null:this.items.slice(r+1,this.lastIdx+1);return this.lastIdx=r,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let r=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,r}},oSe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(r=>(e(r),!0))}toArray(){let e=[];return this.iterate(r=>(e.push(r),!0)),e}filter(e){return new t(r=>this.iterate(n=>e(n)?r(n):!0))}map(e){return new t(r=>this.iterate(n=>r(e(n))))}some(e){let r=!1;return this.iterate(n=>(r=e(n),!r)),r}findFirst(e){let r;return this.iterate(n=>e(n)?(r=n,!1):!0),r}findLast(e){let r;return this.iterate(n=>(e(n)&&(r=n),!0)),r}findLastMaxBy(e){let r,n=!0;return this.iterate(i=>((n||uSe.isGreaterThan(e(i,r)))&&(n=!1,r=i),!0)),r}};f();function hSe(t,e){let r=Object.create(null);for(let n of t){let i=e(n),o=r[i];o||(o=r[i]=[]),o.push(n)}return r}s(hSe,"groupBy");var pSe,mSe,fSe=class{constructor(e,r){this.toKey=r;this._map=new Map;this[pSe]="SetWithKey";for(let n of e)this.add(n)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let r=this.toKey(e);return this._map.set(r,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,r){this._map.forEach(n=>e.call(r,n,n,this))}[(mSe=Symbol.iterator,pSe=Symbol.toStringTag,mSe)](){return this.values()}};f();function Bne(t,e){let r=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=t.apply(r,arguments)}finally{e()}else i=t.apply(r,arguments);return i}}s(Bne,"createSingleCallFunction");f();var Dne;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function r(){return e}_.empty=r,s(r,"empty");function*n(k){yield k}_.single=n,s(n,"single");function i(k){return t(k)?k:n(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let B=k.length-1;B>=0;B--)yield k[B]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,B){let N=0;for(let q of k)if(B(q,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,B){for(let N of k)if(B(N))return N}_.find=d,s(d,"find");function*p(k,B){for(let N of k)B(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,B){let N=0;for(let q of k)yield B(q,N++)}_.map=m,s(m,"map");function*h(k,B){let N=0;for(let q of k)yield*B(q,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let B of k)yield*B}_.concat=g,s(g,"concat");function y(k,B,N){let q=N;for(let te of k)q=B(q,te);return q}_.reduce=y,s(y,"reduce");function*v(k,B,N=k.length){for(B<-k.length&&(B=0),B<0&&(B+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);B<N;B++)yield k[B]}_.slice=v,s(v,"slice");function b(k,B=Number.POSITIVE_INFINITY){let N=[];if(B===0)return[N,k];let q=k[Symbol.iterator]();for(let te=0;te<B;te++){let me=q.next();if(me.done)return[N,_.empty()];N.push(me.value)}return[N,{[Symbol.iterator](){return q}}]}_.consume=b,s(b,"consume");async function E(k){let B=[];for await(let N of k)B.push(N);return Promise.resolve(B)}_.asyncToArray=E,s(E,"asyncToArray")})(Dne||={});f();var Pne=class{constructor(e,r){this.uri=e;this.value=r}static{s(this,"ResourceMapEntry")}};function mmt(t){return Array.isArray(t)}s(mmt,"isEntries");var ASe,jO=class t{constructor(e,r){this[ASe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=r??t.defaultToKey;else if(mmt(e)){this.map=new Map,this.toKey=r??t.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,r){return this.map.set(this.toKey(e),new Pne(e,r)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,r){typeof r<"u"&&(e=e.bind(r));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(ASe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},ySe,gSe=class{constructor(e,r){this[ySe]="ResourceSet";!e||typeof e=="function"?this._map=new jO(e):(this._map=new jO(r),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,r){this._map.forEach((n,i)=>e.call(r,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(ySe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var CSe,Nne=class{constructor(){this[CSe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=0){let n=this._map.get(e);if(n)return r!==0&&this.touch(n,r),n.value}set(e,r,n=0){let i=this._map.get(e);if(i)i.value=r,n!==0&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,r=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==r)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(CSe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._tail,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.previous,n--;this._tail=r,this._size=n,r&&(r.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}},Lne=class extends Nne{static{s(this,"Cache")}constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=2){return super.get(e,r)}peek(e){return super.get(e,0)}set(e,r){return super.set(e,r,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},VO=class extends Lne{static{s(this,"LRUCache")}constructor(e,r=1){super(e,r)}trim(e){this.trimOld(e)}set(e,r){return super.set(e,r),this.checkTrim(),this}};var s5=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,r){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(r)}delete(e,r){let n=this.map.get(e);n&&(n.delete(r),n.size===0&&this.map.delete(e))}forEach(e,r){let n=this.map.get(e);n&&n.forEach(r)}get(e){let r=this.map.get(e);return r||new Set}};var hmt=!1,a5=null;var xSe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let r=this.livingDisposables.get(e);return r||(r={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,r)),r}trackDisposable(e){let r=this.getDisposableData(e);r.source||(r.source=new Error().stack)}setParent(e,r){let n=this.getDisposableData(e);n.parent=r}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,r){let n=r.get(e);if(n)return n;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),r):e;return r.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,r){let n;if(r)n=r;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(n=u.filter(p=>!(p.parent&&d.has(p.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new s5;for(let c of n){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}n.sort(w0(c=>c.idx,_0));let a="",l=0;for(let c of n.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${n.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=hSe([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${n.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return n.length>e&&(a+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:a}}};function gmt(t){a5=t}s(gmt,"setDisposableTracker");if(hmt){let t="__is_disposable_tracked__";gmt(new class{trackDisposable(e){let r=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(r)},3e3)}setParent(e,r){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function l5(t){return a5?.trackDisposable(t),t}s(l5,"trackDisposable");function c5(t){a5?.markAsDisposed(t)}s(c5,"markAsDisposed");function Fne(t,e){a5?.setParent(t,e)}s(Fne,"setParentOfDisposable");function Amt(t,e){if(a5)for(let r of t)a5.setParent(r,e)}s(Amt,"setParentOfDisposables");function vSe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(vSe,"isDisposable");function $O(t){if(Dne.is(t)){let e=[];for(let r of t)if(r)try{r.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s($O,"dispose");function bSe(...t){let e=ka(()=>$O(t));return Amt(t,e),e}s(bSe,"combinedDisposable");function ka(t){let e=l5({dispose:Bne(()=>{c5(e),t()})});return e}s(ka,"toDisposable");var Bu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;l5(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(c5(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{$O(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Fne(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Fne(e,null))}},jo=class{constructor(){this._store=new Bu;l5(this),Fne(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){c5(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var Zf=class extends jo{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,r=>{this.processUserInfoQuotaSnapshot(r.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let r=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(r)try{let n=new URLSearchParams(r),i=parseInt(n.get("ent")||"0",10),o=parseFloat(n.get("ov")||"0.0"),a=n.get("ovPerm")==="true",l=parseFloat(n.get("rem")||"0.0"),c=n.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(n){console.error("Failed to parse quota header",n)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var ESe=je(require("events"));var zO="CompletionRequested",Eg=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new ESe.default;notifyRequest(e,r,n,i,o){return this.#e.emit(zO,{completionId:r,completionState:e,telemetryData:n,cancellationToken:i,options:o})}onRequest(e){let r=Eu(this.ctx,e,`event.${zO}`);return this.#e.on(zO,r),pn.Disposable.create(()=>this.#e.off(zO,r))}};f();var Mne=class extends Error{constructor(r){super(`No instance of ${r.name} has been registered`);this.ctor=r;this.name="UnregisteredContextError",this.code=r.name}static{s(this,"UnregisteredContextError")}},u5=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let r=this.tryGet(e);if(r)return r;throw new Mne(e)}tryGet(e){let r=this.instances.get(e);if(r)return r}set(e,r){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,r),this.instances.set(e,r)}forceSet(e,r){this.assertIsInstance(e,r),this.instances.set(e,r)}assertIsInstance(e,r){if(!(r instanceof e)){let n=JSON.stringify(r);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${n}).`)}}};f();f();f();var YO=class t{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){for(let n of e)if(t.isIncremental(n)){let i=wSe(n.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+n.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=ISe(n.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=n.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(n))this._content=n.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=r}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=ISe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return{line:0,character:e};for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return e=this.ensureBeforeEOL(e,r[o]),{line:o,character:e-r[o]}}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line];if(e.character<=0)return n;let i=e.line+1<r.length?r[e.line+1]:this._content.length,o=Math.min(n+e.character,i);return this.ensureBeforeEOL(o,n)}ensureBeforeEOL(e,r){for(;e>r&&TSe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range!==void 0&&(r.rangeLength===void 0||typeof r.rangeLength=="number")}static isFull(e){let r=e;return r!=null&&typeof r.text=="string"&&r.range===void 0&&r.rangeLength===void 0}},uv;(function(t){function e(i,o,a,l){return new YO(i,o,a,l)}s(e,"create"),t.create=e;function r(i,o,a){if(i instanceof YO)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(r,"update"),t.update=r;function n(i,o){let a=i.getText(),l=Qne(o.map(ymt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(n,"applyEdits"),t.applyEdits=n})(uv||(uv={}));function Qne(t,e){if(t.length<=1)return t;let r=t.length/2|0,n=t.slice(0,r),i=t.slice(r);Qne(n,e),Qne(i,e);let o=0,a=0,l=0;for(;o<n.length&&a<i.length;)e(n[o],i[a])<=0?t[l++]=n[o++]:t[l++]=i[a++];for(;o<n.length;)t[l++]=n[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(Qne,"mergeSort");function ISe(t,e,r=0){let n=e?[r]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);TSe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,n.push(r+i+1))}return n}s(ISe,"computeLineOffsets");function TSe(t){return t===13||t===10}s(TSe,"isEOL");function wSe(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}s(wSe,"getWellformedRange");function ymt(t){let e=wSe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(ymt,"getWellformedEdit");f();var _Se;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(_Se||(_Se={}));var One;(function(t){function e(r){return typeof r=="string"}s(e,"is"),t.is=e})(One||(One={}));var SSe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(SSe||(SSe={}));var KO;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(r){return typeof r=="number"&&t.MIN_VALUE<=r&&r<=t.MAX_VALUE}s(e,"is"),t.is=e})(KO||(KO={}));var Yc;(function(t){function e(n,i){return n===Number.MAX_VALUE&&(n=KO.MAX_VALUE),i===Number.MAX_VALUE&&(i=KO.MAX_VALUE),{line:n,character:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.uinteger(i.line)&&Ve.uinteger(i.character)}s(r,"is"),t.is=r})(Yc||(Yc={}));var es;(function(t){function e(n,i,o,a){if(Ve.uinteger(n)&&Ve.uinteger(i)&&Ve.uinteger(o)&&Ve.uinteger(a))return{start:Yc.create(n,i),end:Yc.create(o,a)};if(Yc.is(n)&&Yc.is(i))return{start:n,end:i};throw new Error(`Range#create called with invalid arguments[${n}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Yc.is(i.start)&&Yc.is(i.end)}s(r,"is"),t.is=r})(es||(es={}));var JO;(function(t){function e(n,i){return{uri:n,range:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.range)&&(Ve.string(i.uri)||Ve.undefined(i.uri))}s(r,"is"),t.is=r})(JO||(JO={}));var RSe;(function(t){function e(n,i,o,a){return{targetUri:n,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.targetRange)&&Ve.string(i.targetUri)&&es.is(i.targetSelectionRange)&&(es.is(i.originSelectionRange)||Ve.undefined(i.originSelectionRange))}s(r,"is"),t.is=r})(RSe||(RSe={}));var Une;(function(t){function e(n,i,o,a){return{red:n,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.numberRange(i.red,0,1)&&Ve.numberRange(i.green,0,1)&&Ve.numberRange(i.blue,0,1)&&Ve.numberRange(i.alpha,0,1)}s(r,"is"),t.is=r})(Une||(Une={}));var kSe;(function(t){function e(n,i){return{range:n,color:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.range)&&Une.is(i.color)}s(r,"is"),t.is=r})(kSe||(kSe={}));var BSe;(function(t){function e(n,i,o){return{label:n,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.undefined(i.textEdit)||f5.is(i))&&(Ve.undefined(i.additionalTextEdits)||Ve.typedArray(i.additionalTextEdits,f5.is))}s(r,"is"),t.is=r})(BSe||(BSe={}));var DSe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(DSe||(DSe={}));var PSe;(function(t){function e(n,i,o,a,l,c){let u={startLine:n,endLine:i};return Ve.defined(o)&&(u.startCharacter=o),Ve.defined(a)&&(u.endCharacter=a),Ve.defined(l)&&(u.kind=l),Ve.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.uinteger(i.startLine)&&Ve.uinteger(i.startLine)&&(Ve.undefined(i.startCharacter)||Ve.uinteger(i.startCharacter))&&(Ve.undefined(i.endCharacter)||Ve.uinteger(i.endCharacter))&&(Ve.undefined(i.kind)||Ve.string(i.kind))}s(r,"is"),t.is=r})(PSe||(PSe={}));var qne;(function(t){function e(n,i){return{location:n,message:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&JO.is(i.location)&&Ve.string(i.message)}s(r,"is"),t.is=r})(qne||(qne={}));var NSe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(NSe||(NSe={}));var LSe;(function(t){t.Unnecessary=1,t.Deprecated=2})(LSe||(LSe={}));var FSe;(function(t){function e(r){let n=r;return Ve.objectLiteral(n)&&Ve.string(n.href)}s(e,"is"),t.is=e})(FSe||(FSe={}));var XO;(function(t){function e(n,i,o,a,l,c){let u={range:n,message:i};return Ve.defined(o)&&(u.severity=o),Ve.defined(a)&&(u.code=a),Ve.defined(l)&&(u.source=l),Ve.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function r(n){var i;let o=n;return Ve.defined(o)&&es.is(o.range)&&Ve.string(o.message)&&(Ve.number(o.severity)||Ve.undefined(o.severity))&&(Ve.integer(o.code)||Ve.string(o.code)||Ve.undefined(o.code))&&(Ve.undefined(o.codeDescription)||Ve.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Ve.string(o.source)||Ve.undefined(o.source))&&(Ve.undefined(o.relatedInformation)||Ve.typedArray(o.relatedInformation,qne.is))}s(r,"is"),t.is=r})(XO||(XO={}));var d5;(function(t){function e(n,i,...o){let a={title:n,command:i};return Ve.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.title)&&Ve.string(i.command)}s(r,"is"),t.is=r})(d5||(d5={}));var f5;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function r(o,a){return{range:{start:o,end:o},newText:a}}s(r,"insert"),t.insert=r;function n(o){return{range:o,newText:""}}s(n,"del"),t.del=n;function i(o){let a=o;return Ve.objectLiteral(a)&&Ve.string(a.newText)&&es.is(a.range)}s(i,"is"),t.is=i})(f5||(f5={}));var Wne;(function(t){function e(n,i,o){let a={label:n};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ve.string(i.description)||i.description===void 0)}s(r,"is"),t.is=r})(Wne||(Wne={}));var p5;(function(t){function e(r){let n=r;return Ve.string(n)}s(e,"is"),t.is=e})(p5||(p5={}));var MSe;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function r(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(r,"insert"),t.insert=r;function n(o,a){return{range:o,newText:"",annotationId:a}}s(n,"del"),t.del=n;function i(o){let a=o;return f5.is(a)&&(Wne.is(a.annotationId)||p5.is(a.annotationId))}s(i,"is"),t.is=i})(MSe||(MSe={}));var Gne;(function(t){function e(n,i){return{textDocument:n,edits:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&zne.is(i.textDocument)&&Array.isArray(i.edits)}s(r,"is"),t.is=r})(Gne||(Gne={}));var Hne;(function(t){function e(n,i,o){let a={kind:"create",uri:n};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="create"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(r,"is"),t.is=r})(Hne||(Hne={}));var jne;(function(t){function e(n,i,o,a){let l={kind:"rename",oldUri:n,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="rename"&&Ve.string(i.oldUri)&&Ve.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(r,"is"),t.is=r})(jne||(jne={}));var Vne;(function(t){function e(n,i,o){let a={kind:"delete",uri:n};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&i.kind==="delete"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ve.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ve.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(r,"is"),t.is=r})(Vne||(Vne={}));var $ne;(function(t){function e(r){let n=r;return n&&(n.changes!==void 0||n.documentChanges!==void 0)&&(n.documentChanges===void 0||n.documentChanges.every(i=>Ve.string(i.kind)?Hne.is(i)||jne.is(i)||Vne.is(i):Gne.is(i)))}s(e,"is"),t.is=e})($ne||($ne={}));var QSe;(function(t){function e(n){return{uri:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)}s(r,"is"),t.is=r})(QSe||(QSe={}));var OSe;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.integer(i.version)}s(r,"is"),t.is=r})(OSe||(OSe={}));var zne;(function(t){function e(n,i){return{uri:n,version:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)&&(i.version===null||Ve.integer(i.version))}s(r,"is"),t.is=r})(zne||(zne={}));var USe;(function(t){function e(n,i,o,a){return{uri:n,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.string(i.languageId)&&Ve.integer(i.version)&&Ve.string(i.text)}s(r,"is"),t.is=r})(USe||(USe={}));var Yne;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(r){let n=r;return n===t.PlainText||n===t.Markdown}s(e,"is"),t.is=e})(Yne||(Yne={}));var Z8;(function(t){function e(r){let n=r;return Ve.objectLiteral(r)&&Yne.is(n.kind)&&Ve.string(n.value)}s(e,"is"),t.is=e})(Z8||(Z8={}));var qSe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(qSe||(qSe={}));var WSe;(function(t){t.PlainText=1,t.Snippet=2})(WSe||(WSe={}));var GSe;(function(t){t.Deprecated=1})(GSe||(GSe={}));var HSe;(function(t){function e(n,i,o){return{newText:n,insert:i,replace:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Ve.string(i.newText)&&es.is(i.insert)&&es.is(i.replace)}s(r,"is"),t.is=r})(HSe||(HSe={}));var jSe;(function(t){t.asIs=1,t.adjustIndentation=2})(jSe||(jSe={}));var VSe;(function(t){function e(r){let n=r;return n&&(Ve.string(n.detail)||n.detail===void 0)&&(Ve.string(n.description)||n.description===void 0)}s(e,"is"),t.is=e})(VSe||(VSe={}));var $Se;(function(t){function e(r){return{label:r}}s(e,"create"),t.create=e})($Se||($Se={}));var zSe;(function(t){function e(r,n){return{items:r||[],isIncomplete:!!n}}s(e,"create"),t.create=e})(zSe||(zSe={}));var ZO;(function(t){function e(n){return n.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function r(n){let i=n;return Ve.string(i)||Ve.objectLiteral(i)&&Ve.string(i.language)&&Ve.string(i.value)}s(r,"is"),t.is=r})(ZO||(ZO={}));var YSe;(function(t){function e(r){let n=r;return!!n&&Ve.objectLiteral(n)&&(Z8.is(n.contents)||ZO.is(n.contents)||Ve.typedArray(n.contents,ZO.is))&&(r.range===void 0||es.is(r.range))}s(e,"is"),t.is=e})(YSe||(YSe={}));var KSe;(function(t){function e(r,n){return n?{label:r,documentation:n}:{label:r}}s(e,"create"),t.create=e})(KSe||(KSe={}));var JSe;(function(t){function e(r,n,...i){let o={label:r};return Ve.defined(n)&&(o.documentation=n),Ve.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(JSe||(JSe={}));var XSe;(function(t){t.Text=1,t.Read=2,t.Write=3})(XSe||(XSe={}));var ZSe;(function(t){function e(r,n){let i={range:r};return Ve.number(n)&&(i.kind=n),i}s(e,"create"),t.create=e})(ZSe||(ZSe={}));var e5e;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(e5e||(e5e={}));var t5e;(function(t){t.Deprecated=1})(t5e||(t5e={}));var r5e;(function(t){function e(r,n,i,o,a){let l={name:r,kind:n,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(r5e||(r5e={}));var n5e;(function(t){function e(r,n,i,o){return o!==void 0?{name:r,kind:n,location:{uri:i,range:o}}:{name:r,kind:n,location:{uri:i}}}s(e,"create"),t.create=e})(n5e||(n5e={}));var i5e;(function(t){function e(n,i,o,a,l,c){let u={name:n,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Ve.string(i.name)&&Ve.number(i.kind)&&es.is(i.range)&&es.is(i.selectionRange)&&(i.detail===void 0||Ve.string(i.detail))&&(i.deprecated===void 0||Ve.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(r,"is"),t.is=r})(i5e||(i5e={}));var o5e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(o5e||(o5e={}));var eU;(function(t){t.Invoked=1,t.Automatic=2})(eU||(eU={}));var s5e;(function(t){function e(n,i,o){let a={diagnostics:n};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.typedArray(i.diagnostics,XO.is)&&(i.only===void 0||Ve.typedArray(i.only,Ve.string))&&(i.triggerKind===void 0||i.triggerKind===eU.Invoked||i.triggerKind===eU.Automatic)}s(r,"is"),t.is=r})(s5e||(s5e={}));var a5e;(function(t){function e(n,i,o){let a={title:n},l=!0;return typeof i=="string"?(l=!1,a.kind=i):d5.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return i&&Ve.string(i.title)&&(i.diagnostics===void 0||Ve.typedArray(i.diagnostics,XO.is))&&(i.kind===void 0||Ve.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||d5.is(i.command))&&(i.isPreferred===void 0||Ve.boolean(i.isPreferred))&&(i.edit===void 0||$ne.is(i.edit))}s(r,"is"),t.is=r})(a5e||(a5e={}));var l5e;(function(t){function e(n,i){let o={range:n};return Ve.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.command)||d5.is(i.command))}s(r,"is"),t.is=r})(l5e||(l5e={}));var c5e;(function(t){function e(n,i){return{tabSize:n,insertSpaces:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&Ve.uinteger(i.tabSize)&&Ve.boolean(i.insertSpaces)}s(r,"is"),t.is=r})(c5e||(c5e={}));var u5e;(function(t){function e(n,i,o){return{range:n,target:i,data:o}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.target)||Ve.string(i.target))}s(r,"is"),t.is=r})(u5e||(u5e={}));var d5e;(function(t){function e(n,i){return{range:n,parent:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&es.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(r,"is"),t.is=r})(d5e||(d5e={}));var f5e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(f5e||(f5e={}));var p5e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(p5e||(p5e={}));var m5e;(function(t){function e(r){let n=r;return Ve.objectLiteral(n)&&(n.resultId===void 0||typeof n.resultId=="string")&&Array.isArray(n.data)&&(n.data.length===0||typeof n.data[0]=="number")}s(e,"is"),t.is=e})(m5e||(m5e={}));var h5e;(function(t){function e(n,i){return{range:n,text:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&Ve.string(i.text)}s(r,"is"),t.is=r})(h5e||(h5e={}));var g5e;(function(t){function e(n,i,o){return{range:n,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&Ve.boolean(i.caseSensitiveLookup)&&(Ve.string(i.variableName)||i.variableName===void 0)}s(r,"is"),t.is=r})(g5e||(g5e={}));var A5e;(function(t){function e(n,i){return{range:n,expression:i}}s(e,"create"),t.create=e;function r(n){let i=n;return i!=null&&es.is(i.range)&&(Ve.string(i.expression)||i.expression===void 0)}s(r,"is"),t.is=r})(A5e||(A5e={}));var y5e;(function(t){function e(n,i){return{frameId:n,stoppedLocation:i}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.defined(i)&&es.is(n.stoppedLocation)}s(r,"is"),t.is=r})(y5e||(y5e={}));var Kne;(function(t){t.Type=1,t.Parameter=2;function e(r){return r===1||r===2}s(e,"is"),t.is=e})(Kne||(Kne={}));var Jne;(function(t){function e(n){return{value:n}}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&(i.tooltip===void 0||Ve.string(i.tooltip)||Z8.is(i.tooltip))&&(i.location===void 0||JO.is(i.location))&&(i.command===void 0||d5.is(i.command))}s(r,"is"),t.is=r})(Jne||(Jne={}));var C5e;(function(t){function e(n,i,o){let a={position:n,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function r(n){let i=n;return Ve.objectLiteral(i)&&Yc.is(i.position)&&(Ve.string(i.label)||Ve.typedArray(i.label,Jne.is))&&(i.kind===void 0||Kne.is(i.kind))&&i.textEdits===void 0||Ve.typedArray(i.textEdits,f5.is)&&(i.tooltip===void 0||Ve.string(i.tooltip)||Z8.is(i.tooltip))&&(i.paddingLeft===void 0||Ve.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Ve.boolean(i.paddingRight))}s(r,"is"),t.is=r})(C5e||(C5e={}));var x5e;(function(t){function e(r){return{kind:"snippet",value:r}}s(e,"createSnippet"),t.createSnippet=e})(x5e||(x5e={}));var v5e;(function(t){function e(r,n,i,o){return{insertText:r,filterText:n,range:i,command:o}}s(e,"create"),t.create=e})(v5e||(v5e={}));var b5e;(function(t){function e(r){return{items:r}}s(e,"create"),t.create=e})(b5e||(b5e={}));var E5e;(function(t){t.Invoked=0,t.Automatic=1})(E5e||(E5e={}));var I5e;(function(t){function e(r,n){return{range:r,text:n}}s(e,"create"),t.create=e})(I5e||(I5e={}));var T5e;(function(t){function e(r,n){return{triggerKind:r,selectedCompletionInfo:n}}s(e,"create"),t.create=e})(T5e||(T5e={}));var w5e;(function(t){function e(r){let n=r;return Ve.objectLiteral(n)&&One.is(n.uri)&&Ve.string(n.name)}s(e,"is"),t.is=e})(w5e||(w5e={}));var _5e;(function(t){function e(o,a,l,c){return new Xne(o,a,l,c)}s(e,"create"),t.create=e;function r(o){let a=o;return!!(Ve.defined(a)&&Ve.string(a.uri)&&(Ve.undefined(a.languageId)||Ve.string(a.languageId))&&Ve.uinteger(a.lineCount)&&Ve.func(a.getText)&&Ve.func(a.positionAt)&&Ve.func(a.offsetAt))}s(r,"is"),t.is=r;function n(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(n,"applyEdits"),t.applyEdits=n;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(_5e||(_5e={}));var Xne=class{static{s(this,"FullTextDocument")}constructor(e,r,n,i){this._uri=e,this._languageId=r,this._version=n,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let r=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(r,n)}return this._content}update(e,r){this._content=e.text,this._version=r,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],r=this._content,n=!0;for(let i=0;i<r.length;i++){n&&(e.push(i),n=!1);let o=r.charAt(i);n=o==="\r"||o===`
`,o==="\r"&&i+1<r.length&&r.charAt(i+1)===`
`&&i++}n&&r.length>0&&e.push(r.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let r=this.getLineOffsets(),n=0,i=r.length;if(i===0)return Yc.create(0,e);for(;n<i;){let a=Math.floor((n+i)/2);r[a]>e?i=a:n=a+1}let o=n-1;return Yc.create(o,e-r[o])}offsetAt(e){let r=this.getLineOffsets();if(e.line>=r.length)return this._content.length;if(e.line<0)return 0;let n=r[e.line],i=e.line+1<r.length?r[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,i),n)}get lineCount(){return this.getLineOffsets().length}},Ve;(function(t){let e=Object.prototype.toString;function r(h){return typeof h<"u"}s(r,"defined"),t.defined=r;function n(h){return typeof h>"u"}s(n,"undefined"),t.undefined=n;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Ve||(Ve={}));var Vo=class{static{s(this,"LocationFactory")}static{this.range=es.create.bind(es)}static{this.position=Yc.create.bind(Yc)}},Q1=class t{constructor(e,r,n){this.uri=e;this._textDocument=r;this.detectedLanguageId=n}static{s(this,"CopilotTextDocument")}static withChanges(e,r,n){let i=uv.create(e.clientUri,e.clientLanguageId,n,e.getText());return uv.update(i,r,n),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let r=uv.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return uv.update(r,e.map(n=>({text:n.newText,range:n.range})),this.version),new t(this.uri,r,this.detectedLanguageId)}static create(e,r,n,i,o=Xx({uri:e,languageId:r})){return new t(Ll(e),uv.create(e,r,n,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let r=typeof e=="number"?e:e.line;if(r<0||r>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let n=es.create(r,0,r+1,0),i=this.getText(n).replace(/\r\n$|\r$|\n$/g,""),o=es.create(Yc.create(r,0),Yc.create(r,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var eD={isBlocked:!1,reason:"VALID_FILE"},tU={isBlocked:!1,reason:"NO_MATCHING_POLICY"},S5e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},i2={all:"all",repo:"repo"},O1=new _t("contentExclusion");f();f();var rU=class{static{s(this,"PolicyEvaluator")}};f();f();f();var R5e=new _t("repository"),o2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let r=this.getAll(e);return r?r[r.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,r){e in this.data||(this.data[e]=[]),this.data[e].push(r)}getSectionValues(e,r){let n=`${e}.`.toLowerCase(),i=`.${r}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(n)&&o.endsWith(i)).map(o=>o.slice(n.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((r,[n,i])=>(i.forEach(o=>r.add(n,o)),r),new t)}normalizeKey(e){let r=e.split(".");return r[0]=r[0].toLowerCase(),r[r.length-1]=r[r.length-1].toLowerCase(),r.join(".")}},Rm=class{static{s(this,"GitConfigLoader")}},nU=class extends Rm{constructor(r){super();this.loaders=r}static{s(this,"GitFallbackConfigLoader")}async getConfig(r,n){for(let i of this.loaders){let o=await i.getConfig(r,n);if(o)return o}}};f();var k5e=require("os");var iU=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Hx.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Hx.parse(this.url)}catch(r){this._error=r;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let r=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");r&&(this._hostname=r)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,k5e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let r=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(r),this.setPath(this.url.substring(r.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var oU=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,r){let n=await e.get(Rm).getConfig(e,r);if(!n)return;let i=this.getRemotes(n),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let r=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(n=>({name:n,url:new iU(this.applyInsteadOfRules(r,e.get(`remote.${n}.url`)??""))})).filter(n=>n.url.isRemote())}applyInsteadOfRules(e,r){for(let n of e)if(r.startsWith(n.insteadOf))return n.base+r.slice(n.insteadOf.length);return r}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(r=>({base:r,insteadOf:e.get(`url.${r}.insteadof`)})).sort((r,n)=>n.base.length-r.base.length)}};var Cmt=100,Zne=class{constructor(e,r){this.baseFolder=e;this.remote=r;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let r=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");r&&(this._tenant=r.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let r=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");r?(this._adoOrganization=r.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},U1=class t{constructor(e){this.ctx=e;this.remoteResolver=new oU;this.cache=new Jr(Cmt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let r,n=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(n,o),o}n.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(n,i),i;r=e,e=gd(e)}while(e!==r);this.updateCache(n,void 0)}updateCache(e,r){e.forEach(n=>this.cache.set(n,r))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new Zne(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,r){try{let n=e.get(lo),i=bo(r,".git");if((await n.stat(i)).type&1)return await this.getConfigLocationForGitfile(n,r,i);let a=bo(i,"config");return await n.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,r,n){let o=(await e.readFileString(n)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=II(r,o[1]),l=bo(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=bo(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=bo(a,"commondir");a=II(a,(await e.readFileString(u)).trimEnd());let d=bo(a,"config");return await e.stat(d),d}static async tryStat(e,r){try{return await e.stat(r)}catch{return}}};f();var B5e=s((t,e)=>{if(zx.Check(t,e))return e;let r=`Typebox schema validation failed:
${[...zx.Errors(t,e)].map(n=>`${n.path} ${n.message}`).join(`
`)}`;throw new Error(r)},"assertShape");f();f();f();var sU=new WeakMap;function aU(t,e){if(t==null||typeof t!="object")return String(t);let r,n="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&sU.has(t))return sU.get(t);switch(sU.set(t,"~"+ ++e),o){case"[object Set]":r=Array.from(t);case"[object Array]":for(r||(r=t),n+="a";i<r.length;n+=aU(r[i++],e));break;case"[object Object]":for(n+="o",r=Object.keys(t).sort();i<r.length;n+=r[i]+aU(t[r[i++]],e));break;case"[object Map]":for(n+="o",r=Array.from(t.keys()).sort();i<r.length;n+=r[i]+aU(t.get(r[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return sU.set(t,n),n}s(aU,"t");function lU(t){return aU(t,0)}s(lU,"r");var eie=new WeakMap;function D5e(t,e,r=lU(e)){let n,i,o=eie.get(t);o||(eie.set(t,o=[[],i=[],n=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=n[d++];u.r(m));}s(p,"o"),eie.delete(t),t(i).then(function(m){if(m.length!==n.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?n[d-1].r(u):n[d-1].s(u));},p)}));let a=o[0].indexOf(r);if(~a)return o[2][a].p;let l=o[0].push(r)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(D5e,"n");var P5e=new WeakMap;function xmt(t,e,r,n=lU(r)){if(e||(e=P5e.get(t)),e||P5e.set(t,e=new Map),e.has(n))return Promise.resolve(e.get(n));let i=D5e(t,r,n);return e.set(n,i),i.catch(()=>e.delete(n)),i}s(xmt,"n");function N5e(t,e){return function(r,n){return xmt(t,e,r,n)}}s(N5e,"o");f();var t4e=je($5e(),1);f();var nD=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var Smt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},iD=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),Rmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),z5e=s(t=>t.join(""),"rangesToString"),Y5e=s((t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,c=!1,u=!1,d=r,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===r+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(Smt))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-r,!0];o+=v.length,_?i.push(b):n.push(b),l=l||E;continue e}}if(c=!1,p){y>p?n.push(iD(p)+"-"+iD(y)):y===p&&n.push(iD(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){n.push(iD(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}n.push(iD(y)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let y=n[0].length===2?n[0].slice(-1):n[0];return[Rmt(y),!1,d-r,!1]}let m="["+(u?"^":"")+z5e(n)+"]",h="["+(u?"":"^")+z5e(i)+"]";return[n.length&&i.length?"("+m+"|"+h+")":n.length?m:h,l,d-r,!0]},"parseClass");f();var dv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var kmt=new Set(["!","?","+","*","@"]),K5e=s(t=>kmt.has(t),"isExtglobType"),Bmt="(?!(?:^|/)\\.\\.?(?:$|/))",cU="(?!\\.)",Dmt=new Set(["[","."]),Pmt=new Set(["..","."]),Nmt=new Set("().*{}+?[]^$\\!"),Lmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),nie="[^/]",J5e=nie+"*?",X5e=nie+"+?",m5=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#n=[];#r;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#r=r,this.#e=this.#r?this.#r.#e:this,this.#l=this.#e===this?n:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#r?this.#r.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let r=e,n=r.#r;for(;n;){for(let i=r.#o+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#r}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#r===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#r?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#r?.isStart())return!1;if(this.#o===0)return!0;let e=this.#r;for(let r=0;r<this.#o;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#r?.type==="!")return!0;if(!this.#r?.isEnd())return!1;if(!this.type)return this.#r?.isEnd();let e=this.#r?this.#r.#n.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#u(e,r,n,i){let o=!1,a=!1,l=-1,c=!1;if(r.type===null){let h=n,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&K5e(y)&&e.charAt(h)==="("){r.push(g),g="";let v=new t(y,r);h=t.#u(e,v,h,i),r.push(v);continue}g+=y}return r.push(g),h}let u=n+1,d=new t(null,r),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(K5e(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,r);continue}if(h===")")return m===""&&r.#n.length===0&&(r.#d=!0),d.push(m),m="",r.push(...p,d),u;m+=h}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#u(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#l}toRegExpSource(e){let r=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#n.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&Pmt.has(this.#n[0]))){let g=Dmt,y=r&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!r&&!e&&g.has(u.charAt(0));d=y?Bmt:v?cU:""}let p="";return this.isEnd()&&this.#e.#a&&this.#r?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,dv(u),this.#t=!!this.#t,this.#i]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#n=[c],this.type=null,this.#t=void 0,[c,dv(this.toString()),!1,!1]}let a=!n||e||r||!cU?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!r?cU:"")+X5e;else{let c=this.type==="!"?"))"+(this.isStart()&&!r&&!e?cU:"")+J5e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,dv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#i=this.#i||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(Nmt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=Y5e(e,l);if(p){o+=u,a=a||d,l+=p-1,r=r||m;continue}}if(c==="*"){n&&e==="*"?o+=X5e:o+=J5e,r=!0;continue}if(c==="?"){o+=nie,r=!0;continue}o+=Lmt(c)}return[o,dv(e),!!r,a]}};f();var iie=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Ba=s((t,e,r={})=>(nD(e),!r.nocomment&&e.charAt(0)==="#"?!1:new h5(e,r).match(t)),"minimatch"),Fmt=/^\*+([^+@!?\*\[\(]*)$/,Mmt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),Qmt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),Omt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),Umt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),qmt=/^\*+\.\*+$/,Wmt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),Gmt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),Hmt=/^\.\*+$/,jmt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),Vmt=/^\*+$/,$mt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),zmt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),Ymt=/^\?+([^+@!?\*\[\(]*)?$/,Kmt=s(([t,e=""])=>{let r=r4e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocase"),Jmt=s(([t,e=""])=>{let r=n4e([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},"qmarksTestNocaseDot"),Xmt=s(([t,e=""])=>{let r=n4e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTestDot"),Zmt=s(([t,e=""])=>{let r=r4e([t]);return e?n=>r(n)&&n.endsWith(e):r},"qmarksTest"),r4e=s(([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},"qmarksTestNoExt"),n4e=s(([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},"qmarksTestNoExtDot"),i4e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Z5e={win32:{sep:"\\"},posix:{sep:"/"}},eht=i4e==="win32"?Z5e.win32.sep:Z5e.posix.sep;Ba.sep=eht;var tp=Symbol("globstar **");Ba.GLOBSTAR=tp;var tht="[^/]",rht=tht+"*?",nht="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",iht="(?:(?!(?:\\/|^)\\.).)*?",oht=s((t,e={})=>r=>Ba(r,t,e),"filter");Ba.filter=oht;var ep=s((t,e={})=>Object.assign({},t,e),"ext"),sht=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Ba;let e=Ba;return Object.assign(s((n,i,o={})=>e(n,i,ep(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,ep(t,o))}static defaults(i){return e.defaults(ep(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,ep(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,ep(t,o))}},unescape:s((n,i={})=>e.unescape(n,ep(t,i)),"unescape"),escape:s((n,i={})=>e.escape(n,ep(t,i)),"escape"),filter:s((n,i={})=>e.filter(n,ep(t,i)),"filter"),defaults:s(n=>e.defaults(ep(t,n)),"defaults"),makeRe:s((n,i={})=>e.makeRe(n,ep(t,i)),"makeRe"),braceExpand:s((n,i={})=>e.braceExpand(n,ep(t,i)),"braceExpand"),match:s((n,i,o={})=>e.match(n,i,ep(t,o)),"match"),sep:e.sep,GLOBSTAR:tp})},"defaults");Ba.defaults=sht;var o4e=s((t,e={})=>(nD(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,t4e.default)(t)),"braceExpand");Ba.braceExpand=o4e;var aht=s((t,e={})=>new h5(t,e).makeRe(),"makeRe");Ba.makeRe=aht;var lht=s((t,e,r={})=>{let n=new h5(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t},"match");Ba.match=lht;var e4e=/[?*]|[+@!]\(.*?\)|\[|\]/,cht=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),h5=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){nD(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||i4e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!e4e.test(o[2]))&&!e4e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],c=n[i+2],u=n[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let c=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...c),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),E=!b&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[B,N]=[e[_],r[k]];B.toLowerCase()===N.toLowerCase()&&(r[k]=B,k>_?r=r.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,c=e.length,u=r.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],p=e[a];if(this.debug(r,d,p),d===!1)return!1;if(d===tp){this.debug("GLOBSTAR",[r,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,r,h,g),this.matchOne(e.slice(m),r.slice(h),n))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,r,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,m,r,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return n;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return o4e(this.pattern,this.options)}parse(e){nD(e);let r=this.options;if(e==="**")return tp;if(e==="")return"";let n,i=null;(n=e.match(Vmt))?i=r.dot?zmt:$mt:(n=e.match(Fmt))?i=(r.nocase?r.dot?Umt:Omt:r.dot?Qmt:Mmt)(n[1]):(n=e.match(Ymt))?i=(r.nocase?r.dot?Jmt:Kmt:r.dot?Xmt:Zmt)(n):(n=e.match(qmt))?i=r.dot?Gmt:Wmt:(n=e.match(Hmt))&&(i=jmt);let o=m5.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?rht:r.dot?nht:iht,i=new Set(r.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?cht(d):d===tp?tp:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==tp||h===tp||(h===void 0?m!==void 0&&m!==tp?u[p+1]="(?:\\/|"+n+"\\/)?"+m:u[p]=n:m===void 0?u[p-1]=h+"(?:\\/|"+n+")?":m!==tp&&(u[p-1]=h+"(?:\\/|\\/"+n+"\\/)"+m,u[p+1]=tp))}),u.filter(d=>d!==tp).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(n.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Ba.defaults(e).Minimatch}};Ba.AST=m5;Ba.Minimatch=h5;Ba.escape=iie;Ba.unescape=dv;var oie="contentExclusion",uU=class extends rU{static{s(this,"CopilotContentExclusion")}#e;#t=new Jr(1e4);#i=new Jr(200);constructor(e){super(),this.#e=e}async evaluate(e,r){try{e=II(e).toString();let n=await this.getGitRepo({uri:e}),i=await this.#n(n?.url??i2.all);if(!i)return tU;let o=n?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,r);if(l.isBlocked)return l}catch(n){return O1.exception(this.#e,n,`${oie}.evaluate`),S5e}return eD}evaluateFilePathRules(e,r,n){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=eD,a,l=fte(e.replace(r,""));e:for(let c of n)for(let u of c.paths)if(Ba(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=sie(c,"FILE_BLOCKED_PATH"),a=u;break e}return O1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:r,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,r,n){let i=r.filter(l=>l.ifAnyMatch),o=r.filter(l=>l.ifNoneMatch);if(!n||i.length===0&&o.length===0)return eD;let a=this.evaluateFileContent(i,o,n);return O1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,r,n){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>s4e(a)).some(a=>a.test(n)))return sie(i,"FILE_BLOCKED_TEXT_BASED");for(let i of r)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>s4e(a)).some(a=>a.test(n)))return sie(i,"FILE_BLOCKED_TEXT_BASED");return eD}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(r=>this.#o(r)))}catch(e){Ta(this.#e,e,`${oie}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#n(e){if(this.#r?.length)return this.#r;let r=await this.#o(e.toLowerCase());if(r.length!==0)return r}#r;setTestingRules(e){this.#r=e}#o=N5e(async e=>{let r=await this.#e.get(Qr).getGitHubSession();if(!r)throw new ls("No token found");let n=r.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(n,r.apiUrl),o=e.includes(i2.all);e.filter(u=>u!==i2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==i2.all).join(",")),i.searchParams.set("scope",o?i2.all:i2.repo);let l=await Mf(this.#e,r,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new eg(l)}return this.#s("fetch.success"),B5e(pht,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let n=await this.#e.get(U1).getRepo(gd(e));if(!n||!n?.remote)return;let i=n.remote.getUrlForApi();if(i)return{baseFolder:n.baseFolder,url:i}}#s(e,r,n){Bt(this.#e,`${oie}.${e}`,an.createAndMarkAsIssued(r,n))}};function s4e(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),r=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,r)}s(s4e,"stringToRegex");function sie(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(sie,"fileBlockedEvaluationResult");var uht=I.Object({name:I.String(),type:I.String()}),dht=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:uht}),aie=I.Array(dht),fht=I.Object({rules:aie,last_updated_at:I.String(),scope:I.String()}),pht=I.Array(fht);var Kc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new uU(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let r=await this.ctx.get(Rr).getTextDocumentValidation(e.document),n=r.status==="invalid",i=r.status==="invalid"?r.reason:void 0;this.updateStatusIcon(n,i)},"onDidChangeActiveTextEditor");this.ctx.get(Rr).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,r=>{this.#e=r.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,r,n){let i=Go(e)!==void 0;if(i||O1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,r),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){O1.error(this.ctx,"Error tracking telemetry",u)}return n==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,r){this.#e&&(e?this.ctx.get(Ki).setInactive(r??"Copilot is disabled"):this.ctx.get(Ki).clearInactive())}#i(e,r,n,i){let o=r+e;if(this.evaluateResultCache.get(o)===n.reason)return!1;if(this.evaluateResultCache.set(o,n.reason??"UNKNOWN"),n.reason===tU.reason)return O1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${r}`),!1;let l={isBlocked:n.isBlocked?"true":"false",reason:n.reason??"UNKNOWN"},c={elapsedMs:i};return Bt(this.ctx,e,an.createAndMarkAsIssued(l,c)),Bt(this.ctx,e,an.createAndMarkAsIssued({...l,path:r},c),1),O1.debug(this.ctx,`[${e}] ${r}`,n),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function s2(t,e,r){let n=await t.get(Kc).evaluate(e.uri,r);return n.isBlocked?{status:"invalid",reason:n.message??"Document is blocked by repository policy"}:{status:"valid"}}s(s2,"isDocumentValid");var Rr=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),r=[];for(let n of e)(await s2(this.ctx,n,n.getText())).status==="valid"&&r.push(n);return r}getTextDocumentUnsafe(e){let r=Ll(e.uri);return this.getTextDocumentsUnsafe().find(n=>n.uri===r)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(r=>{if(r.status==="valid")return r.document})}validateTextDocument(e,r){return s2(this.ctx,e,r)}async getTextDocumentValidation(e){try{let r=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return r===void 0?this.notFoundResult(e):this.validateTextDocument(e,r)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let r=this.getTextDocumentUnsafe(e);if(!r)return this.notFoundResult(e);let n=await this.validateTextDocument(e,r.getText());return n.status==="valid"?{status:"valid",document:r}:n}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(lo).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(lo).readFileString(e)}getWorkspaceFolder(e){let r=Ll(e.uri);return this.getWorkspaceFolders().find(n=>r.startsWith(Ll(n.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let r=Ll(e.uri);for(let n of this.getWorkspaceFolders()){let i=Ll(n.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(r.startsWith(i))return r.slice(i.length)}return Ti(r)}};function ys(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ys,"statusFromTextDocumentResult");var bn=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Rr).getRelativePath(e)??Ti(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let n=await this.ctx.get(Rr).getTextDocumentWithValidation({uri:e});if(n.status!=="notfound")return n;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await s2(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:Q1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(lo).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(lo).stat(e)).size/1024/1024}};f();f();var Ig=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}static{s(this,"Deferred")}};function q1(t,e=void 0){return new Promise(r=>setTimeout(()=>r(e),t))}s(q1,"delay");f();var lie=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let r of this.observers)r.next(e)}error(e){for(let r of this.observers)r.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},dU=class extends lie{static{s(this,"ReplaySubject")}subscribe(e){let r=super.subscribe(e);return this._value!==void 0&&e.next(this._value),r}next(e){this._value=e,super.next(e)}};var bd=class{constructor(e){this.ctx=e;this.#e=new _t("AsyncCompletionManager");this.requests=new Jr(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,r){for(let[n,i]of this.requests)if(cie(e,r,i))return!0;return!1}updateCompletion(e,r){let n=this.requests.get(e);n!==void 0&&(n.partialCompletionText=r,n.subject.next(n))}queueCompletionRequest(e,r,n,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,r.substring(r.lastIndexOf(`
`)+1));let a=new dU;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:r,prompt:n,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,r,n,i,o){let a=this.ctx.get(Dt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,r,n,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,r,n,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,r,n,i){i||(this.mostRecentRequestId=e);let o=!1,a=new Ig,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(cie(r,n,d)){if(d.state===0){let p=r.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)cie(r,n,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,r){e===this.mostRecentRequestId&&r.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${r.headerRequestId}`),r.cancellationTokenSource.cancel(),this.requests.delete(r.headerRequestId))}};function cie(t,e,r){if(r.prompt.suffix!==e.suffix||!t.startsWith(r.prefix))return!1;let n=t.substring(r.prefix.length);return r.state===0?r.choice.completionText.startsWith(n)&&r.choice.completionText.trimEnd().length>n.length:r.partialCompletionText===void 0?!0:r.partialCompletionText.startsWith(n)}s(cie,"isCandidate");f();f();var sD=class{constructor(e){this.maxSize=e;this.root=new oD;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,r){let{node:n,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of n.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new oD;n.removeChild(o),n.addChild(l,c),c.addChild(o.slice(l.length),a),n=c,i=i.slice(l.length);break}if(i.length>0){let o=new oD;n.addChild(i,o),n=o}}n.value=r,this.leafNodes.add(n),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:r,remainingKey:n})=>r.value!==void 0?{remainingKey:n,value:r.value}:void 0).filter(r=>r!==void 0)}delete(e){let{node:r,remainingKey:n}=this.findClosestNode(e);n.length>0||this.deleteNode(r)}findClosestNode(e){let r=!0,n=this.root,i=[{node:n,remainingKey:e}];for(;e.length>0&&r;){r=!1;for(let[o,a]of n.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),n=a,r=!0;break}}return{node:n,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:r,edge:n}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),r.removeChild(n),r.addChild(n+o,a);return}if(r.removeChild(n),r.parent===void 0)return;let i=r.parent;if(r.value===void 0&&r.childCount===1){let[o,a]=Array.from(r.children)[0],l=i.edge+o;r.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let r of this.leafNodes)(e===void 0||r.touched<e.touched)&&(e=r);return e}},oD=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,r){this._children.set(e,r),r.parent={node:this,edge:e}}removeChild(e){let r=this._children.get(e);r&&(r.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var km=class{constructor(){this.cache=new sD(100)}static{s(this,"CompletionsCache")}findAll(e,r){return this.cache.findAll(e).flatMap(({remainingKey:n,value:i})=>i.content.filter(o=>o.suffix===r&&o.choice.completionText.startsWith(n)&&o.choice.completionText.length>n.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(n.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:n.length})})))}append(e,r,n){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:r,choice:n}]})}else this.cache.set(e,{content:[{suffix:r,choice:n}]})}clear(){this.cache=new sD(100)}};f();f();f();var Bm=class{constructor(e,r,n){this.languageId=e;this.prefix=r;this.completion=n}static{s(this,"BlockTrimmer")}static isSupported(e){return jc.isSupported(e)}async withParsedStatementTree(e){var n=[];try{let r=JJ(n,jc.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await r.build();return await e(r)}catch(i){var o=i,a=!0}finally{XJ(n,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let r;if(e&&this.isCompoundStatement(e))r=e;else if(e){let n=e.parent;for(;n&&!this.isCompoundStatement(n);)n=n.parent;r=n}if(r){let n=this.asCompletionOffset(r.node.endIndex);if(n&&this.completion.substring(n).trim()!=="")return n}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let r=this.asCompletionOffset(e.node.endIndex),n=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,r??0),Math.max(0,n??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var fU=class extends Bm{constructor(r,n,i,o=3,a=7){super(r,n,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async r=>{let n=r.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(n);return i=this.trimAtFirstBlankLine(i),n&&(i=this.trimAtStatementChange(n,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let r=this.completion.match(/\S/);return r&&r.index!==void 0?this.prefix.length+r.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(r){let n=[...this.trimmedCompletion(r).matchAll(/\r?\n\s*\r?\n/g)];for(;n.length>0&&(r===void 0||r>n[0].index);){let i=n.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return r}trimAtStatementChange(r,n){let i=this.prefix.length,o=this.prefix.length+(n??this.completion.length);if(r.node.endIndex>i&&this.isCompoundStatement(r))return r.nextSibling&&r.node.endIndex<o?this.asCompletionOffset(r.node.endIndex):n;let a=r,l=r.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):n}};async function a4e(t,e){var l=[];try{let r=t.getText();let n=t.offsetAt(e);let i=JJ(l,jc.create(t.detectedLanguageId,r,0,r.length));await i.build();let o=i.statementAt(n);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(n<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{XJ(l,u,d)}}s(a4e,"getBlockPositionType");f();f();var W1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function l4e(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?r=.031231253521808708:r=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?r=.06751619128429062:r=.09625089153176467:r=.027268163053989804:t[308]>1e-35?r=.060174483556283756:r=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?r=-.03969241799174589:r=.01086816842550381:t[31]>1e-35?r=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?r=-.04224490699947552:r=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?r=-.13448447971850278:r=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?r=-.07256260662659254:t[4]>60.50000000000001?r=-.08227503453609311:r=-.020596416747563847:r=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?r=-.10046536995362734:t[133]>1e-35?r=-.06407649822752297:t[225]>1e-35?r=.08035785003303324:t[92]>1e-35?r=.018901360933204676:t[20]>1e-35?r=.05252546973665552:t[8]>2592.5000000000005?r=-.040543705016462955:r=-.011236043818320725:t[9]>17.500000000000004?r=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?r=.03527165701669741:r=-.0071847350825815035:t[127]>1e-35?r=.024373016379595405:t[9]>2.5000000000000004?r=-.0035090719709448288:r=-.03514829488063766;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?n=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?n=-.003764520033319488:n=.06570817919969299:t[4]>61.50000000000001?n=.028346156293069538:n=.0908154644362606:n=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?n=.0019305229020073053:n=.09279357295883772:n=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?n=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?n=.044727478132905285:t[115]>1e-35?n=.10245804828855934:t[9]>17.500000000000004?n=-.03353173647469207:t[2]>98.50000000000001?n=-.10048106638102179:n=-.05484231104348874:t[31]>1e-35?n=.016807537467116516:t[9]>6.500000000000001?n=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?n=-.01882594250504289:n=-.05585658862796076:n=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?n=-.09262278043707878:t[133]>1e-35?n=-.058454257768893625:t[32]>1e-35?n=-.09769348447126434:t[25]>1e-35?n=-.0725430043727677:t[122]>1e-35?n=-.10047841601578077:n=-.00580671054458958:t[9]>13.500000000000002?n=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?n=-.0076376731757173515:n=.03394923033036848:t[127]>1e-35?n=.02070489091204209:n=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let B;t[131]>1e-35?B=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?B=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?B=-.022305242912035072:B=.024792895826340516:B=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?B=.2080083584805785:B=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?B=.060783227455868206:B=-.056904865557409035:B=-.03278952553107572:t[192]>1e-35?B=.13117402617043625:B=.01647119888257836:B=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?B=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?B=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?B=-.11083976837572328:t[146]>1e-35?B=-.03359294484446772:B=-.0042815953591236475:t[190]>1e-35?B=-.09264239592903775:t[10]>1e-35?B=.022282638485105657:B=-.0205994057928458:t[5]>4918.500000000001?B=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?B=.08935072241972036:B=-.03781647876237494:B=.0062655753179671515:t[31]>1e-35?B=.008603500300349887:t[230]>1e-35?B=.03350056932774173:t[23]>1e-35?t[241]>1e-35?B=.10277555508503314:B=.0017901817172993888:t[2]>98.50000000000001?B=-.05920081229672715:B=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let q;t[131]>1e-35?q=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?q=.07473600489975568:t[0]>93.50000000000001?q=-.021596848506011502:q=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?q=.10264284346448256:q=.031042487183181262:q=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?q=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?q=.006271403149804702:q=-.030013637555715046:t[0]>4449.500000000001?q=-.06556876058654929:q=.06437994816903034:t[32]>1e-35?q=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?q=-.09349726304052086:t[210]>1e-35?q=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?q=-.029188394315052574:q=.017219308333820193:q=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?q=-.04428555753857688:q=.0001456106867817353:t[5]>213.50000000000003?q=.01740292726636365:q=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?q=.03410288911259329:t[121]>1e-35?q=-.06056527462120627:t[8]>2592.5000000000005?q=.12166808844363577:t[191]>1e-35?q=.11669879218998758:q=-.001664858391716235:q=-.01262927450503166:q=-.04506589951879664:t[227]>1e-35?q=-.08548904959752329:q=.02156080776537726;let te;t[306]>1e-35?t[149]>1e-35?te=-.1389218965136736:te=-.032218642644416894:t[13]>1e-35?te=.006465035217331847:t[50]>1e-35?te=-.1381687930130022:t[179]>1e-35?te=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?te=-.03262719498763048:te=.023342916702125613:t[191]>1e-35?te=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?te=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?te=-.09989343595668776:te=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?te=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?te=-.09165257825246746:t[9]>32.50000000000001?te=.02484870392366004:te=-.008499493096971395:t[8]>24.500000000000004?te=.02459679192828244:te=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?te=.0015644546318714849:te=-.06579524865022705:te=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?te=.03331853632960164:te=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?te=-.019091477207111116:te=.037878468575478504:t[94]>1e-35?te=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?te=.16919658785098224:t[243]>1e-35?te=-.06580584936754524:te=.01567555159935563:t[129]>1e-35?te=.06721746994993226:t[10]>32.50000000000001?te=-.046394462507797975:te=-.006436180519584767;let me;t[131]>1e-35?me=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?me=.019122095523977856:t[298]>1e-35?me=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?me=-.026094309429557913:t[204]>1e-35?me=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?me=.012643810980689466:me=-.07884161741497837:me=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?me=.04493082949897325:me=.18046359750455776:t[7]>18.500000000000004?me=-.018667348656891496:me=.02584325784698236:me=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?me=.04749240016989375:me=-.0333334578246718:t[5]>3276.5000000000005?me=.11330554740098908:t[7]>94.50000000000001?me=.1296600395033268:me=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?me=-.13787130789142835:t[0]>1847.5000000000002?me=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?me=.028856848462727104:me=-.11197632885851168:me=.08169801342016791:t[1]>22.500000000000004?me=-.021052888644970163:me=.019048604298876753:t[7]>4.500000000000001?me=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?me=.03432638833359197:me=-.0036767863082454973:t[1]>48.50000000000001?me=.03087375270128195:t[2]>3.5000000000000004?me=-.04219917149740248:me=.018818493993207935;let oe;t[306]>1e-35?oe=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?oe=-.09091897542577475:oe=.04042943082645558:t[218]>1e-35?oe=.056254985867151:oe=-.053848117950183044:oe=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?oe=.021581808008986944:oe=-.05639286496176611:oe=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?oe=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?oe=.023885302967553288:oe=.1617794086125622:t[212]>1e-35?oe=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?oe=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?oe=.01894935813286188:oe=-.06449356357429188:oe=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?oe=-.034718828212885515:oe=.0898976288814321:t[1]>17.500000000000004?oe=-.15440137451988326:oe=-.03864183216821465:oe=.009988507307006308:oe=-.08540311947043305:t[50]>1e-35?oe=-.13323659732101975:t[134]>1e-35?oe=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?oe=.08082476177379844:oe=-.041665761903645876:t[179]>1e-35?oe=-.12405023987936657:t[39]>1e-35?oe=-.06247416524997478:t[138]>1e-35?oe=-.10724031753676487:oe=-.0005423122305122404;let H;t[308]>1e-35?H=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?H=.023223358334607133:H=-.04383410185346742:H=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?H=.023406489302867494:H=-.085521220804058:H=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?H=.028120059780969632:H=-.04211009474298743:t[294]>1e-35?H=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?H=-.0993035220737934:H=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?H=.029770210551187937:H=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?H=.06421359317599738:H=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?H=.024368404612215164:H=-.04045232374803373:t[131]>1e-35?H=.017372701982485795:t[120]>1e-35?H=.08812710275150198:t[18]>1e-35?t[90]>1e-35?H=.18451364351180236:t[7]>33.50000000000001?H=-.03850813130183531:t[195]>1e-35?H=.06966114053446336:t[3]>16.500000000000004?H=-.0012869181693341211:t[0]>4242.500000000001?H=-.054625548611291035:H=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?H=.006302103427145562:H=.13967622319898698:t[121]>1e-35?H=-.038798585213145644:t[5]>4544.500000000001?H=-.08050498033009466:H=-.002986974112681435;let O;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?O=-.03461119351456781:O=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?O=-.12404435523286539:O=-.0034376913880382956:O=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?O=.0037507103585310234:O=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?O=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?O=-.04832024079663151:t[37]>1e-35?O=-.037103393468366934:O=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?O=.032539071163832034:t[5]>1643.5000000000002?O=.036408625378035665:t[0]>1500.5000000000002?O=-.1346358322854993:O=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?O=-.1133991164577881:t[9]>52.50000000000001?O=-.024478640359723122:O=.03673777861098756:O=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?O=.002583438691776944:O=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?O=-.02141222346712401:O=.06392462314316179:t[4]>12.500000000000002?O=.08700122294434816:t[8]>267.50000000000006?O=.056923170082743224:O=-.07716309825583327:t[32]>1e-35?O=-.03961343943752142:O=.002674914122888783:t[1]>42.50000000000001?O=-.05217539654421676:t[145]>1e-35?O=.09553630282946368:O=-.009424791262477729;let le;t[183]>1e-35?le=-.05753337139158443:t[308]>1e-35?le=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?le=-.10477869875380448:le=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?le=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?le=-.04442302951713574:le=.00012409888451734224:le=-.092199119633697:t[225]>1e-35?le=.13773072450201831:t[0]>2882.5000000000005?le=.0028540012229920533:t[298]>1e-35?le=.07134486044361629:le=.014297412329837425:t[145]>1e-35?le=.05608385321902638:t[92]>1e-35?le=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?le=-.0039957800609801315:le=.0776927564241081:t[203]>1e-35?le=-.05502900859432093:t[105]>1e-35?le=.06062892720841595:le=-.009574839629252128:t[31]>1e-35?le=.009488858841144216:t[23]>1e-35?t[20]>1e-35?le=.08818126313644752:t[8]>161.50000000000003?le=.014353968957885408:le=-.022240738532827903:t[210]>1e-35?le=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?le=-.043902062079383485:le=-.014741559220396223:le=-.00934935734853194:t[6]>32.50000000000001?le=.1514593126307404:le=.010771222510801532:t[10]>22.500000000000004?le=.01412495209334078:le=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let j;t[294]>1e-35?j=-.042529778074638265:t[266]>1e-35?j=-.1180276669679798:t[134]>1e-35?j=-.026818144353279623:t[183]>1e-35?j=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?j=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?j=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?j=-.03049646619610203:t[1]>50.50000000000001?j=.20634590755061122:j=.06956378103625731:t[0]>3770.5000000000005?j=-.07946414366134913:t[19]>1e-35?j=.17083312065604694:t[2]>21.500000000000004?j=-.02327981978127724:j=.129717297518715:t[145]>1e-35?j=.006891245076133524:j=-.0789123467863741:t[3]>99.50000000000001?j=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?j=.06447639919732716:j=-.05457561977645972:t[306]>1e-35?j=-.029995903305383882:t[191]>1e-35?j=.030596508110850414:t[242]>1e-35?j=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?j=.09518584795377832:j=-.018197744600833596:t[13]>1e-35?j=.006751790086127549:t[148]>1e-35?j=.01904174573618417:t[99]>1e-35?j=.025287735102561926:t[4]>14.500000000000002?j=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?j=-.09467943982430241:t[243]>1e-35?j=-.02521824751996268:j=.005437570718352172:j=-.022476214821960674;let W;t[0]>384.50000000000006?t[84]>1e-35?W=-.06088131453064195:t[147]>1e-35?W=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?W=.04219361472548491:W=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?W=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?W=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?W=-.11431764534511478:W=.013549717238356157:W=-.020987333767091276:t[6]>2.5000000000000004?W=-.02914877855133127:W=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?W=-.10087072787978416:t[37]>1e-35?W=-.030467397753331196:t[229]>1e-35?W=-.1017559811057469:t[4]>20.500000000000004?W=-.00413177742240167:t[20]>1e-35?W=.05213315982685969:W=.0037921635866823133:t[8]>51.50000000000001?W=.07327913092421544:t[6]>49.50000000000001?W=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?W=.02744420891894289:W=.11288946357194463:W=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?W=-.012329314369909049:W=.026816658655600168:W=-.0872405354618811:W=.007872673500247845:t[1]>42.50000000000001?W=-.04309044198258254:t[145]>1e-35?W=.07572529147860785:t[7]>5.500000000000001?W=-.013837187093264945:t[1]>17.500000000000004?W=.04208698439539668:W=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let ee;t[8]>2915.5000000000005?t[297]>1e-35?ee=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?ee=-.01034964686484714:ee=-.07357437440667927:ee=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?ee=-.09476398869062203:t[9]>72.50000000000001?ee=-.0757383854264379:ee=.02806542779508718:ee=-.05147742568418084:ee=.10212721564444344:ee=.0518263760642861:ee=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?ee=-.10669213185972036:ee=.027050434286384796:t[302]>1e-35?ee=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?ee=.06354599160071946:t[1]>67.50000000000001?ee=.05317447949011187:ee=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?ee=-.09369289448773599:t[0]>2215.5000000000005?ee=.04077965380363924:t[0]>807.5000000000001?ee=-.0591771776458298:ee=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?ee=-.016323380219241672:ee=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?ee=.03720704290087811:ee=-.008730548158766654:t[4]>80.50000000000001?ee=-.05346644687473197:ee=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?ee=.019984510398089086:ee=-.03917825025861855:t[9]>170.50000000000003?ee=-.09759719821334525:ee=-.0023586682752856298;let pe;t[183]>1e-35?t[17]>1e-35?pe=.030100940443356424:t[10]>1.5000000000000002?pe=-.10861112216742408:pe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?pe=-.032062878390325456:pe=-.10808232631806887:t[8]>1641.5000000000002?pe=-.06147013392655731:t[4]>12.500000000000002?pe=.03324767551088266:t[145]>1e-35?pe=.028851633810612017:pe=-.054871239091792784:t[134]>1e-35?pe=-.023813968121342108:t[266]>1e-35?pe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?pe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?pe=-.025350325484720576:pe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?pe=.056817276537534815:pe=-.07674158463557636:pe=-.06335553143454145:t[1]>56.50000000000001?pe=.16390494217299284:pe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?pe=.041717597065890205:pe=-.10357913492269129:t[10]>29.500000000000004?pe=.1365512866715726:pe=.020600048310575665:pe=.09708785634773187:pe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?pe=-.03146213719547347:pe=.11784024316238083:pe=-.050940520532045355:pe=-.047988344143075616:t[191]>1e-35?pe=.028764654731460032:pe=.0011911575567860023;let re;t[294]>1e-35?t[10]>50.50000000000001?re=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?re=-.05103908560370243:re=.05002066201169583:re=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?re=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?re=.127983140816313:re=-.05436534163636867:re=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?re=-.009504203657088933:t[8]>819.5000000000001?re=.18689664822602375:re=.03635576744011826:re=-.029862411809998525:t[223]>1e-35?re=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?re=-.09405026597863717:t[0]>4153.500000000001?re=.053577663326799765:re=-.05062127873995668:re=.06512222894425874:t[39]>1e-35?re=-.04985311717827547:t[51]>1e-35?re=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?re=-.02860634573675884:re=.08863753005590103:re=.11158892111063744:t[0]>655.5000000000001?re=-.031005736641654926:re=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?re=-.00843386136334982:re=-.05273594615999777:re=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?re=-.015774115523598486:re=.10147367091236065:re=-.048307000563071016:re=.002118376117677254;let fe;t[8]>1014.5000000000001?t[9]>137.50000000000003?fe=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?fe=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?fe=.07211107542565391:fe=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?fe=-.0751486415451188:t[1]>59.50000000000001?fe=.13459005084554104:fe=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?fe=.06715575425741895:fe=-.005895690393702183:t[8]>2915.5000000000005?fe=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?fe=-.00029068886245881074:fe=.0613467393188786:t[148]>1e-35?fe=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?fe=.003887223773199377:fe=-.08553893131979015:fe=.025654192706396767:fe=-.05651733979610658:fe=-.02039913645229667:t[2]>7.500000000000001?fe=-.1058450646728524:fe=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?fe=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?fe=.1283258201586378:fe=-.01718135372229775:fe=-.07702452408491414:t[125]>1e-35?fe=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?fe=.04273051857848212:fe=-.04533122948101463:t[2]>196.50000000000003?fe=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?fe=.0231032972703664:fe=-.04807386814498683:fe=.002729435991332102;let he;t[179]>1e-35?he=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?he=.026484626664041125:t[10]>1.5000000000000002?he=-.10187000872941615:he=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?he=.09574540795390041:he=-.06454986703691233:he=-.11411849349353141:t[266]>1e-35?he=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?he=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?he=-.04403391373512386:he=.1132928075412222:t[2]>47.50000000000001?he=-.09700191391838056:he=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?he=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?he=-.001668912999010927:he=-.02363511102970245:t[8]>58.50000000000001?he=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?he=.0911011436534449:t[1]>28.500000000000004?he=-.07192390493729035:he=.06913818091291246:he=-.012312625373699222:he=.06784496312307986:he=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?he=.0026564453057705273:he=-.025425772389361445:t[122]>1e-35?he=-.12046786388602149:t[0]>3183.5000000000005?he=.01162092842804907:t[91]>1e-35?he=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?he=-.0001647792543020228:he=-.023664538532907665:he=.01609078206180752;let Ne;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Ne=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Ne=-.017696526862422682:Ne=.1450050954613223:Ne=-.05406930069823832:Ne=-.08308700260259043:t[120]>1e-35?Ne=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Ne=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Ne=.038431826961746934:Ne=-.05937462906539856:t[9]>65.50000000000001?Ne=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Ne=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Ne=-.09579030954062734:Ne=.025064711572811746:Ne=.02579440518821548:Ne=.1044440128091862:Ne=-.058348633139536844:Ne=.07766788227934436:Ne=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Ne=.07463684068207214:Ne=.18244269035484484:t[6]>39.50000000000001?Ne=-.06050050067471004:Ne=.05787759066913493:Ne=.010783225857972171:Ne=.1674891243602606:t[4]>9.500000000000002?Ne=-.004814132027475892:Ne=-.14543299413454813:Ne=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Ne=-.07634466313617769:Ne=.0287825335169114:Ne=-.06894721943300268:Ne=-.00023988459059521937;let Re;t[131]>1e-35?t[1]>93.50000000000001?Re=-.05706887458825395:t[2]>1.5000000000000002?Re=.011446637886629108:Re=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Re=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Re=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Re=.026278724448495064:Re=.17053138400480508:t[0]>4463.500000000001?Re=-.06482289890096041:Re=.03026516489536295:Re=-.031785170717683144:Re=.1312690622980455:t[13]>1e-35?Re=.14336922540461444:Re=.03523850945454039:Re=-.015407465968975714:t[39]>1e-35?Re=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Re=-.0659975068798723:Re=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Re=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Re=.057409156184759516:Re=.2024322059866388:Re=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Re=.010648654146284154:t[308]>1e-35?Re=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Re=.12364025998551711:Re=-.02247495081065243:t[1]>22.500000000000004?Re=-.0726295464624251:Re=.03481895086048152:t[0]>4331.500000000001?Re=-.04775443357020673:Re=.07172377425057568:t[2]>89.50000000000001?Re=-.11782645274716962:Re=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let pt;t[179]>1e-35?pt=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?pt=-.07595415373151816:pt=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?pt=.022822510448266862:pt=.17491569312933697:pt=-.058362287133533565:t[2]>2.5000000000000004?pt=-.03633895806364428:pt=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?pt=-.07294848747514579:pt=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?pt=-.07009535282685533:t[8]>2640.0000000000005?pt=-.051761240111316276:t[131]>1e-35?pt=-.06245774419231631:pt=.03495606662854905:pt=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?pt=.0015036626973581122:pt=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?pt=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?pt=.022343994371919224:pt=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?pt=.07724450228328664:t[0]>3853.5000000000005?pt=-.15671707454435677:t[10]>28.500000000000004?pt=-.10179090671841723:pt=.014878216919760927:pt=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?pt=.14054154485273487:pt=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?pt=-.08632985141410315:pt=.005524157938954954:pt=-.08802502622523681:pt=-.0004649168897260341;let Tt;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?Tt=-.007458687464321174:Tt=-.09444966249102484:t[1]>23.500000000000004?Tt=.08564129697360716:Tt=-.07105002902845851:Tt=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?Tt=-.10326216566705966:t[1]>26.500000000000004?Tt=.0050539832484585365:Tt=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?Tt=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?Tt=.05783632021087773:t[10]>17.500000000000004?Tt=-.06720598671764105:t[1]>47.50000000000001?Tt=.097495825172558:Tt=-.013372242800584872:Tt=-.06463226787713715:t[42]>1e-35?Tt=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?Tt=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?Tt=.11051270080118503:Tt=.027719462817590454:t[8]>597.5000000000001?Tt=-.08441503592016869:Tt=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?Tt=-.12190088985091102:Tt=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?Tt=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?Tt=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?Tt=.016585157185448045:Tt=-.11032043771149425:Tt=.01586986028570486:t[8]>388.50000000000006?Tt=-.10592413013261853:Tt=.04930703248769364:t[13]>1e-35?Tt=.003621937787920821:Tt=-.0013786331198611841;let Ct;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?Ct=.009769895322846493:Ct=-.10620052926943656:t[9]>19.500000000000004?Ct=.03781202525403449:t[9]>14.500000000000002?Ct=-.11485785321365344:t[9]>6.500000000000001?Ct=.07677177833073881:t[0]>4342.500000000001?Ct=-.07079285609687631:t[49]>1e-35?Ct=.06156814809246001:Ct=-.014788509042554625:Ct=-.032659201618470655:t[5]>5207.500000000001?Ct=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?Ct=-.03094160322187924:t[1]>29.500000000000004?Ct=.09474646043921069:Ct=.023445783928231618:Ct=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?Ct=-.07164443768784848:t[1]>29.500000000000004?Ct=.089473622509272:t[8]>597.5000000000001?Ct=-.08155349903101317:Ct=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?Ct=-.004003900679358653:t[190]>1e-35?Ct=-.09236113461485262:t[8]>3198.5000000000005?Ct=-.0124130160451179:Ct=.018453070064009328:t[15]>1e-35?Ct=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?Ct=-.0009580759587680961:Ct=-.03227283036698222:Ct=.01369287669536875:t[1]>50.50000000000001?Ct=-.04213060332500437:t[35]>1e-35?Ct=-.11508095777767471:t[190]>1e-35?Ct=-.08611884672400155:t[297]>1e-35?Ct=.05723551879433584:Ct=-.004829340082311461;let bt;t[183]>1e-35?bt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?bt=-.11753465135886734:bt=-.007515490299047085:bt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?bt=-.12371142493530439:t[1]>36.50000000000001?bt=.032189417575190435:bt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?bt=-.0784518658439288:t[2]>54.50000000000001?bt=.12477882322370665:bt=.000313468482399738:bt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?bt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?bt=.0353146070135579:bt=-.06327619611098285:bt=.02813577701641991:bt=-.12354390728506215:t[34]>1e-35?bt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?bt=-.01245803535276381:bt=-.07169472553475001:t[1]>11.500000000000002?bt=.12989984824561698:bt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?bt=.010390226893521422:t[10]>14.500000000000002?bt=.16790888126487719:bt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?bt=-.043398307129729134:bt=.09963544907820426:t[9]>30.500000000000004?bt=-.13540713124984502:t[9]>17.500000000000004?bt=.0509435850590757:bt=-.04761897852404613:t[4]>78.50000000000001?bt=.09197086656470652:bt=.0006771050176682337;let ce;t[122]>1e-35?t[6]>36.50000000000001?ce=.05686884451670743:ce=-.05334759543084309:t[266]>1e-35?ce=-.08603579519816038:t[157]>1e-35?ce=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?ce=-.0499592651503952:t[0]>725.5000000000001?ce=.11780353905132664:ce=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?ce=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?ce=-.03190157229022304:ce=.07985197845805492:ce=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?ce=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?ce=-.027174047777029083:ce=.057117284879796476:t[3]>43.50000000000001?ce=-.0016147040913107311:ce=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?ce=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?ce=-.01466076988151239:ce=.13375695925484857:ce=-.04885873081899647:t[0]>5566.500000000001?ce=.11086813028591343:t[8]>992.5000000000001?ce=-.07622304217072383:ce=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?ce=.03285858361708423:ce=-.12354858211764992:ce=.0672788301823281:t[15]>1e-35?ce=.08658836986585006:ce=-.02741484278509758:t[290]>1e-35?ce=-.08161310335133287:t[135]>1e-35?ce=-.04824156054814152:ce=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let X;t[179]>1e-35?X=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?X=.1470294450403005:X=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?X=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?X=.07965955447707423:t[10]>10.500000000000002?X=-.09236156404262426:X=.03396273196231458:X=-.13246465021467432:X=.07092822261735353:X=-.08753829085942:X=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?X=.004705878789890202:X=.13775378964952867:X=-.04770928980587811:t[10]>29.500000000000004?X=.011221519891071544:t[0]>3853.5000000000005?X=.06365381191628273:X=.15506252245336827:t[1]>37.50000000000001?X=-.07254777021042061:X=.026514587757252385:t[308]>1e-35?X=.04115804816617256:t[10]>26.500000000000004?X=.02077721353011946:t[5]>3548.5000000000005?X=-.1280907116663952:X=-.021974774274438:t[306]>1e-35?X=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?X=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?X=-.005710865560475598:t[94]>1e-35?X=-.06751507982853555:X=.027250040757588703:t[9]>52.50000000000001?X=.07060357924595577:X=-.030297760713011795:X=-.0006005400085266517;let ne;t[113]>1e-35?ne=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?ne=-.06996356565314456:ne=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?ne=-.08317707559926495:t[21]>1e-35?ne=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?ne=-.010538203005984922:ne=.08454819465349446:t[9]>124.50000000000001?ne=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?ne=-.08542251249346582:t[9]>50.50000000000001?ne=-.023428882537657472:ne=.010042500833979073:ne=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?ne=.03006025206979096:t[9]>108.50000000000001?ne=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?ne=.04222035773042132:ne=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?ne=-.07209095448054853:ne=.028065954981903313:ne=.08714651929917122:ne=-.006678820669279169:t[10]>40.50000000000001?ne=.006982396294941626:ne=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?ne=-.09351114982645548:t[4]>3.5000000000000004?ne=-.004837550129223451:ne=-.08324141237464677:t[303]>1e-35?ne=.10703037493990825:t[9]>156.50000000000003?ne=-.10803018621648303:t[116]>1e-35?ne=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?ne=.10261721665006701:ne=.018994509090668264:ne=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let Pe;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Pe=.08396556264106572:Pe=-.0562516995099192:Pe=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?Pe=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?Pe=.0052017514017035915:Pe=-.11194119432743639:Pe=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?Pe=-.025692451287403446:Pe=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?Pe=-.11892250746801664:t[10]>22.500000000000004?Pe=.07548493166973796:Pe=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?Pe=.13750699058082427:t[18]>1e-35?Pe=.06535408879552801:Pe=-.054118179035040674:Pe=.1344282838979622:t[0]>3982.5000000000005?Pe=-.10409582202467015:t[19]>1e-35?Pe=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?Pe=.012705935670766466:Pe=.14149359442527545:Pe=-.047977876173706004:t[20]>1e-35?Pe=.057945228080337946:t[0]>3642.5000000000005?Pe=-.008726535792122467:Pe=-.08424769891378858:t[34]>1e-35?Pe=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?Pe=.01196849566739346:Pe=.1614642278429876:Pe=-.043022338150701625:t[3]>5.500000000000001?Pe=-.03907848255033881:Pe=.018280601026175593:Pe=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let gt;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?gt=-.01192072916082109:gt=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?gt=.06874032717466054:t[4]>40.50000000000001?gt=-.07752510020707537:t[1]>76.50000000000001?gt=-.09944032260703917:t[8]>1381.5000000000002?gt=-.054466635810800745:t[1]>32.50000000000001?gt=.05974084520839573:gt=-.0384718740755954:gt=-.11374190719134032:t[0]>2151.5000000000005?gt=-.13703645155803298:gt=.004833344758654556:t[297]>1e-35?t[212]>1e-35?gt=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?gt=.013539805885738608:gt=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?gt=.09941880179344399:gt=-.01608127391210995:gt=.08025226531247417:t[9]>67.50000000000001?gt=.13525448212444113:t[6]>61.50000000000001?gt=-.05511099182158894:t[94]>1e-35?gt=-.06821509831783572:t[128]>1e-35?gt=.11361314817714643:gt=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?gt=-.09954181329804547:t[197]>1e-35?gt=.10102833149755386:t[188]>1e-35?gt=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?gt=-.03781554214742005:gt=.09927933385592314:gt=-.020006000056720083:gt=-.10520473615957895:gt=-.12006990846253787:gt=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let lr;t[147]>1e-35?t[1]>53.50000000000001?lr=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?lr=-.030504020655417463:lr=.07102458639110094:lr=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?lr=.055304563442710876:t[1]>53.50000000000001?lr=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?lr=-.1568835288372895:lr=-.0279829124400056:lr=.04493843959601833:lr=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?lr=-.054133834303687026:t[9]>48.50000000000001?lr=.11263810289007213:t[9]>9.500000000000002?lr=-.02202034562838259:t[4]>45.50000000000001?lr=-.03410927569045158:lr=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?lr=-.029687297407295893:lr=.10673602850001934:t[4]>42.50000000000001?lr=.0036275562945108117:lr=-.0760789221330622:lr=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?lr=.08274426793676076:lr=-.07076234425516396:lr=.13890177606150175:lr=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?lr=-.09250637750836187:lr=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?lr=-.01897867921812603:lr=.04890781705365262:lr=-.11569892307597907:t[2]>106.50000000000001?lr=.09032697440623969:lr=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let Gr;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Gr=.0011484728213539738:Gr=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Gr=-.09828874964938798:t[8]>1586.5000000000002?Gr=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Gr=.011938269926919522:Gr=.17541983715953954:t[19]>1e-35?Gr=.023002786011088672:Gr=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Gr=.06508934844183291:Gr=-.10168553534835639:Gr=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Gr=.021140806225203937:Gr=-.1167833342453639:t[2]>33.50000000000001?Gr=.13163585734056618:Gr=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Gr=.06314479201263888:Gr=-.09639088327091713:t[10]>29.500000000000004?Gr=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Gr=40577156464836036e-21:Gr=.12322387121810757:Gr=-.03697224045046014:t[1]>22.500000000000004?Gr=.016474835887320276:Gr=.16919298733903063:Gr=.07633203630214054:Gr=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Gr=.14150493354700563:Gr=-.01831155354975749:t[1]>28.500000000000004?Gr=-.07952557178685365:t[10]>28.500000000000004?Gr=.0665695554984927:Gr=-.053640139319277094:Gr=.0004754840665898665;let Yr;t[76]>1e-35?Yr=-.06814884255939921:t[179]>1e-35?Yr=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?Yr=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?Yr=.004193658608848433:Yr=-.1066968975983452:t[8]>302.50000000000006?Yr=.05476730110440451:Yr=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?Yr=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?Yr=.013555772109446666:Yr=-.09856116699770784:Yr=.0284329611813383:t[2]>52.50000000000001?Yr=.04008708444763762:t[9]>29.500000000000004?Yr=-.1289599546008197:Yr=-.018566534248335896:t[8]>747.5000000000001?Yr=.02236484980076122:Yr=.1148871655157582:t[8]>3084.0000000000005?Yr=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?Yr=.03164751204281298:Yr=.11752140436184891:t[9]>42.50000000000001?Yr=-.07180559595410106:t[22]>1e-35?Yr=.09325040416256854:Yr=-.016041122807939914:Yr=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?Yr=-.010718250133458515:Yr=.09818827994853763:Yr=.010180038981174032:Yr=-.039472162599295535:t[9]>170.50000000000003?Yr=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?Yr=-.08674788057474031:Yr=.02077653508548371:Yr=-.0003536561382007414;let hn;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?hn=.018337297491457794:hn=-.05926206443180149:hn=.024026520855881126:t[288]>1e-35?t[184]>1e-35?hn=.10747078482128616:t[126]>1e-35?hn=-.10550625192391357:t[7]>71.50000000000001?hn=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?hn=.1317396472229434:hn=-.025035791351328947:hn=-.0728334305864372:t[8]>963.5000000000001?hn=.023642201723096064:hn=.183010326734258:t[128]>1e-35?hn=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?hn=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?hn=-.1088876900335281:hn=.02758317023002635:hn=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?hn=-.01928020117446408:hn=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?hn=.07893723375925096:hn=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?hn=-.10301657587280551:hn=.005787463140224318:hn=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?hn=-.019296977889522397:hn=-.07274529751752634:t[1]>30.500000000000004?hn=-.050368901143148286:hn=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?hn=.0015332402792773946:hn=.09930153676749967:hn=-.06370844564357069:hn=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let Ge;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?Ge=-.03042091758483443:t[10]>14.500000000000002?Ge=.09816619204768777:Ge=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?Ge=-.02381165060401718:Ge=-.10950361804974783:Ge=.03538211665111128:t[212]>1e-35?t[19]>1e-35?Ge=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?Ge=-.06371052144380579:Ge=.0835500621252692:Ge=-.10408255929333915:t[1]>74.50000000000001?Ge=.13208968122712403:t[1]>64.50000000000001?Ge=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?Ge=.09922816902423433:Ge=.016366955328796718:Ge=.1592412560903584:t[1]>39.50000000000001?Ge=.05409467990258923:Ge=-.08260633210459611:Ge=-.06307205775247567:t[9]>36.50000000000001?Ge=.040253940015648144:Ge=.14202568969471283:Ge=-.028761848341594044:Ge=.08994073058773508:t[0]>807.5000000000001?Ge=-.043427848826323195:Ge=.04573516446846493:t[20]>1e-35?t[188]>1e-35?Ge=-.0758877731600639:t[23]>1e-35?Ge=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?Ge=.08124700978741987:Ge=.013296063087086852:t[7]>5.500000000000001?Ge=-.01640196088612987:Ge=-.12685498840146067:Ge=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let yt;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?yt=-.10504730480402079:t[5]>3341.5000000000005?yt=.11087894671081754:yt=-.0406668834674614:yt=.03308382165616109:t[8]>104.50000000000001?yt=-.10431436764549162:yt=.0073928337244891455:t[4]>34.50000000000001?yt=-.10571751512748416:yt=-.006081128814142983:t[13]>1e-35?yt=.1299673566095023:t[4]>60.50000000000001?yt=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?yt=.04857126072645073:yt=-.03431365358104773:t[4]>16.500000000000004?yt=.04101865986596709:yt=.16480274980378218:t[10]>26.500000000000004?yt=.03673978504199255:t[10]>9.500000000000002?yt=-.10996402743800027:t[308]>1e-35?yt=.0553693735082498:yt=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?yt=.010902983761213922:yt=.1325118659895645:yt=-.064362945508595:t[1]>66.50000000000001?yt=.033416767779331176:yt=-.054080316225040496:t[42]>1e-35?yt=-.07762364337810815:t[10]>1089.5000000000002?yt=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?yt=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?yt=.0220102041325908:yt=-.06516708740003069:yt=.012833498905748267:t[224]>1e-35?yt=-.007038418272997865:yt=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Gt;t[248]>1e-35?Gt=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Gt=-.06455513326540585:t[1]>29.500000000000004?Gt=.07718474591552532:t[4]>7.500000000000001?Gt=.040139336931404826:Gt=-.09685734690563386:Gt=.00015327283570347363:t[9]>88.50000000000001?Gt=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Gt=-.04077257804338707:Gt=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Gt=.03778141591008941:Gt=-.06459919920634845:Gt=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Gt=.14063930759326346:t[0]>179.50000000000003?Gt=.07287482250668585:t[8]>1180.5000000000002?Gt=-.14419393112726253:t[10]>28.500000000000004?Gt=-.07993142770099469:t[17]>1e-35?Gt=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Gt=.05527969663610186:Gt=-.10824385941441346:t[3]>11.500000000000002?Gt=.12358502961047915:Gt=-.017509147119622873:t[0]>74.50000000000001?Gt=-.014907705458730486:t[8]>95.50000000000001?Gt=-.02225118168342062:Gt=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Gt=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Gt=.04962819555610421:Gt=-.07213577821855309:Gt=.09139529824708481:t[19]>1e-35?Gt=.013439401088345224:Gt=-.049274647207292056:Gt=.10531673719686951;let Ar;t[40]>1e-35?t[0]>1937.5000000000002?Ar=-.06421671152073961:Ar=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?Ar=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?Ar=-.03520420769287065:t[8]>1085.5000000000002?Ar=-.019817352506127633:Ar=.11444439424520964:Ar=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?Ar=-.010490117519863269:Ar=.08104430117757461:t[121]>1e-35?t[243]>1e-35?Ar=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?Ar=.06619344145920268:t[0]>4091.5000000000005?Ar=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?Ar=.10016091391222309:Ar=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?Ar=-.019511460451434884:Ar=-.11643672465055221:t[2]>18.500000000000004?Ar=.07848228087333317:t[8]>55.50000000000001?Ar=.032583027899956235:Ar=-.11209832692153521:t[11]>1e-35?Ar=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?Ar=-.09996887746328006:t[9]>2.5000000000000004?Ar=.02157682011863397:Ar=-.05247727848991843:Ar=.07409150201483244:t[1]>38.50000000000001?Ar=-.11378466075449625:t[224]>1e-35?Ar=-.10741749127732923:t[1]>26.500000000000004?Ar=.07343136534146562:Ar=-.07013573628594773:t[25]>1e-35?Ar=-.04626669734164317:Ar=.05518333197956482:Ar=.00032434010867555516;let xr;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?xr=.026313251010808853:xr=-.08997339150292381:xr=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?xr=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?xr=.0905155504503746:t[8]>1049.5000000000002?xr=-.062312558183394054:t[8]>719.5000000000001?xr=.09583836191410239:t[0]>3719.5000000000005?xr=-.0778097309430818:xr=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?xr=-.12920865648544927:t[0]>2699.5000000000005?xr=-.07086587879041864:xr=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?xr=-.11377786322600797:xr=-.009486325820117998:t[1]>55.50000000000001?xr=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?xr=-.07938291201004219:t[2]>36.50000000000001?xr=.01520046732530246:xr=.13649854049662832:xr=-.07145015938528873:t[8]>407.50000000000006?xr=-.00350257360822279:xr=.11332047082193297:xr=-.10060624458629897:xr=.05429496612497562:t[8]>1446.5000000000002?xr=.006073419197482838:xr=-.08718676350883998:xr=-.11532497988252638:xr=.10766270463068293:t[34]>1e-35?xr=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?xr=-.0004109812623829506:xr=.021601073497455662:xr=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let rr;t[76]>1e-35?rr=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?rr=.013633653464240465:rr=-.10164319411983509:rr=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?rr=.00632864847804078:rr=-.08393000368134668:rr=.07870508617440916:t[284]>1e-35?rr=.1092302727710421:rr=-.0025505047582483234:t[248]>1e-35?rr=.07101822393621864:t[274]>1e-35?rr=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?rr=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?rr=.025081789181021243:rr=-.014813325803582618:t[9]>33.50000000000001?rr=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?rr=.11926990418060353:rr=.01852125513565268:rr=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?rr=-.1178464984373743:t[283]>1e-35?rr=.043370859226927405:t[5]>4320.500000000001?rr=-.01103141226366587:t[8]>1104.5000000000002?rr=-.023053423988095886:rr=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?rr=.000579145585864887:rr=.03389152834202143:t[128]>1e-35?rr=-.14527722052568462:t[210]>1e-35?rr=-.08915971541902741:t[7]>9.500000000000002?rr=-.03307314577076116:t[18]>1e-35?rr=-.05521712302023565:rr=.009315605032770029:rr=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let Ir;t[3]>7.500000000000001?t[157]>1e-35?Ir=-.07514182877923786:Ir=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Ir=.028692053800951845:Ir=.14081686716133598:Ir=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Ir=.0037139292567243084:Ir=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Ir=.01202688580305612:Ir=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Ir=.043935495082738626:Ir=-.05639305759669704:t[247]>1e-35?Ir=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Ir=.10331836202616368:Ir=.0006926658459781341:t[96]>1e-35?Ir=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Ir=-.0741403257305367:Ir=.022900127535540854:t[7]>3.5000000000000004?Ir=.038110741403836294:Ir=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Ir=-.09552842289807008:t[1]>27.500000000000004?Ir=.012505935885798007:Ir=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Ir=-.1046104767723845:Ir=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Ir=.023466328488582572:Ir=.11730925774586994:Ir=-.04771965631104874:Ir=.17059689880751394:Ir=-.08181850955999449:t[26]>1e-35?Ir=-.12727482696678769:Ir=-.014343123272734182;let Nr;t[147]>1e-35?t[1]>53.50000000000001?Nr=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Nr=-.02763546051134888:Nr=.06423344777499343:Nr=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Nr=.049825139823021586:t[7]>22.500000000000004?Nr=-.01131680751379858:t[0]>2579.5000000000005?Nr=-.10673674485369694:Nr=-.015387212937189957:Nr=.04347325151148724:t[179]>1e-35?Nr=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Nr=.0650355590939066:Nr=-.0473332870892226:Nr=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Nr=.11139543329789044:t[126]>1e-35?Nr=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Nr=.06370903833231022:t[10]>29.500000000000004?Nr=.03415223859607161:t[10]>3.5000000000000004?Nr=-.07415518117873297:Nr=-.0014119203473324082:Nr=.12617652343819508:t[9]>41.50000000000001?Nr=-.10311145857176976:t[8]>2757.5000000000005?Nr=-.08106484219011428:t[7]>71.50000000000001?Nr=-.09783384432091176:t[1]>88.50000000000001?Nr=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Nr=-.008884084501608536:Nr=.061339437777743616:Nr=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Nr=.01526664064166223:Nr=.13534828515415498:Nr=-.06985484465894776:Nr=.0005758961943178744;let Kr;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Kr=-.029152732370514342:Kr=.07173628916139178:t[1]>36.50000000000001?Kr=-.08859111297255318:Kr=.0018030071815630785:Kr=.13652461563759322:Kr=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Kr=-.07145140450454163:t[21]>1e-35?Kr=-.07422841663493233:Kr=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Kr=.11864240653986852:t[3]>33.50000000000001?Kr=-.08821209591953476:Kr=.05706392280054726:Kr=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Kr=.01953613016837112:Kr=-.059781039130025006:t[148]>1e-35?Kr=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Kr=.07207826841738371:t[202]>1e-35?Kr=.08163917539410503:Kr=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Kr=-.06858280496900336:Kr=-.1781828899516648:Kr=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Kr=.018232649414147116:Kr=-.04419781124222661:Kr=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Kr=.11452368095776105:Kr=-.036496437259924026:Kr=-.040445338739465486:Kr=.0816572651001145:Kr=-.08968914517368663:Kr=.0002826343082585516;let Wn;t[189]>1e-35?t[0]>5269.500000000001?Wn=-.08839493050459957:t[10]>85.50000000000001?Wn=.10046908365702462:t[8]>2592.5000000000005?Wn=-.09632233975926387:t[8]>2000.5000000000002?Wn=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Wn=.035504970430426296:t[1]>31.500000000000004?Wn=-.1133764813142531:Wn=-.01138280942244812:t[8]>1125.5000000000002?Wn=.09800530246229806:Wn=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Wn=.07316772160107896:Wn=-.059095014819051765:Wn=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Wn=-.09150209066166894:t[8]>3084.0000000000005?Wn=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Wn=-.04449234460408263:Wn=.05568837973347338:Wn=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Wn=.12741077850267066:Wn=.007372371864985329:t[2]>39.50000000000001?Wn=.02295917234617787:Wn=.14966532083907075:t[1]>39.50000000000001?Wn=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Wn=-.02511861881285652:t[1]>27.500000000000004?Wn=.08683660011672288:Wn=.02956214835267301:t[9]>15.500000000000002?Wn=-.016538805462996232:Wn=.04352738094981517:Wn=-.05561856645643868:t[9]>170.50000000000003?Wn=-.07996752635874248:t[179]>1e-35?Wn=-.09065975936933919:Wn=-.00042817975060427177;let Jn;t[39]>1e-35?t[4]>25.500000000000004?Jn=.03443173196222934:Jn=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Jn=-.0013415395759330318:Jn=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Jn=.002297618040307216:Jn=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Jn=-.015297257305397608:Jn=.09651828834062742:Jn=-.06636003334371929:t[10]>11.500000000000002?Jn=.17631616138309397:t[0]>1639.5000000000002?Jn=3804386478092585e-20:Jn=-.09099296398683193:Jn=-.06874415876172972:t[0]>2151.5000000000005?Jn=-.1311264883406766:Jn=.00809052010141122:t[253]>1e-35?Jn=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Jn=.045038497754638605:Jn=-.07770167665661752:Jn=-.08596294280650517:Jn=.08538655727027213:Jn=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Jn=.054627956617973275:t[1]>61.50000000000001?Jn=-.11994465088415499:t[4]>8.500000000000002?Jn=.06676200239406452:Jn=-.027503148069376867:t[8]>676.5000000000001?Jn=-.10363964928357075:t[4]>8.500000000000002?Jn=-.07589816227175682:Jn=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Jn=.009093153189012338:Jn=-.06119765876605404:Jn=.0004668642103528348;let Qn;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Qn=-.10100794502567233:Qn=.08000205636470442:Qn=-.11945419826856896:t[113]>1e-35?Qn=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Qn=.1224302423880318:Qn=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Qn=.0019277012166729114:t[1]>28.500000000000004?Qn=-.054445821715687494:Qn=.045645722976713245:t[30]>1e-35?Qn=.13402660155331655:Qn=.008921176001777645:Qn=-.058547426505451076:Qn=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Qn=-.13526418192218206:Qn=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Qn=.0007263224246135398:Qn=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Qn=-.11575657261278308:Qn=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Qn=-.01995960178292952:Qn=.11216586049153021:Qn=-.10050961087149474:Qn=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Qn=.10303451081526649:Qn=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Qn=-.043799548968209395:Qn=-.12451444314954115:t[4]>12.500000000000002?Qn=-.03838117361958468:Qn=.06504990789767144:t[57]>1e-35?Qn=.06890006938293915:Qn=.0003914274695562949;let $n;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?$n=.004271749009686975:$n=-.10523878297127605:$n=.04633982158107851:$n=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?$n=-.08655730561951676:t[8]>919.5000000000001?$n=-.0676453705610183:t[7]>18.500000000000004?$n=-.027787974193650575:$n=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?$n=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?$n=-.03473877164537313:t[8]>719.5000000000001?$n=.10471053866934404:$n=.008236107678382981:t[4]>57.50000000000001?$n=.09412219478825269:t[10]>66.50000000000001?$n=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?$n=-.040681323751002293:$n=.06374650297561021:$n=.12884615227401788:t[10]>5.500000000000001?$n=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?$n=-.05474068967150784:$n=.03744700650806603:$n=-.07846396348680855:t[1]>42.50000000000001?$n=.018972315810821302:$n=.10953621007604744:t[5]>4439.500000000001?$n=.010999776705494586:t[1]>40.50000000000001?$n=-.12394200059775967:t[10]>2.5000000000000004?$n=.013528093962849453:$n=-.09222088417048682:$n=-.12662967149701485:$n=.09327296405849603:t[3]>99.50000000000001?$n=-.013581954439986752:$n=.0005526498251862075;let rn;t[187]>1e-35?t[243]>1e-35?rn=-.08392792551692502:t[10]>68.50000000000001?rn=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?rn=-.0825306209711224:rn=.049559996084532945:rn=-.1064938580886302:rn=.03353240732240275:rn=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?rn=.16966001471529374:t[1]>57.50000000000001?rn=-.005772777673676247:rn=.09383677041525058:t[8]>747.5000000000001?rn=.054068175469351235:rn=-.049968216310277036:t[8]>753.5000000000001?rn=-.0679383555784074:t[4]>8.500000000000002?rn=-.059757341189735386:rn=.05701083682780414:rn=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?rn=.05820296128730006:rn=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?rn=.15340611616954566:rn=.04385036188666874:t[0]>4449.500000000001?rn=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?rn=.004840354641006495:rn=.09967827580276283:rn=.11605363537391578:t[9]>19.500000000000004?rn=-.0735831692725717:rn=.019973331823355176:t[306]>1e-35?t[149]>1e-35?rn=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?rn=-.02442182361342386:rn=.10334853004243093:rn=-.030431948680167104:rn=-956078595250818e-19;let zn;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?zn=-.040232505718244854:t[0]>3030.5000000000005?zn=.0634109586813073:zn=-.04043617034245621:zn=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?zn=-.007859096946435131:zn=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?zn=.05515771679628051:zn=-.04214471312668263:zn=-.09589322222261765:t[193]>1e-35?zn=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?zn=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?zn=-.08152604001147906:t[11]>1e-35?zn=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?zn=.13100930780107503:t[10]>25.500000000000004?zn=.05921074710011526:zn=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?zn=.0009447118243153454:zn=-.09820565036865991:zn=.057146909749745546:t[0]>2115.5000000000005?zn=-.12331216726611678:zn=.007281983677694285:t[2]>56.50000000000001?zn=.012310154675612615:zn=-.08873665774670461:t[6]>25.500000000000004?zn=.134708740821879:t[9]>5.500000000000001?zn=-.0805901581148979:t[224]>1e-35?zn=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?zn=.10842593386554122:t[2]>13.500000000000002?zn=.06466798320378395:zn=-.08578130788886655:zn=-.03590892078300114:zn=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let U;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?U=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?U=.020637047900190317:U=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?U=-.04632587527094407:U=.08603684785510396:U=-.05101401015448496:U=.025466432054358498:U=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?U=.020385355430046367:U=.12032592051335252:U=-.012387370292173013:t[2]>23.500000000000004?U=-.12568545484492677:U=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?U=.043528764484784536:U=.14352071657196003:U=-.009332833816977268:U=.11186782227735846:U=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?U=-.05649104643152564:U=.03884200719305747:t[42]>1e-35?U=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?U=-.04103416502526736:U=.04881823954656287:t[4]>15.500000000000002?U=.009342724662897898:t[0]>3969.5000000000005?U=-.025637309961309498:U=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?U=-.08185697075265091:t[0]>2215.5000000000005?U=.030063975892297354:t[0]>807.5000000000001?U=-.03924325550733229:U=.0415330999189793:U=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let Z;t[7]>17.500000000000004?t[115]>1e-35?Z=.08741852531696623:t[167]>1e-35?Z=.10078975495600809:Z=-.0018324767784017562:t[290]>1e-35?Z=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Z=.1379733311640402:Z=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Z=-.09360083033774169:Z=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Z=-.015599362579530679:t[0]>4593.500000000001?Z=-.12029549262691491:Z=-.018917032256501397:Z=.04632831686576592:Z=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Z=-.05894883236412263:Z=.05213944998315824:Z=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Z=.07577412405680808:Z=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Z=-.0277076900736147:t[1]>65.50000000000001?Z=-.023587471585763506:Z=.10184896592433082:Z=-.057699270527916825:Z=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Z=.06566902102799584:t[10]>25.500000000000004?Z=-.07033633753181047:Z=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Z=-.08108035861059537:Z=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Z=-.12431182772561139:Z=.01886235886984271:Z=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let ke;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ke=.029186512383291244:t[7]>1.5000000000000002?ke=-.14984127276725573:t[1]>40.50000000000001?ke=.032757060730648144:ke=-.07675575422749602:t[6]>8.500000000000002?ke=.10599766037117893:ke=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ke=-.051394622947855385:ke=.03237141302699347:ke=.12526173027943244:ke=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ke=-.07383912482657777:t[0]>5147.500000000001?ke=.07008813937042091:t[10]>38.50000000000001?ke=-.06779203808365307:ke=-.013782769999524498:ke=.0880038869117715:ke=-.12846294176070952:t[281]>1e-35?ke=-.06810806903850834:t[10]>227.50000000000003?ke=-.08937977001661111:t[10]>130.50000000000003?ke=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ke=.011036530162093841:ke=-.11500797478569702:ke=.03702229366129399:ke=.07242026683784307:t[189]>1e-35?ke=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ke=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ke=-.02608892716555304:ke=.09609599320761308:t[9]>105.50000000000001?ke=-.06848127135991534:ke=.0023675721254089715:t[86]>1e-35?ke=-.11049635625500497:ke=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let _r;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?_r=.057446442918106:_r=-.04404018270156349:_r=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?_r=-.05930486238817954:t[1]>29.500000000000004?_r=.06955866121256543:t[8]>597.5000000000001?_r=-.06538593556505168:_r=.06212512595497445:_r=.00021102929959182257:t[9]>90.50000000000001?_r=.0958061289119631:t[102]>1e-35?_r=.07172059675638813:t[1]>47.50000000000001?_r=-.03879798603977766:t[297]>1e-35?_r=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?_r=.003805910996312012:_r=.09304295674749524:t[11]>1e-35?t[18]>1e-35?_r=.11252376801858695:t[288]>1e-35?_r=-.10293901912180432:_r=.014669268837893872:t[1]>42.50000000000001?_r=-.05988274123836837:t[145]>1e-35?_r=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?_r=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?_r=-.03366718308159971:_r=.11936550608549797:t[1]>31.500000000000004?_r=-.07454716789539667:_r=.027859650621164217:t[10]>10.500000000000002?_r=-.11806374092321247:_r=-.03506042229223101:_r=-.0007080765837654515:t[10]>6.500000000000001?_r=-.028077713664996503:t[2]>7.500000000000001?_r=.15803724124216814:_r=.0351381284833169:_r=-.07877953381054767;let pr;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?pr=.14144941521975005:pr=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?pr=.10514088112381886:t[7]>18.500000000000004?pr=-.10370643555956745:pr=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?pr=-.0508129468802936:t[224]>1e-35?pr=-.037816066368733595:t[10]>43.50000000000001?pr=.07793408602607932:pr=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?pr=.036972453794202324:pr=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?pr=.09475302525132188:pr=-.03580104945898193:pr=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?pr=-.1282448778804823:pr=-.014395808269207212:pr=-.008940927190750592:pr=-.1459118815453748:t[0]>4897.500000000001?pr=-.09733068457286576:t[1]>57.50000000000001?pr=.06575271409540207:pr=-.019556422817450115:pr=-.10623959222984136:t[18]>1e-35?pr=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?pr=.008125645893104896:pr=-.11084368630465868:pr=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?pr=-.05854904579626861:t[4]>5.500000000000001?pr=.02985784951394175:pr=-.03247600140149334:pr=-.11152899295304973:pr=-.00035424577714215764;let un;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?un=-.06563670567578264:un=.067656954313663:un=-.10388217548685377:t[8]>2302.5000000000005?un=.07190621943790435:t[4]>67.50000000000001?un=.060020507643618604:t[4]>38.50000000000001?un=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?un=-.06568134366461277:t[8]>1075.5000000000002?un=-.004768057709758692:un=.11785959165999467:un=-.05080221682879267:un=.14814206127494542:un=-.07241946332311736:t[253]>1e-35?un=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?un=-.02471195342450034:un=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?un=-.10741850739482771:un=.010051635824944:un=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?un=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?un=-.08992396138178163:un=.010944365997007212:un=.06221307021813793:un=.1286024087559141:t[127]>1e-35?un=.06568148624531012:t[10]>40.50000000000001?un=-.07567979134643352:t[5]>5647.500000000001?un=.07594672895572069:un=-.018158016446439187:t[6]>55.50000000000001?un=.009293422430111872:t[4]>45.50000000000001?un=-.017749818406964022:t[2]>46.50000000000001?un=.01714136511113982:un=-724762291423549e-19;let gn;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?gn=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?gn=.07084726276890757:gn=-.11232323677722932:gn=.04812773089510436:gn=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?gn=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?gn=.0879462816013881:gn=-.002966662093626573:t[306]>1e-35?gn=-.04588085188342676:gn=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?gn=-.006600332774461143:gn=.1272481351557754:gn=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?gn=.011884312066620044:gn=.11678751052403374:t[4]>8.500000000000002?gn=.03627129613273813:gn=-.12132783497902287:gn=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?gn=-.06830131718398992:t[0]>5147.500000000001?gn=.062360406249609306:t[4]>4.500000000000001?gn=-.013162203864592055:gn=-.07153029184927609:gn=.07628618062271557:gn=-.12085065687320373:t[190]>1e-35?gn=-.045816889524231186:t[137]>1e-35?gn=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?gn=.025895337822752502:gn=-.06503949350616421:t[10]>227.50000000000003?gn=-.09989456525790491:t[10]>130.50000000000003?gn=.08616651057030683:gn=.0001234981796706021;let vr;t[8]>1014.5000000000001?t[9]>137.50000000000003?vr=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?vr=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?vr=-.141732381961068:vr=-.0317152307496497:vr=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?vr=.12191801556691254:vr=-.0003444689085397977:vr=.005739668504631604:t[146]>1e-35?t[308]>1e-35?vr=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?vr=-.05676033995381961:vr=.10933961076803381:t[4]>26.500000000000004?vr=-.11667582544549814:t[8]>1765.5000000000002?vr=.032174455312047705:vr=-.0755016390126608:t[293]>1e-35?vr=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?vr=.026571311956824436:t[15]>1e-35?vr=.06175459479851121:vr=-.018778084411148754:t[9]>40.50000000000001?vr=-.09420232889965811:vr=-.004578248021263184:t[2]>1.5000000000000002?vr=.005453714644971445:vr=-.03907138175699279:vr=-.055296364182154736:t[23]>1e-35?vr=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?vr=-.09358146510580179:vr=.060524657996178094:vr=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?vr=-.12698331085931538:vr=.006059605604079918:t[2]>196.50000000000003?vr=-.09451315810804783:vr=.0011390147031687425;let Ht;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Ht=.05517359070460923:Ht=-.04758751221404857:Ht=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Ht=.1040436595565776:t[9]>21.500000000000004?Ht=.04032250517675179:t[107]>1e-35?Ht=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Ht=.1192453009230486:t[1]>51.50000000000001?Ht=.0443376336292195:Ht=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Ht=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Ht=-.08999822408398037:Ht=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Ht=-.061850439226075:Ht=.08849196353361093:Ht=.10536348167793089:t[92]>1e-35?Ht=.04894947712119185:t[9]>16.500000000000004?Ht=.05900227903883853:t[9]>5.500000000000001?Ht=-.11946594348916476:Ht=-.03652096348071964:t[1]>41.50000000000001?Ht=-.07411603110840567:Ht=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Ht=.08493634342741495:t[11]>1e-35?Ht=-.10899097825564363:Ht=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Ht=.08356655906359918:t[7]>25.500000000000004?Ht=-.09475076526194888:t[10]>5.500000000000001?Ht=-.01999406228763778:Ht=.06696212545889428:t[6]>20.500000000000004?Ht=.14713592661393468:Ht=.0459917279002218:Ht=.00027445928493734093;let On;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?On=-.06904501553217077:On=.05696231672035904:On=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?On=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?On=-.011419256378538392:t[0]>3830.5000000000005?On=.140315841503076:On=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?On=-.04027822909411164:On=.03176085103667189:On=.06779515865838849:t[4]>15.500000000000002?On=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?On=.06124039747298539:On=-.04312732764434027:On=.09161522761808062:On=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?On=.11211681010488772:t[13]>1e-35?On=.06725735814960367:On=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?On=.11743605068905603:On=-.011309033539148687:On=-.07896094707523052:On=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?On=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?On=.02836295848998302:On=.12210680366745175:On=-.058302317470509096:t[5]>4144.500000000001?On=.06123341960495106:On=-.03840046906926525:On=-.05221474543453495:On=.03988215485860711:On=-.00033074684693083496;let qs=mht(e+r+n+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+B+N+q+te+me+oe+H+O+le+ie+j+W+Y+ee+pe+re+fe+he+Ne+Re+Je+Me+pt+Tt+Ct+bt+ce+Oe+ye+tt+X+ne+We+Pe+be+ze+it+gt+Ot+lr+Lt+Gr+Yr+hn+Ae+Ge+ut+yt+Xt+Gt+Ar+xr+jt+rr+Jt+Ir+Nr+Kr+Wn+Jn+Qn+$n+rn+zn+_e+U+ge+ve+Z+M+ke+$e+qt+_r+pr+un+gn+vr+Ht+On);return[1-qs,qs]}s(l4e,"multilineModelPredict");function mht(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(mht,"sigmoid");var hht={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},c4e={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function u4e(t,e,r,n=!0){let i=t.split(`
`);if(n&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(hht[r]??[]).some(l=>o.includes(l))}s(u4e,"hasComment");var pU=class{static{s(this,"PromptFeatures")}constructor(e,r){let[n,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=r,this.length=e.length,this.firstLineLength=n.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=u4e(e,-2,r),this.rstripSecondToLastLineHasComment=u4e(e.trimEnd(),-2,r),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let r=e.split(`
`),n=r.length,i=r[0],o=r[n-1];return o==""&&n>1&&(o=r[n-2]),[i,o]}},uie=class{static{s(this,"MultilineModelFeatures")}constructor(e,r,n){this.language=n,this.prefixFeatures=new pU(e,n),this.suffixFeatures=new pU(r,n)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let r=new Array(Object.keys(c4e).length+1).fill(0);r[c4e[this.language]??0]=1;let n=new Array(Object.keys(W1).length+1).fill(0);n[W1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(W1).length+1).fill(0);i[W1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(W1).length+1).fill(0);o[W1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(W1).length+1).fill(0);return a[W1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(r,n,i,o,a)}};function ght(t,e){return new uie(t.prefix,t.suffix,e)}s(ght,"constructMultilineFeatures");function d4e(t,e){let r=ght(t,e).constructFeatures();return l4e(r)[1]}s(d4e,"requestMultilineScore");f();f();f();f();async function*G1(t,e){for await(let r of t)yield e(r)}s(G1,"asyncIterableMap");async function*f4e(t,e){for await(let r of t)await e(r)&&(yield r)}s(f4e,"asyncIterableFilter");async function*aD(t,e){for await(let r of t){let n=await e(r);n!==void 0&&(yield n)}}s(aD,"asyncIterableMapFilter");async function*p4e(...t){for(let e of t)yield*e}s(p4e,"asyncIterableConcat");f();async function lD(t,e,r,n){let i=an.createAndMarkAsIssued({messageId:e,conversationId:r});return await t.get(Dt).updateExPValuesAndAssignments(n,i)}s(lD,"createTelemetryWithExpWithId");function gc(t,{turn:e,conversation:r}={},n){return lD(t,e?.telemetryId??"",r?.telemetryId??"",n)}s(gc,"createTelemetryWithExpWithTurn");function cD(t,e,r,n,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:n,messageCharLen:r};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify(Aht(l))),a=a.extendedBy(u,d),a}s(cD,"extendUserMessageTelemetryData");function Aht(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(r=>r.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(Aht,"mapSkillResolutionsForTelemetry");function m4e(t,e,r,n,i,o,a){return n!=null&&(a=a.extendedBy({offTopic:n.toString()})),mU(t,o,e,r,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(m4e,"createUserMessageTelemetryData");function h4e(t,e,r,n,i,o,a,l){let c=Cht(n);return mU(t,a,r,n,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:r,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:n.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s(h4e,"createModelMessageTelemetryData");function g4e(t,e,r,n,i,o,a){mU(t,o,r,n,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:r},{messageCharLen:n.length},a)}s(g4e,"createOffTopicMessageTelemetryData");function A4e(t,e,r,n,i,o,a,l,c){let u=mU(t,l,r,n,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:r,suggestionId:a},{promptTokenLen:i,messageCharLen:n.length},c);return yht(t,r,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(A4e,"createSuggestionMessageTelemetryData");var y4e={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function C4e(t,e,r){let n=await gc(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";S0(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},r,"index.codesearch",n)}s(C4e,"telemetryIndexCodesearch");function mU(t,e,r,n,i,o,a){let l=a??an.createAndMarkAsIssued(),c={messageText:n,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=sr();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=Du(r);return Bt(t,`${p}.message`,u),Bt(t,`${p}.messageText`,d,1),u}s(mU,"telemetryMessage");function x4e(t,e,r,n){S0(t,n,{uiKind:e},{},"conversation.suggestionShown",r)}s(x4e,"createSuggestionShownTelemetryData");function yht(t,e,r,n,i,o,a,l){S0(t,l,{suggestion:r,messageId:n,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(yht,"createSuggestionSelectedTelemetryData");function S0(t,e,r,n,i,o){let a=o??an.createAndMarkAsIssued();e&&(r.languageId=e.detectedLanguageId,n.documentLength=e.getText().length,n.documentLineCount=e.lineCount);let l=a.extendedBy(r,n);return Bt(t,i,l),l}s(S0,"telemetryUserAction");function A5(t,e,r){let n=r.extendedBy({messagesJson:JSON.stringify(e)});return Bt(t,"engine.messages",n,1)}s(A5,"logEngineMessages");function Du(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Du,"telemetryPrefixForUiKind");function Cht(t){let e=t.split(`
`),r=[],n=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(n.length>0&&o==="```"?r.push(n.pop()):n.length===0&&n.push(o.substring(3)))}return r}s(Cht,"getCodeBlocks");function v4e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(v4e,"uiKindToIntent");function fv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(fv,"conversationSourceToUiKind");function b4e(t,e,r,n,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:r.toString(),uiKind:"agentPanel"},a={totalTimeMs:n};I4e(t,"round",i.extendedBy(o,a))}s(b4e,"createAgentRoundTelemetryData");function E4e(t,e,r,n,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:r.name,toolType:r.type,toolProviderId:r.toolProvider.id,toolCallId:n,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};I4e(t,"toolCall",l.extendedBy(c,u))}s(E4e,"createToolInvocationTelemetryData");function I4e(t,e,r){return Bt(t,`${Du("agentPanel")}.${e}`,r)}s(I4e,"logAgenticEvent");f();var Ed=new _t("streamChoices"),die=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new mie;this.tool_calls=[];this.function_call=new pie;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let r of e.delta.tool_calls){let n=r.index;this.tool_calls[n]||(this.tool_calls[n]=new fie),this.tool_calls[n].update(r)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function xht(t){let e=t.split(`
`),r=e.pop();return[e.filter(n=>n!=""),r]}s(xht,"splitChunk");var fie=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},pie=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},mie=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([r,n])=>{n.forEach(i=>this.update_namespace(r,i))})}update_namespace(e,r){this.current[e]||(this.current[e]=[]);let n=this.current[e],i=n.findIndex(o=>o.id===r.id);i>=0?n[i]=r:n.push(r)}for(e){return this.current[e]??[]}},pv=class t{constructor(e,r,n,i,o,a,l){this.ctx=e;this.expectedNumChoices=r;this.response=n;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=mv(this.response);this.stats=new hie;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,r,n,i,o,a){let l=n.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,r,n,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),Ed.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),Ed.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let r="",n=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;Ed.debug(this.ctx,"chunk",a.toString());let[l,c]=xht(r+a.toString());r=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(n,i,o,e);return}n=null;let p;try{p=JSON.parse(d)}catch{Ed.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&vht(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?Ed.error(this.ctx,"Error in response:",p.error.message):Ed.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(this.requestId.created==0&&(this.requestId=mv(this.response,p),this.requestId.created===0&&p.choices?.length&&Ed.error(this.ctx,'Request id invalid, should have "completionId" and "created":',this.requestId)),i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){r="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];Ed.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new die);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>uD(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){n=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Kx(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(r.length>0)try{let a=JSON.parse(r);a.error!==void 0&&Ed.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{Ed.error(this.ctx,`Error parsing extraData: ${r}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,r,n,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>uD(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),Bt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:r??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:r,usage:n},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(Ed.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(r=>r==null)}};function hU(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(Ed.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),Ed.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),Ed.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=uD(e.solution);return gU(t,n,o,e.index,e.requestId,i,r)}s(hU,"prepareSolutionForReturn");function uD(t){let e=t.text.join(""),r=bht(t),n=Eht(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:r,function_call:n,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(uD,"convertToAPIJsonData");function vht(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(vht,"isCopilotConfirmation");function bht(t){let e=[];for(let r of t.tool_calls)if(r.name){let n=r.arguments.length>0?JSON.parse(r.arguments.join("")):{};e.push({type:"function",function:{name:r.name,arguments:n},approxNumTokens:r.arguments.length+1})}return e}s(bht,"extractToolCalls");function Eht(t){if(t.function_call.name){let e=t.function_call.arguments.length>0?JSON.parse(t.function_call.arguments.join("")):{};return{name:t.function_call.name,arguments:e}}}s(Eht,"extractFunctionCall");var hie=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let r=this.choices.get(e);return r||(r=new gie,this.choices.set(e,r)),r}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,r])=>`${e}: ${r.yieldedTokens} -> ${r.seenTokens}`).join(", ")}},gie=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function AU(t,e){return t!==null&&typeof t=="object"&&e in t}s(AU,"hasKey");function Nu(t,e){return AU(t,e)?t[e]:void 0}s(Nu,"getKey");var w4e=je(ii());var Js=new _t("fetchCompletions");function mv(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(mv,"getRequestId");function y5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(y5,"getProcessingTime");function _4e(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(_4e,"uiKindToIntent");var Id=class{static{s(this,"OpenAIFetcher")}};function Iht(t,e,r,n){return jx(t,e,"proxy","v1/engines",r,n)}s(Iht,"getProxyEngineUrl");function yU(t,e,r,n){for(let[i,o]of Object.entries(t)){if(r.includes(i))continue;let a=o;if(i==="extra"&&n){let l={...a};for(let c of n)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(yU,"sanitizeRequestOptionTelemetry");async function T4e(t,e,r,n,i,o,a,l,c,u,d){let p=t.get(Ki),m=Iht(t,a,r,n),h=c.extendedBy({endpoint:n,engineName:r,uiKind:l},RS(e));yU(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,Bt(t,"request.sent",h);let g=Ks(),y=_4e(l);return iI(t,m,a.token,y,i,o,u,d).then(v=>{let b=mv(v,void 0);h.extendWithRequestId(b);let E=Ks()-g;return h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),Js.debug(t,"request.response properties",h.properties),Js.debug(t,"request.response measurements",h.measurements),Js.debug(t,"prompt:",e),Bt(t,"request.response",h),v}).catch(v=>{if(Lc(v))throw Bt(t,"request.cancel",h),v;p.setWarning(Nu(v,"message")??"");let b=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",b),h.properties.message=String(Nu(v,"name")??""),h.properties.code=String(Nu(v,"code")??""),h.properties.errno=String(Nu(v,"errno")??""),h.properties.type=String(Nu(v,"type")??"");let E=Ks()-g;throw h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),Js.debug(t,"request.error properties",h.properties),Js.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),v}).finally(()=>{lIe(t,e,h)})}s(T4e,"fetchWithInstrumentation");async function Tht(t,e,r,n,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:r,uiKind:l});yU(o,d,["messages"]),d.properties.headerRequestId=i,Bt(t,"request.sent",d);let p=Ks(),m=_4e(l),h={...Vx(t)};try{let g=await iI(t,n,a.token,m,i,o,u,h),y=mv(g,void 0);d.extendWithRequestId(y);let v=Ks()-p;return d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${n}> finished with ${g.status} status after ${v}ms`),Js.debug(t,"request.response properties",d.properties),Js.debug(t,"request.response measurements",d.measurements),Js.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",d),g}catch(g){if(Lc(g))throw Bt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",y),d.properties.message=String(Nu(g,"name")??""),d.properties.code=String(Nu(g,"code")??""),d.properties.errno=String(Nu(g,"errno")??""),d.properties.type=String(Nu(g,"type")??"");let v=Ks()-p;throw d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${n}> rejected with ${String(g)} after ${v}ms`),Js.debug(t,"request.error properties",d.properties),Js.debug(t,"request.error measurements",d.measurements),Bt(t,"request.error",d),g}finally{A5(t,e,d)}}s(Tht,"fetchChatWithInstrumentation");function Aie(t){return f4e(t,e=>e.completionText.trim().length>0)}s(Aie,"postProcessChoices");var wht="github.copilot.completions.quotaExceeded",dD=class extends Id{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ki),l="completions",c=await e.get(Qr).getToken(),u=await this.fetchWithParameters(e,l,r,c,n,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Js.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,r);return this.handleError(e,a,h,u,c)}let p=pv.create(e,r.count,u,n,[],o).processSSE(i),m=G1(p,h=>hU(e,h,n));return{type:"success",choices:Aie(m),getProcessingTime:s(()=>y5(u),"getProcessingTime")}}async fetchAndStreamChat(e,r,n,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:r,model:l.id,stream:!0,...c},m=n.extendedBy({endpoint:d,model:l.name}),h=e.get(Ki),g=await e.get(Qr).getToken(),y=await Tht(e,r,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){Js.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=an.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=pv.create(e,1,y,m,[],w4e.CancellationToken.None).processSSE(),E=G1(b,_=>hU(e,_,n));return{type:"success",choices:Aie(E),getProcessingTime:s(()=>y5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,r,n,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ki),l="speculation",c=await e.get(Qr).getToken(),u={prompt:{prefix:r.prompt,suffix:"",isFimEnabled:!1},speculation:r.speculation,ourRequestId:sr(),engineModelId:r.engineModelId,uiKind:r.uiKind,headers:r.headers,stops:r.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,n,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){Js.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=pv.create(e,1,d,n,[],o).processSSE(i),h=G1(m,g=>hU(e,g,n));return{type:"success",choices:Aie(h),getProcessingTime:s(()=>y5(d),"getProcessingTime")}}createTelemetryData(e,r,n){return an.createAndMarkAsIssued({endpoint:e,engineName:n.engineModelId,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchSpeculationWithParameters(e,r,n,i,o,a){let l={prompt:n.prompt.prefix,speculation:n.speculation,temperature:0,stream:!0,stop:n.stops??[]};return await q1(0),a?.isCancellationRequested?"not-sent":await T4e(e,n.prompt,n.engineModelId,r,n.ourRequestId,l,i,n.uiKind,o,a,n.headers)}async fetchWithParameters(e,r,n,i,o,a){let l=e.get(Dt).disableLogProb(o),c={prompt:n.prompt.prefix,suffix:n.prompt.suffix,max_tokens:xU(e),temperature:C5(e,n.count),top_p:CU(e),n:n.count,stop:S4e(e,n.languageId),stream:!0,extra:n.extra};(n.requestLogProbs||!l)&&(c.logprobs=2);let u=D1(n.repoInfo);return u!==void 0&&(c.nwo=u),n.postOptions&&Object.assign(c,n.postOptions),n.prompt.context&&(c.extra.context=n.prompt.context),await q1(0),a?.isCancellationRequested?"not-sent":await T4e(e,n.prompt,n.engineModelId,r,n.ourRequestId,c,i,n.uiKind,o,a,n.headers)}async handleError(e,r,n,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",r.setError("Completions limit reached",{command:wht,title:"Learn More"});let c=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(r.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return r.setError(a),Js.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Js.error(e,l),r.setWarning(l),n.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Js.warn(e,`Response status was ${i.status}:`,a),r.setWarning(`Last response was a ${i.status} error: ${a}`),n.properties.error=`Response status was ${i.status}: ${a}`):(r.setWarning(`Last response was a ${i.status} error`),n.properties.error=`Response status was ${i.status}`);return n.properties.status=String(i.status),Bt(e,"request.shownWarning",n),i.status===401||i.status===403?(e.get(Qr).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Js.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Js.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Js.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function gU(t,e,r,n,i,o,a){return aIe(t,e,r,i,n),{completionText:e,meanLogProb:_ht(t,r),meanAlternativeLogProb:Sht(t,r),choiceIndex:n,requestId:i,blockFinished:o,tokens:r.tokens,numTokens:r.tokens.length,telemetryData:a,copilotAnnotations:r.copilot_annotations,clientCompletionId:sr(),finishReason:r.finish_reason}}s(gU,"convertToAPIChoice");function _ht(t,e){if(e?.logprobs?.token_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)r+=e.logprobs.token_logprobs[o],n+=1;return n>0?r/n:void 0}catch(r){Mr.exception(t,r,"Error calculating mean prob")}}s(_ht,"calculateMeanLogProb");function Sht(t,e){if(e?.logprobs?.top_logprobs)try{let r=0,n=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],r+=Math.max(...Object.values(a)),n+=1}return n>0?r/n:void 0}catch(r){Mr.exception(t,r,"Error calculating mean prob")}}s(Sht,"calculateMeanAlternativeLogProb");function C5(t,e){return rm(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(C5,"getTemperatureForSamples");var Rht={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function S4e(t,e){return Rht[e??""]??[`


`,"\n```"]}s(S4e,"getStops");function CU(t){return 1}s(CU,"getTopP");function xU(t){return p8}s(xU,"getMaxSolutionTokens");var yie=class t{constructor(e,r){this.index=e;this.documentPrefix=r;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let r=new t(this.index,this.documentPrefix);return r.startOffset=this.startOffset,r.text=this.text.substring(0,this.startOffset+e),r.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,r}},vU=class{constructor(e,r,n,i,o,a){this.ctx=e;this.prefix=r;this.languageId=n;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,r)=>{let n=r.index??0,i=this.getCompletion(n,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),r.finished&&await this.trimAll(r,i),o}return r.finished?await this.trimAll(r,i):await this.trimOnce(r,i)}}getCompletion(e,r){let n=this.completions.get(e);return n||(n=new yie(e,this.prefix),this.completions.set(e,n)),n.updateText(r),n}async trimOnce(e,r){let n=await this.trim(r);return n===void 0?{yieldSolution:!1,continueStreaming:!0}:r.isFirstCompletion?(r.trimAt(n),{yieldSolution:!0,continueStreaming:!0,finishOffset:n}):(this.cacheCompletion(e,r,n),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,r){let n,i;do n=await this.trim(r),r.isFirstCompletion?(i=n,r.trimAt(n??r.effectiveText.length)):this.cacheCompletion(e,r,n);while(n!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new fU(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,r,n){let i=r.trimAt(n??r.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=gU(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,n!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,r,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,r,n){if(e.copilotAnnotations===void 0)return;let i=n.addedToPrefix.length,a=i+e.completionText.length>=r.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();var bU=new _t("getCompletions");function EU(t,e,r){r.telemetry.markAsDisplayed(),r.telemetry.properties.reason=x5(r.resultType),Bt(t,`${e}.shown`,r.telemetry)}s(EU,"telemetryShown");function R4e(t,e,r){let n=e+".accepted";Bt(t,n,r)}s(R4e,"telemetryAccepted");function k4e(t,e,r){let n=e+".rejected";Bt(t,n,r)}s(k4e,"telemetryRejected");function Tg(t,e={}){return{...e,telemetryBlob:t}}s(Tg,"mkCanceledResultTelemetry");function Xs(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Xs,"mkBasicResultTelemetry");function B4e(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let r=Ks()-e.telemetryBlob.issuedTime,n=x5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:n,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return bU.debug(t,`ghostText produced from ${n} in ${Math.round(r)}ms with foundOffset ${a}${l}`),Xee(t,"ghostText.produced",o,{timeToProduceMs:r,foundOffset:a}),e.value}if(bU.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){Bt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Xee(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(B4e,"handleGhostTextResultTelemetry");function x5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(x5,"resultTypeToString");f();f();f();async function kht(t){if(t.isCancellationRequested)return;let e=new Ig,r=t.onCancellationRequested(()=>{e.resolve(),r.dispose()});await e.promise}s(kht,"cancellationTokenToPromise");async function D4e(t,e){if(e){let r=kht(e);await Promise.race([t,r])}else await t}s(D4e,"raceCancellation");function Cie(t){return Array.isArray(t)}s(Cie,"isArrayOfT");async function IU(t,e){let r=new Map,n=[];for(let[i,o]of t.entries()){let a=(async()=>{let l;o instanceof Promise?l=await Bht(o,e):l=await Dht(o,e),r.set(i,l)})();n.push(a)}return await Promise.allSettled(n.values()),r}s(IU,"resolveAll");async function Bht(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;n={status:"full",resolutionTime:0,value:Cie(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await D4e(i,e),n.resolutionTime=performance.now()-r,n}s(Bht,"resolvePromise");async function Dht(t,e){let r=performance.now(),n={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;n.status!="partial"&&(n={status:"partial",resolutionTime:0,value:[]}),n.value.push(o)}e?.isCancellationRequested||(n.status!=="partial"?n={status:"full",resolutionTime:0,value:[]}:n.status="full")}catch(o){if(e?.isCancellationRequested)return;n={status:"error",resolutionTime:0,reason:o}}})();return await D4e(i,e),n.resolutionTime=performance.now()-r,n}s(Dht,"resolveIterable");f();var Pht={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},Nht="ms-vscode.cpptools",Lht="CppCompletionContextProvider";function P4e(t,e,r,n){(e.includes(Lht)||e.length===1&&e[0]==="*")&&L4e(t,r,n)}s(P4e,"fillInCppVSActiveExperiments");function N4e(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(Nht))&&L4e(t,r,n)}s(N4e,"fillInCppVSCodeActiveExperiments");function L4e(t,e,r){try{let n=Pht,i=t.get(Dt).cppContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){Mr.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){Mr.exception(t,n,"fillInCppActiveExperiments")}}s(L4e,"addActiveExperiments");f();function TU(t,e,r){try{let n=t.get(Dt).csharpContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return Mr.debug(t,"Failed to get the active C# experiments for the Context Provider API",n),!1}return!0}s(TU,"fillInCSharpActiveExperiments");f();var hv="fallbackContextProvider",fD={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20};function F4e(t,e,r,n){(e.length===1&&e[0]==="*"||e.includes(hv))&&Fht(t,r,n)}s(F4e,"fillInMultiLanguageActiveExperiments");function Fht(t,e,r){try{let n=fD,i=t.get(Dt).multiLanguageContextProviderParams(r);if(i)try{n=JSON.parse(i)}catch(o){Mr.error(t,"Failed to parse multiLanguageContextProviderParams",o)}for(let[o,a]of Object.entries(n))e.set(o,a)}catch(n){Mr.exception(t,n,"fillInMultiLanguageActiveExperiments")}}s(Fht,"addActiveExperiments");function M4e(t){let e={mlcpMaxContextItems:fD.mlcpMaxContextItems,mlcpMaxSymbolMatches:fD.mlcpMaxSymbolMatches};for(let[r,n]of Object.entries(t))r in e&&(e[r]=n);return e}s(M4e,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var Q4e=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),O4e=I.Intersect([I.Object({name:I.String(),value:I.String()}),Q4e]),U4e=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),Q4e]),Mht=[O4e,U4e],Qht=I.Union(Mht),Oht=new Map([["Trait",ms.Compile(O4e)],["CodeSnippet",ms.Compile(U4e)]]),Uht=s(t=>t,"ensureTypesAreEqual");Uht(!0);var qht=I.Object({contextItems:I.Array(Qht)}),Wht=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),xie=I.Object({id:I.String()}),Ght=I.Intersect([xie,Wht]),Hht=I.Intersect([xie,qht]),q4e=I.Object({providers:I.Array(Ght)}),W4e=I.Object({providers:I.Array(xie)}),vie=I.Object({providers:I.Array(Hht),updating:I.Optional(I.Array(I.String()))}),wU=I.Intersect([yIe,I.Object({contextItems:I.Optional(vie)})]);function _U(t,e){return t.map(r=>{let n=r.data.filter(i=>i.type===e);return n.length>0?{...r,data:n}:void 0}).filter(r=>r!==void 0)}s(_U,"filterContextItemsByType");function G4e(t){let e=[],r=0;return t.forEach(n=>{let i=!1;for(let[o,a]of Oht.entries())if(a.Check(n)){e.push({...n,type:o}),i=!0;break}i||r++}),[e,r]}s(G4e,"filterSupportedContextItems");function jht(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(jht,"validateContextItemId");function H4e(t,e){let r=new Set,n=[];for(let i of e){let o=i.id??sr();if(!jht(o)){let a=sr();Mr.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(r.has(o)){let a=sr();Mr.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}r.add(o),n.push({...i,id:o})}return n}s(H4e,"addOrValidateContextItemsIDs");f();var Ql=class{constructor(e=()=>new bie){this.createStatistics=e;this.statistics=new Jr(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let r=this.statistics.get(e);if(r)return r;let n=this.createStatistics();return this.statistics.set(e,n),n}getPreviousStatisticsForCompletion(e){let r=Array.from(this.statistics.keys());for(let n=r.length-1;n>=0;n--){let i=r[n];if(i!==e)return this.statistics.peek(i)}}},bie=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,r){let n=this._expectations.get(e)??[];this._expectations.set(e,[...n,...r])}clearExpectations(){this._expectations.clear()}setLastResolution(e,r){this._lastResolution.set(e,r)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[r,n]of this._expectations){if(n.length===0)continue;let i=this._lastResolution.get(r)??"none";if(i==="none"||i==="error"){this._statistics.set(r,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of n){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/n.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(r,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function j4e(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(j4e,"componentStatisticsToPromptMatcher");var V4e=je(ii());var Da=class{static{s(this,"ContextProviderRegistry")}},wg=class{static{s(this,"DefaultContextProviders")}},b5=class extends wg{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(r){this.ids.push(r)}getIds(){return this.ids}},Eie=class extends Da{constructor(r,n){super();this.ctx=r;this.match=n;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(r){if(r.id.includes(",")||r.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${r.id} is invalid.`);if(this._providers.find(n=>n.id===r.id))throw new Error(`A context provider with id ${r.id} has already been registered`);this._providers.push(r)}unregisterContextProvider(r){this._providers=this._providers.filter(n=>n.id!==r)}get providers(){return this._providers.slice()}async resolveAllProviders(r,n,i,o,a){if(o?.isCancellationRequested)return Mr.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;TU(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(n,i),d=u.filter(_=>_[1]>0),p=u.filter(_=>_[1]<=0);if(N4e(this.ctx,d.map(_=>_[0].id),l,i),F4e(this.ctx,d.map(_=>_[0].id),l,i),p.forEach(([_,k])=>{let B={providerId:_.id,matchScore:k,resolution:"none",resolutionTimeMs:0,data:[]};c.push(B)}),d.length===0)return c;if(o?.isCancellationRequested)return Mr.debug(this.ctx,"Resolving context providers cancelled"),[];let m=new V4e.CancellationTokenSource;if(o){let _=o.onCancellationRequested(k=>{m.cancel(),_.dispose()})}let h=bB(this.ctx)&&!NL(this.ctx)?0:Vht(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map,b={completionId:r,documentContext:n,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a};for(let[_]of d){let k=this.ctx.get(Ql).getPreviousStatisticsForCompletion(r)?.get(_.id);k&&(b.previousUsageStatistics=k);let B=_.resolver.resolve(b,m.token);v.set(_.id,B)}let E=await IU(v,m.token);y&&clearTimeout(y);for(let[_,k]of d){let B=E.get(_.id);if(B)if(this.ctx.get(Ql).getStatisticsForCompletion(r).setLastResolution(_.id,B.status),B.status==="error")dQ(B.reason)||Mr.error(this.ctx,`Error resolving context from ${_.id}: `,B.reason),c.push({providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:[]});else{let N=[...B.value??[]];if((B.status==="none"||B.status==="partial")&&(Mr.info(this.ctx,`Context provider ${_.id} exceeded time budget of ${h}ms`),_.resolver.resolveOnTimeout))try{let H=_.resolver.resolveOnTimeout(b);Cie(H)?N.push(...H):H&&N.push(H)}catch(H){Mr.error(this.ctx,`Error in fallback logic for context provider ${_.id}: `,H)}let[q,te]=G4e(N);te&&Mr.error(this.ctx,`Dropped ${te} context items from ${_.id} due to invalid schema`);let me=H4e(this.ctx,q),oe={providerId:_.id,matchScore:k,resolution:B.status,resolutionTimeMs:B.resolutionTime,data:me};c.push(oe)}else Mr.error(this.ctx,`Context provider ${_.id} not found in results`)}return c.sort((_,k)=>k.matchScore-_.matchScore)}async matchProviders(r,n){let i=RU(this.ctx,n),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,r);return[l,c]}))}},Iie=class extends Da{constructor(r){super();this.delegate=r;this._cachedContextItems=new Jr(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(r){this.delegate.registerContextProvider(r)}unregisterContextProvider(r){this.delegate.unregisterContextProvider(r)}get providers(){return this.delegate.providers}async resolveAllProviders(r,n,i,o,a){let l=this._cachedContextItems.get(r);if(r&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(r,n,i,o,a);return c.length>0&&r&&this._cachedContextItems.set(r,c),c}};function SU(t,e){return new Iie(new Eie(t,e))}s(SU,"getContextProviderRegistry");function $4e(t,e,r){let n=t.get(Ql).getStatisticsForCompletion(e);return r.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=n.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s($4e,"telemetrizeContextItems");function z4e(t){return t.matchScore>0&&t.resolution!=="error"}s(z4e,"matchContextItems");function RU(t,e){let r=Tie(t,e),n=Xr(t,ft.ContextProviders)??[];if(r.length===1&&r[0]==="*"||n.length===1&&n[0]==="*")return["*"];let i=t.get(wg).getIds();return Array.from(new Set([...i,...r,...n]))}s(RU,"getActiveContextProviders");function Tie(t,e){return bB(t)?["*"]:t.get(Dt).contextProviders(e)}s(Tie,"getExpContextProviders");function wie(t,e){return RU(t,e).length>0}s(wie,"useContextProviderAPI");function Vht(t,e){let r=Xr(t,ft.ContextProviderTimeBudget);return r!==void 0&&typeof r=="number"?r:t.get(Dt).contextProviderTimeBudget(e)}s(Vht,"getContextProviderTimeBudget");var rp=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Jr(25)}static{s(this,"ContextProviderBridge")}schedule(e,r,n,i,o){let a=this.ctx.get(Da),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(r,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},n,i,o?.data);this.scheduledResolutions.set(r,m)}async resolution(e){let r=this.scheduledResolutions.get(e);return r?await r:[]}};f();f();var kU=class{constructor(e,r,n){this.languageId=e;this.nodeMatch=r;this.nodeTypesWithBlockOrStmtChild=n}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,r,n){let i=await P1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(r);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?n(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,r,n){return this.getNodeMatchAtPosition(e,r,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return n(o)}})}async isBlockBodyFinished(e,r,n){let i=(e+r).trimEnd(),o=await this.getNextBlockAtPosition(i,n,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,r){let n=e.trimEnd();return this.getNodeMatchAtPosition(n,r,i=>i.startIndex)}},BU=class extends kU{constructor(r,n,i,o,a){super(r,o,a);this.blockEmptyMatch=n;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(r){return this.lineMatch.test(r.trimStart())}async isBlockBodyEmpty(r,n){let i=await this.getNextBlockAtPosition(r,n,o=>{o.startIndex<n&&(n=o.startIndex);let a=r.substring(n,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(r,n){return n=K4e(r,n),this.isBlockStart($ht(r,n))&&this.isBlockBodyEmpty(r,n)}};function $ht(t,e){let r=t.lastIndexOf(`
`,e-1),n=t.indexOf(`
`,e);return n<0&&(n=t.length),t.slice(r+1,n)}s($ht,"getLineAtOffset");function K4e(t,e){let r=e;for(;r>0&&/\s/.test(t.charAt(r-1));)r--;return r}s(K4e,"rewindToNearestNonWs");function Y4e(t,e){let r=t.startIndex,n=t.startIndex-t.startPosition.column,i=e.substring(n,r);if(/^\s*$/.test(i))return i}s(Y4e,"indent");function zht(t,e,r){if(e.startPosition.row<=t.startPosition.row)return!1;let n=Y4e(t,r),i=Y4e(e,r);return n!==void 0&&i!==void 0&&n.startsWith(i)}s(zht,"outdented");var _g=class extends kU{constructor(r,n,i,o,a,l,c){super(r,n,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(r,n){let i=r.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(r.parent?.type=="class_definition"||r.parent?.type=="function_definition")&&r.children.length==1&&mTe(r.parent))}async isEmptyBlockStart(r,n){if(n>r.length)throw new RangeError("Invalid offset");for(let o=n;o<r.length&&r.charAt(o)!=`
`;o++)if(/\S/.test(r.charAt(o)))return!1;n=K4e(r,n);let i=await P1(this.languageId,r);try{let o=i.rootNode.descendantForIndex(n-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&zht(d,p,r)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=n}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,n)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,n):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,n);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},Yht={python:new _g("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new _g("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new _g("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new _g("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new BU("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new BU("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new _g("csharp",{},new Map([]),[],"block",null,!0),java:new _g("java",{},new Map([]),[],"block",null,!0),php:new _g("php",{},new Map([]),[],"block",null,!0),cpp:new _g("cpp",{},new Map([]),[],"block",null,!0)};function _ie(t){if(!y0(t))throw new Error(`Language ${t} is not supported`);return Yht[iQ(t)]}s(_ie,"getBlockParser");async function J4e(t,e,r){return y0(t)?_ie(t).isEmptyBlockStart(e,r):!1}s(J4e,"isEmptyBlockStart");async function X4e(t,e,r,n){if(y0(t))return _ie(t).isBlockBodyFinished(e,r,n)}s(X4e,"isBlockBodyFinished");async function Z4e(t,e,r){if(y0(t))return _ie(t).getNodeStart(e,r)}s(Z4e,"getNodeStart");var H9r=new _t("parseBlock");function pD(t,e,r,n){let i=e.getText(Vo.range(Vo.position(0,0),r))+(n?`
`:""),o=e.offsetAt(r)+(n?1:0),a=e.detectedLanguageId;return l=>X4e(a,i,l,o)}s(pD,"parsingBlockFinished");function PU(t,e){return J4e(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(PU,"isEmptyBlockStartUtil");async function eRe(t,e,r,n){let o=e.getText(Vo.range(Vo.position(0,0),r))+n,a=await Z4e(e.detectedLanguageId,o,e.offsetAt(r));if(a)return e.positionAt(a)}s(eRe,"getNodeStartUtil");var Kht=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),Jht=new RegExp(`^(${Kht.join("|")})`);function Xht(t){return Jht.test(t.trimLeft().toLowerCase())}s(Xht,"isContinuationLine");function DU(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(DU,"indentationOfLine");function mD(t,e){let r=t.getText(),n=t.offsetAt(e);return Sie(r,n,t.detectedLanguageId)}s(mD,"contextIndentation");function Sie(t,e,r){let n=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=DU(d[h]),y=h,h+=m;if(r==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=DU(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(n,n.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=DU(n[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(Sie,"contextIndentationFromText");var Zht=!1;function egt(t,e,r){let n=t.split(`
`),i=r!==void 0,o=r?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&n[0].trim()!==""&&a++,!i&&Zht&&n[0].trim()===""&&a++,i||a++,n.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<n.length;c++){let u=n[c];c==0&&o!==void 0&&(u=o+u);let d=DU(u);if(d!==void 0&&(d<l||d===l&&!Xht(u)))return n.slice(0,c).join(`
`).length}return"continue"}s(egt,"completionCutOrContinue");function tRe(t,e){return async r=>{let n=egt(r,t,e);return n==="continue"?void 0:n}}s(tRe,"indentationBlockFinished");f();f();f();function rRe(t,e){return{...sQ,useSubsetMatching:Rie(t,e)}}s(rRe,"getCppSimilarFilesOptions");function nRe(t){return sQ.maxTopSnippets}s(nRe,"getCppNumberOfSnippets");var tgt=new Map([["cpp",rRe]]);function NU(t,e,r){let n=tgt.get(r);return n?n(t,e):{...f8,useSubsetMatching:Rie(t,e)}}s(NU,"getSimilarFilesOptions");var rgt=new Map([["cpp",nRe]]);function iRe(t,e){let r=rgt.get(e);return r?r(t):gTe}s(iRe,"getNumberOfSnippets");function Rie(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Xr(t,ft.UseSubsetMatching))??!1}s(Rie,"useSubsetMatching");f();f();var ngt=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function igt(t){return ngt.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(igt,"isOomError");function gv(t,e,r,n=Mr){if(!Lc(e)){if(e instanceof Error){let i=e;igt(i)?t.get(Ki).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Ki).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Ki).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Ki).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Ki).setWarning("Current working directory does not exist")}n.exception(t,e,r)}}s(gv,"handleException");function oRe(t){process.addListener("uncaughtException",r=>{gv(t,r,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",r=>{if(!e)try{e=!0,gv(t,r,"unhandledRejection")}finally{e=!1}})}s(oRe,"registerDefaultHandlers");f();f();var ogt="content_excluded";async function sRe(t,e,r,n){let i=_U(r,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(Rr),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Ql).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,ogt]]),m}).map(d=>d.data)}s(sRe,"getCodeSnippetsFromContextItems");function aRe(t,e){let r=t.get(Rr);return e.map(n=>({snippet:n,relativePath:r.getRelativePath(n)}))}s(aRe,"addRelativePathToCodeSnippets");f();function pl(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(pl,"Text");function Av(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(Av,"Code");function E5(t){return t.children}s(E5,"Chunk");f();function kr(t,e,r){let n=[];Array.isArray(e.children)?n=e.children:e.children&&(n=[e.children]);let i={...e,children:n};return r&&(i.key=r),{type:t,props:i}}s(kr,"functionComponentFunction");function Dm(t){return{type:"f",children:t}}s(Dm,"fragmentFunction");Dm.isFragmentFunction=!0;var LU=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Jc,u=>{u.codeSnippets!==r&&n(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!r||r.length===0||!i)return;let a=aRe(t.ctx,r),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(kr(pl,{expElidableTextWeight:1,children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(kr(Av,{source:p,expElidableTextWeight:.99,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(kr(pl,{expElidableTextWeight:.5,children:"---"}))}),kr(E5,{children:d})})},"CodeSnippets");f();function kie(t){return t.children}s(kie,"CompletionsContext");function Bie(t){return t.children}s(Bie,"StableCompletionsContext");function Die(t){return t.children}s(Die,"AdditionalCompletionsContext");function FU(t){return t.name===kie.name||t.name===Bie.name||t.name===Die.name}s(FU,"isContextNode");f();f();f();f();f();f();var Cs=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},hD=class{constructor(){this._first=Cs.Undefined;this._last=Cs.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===Cs.Undefined}clear(){let e=this._first;for(;e!==Cs.Undefined;){let r=e.next;e.prev=Cs.Undefined,e.next=Cs.Undefined,e=r}this._first=Cs.Undefined,this._last=Cs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,r){let n=new Cs(e);if(this._first===Cs.Undefined)this._first=n,this._last=n;else if(r){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Cs.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Cs.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Cs.Undefined&&e.next!==Cs.Undefined){let r=e.prev;r.next=e.next,e.next.prev=r}else e.prev===Cs.Undefined&&e.next===Cs.Undefined?(this._first=Cs.Undefined,this._last=Cs.Undefined):e.next===Cs.Undefined?(this._last=this._last.prev,this._last.next=Cs.Undefined):e.prev===Cs.Undefined&&(this._first=this._first.next,this._first.prev=Cs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Cs.Undefined;)yield e.element,e=e.next}};f();var sgt=globalThis.performance&&typeof globalThis.performance.now=="function",I5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=sgt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var lRe=!1,agt=!1,a2;(ie=>{ie.None=s(()=>jo.None,"None");function e(j){if(agt){let{onDidAddListener:W}=j,Y=gD.create(),ee=0;j.onDidAddListener=()=>{++ee===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),W?.()}}}s(e,"_addLeakageTraceLogic");function r(j,W){return h(j,()=>{},0,void 0,!0,void 0,W)}ie.defer=r,s(r,"defer");function n(j){return(W,Y=null,ee)=>{let pe=!1,re;return re=j(fe=>{if(!pe)return re?re.dispose():pe=!0,W.call(Y,fe)},null,ee),pe&&re.dispose(),re}}ie.once=n,s(n,"once");function i(j,W){return ie.once(ie.filter(j,W))}ie.onceIf=i,s(i,"onceIf");function o(j,W,Y){return p((ee,pe=null,re)=>j(fe=>ee.call(pe,W(fe)),null,re),Y)}ie.map=o,s(o,"map");function a(j,W,Y){return p((ee,pe=null,re)=>j(fe=>{W(fe),ee.call(pe,fe)},null,re),Y)}ie.forEach=a,s(a,"forEach");function l(j,W,Y){return p((ee,pe=null,re)=>j(fe=>W(fe)&&ee.call(pe,fe),null,re),Y)}ie.filter=l,s(l,"filter");function c(j){return j}ie.signal=c,s(c,"signal");function u(...j){return(W,Y=null,ee)=>{let pe=bSe(...j.map(re=>re(fe=>W.call(Y,fe))));return m(pe,ee)}}ie.any=u,s(u,"any");function d(j,W,Y,ee){let pe=Y;return o(j,re=>(pe=W(pe,re),pe),ee)}ie.reduce=d,s(d,"reduce");function p(j,W){let Y,ee={onWillAddFirstListener(){Y=j(pe.fire,pe)},onDidRemoveLastListener(){Y?.dispose()}};W||e(ee);let pe=new R0(ee);return W?.add(pe),pe.event}s(p,"snapshot");function m(j,W){return W instanceof Array?W.push(j):W&&W.add(j),j}s(m,"addAndReturnDisposable");function h(j,W,Y=100,ee=!1,pe=!1,re,fe){let he,Ne,Re,Je=0,Me,pt={leakWarningThreshold:re,onWillAddFirstListener(){he=j(Ct=>{Je++,Ne=W(Ne,Ct),ee&&!Re&&(Tt.fire(Ne),Ne=void 0),Me=s(()=>{let bt=Ne;Ne=void 0,Re=void 0,(!ee||Je>1)&&Tt.fire(bt),Je=0},"doFire"),typeof Y=="number"?(clearTimeout(Re),Re=setTimeout(Me,Y)):Re===void 0&&(Re=0,queueMicrotask(Me))})},onWillRemoveListener(){pe&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,he.dispose()}};fe||e(pt);let Tt=new R0(pt);return fe?.add(Tt),Tt.event}ie.debounce=h,s(h,"debounce");function g(j,W=0,Y){return ie.debounce(j,(ee,pe)=>ee?(ee.push(pe),ee):[pe],W,void 0,!0,void 0,Y)}ie.accumulate=g,s(g,"accumulate");function y(j,W=(ee,pe)=>ee===pe,Y){let ee=!0,pe;return l(j,re=>{let fe=ee||!W(re,pe);return ee=!1,pe=re,fe},Y)}ie.latch=y,s(y,"latch");function v(j,W,Y){return[ie.filter(j,W,Y),ie.filter(j,ee=>!W(ee),Y)]}ie.split=v,s(v,"split");function b(j,W=!1,Y=[],ee){let pe=Y.slice(),re=j(Ne=>{pe?pe.push(Ne):he.fire(Ne)});ee&&ee.add(re);let fe=s(()=>{pe?.forEach(Ne=>he.fire(Ne)),pe=null},"flush"),he=new R0({onWillAddFirstListener(){re||(re=j(Ne=>he.fire(Ne)),ee&&ee.add(re))},onDidAddFirstListener(){pe&&(W?setTimeout(fe):fe())},onDidRemoveLastListener(){re&&re.dispose(),re=null}});return ee&&ee.add(he),he.event}ie.buffer=b,s(b,"buffer");function E(j,W){return s((ee,pe,re)=>{let fe=W(new k);return j(function(he){let Ne=fe.evaluate(he);Ne!==_&&ee.call(pe,Ne)},void 0,re)},"fn")}ie.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(W){return this.steps.push(W),this}forEach(W){return this.steps.push(Y=>(W(Y),Y)),this}filter(W){return this.steps.push(Y=>W(Y)?Y:_),this}reduce(W,Y){let ee=Y;return this.steps.push(pe=>(ee=W(ee,pe),ee)),this}latch(W=(Y,ee)=>Y===ee){let Y=!0,ee;return this.steps.push(pe=>{let re=Y||!W(pe,ee);return Y=!1,ee=pe,re?pe:_}),this}evaluate(W){for(let Y of this.steps)if(W=Y(W),W===_)break;return W}}function B(j,W,Y=ee=>ee){let ee=s((...he)=>fe.fire(Y(...he)),"fn"),pe=s(()=>j.on(W,ee),"onFirstListenerAdd"),re=s(()=>j.removeListener(W,ee),"onLastListenerRemove"),fe=new R0({onWillAddFirstListener:pe,onDidRemoveLastListener:re});return fe.event}ie.fromNodeEventEmitter=B,s(B,"fromNodeEventEmitter");function N(j,W,Y=ee=>ee){let ee=s((...he)=>fe.fire(Y(...he)),"fn"),pe=s(()=>j.addEventListener(W,ee),"onFirstListenerAdd"),re=s(()=>j.removeEventListener(W,ee),"onLastListenerRemove"),fe=new R0({onWillAddFirstListener:pe,onDidRemoveLastListener:re});return fe.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function q(j,W){return new Promise(Y=>n(j)(Y,null,W))}ie.toPromise=q,s(q,"toPromise");function te(j){let W=new R0;return j.then(Y=>{W.fire(Y)},()=>{W.fire(void 0)}).finally(()=>{W.dispose()}),W.event}ie.fromPromise=te,s(te,"fromPromise");function me(j,W){return j(Y=>W.fire(Y))}ie.forward=me,s(me,"forward");function oe(j,W,Y){return W(Y),j(ee=>W(ee))}ie.runAndSubscribe=oe,s(oe,"runAndSubscribe");class H{constructor(W,Y){this._observable=W;this._counter=0;this._hasChanged=!1;let ee={onWillAddFirstListener:s(()=>{W.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{W.removeObserver(this)},"onDidRemoveLastListener")};Y||e(ee),this.emitter=new R0(ee),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(W){this._counter++}handlePossibleChange(W){}handleChange(W,Y){this._hasChanged=!0}endUpdate(W){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function O(j,W){return new H(j,W).emitter.event}ie.fromObservable=O,s(O,"fromObservable");function le(j){return(W,Y,ee)=>{let pe=0,re=!1,fe={beginUpdate(){pe++},endUpdate(){pe--,pe===0&&(j.reportChanges(),re&&(re=!1,W.call(Y)))},handlePossibleChange(){},handleChange(){re=!0}};j.addObserver(fe),j.reportChanges();let he={dispose(){j.removeObserver(fe)}};return ee instanceof Bu?ee.add(he):Array.isArray(ee)&&ee.push(he),he}}ie.fromObservableLight=le,s(le,"fromObservableLight")})(a2||={});var Pie=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new I5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},cRe=-1;var Nie=class t{constructor(e,r,n=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=r;this.name=n;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,r){let n=this.threshold;if(n<=0||r<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${r} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new Lie(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,r=0;for(let[n,i]of this._stacks)(!e||r<i)&&(e=[n,i],r=i);return e}},gD=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Lie=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,r){super(e),this.name="ListenerLeakError",this.stack=r}},Fie=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,r){super(e),this.name="ListenerRefusalError",this.stack=r}},lgt=0,T5=class{constructor(e){this.value=e;this.id=lgt++}static{s(this,"UniqueContainer")}},cgt=2,ugt=s((t,e)=>{if(t instanceof T5)e(t);else for(let r=0;r<t.length;r++){let n=t[r];n&&e(n)}},"forEachListener"),R0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=cRe>0||this._options?.leakWarningThreshold?new Nie(e?.onListenerError??i5,this._options?.leakWarningThreshold??cRe):void 0,this._perfMon=this._options?._profName?new Pie(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(lRe){let e=this._listeners;queueMicrotask(()=>{ugt(e,r=>r.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,r,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Fie(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||i5)(d),jo.None}if(this._disposed)return jo.None;r&&(e=e.bind(r));let i=new T5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=gD.create(),o=this._leakageMon.check(i.stack,this._size+1)),lRe&&(i.stack=a??gD.create()),this._listeners?this._listeners instanceof T5?(this._deliveryQueue??=new Mie,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=ka(()=>{o?.(),this._removeListener(i)});return n instanceof Bu?n.add(l):Array.isArray(n)&&n.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let r=this._listeners,n=r.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*cgt<=r.length){let o=0;for(let a=0;a<r.length;a++)r[a]?r[o++]=r[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=o}}_deliver(e,r){if(!e)return;let n=this._options?.onListenerError||i5;if(!n){e.value(r);return}try{e.value(r)}catch(i){n(i)}}_deliverQueue(e){let r=e.current._listeners;for(;e.i<e.end;)this._deliver(r[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof T5)this._deliver(this._listeners,e);else{let r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Mie=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,r,n){this.i=0,this.end=n,this.current=e,this.value=r}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};var uRe=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),MU;(n=>{function t(i){return i===n.None||i===n.Cancelled||i instanceof w5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=t,s(t,"isCancellationToken"),n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:a2.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:uRe})})(MU||={});var w5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?uRe:(this._emitter||(this._emitter=new R0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},H1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new w5),this._token}cancel(){this._token?this._token instanceof w5&&this._token.cancel():this._token=MU.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof w5&&this._token.dispose():this._token=MU.None}};function dRe(t){return t}s(dRe,"identity");var QU=class{constructor(e,r){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=dRe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let r=this._computeKey(e);return this.lastArgKey!==r&&(this.lastArgKey=r,this.lastCache=this._fn(e)),this.lastCache}},j1=class{constructor(e,r){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=dRe):(this._fn=r,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let r=this._computeKey(e);if(this._map2.has(r))return this._map2.get(r);let n=this._fn(e);return this._map.set(e,n),this._map2.set(r,n),n}};f();f();var Sg=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function l2(t){return t<0?0:t>4294967295?4294967295:t|0}s(l2,"toUint32");function Qie(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(Qie,"escapeRegExpCharacters");function Rg(t){return t.split(/\r\n|\r|\n/)}s(Rg,"splitLines");function AD(t,e){let r=Math.min(t.length,e.length),n;for(n=0;n<r;n++)if(t.charCodeAt(n)!==e.charCodeAt(n))return n;return r}s(AD,"commonPrefixLength");function S5(t,e){let r=Math.min(t.length,e.length),n,i=t.length-1,o=e.length-1;for(n=0;n<r;n++)if(t.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return r}s(S5,"commonSuffixLength");var fgt=/^[\t\n\r\x20-\x7E]*$/;function Oie(t){return fgt.test(t)}s(Oie,"isBasicASCII");var RNr=String.fromCharCode(65279);function hRe(t){return t.charAt(0).toUpperCase()+t.slice(1)}s(hRe,"uppercaseFirstLetter");var fRe=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=pgt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let r=this._data,n=r.length/3,i=1;for(;i<=n;)if(e<r[3*i])i=2*i;else if(e>r[3*i+1])i=2*i+1;else return r[3*i+2];return 0}};function pgt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(pgt,"getGraphemeBreakRawData");var pRe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Sg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new QU({getCacheKey:JSON.stringify},e=>{function r(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(r,"arrayToMap");function n(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(n,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=r(o[d]);l=i(l,p)}let c=r(o._common),u=n(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Sg(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},mRe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let r=0;r<e.length;r++){let n=e.codePointAt(r);if(typeof n=="number"&&t.isInvisibleCharacter(n))return!0}return!1}static get codePoints(){return t.getData()}};f();f();function gRe(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let r=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let n=0;n<t.length;n++)r[n][0]=n;for(let n=0;n<e.length;n++)r[0][n]=n;for(let n=0;n<e.length;n++)for(let i=0;i<t.length;i++)r[i][n]=Math.min((i==0?n:r[i-1][n])+1,(n==0?i:r[i][n-1])+1,(i==0||n==0?Math.max(i,n):r[i-1][n-1])+(t[i]==e[n]?0:1));return{score:r[t.length-1][e.length-1]}}s(gRe,"findEditDistanceScore");var ARe=50;function Uie(t){let e=t*4,r=t*.1;return Math.floor(e+r)}s(Uie,"approximateMaxCharacters");function yD(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(Jc,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Uie(a);return kr(Dm,{children:[kr(c2,{document:r,position:i,maxCharacters:m}),kr(OU,{document:r,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s(yD,"CurrentFile");function c2(t){if(t.document===void 0||t.position===void 0)return kr(pl,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),kr(Av,{children:e})}s(c2,"BeforeCursor");function OU(t,e){let[r,n]=e.useState("");if(t.document===void 0||t.position===void 0)return kr(pl,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return kr(pl,{});if(r===o)return kr(pl,{children:r});let a=o;if(r!==""){let l=Do(t.tokenizer),c=l.takeFirstTokens(o,ARe);c.tokens.length>0&&100*gRe(c.tokens,l.takeFirstTokens(r,ARe).tokens)?.score<(t.suffixMatchThreshold??aQ)*c.tokens.length&&(a=r)}return a!==r&&n(a),kr(pl,{children:a})}s(OU,"AfterCursor");function yRe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0);e.useData(Jc,u=>{let d=u.document;(u.document.uri!==r?.uri||d.getText()!==r?.getText())&&n(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&l(u.maxPromptTokens)});let c=Uie(a);return kr(c2,{document:r,position:i,maxCharacters:c})}s(yRe,"DocumentPrefix");function CRe(t,e){let[r,n]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(Jc,h=>{let g=h.document;(h.document.uri!==r?.uri||g.getText()!==r?.getText())&&n(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=Uie(a);return kr(OU,{document:r,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})}s(CRe,"DocumentSuffix");f();var UU=class{static{s(this,"WishlistElision")}elide(e,r,n,i,o){if(r<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(n,i,r,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,r){let n=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=r.tokenLength(m);return c+=h,n+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),n]}elideSuffix(e,r,n,i,o){let a=e.value;if(a.length===0||r<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:n+Math.max(0,r)};i<n&&(r=r+(n-i),n=i);let l=o.takeFirstTokens(a,r);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:n+Math.max(0,r-l.tokens.length)}}elidePrefix(e,r,n,i){let o=this.removeLowWeightPrefixBlocks(e,r,n),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,r,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=r&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,r,n){let i=n;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=r)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,r,n){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=r)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=n.takeLastTokens(a.line,r);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${r} tokens`;throw new Error(l)}return[o,i]}};function qie(t){return t.map(e=>e.elidedValue).join("")}s(qie,"makePrompt");function vRe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(vRe,"makePrefixPrompt");function bRe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let r=Math.max(...Array.from(e.keys()),-1),n=[];for(let i=0;i<=r;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();n.push(a)}else n.push("")}return n}s(bRe,"makeContextPrompt");var qU=class{constructor(e="[...]",r=`
`,n=!1,i=60){this.ellipsis=e;this.delimiter=r;this.turnOffChunks=n;this.keepLinesBeforeCursor=i}static{s(this,"ElidableTextElision")}elide(e,r,n,i,o){let a;if(n.value.length===0||i<=o.tokenLength(this.ellipsis))a=[],r=r+Math.max(0,i);else{let h=xRe([n],o).elide(i,this.ellipsis,!0,"removeLeastDesirable",o,"bottomToTop");r=r+Math.max(0,i-o.tokenLength(h.getText())),a=h.getLines()}let c=xRe(e.map(m=>this.turnOffChunks?{...m,chunks:void 0}:m),o,this.keepLinesBeforeCursor).elide(r),u=r-o.tokenLength(c.getText()),d=[...c.getLines(),...a],p=[n,...e];return{cycles:1,blocks:p.map((m,h)=>{let g=d.filter(y=>y.metadata?.get("componentPath")===m.componentPath);if(g.length===0)return{...m,tokens:o.tokenLength(m.value),elidedValue:"",elidedTokens:0};{let y=g.map(v=>v.text).join(this.delimiter);return h===p.length-1&&u>0&&y.trim()===this.ellipsis?y=this.ellipsis+this.delimiter+o.takeLastTokens(m.value,u-o.tokenLength(this.ellipsis+this.delimiter)).text:h!==0&&h!==p.length-1&&(y=y.endsWith(this.delimiter)?y:y+this.delimiter),{...m,tokens:o.tokenLength(m.value),elidedValue:y,elidedTokens:o.tokenLength(y)}}})}}},ERe=(r=>(r.componentPath="componentPath",r[r.chunk=S8]="chunk",r))(ERe||{});function xRe(t,e,r=0){let n=new St(t.map(i=>{let o=new Map([["componentPath",i.componentPath],[ERe.chunk,i.chunks]]);return i.isCode?new St([[Su(i.value,!0,!0,o,e),i.expElidableTextWeight]]):new St([[i.value,i.expElidableTextWeight]],o,e)}),void 0,e);return r>0&&n.lines.forEach((i,o)=>{o+1>=n.lines.length-r&&i.setValue(1)}),n}s(xRe,"prepareWeightedBlocks");var WU=class{constructor(e,r="o200k_base",n){this.delegate=e;this.approximateTokenizer=new FM(r,n)}static{s(this,"ApproximateElision")}elide(e,r,n,i,o){let{blocks:[a,...l]}=this.delegate.elide(e,r,n,i,this.approximateTokenizer),c=qie(l);if(o.tokenLength(c+a.elidedValue)>r+i){let{blocks:d}=this.delegate.elide(e,r,n,i,o);return{blocks:d,cycles:2}}else return{blocks:[a,...l],cycles:1}}};f();var R5=class{constructor(e,r=Wie()){this.snapshot=e;this.transformers=r}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,r,n,i){let o=this.transformers.reduce((l,c)=>c(e,r,l),{...i});if(n(e,r,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,n,o)}};function Wie(){return[(t,e,r)=>{r.weight===void 0&&(r.weight=1);let n=t.props?.weight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,weight:i*r.weight}},(t,e,r)=>{r.expElidableTextWeight===void 0&&(r.expElidableTextWeight=1);let n=t.props?.expElidableTextWeight??1,i=typeof n=="number"?Math.max(0,Math.min(1,n)):1;return{...r,expElidableTextWeight:i*r.expElidableTextWeight}},(t,e,r)=>{if(t.name===E5.name){let n=r.chunks?new Set(r.chunks):new Set;return n.add(t.path),{...r,chunks:n}}return r},(t,e,r)=>t.props?.source!==void 0?{...r,source:t.props.source}:r,(t,e,r)=>t.name===Av.name?{...r,isCode:!0}:r]}s(Wie,"defaultTransformers");f();var CD={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Gie={};for(let[t,e]of Object.entries(CD))if(e.markdownLanguageIds)for(let r of e.markdownLanguageIds)Gie[r]=t;else Gie[t]=t;function TRe(t){return Gie[t]}s(TRe,"mdCodeBlockLangToLanguageId");var mgt={start:"//",end:""},hgt=["php","plaintext"],Hie={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function wRe(t){return Object.values(Hie).includes(t.trim())}s(wRe,"isShebangLine");function ggt({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(ggt,"hasLanguageMarker");function Agt(t,e){let r=CD[e]?CD[e].lineComment:mgt;if(r){let n=r.end==""?"":" "+r.end;return`${r.start} ${t}${n}`}return""}s(Agt,"comment");function GU(t,e){if(t==="")return"";let r=t.endsWith(`
`),i=(r?t.slice(0,-1):t).split(`
`).map(o=>Agt(o,e)).join(`
`);return r?i+`
`:i}s(GU,"commentBlockAsSingles");function _Re(t){let{languageId:e}=t;return hgt.indexOf(e)===-1&&!ggt(t)?e in Hie?Hie[e]:`Language: ${e}`:""}s(_Re,"getLanguageMarker");function SRe(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(SRe,"getPathMarker");function xD(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(xD,"newLineEnded");function RRe(t){return IRe(typeof t=="string"?t:"plaintext")}s(RRe,"getLanguage");function IRe(t){return CD[t]!==void 0?{languageId:t,...CD[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(IRe,"_getLanguage");var ygt=5,k5=class{constructor(){this.renderId=0;this.formatPrefix=qie}static{s(this,"CompletionsPromptRenderer")}render(e,r,n){let i=this.renderId++,o=performance.now();try{if(n?.isCancellationRequested)return{status:"cancelled"};let a=r.delimiter??"",l=r.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,r.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,r),h=performance.now(),[g,y]=xgt(r),{blocks:[v,...b],cycles:E}=g.elide(c,p,u,m,Do(l)),_=performance.now(),k=this.formatPrefix(b),B=this.formatContext?this.formatContext(b):void 0,N=v.elidedValue,q=b.reduce((me,oe)=>me+oe.elidedTokens,0),te=q+v.elidedTokens;return d.push(...Cgt([...b,v])),{prefix:k,prefixTokens:q,suffix:N,suffixTokens:v.elidedTokens,context:B,tokens:te,status:"ok",metadata:{renderId:i,rendererName:"completions",tokenizer:l,elisionStrategy:y,elisionCycles:E,actualTokens:te,elisionTimeMs:_-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((me,oe)=>me+(oe.updateDataTimeMs??0),0),status:"ok"}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,r){let n=e?.value??"",i=r.promptTokenLimit,o=r.suffixPercent;if(n.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=n.length>0?i-ygt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,r,n){let i=[],o=[],a=[],l=!1;if(new R5(e,jie).walkSnapshot((d,p,m)=>{if(d===e||(d.name===yD.name&&(l=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode;if(m.type==="suffix")o.push({value:vD(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let y=d.value.endsWith(r)?d.value:d.value+r,v=y;m.type==="prefix"?v=d.value:wRe(d.value)?v=y:v=GU(y,n),i.push({type:m.type==="prefix"?"prefix":"context",value:vD(v),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g})}return!0}),!l)throw new Error(`Node of type ${yD.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},jie=[...Wie(),(t,e,r)=>FU(t)?{...r,type:"context"}:r,(t,e,r)=>t.name===c2.name?{...r,type:"prefix"}:r,(t,e,r)=>t.name===OU.name?{...r,type:"suffix"}:r];function Cgt(t){return t.map(e=>{let r={componentPath:e.componentPath};return e.tokens!==0&&(r.expectedTokens=e.tokens,r.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(r.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(r.source=e.source),r})}s(Cgt,"computeComponentStatistics");function vD(t){return t.replace(/\r\n?/g,`
`)}s(vD,"normalizeLineEndings");function xgt(t){let e=t.elisionStrategy,r=t.elisionStrategy==="wishlist"?new UU:new qU(t.ellipsis,t.delimiter,t.elisionStrategy==="elidableTextWithoutChunks",t.aroundCursorLines);return t.approximateElision?[new WU(r,t.tokenizer,t.languageId),"approximate"+hRe(e)]:[r,e]}s(xgt,"chooseElisionStrategy");f();var HU=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Jc,i=>{n(i.telemetryData)}),r&&t.by(t.ctx,r))return t.children},"Gated");f();var jU=s((t,e)=>{let[r,n]=e.useState();if(e.useData(Jc,i=>{i.document.uri!==r?.uri&&n(i.document)}),r){let i=t.ctx.get(Rr),o=i.getRelativePath(r),a={uri:r.uri,source:r.getText(),relativePath:o,languageId:r.detectedLanguageId},l=i.findNotebook(r);return a.relativePath&&!l?kr(vgt,{docInfo:a}):kr(bgt,{docInfo:a})}},"DocumentMarker"),vgt=s(t=>kr(pl,{children:SRe(t.docInfo)}),"PathMarker"),bgt=s(t=>kr(pl,{children:_Re(t.docInfo)}),"LanguageMarker");f();f();f();function BRe(t){return Object.values(t).flatMap(e=>e.edits).sort((e,r)=>e.timestamp-r.timestamp)}s(BRe,"getAllRecentEditsByTimestamp");function DRe(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;let n=t.length-1,i=e.length-1;for(;n>=r&&i>=r&&t[n]===e[i];)n--,i--;return r>n&&r>i?null:{start:r,endPrev:n,endNew:i}}s(DRe,"findChangeSpan");function Egt(t,e,r,n,i,o,a){let l=Math.max(0,n-a),c=Math.min(r.length,o+a+1);return{file:t,pre:l,post:c,before:e.slice(l,n),removed:e.slice(n,i+1),added:r.slice(n,o+1),after:r.slice(o+1,c)}}s(Egt,"getDiff");function Igt(t){return[...t.before,...t.removed,...t.added,...t.after].reduce((r,n)=>r+n.length+1,0)}s(Igt,"measureDiffSize");function Tgt(t,e=!1,r=!1,n=!1){let i=[];i.push(`--- a/${t.file}`),i.push(`+++ b/${t.file}`);let o=t.before.length+t.removed.length+t.after.length,a=t.before.length+t.added.length+t.after.length;i.push(`@@ -${t.pre+1},${o} +${t.pre+1},${a} @@`);for(let l of t.before)i.push(" "+l);if(r)for(let l of t.added)i.push("+"+l);if(!e){let l=n?" --- IGNORE ---":"";for(let c of t.removed)i.push("-"+c+l)}if(!r)for(let l of t.added)i.push("+"+l);for(let l of t.after)i.push(" "+l);return i.join(`
`)+`
`}s(Tgt,"unifiedDiff");function wgt(t,e=!1){let{before:r,removed:n,added:i,after:o}=t,a=[];return a.push(">>>>>>> SEARCH"),a.push(...r),e?a.push("..."):a.push(...n),a.push(...o),a.push("======="),a.push(...r),a.push(...i),a.push(...o),a.push("<<<<<<<<< REPLACE"),a.join(`
`)}s(wgt,"aidersDiff");function _gt(t,e=!1){let{before:r,removed:n,added:i,after:o}=t,a=e?["..."]:n.map(d=>`${d} --- DO NOT REPLY WITH CODE FROM THIS LINE ---`),l=[...r,...a,...o],c=[...r,...i,...o],u=[];return u.push("--- User edited code: ---"),u.push(...l),a.length===0?u.push(`--- and added ${i.length} line${i.length===1?"":"s"} to make: ---`):i.length===0?u.push(`--- and deleted ${a.length} line${a.length===1?"":"s"} to make: ---`):u.push("--- and replaced it with: ---"),u.push(...c),u.push("--- End of edit ---"),u.join(`
`)}s(_gt,"findReplaceDiff");function kRe(t,e){for(let r of e){let n=t.slice(0,r.startLine),i=t.slice(r.endLine+1),o=r.diff.added?r.diff.added:[];t=[...n,...o,...i]}return t}s(kRe,"applyEditsToLines");function Sgt(t,e,r){let{added:n}=e.diff,i=e.startLine,o=e.startLine+n.length,a=t.startLine,l=t.endLine+1;return a<=o+r&&l>=i-r}s(Sgt,"editsOverlap");function Rgt(t,e,r,n,i){let o=[...e];if(o.length>0){let a=o[o.length-1];if(Sgt(r,a,i.editMergeLineDistance)){let c=kRe(t.split(`
`),o.slice(0,-1)),u=DRe(c,n);u&&(r=PRe(r.file,c,n,u,i),o=[...o.slice(0,-1),r])}else o.push(r)}else o.push(r);if(o.length>i.maxEditsPerFile){let a=o.slice(0,o.length-i.maxEditsPerFile);o=o.slice(o.length-i.maxEditsPerFile,o.length),t=kRe(t.split(`
`),a).join(`
`)}return{originalContent:t,edits:o}}s(Rgt,"updateEdits");function PRe(t,e,r,n,i){let{start:o,endPrev:a,endNew:l}=n;if(!i||typeof i.diffContextLines!="number")throw new Error("Invalid configuration passed to buildIncomingEdit");let c=Egt(t,e,r,o,a,l,i.diffContextLines);return{file:t,startLine:o,endLine:a,diff:c,timestamp:performance.now()}}s(PRe,"buildIncomingEdit");function kgt(t,e){let r={...t},n=Object.entries(t).filter(([o])=>t[o].edits.length).sort(([o,a],[l,c])=>a.edits[a.edits.length-1].timestamp-c.edits[c.edits.length-1].timestamp),i=Math.max(0,n.length-e);if(i)for(let o=0;o<i;o++){let a=n[o][0];delete r[a]}return r}s(kgt,"trimOldFilesFromState");function NRe(t={},e,r,n){if(r.length>2*1024*1024)return t;let i=t[e];if(!i)return{...t,[e]:{originalContent:r,currentContent:r,edits:[]}};if(i.currentContent===r)return t;let o=i.currentContent.split(`
`),a=r.split(`
`),l=DRe(o,a);if(!l)return{...t,[e]:{...i,currentContent:r}};let c=PRe(e,o,a,l,n);if(Igt(c.diff)>n.maxCharsPerEdit)return{...t,[e]:{originalContent:r,currentContent:r,edits:[]}};let{originalContent:u,edits:d}=Rgt(i.originalContent,i.edits,c,a,n),p={...t,[e]:{originalContent:u,currentContent:r,edits:d}};return kgt(p,n.maxFiles)}s(NRe,"recentEditsReducer");function LRe(t,e){let r=t.diff.removed.filter(o=>o.trim().length>0),n=t.diff.added.filter(o=>o.trim().length>0),i;if(e.removeDeletedLines&&n.length===0)i=null;else if(r.length===0&&n.length===0)i=null;else if(r.join("").trim()===n.join("").trim())i=null;else if(t.diff.added.length>e.maxLinesPerEdit||t.diff.removed.length>e.maxLinesPerEdit)i=null;else if(e.summarizationFormat==="aiders-diff")i=wgt(t.diff);else if(e.summarizationFormat==="diff")i=Tgt(t.diff,e.removeDeletedLines,e.insertionsBeforeDeletions,e.appendNoReplyMarker);else if(e.summarizationFormat==="find-replace")i=_gt(t.diff);else throw new Error(`Unknown summarization format: ${e.summarizationFormat}`);return i}s(LRe,"summarizeEdit");f();f();f();f();f();f();function bD(t,e="Unreachable"){throw new Error(e)}s(bD,"assertNever");function Ol(t,e="unexpected state"){if(!t)throw new vn(`Assertion Failed: ${e}`)}s(Ol,"assert");function Lu(t){if(!t()){debugger;t(),i5(new vn("Assertion Failed"))}}s(Lu,"assertFn");function yv(t,e){let r=0;for(;r<t.length-1;){let n=t[r],i=t[r+1];if(!e(n,i))return!1;r++}return!0}s(yv,"checkAdjacentItems");f();var V1=s((t,e)=>t===e,"strictEquals");f();var Fu=class{constructor(e,r,n){this.owner=e;this.debugNameSource=r;this.referenceFn=n}static{s(this,"DebugNameData")}getDebugName(e){return ORe(e,this)}},FRe=new Map,Vie=new WeakMap;function ORe(t,e){let r=Vie.get(t);if(r)return r;let n=Bgt(t,e);if(n){let i=FRe.get(n)??0;i++,FRe.set(n,i);let o=i===1?n:`${n}#${i}`;return Vie.set(t,o),o}}s(ORe,"getDebugName");function Bgt(t,e){let r=Vie.get(t);if(r)return r;let n=e.owner?Pgt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let a=e.referenceFn;if(a!==void 0&&(i=VU(a),i!==void 0))return n+i;if(e.owner!==void 0){let l=Dgt(e.owner,t);if(l!==void 0)return n+l}}s(Bgt,"computeDebugName");function Dgt(t,e){for(let r in t)if(t[r]===e)return r}s(Dgt,"findKey");var MRe=new Map,QRe=new WeakMap;function Pgt(t){let e=QRe.get(t);if(e)return e;let r=Ngt(t),n=MRe.get(r)??0;n++,MRe.set(r,n);let i=n===1?r:`${r}#${n}`;return QRe.set(t,i),i}s(Pgt,"formatOwner");function Ngt(t){let e=t.constructor;return e?e.name:"Object"}s(Ngt,"getClassName");function VU(t){let e=t.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}s(VU,"getFunctionName");f();var u2;function zU(t){u2?u2 instanceof $U?u2.loggers.push(t):u2=new $U([u2,t]):u2=t}s(zU,"addLogger");function Fs(){return u2}s(Fs,"getLogger");var $ie;function URe(t){$ie=t}s(URe,"setLogObservableFn");function qRe(t){$ie&&$ie(t)}s(qRe,"logObservable");var $U=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let r of this.loggers)r.handleObservableCreated(e)}handleOnListenerCountChanged(e,r){for(let n of this.loggers)n.handleOnListenerCountChanged(e,r)}handleObservableUpdated(e,r){for(let n of this.loggers)n.handleObservableUpdated(e,r)}handleAutorunCreated(e){for(let r of this.loggers)r.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let r of this.loggers)r.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,r,n){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,r,n)}handleAutorunStarted(e){for(let r of this.loggers)r.handleAutorunStarted(e)}handleAutorunFinished(e){for(let r of this.loggers)r.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,r,n){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,r,n)}handleDerivedCleared(e){for(let r of this.loggers)r.handleDerivedCleared(e)}handleBeginTransaction(e){for(let r of this.loggers)r.handleBeginTransaction(e)}handleEndTransaction(e){for(let r of this.loggers)r.handleEndTransaction(e)}};var WRe;function GRe(t){WRe=t}s(GRe,"_setRecomputeInitiallyAndOnChange");var HRe;function jRe(t){HRe=t}s(jRe,"_setKeepObserved");var zie;function VRe(t){zie=t}s(VRe,"_setDerivedOpts");var YU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,r){let n=r===void 0?void 0:e,i=r===void 0?e:r;return zie({owner:n,debugName:s(()=>{let o=VU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!n)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return zie({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,r){return e.add(WRe(this,r)),this}keepObserved(e){return e.add(HRe(this)),this}get debugValue(){return this.get()}},Cv=class extends YU{constructor(){super();this.observers=new Set;Fs()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(r){let n=this.observers.size;this.observers.add(r),n===0&&this.onFirstObserverAdded(),n!==this.observers.size&&Fs()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(r){let n=this.observers.delete(r);n&&this.observers.size===0&&this.onLastObserverRemoved(),n&&Fs()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let r=!!Fs();return qRe(this),r||Fs()?.handleObservableCreated(this),this}};function JU(t,e){let r=new B5(t,e);try{t(r)}finally{r.finish()}}s(JU,"transaction");function Yie(t,e,r){t?e(t):JU(e,r)}s(Yie,"subtransaction");var B5=class{constructor(e,r){this._fn=e;this._getDebugName=r;this.updatingObservers=[];Fs()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():VU(this._fn)}updateObserver(e,r){this.updatingObservers.push({observer:e,observable:r}),e.beginUpdate(r)}finish(){let e=this.updatingObservers;for(let r=0;r<e.length;r++){let{observer:n,observable:i}=e[r];n.endUpdate(i)}this.updatingObservers=null,Fs()?.handleEndTransaction(this)}};function Pm(t,e){let r;return typeof t=="string"?r=new Fu(void 0,t,void 0):r=new Fu(t,void 0,void 0),new KU(r,e,V1)}s(Pm,"observableValue");var KU=class extends Cv{constructor(r,n,i){super();this._debugNameData=r;this._equalityComparator=i;this._value=n,Fs()?.handleObservableUpdated(this,{hadValue:!1,newValue:n,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(r,n,i){if(i===void 0&&this._equalityComparator(this._value,r))return;let o;n||(n=o=new B5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(r),Fs()?.handleObservableUpdated(this,{oldValue:a,newValue:r,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)n.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(r){this._value=r}};f();f();function d2(t){return new D5(new Fu(void 0,void 0,t),t,void 0,void 0)}s(d2,"autorun");function Kie(t,e){return new D5(new Fu(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Kie,"autorunOpts");function XU(t,e){return new D5(new Fu(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(XU,"autorunHandleChanges");function Jie(t,e){let r=new Bu,n=XU({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{r.clear(),e(i,o,r)});return ka(()=>{n.dispose(),r.dispose()})}s(Jie,"autorunWithStoreHandleChanges");function Xie(t){let e=new Bu,r=Kie({owner:void 0,debugName:void 0,debugReferenceFn:t},n=>{e.clear(),t(n,e)});return ka(()=>{r.dispose(),e.dispose()})}s(Xie,"autorunWithStore");var D5=class{constructor(e,r,n,i){this._debugNameData=e;this._runFn=r;this.createChangeSummary=n;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Fs()?.handleAutorunCreated(this),this._runIfNeeded(),l5(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Fs()?.handleAutorunDisposed(this),c5(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Fs()?.handleAutorunStarted(this);let r=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,r)}catch(n){r2(n)}finally{this._isRunning=!1}}}finally{this.disposed||Fs()?.handleAutorunFinished(this);for(let r of this.dependenciesToBeRemoved)r.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Lu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,r){if(this._isDependency(e)){Fs()?.handleAutorunDependencyChanged(this,e,r);try{(this._handleChange?this._handleChange({changedObservable:e,change:r,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(n){r2(n)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new vn("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let r=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),r}};(e=>e.Observer=D5)(d2||={});f();function ZU(t,e){return new f2(new Fu(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??V1)}s(ZU,"derivedOpts");VRe(ZU);var f2=class extends Cv{constructor(r,n,i,o,a=void 0,l){super();this._debugNameData=r;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Fs()?.handleDerivedCleared(this);for(let r of this.dependencies)r.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let n;try{this._isReaderValid=!0,n=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),n}else{do{if(this.state===1){for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let r=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=r;let n=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Fs()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(a){r2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(r){if(this._isUpdating)throw new vn("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(r){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Lu(()=>this.updateCount>=0)}handlePossibleChange(r){if(this.state===3&&this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(r,n){if(this.dependencies.has(r)&&!this.dependenciesToBeRemoved.has(r)){Fs()?.handleDerivedDependencyChanged(this,r,n);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:r,change:n,didChange:s(a=>a===r,"didChange")},this.changeSummary):!0}catch(a){r2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(r){if(!this._isReaderValid)throw new vn("The reader object cannot be used outside its compute function!");r.addObserver(this);let n=r.get();return this.dependencies.add(r),this.dependenciesToBeRemoved.delete(r),n}addObserver(r){let n=!this.observers.has(r)&&this.updateCount>0;super.addObserver(r),n&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(r)?this._removedObserverToCallEndUpdateOn.delete(r):r.beginUpdate(this))}removeObserver(r){this.observers.has(r)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(r)),super.removeObserver(r)}};f();f();function Zie(...t){let e,r,n;return t.length===3?[e,r,n]=t:[r,n]=t,new xv(new Fu(e,void 0,n),r,n,()=>xv.globalTransaction,V1)}s(Zie,"observableFromEvent");var xv=class extends Cv{constructor(r,n,i,o,a){super();this._debugNameData=r;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(r=>{let n=this._getValue(r),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),a=!1;o&&(this.value=n,this.hasValue&&(a=!0,Yie(this._getTransaction(),l=>{Fs()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Fs()?.handleObservableUpdated(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let r=this.getDebugName();return"From Event"+(r?`: ${r}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(r=>{r.Observer=xv;function e(n,i){let o=!1;xv.globalTransaction===void 0&&(xv.globalTransaction=n,o=!0);try{i()}finally{o&&(xv.globalTransaction=void 0)}}r.batchEventsGlobally=e,s(e,"batchEventsGlobally")})(Zie||={});function zRe(t){let e=new eq(!1,void 0);return t.addObserver(e),ka(()=>{t.removeObserver(e)})}s(zRe,"keepObserved");jRe(zRe);function YRe(t,e){let r=new eq(!0,e);return t.addObserver(r),e?e(t.get()):t.reportChanges(),ka(()=>{t.removeObserver(r)})}s(YRe,"recomputeInitiallyAndOnChange");GRe(YRe);var eq=class{constructor(e,r){this._forceRecompute=e;this._handleValue=r;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,r){}};function k0(t,e,r,n){let i=new tq(r,n);return ZU({debugReferenceFn:r,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new tq(r)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(k0,"mapObservableArrayCached");var tq=class{constructor(e,r){this._map=e;this._keySelector=r;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let r=[],n=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)n.delete(o);else{let l=new Bu;a={out:this._map(i,l),store:l},this._cache.set(o,a)}r.push(a.out)}for(let i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=r}getItems(){return this._items}};function eoe(t,e){let r;return Jie({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((n,i)=>{if(n.didChange(t)){let o=n.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(n,i)=>{let o=t.read(n),a=r;i.didChange&&(r=o,e(o,a,i.deltas))})}s(eoe,"runOnChange");f();f();f();var rq;function KRe(t){rq||(rq=new ID,zU(rq)),rq.addFilteredObj(t)}s(KRe,"logObservableToConsole");var ID=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return Lgt([P5(Qgt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[P5(" "),np(ED(e.oldValue,70),{color:"red",strikeThrough:!0}),P5(" "),np(ED(e.newValue,60),{color:"green"})]:[P5(" (unchanged)")]:[P5(" "),np(ED(e.newValue,60),{color:"green"}),P5(" (initial)")]}handleObservableCreated(e){if(e instanceof f2){let r=e;if(this.changedObservablesSets.set(r,new Set),!1){let i=[];r.__debugUpdating=i;let o=r.beginUpdate;r.beginUpdate=l=>(i.push(l),o.apply(r,[l]));let a=r.endUpdate;r.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",r.debugName,l.debugName),i.splice(c,1),a.apply(r,[l])}}}}handleOnListenerCountChanged(e,r){}handleObservableUpdated(e,r){if(this._isIncluded(e)){if(e instanceof f2){this._handleDerivedRecomputed(e,r);return}console.log(...this.textToConsoleArgs([N5("observable value changed"),np(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r)]))}}formatChanges(e){if(e.size!==0)return np(" (changed deps: "+[...e].map(r=>r.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(r)}_handleDerivedRecomputed(e,r){if(!this._isIncluded(e))return;let n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([N5("derived recomputed"),np(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("derived cleared"),np(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,r){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("observable from event triggered"),np(e.debugName,{color:"BlueViolet"}),...this.formatInfo(r),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,r,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(r)}handleAutorunStarted(e){let r=this.changedObservablesSets.get(e);r&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("autorun"),np(e.debugName,{color:"BlueViolet"}),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),r.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let r=e.getDebugName();r===void 0&&(r=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([N5("transaction"),np(r,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function Lgt(t){let e=new Array,r=[],n="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(n+=`%c${a.text}`,e.push(a.style),a.data&&r.push(...a.data)):"data"in a&&r.push(...a.data)}s(i,"process"),i(t);let o=[n,...e];return o.push(...r),o}s(Lgt,"consoleTextToArgs");function P5(t){return np(t,{color:"black"})}s(P5,"normalText");function N5(t){return np(Ogt(`${t}: `,10),{color:"black",bold:!0})}s(N5,"formatKind");function np(t,e={color:"black"}){function r(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(r,"objToCss");let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:t,style:r(n)}}s(np,"styled");function ED(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?Fgt(t,e):Mgt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(ED,"formatValue");function Fgt(t,e){let r="[ ",n=!0;for(let i of t){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${ED(i,e-r.length)}`}return r+=" ]",r}s(Fgt,"formatArray");function Mgt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let r="{ ",n=!0;for(let[i,o]of Object.entries(t)){if(n||(r+=", "),r.length-5>e){r+="...";break}n=!1,r+=`${i}: ${ED(o,e-r.length)}`}return r+=" }",r}s(Mgt,"formatObject");function Qgt(t,e){let r="";for(let n=1;n<=e;n++)r+=t;return r}s(Qgt,"repeat");function Ogt(t,e){for(;t.length<e;)t+=" ";return t}s(Ogt,"padStr");URe(KRe);var Ugt=!1;Ugt&&zU(new ID);f();function kg(t,e,r){let n=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return XU({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=n.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}r(a)})}s(kg,"autorunWithChanges");var $1=class extends jo{constructor(r,n,i=!1){super();this.recentEditMap={};this.recentEdits=[];this.recentEditSummaries=new WeakMap;this.debounceTimeouts={};this.workspace=r,this._started=!1,this.recentEditsConfig=n,i||this.start()}static{s(this,"RecentEditsProvider")}getRecentEdits(){return this.recentEdits}getEditSummary(r){return this.recentEditSummaries.get(r)??null}updateRecentEdits(r,n){this.recentEditMap=NRe(this.recentEditMap,r,n,this.recentEditsConfig),this.recentEdits=BRe(this.recentEditMap),this.recentEdits.forEach(i=>{if(!this.recentEditSummaries.has(i)){let o=LRe(i,this.recentEditsConfig);this.recentEditSummaries.set(i,o)}})}setConfig(r){this.recentEditsConfig=r}start(){this._started||(this._started=!0,k0(this,this.workspace.openDocuments,(r,n)=>{n.add(kg(this,{value:r.value,selection:r.selection,languageId:r.languageId},i=>{if(i.value.changes.length>0){let o=i.value.previous?.value,a=i.value.value.value,l=r.id.toString();clearTimeout(this.debounceTimeouts[l]),!this.recentEditMap[l]&&o?this.updateRecentEdits(l,o):this.recentEditsConfig.debounceTimeout===0?this.updateRecentEdits(l,a):this.debounceTimeouts[l]=setTimeout(()=>{this.updateRecentEdits(l,a)},this.recentEditsConfig.debounceTimeout??500)}}))},r=>r.id).recomputeInitiallyAndOnChange(this._store))}};f();f();f();f();var p2;(r=>{r.PlainText="plaintext";function e(n){return n}r.create=e,s(e,"create")})(p2||={});f();f();var kt=class t{constructor(e,r){this.start=e;this.endExclusive=r;if(e>r)throw new vn(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,r){return new t(e,r)}static addRange(e,r){let n=0;for(;n<r.length&&r[n].endExclusive<e.start;)n++;let i=n;for(;i<r.length&&r[i].start<=e.endExclusive;)i++;if(n===i)r.splice(n,0,e);else{let o=Math.min(e.start,r[n].start),a=Math.max(e.endExclusive,r[i-1].endExclusive);r.splice(n,i-n,new t(o,a))}}static tryCreate(e,r){if(!(e>r))return new t(e,r)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,r){return new t(e,e+r)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(r<=n)return new t(r,n)}intersectionLength(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-r)}intersects(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<n}intersectsOrTouches(e){let r=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return r<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new vn(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new vn(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let r=[];for(let n=this.start;n<this.endExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.start;r<this.endExclusive;r++)e(r)}};f();var sn=class t{static{s(this,"Position")}constructor(e,r){this.lineNumber=e,this.column=r}with(e=this.lineNumber,r=this.column){return e===this.lineNumber&&r===this.column?this:new t(e,r)}delta(e=0,r=0){return this.with(this.lineNumber+e,this.column+r)}equals(e){return t.equals(this,e)}static equals(e,r){return!e&&!r?!0:!!e&&!!r&&e.lineNumber===r.lineNumber&&e.column===r.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<r.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,r){return e.lineNumber<r.lineNumber?!0:r.lineNumber<e.lineNumber?!1:e.column<=r.column}static compare(e,r){let n=e.lineNumber|0,i=r.lineNumber|0;if(n===i){let o=e.column|0,a=r.column|0;return o-a}return n-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,r,n,i){e>n||e===n&&r>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=r):(this.startLineNumber=e,this.startColumn=r,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<e.startColumn||r.lineNumber===e.endLineNumber&&r.column>e.endColumn)}static strictContainsPosition(e,r){return!(r.lineNumber<e.startLineNumber||r.lineNumber>e.endLineNumber||r.lineNumber===e.startLineNumber&&r.column<=e.startColumn||r.lineNumber===e.endLineNumber&&r.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,r){return!(r.startLineNumber<e.startLineNumber||r.endLineNumber<e.startLineNumber||r.startLineNumber>e.endLineNumber||r.endLineNumber>e.endLineNumber||r.startLineNumber===e.startLineNumber&&r.startColumn<=e.startColumn||r.endLineNumber===e.endLineNumber&&r.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,r){let n,i,o,a;return r.startLineNumber<e.startLineNumber?(n=r.startLineNumber,i=r.startColumn):r.startLineNumber===e.startLineNumber?(n=r.startLineNumber,i=Math.min(r.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),r.endLineNumber>e.endLineNumber?(o=r.endLineNumber,a=r.endColumn):r.endLineNumber===e.endLineNumber?(o=r.endLineNumber,a=Math.max(r.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(n,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,r){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=r.startLineNumber,c=r.startColumn,u=r.endLineNumber,d=r.endColumn;return n<l?(n=l,i=c):n===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),n>o||n===o&&i>a?null:new t(n,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,r){return!e&&!r?!0:!!e&&!!r&&e.startLineNumber===r.startLineNumber&&e.startColumn===r.startColumn&&e.endLineNumber===r.endLineNumber&&e.endColumn===r.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new sn(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new sn(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,r){return new t(this.startLineNumber,this.startColumn,e,r)}setStartPosition(e,r){return new t(e,r,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,r=e){return new t(e.lineNumber,e.column,r.lineNumber,r.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<e.startColumn)}static areIntersecting(e,r){return!(e.endLineNumber<r.startLineNumber||e.endLineNumber===r.startLineNumber&&e.endColumn<=r.startColumn||r.endLineNumber<e.startLineNumber||r.endLineNumber===e.startLineNumber&&r.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,r){if(e&&r){let o=e.startLineNumber|0,a=r.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=r.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=r.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=r.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(r?1:0)}static compareRangesUsingEnds(e,r){return e.endLineNumber===r.endLineNumber?e.endColumn===r.endColumn?e.startLineNumber===r.startLineNumber?e.startColumn-r.startColumn:e.startLineNumber-r.startLineNumber:e.endColumn-r.endColumn:e.endLineNumber-r.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,r){return r?e.startLineNumber<r.startLineNumber&&r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,r.startLineNumber),new t(r.endLineNumberExclusive,e.endLineNumberExclusive)]:r.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=r.endLineNumberExclusive?[]:r.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(r.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(r.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let r=new m2(e[0].slice());for(let n=1;n<e.length;n++)r=r.getUnion(new m2(e[n].slice()));return r.ranges}static join(e){if(e.length===0)throw new vn("lineRanges cannot be empty");let r=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)r=Math.min(r,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new t(r,n)}static ofLength(e,r){return new t(e,e+r)}static deserialize(e){return new t(e[0],e[1])}constructor(e,r){if(e>r)throw new vn(`startLineNumber ${e} cannot be after endLineNumberExclusive ${r}`);this.startLineNumber=e,this.endLineNumberExclusive=r}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let r=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(r<=n)return new t(r,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let r=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)r.push(e(n));return r}forEach(e){for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)e(r)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new kt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,r){return new t(this.startLineNumber-e,this.endLineNumberExclusive+r)}},m2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let r=t2(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=T0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)this._normalizedRanges.splice(r,0,e);else if(r===n-1){let i=this._normalizedRanges[r];this._normalizedRanges[r]=i.join(e)}else{let i=this._normalizedRanges[r].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(r,n-r,i)}}contains(e){let r=M1(this._normalizedRanges,n=>n.startLineNumber<=e);return!!r&&r.endLineNumberExclusive>e}intersects(e){let r=M1(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!r&&r.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let r=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[n],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,n++):(a=c,i++)}else n<this._normalizedRanges.length?(a=this._normalizedRanges[n],n++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(r.push(o),o=a)}return o!==null&&r.push(o),new t(r)}subtractFrom(e){let r=t2(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),n=T0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(r===n)return new t([e]);let i=[],o=e.startLineNumber;for(let a=r;a<n;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let r=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&r.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?n++:i++}return new t(r)}getWithDelta(e){return new t(this._normalizedRanges.map(r=>r.delta(e)))}};var Ul=class t{constructor(e,r){this.lineCount=e;this.columnCount=r}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,r){return r.isLessThan(e)?t.zero:e.lineCount===r.lineCount?new t(0,r.columnCount-e.columnCount):new t(r.lineCount-e.lineCount,r.columnCount)}static betweenPositions(e,r){return e.lineNumber===r.lineNumber?new t(0,r.column-e.column):new t(r.lineNumber-e.lineNumber,r.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let r=0,n=0;for(let i of e)i===`
`?(r++,n=0):n++;return new t(r,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new sn(e.lineNumber,e.column+this.columnCount):new sn(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var ql=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new toe(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return Rg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},toe=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=T0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new sn(n,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ul.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ul(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Bg=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(r=>r.id===e))}};var nq=class extends jo{constructor(r,n,i,o,a,l){super();this.id=r;this.workspaceRoot=l;this.value=Pm(this,n),this.selection=Pm(this,i),this.languageId=Pm(this,o),this._register(ka(a))}static{s(this,"MutableObservableDocument")}applyEdit(r,n=void 0){let i=this.value.get().apply(r);this.value.set(i,n,r)}updateSelection(r,n=void 0){this.selection.set(r,n)}};var fke=je(ii());f();f();f();f();var oq=!1,sq=!1,iq=!1,qgt=!1,Wgt=!1,JRe=!1,Ggt=!1,Hgt=!1,jgt=!1,Vgt=!1;var z1,Y1=globalThis,ip;typeof Y1.vscode<"u"&&typeof Y1.vscode.process<"u"?ip=Y1.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(ip=process);var XRe=typeof ip?.versions?.electron=="string",$gt=XRe&&ip?.type==="renderer";typeof ip=="object"?(oq=ip.platform==="win32",sq=ip.platform==="darwin",iq=ip.platform==="linux",qgt=iq&&!!ip.env.SNAP&&!!ip.env.SNAP_REVISION,Ggt=XRe,jgt=!!ip.env.CI||!!ip.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Wgt=!0):typeof navigator=="object"&&!$gt?(z1=navigator.userAgent,oq=z1.indexOf("Windows")>=0,sq=z1.indexOf("Macintosh")>=0,Hgt=(z1.indexOf("Macintosh")>=0||z1.indexOf("iPad")>=0||z1.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,iq=z1.indexOf("Linux")>=0,Vgt=z1?.indexOf("Mobi")>=0,JRe=!0):console.error("Unable to resolve platform.");var roe=0;sq?roe=1:oq?roe=3:iq&&(roe=2);var h2=oq,ZRe=sq;var zgt=JRe&&typeof Y1.importScripts=="function",iOr=zgt?Y1.origin:void 0;var Dg=z1;var Ygt=typeof Y1.postMessage=="function"&&!Y1.importScripts,oOr=(()=>{if(Ygt){let t=[];Y1.addEventListener("message",r=>{if(r.data&&r.data.vscodeScheduleAsyncWork)for(let n=0,i=t.length;n<i;n++){let o=t[n];if(o.id===r.data.vscodeScheduleAsyncWork){t.splice(n,1),o.callback();return}}});let e=0;return r=>{let n=++e;t.push({id:n,callback:r}),Y1.postMessage({vscodeScheduleAsyncWork:n},"*")}}return t=>setTimeout(t)})();var Kgt=!!(Dg&&Dg.indexOf("Chrome")>=0),sOr=!!(Dg&&Dg.indexOf("Firefox")>=0),aOr=!!(!Kgt&&Dg&&Dg.indexOf("Safari")>=0),lOr=!!(Dg&&Dg.indexOf("Edg/")>=0),cOr=!!(Dg&&Dg.indexOf("Android")>=0);var g2,noe=globalThis.vscode;if(typeof noe<"u"&&typeof noe.process<"u"){let t=noe.process;g2={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?g2={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:g2={get platform(){return h2?"win32":ZRe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var TD=g2.cwd,eke=g2.env,tke=g2.platform,hOr=g2.arch;var Xgt=65,Zgt=97,eAt=90,tAt=122,Ev=46,Wl=47,Td=92,vv=58,rAt=63,aq=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,r,n){let i;typeof r=="string"&&r.indexOf("not ")===0?(i="must not be",r=r.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${r}`;a+=`. Received type ${typeof n}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function nAt(t,e){if(t===null||typeof t!="object")throw new aq(e,"Object",t)}s(nAt,"validateObject");function ca(t,e){if(typeof t!="string")throw new aq(e,"string",t)}s(ca,"validateString");var wd=tke==="win32";function oi(t){return t===Wl||t===Td}s(oi,"isPathSeparator");function ioe(t){return t===Wl}s(ioe,"isPosixPathSeparator");function bv(t){return t>=Xgt&&t<=eAt||t>=Zgt&&t<=tAt}s(bv,"isWindowsDeviceRoot");function lq(t,e,r,n){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(n(c))break;c=Wl}if(n(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Ev||i.charCodeAt(i.length-2)!==Ev){if(i.length>2){let d=i.lastIndexOf(r);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(r)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${r}..`:"..",o=2)}else i.length>0?i+=`${r}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===Ev&&l!==-1?++l:l=-1}return i}s(lq,"normalizeString");function iAt(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(iAt,"formatExt");function rke(t,e){nAt(e,"pathObject");let r=e.dir||e.root,n=e.base||`${e.name||""}${iAt(e.ext)}`;return r?r===e.root?`${r}${n}`:`${r}${t}${n}`:n}s(rke,"_format");var ua={resolve(...t){let e="",r="",n=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ca(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=TD():(o=eke[`=${e}`]||TD(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Td)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)oi(d)&&(l=1,u=!0);else if(oi(d))if(u=!0,oi(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&oi(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!oi(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else bv(d)&&o.charCodeAt(1)===vv&&(c=o.slice(0,2),l=2,a>2&&oi(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(n){if(e.length>0)break}else if(r=`${o.slice(l)}\\${r}`,n=u,u&&e.length>0)break}return r=lq(r,!n,"\\",oi),n?`${e}\\${r}`:`${e}${r}`||"."},normalize(t){ca(t,"path");let e=t.length;if(e===0)return".";let r=0,n,i=!1,o=t.charCodeAt(0);if(e===1)return ioe(o)?"\\":t;if(oi(o))if(i=!0,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(n=`\\\\${u}\\${t.slice(c,l)}`,r=l)}}}else r=1;else bv(o)&&t.charCodeAt(1)===vv&&(n=t.slice(0,2),r=2,e>2&&oi(t.charCodeAt(2))&&(i=!0,r=3));let a=r<e?lq(t.slice(r),!i,"\\",oi):"";return a.length===0&&!i&&(a="."),a.length>0&&oi(t.charCodeAt(e-1))&&(a+="\\"),n===void 0?i?`\\${a}`:a:i?`${n}\\${a}`:`${n}${a}`},isAbsolute(t){ca(t,"path");let e=t.length;if(e===0)return!1;let r=t.charCodeAt(0);return oi(r)||e>2&&bv(r)&&t.charCodeAt(1)===vv&&oi(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,r;for(let o=0;o<t.length;++o){let a=t[o];ca(a,"path"),a.length>0&&(e===void 0?e=r=a:e+=`\\${a}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof r=="string"&&oi(r.charCodeAt(0))){++i;let o=r.length;o>1&&oi(r.charCodeAt(1))&&(++i,o>2&&(oi(r.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&oi(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ua.normalize(e)},relative(t,e){if(ca(t,"from"),ca(e,"to"),t===e)return"";let r=ua.resolve(t),n=ua.resolve(e);if(r===n||(t=r.toLowerCase(),e=n.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Td;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Td;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Td;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Td;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Td&&(p=m)}if(m!==d){if(p===-1)return n}else{if(u>d){if(e.charCodeAt(l+m)===Td)return n.slice(l+m+1);if(m===2)return n.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Td?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Td)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${n.slice(l,c)}`:(n.charCodeAt(l)===Td&&++l,n.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ua.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Td){if(e.charCodeAt(1)===Td){let r=e.charCodeAt(2);if(r!==rAt&&r!==Ev)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(bv(e.charCodeAt(0))&&e.charCodeAt(1)===vv&&e.charCodeAt(2)===Td)return`\\\\?\\${e}`;return t},dirname(t){ca(t,"path");let e=t.length;if(e===0)return".";let r=-1,n=0,i=t.charCodeAt(0);if(e===1)return oi(i)?t:".";if(oi(i)){if(r=n=1,oi(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&oi(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!oi(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(r=n=l+1)}}}}else bv(i)&&t.charCodeAt(1)===vv&&(r=e>2&&oi(t.charCodeAt(2))?3:2,n=r);let o=-1,a=!0;for(let l=e-1;l>=n;--l)if(oi(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(r===-1)return".";o=r}return t.slice(0,o)},basename(t,e){e!==void 0&&ca(e,"suffix"),ca(t,"path");let r=0,n=-1,i=!0,o;if(t.length>=2&&bv(t.charCodeAt(0))&&t.charCodeAt(1)===vv&&(r=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=r;--o){let c=t.charCodeAt(o);if(oi(c)){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=r;--o)if(oi(t.charCodeAt(o))){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ca(t,"path");let e=0,r=-1,n=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===vv&&bv(t.charCodeAt(0))&&(e=n=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(oi(c)){if(!o){n=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===Ev?r===-1?r=l:a!==1&&(a=1):r!==-1&&(a=-1)}return r===-1||i===-1||a===0||a===1&&r===i-1&&r===n+1?"":t.slice(r,i)},format:rke.bind(null,"\\"),parse(t){ca(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.length,n=0,i=t.charCodeAt(0);if(r===1)return oi(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(oi(i)){if(n=1,oi(t.charCodeAt(1))){let p=2,m=p;for(;p<r&&!oi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&oi(t.charCodeAt(p));)p++;if(p<r&&p!==m){for(m=p;p<r&&!oi(t.charCodeAt(p));)p++;p===r?n=p:p!==m&&(n=p+1)}}}}else if(bv(i)&&t.charCodeAt(1)===vv){if(r<=2)return e.root=e.dir=t,e;if(n=2,oi(t.charCodeAt(2))){if(r===3)return e.root=e.dir=t,e;n=3}}n>0&&(e.root=t.slice(0,n));let o=-1,a=n,l=-1,c=!0,u=t.length-1,d=0;for(;u>=n;--u){if(i=t.charCodeAt(u),oi(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===Ev?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==n?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},oAt=(()=>{if(wd){let t=/\\/g;return()=>{let e=TD().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>TD()})(),Pa={resolve(...t){let e="",r=!1;for(let n=t.length-1;n>=-1&&!r;n--){let i=n>=0?t[n]:oAt();ca(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,r=i.charCodeAt(0)===Wl)}return e=lq(e,!r,"/",ioe),r?`/${e}`:e.length>0?e:"."},normalize(t){if(ca(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Wl,r=t.charCodeAt(t.length-1)===Wl;return t=lq(t,!e,"/",ioe),t.length===0?e?"/":r?"./":".":(r&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ca(t,"path"),t.length>0&&t.charCodeAt(0)===Wl},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){let n=t[r];ca(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Pa.normalize(e)},relative(t,e){if(ca(t,"from"),ca(e,"to"),t===e||(t=Pa.resolve(t),e=Pa.resolve(e),t===e))return"";let r=1,n=t.length,i=n-r,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(r+u);if(p!==e.charCodeAt(o+u))break;p===Wl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Wl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(r+u)===Wl?c=u:u===0&&(c=0));let d="";for(u=r+c+1;u<=n;++u)(u===n||t.charCodeAt(u)===Wl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ca(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Wl,r=-1,n=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Wl){if(!n){r=i;break}}else n=!1;return r===-1?e?"/":".":e&&r===1?"//":t.slice(0,r)},basename(t,e){e!==void 0&&ca(e,"ext"),ca(t,"path");let r=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Wl){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=o):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Wl){if(!i){r=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":t.slice(r,n)},extname(t){ca(t,"path");let e=-1,r=0,n=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Wl){if(!i){r=a+1;break}continue}n===-1&&(i=!1,n=a+1),l===Ev?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:rke.bind(null,"/"),parse(t){ca(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let r=t.charCodeAt(0)===Wl,n;r?(e.root="/",n=1):n=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=n;--c){let d=t.charCodeAt(c);if(d===Wl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===Ev?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&r?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):r&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pa.win32=ua.win32=ua;Pa.posix=ua.posix=Pa;var AOr=wd?ua.normalize:Pa.normalize,yOr=wd?ua.isAbsolute:Pa.isAbsolute,COr=wd?ua.join:Pa.join,xOr=wd?ua.resolve:Pa.resolve,vOr=wd?ua.relative:Pa.relative,bOr=wd?ua.dirname:Pa.dirname,nke=wd?ua.basename:Pa.basename,ike=wd?ua.extname:Pa.extname,EOr=wd?ua.format:Pa.format,IOr=wd?ua.parse:Pa.parse,TOr=wd?ua.toNamespacedPath:Pa.toNamespacedPath,wOr=wd?ua.sep:Pa.sep,_Or=wd?ua.delimiter:Pa.delimiter;f();f();var aAt=/^\w[\w\d+.-]*$/,lAt=/^\//,cAt=/^\/\//;function uAt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!aAt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!lAt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(cAt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(uAt,"_validateUri");function dAt(t,e){return!t&&!e?"file":t}s(dAt,"_schemeFix");function fAt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==Nm&&(e=Nm+e):e=Nm;break}return e}s(fAt,"_referenceResolution");var $o="",Nm="/",pAt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Tv=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,r,n,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||$o,this.authority=e.authority||$o,this.path=e.path||$o,this.query=e.query||$o,this.fragment=e.fragment||$o):(this.scheme=dAt(e,a),this.authority=r||$o,this.path=fAt(this.scheme,n||$o),this.query=i||$o,this.fragment=o||$o,uAt(this,a))}get fsPath(){return ooe(this,!1)}with(e){if(!e)return this;let{scheme:r,authority:n,path:i,query:o,fragment:a}=e;return r===void 0?r=this.scheme:r===null&&(r=$o),n===void 0?n=this.authority:n===null&&(n=$o),i===void 0?i=this.path:i===null&&(i=$o),o===void 0?o=this.query:o===null&&(o=$o),a===void 0?a=this.fragment:a===null&&(a=$o),r===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new Iv(r,n,i,o,a)}static parse(e,r=!1){let n=pAt.exec(e);return n?new Iv(n[2]||$o,cq(n[4]||$o),cq(n[5]||$o),cq(n[7]||$o),cq(n[9]||$o),r):new Iv($o,$o,$o,$o,$o)}static file(e){let r=$o;if(h2&&(e=e.replace(/\\/g,Nm)),e[0]===Nm&&e[1]===Nm){let n=e.indexOf(Nm,2);n===-1?(r=e.substring(2),e=Nm):(r=e.substring(2,n),e=e.substring(n)||Nm)}return new Iv("file",r,e,$o,$o)}static from(e,r){return new Iv(e.scheme,e.authority,e.path,e.query,e.fragment,r)}static joinPath(e,...r){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return h2&&e.scheme==="file"?n=t.file(ua.join(ooe(e,!0),...r)).path:n=Pa.join(e.path,...r),e.with({path:n})}toString(e=!1){return soe(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let r=new Iv(e);return r._formatted=e.external??null,r._fsPath=e._sep===ake?e.fsPath??null:null,r}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var ake=h2?1:void 0,Iv=class extends Tv{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=ooe(this,!1)),this._fsPath}toString(r=!1){return r?soe(this,!0):(this._formatted||(this._formatted=soe(this,!1)),this._formatted)}toJSON(){let r={$mid:1};return this._fsPath&&(r.fsPath=this._fsPath,r._sep=ake),this._formatted&&(r.external=this._formatted),this.path&&(r.path=this.path),this.scheme&&(r.scheme=this.scheme),this.authority&&(r.authority=this.authority),this.query&&(r.query=this.query),this.fragment&&(r.fragment=this.fragment),r}},lke={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function oke(t,e,r){let n,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||r&&a===91||r&&a===93||r&&a===58)i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n!==void 0&&(n+=t.charAt(o));else{n===void 0&&(n=t.substr(0,o));let l=lke[a];l!==void 0?(i!==-1&&(n+=encodeURIComponent(t.substring(i,o)),i=-1),n+=l):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(t.substring(i))),n!==void 0?n:t}s(oke,"encodeURIComponentFast");function mAt(t){let e;for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);n===35||n===63?(e===void 0&&(e=t.substr(0,r)),e+=lke[n]):e!==void 0&&(e+=t[r])}return e!==void 0?e:t}s(mAt,"encodeURIComponentMinimal");function ooe(t,e){let r;return t.authority&&t.path.length>1&&t.scheme==="file"?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?r=t.path.substr(1):r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,h2&&(r=r.replace(/\//g,"\\")),r}s(ooe,"uriToFsPath");function soe(t,e){let r=e?mAt:oke,n="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Nm,n+=Nm),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?n+=r(d,!1,!1):(n+=r(d.substr(0,u),!1,!1),n+=":",n+=r(d.substr(u+1),!1,!0)),n+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?n+=r(o,!1,!0):(n+=r(o.substr(0,u),!1,!0),n+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}n+=r(a,!0,!1)}return l&&(n+="?",n+=r(l,!1,!1)),c&&(n+="#",n+=e?c:oke(c,!1,!1)),n}s(soe,"_asFormatted");function cke(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+cke(t.substr(3)):t}}s(cke,"decodeURIComponentGraceful");var ske=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function cq(t){return t.match(ske)?t.replace(ske,e=>cke(e)):t}s(cq,"percentDecode");var Lm=class t{constructor(e){this.uri=e;this._uri=Tv.parse(Ll(this.uri))}static{s(this,"DocumentId")}static{this._cache=new j1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return nke(this.uri)}get extension(){return ike(this.uri)}toUri(){return this._uri}};f();f();var op=class t{constructor(e){this.edits=e;let r=-1;for(let n of e){if(!(n.replaceRange.start>=r))throw new vn(`Edits must be disjoint and sorted. Found ${n} after ${r}`);r=n.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(Za.fromJson))}static from(e){let r=e.map(i=>new Za(kt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return r.reverse(),new t(r)}static single(e,r){return new t([new Za(e,r)])}normalize(){let e=[],r;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(r&&r.replaceRange.endExclusive===n.replaceRange.start?r=new Za(r.replaceRange.join(n.replaceRange),r.newText+n.newText):(r&&e.push(r),r=n));return r&&e.push(r),new t(e)}normalizeEOL(e){return new t(this.edits.map(r=>r.normalizeEOL(e)))}isNoop(e){return this.edits.every(r=>r.isNoop(e))}toString(){return`[${this.edits.map(r=>r.toString()).join(", ")}]`}apply(e){let r=[],n=0;for(let i of this.edits)r.push(e.substring(n,i.replaceRange.start)),r.push(i.newText),n=i.replaceRange.endExclusive;return r.push(e.substring(n)),r.join("")}compose(e){return hAt(this,e)}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(new Za(kt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new t(r)}getNewTextRanges(){let e=[],r=0;for(let n of this.edits)e.push(kt.ofStartAndLength(n.replaceRange.start+r,n.newText.length)),r+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(r.push(new Za(l.replaceRange.delta(o),l.newText)),i++):(n++,o+=a.newText.length-a.replaceRange.length):(r.push(new Za(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(r)}removeCommonSuffixPrefix(e){let r=[];for(let n of this.edits){let i=n.removeCommonSuffixPrefix(e);i.isEmpty||r.push(i)}return new t(r)}applyToOffset(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+r;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRange(e){return new kt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let r=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return;r+=n.newText.length-n.replaceRange.length}else break;return e+r}applyToOffsetRangeOrUndefined(e){let r=this.applyToOffsetOrUndefined(e.start);if(r===void 0)return;let n=this.applyToOffsetOrUndefined(e.endExclusive);if(n!==void 0)return new kt(r,n)}applyInverseToOffset(e){let r=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-r){if(e-r<n.replaceRange.start+i)return n.replaceRange.start;r+=i-n.replaceRange.length}else break}return e-r}},Za=class t{constructor(e,r){this.replaceRange=e;this.newText=r}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(kt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let r=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=AD(r,this.newText),i=Math.min(r.length-n,this.newText.length-n,S5(r,this.newText)),o=new kt(this.replaceRange.start+n,this.replaceRange.endExclusive-i),a=this.newText.substring(n,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let r=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,r)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function hAt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;r.shift(),n.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=r[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,r.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)n.push(new Za(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new Za(kt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));r.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new kt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);n.push(new Za(h,m))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return new op(n).normalize()}s(hAt,"joinEdits");f();f();var uke=-1;function L5(){return uke!==-1?uke:Date.now()}s(L5,"now");function dke(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(dke,"lineRangeDistance");f();var F5=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,r){let n=e.edits.map(i=>new K1(r.getTransformer().getRange(i.range),i.newText));return new t(n)}toEdit(e){let r=this.edits.map(n=>Ms.replace(e.getTransformer().getOffsetRange(n.range),n.newText));return xs.create(r)}mapEdits(e){return new t(this.edits.map(e))}},K1=class t{constructor(e,r){this.range=e;this.newText=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new vn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(n,i),o)}static fromSingleEdit(e,r){return new t(r.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(zt.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.newText+o;return new t(n,a)}extendToFullLine(e){let r=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}toSingleEdit(e){let n=e.getTransformer().getOffsetRange(this.range);return Ms.replace(n,this.newText)}};var No=class t{constructor(e){this.edits=e;Ol(yv(e,(r,n)=>r.lineRange.endLineNumberExclusive<=n.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(r=>Fm.deserialize(r)))}static fromEdit(e){let r=F5.fromEdit(e.edit,e.base);return t.fromTextEdit(r,e.base)}static fromTextEdit(e,r){let n=e.edits,i=[],o=[];for(let a=0;a<n.length;a++){let l=n[a],c=a+1<n.length?n[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=K1.joinEdits(o,r);o.length=0;let d=Fm.fromSingleTextEdit(u,r);i.push(d)}return new t(i)}static createFromUnsorted(e){let r=e.slice();return r.sort(w0(n=>n.lineRange.startLineNumber,_0)),new t(r)}isEmpty(){return this.edits.length===0}toEdit(e){let r=[];for(let n of this.edits){let i=n.toSingleEdit(e);r.push(i)}return xs.create(r)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],r=0;for(let n of this.edits)e.push(Yt.ofLength(n.lineRange.startLineNumber+r,n.newLines.length)),r+=n.newLines.length-n.lineRange.length;return e}mapLineNumber(e){let r=0;for(let n of this.edits){if(n.lineRange.endLineNumberExclusive>e)break;r+=n.newLines.length-n.lineRange.length}return e+r}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,r){return this.inverse(r).mapLineRange(e)}touches(e){return this.edits.some(r=>e.edits.some(n=>r.lineRange.intersect(n.lineRange)))}rebase(e){return new t(this.edits.map(r=>new Fm(e.mapLineRange(r.lineRange),r.newLines)))}humanReadablePatch(e){let r=[];function n(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");r.push(`${p} ${m} ${h} ${d}`)}s(n,"pushLine");function i(){r.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of o5(this.edits,(c,u)=>dke(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)n(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];n(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];n(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)n(u,u+o,"unmodified",e[u-1])}return r.join(`
`)}apply(e){let r=[],n=0;for(let i of this.edits){for(;n<i.lineRange.startLineNumber-1;)r.push(e[n]),n++;for(let o of i.newLines)r.push(o);n=i.lineRange.endLineNumberExclusive-1}for(;n<e.length;)r.push(e[n]),n++;return r}inverse(e){let r=this.getNewLineRanges();return new t(this.edits.map((n,i)=>new Fm(r[i],e.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1))))}},Fm=class t{constructor(e,r){this.lineRange=e;this.newLines=r}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,r){let n=Rg(e.newText),i=e.range.startLineNumber,o=r.getValueOfRange(zt.fromPositions(new sn(e.range.startLineNumber,1),e.range.getStartPosition()));n[0]=o+n[0];let a=e.range.endLineNumber+1,l=r.getTransformer().getLineLength(e.range.endLineNumber)+1,c=r.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new sn(e.range.endLineNumber,l)));n[n.length-1]=n[n.length-1]+c;let u=e.range.startColumn===r.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&n[0].length===o.length&&(i++,n.shift()),n.length>0&&i<a&&d&&n[n.length-1].length===c.length&&(a--,n.pop()),new t(new Yt(i,a),n)}toLineEdit(){return new No([this])}toSingleTextEdit(e){if(this.newLines.length===0){let r=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===r.lineCount+2){let n;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;n=new sn(o,a)}else n=new sn(1,1);let i=r.addToPosition(new sn(1,1));return new K1(zt.fromPositions(n,i),"")}else return new K1(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let r,n,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(r=o-1,n=e.getTransformer().getLineLength(r)+1,i=this.newLines.map(a=>`
`+a).join("")):(r=o,n=1,i=this.newLines.map(a=>a+`
`).join("")),new K1(zt.fromPositions(new sn(r,n)),i)}else{let r=this.lineRange.endLineNumberExclusive-1,n=e.getTransformer().getLineLength(r)+1,i=new zt(this.lineRange.startLineNumber,1,r,n),o=this.newLines.join(`
`);return new K1(i,o)}}toSingleEdit(e){let r=this.toSingleTextEdit(e),n=e.getTransformer().getOffsetRange(r.range);return Ms.replace(n,r.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let r=this.lineRange.startLineNumber,n=this.lineRange.endLineNumberExclusive,i=0;for(;r<n&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(r);)r++,i++;let o=0;for(;r<n&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(n-1);)n--,o++;return i===0&&o===0?this:new t(new Yt(r,n),this.newLines.slice(i,this.newLines.length-o))}},gAt;(e=>{function t(r){return Array.isArray(r)&&r.length===3&&typeof r[0]=="number"&&typeof r[1]=="number"&&Array.isArray(r[2])&&r[2].every(n=>typeof n=="string")}e.is=t,s(t,"is")})(gAt||={});var Pg=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedLineEdit")}static fromEdit(e){let r=No.fromEdit(e);return new t(e.base,r)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new Xc(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(n=>!n.lineRange.isEmpty||n.newLines.length>0,"isNotEmptyEdit"),r=this.edit.edits.map(n=>n.removeCommonSuffixPrefixLines(this.base)).filter(n=>e(n));return new t(this.base,new No(r))}};var xs=class t{constructor(e){this.edits=e;Ol(yv(e,(r,n)=>r.range.endExclusive<=n.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(r=>Ms.deserialize(r)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,r){return new t([Ms.replace(e,r)])}static insert(e,r){return new t([Ms.insert(e,r)])}static fromOffsetEdit(e){return new t(e.edits.map(r=>Ms.replace(r.replaceRange,r.newText)))}static compose(e){let r;for(let n of e)r===void 0?r=n:r=r.compose(n);return r??t.empty}static trySwap(e,r){let n=e.inverse((a,l)=>" ".repeat(l-a)),i=r.tryRebase(n);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new op(this.edits.map(e=>new Za(e.range,e.newText)))}compose(e){return AAt(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let r="",n=0;for(let i of this.edits)r+=e.substring(n,i.range.start),r+=i.newText,n=i.range.endExclusive;return r+=e.substring(n),r}normalize(){let e=[],r;for(let n of this.edits)if(!(n.newText.length===0&&n.range.length===0))if(r&&r.range.endExclusive===n.range.start){let i=r.data?.merge(n.data)??void 0;r=Ms.replaceWithData(r.range.join(n.range),r.newText+n.newText,i)}else r&&e.push(r),r=n;return r&&e.push(r),new t(e)}normalizeOnSource(e){let r=this.apply(e),i=Ms.replace(kt.ofLength(e.length),r).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Ms.replaceWithData(kt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new uq(i)}if(this.edits.length!==e.arrayLength)throw X8(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let r=[],n=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=n[o];r.push(a);for(let l=o;l<n.length;++l){let c=a.newText.length-a.range.length,u=n[l];n[l]=Ms.replaceWithData(kt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new uq(r)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let r=this.toOffsetEdit(),n=r.applyInverseToOffset(e.start),i=r.applyInverseToOffset(e.endExclusive);return new kt(n,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let r=0;r<this.edits.length;++r)if(!this.edits[r].equals(e.edits[r]))return!1;return!0}inverse(e){let r=[],n=0;for(let i of this.edits)r.push(Ms.replace(kt.ofStartAndLength(i.range.start+n,i.newText.length),e(i.range.start,i.range.endExclusive))),n+=i.newText.length-i.range.length;return new t(r)}inverseOnString(e){return this.inverse((r,n)=>e.substring(r,n))}mapData(e){return t.create(this.edits.map(r=>r.mapData(e)))}tryRebase(e){let r=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let a=e.edits[n],l=this.edits[i];if(l)if(!a)r.push(Ms.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(r.push(Ms.replace(l.range.delta(o),l.newText)),i++):(n++,o+=a.newText.length-a.range.length)}else break}return new t(r)}};function AAt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let r=[...t.edits],n=[],i=0;for(let o of e.edits){for(;;){let u=r[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;r.shift(),n.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=r[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,r.shift(),i+=u.newText.length-u.range.length}if(!l)n.push(Ms.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&n.push(Ms.replaceWithData(kt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Ms.replaceWithData(kt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);r.unshift(m),i-=m.newText.length-m.range.length}let p=new kt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);n.push(Ms.replaceWithData(p,o.newText,o.data))}}for(;;){let o=r.shift();if(!o)break;n.push(o)}return xs.create(n).normalize()}s(AAt,"joinEdits");var Ms=class t{constructor(e,r,n){this.range=e;this.newText=r;this.data=n}static{s(this,"SingleEdit")}static deserialize(e){return new t(new kt(e[0],e[1]),e[2],void 0)}static replace(e,r){return new t(e,r,void 0)}static insert(e,r){return new t(new kt(e,e),r,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,r,n){return new t(e,r,n)}static insertWithData(e,r,n){return new t(new kt(e,e),r,n)}static deleteWithData(e,r){return new t(e,"",r)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return xs.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let r=this.range.substring(e),n=yAt(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaStart(n),this.newText.substring(n),this.data)}removeCommonSuffix(e){let r=this.range.substring(e),n=CAt(r,this.newText);return n===0?this:t.replaceWithData(this.range.deltaEnd(-n),this.newText.substring(0,this.newText.length-n),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function yAt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];)r++;return r}s(yAt,"commonPrefixLength");function CAt(t,e){let r=0;for(;r<t.length&&r<e.length&&t[t.length-1-r]===e[e.length-1-r];)r++;return r}s(CAt,"commonSuffixLength");var Xc=class t{constructor(e,r){this.base=e;this.edit=r}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Lu(()=>null.base.equals(this.base.apply(e))),Lu(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return Pg.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},uq=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return xs.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new Ng(this.edits.map(e=>e.toEdit()))}},Ng=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return xs.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let r=e,n=[];for(let i of this.edits){let o=xs.trySwap(r,i);if(!o)return;n.push(o.e1),r=o.e2}return{edits:new t(n),editLast:r}}mapData(e){return new t(this.edits.map(r=>r.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(r=>xs.deserialize(r)))}toHumanReadablePatch(e){let r=e,n=[];for(let i of this.edits){let o=No.fromEdit(new Xc(r,i));n.push(o.humanReadablePatch(r.getLines())),r=r.apply(i)}return n.join(`
---
`)}};var wv=class extends Bg{constructor(r,n=!1){super();this._openDocuments=Pm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this._started=!1;this.ctx=r,this._started=!1,n||this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let r=this.ctx.get(Rr);for(let n of r.getTextDocumentsUnsafe())n&&this.addLspDocument(n.uri,n.clientLanguageId,n.getText());r.onDidOpenTextDocument(async n=>{this.addLspDocument(n.document.uri,n.document.languageId,n.document.text)}),r.onDidCloseTextDocument(async n=>{this.removeClosedLspDocument(n.document.uri)}),r.onDidChangeTextDocument(async n=>{this.onDidChangeLspDocument(n.document.uri,n.contentChanges)})}addLspDocument(r,n,i){let o=Lm.create(r);return this.addDocument({id:o,initialValue:i,languageId:p2.create(n)},void 0)}onDidChangeLspDocument(r,n){let i=Lm.create(r),o=this._documents.get(i);o&&o.applyLspContentChanges(n)}onUserPositionChange(r,n){let i=Lm.create(r),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(n)}removeClosedLspDocument(r){let n=Lm.create(r);this._documents.get(n)?.dispose()}addDocument(r,n=void 0){let i=this._documents.get(r.id);if(i)return i;let o=new aoe(r.id,new ql(r.initialValue??""),[],r.languageId??p2.PlainText,()=>{this._documents.delete(r.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,n,{added:[],removed:[o]})},r.workspaceRoot);return this._documents.set(r.id,o),this._openDocuments.set([...this._openDocuments.get(),o],n,{added:[o],removed:[]}),o}async getDocument(r){if(await this.ctx.get(Rr).getTextDocument(r))return this._documents.get(r)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let r of this._documents.values())r.dispose();this._documents.clear()}getWorkspaceRoot(r){return this._documents.get(r)?.workspaceRoot}},aoe=class extends nq{static{s(this,"MutableObservableLspDocument")}constructor(e,r,n,i,o,a){super(e,r,n,i,o,a)}applyLspContentChanges(e){let r=this.editFromLspContentChanges(e);this.applyEdit(r.compose(),void 0)}updateSelectionFromLspPosition(e){let r=this.value.get().getTransformer().getOffset(new sn(e.lineNumber+1,e.column+1));this.updateSelection([new kt(r,r)])}editFromLspContentChanges(e){return new Ng(e.map(n=>this.editFromLspContentChange(n)))}editFromLspContentChange(e){if(fke.TextDocumentContentChangeEvent.isIncremental(e)){let r=this.value.get().getTransformer(),n=r.getOffset(new sn(e.range.start.line+1,e.range.start.character+1)),i=r.getOffset(new sn(e.range.end.line+1,e.range.end.character+1));if(n>i)throw new vn(`Invalid range: [${n}, ${i}) from ${JSON.stringify(e.range)}`);return xs.replace(new kt(n,i),e.text)}throw new Error("Full replacement edits are not supported")}};function pke(t,e,r){return t.get(A2).safeStartIfApplicable(e,r)}s(pke,"startRecentEditsPromptFeatureIfApplicable");var mke={maxFiles:5,maxEditsPerFile:5,diffContextLines:3,editMergeLineDistance:3,maxCharsPerEdit:2e3,debounceTimeout:500,summarizationFormat:"diff",removeDeletedLines:!1,insertionsBeforeDeletions:!1,appendNoReplyMarker:!1,activeDocDistanceLimitFromCursor:100,maxLinesPerEdit:10},A2=class{constructor(e){this.ctx=e;this._started=!1;this._config=mke}static{s(this,"RecentEditsPromptFeature")}safeStartIfApplicable(e,r){this.shouldStart(e,r)&&this.safeStart(e,r)}get config(){return this._config}retrieveConfig(e,r){let n=Xr(this.ctx,ft.RecentEditsRemoveDeletedLines)??r.recentEditsRemoveDeletedLines(e),i=Xr(this.ctx,ft.InsertionsBeforeDeletions)??r.recentEditsInsertionsBeforeDeletions(e),o=Xr(this.ctx,ft.RecentEditsAppendNoReplyMarker)??r.recentEditsAppendNoReplyMarker(e),a=Xr(this.ctx,ft.RecentEditsActiveDocDistanceLimitFromCursor)??r.recentEditsActiveDocDistanceLimitFromCursor(e),l=Xr(this.ctx,ft.RecentEditsSummarizationFormat)??r.recentEditsSummarizationFormat(e),c=Xr(this.ctx,ft.RecentEditsMaxLinesPerEdit)??r.recentEditsMaxLinesPerEdit(e),u=Xr(this.ctx,ft.RecentEditsEditCount)??r.recentEditsEditCount(e),d=Xr(this.ctx,ft.RecentEditsMaxFiles)??r.recentEditsMaxFiles(e),p=Xr(this.ctx,ft.RecentEditsContextLines)??r.recentEditsContextLines(e),m=Xr(this.ctx,ft.RecentEditsEditMergeLineDistance)??r.recentEditsEditMergeLineDistance(e),h=Xr(this.ctx,ft.RecentEditsMaxCharsPerEdit)??r.recentEditsMaxCharsPerEdit(e),g=Xr(this.ctx,ft.RecentEditsDebounceTimeout)??r.recentEditsDebounceTimeout(e);return{maxFiles:d,maxEditsPerFile:u,diffContextLines:p,editMergeLineDistance:m,maxCharsPerEdit:h,debounceTimeout:g,summarizationFormat:l,removeDeletedLines:n,insertionsBeforeDeletions:i,appendNoReplyMarker:o,activeDocDistanceLimitFromCursor:a,maxLinesPerEdit:c}}setConfig(e){this._config=e,this.ctx.get($1).setConfig(this._config)}shouldStart(e,r){return this._started?!1:loe(this.ctx,r,e)}safeStart(e,r){this._started||(this._started=!0,this.setConfig(this.retrieveConfig(e,r)),this.ctx.get(wv).start(),this.ctx.get($1).start())}};function hke(t,e){let r=new wv(t,e);t.set(wv,r),t.set($1,new $1(r,mke,e)),t.set(A2,new A2(t))}s(hke,"setupRecentEditsPromptFeature");function loe(t,e,r){return Xr(t,ft.RecentEditsInPrompt)??e.recentEditsInPrompt(r)}s(loe,"isRecentEditsActive");var dq=s((t,e)=>{let r=t.get(Dt);return loe(t,r,e)},"recentEditsPredicate");function xAt(t,e=!1,r=void 0,n){if(e&&(r===void 0||n===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-r)<=n||Math.abs(o-r)<=n))}s(xAt,"editIsTooCloseToCursor");var fq=s((t,e)=>{let[r,n]=e.useState();return e.useData(Jc,i=>{if(!i.document)return;let o=i.telemetryData,a=t.ctx.get(Dt);pke(t.ctx,o,a);let l=t.ctx.get(A2).config,c=t.ctx.get($1),u=c.getRecentEdits(),d=new Set,p=t.ctx.get(Rr),m=[];for(let g=u.length-1;g>=0&&!(m.length>=l.maxEditsPerFile);g--){let y=!d.has(u[g].file);if(d.size+(y?1:0)>l.maxFiles)break;let b=u[g],E=b.file===i.document?.uri,_=E?i.position.line:void 0;if(xAt(b,E,_,l.activeDocDistanceLimitFromCursor))continue;let B=c.getEditSummary(b);if(B){d.add(b.file);let N=p.getRelativePath({uri:b.file});m.unshift(xD(`File: ${N}`)+xD(B))}}if(m.length===0){n(void 0);return}let h=xD("These are recently edited files. Do not suggest code that has been deleted.")+m.join("")+xD("End of recent edits");n(h)}),r?kr(pl,{children:r}):void 0},"RecentEdits");f();f();f();f();var coe=new Jr;function gke(t){return[...t].sort((e,r)=>{let n=coe.get(e.uri)??0;return(coe.get(r.uri)??0)-n})}s(gke,"sortByAccessTimes");var Ake=s(t=>t.get(Rr).onDidFocusTextDocument(e=>{e&&coe.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var pq=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,r,n,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>J1.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&r.startsWith("file:")&&l.uri!==r&&mq(n,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,r,n){let i=new Map,o=new Map;return i=await this.truncateDocs(gke(await this.docManager.textDocuments()),e,r,n),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function yke(t,e,r){return async function(...n){return await Promise.race([t.apply(this,n),new Promise(i=>{setTimeout(i,e,r)})])}}s(yke,"shortCircuit");f();function bAt(...t){return JSON.stringify(t,(e,r)=>typeof r=="object"?r:String(r))}s(bAt,"defaultHash");function uoe(t,e={}){let{hash:r=bAt,cache:n=new Map}=e;return function(...i){let o=r.apply(this,i);if(n.has(o))return n.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw n.delete(o),l})),n.set(o,a),a}}s(uoe,"memoize");var Cke={entries:[],traits:[]},hq={entries:new Map,traits:[]},doe=class extends Jr{constructor(r,n=2*60*1e3){super(r);this.defaultEvictionTimeMs=n;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(r){let n=this._cacheTimestamps.get(r);return n?++n.retryCount:(this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),0)}has(r){return this.isValid(r)?super.has(r):(this.deleteExpiredEntry(r),!1)}get(r){let n=super.get(r);if(this.isValid(r))return n;this.deleteExpiredEntry(r)}set(r,n){let i=super.set(r,n);return this.isValid(r)||this._cacheTimestamps.set(r,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(r){let n=this._cacheTimestamps.get(r);return n!==void 0&&Date.now()-n.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(r){this._cacheTimestamps.has(r)&&this._cacheTimestamps.delete(r),super.delete(r)}},ml=new _t("relatedFiles"),EAt=1e3,gq=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},y2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,r,n){let i=await this.getRelatedFilesResponse(e,r,n);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{ml.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){ml.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){ml.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){ml.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(lo).readFileString(e)}catch(r){ml.debug(this.context,r)}}async isContentExcluded(e,r){try{return(await this.context.get(Kc).evaluate(e,r)).isBlocked}catch(n){ml.exception(this.context,n,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},IAt=3,xke=new doe(EAt);async function vke(t,e,r,n,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,r,n)}catch(c){ml.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(xke.bumpRetryCount(e.uri)>=IAt?a=hq:a=void 0);let l=performance.now()-o;if(ml.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new gq;return a}s(vke,"getRelatedFiles");var foe=uoe(vke,{cache:xke,hash:s((t,e,r,n,i)=>`${e.uri}`,"hash")});foe=yke(foe,200,hq);async function Aq(t,e,r,n,i,o=!1){let a=t.get(y2),l=hq;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await vke(t,c,r,n,a):await foe(t,c,r,n,a)}catch(c){l=hq,c instanceof gq&&Bt(t,"getRelatedFilesList",r)}return ml.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(Aq,"getRelatedFilesAndTraits");function mq(t,e){return h8(t)===h8(e)}s(mq,"considerNeighborFile");var J1=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,r,n,i,o,a,l){let c=e.get(Rr);t.instance===void 0&&(t.instance=new pq(c));let u={...await t.instance.getNeighborFiles(r,n,t.MAX_NEIGHBOR_FILES),traits:[]};if(TAt(e,i))return u;let d=await c.getTextDocument({uri:r});if(!d)return ml.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${r}`),u;let p=c.getWorkspaceFolder(d);if(!p)return ml.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${r} is not under the workspace folder`),u;let m=await Aq(e,d,i,o,a,l);return m.entries.size===0?(ml.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${r}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,r){let n=r.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(n)?e.toString().slice(n.length):t.basename(e)}};function TAt(t,e){return t.get(Dt).excludeRelatedFiles(e)||Xr(t,ft.ExcludeRelatedFiles)}s(TAt,"isExcludeRelatedFilesActive");function bke(t,e){return t.get(Dt).includeNeighboringFiles(e)||Xr(t,ft.IncludeNeighboringFiles)}s(bke,"isIncludeNeighborFilesActive");f();f();var wAt={WorkspaceDocumentProvider:{UpdateInterval:500,Laziness:.5,MaxSupport:1e3,ProviderWeights:{recentDocumentProvider:1,relatedFilesShim:.8,fileDirectoryDocumentProvider:.2}},RecentDocumentProvider:{DebounceInterval:50,MaxClosedDocs:20,DistributionHalflife:1e3*60*5/Math.log(2),DocumentActivityWeights:{Edit:1,Focus:1,Open:1}},FileDirectoryDocumentProvider:{MaxDirectorySize:200,MaxResults:100,Decay:.5,CacheTime:1e3*60,InvalidCacheTime:1e3*60*60*24}},yq=class{constructor(e){this.ctx=e;this.params=wAt}static{s(this,"WorkspaceContextConfig")}get(e){let r=e(this.params);return r&&typeof r=="object"?JSON.parse(JSON.stringify(r)):r}getProviderWeight(e){return this.get(r=>r.WorkspaceDocumentProvider.ProviderWeights[e])}};f();f();f();function poe(t){let e=new Map;for(let{uri:r,weight:n}of t)e.set(r,(e.get(r)??0)+n);return e}s(poe,"asDistribution");function Eke(t){let e=Array.from(t.values()).reduce((n,i)=>n+Math.max(i,0),0),r=new Map;if(e>0){for(let[n,i]of t)r.set(n,Math.max(i,0)/e);return r}}s(Eke,"normalizeDistribution");var wD=class{constructor(e,r){this.ctx=e;this.config=r;this.id="workspaceDocumentProvider";this.distribution=void 0;this._documents=[];this.providers=new Map;this.interval=void 0;this._similarFiles=new Map;this.updateId=0;this.lastUpdateTime=performance.now();let n=this.config.get(i=>i.WorkspaceDocumentProvider.UpdateInterval);if(n<=0){Mr.error(this.ctx,"Workspace document provider update interval is 0, skipping updates");return}this.interval=setInterval(()=>{let i=new pn.CancellationTokenSource;q1(n).then(()=>{i.cancel(),i.dispose()}),this.forceUpdate(i.token,!0).catch(o=>{Mr.error(this.ctx,"Error resolving workspace documents:",o)})},n)}static{s(this,"WorkspaceDocumentProvider")}async forceUpdate(e,r=!1){if(this.providers.size===0)return;let n=performance.now(),i={updateId:this.updateId++,intervalTime:n-this.lastUpdateTime,resolveTime:0,updateTime:void 0,similarFilesTime:void 0,providerStatistics:[],wasCancelled:!1};this.lastUpdateTime=n;let{result:o,statistics:a}=await this.resolveAllProviders(this.documents,e),l=performance.now();if(i.resolveTime=l-n,i.providerStatistics=a,e?.isCancellationRequested&&!r){i.wasCancelled=!0,this.ctx.get(Gl).pushTelemetry(i);return}this.updateDocuments(o);let c=performance.now();i.updateTime=c-l,await this.updateSimilarFiles(),i.similarFilesTime=performance.now()-c,this.ctx.get(Gl).pushTelemetry(i)}get documents(){return[...this._documents]}getDocuments(){return Promise.resolve(this.documents)}getSimilarFiles(e){let r=Array.from(this._similarFiles.entries()).filter(([n])=>n!==e);return{docs:new Map(r)}}registerDocumentProvider(e){if(this.providers.has(e.id))throw new Error(`Document provider with id ${e.id} already registered`);let r=this.config.getProviderWeight(e.id);if(r===void 0)throw new Error(`Document provider ${e.id} not found in config`);this.providers.set(e.id,{provider:e,weight:r})}async resolveAllProviders(e,r){let n=new Map;for(let[l,{provider:c}]of this.providers.entries()){let u=c.getDocuments(e,r);n.set(l,u)}let i=await IU(n,r),o=new Map,a=[];for(let[l,c]of i.entries()){let u={id:l,status:c.status,resolutionTime:c.resolutionTime,resolvedItems:0,normalizedItems:0};if(a.push(u),c.status==="error"){Mr.error(this.ctx,`Error resolving workspace documents from provider ${l}:`,c.reason);continue}if((c.status==="none"||c.status==="partial")&&Mr.info(this.ctx,`Document provider ${l} exceeded time budget`),c.status==="partial"||c.status==="full"){u.resolvedItems=c.value.length;let d=Eke(poe(c.value));u.normalizedItems=d?d.size:0,d?o.set(l,d):Mr.info(this.ctx,`Document provider ${l} normalized to an empty distribution`)}}return{result:o,statistics:a}}updateDocuments(e){let r=new Map,n=0;for(let[a,l]of e.entries()){let c=!1,u=this.providers.get(a).weight??0;for(let[d,p]of l){let m=dM(d);if(m!==void 0){c=!0;let h=r.get(m)??0;r.set(m,h+p*u)}}c&&(n+=u)}if(n<=0){Mr.info(this.ctx,"No documents proposed by any workspace document provider");return}if(this.distribution!==void 0){let a=this.config.get(l=>l.WorkspaceDocumentProvider.Laziness);this.distribution.size==0&&(a=0);for(let[l,c]of this.distribution){let u=r.get(l)??0;r.set(l,u+c*(n*a))}}let i=this.config.get(a=>a.WorkspaceDocumentProvider.MaxSupport),o=Array.from(r.entries()).sort((a,l)=>l[1]-a[1]).slice(0,i).map(([a,l])=>({uri:a,weight:l}));this.distribution=Eke(poe(o)),this._documents=Array.from(this.distribution.entries()).map(([a,l])=>({uri:a,weight:l}))}async updateSimilarFiles(){let e=new Map,r=this.ctx.get(bn);for(let n of this._documents){let i=await r.getOrReadTextDocument(n);if(i.status!=="valid")continue;let o={relativePath:r.getRelativePath(n),uri:n.uri,source:_At(i.document.getText()),languageId:i.document.detectedLanguageId};if(e.set(n.uri,o),e.size>=f8.maxNumberOfFiles)break}this._similarFiles=e}dispose(){this.interval&&(clearInterval(this.interval),this.interval=void 0)}};function _At(t){return t.charCodeAt(0)===65279?t.slice(1):t}s(_At,"dropBOM");var Gl=class{constructor(e){this.ctx=e;this.didStart=!1;this.didDispose=!1;this.deferredStart=new Ig;this.telemetryQueue=new Jr(20);let r=e.get(m0);this.tokenEventDisposable=r.onToken(()=>{this.maybeStart()}),this.maybeStart()}static{s(this,"WorkspaceContextCoordinator")}pushTelemetry(e){this.telemetryQueue.set(e.updateId,e)}popTelemetry(){let e=Array.from(this.telemetryQueue.values());return this.telemetryQueue.clear(),e}async maybeStart(){if(this.didStart||this.didDispose)return;let e=Xr(this.ctx,ft.UseWorkspaceContextCoordinator);if(e===void 0)try{let r=await this.ctx.get(Dt).updateExPValuesAndAssignments();e=this.isEnabled(r)}catch{}e&&(this.start(),this.tokenEventDisposable.dispose())}isActive(){return this.didStart&&!this.didDispose}isEnabled(e){return Xr(this.ctx,ft.UseWorkspaceContextCoordinator)??this.ctx.get(Dt).workspaceContextCoordinator(e)}getFeature(){if(this.isActive())return{config:this.config,documentProvider:this.wdp}}async getInitializedFeature(){return await this.deferredStart.promise,this.getFeature()}start(){this.didStart=!0,this.config=new yq(this.ctx),this.wdp=new wD(this.ctx,this.config),this.deferredStart.resolve()}dispose(){this.isActive()?this.wdp.dispose():this.didDispose&&!this.didStart&&this.tokenEventDisposable.dispose(),this.didDispose=!0}};f();f();f();f();var Cq=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState([]);e.useData(Jc,async c=>{c.document.uri!==r?.uri&&o([]),n(c.document);let u=J1.defaultEmptyResult();if(!c.turnOffSimilarFiles){let p=t.ctx.get(Gl);p.isEnabled(c.telemetryData)?p.isActive()?u=(await p.getInitializedFeature()).documentProvider.getSimilarFiles(c.document.uri):p.maybeStart():u=await J1.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data)}let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=xq(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...sTe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||NU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(Rr).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await hTe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),kr(Dm,{children:[...i.map((c,u)=>kr(kAt,{snippet:c}))]})},"SimilarFiles"),kAt=s((t,e)=>kr(E5,{children:[kr(pl,{expElidableTextWeight:1,children:t.snippet.headline}),kr(Av,{expElidableTextWeight:.99,children:t.snippet.snippet})]}),"SimilarFile");f();f();var vq=s((t,e)=>{let[r,n]=e.useState(),[i,o]=e.useState();if(e.useData(Jc,a=>{a.traits!==r&&n(a.traits);let l=h8(a.document.detectedLanguageId);l!==i&&o(l)}),!(!r||r.length===0||!i))return kr(Dm,{children:[kr(pl,{expElidableTextWeight:1,children:`Consider this related information:
`}),...r.map(a=>kr(pl,{source:a,expElidableTextWeight:.99,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function Ike(t,e){return Xr(t,ft.UseSplitContextPrompt)??t.get(Dt).enablePromptContextProxyField(e)}s(Ike,"shouldUseSplitContextPrompt");function Tke(t){return kr(Dm,{children:[kr(Bie,{children:[kr(jU,{ctx:t,weight:.7,expElidableTextWeight:.9}),kr(vq,{weight:.6,expElidableTextWeight:.5}),kr(LU,{ctx:t,weight:.9,expElidableTextWeight:.7}),kr(Cq,{ctx:t,weight:.8,expElidableTextWeight:.6})]}),kr(CRe,{weight:1,expElidableTextWeight:1}),kr(Die,{children:kr(HU,{ctx:t,by:dq,children:kr(fq,{ctx:t,weight:.99,expElidableTextWeight:.9})})}),kr(yRe,{weight:1,expElidableTextWeight:1})]})}s(Tke,"splitContextCompletionsPrompt");f();var wke=0;function BAt(){wke=0}s(BAt,"resetContextIndex");function DAt(){return wke++}s(DAt,"getNextContextIndex");var bq=class extends k5{constructor(){super(...arguments);this.formatPrefix=vRe;this.formatContext=bRe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(r,n){let i=[],o=[],a=[],l=!1;if(BAt(),new R5(r,PAt).walkSnapshot((d,p,m)=>{if(d===r||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===c2.name&&(l=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.isCode,y=m.type;if(y==="suffix")o.push({value:vD(d.value),type:"suffix",weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g});else{let v=y==="prefix",b=v||d.value.endsWith(n)?d.value:d.value+n;i.push({type:v?"prefix":"context",value:vD(b),weight:m.weight,expElidableTextWeight:m.expElidableTextWeight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,isCode:g,index:v?void 0:m.index})}return!0}),!l)throw new Error(`Node of type ${c2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,expElidableTextWeight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},PAt=[...jie,(t,e,r)=>FU(t)?{...r,index:DAt()}:r];f();function _ke(t,e,r){let n=_U(r,"Trait");for(let o of n)NAt(t,e,o.data,o.providerId);return n.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(_ke,"getTraitsFromContextItems");function NAt(t,e,r,n){let i=t.get(Ql).getStatisticsForCompletion(e);r.forEach(o=>{i.addExpectations(n,[[o,"included"]])})}s(NAt,"setupExpectationsForTraits");var LAt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function Ske(t,e,r,n,i,o){if(r.length>0){let a={};a.detectedLanguageId=n,a.languageId=i;for(let c of r){let u=LAt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return Bt(e,t,l)}}s(Ske,"ReportTraitsTelemetry");f();f();f();var Eq=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let r=this.currentIndex;if(this.states[r]===void 0){let i=typeof e=="function"?e():e;this.states[r]=i}let n=s(i=>{let o=typeof i=="function"?i(this.states[r]):i;this.states[r]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[r],n]}hasChanged(){return this.stateChanged}},Iq=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,r){this.consumers.push(n=>{if(e(n))return r(n)})}async updateData(e){if(this.consumers.length>0){let r=performance.now();for(let n of this.consumers)await n(e);this.measureUpdateTime(performance.now()-r)}}};var Tq=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,r,n,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,r,n);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,r,n){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${r}[${n}]`,props:{value:e},component:e};if(FAt(e.type)){let i=e.type(e.props.children),o=r!=="$"?`[${n}]`:"",a=`${r}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(r,n,e,e.type)}}virtualizeFunctionComponent(e,r,n,i){let o=n.props.key?`["${n.props.key}"]`:`[${r}]`,a=`${e}${o}.${i.name}`,l=new hoe(this.getOrCreateLifecycleData(a)),c=i(n.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:n.props,children:p,component:n,lifecycle:l}}ensureUniqueKeys(e){let r=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&r.set(o,(r.get(o)||0)+1)}let n=Array.from(r.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(n.length>0)throw new Error(`Duplicate keys found: ${n.join(", ")}`)}collectChildPaths(e){let r=[];if(e?.children)for(let n of e.children)n&&(r.push(n.path),r.push(...this.collectChildPaths(n)));return r}cleanupState(e,r){for(let n of e)r.includes(n)||this.lifecycleData.delete(n)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new moe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,r){if(!r)throw new Error("Can't pump data into undefined node.");await r.lifecycle?.dataHook.updateData(e);for(let n of r.children||[])await this.recursivelyPumpData(e,n)}},moe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},hoe=class{constructor(e){this.lifecycleData=e;this.stateHook=new Eq(e.state),this.dataHook=new Iq(r=>{e._updateTimeMs=r})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,r){this.dataHook.useData(e,r)}isRemountRequired(){return this.stateHook.hasChanged()}};function FAt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(FAt,"isFragmentFunction");var _D=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new Tq(e)}snapshotNode(e,r){if(!e)return;if(r?.isCancellationRequested)return"cancelled";let n=[];for(let i of e.children??[]){let o=this.snapshotNode(i,r);if(o==="cancelled")return"cancelled";o!==void 0&&n.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:n,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let r=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!r)throw new Error("Invalid virtual prompt tree");let n=this.snapshotNode(r,e);return n==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:n,status:"ok"}}catch(r){return{snapshot:void 0,status:"error",error:r}}}createPipe(){return this.reconciler.createPipe()}};var Mm=class{static{s(this,"CompletionsPromptFactory")}};function wq(t,e,r){return new Aoe(new yoe(new Coe(t,e,r)))}s(wq,"createCompletionsPromptFactory");var Aoe=class extends Mm{constructor(r){super();this.delegate=r}static{s(this,"SequentialCompletionsPromptFactory")}prompt(r,n){return this.lastPromise=this.promptAsync(r,n),this.lastPromise}async promptAsync(r,n){if(await this.lastPromise,n?.isCancellationRequested)return M5;try{return await this.delegate.prompt(r,n)}catch{return xoe}}},MAt=1200,yoe=class extends Mm{constructor(r){super();this.delegate=r}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(r,n){let i=new pn.CancellationTokenSource,o=i.token;return n?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(r,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(Nke)},MAt)})])}};function Jc(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(Jc,"isCompletionRequestData");var goe={default:{promptFunction:Rke,renderer:k5},splitContext:{promptFunction:Tke,renderer:bq}};function Rke(t){return kr(Dm,{children:[kr(kie,{children:[kr(jU,{ctx:t,weight:.7,expElidableTextWeight:.9}),kr(vq,{weight:.6,expElidableTextWeight:.5}),kr(LU,{ctx:t,weight:.9,expElidableTextWeight:.7}),kr(Cq,{ctx:t,weight:.8,expElidableTextWeight:.6}),kr(HU,{ctx:t,by:dq,children:kr(fq,{ctx:t,weight:.99,expElidableTextWeight:.9})})]}),kr(yD,{weight:1,expElidableTextWeight:1})]})}s(Rke,"defaultCompletionsPrompt");var Coe=class extends Mm{constructor(r,n,i){super();this.ctx=r;this.promptOrdering=i??"default",this.virtualPrompt=n??new _D(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(r,n){try{return await this.createPromptUnsafe(r,n)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:r,completionState:n,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=xq(this.ctx,i,n.textDocument.detectedLanguageId),d=await this.failFastPrompt(n.textDocument,n.position,c??0,a);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:v}=await this.resolveContext(r,n,i,a,o);if(await this.updateComponentData(n.textDocument,n.position,h,g,i,y,l??m8,a,o,u,o?.tokenizer),a?.isCancellationRequested)return M5;let b=this.virtualPrompt.snapshot(a),E=b.status;if(E==="cancelled")return M5;if(E==="error")return this.errorPrompt(b.error);let _=this.renderer.render(b.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l??m8,suffixPercent:c??lQ,elisionStrategy:this.ctx.get(Dt).completionsElisionStrategy(i),approximateElision:this.ctx.get(Dt).approximateElision(i),languageId:n.textDocument.detectedLanguageId},a);if(_.status==="cancelled")return M5;if(_.status==="error")return this.errorPrompt(_.error);let[k,B]=Q5(_.prefix),N={..._,prefix:k},q;if(wie(this.ctx,i)){let me=j4e(_.metadata.componentStatistics);this.ctx.get(Ql).getStatisticsForCompletion(r).computeMatch(me),q=$4e(this.ctx,r,v),Mr.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(q)}'`)}let te=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,te,m,B,q)}async updateComponentData(r,n,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(r,n,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(r,n,i,o,a={}){let l=[],c,u,d=!1;if(wie(this.ctx,i)){l=await this.ctx.get(rp).resolution(r);let{textDocument:p}=n,m=l.filter(z4e);QAt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=_ke(this.ctx,r,m),Ske("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await sRe(this.ctx,r,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(r,n,i,o){if(o?.isCancellationRequested)return M5;if((await this.ctx.get(Kc).evaluate(r.uri,r.getText(),"UPDATE")).isBlocked)return Pke;if((i>0?r.getText().length:r.offsetAt(n))<Bke)return Dke}createRequestData(r,n,i,o,a,l,c,u,d,p,m){return{document:r,position:n,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(r){r.prefix.length===0&&r.suffix.length===0&&this.reset()}successPrompt(r,n,i,o,a){return{type:"prompt",prompt:{prefix:r.prefix,prefixTokens:r.prefixTokens,suffix:r.suffix,suffixTokens:r.suffixTokens,context:r.context,isFimEnabled:r.suffix.length>0},computeTimeMs:n-i,trailingWs:o,neighborSource:new Map,metadata:r.metadata,contextProvidersTelemetry:a}}errorPrompt(r){return Ta(this.ctx,r,"PromptComponents.CompletionsPromptFactory"),this.reset(),xoe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new _D(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(r){this.promptOrdering!==r&&(this.promptOrdering=r,this.reset())}completionsPrompt(){return(goe[this.promptOrdering]?.promptFunction??Rke)(this.ctx)}getRenderer(){let r=goe[this.promptOrdering]??goe.default;return new r.renderer}};function QAt(t,e,r,n){let i=["cpp","c"];return bke(t,n)||i.includes(e)||!r.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(QAt,"similarFilesEnabled");async function kke(t){try{await _te}catch(e){gv(t,e,"initializeTokenizers")}}s(kke,"waitForTokenizers");var Bke=10,Dke={type:"contextTooShort"},Pke={type:"copilotContentExclusion"},xoe={type:"promptError"},M5={type:"promptCancelled"},Nke={type:"promptTimeout"};function Q5(t){let e=t.split(`
`),r=e[e.length-1],n=r.length-r.trimEnd().length,i=t.slice(0,t.length-n),o=t.slice(i.length);return[r.length==n?i:t,o]}s(Q5,"trimLastLine");function O5(t,e,r,n,i,o={}){let l=t.get(Rr).findNotebook(r.textDocument),c=l?.getCellFor(r.textDocument);l&&c&&(r=UAt(r,l,c)),n.extendWithConfigProperties(t),n.sanitizeKeys();let u=Ike(t,n);return t.get(Mm).prompt({completionId:e,completionState:r,telemetryData:n,promptOpts:{...o,separateContext:u}},i)}s(O5,"extractPrompt");function OAt(t,e){let r=t.document.detectedLanguageId,n=t.document.getText();return r===e?n:GU(n,e)}s(OAt,"addNeighboringCellsToPrompt");function UAt(t,e,r){let i=e.getCells().filter(l=>l.index<r.index&&mq(r.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>OAt(l,r.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(UAt,"applyEditsForNotebook");function xq(t,e,r){let i=t.get(Dt).maxPromptCompletionTokens(e)-xU(t),o=iRe(e,r),a=NU(t,e,r),l={maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o},c=t.get(Dt).suffixPercent(e),u=t.get(Dt).suffixMatchThreshold(e);return c>0&&u>0&&(l={...l,suffixPercent:c,suffixMatchThreshold:u}),l}s(xq,"getPromptOptions");f();f();var Lke=2.98410452738298,Fke=-.838732736843507,Mke=1.50314646255716,Qke=-.237798634012662,_q={python:.314368072478742},Oke={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var qAt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function WAt(t,e){let r=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),n=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(r),o=e.get(n);return o+(i-o)*(t-n)/(r-n)}s(WAt,"linearInterpolation");var U5=class{static{s(this,"Regressor")}constructor(e,r,n){this.name=e,this.coefficient=r,this.transformation=n||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},voe=class{constructor(e,r,n){this.link=qAt;if(this.intercept=e,this.coefficients=r,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),n)for(let i in n)this.logitsToQuantiles.set(n[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,r){let n=this.intercept;for(let i of this.coefficients){let o=r[i.name];if(o===void 0)return NaN;n+=i.contribution(o)}return this.link.link(n)}quantile(e,r){let n=this.predict(e,r);return WAt(n,this.logitsToQuantiles)}},Uke=new voe(Lke,[new U5("compCharLen",Fke,t=>Math.log(1+t)),new U5("meanLogProb",Mke),new U5("meanAlternativeLogProb",Qke)].concat(Object.entries(_q).map(t=>new U5(t[0],t[1]))),Oke);function qke(t,e){let r={...e.measurements};return Object.keys(_q).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),Uke.predict(t,r)}s(qke,"ghostTextScoreConfidence");function Wke(t,e){let r={...e.measurements};return Object.keys(_q).forEach(n=>{r[n]=e.properties["customDimensions.languageId"]==n?1:0}),Uke.quantile(t,r)}s(Wke,"ghostTextScoreQuantile");f();f();var GAt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function Sq(t){let e=t.slice();return e.reverse(),Gke(e)||Gke(e.filter(r=>r.trim().length>0))}s(Sq,"isRepetitive");function Gke(t){let e=HAt(t);for(let r of GAt){if(t.length<r.last_tokens_to_consider)continue;if(r.last_tokens_to_consider-1-e[r.last_tokens_to_consider-1]<=r.max_token_sequence_length)return!0}return!1}s(Gke,"isRepeatedPattern");function HAt(t){let e=Array(t.length).fill(0);e[0]=-1;let r=-1;for(let n=1;n<t.length;n++){for(;r>=0&&t[r+1]!==t[n];)r=e[r];t[r+1]===t[n]&&r++,e[n]=r}return e}s(HAt,"kmp_prefix_function");function jAt(t,e,r,n){let i="}";try{i=pTe(e.detectedLanguageId)??"}"}catch{}return VAt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},r,n,i)}s(jAt,"maybeSnipCompletion");function VAt(t,e,r,n){let i=$At(r),o=i.lines;if(o.length===1)return r;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===n))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return r}s(VAt,"maybeSnipCompletionImpl");function $At(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s($At,"splitByNewLine");function zAt(t,e,r,n){let i="",o=e.line+1,a=n?r.trim():r;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,n&&(i=i.trim()),i===a)return!0;o++}return!1}s(zAt,"matchesNextLine");function SD(t,e,r,n,i,o){if(Sq(n.tokens)){let l=an.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Bt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...n};if(zAt(e,r,a.completionText,!i)){let l=an.createAndMarkAsIssued();l.extendWithRequestId(n.requestId),Bt(t,"completion.alreadyInDocument",l),Bt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=jAt(t,e,r,a.completionText),a.completionText?a:void 0}s(SD,"postProcessChoiceInContext");function Hke(t,e,r){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(r.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=r.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(Hke,"checkSuffix");var zke=je(Ex());var co=new _t("ghostText");var KAt=200,jke=20;async function Yke(t,e,r,n,i,o,a){co.debug(t,`Getting ${o} from network`),r=r.extendedBy();let l=e.isCycling?3:1,c=C5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:CTe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=Xr(t,ft.ModelAlwaysTerminatesSingleline)??t.get(Dt).modelAlwaysTerminatesSingleline(r),m=e.blockMode==="moremultiline"&&Bm.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(r.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(Id).fetchAndStreamCompletions(t,y,r,i,n);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Xs(r)}:v.type==="canceled"?(co.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:Tg(r)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Lc(y))return{type:"canceled",reason:"network request aborted",telemetryData:Tg(r,{cancelledNetworkRequest:!0})};if(co.exception(t,y,"Error on ghost text request"),t.get(Iu).notifyUser(t,y),L_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Xs(r)}}}s(Yke,"genericGetCompletionsFromNetwork");function boe(t,e,r){if(r||(r=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&r.findIndex(n=>n.completionText.trim()===t.completionText.trim())===-1)return e.requestForNextLine&&(t.completionText=`
`+t.completionText),t}s(boe,"postProcessChoices");async function JAt(t,e,r,n,i){return Yke(t,e,r,n,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return co.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Xs(r)};if(n?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:Tg(r)};let d=u.value;if(d===void 0)return co.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Xs(r)};Jke(t,"performance",d,o,a),co.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=boe(d,e);p&&(Rq(t,e,p),co.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;co.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=boe(g,e,h);y&&(h.push(y),Rq(t,e,y))}})();return rm(t)&&await m,p?{type:"success",value:[Eoe(p,{forceSingleLine:!1}),m],telemetryData:Xs(r),telemetryBlob:r,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Xs(r)}})}s(JAt,"getCompletionsFromNetwork");async function XAt(t,e,r,n,i){return Yke(t,e,r,n,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(n?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:Tg(r)};let d=boe(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)Rq(t,e,u);Jke(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:Xs(r),telemetryBlob:r,resultType:3}})}s(XAt,"getAllCompletionsFromNetwork");function Eoe(t,e){let r={...t};if(e.forceSingleLine){let{completionText:n}=r,i=n.match(/^\r?\n/);i?r.completionText=i[0]+n.split(`
`)[1]:r.completionText=n.split(`
`)[0]}return r}s(Eoe,"makeGhostAPIChoice");function Vke(t){return e=>{let r=e?.split(`
`)??[];if(r.length>t+1)return r.slice(0,t+1).join(`
`).length}}s(Vke,"takeNLines");async function ZAt(t,e,r,n,i,o,a,l,c,u,d){let p=t.get(bm).forLanguage(t,e.textDocument.detectedLanguageId,d);switch(p){case"server":return a&&u?{blockMode:"parsing",requestMultiline:!0,finishedCb:Vke(1),stop:[`

`],maxTokens:jke}:{blockMode:"server",requestMultiline:!0,finishedCb:s(m=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let m;try{m=await a1t(t,p,e.textDocument,e.position,o,l,c,n)}catch{m={requestMultiline:!1}}if(m.requestMultiline){let h;return n.trailingWs.length>0&&!n.prompt.prefix.endsWith(n.trailingWs)?h=Vo.position(e.position.line,Math.max(e.position.character-n.trailingWs.length,0)):h=e.position,{blockMode:p,requestMultiline:!0,...$ke(t,p,e.textDocument,h,m.blockPosition,r,c,!0,n.prompt,d)}}if(a&&(u||p==="moremultiline")){let h={blockMode:"parsing",requestMultiline:!0,finishedCb:Vke(1),stop:[`

`],maxTokens:jke};return p==="moremultiline"&&(h.blockMode="moremultiline"),h}return{blockMode:p,requestMultiline:!1,...$ke(t,p,e.textDocument,e.position,m.blockPosition,r,c,!1,n.prompt,d)}}}}s(ZAt,"getGhostTextStrategy");function $ke(t,e,r,n,i,o,a,l,c,u){if(l&&e==="moremultiline"&&Bm.isSupported(r.detectedLanguageId)){let d=i==="empty-block"||i==="block-end"?t.get(Dt).longLookaheadSize(u):t.get(Dt).shortLookaheadSize(u);return{finishedCb:new vU(t,o,r.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:o+m,prompt:{...c,prefix:c.prefix+m}};Rq(t,g,h)}).getFinishedCallback(),maxTokens:KAt}}return{finishedCb:l?pD(t,r,n,a):d=>{}}}s($ke,"buildFinishedCallback");var e1t={isCycling:!1,promptOnly:!1,isSpeculative:!1};async function t1t(t,e,r,n,i,o){let a=n.issuedTime,l=[];function c(b){let E=Ks();l.push([b,E-a]),a=E}s(c,"recordPerformance"),c("telemetry");let u=t.get(Dt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Xs(n)};let d=n1t(e.textDocument,e.position);if(d===void 0)return co.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Xs(n)};let p=i,m=new pn.CancellationTokenSource;i=m.token;let h=Kx(t,n),g={...e1t,...o,tokenizer:h.tokenizer},y=await O5(t,r,e,n,i,g);return c("prompt"),y.type==="copilotContentExclusion"?(co.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Xs(n)}):y.type==="contextTooShort"?(co.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Xs(n)}):y.type==="promptError"?(co.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Xs(n)}):g.promptOnly?{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y}:y.type==="promptCancelled"?(co.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Xs(n)}):y.type==="promptTimeout"?(co.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Xs(n)}):y.prompt.prefix.length===0&&y.prompt.suffix.length===0?(co.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Xs(n)}):i?.isCancellationRequested?(co.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:Xs(n)}):t.get(Ki).withProgress(async()=>{let[b]=Q5(e.textDocument.getText(Vo.range(Vo.position(0,0),e.position))),E=u.triggerCompletionAfterAccept(n),_=t.get(_d).hasAcceptedCurrentCompletion(b,y.prompt.suffix),k=Xr(t,ft.MultilineAfterAccept)??u.enableMultilineAfterAccept(n),B=(Xr(t,ft.AlwaysRequestMultiline)??u.enableProgressiveReveal(n))&&Bm.isSupported(e.textDocument.detectedLanguageId),N=E&&!k&&!B?_:void 0,q=y.prompt;N&&(y.prompt={...y.prompt,prefix:y.prompt.prefix+`
`});let te=await ZAt(t,e,b,y,g.isCycling,d,_,g.isSpeculative,N??!1,k,n);if(c("strategy"),i?.isCancellationRequested)return co.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:Xs(n)};let me=r1t(t,b,q,te.requestMultiline);c("cache");let oe=Jx(t,e.textDocument.uri),H={blockMode:te.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:oe,engineModelId:h.modelId,ourRequestId:r,prefix:b,prompt:y.prompt,multiline:te.requestMultiline,indentation:mD(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,requestForNextLine:N,stop:te.stop,maxTokens:te.maxTokens};H.headers={...H.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let O=f1t(t,e.textDocument,H,e.position,y,n,h,g);if(me===void 0&&!g.isCycling&&t.get(bd).shouldWaitForAsyncCompletions(b,y.prompt)){let fe=await t.get(bd).getFirstMatchingRequestWithTimeout(r,b,y.prompt,g.isSpeculative,O);if(c("asyncWait"),fe){let he=!te.requestMultiline;me=[[Eoe(fe[0],{forceSingleLine:he})],4]}if(p?.isCancellationRequested)return co.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Xs(O)}}let le=te.blockMode==="moremultiline"&&Bm.isSupported(e.textDocument.detectedLanguageId);if(me!==void 0&&(me[0]=me[0].map(fe=>SD(t,e.textDocument,e.position,fe,le,co)).filter(fe=>fe!==void 0)),me!==void 0&&me[0].length===0)return co.debug(t,`Found empty inline suggestions locally via ${x5(me[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Xs(O)};if(me!==void 0&&me[0].length>0&&(!g.isCycling||me[0].length>1))co.debug(t,`Found inline suggestions locally via ${x5(me[1])}`);else{if(g.isCycling){let fe=await XAt(t,H,O,i,te.finishedCb);if(fe.type==="success"){let he=me?.[0]??[];fe.value[0].forEach(Ne=>{he.findIndex(Re=>Re.completionText.trim()===Ne.completionText.trim())===-1&&he.push(Ne)}),me=[he,3]}else if(me===void 0)return fe}else{if(i?.isCancellationRequested)return co.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:Tg(O)};let he=JAt(t,H,O,i,s((Re,Je)=>(t.get(bd).updateCompletion(r,Re),te.finishedCb(Re,Je)),"finishedCb"));t.get(bd).queueCompletionRequest(r,b,y.prompt,m,he);let Ne=await t.get(bd).getFirstMatchingRequest(r,b,y.prompt,g.isSpeculative);if(Ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Xs(O)};me=[[Ne[0]],4]}c("network")}if(me===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Xs(O)};let[ie,j]=me,W=ie.map(fe=>SD(t,e.textDocument,e.position,fe,le,co)).filter(fe=>fe!==void 0),Y=[];for(let fe of W){let he=d1t(t,e.textDocument,H,fe,O),Ne=d?Hke(e.textDocument,e.position,fe):0,Je={completion:l1t(fe.choiceIndex,fe.completionText,y.trailingWs),telemetry:he,isMiddleOfTheLine:d,suffixCoverage:Ne,copilotAnnotations:fe.copilotAnnotations};Y.push(Je)}if(p?.isCancellationRequested)return co.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:Tg(O)};O.properties.clientCompletionId=Y?.[0]?.telemetry?.properties.clientCompletionId,O.measurements.foundOffset=Y?.[0]?.telemetry?.measurements?.foundOffset??-1,co.debug(t,`Produced ${Y.length} results from ${x5(j)} at ${O.measurements.foundOffset} offset`);let ee=Xr(t,ft.CompletionsDelay)??u.completionsDelay(n),pe=Ks()-n.issuedTime,re=Math.max(ee-pe,0);return j!==2&&!g.isCycling&&re>0&&(co.debug(t,`Waiting ${re}ms before returning completion`),await q1(re),p?.isCancellationRequested)?(co.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:Tg(O)}):r!==t.get(_d).currentRequestId?(co.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:Tg(O)}):(g.isSpeculative||t.get(_d).setGhostText(b,y.prompt.suffix,W,j),c("complete"),{type:"success",value:[Y,j],telemetryData:Xs(O),telemetryBlob:O,resultType:j,performanceMetrics:l})})}s(t1t,"getGhostTextWithoutAbortHandling");async function Ioe(t,e,r,n){let i=sr();t.get(_d).currentRequestId=i;let o=await u1t(t,e.textDocument,i,n);try{return t.get(rp).schedule(e,i,o,r,n),t.get(Eg).notifyRequest(e,i,o,r,n),await t1t(t,e,i,o,r,n)}catch(a){if(Lc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:Tg(o,{cancelledNetworkRequest:!0})};throw a}}s(Ioe,"getGhostText");function r1t(t,e,r,n){let i=t.get(_d).getCompletionsForUserTyping(e,r.suffix),o=c1t(t,e,r.suffix,n);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(r1t,"getLocalInlineSuggestion");function n1t(t,e){let r=i1t(e,t),n=o1t(e,t);return r&&!n?void 0:r&&n}s(n1t,"isInlineSuggestion");function i1t(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(i1t,"isMiddleOfTheLine");function o1t(t,e){let n=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(n)}s(o1t,"isValidMiddleOfTheLinePosition");function s1t(t,e){return e.lineAt(t).text.trim().length===0}s(s1t,"isNewLine");var X1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function a1t(t,e,r,n,i,o,a,l){if(t.get(X1).requestMultilineOverride)return{requestMultiline:!0};if(r.lineCount>=8e3)Bt(t,"ghostText.longFileMultilineSkip",an.createAndMarkAsIssued({languageId:r.detectedLanguageId,lineCount:String(r.lineCount),currentLine:String(n.line)}));else{if(e=="moremultiline"&&Bm.isSupported(r.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await a4e(r,n)}:{requestMultiline:!1};if(a){let d=mD(r,n),p=d.current>0?r.lineAt(n).text[0]:void 0,m={range:{start:n,end:n},newText:`
`+(p?p.repeat(d.current):"")};r=r.applyEdits([m])}if(["typescript","typescriptreact"].includes(r.detectedLanguageId)&&s1t(n,r))return{requestMultiline:!0};let u=!1;return!i&&y0(r.detectedLanguageId)?u=await PU(r,n):i&&y0(r.detectedLanguageId)&&(u=await PU(r,n)||await PU(r,r.lineAt(n).range.end)),u||["javascript","javascriptreact","python"].includes(r.detectedLanguageId)&&(u=d4e(l.prompt,r.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}s(a1t,"shouldRequestMultiline");function Rq(t,e,r){t.get(km).append(e.prefix,e.prompt.suffix,r)}s(Rq,"appendToCache");function l1t(t,e,r){if(r.length>0){if(e.startsWith(r))return{completionIndex:t,completionText:e,displayText:e.substring(r.length),displayNeedsWsOffset:!1};{let n=e.substring(0,e.length-e.trimStart().length);return r.startsWith(n)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(l1t,"adjustLeadingWhitespace");function c1t(t,e,r,n){let i=t.get(km).findAll(e,r);return i.length===0?(co.debug(t,"Found no completions in cache"),[]):(co.debug(t,`Found ${i.length} completions in cache`),i.map(o=>Eoe(o,{forceSingleLine:!n})))}s(c1t,"getCompletionsFromCache");async function u1t(t,e,r,n){let i={headerRequestId:r};n?.opportunityId&&(i.opportunityId=n.opportunityId),n?.selectedCompletionInfo?.text&&(i.completionsActive="true"),n?.isSpeculative&&(i.reason="speculative");let o=an.createAndMarkAsIssued(i);return await t.get(Dt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(u1t,"createTelemetryWithExp");function d1t(t,e,r,n,i){let o=n.requestId,a={choiceIndex:n.choiceIndex.toString(),clientCompletionId:n.clientCompletionId};n.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(n.generatedChoiceIndex+1)+n.choiceIndex).toString());let l=n.completionText.split(`
`).length,c={compCharLen:n.completionText.length,numLines:r.requestForNextLine?l-1:l};n.meanLogProb&&(c.meanLogProb=n.meanLogProb),n.meanAlternativeLogProb&&(c.meanAlternativeLogProb=n.meanAlternativeLogProb);let u=n.telemetryData.extendedBy(a,c);return u.issuedTime=i.issuedTime,u.measurements.timeToProduceMs=performance.now()-i.issuedTime,Kke(u,e),u.extendWithRequestId(o),u.measurements.confidence=qke(t,u),u.measurements.quantile=Wke(t,u),co.debug(t,`Extended telemetry for ${n.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}s(d1t,"telemetryWithAddData");function f1t(t,e,r,n,i,o,a,l){let c={languageId:e.detectedLanguageId};r.requestForNextLine!==void 0&&(c.requestForNextLine=r.requestForNextLine.toString()),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);Kke(u,e);let d=r.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(r.multiline),u.properties.isCycling=JSON.stringify(r.isCycling);let p=e.lineAt(n.line),m=e.getText(Vo.range(p.range.start,n)),h=e.getText(Vo.range(n,p.range.end)),g=Array.from(i.neighborSource.entries()).map(_=>[_[0],_[1].map(k=>(0,zke.SHA256)(k).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:r.blockMode},v={...RS(i.prompt),promptEndPos:e.offsetAt(n),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=t.get(Gl);if(b.isActive()){let _=b.popTelemetry();_.length>0&&(y.workspaceContextStatsJson=JSON.stringify(_))}let E=u.extendedBy(y,v);return Bt(t,"ghostText.issued",E),u}s(f1t,"telemetryIssued");function Kke(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(Kke,"addDocumentTelemetry");function Jke(t,e,r,n,i){let o=Date.now()-n,a=o-i,l=r.telemetryData.extendedBy({},{completionCharLen:r.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:r.meanLogProb||NaN,meanAlternativeLogProb:r.meanAlternativeLogProb||NaN});l.extendWithRequestId(r.requestId),Bt(t,`ghostText.${e}`,l)}s(Jke,"telemetryPerformance");var _d=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,r,n,i){i!==2&&(this.prefix=e,this.suffix=r,this.choices=n)}getCompletionsForUserTyping(e,r){let n=this.getRemainingPrefix(e,r);if(n!==void 0&&Xke(this.choices[0].completionText,n))return p1t(this.choices,n)}hasAcceptedCurrentCompletion(e,r){let n=this.getRemainingPrefix(e,r);if(n===void 0)return!1;let i=n===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,r){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===r&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function p1t(t,e){return t.filter(r=>Xke(r.completionText,e)).map(r=>({...r,completionText:r.completionText.substring(e.length)}))}s(p1t,"adjustChoicesStart");function Xke(t,e){return t.startsWith(e)&&t.length>e.length}s(Xke,"startsWithAndExceeds");f();f();f();var C2=class{constructor(e,r,n){this._referenceCount=0;this._isDisposed=!1;this._offset=n;let i=e.get(Rr);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===r){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,r){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},r)}};f();var Toe=class t{constructor(e,r,n=[],i,o,a){this._textDocument=e;this._position=r;this.originalPosition=i??pn.Position.create(r.line,r.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...n]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,r,n){return new t(e,r,n??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(n=>n.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let r={range:e.range,newText:e.text};return this.applyEdits([r],!0)}applyEdits(e,r=!1){if(r&&e.length>1)throw new Error("Selected completion info should be a single edit");let n=this._textDocument,i=this._position,o=n.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=n.getText(l),d=n.offsetAt(l.end);if(n=n.applyEdits([{range:l,newText:c}]),o<n.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:pn.Position.create(i.line,i.character)};r&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=n.positionAt(o);let p={range:l,newText:c,positionAfterEdit:pn.Position.create(i.line,i.character)};r&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(n,i,a)}};function Lg(t,e){return new Toe(t,e)}s(Lg,"createCompletionState");f();function woe(t,e,r=(n,i)=>n===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let n=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?n[u]=1:n[u]=r(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=n,n=d,d=a,a=i,i=d,l=e[u],n[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+n[p-1],g=r(t[p-1],l,p-1,u)+o[p-1];n[p]=Math.min(h,m,g),n[p]===g?i[p]=a[p-1]:n[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)n[u]<n[c]&&(c=u);return{distance:n[c],startOffset:i[c],endOffset:c}}s(woe,"editDistance");function m1t(){return new Map}s(m1t,"emptyLexDictionary");function h1t(t){let e=new Array(t.size);for(let[r,n]of t)e[n]=r;return e}s(h1t,"reverseLexDictionary");function*g1t(t){let e="",r;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(r||={});let n=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===n&&o!==2?e+=i:(e.length>0&&(yield e),e=i,n=o)}e.length>0&&(yield e)}s(g1t,"lexGeneratorWords");function Zke(t,e,r,n){let i=[],o=0;for(let a of r(t))n(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(Zke,"lexicalAnalyzer");function e3e(t){return t!==" "}s(e3e,"notSingleSpace");function t3e(t,e,r=g1t){let[n,i]=Zke(t,m1t(),r,e3e),[o,a]=Zke(e,i,r,e3e);if(o.length===0||n.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:n.length,needleLexLength:o.length};let l=h1t(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[n[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=woe(n.map(y=>y[0]),o.map(y=>y[0]),p),h=n[m.startOffset][1],g=m.endOffset<n.length?n[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:n.length,needleLexLength:o.length}}s(t3e,"lexEditDistance");f();function r3e(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(r3e,"computeCompCharLen");function n3e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(n3e,"computeCompletionText");function i3e(t,e,r){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||r===3?e:e-t.range.end.character+t.range.start.character}s(i3e,"computePartialLength");var _v=new _t("postInsertion"),o3e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],s3e=50,A1t=1500,y1t=.5,C1t=500,_oe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function a3e(t,e,r,n,i){let o=await t.get(bn).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return _v.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,n),u=a.positionAt(n),d=await O5(t,r.properties.headerRequestId,Lg(a,u),r),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(n,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(n),h=Sie(c,n,a.detectedLanguageId),y=await tRe(h,void 0)(m),v=Math.min(l.length,n+(y?y*2:C1t)),b=l.substring(n,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(a3e,"captureCode");function kq(t,e,r,n,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{_v.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),k4e(t,e,u)});let o=new C2(t,n,r-1),a=new C2(t,n,r),l=s(async c=>{_v.debug(t,`Original offset: ${r}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await a3e(t,n,u,o.offset+1,a.offset),h;d.isFimEnabled?h={hypotheticalPromptPrefixJson:JSON.stringify(d.prefix),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)}:h={hypotheticalPromptJson:JSON.stringify(d.prefix)};let g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:r,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});_v.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),Bt(t,e+".capturedAfterRejected",g,1)},"checkInCode");o3e.filter(c=>c.captureRejection).map(c=>o.push(Eu(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(kq,"postRejectionTasks");function x2(t,e,r,n,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:r3e(a,r)});_v.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),R4e(t,e,c);let u=r;r=n3e(r,a);let d=r.trim(),p=new C2(t,i,n),m=new C2(t,i,n+r.length),h=s(async g=>{await E1t(t,e,d,n,i,g,c,p,m)},"stillInCodeCheck");if(_oe.triggerPostInsertionSynchroneously&&rm(t)){let g=h({seconds:0,captureCode:_oe.captureCode,captureRejection:_oe.captureRejection});t.get(va).register(g)}else o3e.map(g=>p.push(Eu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Eu(t,x1t,"post insertion citation check")(t,i,u,r,n,l)}s(x2,"postInsertionTasks");async function x1t(t,e,r,n,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(Rr).getTextDocument({uri:e});if(a){let l=Soe(a.getText(),n,s3e,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=v1t(r.length,n.length,l.start_offset);if(c===void 0){_v.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+b1t(r.length,n.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(I0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(x1t,"citationCheck");function v1t(t,e,r){if(!(e<t&&r>e))return r}s(v1t,"computeCitationStart");function b1t(t,e,r){return e<t?Math.min(r,e):r}s(b1t,"computeCitationEnd");function Soe(t,e,r,n){let i=t.substring(Math.max(0,n-r),Math.min(t.length,n+e.length+r)),o=t3e(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=woe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,n-r),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=y1t?1:0}}s(Soe,"find");async function E1t(t,e,r,n,i,o,a,l,c){let u=await t.get(bn).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=Soe(p,r,s3e,l.offset);m.stillInCodeHeuristic||(m=Soe(p,r,A1t,l.offset)),_v.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${r}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${n}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:n,trackedOffset:l.offset}).extendedBy({},m);if(Bt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await a3e(t,i,h,l.offset,c.offset),b;g.isFimEnabled?b={hypotheticalPromptPrefixJson:JSON.stringify(g.prefix),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)}:b={hypotheticalPromptJson:JSON.stringify(g.prefix)};let E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:n,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});_v.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),Bt(t,e+".capturedAfterAccepted",E,1)}}}s(E1t,"checkStillInCode");var Roe=new _t("ghostText"),Mu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},r){this.#t=e,this.#e=r,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function I1t(t){let e=[];return t.shownCompletions.forEach(r=>{if(r.displayText&&r.telemetry){let n,i;t.partiallyAcceptedLength?(n=r.displayText.substring(t.partiallyAcceptedLength-1),i=r.telemetry.extendedBy({compType:"partial"},{compCharLen:n.length})):(n=r.displayText,i=r.telemetry);let o={completionText:n,completionTelemetryData:i,offset:r.offset};e.push(o)}}),e}s(I1t,"computeRejectedCompletions");function koe(t,e){let r=t.get(Mu);if(!r.position||!r.uri)return;let n=I1t(r);n.length>0&&kq(t,"ghostText",e??n[0].offset,r.uri,n),r.resetState(),r.resetPartialAcceptanceState()}s(koe,"rejectLastShown");function l3e(t,e,r,n){let i=t.get(Mu);return i.position&&i.uri&&!(i.position.line===r.line&&i.position.character===r.character&&i.uri.toString()===e.uri.toString())&&n!==2&&koe(t,e.offsetAt(i.position)),i.setState(e,r),i.index}s(l3e,"setLastShown");function c3e(t,e){let r=t.get(Mu);if(r.index=e.index,!r.shownCompletions.find(n=>n.index===e.index)&&(e.uri===r.uri&&r.position?.line===e.position.line&&r.position?.character==e.position.character&&r.shownCompletions.push(e),e.displayText)){let n=e.resultType!==0;Roe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${n}`),e.telemetry.measurements.compCharLen=e.displayText.length,EU(t,"ghostText",e)}}s(c3e,"handleGhostTextShown");function Bq(t,e){let r=t.get(Mu);r.resetState(),Roe.debug(t,"Ghost text post insert");let n=r.partiallyAcceptedLength?{compType:"partial",acceptedLength:e.displayText.length}:{compType:"full"};return r.resetPartialAcceptanceState(),x2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,n,e.copilotAnnotations)}s(Bq,"handleGhostTextPostInsert");function u3e(t,e,r,n=0){let i=t.get(Mu);r===e.insertText.length&&i.resetState(),Roe.debug(t,"Ghost text partial post insert");let o=i3e(e,r,n);if(o)return i.partiallyAcceptedLength=r,x2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(u3e,"handlePartialGhostTextPostInsert");function d3e(t){let e=new u5;return e.set(yg,t),e.set(mg,new mg),e.set(po,new po),e.set(km,new km),e.set(m0,new m0),e.set(Dt,new Dt(e)),e.set(rg,new rg),e.set(ac,new ac(e)),e.set(Pl,new Pl),e.set(g0,new g0),e.set(Iu,new Iu),e.set(Id,new dD),e.set(bm,new OS),e.set(ym,new t8),e.set(va,new va),e.set(Eg,new Eg(e)),e.set(bn,new bn(e)),hke(e,!0),e.set(Gl,new Gl(e)),e.set(Mm,wq(e)),e.set(Mu,new Mu),e.set(_d,new _d),e.set(X1,X1.default),e.set(U1,new U1(e)),e.set(qf,new qf(e)),e.set(_a,new _a),e.set(bd,new bd(e)),e.set(Ho,new Ho),e.set(Zf,new Zf(e)),e}s(d3e,"createCommonContext");f();f();var Dq=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var q5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var Fzr=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),RD=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,r){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Dt).updateExPValuesAndAssignments(),a=await this.ctx.get(Id).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},r);switch(a.type){case"success":return a;case"canceled":throw new Dq(a.reason);case"failed":throw new q5(a.reason)}}};f();f();var f3e=je(require("node:util"));function p3e(t,...e){return`[${t}] ${T1t(e)}`}s(p3e,"formatLogMessage");function T1t(t){return f3e.default.formatWithOptions({maxStringLength:1/0},...t)}s(T1t,"format");function Pq(t){return Z1e(t)}s(Pq,"verboseLogging");var Nq=class extends $a{constructor(r){super();this.console=r}static{s(this,"ConsoleLog")}logIt(r,n,i,...o){n==1?this.console.error(`[${i}]`,...o):(n==2||Pq(r))&&this.console.warn(`[${i}]`,...o)}};f();var m3e=require("node:util");var W5=class extends pg{static{s(this,"TelemetryLogSenderImpl")}sendError(e,r,...n){xI(e,"log",an.createAndMarkAsIssued({context:r,level:EI[1],message:w1t(...n)}),1)}sendException(e,r,n){Ta(e,r,n)}};function w1t(...t){return t.map(e=>(0,m3e.inspect)(e)).join(" ")}s(w1t,"telemetryMessage");f();var SFe=je(require("crypto")),RFe=je(require("fs")),kFe=je(wFe()),BFe=require("tls"),DFe=je(_Fe());var J4=new _t("certificates"),nl=class{static{s(this,"RootCertificateReader")}};function fH(t,e=process.platform){return new tue(t,[new rue,new nue,_3t(t,e)])}s(fH,"getRootCertificateReader");function _3t(t,e){switch(e){case"linux":return new iue(t);case"darwin":return new oue(t);case"win32":return new sue(t);default:return new aue}}s(_3t,"createPlatformReader");var eue=class extends nl{constructor(r,n){super();this.ctx=r;this.delegate=n}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(r){return J4.warn(this.ctx,"Failed to read root certificates:",r),[]}}},tue=class extends nl{constructor(r,n){super();this.ctx=r;this.delegates=n.map(i=>new eue(r,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(r=>r.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(r){let n=Date.now(),i=r.filter(o=>{try{let a=new SFe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>n}catch(a){return J4.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return r.length!==i.length&&J4.info(this.ctx,`Removed ${r.length-i.length} expired certificates`),i}},rue=class extends nl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return BFe.rootCertificates}},nue=class extends nl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await PFe(e):[]}},iue=class extends nl{constructor(r){super();this.ctx=r}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let r=[];for(let n of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await PFe(n);J4.debug(this.ctx,`Read ${i.length} certificates from ${n}`),r=r.concat(i)}return r}},oue=class extends nl{constructor(r){super();this.ctx=r}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let r=kFe.get();return J4.debug(this.ctx,`Read ${r.length} certificates from Mac keychain`),r}},sue=class extends nl{constructor(r){super();this.ctx=r}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let r=DFe.all();return J4.debug(this.ctx,`Read ${r.length} certificates from Windows store`),r}},aue=class extends nl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function PFe(t){let e;try{e=await RFe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let r=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!r)return[];let n=r.filter(o=>o.length>0),i=new Set(n);return Array.from(i)}s(PFe,"readCertsFromFile");f();var jFe=je(require("http"));var X3t=407,vc=new _t("proxySocketFactory"),nA=class{static{s(this,"ProxySocketFactory")}},Z2=class extends Error{static{s(this,"ProxySocketError")}constructor(e,r,n){super(e),this.code=r?.code,this.syscall=r?.syscall,this.errno=r?.errno,/^Failed to establish a socket connection to proxies:/.test(r?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(r?.message??"")?this.code="ProxyInitializeSecurityContext":r?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(r?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),n!==void 0&&(this.code=n)}};function pH(t){return new uue(t,new due(t))}s(pH,"getProxySocketFactory");var uue=class extends nA{constructor(r,n,i=new zP,o=process.platform){super();this.ctx=r;this.delegate=n;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Jr(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(r,n){this.successfullyAuthorized.get(this.getProxyCacheKey(n))&&(vc.debug(this.ctx,"Proxy authorization already successful once, skipping 407 rountrip"),await this.reauthorize(r,n));try{return await this.delegate.createSocket(r,n)}catch(i){if(i instanceof Z2&&i.code===`ProxyStatusCode${X3t}`){vc.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(r,n);if(o)return vc.debug(this.ctx,"Proxy authorization successful, caching result"),Bt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(n),!0),o}throw i}}async reauthorize(r,n){let i=await this.authorize(n);i&&(vc.debug(this.ctx,"Proxy re-authorization successful, received token"),r.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(r,n){let i=await this.authorize(n);if(vc.debug(this.ctx,"Proxy authorization successful, received token"),i)return vc.debug(this.ctx,"Trying to create socket with proxy authorization"),r.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(r,n)}async authorize(r){vc.debug(this.ctx,"Loading kerberos module");let n=await this.kerberosLoader.load(),i=this.computeSpn(r);vc.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await n.initializeClient(i);vc.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return vc.debug(this.ctx,"Received kerberos server response"),a}computeSpn(r){let n=r.kerberosServicePrincipal;if(n)return vc.debug(this.ctx,"Using configured kerberos spn",n),n;let i=this.platform==="win32"?`HTTP/${r.host}`:`HTTP@${r.host}`;return vc.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(r){return r.host+":"+r.port}},due=class extends nA{constructor(r){super();this.ctx=r}static{s(this,"TunnelingProxySocketFactory")}async createSocket(r,n){let i=this.createConnectRequestOptions(r,n);return new Promise((o,a)=>{vc.debug(this.ctx,"Attempting to establish connection to proxy");let l=jFe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{vc.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new Z2(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new Z2(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(vc.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{vc.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new Z2(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{vc.debug(this.ctx,"Proxy socket connection timeout"),a(new Z2(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.host}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(r,n){let i=`${r.hostname}:${r.port}`,o={...n,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive"},timeout:r.timeout};return r.localAddress&&(o.localAddress=r.localAddress),this.configureProxyAuthorization(o,r),o}configureProxyAuthorization(r,n){r.headers["Proxy-Authorization"]=[],r.proxyAuth&&r.headers["Proxy-Authorization"].push("Basic "+Buffer.from(r.proxyAuth).toString("base64")),n.headers&&n.headers["Proxy-Authorization"]&&r.headers["Proxy-Authorization"].push(n.headers["Proxy-Authorization"])}},zP=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>je(HFe()))}};f();var YFe=require("node:os");var Z3t=new _t("repository"),eT="\\\\",KFe="(?:[#;].*)",eR=`(?:[^"${eT}]|${eT}.)`,eBt="[0-9A-Za-z-]",VFe=`[A-Za-z]${eBt}*`,JFe=`\\s*${KFe}?$`,XFe=`(?:[^"${eT};#]|${eT}.)`,tBt=`(?:"${eR}*"|"${eR}*(?<strCont>${eT})$)`,rBt=`(?:${XFe}|${tBt})+`,nBt=`(?:(?<cont>${eT})$)`,ZFe=`(?<value>${rBt})${nBt}?${JFe}`,$Fe=new RegExp(`^${ZFe}`),iBt=new RegExp(`^(?<value>${eR}*(?:(?<strCont>${eT})$|(?<quote>")))`),oBt=new RegExp(`^\\s*(?:(?<key>${VFe})\\s*=\\s*${ZFe}|(?<soloKey>${VFe})${JFe})`),sBt=new RegExp(`(?<value>${XFe}+)|"(?<string>${eR}*)"`,"g"),zFe="[-.0-9A-Za-z]+",aBt=`\\s+"(?<ext>${eR}*)"`,lBt=`\\s+"(?<extOnly>${eR}*)"`,cBt=new RegExp(`^\\s*\\[(?:(?<simple>${zFe})${aBt}|${lBt}|(?<simpleOnly>${zFe}))\\]`),uBt=new RegExp(`^\\s*${KFe}$`),fue=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(cBt);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(oBt);if(e){if(e.groups?.key){let r=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),r)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let r=e,n=[this.matchedValue(r)];for(;r?.groups?.cont||r?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}r.groups.strCont?(r=this.line.match(iBt),r?(n.push(this.matchedValue(r)),r.groups?.quote&&(r=this.line.slice(r[0].length).match($Fe),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(r=this.line.match($Fe),r?n.push(this.matchedValue(r)):this.errorAt(this.lineNum+1))}return this.normalizeValue(n.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let r=!1,n=[...e.matchAll(sBt)].map(i=>i.groups?.value?(r=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(r=!1,this.unescapeValue(i.groups.string))).join("");return r?n.trimEnd():n}unescapeValue(e){let r={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(n,i)=>r[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){uBt.test(this.line)&&(this.line="")}},mH=class extends Rm{static{s(this,"GitParsingConfigLoader")}async getConfig(e,r){let n=await U1.getRepoConfigLocation(e,r);if(!n)return;let i=await this.getParsedConfig(e,n);if(i)return this.mergeConfig(await this.baseConfig(e,n),i)}mergeConfig(...e){return e.filter(r=>r!==void 0).reduce((r,n)=>r.concat(n),new o2)}async getParsedConfig(e,r,n=!0){let i=await this.tryLoadConfig(e,r,n);if(!i)return;let o=new fue(i),a=new o2;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,r,n){try{return await e.get(lo).readFileString(r)}catch(i){(n||!(i instanceof Error)||i.code!=="ENOENT")&&Z3t.warn(e,`Failed to load git config from ${JSON.stringify(r)}:`,i);return}}async baseConfig(e,r){let n=await this.commondirConfigUri(e,r),i=bo(this.xdgConfigUri(),"git","config"),o=bo(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),n?await this.getParsedConfig(e,n,!1):void 0)}async commondirConfigUri(e,r){if(Ti(r).toLowerCase()!=="config.worktree")return;let n=gd(r),i=bo(n,"commondir");try{let o=(await e.get(lo).readFileString(i)).trimEnd();return bo(II(n,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?fl(process.env.XDG_CONFIG_HOME):bo(this.homeUri(),".config")}homeUri(){return fl((0,YFe.homedir)())}};f();var eMe=require("child_process");var hH=class extends Rm{static{s(this,"GitCLIConfigLoader")}runCommand(e,r,n){return new Promise((i,o)=>{(0,eMe.execFile)(r,n,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,r,n,i){try{return await this.runCommand(r,n,i)}catch(o){R5e.info(e,`Failed to run command '${n}' in ${r}:`,o);return}}async getConfig(e,r){let n=Go(r);if(n===void 0)return;let i=await this.tryRunCommand(e,n,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let r=new o2;for(let n of e.split("\0").filter(i=>i)){let i=n.split(`
`,1)[0],o=n.slice(i.length+1);r.add(i,o)}return r}extraArgs(){return[]}};f();var rMe=je(require("node:events"));var tMe="onWorkspaceChanged",q0=class{constructor(){this.emitter=new rMe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(tMe,e)}emit(e){this.emitter.emit(tMe,e)}};function nMe(t){let e=d3e(t);return dBt(e),e.set(nl,fH(e)),e.set(nA,pH(e)),e.set(Rm,new nU([new hH,new mH])),e.set(q0,new q0),e.set(RD,new RD(e)),e}s(nMe,"createProductionContext");function dBt(t){t.set(Tf,Tf.fromEnvironment(!1)),t.set(pg,new W5),t.set($a,new Nq(console))}s(dBt,"setupRudimentaryLogging");var xnn=new _t("context");f();f();var Ur=new _t("chat");f();f();var gl=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(gl||{});function Vr(t){return t?(t=W0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Vr,"getTextPart");var iMe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),oMe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function ob(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(ob,"parseToolCallArguments");function sMe(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(sMe,"toOpenAIToolCall");function aMe(t,e,r,n,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return r.tool_calls&&(c.tool_calls=r.tool_calls),A5(t,[c],l),{message:e,choiceIndex:n,requestId:i,blockFinished:o,finishReason:a,tokens:r.tokens,numTokens:r.tokens.length,tool_calls:r.tool_calls,function_call:r.function_call,telemetryData:l}}s(aMe,"convertToChatCompletion");function YP(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(YP,"isChatCompletionContentPartArray");function gH(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(gH,"isChatMessageArray");function W0(t){if(typeof t=="string")return t;if(YP(t))return t;if(gH(t)){let e=t.filter(n=>n.role==="assistant"),r=[];for(let n of e)Array.isArray(n.content)?r.push(...n.content):r.push({type:"text",text:n.content});return r}return""}s(W0,"resolveAsChatMessageContent");function KP(t,e){return(typeof t=="string"||YP(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(KP,"appendChatMessageContent");function pue(t,e){if(t){if(typeof t=="string"||YP(t))return[{role:"assistant",content:t}];if(gH(t))return e?t:t.filter(r=>r.role!=="tool").map(r=>r.tool_calls?{...r,tool_calls:void 0,tool_call_id:void 0}:r)}else return[];return[]}s(pue,"resolveResponseAsChatMessages");f();var mue=new _t("streamMessages");function lMe(t,e,r){let n=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(mue.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),n=n.substring(0,e.finishOffset),i=!0),mue.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),mue.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=uD(e.solution),a={role:"assistant",content:n};return aMe(t,a,o,e.index,e.requestId,i,e.reason??"",r)}s(lMe,"prepareChatCompletionForReturn");var xp=new _t("fetchChat"),AH=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,r,n,i,o){let a=await this.fetchWithParameters(e,r.endpoint,r,n,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){xp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(r.endpoint,e,r);return this.handleError(e,l,a)}if(e.get(Zf).processQuotaHeaders(a.headers),r.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??sr(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Vr(u.content).split(" "),requestId:{headerRequestId:d,completionId:c.id?c.id:"",created:c.created?Number(c.created):0,deploymentId:"",serverExperiments:""},telemetryData:n,numTokens:0},m=Vr(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>y5(a),"getProcessingTime")}}else{let c=pv.create(e,r.count,a,n,[],o).processSSE(i);return{type:"success",chatCompletions:G1(c,d=>lMe(e,d,n)),getProcessingTime:s(()=>y5(a),"getProcessingTime")}}}createTelemetryData(e,r,n){return an.createAndMarkAsIssued({endpoint:e,engineName:n.engineName,uiKind:n.uiKind,headerRequestId:n.ourRequestId})}async fetchWithParameters(e,r,n,i,o){let a={messages:n.messages,tools:n.tools,tool_choice:n.tool_choice,model:n.model,temperature:C5(e,n.count),top_p:CU(e),n:n.count,stop:[`


`],copilot_thread_id:n.copilot_thread_id},l=D1(n.repoInfo);return l!==void 0&&(a.nwo=l),n.postOptions&&Object.assign(a,n.postOptions),n.intent&&(a.intent=n.intent,n.intent_model&&(a.intent_model=n.intent_model),n.intent_tokenizer&&(a.intent_tokenizer=n.intent_tokenizer),n.intent_threshold&&(a.intent_threshold=n.intent_threshold),n.intent_content&&(a.intent_content=n.intent_content)),o?.isCancellationRequested?"not-sent":await fBt(e,n.messages,n.copilotApiBaseUrl,n.engineName,r,n.ourRequestId,a,n.authToken,n.uiKind,i,n.llmInteraction,o)}async handleError(e,r,n){if(n.clientError&&!n.headers.get("x-github-request-id")){let a=`Last response was a ${n.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;xp.error(e,a),r.properties.error=`Response status was ${n.status} with no x-github-request-id header`}else r.properties.error=`Response status was ${n.status}`;if(r.properties.status=String(n.status),Bt(e,"request.shownWarning",r),n.status===401)try{let a=await n.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(n.status===401||n.status===403)return e.get(Qr).resetToken(n.status),{type:"failed",reason:`token expired or invalid: ${n.status}`,code:n.status};if(n.status===499)return xp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:n.status};let i=await n.text();if(n.status===466)return xp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:n.status};if(n.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:n.status};if(n.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:n.status};if(n.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:n.status};if(n.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Qr).getToken();if(n.status===402){if(i.includes("free_quota_exceeded")){let c=n.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:n.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:n.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:n.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:n.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:n.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:n.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:n.status}}}return{type:"failed",reason:"Quota Exceeded.",code:n.status}}return xp.error(e,"Unhandled status from server:",n.status,i),{type:"failed",reason:`unhandled status from server: ${n.status} ${i}`,code:n.status}}};async function fBt(t,e,r,n,i,o,a,l,c,u,d,p){let m=bo(r,n,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:n,uiKind:c});yU(a,h,["messages"]),h.properties.headerRequestId=o,Bt(t,"request.sent",h);let g=Ks(),y=v4e(c),v={...Vx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{pBt(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>sMe(E)))}),iI(t,m,l,y,o,a,p,v).then(b=>{let E=mv(b,void 0);h.extendWithRequestId(E);let _=Ks()-g;return h.measurements.totalTimeMs=_,xp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),xp.debug(t,"request.response properties",h.properties),xp.debug(t,"request.response measurements",h.measurements),xp.debug(t,"messages:",JSON.stringify(e)),Bt(t,"request.response",h),b}).catch(b=>{if(Lc(b))throw b;let E=h.extendedBy({error:"Network exception"});Bt(t,"request.shownWarning",E),h.properties.message=String(Nu(b,"name")??""),h.properties.code=String(Nu(b,"code")??""),h.properties.errno=String(Nu(b,"errno")??""),h.properties.type=String(Nu(b,"type")??"");let _=Ks()-g;throw h.measurements.totalTimeMs=_,xp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),xp.debug(t,"request.error properties",h.properties),xp.debug(t,"request.error measurements",h.measurements),Bt(t,"request.error",h),b}).finally(()=>{A5(t,e,h)})}s(fBt,"fetchWithInstrumentation");function pBt(t){return"tool_calls"in t}s(pBt,"isChatMessageWithToolCalls");var ta=class{constructor(e){this.ctx=e;this.fetcher=new AH}static{s(this,"ChatMLFetcher")}async fetchResponse(e,r,n,i){let o=sr(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(Qr).getToken(),u=jx(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,r,n)}async fetch(e,r,n,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),r||(()=>{}),n);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,r,n,i){let o=[],a=aD(r.chatCompletions,c=>this.postProcess(c,i));Ur.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)Ur.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:Vr(c.message?.content)??"",toolCalls:c.tool_calls,requestId:n,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:n};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:n};case"length":return{type:"length",reason:"Response too long.",requestId:n,truncatedValue:Vr(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:n};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:n}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>Vr(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:n}}return{type:"no_choices",reason:"Response contained no choices.",requestId:n}}postProcess(e,r){return Sq(e.tokens)?(r.extendWithRequestId(e.requestId),Bt(this.ctx,"conversation.repetition.detected",r,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,r){return Ur.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:r}}processFailedResponse(e,r){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:r}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:r}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:r}:{type:"failed",reason:e.reason,requestId:r,code:e.type==="failed"?e.code:void 0}}processError(e,r){return Lc(e)?{type:"canceled",reason:"network request aborted",requestId:r}:(Ur.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:r})}};f();var iA=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var sb=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var mBt=".github/copilot-instructions.md",hBt=".github/git-commit-instructions.md",gBt="global-copilot-instructions",ABt="global-git-commit-instructions",oA=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,r){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:r}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,r){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:r}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let r=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&r.push({kind:1,content:[this.globalCopilotInstructions],reference:gBt}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&r.push({kind:1,content:[this.globalGitCommitInstructions],reference:ABt}),r}async _collectInstructionsFromFile(e,r,n,i,o,a){try{let l=bo(r.uri,n),c=(await e.get(lo).readFileString(l)).trim();c&&o.push({kind:a,content:[{instruction:c,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,r,n={}){let i=[];if(!r.length)return i;let o=r.flatMap(a=>{let l=[];return n.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,a,mBt,n.languageId,i,0)),n.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,a,hBt,void 0,i,0)),l});return await Promise.all(o),i}};f();var bc=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},yH=class extends bc{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(r,n){this.items.push({editConversationId:r.editConversationId,editTurnId:r.editTurnId,...n})}};f();f();f();function CH(){return sr()}s(CH,"uuidV4");f();var ab=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var sA=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var JP="filepath:",Al="...existing code...",hue="copilot-edited-file";f();function tR(t){let e=t.matchAll(/^\s*(```+)/gm),r=Math.max(3,...Array.from(e,n=>n[1].length+1));return"`".repeat(r)}s(tR,"getFenceForCodeBlock");var G0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=tR(this.params.code),r=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&r.push(`// ${JP} ${aa(this.params.uri)}`),r.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),r}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var gue=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},XP=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),r=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(r.push({role:"assistant",content:this.props.inProgressRewriteContent}),r.push({role:"user",content:"Please continue providing the next part of the response."})),r}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((r,n)=>{let i=Vr(n.content);return n.role==="system"?`${r}<SYSTEM>
${i}
</SYSTEM>


`:r+i},"")}]}transformToSpeculationPrompt(e,r,n){return e.reduce((o,a)=>{if(a.role==="system"){let l=Vr(a.content).endsWith(`
`)?Vr(a.content):`${Vr(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${hue}>.
</SYSTEM>


`}return o+Vr(a.content)},"")+`


The resulting document:
<${hue}>
${n}${r}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let r=[];return r.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${Al}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),r.join(`
`)}buildUserMessage(e){let r=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new G0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});r.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else r.push("I am in an empty editor.");let i=new gue({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&r.push(i);let o=new G0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return r.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),r.join(`
`)}};f();var Ay=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(bn).getOrReadTextDocument({uri:e})}};f();var Fa=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var yBt=1e3,CBt={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:ln.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},rR=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new _t("CopilotEditsCodeMapper")}async mapCode(e,r,n,i,o=!1){if(!e.resource)throw new sA("No uri found in code block");if(n.isCancellationRequested)throw new ab;e.code.includes(Al)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let a=await this.ctx.get(bn).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new sA(v);throw this.logger.error(this.ctx,v,b),b}let l=a.document.getText();if(l.length===0&&!e.code.includes(Al))return i&&await this.reportCodeBlock(e,i),e.code;let c=new XP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Ay(this.ctx)}),u=await c.render();u=c.transformToFastApplyMessage(u),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock});let d=await this.ctx.get(Dt).updateExPValuesAndAssignments(),p=CH(),m=[],h=0,g=0,y=l.length+e.code.length+yBt;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:CBt,messages:u,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:r,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${p} in iteration ${g} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(ta).fetchResponse(v,n,d);if(this.logger.debug(this.ctx,`Received map code response ${p} in iteration ${g} with result: ${JSON.stringify(E,null,2)}`),h=this.calculateResponseLength(E,m,h),E.type==="length"){if(h>y)throw new sA(`Code mapper might be in a loop: Rewritten length: ${h}, Document length: ${l.length}, Code block length ${e.code.length}`);u=await new XP({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new Ay(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=m.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ti(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:tR(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new sA(k)}}else{if(E.type==="canceled")throw new Fa;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new sA(_)}}g+=1}}calculateResponseLength(e,r,n){return e.type==="success"?(r.push(e.value),n+=e.value.length):e.type==="length"&&(r.push(e.truncatedValue),n+=e.truncatedValue.length),n}async reportCodeBlock(e,r){await r({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock}),await r({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ti(e.resource)})}};f();var ru=class extends Error{constructor(r){super(r.message);this.editConversationError=r;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var lb=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,r){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return r||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var xH=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var cb=class{constructor(e,r){this.request=e;this.id=sr();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];r&&r.length>0&&(this.workingSet=r)}static{s(this,"EditTurn")}},Aue=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(r=>r.id===e)}getTurns(){return[...this.turns]}},vH=class{constructor(e=[],r="panel",n="en"){this._id=sr();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=r,this.userLanguage=n,this.turnsManager=new Aue(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new xH(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var bH=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,r){switch(r.type){case"success":return r.value;case"offTopic":{e.currentTurn.status="off-topic";let n="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:n,type:"offtopic-detection"},new ru({message:n,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},new ru({message:Gx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:r.reason,type:"server"},new ru({message:lb.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw e.currentTurn.status="filtered",new ru({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new ru({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new ru({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new ru({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new ru({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new ru({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new ru({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new ru({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*uMe(t){yield t}s(uMe,"stringToAsyncIterable");f();f();var aA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,r,n={}){try{let i=e.get(oA),o=i.getGlobalInstructions(n),a=await i.readFromWorkspaces(e,r,n),l=[...o,...a];return this.processInstructions(l,n)}catch{return}}static processInstructions(e,r={}){if(!e||e.length===0)return;let n=[];for(let o of e){let a=this.createInstructionElement(o,r);a&&n.push(a)}return n.length===0?void 0:`${r.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${n.join(`
`)}</instructions>`}static createInstructionElement(e,r={}){let n=[];for(let i of e.content)i.languageId?r.languageId&&i.languageId===r.languageId&&n.push(`For ${i.languageId} code: ${i.instruction}`):n.push(i.instruction);if(n.length!==0)return n.join(`
`)}static async appendToUserMessage(e,r,n="",i={}){if(!r||r.length===0)return n;let o=await t.getInstructions(e,r,i);return o?o+`

`+n:n}};f();var yy=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,r){let n=e.mapToUriInWorkingSet(r);return n||fl(r)}static uriToPath(e){let r=Go(e);if(r)return r;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var EH=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),r=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)r.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&r.push({role:"assistant",content:i.response.message});let n=await aA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return r.push({role:"user",content:n}),r}getExampleFilePath(e){return this.getFilePath(yy.posixFilePathToUri(e))}getFilePath(e){return yy.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let r of this.props.workingSet){let n=await this.props.textDocumentProvider.getByUri(r.uri);n.status==="valid"&&e.set(r.uri,n.document)}return e}buildSystemMessage(e){let r=[];return r.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${JP} ${this.exampleFilePath}`,`// ${Al}`,"{ changed code }",`// ${Al}`,"{ changed code }",`// ${Al}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&r.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&r.push(`You use the ${this.props.modelName} large language model.`),r.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${JP} ${this.tsExampleFilePath}`,"class Person {",`   // ${Al}`,"   age: number;",`   // ${Al}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),r.join(`
`)}buildUserMessage(e){let r=[];if(e.size>0){r.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[n,i]of e){let o=new G0({code:i.getText(),languageId:i.detectedLanguageId,uri:n});r.push("<file>",...o.renderAsArray(),"</file>")}}return r.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${Al}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&r.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),r.push("</reminder>"),r.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),r.join(`
`)}};f();f();var IH=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:r}=await this._source.next();r?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}async readUntil(e){let r="";for(;!this.endOfStream;){let n=this.readImmediateExcept(e);if(r+=n,await this.peek(1)===e)break}return r}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let r=this._buffer.indexOf(e);return this.readImmediate(r===-1?this._buffer.length:r)}readImmediate(e){let r=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),r}};var yue="<file>",ZP="```",t9="###",vBt=/^(`+)([^ \n]*)/,e9="filepath:";async function*fMe(t,e){let r=new IH(t[Symbol.asyncIterator]()),n=[];for(;!r.endOfStream;){for(;!r.endOfStream;){let y=await r.peek(Math.max(ZP.length,yue.length,t9.length));if(y.startsWith(yue)||y.startsWith(ZP))break;if(y.startsWith(t9)){let v=await r.readLineIncludingLF(),b=v.substring(t9.length).trim();await e(b)?n.length=0:n.push(v)}else await dMe(r,n)}if(r.endOfStream)break;let i=await r.readLineIncludingLF(),o=i.startsWith(yue);for(;!r.endOfStream&&!i.startsWith(ZP);)i=await r.readLineIncludingLF();if(r.endOfStream)break;let a=i.match(vBt),l=a?a[2]:void 0,c=RRe(l?TRe(l):void 0),u=[`${c.lineComment.start} ${e9}`,`:: ${e9}`,`<!-- ${e9}`,`// ${e9}`,`# ${e9}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!r.endOfStream;){let y=await r.peek(Math.max(ZP.length,d));if(y.startsWith(ZP)){let v=await r.readLineIncludingLF();if(!o)break;if(await r.peek(m.length)===m){await r.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await r.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await dMe(r,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:n.join("")},n.length=0}}s(fMe,"getCodeBlocksFromResponse");async function dMe(t,e){for(;!t.endOfStream;){let r=t.readImmediateExcept(`
`);if(r.length>0&&e?.push(r),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(dMe,"pipeOneLine");function pMe(t){if(t.startsWith(`${t9} `))return"";let e=t.indexOf(`
${t9} `);return e===-1?"":t.substring(0,e)+`
`}s(pMe,"parseOverallDescription");f();f();var TH=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var bBt=new _t("CopilotEditsConversations"),il=class{constructor(e){this.editConversations=new Jr(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",r){let n=new vH([],e,r);return this.editConversations.set(n.id,n),n}destroy(e){this.editConversations.delete(e)!==!0&&bBt.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,r){return this.get(e).addTurn(r),r}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getEditConversation(e)}getEditConversation(e){let r=this.editConversations.get(e);if(!r)throw new TH(`Conversation with id ${e} does not exist`);return r}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let r=this.getAll();for(let n of r)if(n.hasTurn(e))return n}};f();f();var ra=class{static{s(this,"ModelConfigurationProvider")}},wH=class extends ra{constructor(r){super();this.ctx=r}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(r,n){let i=[];for(let o of r){let a=await this.getFirstMatchingChatModelConfiguration(o,n);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Ur.error(this.ctx,`No model configuration found for families: ${r.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(Tu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(r){let n=await this.ctx.get(Tu).getMetadata(),i=IBt(n,r);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(r,n){let i=await this.getFirstMatchingModelMetadata({family:r,type:"chat",supports:n});if(i!==void 0)return r===ln.Gpt35turbo||r===ln.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:xue(6144,i),maxResponseTokens:Cue(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===ln.Gpt4||r===ln.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:xue(10240,i),maxResponseTokens:Cue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:r===ln.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:await EBt(this.ctx,i),maxResponseTokens:Cue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:r,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(r){let n=await this.getFirstMatchingModelMetadata({family:r,type:"embeddings"});if(n!==void 0)switch(r){case _M.textEmbedding3Small:return{modelId:n.id,modelFamily:r,maxBatchSize:n.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function EBt(t,e){let r=t.get(Dt),n=await r.updateExPValuesAndAssignments(),i=r.ideChatMaxRequestTokens(n);return i===-1&&(i=16384),xue(i,e)}s(EBt,"getExpRequestTokens");function xue(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(xue,"getRequestTokens");function Cue(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(Cue,"getResponseTokens");function IBt(t,e){return t.filter(r=>r.capabilities.type!==e.type||r.capabilities.family!==e.family&&!(r.is_chat_fallback===!0&&r.id===e.family)||r.capabilities.family===e.family&&r.id!==e.family&&r.is_chat_fallback===!0?!1:r.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(n=>e.supports?.[n]===r.capabilities.supports?.[n]))}s(IBt,"filterModelsByCapabilities");var xo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,r,n,i){if(n)return e.get(ra).getBestChatModelConfig([n]);if(e.get(Zf).quotaExhausted&&!(await e.get(Qr).getToken()).userInfo?.isFreeUser){let o=await e.get(Tu).getFallbackModel();if(o)return e.get(ra).getBestChatModelConfig([o?.id])}return e.get(ra).getBestChatModelConfig(Of(r),i)}static transformMessages(e,r){return r===ln.O1Ga||r===ln.O1Mini?e.map(n=>n.role!=="user"?{role:"user",content:n.content}:n):e}};var Cy=class{constructor(e,r){this.chatFetcher=r;this.ctx=e,this.chatFetcher=this.chatFetcher??new ta(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,r){try{await this.reportBegin(e);let n=await this.getEditCodeResult(e,r),i=bH.processResult(e,n);await this.parseAndSendProgressBack(e,i,r),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(n){if(n instanceof ab)await this.reportEnd(e,{message:Gx});else if(n instanceof ru)await this.reportEnd(e,n.editConversationError);else{let i=n instanceof Error?n.message:String(n);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,r){await this.abortIfCancelled(e,r);let n=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Dt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,r);let o=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=xo.transformMessages(n,o.modelFamily);return await this.abortIfCancelled(e,r),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},r,i)}async buildEditCodePromptMessages(e){let r=e.currentTurn,n=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new EH({userMessage:r.request.message,workspaceFolder:r.workspaceFolder,workingSet:r.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new Ay(this.ctx),modelName:n.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,r){if(r.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},new ab;this.ctx.get(il).get(e.editConversationId)}async parseAndSendProgressBack(e,r,n){try{let i=uMe(r),o=new rR(this.ctx),a=s(async u=>yy.pathToUri(e,u),"createUri"),l=[],c=pMe(r);c&&await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,n);for await(let u of fMe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),n,async d=>{await this.ctx.get(bc).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,r)}catch(i){if(i instanceof sA||i instanceof q5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof ab)e.currentTurn.status="cancelled",e.currentTurn.response={message:Gx,type:"user"},await this.reportEnd(e,{message:Gx});else throw i}}async reportNoCodeBlocks(e,r){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:r})}async reportBegin(e){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,r){await this.ctx.get(bc).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:r})}};f();var hMe="github.com",mMe=`https://${hMe}`,nR=class extends Fl{constructor(r,n={}){super();this.env=n;this.recalculateUrlDefaults(mMe),ia(r,i=>this.onCopilotToken(r,i))}static{s(this,"DefaultNetworkConfiguration")}onCopilotToken(r,n){this.updateServiceEndpoints(r,n.envelope.endpoints)}getAuthAuthority(){return this.baseUrlObject.host}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}getTelemetryUrl(r){return this.join(this.telemetryUrl,r)}setTelemetryUrlForTesting(r){this.telemetryUrl=r}validateBaseUrl(r,n){return this.isPermittedUrl(r,n)?!0:(r.get(za).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${n}".`),!1)}updateBaseUrl(r,n){n||=mMe;let i=this.baseUrlObject;this.validateBaseUrl(r,n)&&this.withTelemetryReInitialization(r,()=>{this.recalculateUrlDefaults(n),i.href!==this.baseUrlObject.href&&r.get(Qr).resetToken()})}updateBaseUrlFromTokenEndpoint(r,n){try{let i=new URL(n);i.hostname.startsWith("api.")?this.updateBaseUrl(r,`https://${i.hostname.substring(4)}`):this.updateBaseUrl(r)}catch{this.updateBaseUrl(r)}}updateServiceEndpoints(r,n){n&&this.isPermittedUrl(r,n.telemetry)&&this.withTelemetryReInitialization(r,()=>{this.telemetryUrl=this.join(n.telemetry,"telemetry")})}withTelemetryReInitialization(r,n){let i=this.telemetryUrl;if(n(),i===this.telemetryUrl)return;let o=r.get(g0);o.isInitialized&&o.reInitialize(r)}recalculateUrlDefaults(r){let n=this.parseUrls(r);this.baseUrlObject=n.base;let i=n.api,o=this.baseUrlObject.host!==hMe;this.apiUrl=i.href,this.telemetryUrl=this.join(o?this.prefixWith("copilot-telemetry-service.",this.baseUrlObject).href:e8.telemetry,"/telemetry")}parseUrls(r){if(this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN)try{return{base:new URL(this.env.GITHUB_SERVER_URL),api:new URL(this.env.GITHUB_API_URL)}}catch{}let n=new URL(r),i=this.prefixWith("api.",n);return{base:n,api:i}}isPermittedUrl(r,n){return this.isValidUrl(n)&&this.hasSupportedProtocol(r,n)}isValidUrl(r){try{if(r)return new URL(r),!0}catch{}return!1}hasSupportedProtocol(r,n){let i=new URL(n).protocol;return i==="https:"||!pM(r)&&i==="http:"}join(r,n){return n?new URL(n,r).href:r}prefixWith(r,n){return new URL(`${n.protocol}//${r}${n.host}`)}};f();var Iln=new _t("exp");function gMe(t){let e=t.get(Dt);e.registerStaticFilters(_Bt(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Xr(t,ft.DebugOverrideEngine)||Xr(t,ft.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>lM()?"copilot-web":t.get(fn).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>vue(!t.get(po).isProduction()&&t.get(fn).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(fn).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>TBt(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(fn).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>vue(t.get(fn).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>wBt(t)),e.registerDynamicFilterGroup(()=>{let r={};for(let n of t.get(fn).getRelatedPluginInfo()){let i=Ef+n.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(gB).includes(i)){V7(t,{reason:`A filter could not be registered for the unrecognized related plugin "${n.name}".`});continue}r[i]=vue(n.version)}return r})}s(gMe,"setupExperimentationService");function TBt(t){let e=t.get(fn).getEditorPluginInfo();return e.name==="copilot"&&Ff(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(TBt,"getPluginRelease");function wBt(t){let e=t.get(fn).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(wBt,"getTargetPopulation");function _Bt(t){return SBt(t)}s(_Bt,"createAllFilters");function SBt(t){let e=t.get(Bs);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(po).isProduction()?vI(t):"1.999.0"}}s(SBt,"createDefaultFilters");function vue(t){return t.split("-")[0]}s(vue,"trimVersionSuffix");f();var r9=(r=>(r.enabled="enabled",r.disabled="disabled",r))(r9||{}),xy=Symbol("onMCPToolsListChanged"),H0=class{static{s(this,"McpManager")}};f();var Jm=class{static{s(this,"McpRuntimeNotifier")}},_H=class extends Jm{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var iR=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var bue=class{constructor(e,r){this.baseDebounceTime=e;this.expectedTotalTime=r;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),r=Date.now()-this.providerInvocationTime;return Math.max(0,e-r)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},SH=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let n=this._getExpectedTotalTime(200);return new bue(200,n)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var Qo;(n=>{function t(i){return new Eue(i)}n.ok=t,s(t,"ok");function e(i){return new Iue(i)}n.error=e,s(e,"error");function r(i){return n.error(new Error(i))}n.fromString=r,s(r,"fromString")})(Qo||={});var Eue=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},Iue=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();var RH=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,r){let n=Array.from(e.keys()).sort((i,o)=>r(e[i],e[o]));return new t(n)}apply(e){if(e.length!==this.arrayLength)throw X8(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((r,n)=>e[this._indexMap[n]])}mapIndexBack(e){let r=this._indexMap.at(e);if(r===void 0)throw X8(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return r}inverse(){let e=this._indexMap.slice();for(let r=0;r<this._indexMap.length;r++)e[this._indexMap[r]]=r;return new t(e)}};f();f();var A9=je(th());function DQe(t){return t.map(B8t).join(`
`)}s(DQe,"stringifyChatMessages");function B8t({role:t,content:e}){if(t!==A9.Raw.ChatRole.User&&t!==A9.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let r=t===A9.Raw.ChatRole.User?"User":"System",n=e.at(0);return n?.type!==A9.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${r}
------
${n.text}
==================`}s(B8t,"stringifyMessage");f();f();var D8t=Symbol("MicrotaskDelay");function P8t(t){let e=new H1,r=t(e.token),n=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new bg)});Promise.resolve(r).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}s(P8t,"createCancelablePromise");function wy(t,e){return e?new Promise((r,n)=>{let i=setTimeout(()=>{o.dispose(),r()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new bg)})}):P8t(r=>wy(t,r))}s(wy,"timeout");var nj=class{constructor(e,r){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof r=="number"&&this.setIfNotSet(e,r)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,r){if(this._isDisposed)throw new vn("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},r)}setIfNotSet(e,r){if(this._isDisposed)throw new vn("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},r))}};var y9=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,r)=>{this.completeCallback=e,this.errorCallback=r})}complete(e){return new Promise(r=>{this.completeCallback(e),this.outcome={outcome:0,value:e},r()})}error(e){return new Promise(r=>{this.errorCallback(e),this.outcome={outcome:1,value:e},r()})}cancel(){return this.error(new bg)}},N8t;(r=>{async function t(n){let i,o=await Promise.all(n.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}r.settled=t,s(t,"settled");function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(a){o(a)}})}r.withAsyncBody=e,s(e,"withAsyncBody")})(N8t||={});var C9=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(r=>{r.emitMany(e)})}static fromPromise(e){return new t(async r=>{r.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async r=>{await Promise.all(e.map(async n=>r.emitOne(await n)))})}static merge(e){return new t(async r=>{await Promise.all(e.map(async n=>{for await(let i of n)r.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,r){this._state=0,this._results=[],this._error=null,this._onReturn=r,this._onStateChanged=new R0,queueMicrotask(async()=>{let n={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await a2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,r){return new t(async n=>{for await(let i of e)n.emitOne(r(i))})}map(e){return t.map(this,e)}static filter(e,r){return new t(async n=>{for await(let i of e)r(i)&&n.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,r=>!!r)}coalesce(){return t.coalesce(this)}static async toPromise(e){let r=[];for await(let n of e)r.push(n);return r}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var ij=class{constructor(e){this._deferred=new y9;this._asyncIterable=new C9(i=>{if(r){i.reject(r);return}return n&&i.emitMany(n),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let r,n;this._emitFn=i=>{n||(n=[]),n.push(i)},this._errorFn=i=>{r||(r=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};var x9=class t{constructor(e,r){this.firstEditStrategy=e;this.maxLinesPerEdit=r}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},oj=class t{constructor(e,r,n,i,o){this.id=e;this.documents=r;this.activeDocumentIdx=n;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new H1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new y9;Ol(r.length>0),Ol(n>=0&&n<r.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(r=>r.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(r=>v9.deserialize(r)),e.activeDocumentIdx,[],x9.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((r,n)=>` * [${n+1}/${this.documents.length}] ${n===this.activeDocumentIdx?"(active document) ":""}`+r.toMarkdown()).join(`

`)}`}},v9=class t{constructor(e,r,n,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=r;this.languageId=n;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new ql(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(Lm.create(e.id),e.workspaceRoot?Tv.parse(e.workspaceRoot):void 0,p2.create(e.languageId),e.documentLinesBeforeEdit,No.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new ql(e.documentBeforeEdits),Ng.deserialize(e.recentEdits),new ql(e.documentAfterEditsNoShortening),r=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},r=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Ri=class t{constructor(e,r){this.nextEdit=e;this.telemetry=r}static{s(this,"StatelessNextEditResult")}static noEdit(e,r){let n=Qo.error(e),i=r.build(n);return new t(n,i)}static edit(e,r){let n=Qo.ok(e),i=r.build(n);return new t(n,i)}},Cb=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let n=Date.now()-this.startTime,i=this._prompt?DQe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:bD(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:n,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,r){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=r,Ol(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function L8t(t,...e){let r=t;for(let n of e)r=n(r);return r}s(L8t,"chainStatelessNextEditProviders");var dR=class{constructor(e,r){this.ID=e;this._providers=r;let n={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=L8t(n,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,r){return this._impl.provideNextEdit(e,r)}},fR=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,r){let n=await this._baseProvider.provideNextEdit(e,r);if(n.nextEdit.isError())return n;let i=n.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return n;if(a.length===0)return new Ri(Qo.error({kind:"filteredOut",message:"uncategorized"}),n.telemetry);let l=RH.createSortPermutation(a,w0(u=>u.lineRange.startLineNumber,_0)),c=new No(l.apply(a));return new Ri(Qo.ok({edit:c,permutation:l.inverse()}),n.telemetry)}},pR=class extends fR{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,r){return r.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,r){let n=e.lineRange.toOffsetRange().slice(r),i=e.newLines,o=i.length===0;if(o&&n.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(n.length!==i.length)return!1;for(let a=0;a<n.length;a++){let l=n[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},mR=class extends fR{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,r){return r.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,r,n){return r.startLineNumber>1&&e.lineRange.startLineNumber===1||r.endLineNumberExclusive<n&&e.lineRange.endLineNumberExclusive===r.length}};f();f();var F8t=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),M8t=new Map(Object.entries(F8t).map(([t,e])=>[t,{languageId:t,...e}]));function NQe(t){return Ade(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(NQe,"getLanguage");function Ade(t){return M8t.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(Ade,"_getLanguage");f();var hR=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Od.isRange(e)&&typeof e.newText=="string":!1}static replace(e,r){return new t(e,r)}static insert(e,r){return t.replace(new Od(e,e),r)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let r=new t(new Od(new To(0,0),new To(0,0)),"");return r.newEol=e,r}get range(){return this._range}set range(e){if(e&&!Od.isRange(e))throw xb("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw xb("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw xb("newEol");this._newEol=e}constructor(e,r){this._range=e,this._newText=r}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var To=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isBefore(r)&&(r=i)}return r}static Max(...e){if(e.length===0)throw new TypeError;let r=e[0];for(let n=1;n<e.length;n++){let i=e[n];i.isAfter(r)&&(r=i)}return r}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:r,character:n}=e;return typeof r=="number"&&typeof n=="number"}get line(){return this._line}get character(){return this._character}constructor(e,r){if(e<0)throw xb("line must be non-negative");if(r<0)throw xb("character must be non-negative");this._line=e,this._character=r}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,r=0){if(e===null||r===null)throw xb();let n;return typeof e>"u"?n=0:typeof e=="number"?n=e:(n=typeof e.lineDelta=="number"?e.lineDelta:0,r=typeof e.characterDelta=="number"?e.characterDelta:0),n===0&&r===0?this:new t(this.line+n,this.character+r)}with(e,r=this.character){if(e===null||r===null)throw xb();let n;return typeof e>"u"?n=this.line:typeof e=="number"?n=e:(n=typeof e.line=="number"?e.line:this.line,r=typeof e.character=="number"?e.character:this.character),n===this.line&&r===this.character?this:new t(n,r)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Od=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?To.isPosition(e.start)&&To.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,r,n,i){let o,a;if(typeof e=="number"&&typeof r=="number"&&typeof n=="number"&&typeof i=="number"?(o=new To(e,r),a=new To(n,i)):To.isPosition(e)&&To.isPosition(r)&&(o=e,a=r),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):To.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let r=To.Max(e.start,this._start),n=To.Min(e.end,this._end);if(!r.isAfter(n))return new t(r,n)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let r=To.Min(e.start,this._start),n=To.Max(e.end,this.end);return new t(r,n)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,r=this.end){if(e===null||r===null)throw xb();let n;return e?To.isPosition(e)?n=e:(n=e.start||this.start,r=e.end||this.end):n=this.start,n.isEqual(this._start)&&r.isEqual(this.end)?this:new t(n,r)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return Q8t(this)}};function xb(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(xb,"illegalArgument");function Q8t(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(Q8t,"getDebugDescriptionOfRange");f();function LQe(t){let r=t.split(/\r?\n/).map(O8t),n=r.filter(o=>o===1).length,i=r.filter(o=>o===2).length;return n>i}s(LQe,"looksLikeCode");function O8t(t){if(t.length===0)return 0;let e=0,r=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Oie(t)||(e+=1);{Oie(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(r+=1),t.match(/^\s/)&&(r+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;r+=o}return e>r?2:r>e?1:0}s(O8t,"guessLineType");var gR;(r=>{function t(n){return n.length===0?[]:n.split(/\r\n|\r|\n/g)}r.fromString=t,s(t,"fromString");function e(n){if(n.lineCount===0)return[];let i=[];for(let o=0;o<n.lineCount;o++)i.push(n.lineAt(o).text);return i}r.fromDocument=e,s(e,"fromDocument")})(gR||={});function U8t(t){return t.replace(/^\s+/g,"")}s(U8t,"trimLeadingWhitespace");function yde(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(yde,"isImportStatement");var q8t=new j1(t=>{let e=NQe(t),{start:r,end:n}=e.lineComment,i=`(?:${Qie(r)})`,o=n?`(?:${Qie(n)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function Cde(t,e){let r=t.match(q8t.get(e));if(!r)return;let n=r.index;if(typeof n>"u")return;let i=t.substring(0,n),o=r[0],a=U8t(r[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(Cde,"extractEndLineComment");function aj(t,e){let r=Cde(t,e);if(!(r&&r.content.trim().length>0&&LQe(r.commentWithoutTokens)))return r}s(aj,"extractExplicativeEndLineComment");var AR=class t extends fR{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,r,n){return e.newLines.some(i=>yde(i,r))||W8t(e,n).some(i=>yde(i,r))}filterEdit(e,r){let n=e.languageId;return r.filter(o=>!t.isImportChange(o,n,e.documentLinesBeforeEdit))}};function W8t(t,e){return lSe(t.lineRange.mapToLineArray(r=>e[r-1]))}s(W8t,"getOldLines");f();var vde=je(th());f();f();f();var nh;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n,s(n,"getServiceDependencies")})(nh||={});var dA=$0("instantiationService");function G8t(t,e,r){e[nh.DI_TARGET]===e?e[nh.DI_DEPENDENCIES].push({id:t,index:r}):(e[nh.DI_DEPENDENCIES]=[{id:t,index:r}],e[nh.DI_TARGET]=e)}s(G8t,"storeServiceDependency");function $0(t){if(nh.serviceIds.has(t))return nh.serviceIds.get(t);let e=s(function(r,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");G8t(e,r,i)},"id");return e.toString=()=>t,nh.serviceIds.set(t,e),e}s($0,"createDecorator");f();f();var z0=class{static{s(this,"SyncDescriptor")}constructor(e,r=[],n=!1){this.ctor=e,this.staticArguments=r,this.supportsDelayedInstantiation=n}};f();var xde=class{constructor(e,r){this.key=e;this.data=r;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},b9=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let r of this._nodes.values())r.outgoing.size===0&&e.push(r);return e}insertEdge(e,r){let n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(r);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){let r=this._hashFn(e);this._nodes.delete(r);for(let n of this._nodes.values())n.outgoing.delete(r),n.incoming.delete(r)}lookupOrInsertNode(e){let r=this._hashFn(e),n=this._nodes.get(r);return n||(n=new xde(r,e),this._nodes.set(r,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[r,n]of this._nodes)e.push(`${r}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,r]of this._nodes){let n=new Set([e]),i=this._findCycle(r,n);if(i)return i}}_findCycle(e,r){for(let[n,i]of e.outgoing){if(r.has(n))return[...r,n].join(" -> ");r.add(n);let o=this._findCycle(i,r);if(o)return o;r.delete(n)}}};f();var lT=class{constructor(...e){this._entries=new Map;for(let[r,n]of e)this.set(r,n)}static{s(this,"ServiceCollection")}set(e,r){let n=this._entries.get(e);return this._entries.set(e,r),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var H8t=!1,lj=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},cj=class t{constructor(e=new lT,r=!1,n,i=H8t){this._services=e;this._strict=r;this._parent=n;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(dA,this),this._globalGraph=i?n?._globalGraph??new b9(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,$O(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)vSe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,r){this._throwIfDisposed();let n=this,i=new class extends t{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),r?.add(i),i}invokeFunction(e,...r){this._throwIfDisposed();let n=E9.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw iSe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,n);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...r)}finally{i=!0,n.stop()}}createInstance(e,...r){this._throwIfDisposed();let n,i;return e instanceof z0?(n=E9.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(r),n)):(n=E9.traceCreation(this._enableTracing,e),i=this._createInstance(e,r,n)),n.stop(),i}_createInstance(e,r=[],n){let i=nh.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,n);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:r.length;if(r.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${r.length} static arguments`);let l=a-r.length;l>0?r=r.concat(new Array(l)):r=r.slice(0,a)}return Reflect.construct(e,r.concat(o))}_setCreatedServiceInstance(e,r){if(this._services.get(e)instanceof z0)this._services.set(e,r);else if(this._parent)this._parent._setCreatedServiceInstance(e,r);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let r=this._services.get(e);return!r&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):r}_getOrCreateServiceInstance(e,r){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let n=this._getServiceInstanceOrDescriptor(e);return n instanceof z0?this._safeCreateAndCacheServiceInstance(e,n,r.branch(e,!0)):(r.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,r,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,r,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,r,n){let i=new b9(c=>c.id.toString()),o=0,a=[{id:e,desc:r,_trace:n}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new lj(i);for(let u of nh.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof z0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new lj(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof z0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,r,n=[],i,o){if(this._services.get(e)instanceof z0)return this._createServiceInstance(e,r,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,r,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${r.name}`)}_createServiceInstance(e,r,n=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(r,n,o);return a.add(l),l}}_throwIfStrict(e,r){if(r&&console.warn(e),this._strict)throw new Error(e)}};var E9=class t{constructor(e,r){this.type=e;this.name=r;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,r){return e?new t(2,r.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,r){return e?new t(1,r.name):t._None}static{this._totals=0}branch(e,r){let n=new t(3,e.toString());return this._dep.push([e,r,n]),n}stop(){let e=Date.now()-this._start;t._totals+=e;let r=!1;function n(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){r=!0,l.push(`${c}CREATES -> ${u}`);let m=n(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(n,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||r)&&t.all.add(i.join(`
`))}};var uj=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new lT(...e):e??new lT}static{s(this,"InstantiationServiceBuilder")}define(e,r){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,r)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new cj(this._collection,!0)}};var fj=$0("ITelemetrySender"),ih=$0("IChatMLFetcher");var dj=class{constructor(){this._stream=new ij;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,r){r.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(r.codeVulnAnnotations=void 0),r.codeVulnAnnotations&&(r.codeVulnAnnotations=r.codeVulnAnnotations.filter(n=>!this._seenAnnotationTypes.has(n.details.type)),r.codeVulnAnnotations.forEach(n=>this._seenAnnotationTypes.add(n.details.type))),this._stream.emitOne({text:e,delta:r})}resolve(){this._stream.resolve()}};f();var _y=$0("IParserService");f();var yR=class{static{s(this,"DiffChange")}constructor(e,r,n,i){this.originalStart=e,this.originalLength=r,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},I9=class{constructor(e,r=!0){this.lines=e;this.trimWhitespace=r}static{s(this,"LineSequence")}getElements(){let e=[];for(let r=0,n=this.lines.length;r<n;r++)e[r]=this.trimWhitespace?this.lines[r].trim():this.lines[r];return e}getCharCount(){let e=0;for(let r of this.lines)e+=r.length;return e}},T9=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},vb=class{static{s(this,"Debug")}static Assert(e,r){if(!e)throw new Error(r)}},bb=class{static{s(this,"MyArray")}static Copy(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}static Copy2(e,r,n,i,o){for(let a=0;a<o;a++)n[i+a]=e[r+a]}};var pj=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new yR(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_originalCount++}AddModifiedElement(e,r){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,r),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},w9=class t{static{s(this,"LcsDiff")}constructor(e,r){let[n,i]=t._getElements(e),[o,a]=t._getElements(r);this._originalStringElements=n,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let r=e.getElements(),n=new Int32Array(r.length);for(let i=0,o=r.length;i<o;i++)n[i]=this._stringHash(r[i],0);return[r,n]}static _numberHash(e,r){return(r<<5)-r+e|0}static _stringHash(e,r){r=this._numberHash(149417,r);for(let n=0,i=e.length;n<i;n++)r=this._numberHash(e.charCodeAt(n),r);return r}ElementsAreEqual(e,r){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[r]?!1:this._originalStringElements[e]===this._modifiedStringElements[r]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,r,n,i){return this.ComputeDiffRecursive(e,r,n,i)}ComputeDiffRecursive(e,r,n,i){for(;e<=r&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;r>=e&&i>=n&&this.ElementsAreEqual(r,i);)r--,i--;if(e>r||n>i){let d;return n<=i?(vb.Assert(e===r+1,"originalStart should only be one more than originalEnd"),d=[new yR(e,0,n,i-n+1)]):e<=r?(vb.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new yR(e,r-e+1,n,0)]):(vb.Assert(e===r+1,"originalStart should only be one more than originalEnd"),vb.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,r,n,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,n,u),p=this.ComputeDiffRecursive(c+1,r,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,r,n,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new pj,B=r,N=n,q=h[0]-v[0]-i,te=-1073741824,me=this.m_forwardHistory.length-1;do{let oe=q+e;oe===B||oe<N&&u[oe-1]<u[oe+1]?(p=u[oe+1],g=p-q-i,p<te&&k.MarkNextChange(),te=p,k.AddModifiedElement(p+1,g),q=oe+1-e):(p=u[oe-1]+1,g=p-q-i,p<te&&k.MarkNextChange(),te=p-1,k.AddOriginalElement(p,g+1),q=oe-1-e),me>=0&&(u=this.m_forwardHistory[me],e=u[0],B=1,N=u.length-1)}while(--me>=-1);E=k.getReverseChanges(),k=new pj,B=a,N=l,q=h[0]-v[0]-c,te=1073741824,me=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let oe=q+o;oe===B||oe<N&&d[oe-1]>=d[oe+1]?(p=d[oe+1]-1,g=p-q-c,p>te&&k.MarkNextChange(),te=p+1,k.AddOriginalElement(p+1,g+1),q=oe+1-o):(p=d[oe-1],g=p-q-c,p>te&&k.MarkNextChange(),te=p,k.AddModifiedElement(p+1,g+1),q=oe-1-o),me>=0&&(d=this.m_reverseHistory[me],o=d[0],B=1,N=d.length-1)}while(--me>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,r,n,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,n--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=r-e+(i-n),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-n,E=r-e,_=e-n,k=r-i,N=(E-b)%2===0;y[b]=e,v[E]=r;for(let q=1;q<=h/2+1;q++){let te=0,me=0;u=this.ClipDiagonalBound(b-q,q,b,g),d=this.ClipDiagonalBound(b+q,q,b,g);for(let oe=u;oe<=d;oe+=2){oe===u||oe<d&&y[oe-1]<y[oe+1]?l=y[oe+1]:l=y[oe-1]+1,c=l-(oe-b)-_;let H=l;for(;l<r&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[oe]=l,l+c>te+me&&(te=l,me=c),!N&&Math.abs(oe-E)<=q-1&&l>=v[oe])return o[0]=l,a[0]=c,H<=v[oe]&&q<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-q,q,E,g),m=this.ClipDiagonalBound(E+q,q,E,g);for(let oe=p;oe<=m;oe+=2){oe===p||oe<m&&v[oe-1]>=v[oe+1]?l=v[oe+1]-1:l=v[oe-1],c=l-(oe-E)-k;let H=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[oe]=l,N&&Math.abs(oe-b)<=q&&l<=y[oe])return o[0]=l,a[0]=c,H>=y[oe]&&q<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N):null}if(q<=1447){let oe=new Int32Array(d-u+2);oe[0]=b-u+1,bb.Copy2(y,u,oe,1,d-u+1),this.m_forwardHistory.push(oe),oe=new Int32Array(m-p+2),oe[0]=E-p+1,bb.Copy2(v,p,oe,1,m-p+1),this.m_reverseHistory.push(oe)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,r,o,c,i,a,N)}ConcatenateChanges(e,r){let n=[];if(e.length===0||r.length===0)return r.length>0?r:e;if(this.ChangesOverlap(e[e.length-1],r[0],n)){let i=new Array(e.length+r.length-1);return bb.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],bb.Copy(r,1,i,e.length,r.length-1),i}else{let i=new Array(e.length+r.length);return bb.Copy(e,0,i,0,e.length),bb.Copy(r,0,i,e.length,r.length),i}}ChangesOverlap(e,r,n){if(vb.Assert(e.originalStart<=r.originalStart,"Left change is not less than or equal to right change"),vb.Assert(e.modifiedStart<=r.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=r.originalStart||e.modifiedStart+e.modifiedLength>=r.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=r.originalStart&&(o=r.originalStart+r.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=r.modifiedStart&&(l=r.modifiedStart+r.modifiedLength-e.modifiedStart),n[0]=new yR(i,o,a,l),!0}else return n[0]=null,!1}ClipDiagonalBound(e,r,n,i){if(e>=0&&e<i)return e;let o=n,a=i-n-1,l=r%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function FQe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(FQe,"isObject");function mj(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(mj,"assertType");function MQe(t){let e=new Set;return JSON.stringify(t,(r,n)=>{if(FQe(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}s(MQe,"safeStringify");var hj=!1,Ide=!0,j8t=200,_9=class{constructor(e,r){this.ID=e;this._parserService=r;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,r){let n=new Cb(e),i=e.getActiveDocument(),o=cT(i);if(!o||!o.isEmpty())return Ri.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},n);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let _ of e.documents)_.id!==i.id&&(c.push(`RELATED DOC: ${_.getDisplayPath()}`),c.push("```patch"),c.push(...K8t(_)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let _=p<l.length;c.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),_&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,r);if(r.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n);if(g.isError())return g.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},n):Ri.noEdit({kind:"fetchFailure",error:new Error(MQe(g.err))},n);let{result:y,ttft:v}=g.val;if(v!==void 0&&n.setTtft(v),y.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},n);let b=gj(i.languageId,l,d,void 0,y,m),E=await _de(this._parserService,b,i,{requireEditWithinNLines:5});if(E){let _=new No([E]);return Ri.edit({edit:_},n)}else return Ri.noEdit({kind:"filteredOut",message:"uncategorized"},n)}};_9=Cu([Vs(1,_y)],_9);var CR=class extends _9{constructor(r,n){super(CR.ID,r);this._chatMLFetcher=n}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(r,n,i){if(i.isCancellationRequested)return Qo.error({kind:"cancel"});let o=await Tde(this.ID,this._chatMLFetcher,[{role:vde.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:vde.OpenAI.ChatRole.User,content:r}],{convergence:n},i);if(o.isError())return o;let{ignored:a,result:l,ttft:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),Qo.ok({ignored:a,result:l,ttft:c})}};CR=Cu([Vs(0,_y),Vs(1,ih)],CR);async function Tde(t,e,r,n,i){let o=new dj,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=$8t(c,n),d=e.fetchOne(r,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?Qo.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):Qo.ok({ttft:l,ignored:p,result:m})}s(Tde,"fetchUntilConvergence");function cT(t){let e=new kt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:V8t(t)}s(cT,"getOrDeduceSelectionFromLastEdit");function V8t(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],r=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(r.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[r.endLineNumberExclusive-2],l=S5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(V8t,"deduceSelectionFromLastEdit");async function $8t(t,e){let r=z8t(t,e.ignoreReplyTextBefore),n=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=n.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of r){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(n.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||n.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s($8t,"fetchCompletionUntilConvergence");function z8t(t,e){let r=[],n=[];return new C9(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||r[l]){i.emitOne({kind:"completion",index:l,text:c});continue}n[l]=(n[l]??"")+c;let u=n[l].match(e);!u||typeof u.index>"u"||(r[l]=!0,i.emitOne({kind:"ignore",index:l,text:n[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:n[l].substring(u.index+u[0].length)}),n[l]=void 0)}for(let o=0;o<n.length;o++)typeof n[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:n[o]})})}s(z8t,"getTextAfterFirstPattern");function Y8t(t,e,r){let n=e.startLineNumber,i=e.endLineNumberExclusive,o=r.slice(0);for(;n+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;n+1<i&&o.length>0;){let a=t[n-1],l=o[0];if(a!==l)break;n++,o.shift()}return new Fm(new Yt(n,i),o)}s(Y8t,"createReducedLineEdit");var xR=class{constructor(e,r,n,i){this.languageId=e;this.oldLines=r;this.oldLines=r,this.edit=Y8t(r,n,i);let o=new No([this.edit]);this.newLines=o.apply(r)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let r=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),n=this.edit.newLines;return o(r,n)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new bde(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),r=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),n=!1,i=new I9(this.oldLines,n),o=new I9(this.newLines,n),a=new w9(i,o),l=e(a.ComputeDiff(),i,o),c=r(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(n2(this.newLines,u))return new Ede(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return OQe(this.languageId,this.oldLines,u);function d(p,m){let h=new T9(p),g=new T9(m),v=new w9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,B=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:B}}}},bde=class{constructor(e,r,n,i,o){this.originalStart=e;this.originalLength=r;this.modifiedStart=n;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},Ede=class{constructor(e,r,n,i,o,a){this.languageId=e;this.oldLines=r;this.edit=n;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new No([this.edit]);{let r=this.groupInHunks();return new No(r.map(n=>{let i=n[0],o=n[n.length-1];return new Fm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!Ide)return this;let e=this.groupInHunks(),r=[];for(let n of e)n.every(o=>o.originalLength===0)||n.reduce((a,l)=>a+l.editDistance,0)>j8t&&(r=r.concat(n));if(r.length===this.diff.length)return null;if(r.length>0){let n=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(n)}return this}containWithinLines(e){let r=this.groupInHunks(),n=[];for(let i of r)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!wde(new Yt(a,l),e)){n=n.concat(i);break}}if(n.length===this.diff.length)return null;if(n.length>0){let i=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let r of this.diff){let n=e.length>0?e[e.length-1]:null;if(!n){e.push([r]);continue}let i=n[n.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,r.originalStart);if(o.length>1){e.push([r]);continue}if(o[0].trim().length>10){e.push([r]);continue}if(n.reduce((c,u)=>c+u.originalLength,0)>1){e.push([r]);continue}n.push(r)}return e}_recreateNewLinesWithoutDiffs(e){let r=[],n=0;for(let i of e)r=r.concat(this.newLines.slice(n,i.modifiedStart)),r=r.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),n=i.modifiedStart+i.modifiedLength;return r=r.concat(this.newLines.slice(n)),r}async resolveParseErrorCountIfPossible(e,r){let n=new No([this.edit]),i=r(n);this.parseErrorCount=await S9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(r=>this._createPossibleEditFromLines(r).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let r of this.diff){let n=this.oldLines.slice(r.originalStart,r.originalStart+r.originalLength),i=this.newLines.slice(r.modifiedStart,r.modifiedStart+r.modifiedLength);if(r.modifiedLength===0){if(n.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,0,...n),e(a)}continue}if(r.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(r.modifiedStart,r.modifiedLength),e(a)}continue}for(let o=0;o<n.length&&o<i.length;o++){let a=n[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+o,1),e(d)}}}for(let o=1;o<=n.length&&o<=i.length;o++){let a=n[n.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(r.modifiedStart+r.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],r=0,n=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(r,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);n=n||l,e=e.concat(c),r=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(r)),n?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,r){if(r.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=aj(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let n=e.map(c=>aj(c,this.languageId)),i=r.map(c=>aj(c,this.languageId)),o=n.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:r};if(o>0)return{hasChanges:!1,newDiffModifiedLines:r};let l=!1;for(let c=0;c<r.length;c++){let u=r[c],d=i[c];if(!d)continue;let{content:p}=d;r[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:r}}_createPossibleEditFromLines(e){return OQe(this.languageId,this.oldLines,e)}};function wde(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(wde,"editIsInsideEditWindow");function OQe(t,e,r){let i=e.length+1,o=r.slice(0);return new xR(t,e,new Yt(1,i),o).resolveDiff()}s(OQe,"createPossibleEditFromLines");function gj(t,e,r,n,i,o){if(i.trim().length===0)return[];let a=gR.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new xR(t,e,v,b))},"generateEdit");function d(){n&&u(n,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(r.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=r.endLineNumberExclusive-1;_<e.length;_++){let B=e.slice(_,_+v).join(`
`);E===B&&u(new Yt(r.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...gj(t,e,r,n,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let B=b(k);E.has(B)||(E.add(B),_.push(k))}return _}}s(gj,"generatePossibleEdits");async function _de(t,e,r,n){let a=e.filter(p=>p.hasEditWithinFirstLines(n.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=hj?await S9(t,r.languageId,r.documentAfterEditsNoShortening.value):"unknown";if(hj){let p=s(m=>{let h=r.documentAfterEditsNoShortening;return r.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(_de,"selectBestEdit");function K8t(t){let r=[],n=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&r.push("[...]"),u?r.push(`-${n[c]}`):r.push(`${n[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;r.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<n.length;)i-o+2<=2&&l(i,!1),i++;return r.push("[...]"),r}s(K8t,"summariseDocDiff");function UQe(t){let e=[];for(let r of t.recentEdit.edits){let n=t.documentLinesBeforeEdit.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1),i=r.newLines;if(n.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=r.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${n.length} +${o},${i.length} @@`),e.push(...n.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(UQe,"summarizeEditsAsUnifiedDiff");async function S9(t,e,r){return await t.getTreeSitterAST({languageId:e,getText:s(()=>r,"getText")})?.getParseErrorCount()??"unknown"}s(S9,"getParseErrorCount");f();var Sy=je(th());f();var R9=$0("ITokenizerProvider");var Eb=class extends Sy.PromptRenderer{constructor(r,n,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,r,n,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(r,n,i,o={validate:!0}){return r.invokeFunction(a=>{let l=a.get(R9);return new Eb(n,i,o,l,r,a.get(ih))})}createElement(r,...n){return this._instantiationService.createInstance(r.ctor,r.props,...n)}async render(r,n,i){let o=await super.render(r,n);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===Sy.Raw.ChatRole.System&&d.role===Sy.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===Sy.Raw.ChatCompletionContentPartKind.Text&&m.type===Sy.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:Sy.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==Sy.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(r){return(await super.render(void 0,r)).tokenCount}};Eb=Cu([Vs(3,R9),Vs(4,dA),Vs(5,ih)],Eb);f();var qQe=je(th());var Aj=class extends qQe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var uT=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let r=0;r<e.length;r++)e.charAt(r)===`
`&&(this.lineStartOffsetByLineIdx.push(r+1),r>0&&e.charAt(r-1)==="\r"?this.lineEndOffsetByLineIdx.push(r-1):this.lineEndOffsetByLineIdx.push(r));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new kt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let r=T0(this.lineStartOffsetByLineIdx,o=>o<=e),n=r+1,i=e-this.lineStartOffsetByLineIdx[r]+1;return new sn(n,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ul.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ul(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Sde=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new kt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Od(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},oh=class extends Sde{constructor(r){super();this.value=r;this._transformer=new uT(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(r){let n=this._transformer.getOffset(new sn(r+1,1)),i=n+this.getLineLength(r);return this.value.substring(n,i)}getLineLength(r){return this._transformer.getLineLength(r+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(r){return r.substring(this.value)}getPositionAtOffset(r){return J8t(this._transformer.getPosition(r))}getOffsetAtPosition(r){return r=this._validatePosition(r),this._transformer.getOffset(X8t(r))}_validatePosition(r){if(r.line<0)return new To(0,0);let n=this._transformer.textLength.lineCount+1;if(r.line>=n){let o=this._transformer.getLineLength(n);return new To(n-1,o)}if(r.character<0)return new To(r.line,0);let i=this._transformer.getLineLength(r.line+1);return r.character>i?new To(r.line,i):r}};function J8t(t){return new To(t.lineNumber-1,t.column-1)}s(J8t,"corePositionToVSCodePosition");function X8t(t){return new sn(t.line+1,t.character+1)}s(X8t,"vsCodePositionToCorePosition");f();f();function WQe(t){if(t.length===0)return 1/0;let e=t[0];for(let r=1;r<t.length;r++)e=Math.min(e,t[r]);return e}s(WQe,"min");f();function Rde(t,e){let r=e(t);return{...r,range:[r.range.start,r.range.endExclusive],children:r.children?.map(n=>Rde(n,e))}}s(Rde,"toAstNode");function GQe(t,e){let r=t2(e,a=>a.endExclusive>=t.start),n=T0(e,a=>a.start<=t.endExclusive)+1;if(r===n)return[t];let i=[],o=t.start;for(let a=r;a<n;a++){let l=e[a];l.start>o&&i.push(new kt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new kt(o,t.endExclusive)),i}s(GQe,"subtractRange");f();f();f();var yj=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,r){e=l2(e);let n=this.values,i=this.prefixSum,o=r.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(r,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,r){return e=l2(e),r=l2(r),this.values[e]===r?!1:(this.values[e]=r,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,r){e=l2(e),r=l2(r);let n=this.values,i=this.prefixSum;if(e>=n.length)return!1;let o=n.length-e;return r>=o&&(r=o),r===0?!1:(this.values=new Uint32Array(n.length-r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+r),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=l2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new kde(i,e-a)}};var kde=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}static{s(this,"PrefixSumIndexOfResult")}};var k9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=Rg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let r=new Uint32Array(this._lines.length);for(let n=0;n<this._lines.length;n++)r[n]=this._lines[n].length+this._eol.length;this._lineStarts=new yj(r)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:r}=e;for(let n=r.length-1;n>=0;n--){let i=r[n],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,r){if(r.length===0)return;let n=Rg(r);if(n.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]+this._lines[e.line].substring(e.character));return}n[n.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+n[0]);let i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.line+1+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,r){this._lines[e]=r,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new To(r.index,Math.min(r.remainder,n))}toRange(e){return new Od(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new kt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let r=e.map(n=>new hR(this.validateRange(n.range),n.newText));return new op(r.map(n=>new Za(this.toOffsetRange(n.range),n.newText)))}toTextEdits(e){return e.edits.map(r=>new hR(this.toRange(r.replaceRange),r.newText))}validatePosition(e){if(!(e instanceof To))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new To(r,n):e}validateRange(e){return new Od(this.validatePosition(e.start),this.validatePosition(e.end))}};var Cj=class{constructor(e,r){this.originalText=e;this.edits=r;this._positionOffsetTransformer=new Sg(()=>new k9(this.text));this._originalPositionOffsetTransformer=new Sg(()=>new k9(this.originalText));this._text=new Sg(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let r=this.originalPositionOffsetTransformer.toOffsetRange(e),n=this.projectOffsetRange(r);return this.positionOffsetTransformer.toRange(n)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let r=this.positionOffsetTransformer.toOffsetEdit(e),n=this.projectBackOffsetEdit(r);return this.originalPositionOffsetTransformer.toTextEdits(n)}};var Bde=class{constructor(e,r,n,i,o){this.parent=e;this.overlayNode=r;this.range=n;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},fT=class extends Cj{constructor(r,n){super(r.getText(),n);this.baseDocument=r}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function vj(t,e,r){let n=[],i=[],o=[];for(let l=0;l<r.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=r[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=HQe(u,c),g=Dde.fromRootNode(h,p),y=Pde.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(q=>q.node.range.intersectsOrTouches(m)?(q.node.children.length===0&&q.markAsSurviving(),!0):!1),n.push(y),i.push(y.getTextFragment());let v=s(q=>m?q.range.endExclusive<m.start?m.start-q.range.endExclusive:q.range.start>m.endExclusive?3*(q.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new j1(q=>m?q.children.length===0?q.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:WQe(q.children.map(te=>b.get(te)))+1:0),E=new j1(q=>{let te=q.parent?E.get(q.parent):Number.MAX_SAFE_INTEGER,me=b.get(q);return Math.min(te,me)}),_=!!e.tryPreserveTypeChecking,k=s(q=>_&&q.node?.kind==="import_statement"?0:100*E.get(q)+q.depth+10*(v(q)/p.length),"costFn"),B=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(B!==void 0){let q=k;k=s(te=>{let me=q(te);return me===!1?!1:te.node?B(te.node,me,c):me},"costFn")}let N=y.getDescendantsAndSelf();for(let q of N){if(!q.node.node)continue;let te=k(q.node);te!==!1&&o.push({idx:l,node:q,cost:te})}}o.sort(w0(l=>l.cost,_0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),n.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=n[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=r[l],d=new fT(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=n[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:GQe(kt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:Rde(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(vj,"summarizeDocumentsSyncImpl");function HQe(t,e,r=void 0){let n=new kt(t.startIndex,t.endIndex),i=[],o=new Bde(r,t,n,i,e);for(let a of t.children)i.push(HQe(a,e,o));return o}s(HQe,"createRemovableNodeFromOverlayNode");var Dde=class t{constructor(e,r,n,i,o,a){this.node=e;this.range=r;this.children=n;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,r){let n=new kt(0,r.length);if(e.range.equals(n))return t.fromNode(e,r);let i=new kt(0,e.range.start),o=new kt(e.range.endExclusive,r.length),a=[],l=new t(void 0,n,a,0,null,r);return i.isEmpty||a.push(new t(void 0,i,[],0,l,r)),a.push(t.fromNode(e,r,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,r)),l}static fromNode(e,r,n=0,i=null){let o=[],a=new t(e,e.range,o,n,i,r);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new kt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],n,a,r)),o.push(t.fromNode(u,r,n+1,a)),l=u.range.endExclusive}let c=new kt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],n,a,r))}return a}getLeadingWs(){return Z8t(this.document,this.range)}getTrailingWs(){return eDt(this.document,this.range)}};function Z8t(t,e){let r=e.substring(t),n=r.length-r.trimStart().length;return r.substring(0,n)}s(Z8t,"getLeadingWs");function eDt(t,e){let r=e.substring(t),n=r.length-r.trimEnd().length;return r.substring(r.length-n)}s(eDt,"getTrailingWs");var Pde=class t{constructor(e,r,n,i,o){this.node=e;this.parent=r;this.childNodes=n;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,r,n){return t.fromNodeParent(e,null,r,n)}static fromNodeParent(e,r,n,i){let o=[],a=new t(e,r,o,n,i);for(let l of e.children){let c=t.fromNodeParent(l,a,n,i);o.push(c)}return a}visitAll(e){if(e(this))for(let r of this.childNodes)r.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Ib(this.node.range,this.node.document);if(!this._surviving)return new dT("");let e=Array.from(o5(this.childNodes.map(n=>({node:n,fragment:n.getTextFragment()})),(n,i)=>n.fragment.length===0==(i.fragment.length===0)));for(let n=0;n<e.length;n++){let i=e[n],o=i[0].fragment.length===0;if(o&&n>0&&n<e.length-1){let a=e[n-1].at(-1),l=e[n+1].at(0);if(a.fragment instanceof Ib&&l.fragment instanceof Ib){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[n-1][e[n-1].length-1].fragment=c,i.length=1,i[0].fragment=new dT(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[n+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(n>0||n<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new dT(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let r=[];for(let n of e)for(let i of n)tDt(r,i.fragment);return xj.from(r)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let r of this.childNodes)r._getDescendantsAndSelf(e)}},B9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let r=[],n=0,i="";function o(l){(n!==l||i.length>0)&&(r.push(new Za(new kt(n,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof xj)for(let c of l.fragments)a(c);else l instanceof dT?i+=l.text:l instanceof Ib&&(o(l.range.start),n=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new op(r)}},dT=class extends B9{constructor(r){super();this.text=r}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Ib=class t extends B9{constructor(r,n){super();this.range=r;this.originalText=n}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let r=this.text.trimStart();return r.length===this.length?this:new t(new kt(this.range.endExclusive-r.length,this.range.endExclusive),this.originalText)}trimEnd(){let r=this.text.trimEnd();return r.length===this.length?this:new t(new kt(this.range.start,this.range.start+r.length),this.originalText)}startsWith(r){return this.text.startsWith(r)}endsWith(r){return this.text.endsWith(r)}tryJoin(r){return this.range.endExclusive===r.range.start?new t(new kt(this.range.start,r.range.endExclusive),this.originalText):null}},xj=class t extends B9{constructor(r){super();this.fragments=r;this.length=this.fragments.reduce((r,n)=>r+n.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(r){return r.length===0?new dT(""):r.length===1?r[0]:new t(r)}get text(){return this.fragments.map(r=>r.text).join("")}};function tDt(t,e){if(e.length===0)return;let r=t[t.length-1];if(r&&r instanceof Ib&&e instanceof Ib){let n=r.tryJoin(e);if(n){t[t.length-1]=n;return}}t.push(e)}s(tDt,"pushFragment");f();var bj=je(th());function D9(t){if(Array.isArray(t))return t.map(r=>D9(r));let e=(0,bj.toMode)(bj.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let r of e.content)r.type==="text"&&(r.text=r.text.trimEnd());return e}s(D9,"rawMessageToCAPI");f();f();var Ej=class{constructor(e,r,n,i){this.startIndex=e;this.endIndex=r;this.kind=n;this.children=i;if(e>r)throw new vn("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new vn("Invalid child startIndex");if(a.endIndex>r)throw new vn("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function r(n,i=""){e.push(`${i}${n.kind} [${n.startIndex}, ${n.endIndex}]`),n.children.forEach(o=>r(o,i+"    "))}return s(r,"toString"),r(this),e.join(`
`)}};function VQe(t,e,r){let n=t.getText().split(/\r\n|\r|\n/g),i=r||{tabSize:4},o={getLineCount:s(()=>n.length,"getLineCount"),getLineContent:s(a=>n[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=rDt(o,e),[l]=$Qe(t,a,void 0);return l.adjust(t,zQe(e)),l.toOverlayNode(t,!0)}catch{return new Ij(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(VQe,"getStructureUsingIndentation");function $Qe(t,e,r){if(typeof r<"u"&&r>=e.length)throw new Error(`Invalid region index ${r}`);let n=typeof r>"u"?1:e.getStartLineNumber(r),i=typeof r>"u"?t.getLineCount():e.getEndLineNumber(r),o=[],a=null;for(r=typeof r>"u"?0:r+1;r<e.length;){let l=e.getStartLineNumber(r),c=e.getEndLineNumber(r);if(l>i||c>i)break;let u=a;if([a,r]=$Qe(t,e,r),u&&a.startLineNumber<=u.endLineNumber)throw new vn("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<n)throw new vn("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new Ij(n,i,o),r]}s($Qe,"createFoldingRangeTree");var Ij=class{constructor(e,r,n){this.startLineNumber=e;this.endLineNumber=r;this.children=n;if(e>r)throw new vn("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,r){r?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,r){if(this.endLineNumber<r){let n=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(n),o=/^<\/\w/.test(n);(i||o)&&this.endLineNumber++}for(let n=this.children.length-1;n>=0;n--){let i=this.children[n],o=n+1<this.children.length?this.children[n+1].startLineNumber-1:r;i._adjustRegular(e,o)}}toOverlayNode(e,r){let n=[],i=r&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=Nde(e,a,a,"LINE",[]);l&&n.push(l)}n.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=Nde(e,o,o,"LINE",[]);a&&n.push(a)}return Nde(e,this.startLineNumber,this.endLineNumber,"FOLD",n)}};function Nde(t,e,r,n,i){let o=t.getOffsetAtPosition(new To(e-1,0)),a=r<t.getLineCount()?new To(r,0):new To(r-1,t.getLineLength(r-1)),l=t.getOffsetAtPosition(a);return new Ej(o,l,n,i)}s(Nde,"createOverlayNode");function rDt(t,e){return nDt(t,zQe(e))}s(rDt,"generateFoldingRegions");function zQe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(zQe,"isOffSide");function nDt(t,e){let r=t.getOptions().tabSize,n=new Lde,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=oDt(l,r),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&n.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return n.toIndentRanges()}s(nDt,"_computeRanges");var iDt=65535,pT=16777215,jQe=4278190080,Lde=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,r,n){if(e>pT||r>pT)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=r,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),r=new Uint32Array(this._length);for(let n=this._length-1,i=0;n>=0;n--,i++)e[i]=this._startIndexes[n],r[i]=this._endIndexes[n];return new Fde(e,r)}};function oDt(t,e){let r=0,n=0,i=t.length;for(;n<i;){let o=t.charCodeAt(n);if(o===32)r++;else if(o===9)r=r-r%e+e;else break;n++}return n===i?-1:r}s(oDt,"computeIndentLevel");var Fde=class{static{s(this,"FoldingRegions")}constructor(e,r){this._startIndexes=e,this._endIndexes=r,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],r=s((n,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let n=0,i=this._startIndexes.length;n<i;n++){let o=this._startIndexes[n],a=this._endIndexes[n];if(o>pT||a>pT)throw new Error("startLineNumber or endLineNumber must not exceed "+pT);for(;e.length>0&&!r(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((l&255)<<24),this._endIndexes[n]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&pT}getEndLineNumber(e){return this._endIndexes[e]&pT}getParentIndex(e){this.ensureParentIndices();let r=((this._startIndexes[e]&jQe)>>>24)+((this._endIndexes[e]&jQe)>>>16);return r===iDt?-1:r}contains(e,r){return this.getStartLineNumber(e)<=r&&this.getEndLineNumber(e)>=r}findIndex(e){let r=0,n=this._startIndexes.length;if(n===0)return-1;for(;r<n;){let i=Math.floor((r+n)/2);e<this.getStartLineNumber(i)?n=i:r=i+1}return r-1}findRange(e){let r=this.findIndex(e);if(r>=0){if(this.getEndLineNumber(r)>=e)return r;for(r=this.getParentIndex(r);r!==-1;){if(this.contains(r,e))return r;r=this.getParentIndex(r)}}return-1}};f();function mT(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(mT,"fromUnknown");var yl=je(th());var Tj="current-version",Y0="next-version",KQe=2,JQe=10,XQe=.7,sDt=/```[^\n]*\n/,Ry=class extends dR{constructor(r,n,i){super(Ry.ID,[o=>new AR(o),o=>new pR(o),o=>new mR(o)]);this.fetcher=r;this._parserService=n;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new SH}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(r,n){if(r.getActiveDocument().id!==n.getActiveDocument().id||r.documents.length!==n.documents.length)return!1;let i=new Map(r.documents.map(a=>[a.id,a]));for(let a of n.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=cT(a),u=c?Mde(a,c):null,d=cT(l),p=d?Mde(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(KQe,JQe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(r,n){let i=new Cb(r),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(r,i,o,n)}catch(c){return Ri.noEdit({kind:"unexpected",error:mT(c)},i)}let l=o.getArtificalDelay();return l>0&&await wy(l),a}async doGetNextEdit(r,n,i,o){return r.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(r,i,o,n):Ri.noEdit({kind:"activeDocumentHasNoEdits"},n)}async sendRequestAndProcessResult(r,n,i,o){let a=await this.createPrompt(r,i);if(!a)return Ri.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Ri.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(n,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Ri.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),r.fetchIssued=!0;let b=await Tde(this.ID,this.fetcher,D9(p),{convergence:g,ignoreReplyTextBefore:sDt,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&o.setTtft(b.val.ttft),i.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Ri.noEdit({kind:"fetchFailure",error:mT(b.err.err)},o);let E=b.val.result;if(E.length===0){let k=`<${Y0}>
`,B=b.val.ignored.indexOf(k);B>=0&&(E=b.val.ignored.substring(B+k.length))}if(E=aDt(E),E.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=lDt(y,l,c,E);if(!k||k.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let B=cDt(l,k);if(B.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(hj){let te=await S9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),me=B.apply(y.documentAfterEditsNoShortening.value);if(await S9(this._parserService,y.languageId,me)>te)return Ri.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=uDt(y,B);let N=_.edits[0].lineRange.startLineNumber,q=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!wde(new Yt(N,q),u))return Ri.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=gj(y.languageId,v,m,h,E,void 0),B=await _de(this._parserService,k,y,{requireEditWithinNLines:100});if(!B)return Ri.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new No([B])}return dDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):fDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):pDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):mDt(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):Ri.edit({edit:_},o)}async debounce(r,n){let i=r.getDebounceTime();n.setDebounceTime(i),await wy(i)}async createPrompt(r,n){let i=r.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=cT(i);if(c===null)return;let u=Mde(i,c),d=new oh(i.documentAfterEditsNoShortening.value),p=await ADt(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let me=hDt(i.documentAfterEditsLines,c.startLineNumber),oe=Math.max(1,Math.min(me,c.startLineNumber-KQe)),H=c.startLineNumber-oe,O=Math.min(l.length,c.endLineNumber+JQe),le=O-c.endLineNumber,ie=u.line-H,j=u.line+le,W=new Od(ie,0,j,d.getLineLength(j));return{firstEditableLineInShortenedDocument:oe,lastEditableLineInShortenedDocument:O,editWindow:W}}(),y=vj(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:B}=await this._renderPrompt({request:r,activeDocumentSlice:E,languageId:i.languageId},n),N=E.split(/\r\n|\r|\n/).length,q=y.projectRange(g),te=y.positionOffsetTransformer.toOffsetRange(q);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(q.start.line+1,q.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:B,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:te.start,maxCompletionLineCount:N+20}}async _renderPrompt(r,n){let o=await Eb.create(this._instantiationService,Ode,r).render(void 0,n,{trace:!1}),a=o.metadata.get(kj)?.prediction,l=!!o.metadata.get(_j);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};Ry=Cu([Vs(0,ih),Vs(1,_y),Vs(2,dA)],Ry);function aDt(t){function e(r,n,i){let o=r.lastIndexOf(n);if(o===-1)return r;let a=r.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${Y0}>`,`
`),t=e(t,`\`\`\`
</${Y0}>`,`
`),t=e(t,`</${Y0}>`,`
`),t}s(aDt,"removeSuffixFromReply");function Mde(t,e){let r=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),n=t.toOffsetOnDocumentAfterEditsNoShortening(r);return new oh(t.documentAfterEditsNoShortening.value).getPositionAtOffset(n)}s(Mde,"getCursorPositionInOuterDocument");function lDt(t,e,r,n){let i=gR.fromString(e.text),o=gR.fromString(n.trimEnd()),l=new xR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(r);if(!c)return null;let u=Ide?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(lDt,"generateSummarizedEditWindowEdit");function cDt(t,e){let r=e.toEdit(new ql(t.text));return t.projectBackOffsetEdit(r.toOffsetEdit())}s(cDt,"convertSummarizedEditWindowEditToOuterDocumentEdit");function uDt(t,e){let r=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Ms.replace(new kt(a,a+i.replaceRange.length),i.newText)}),n=new Xc(t.documentAfterEdits,xs.create(r));return No.fromEdit(n)}s(uDt,"convertOuterDocumentEditToProjectedEdit");function dDt(t,e){let r=e.toEdit(t.documentAfterEdits),n=ZQe(t.documentAfterEdits.value,r),i=new wj,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(ZQe(o,a)),o=a.apply(o);return!!i.isUndoneBy(n)}s(dDt,"editWouldUndo");function fDt(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!iOe(r))return!1;for(let n=t.recentEdits.edits.length-1;n>=0;n--){let i=t.recentEdits.edits[n],o=r.tryRebase(i);if(!o)return!0;r=o}return!1}s(fDt,"editWouldDeleteWhatWasJustInserted");function pDt(t,e){let r=e.toEdit(t.documentAfterEdits);if(r=r.normalizeOnSource(t.documentAfterEdits.value),!iOe(r))return!1;for(let n of r.edits){let i=t.documentAfterEdits.value.substring(n.range.start,n.range.endExclusive);if(Cde(i,t.languageId))return!0}return!1}s(pDt,"editWouldDeleteAComment");function mDt(t,e){if(e.edits.length!==1)return!1;let r=e.edits[0];if(!r.lineRange.isEmpty)return!1;let n=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(r.newLines.filter(n));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(n));return Qde(o,i)/i.size>.8}s(mDt,"editWouldDuplicateExistingLines");function iOe(t){let e=t.edits.reduce((n,i)=>n+i.range.length,0);return t.edits.reduce((n,i)=>n+i.newText.length,0)===0&&e>0}s(iOe,"editIsDeletion");function hDt(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(hDt,"findLineNumberAboveWithContent");var wj=class t{constructor(e=new Set,r=new Set){this.inserted=e;this.deleted=r}static{s(this,"InformationDelta")}combine(e){return new t(tOe(this.inserted,e.inserted),tOe(this.deleted,e.deleted))}isUndoneBy(e){let r=rOe(e.inserted,e.deleted),n=rOe(e.deleted,e.inserted),i=Qde(n,this.inserted),o=Qde(r,this.deleted);return n.size>6&&i/n.size>XQe||r.size>6&&o/r.size>XQe}};function ZQe(t,e){let r=new Set,n=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of eOe(c))n.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of eOe(l))r.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o(gDt(l.newText,c.newText)))}return new wj(r,n)}s(ZQe,"getInformationDelta");function gDt(t,e){let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){let i=t.slice(0,t.length-n),o=e.slice(n);if(i===o)return i}return""}s(gDt,"trimOverlap");function eOe(t){let e=[];for(let r=4;r<t.length;r++){let n=t.slice(r-4,r);e.push(n)}return e}s(eOe,"to4grams");function tOe(t,e){let r=new Set;for(let n of t)r.add(n);for(let n of e)r.add(n);return r}s(tOe,"setUnion");function rOe(t,e){let r=new Set;for(let n of t)e.has(n)||r.add(n);return r}s(rOe,"setMinus");function Qde(t,e){let r=0;for(let n of t)e.has(n)&&r++;return r}s(Qde,"setIntersectionCount");async function ADt(t,e){let n=await t.getTreeSitterAST(e)?.getStructure();return n||VQe(new oh(e.getText()),e.languageId,void 0)}s(ADt,"getStructure");var Ode=class extends yl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,r){let{request:n,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${Y0}>`,`\`\`\`${o}`,`${i}`,"```",`</${Y0}>`].join(`
`),l=(0,yl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new kj(a)}),vscpp(yl.SystemMessage,{priority:1e3},vscpp(Aj,null),this._getInstructions()),vscpp(yl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),n.documents.map((c,u)=>c.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(yl.Chunk,{priority:300},vscpp(Sj,{doc:c}))):vscpp(yl.Chunk,{priority:100+u},vscpp(Sj,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),n.documents.map((c,u)=>c.id===n.getActiveDocument().id?vscpp(l,{priority:300},vscpp(yl.Chunk,{priority:300},vscpp(Rj,{doc:c}))):vscpp(yl.Chunk,{priority:200+u},vscpp(Rj,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(yl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new _j}),"Here is the piece of code I am currently editing in"," ",n.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Tj,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Tj,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Tj,"> and </",Tj,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",Y0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",Y0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",Y0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",Y0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",Y0,">IDENTICAL</",Y0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",Y0,">.")}}},_j=class extends yl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},Sj=class extends yl.PromptElement{static{s(this,"OriginalDocument")}async render(e,r){let{doc:n}=this.props,i=[];for(let o=0;o<n.documentLinesBeforeEdit.length;o++){let a=n.documentLinesBeforeEdit[o];i.push(`${n.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,n.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},Rj=class extends yl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,r){let{doc:n}=this.props,i=[];return i.push("```"),i.push(`---${n.getDisplayPath()}:`),i.push(`+++${n.getDisplayPath()}:`),i.push(...UQe(n)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},kj=class extends yl.PromptMetadata{constructor(r){super();this.prediction=r}static{s(this,"PredictionMetadata")}};f();f();function oOe(t,e){let r=[];for(let[n,i]of t.entries())i===e&&r.push(n);return r}s(oOe,"findIndexes");function yDt(t,e,r,n=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=oOe(r,e[o]).slice(0,n);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=r[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=oOe(t,e[l]).slice(-n).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(yDt,"deduplicateEditRegion");function sOe(t,e,r){let n=t.getLines(),i=n.slice(0,e[0]),o=n.slice(e[1]+1);return{updatedEditWindow:yDt(i,r.split(/\r?\n/),o).join(`
`)}}s(sOe,"postProcessUpdatedEditWindow");f();var Ude={id:"xtab-274-2-full-ft",name:"xtab-4o-mini-finetuned"};f();var Bj=je(th());function aOe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Bj.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Bj.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(aOe,"getTextPart");function CDt(t){return{type:Bj.Raw.ChatCompletionContentPartKind.Text,text:t}}s(CDt,"toTextPart");function qde(t){return[CDt(t)]}s(qde,"toTextParts");f();var Dj=$0("IDiffService");var Vde=je(th());f();var Pj="<|cursor|>",hT="<|code_to_edit|>",vR="<|/code_to_edit|>",cOe="<|area_around_code_to_edit|>",uOe="<|/area_around_code_to_edit|>",xDt="<|current_file_content|>",vDt="<|/current_file_content|>",bDt="<|edit_diff_history|>",EDt="<|/edit_diff_history|>",IDt="<|recently_viewed_code_snippets|>",TDt="<|/recently_viewed_code_snippets|>",wDt="<|recently_viewed_code_snippet|>",_Dt="<|/recently_viewed_code_snippet|>",dOe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${hT} and ${vR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Pj}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${hT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${hT} and ${vR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${hT} or ${vR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function fOe(t,e,r,n){let i=t.getActiveDocument(),o=kDt(t,n),a=SDt(t,n,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${IDt}
${o}
${TDt}

${xDt}
current_file_path: ${l}
${e}
${vDt}

${bDt}
${a}
${EDt}

${r}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Pj}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${hT}\` and \`${vR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(fOe,"getUserPrompt");function SDt(t,e,r){let n=[];for(let a of t.xtabEditHistory.reverse()){let l=RDt(a);if(l===null)continue;let c=e(l);if(r-=c,r<0)break;n.push(l)}let i=n.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(SDt,"getEditDiffHistory");function RDt(t){let e=[],r=No.fromEdit(t.edit);for(let i of r.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(RDt,"generateDocDiff");function lOe(t,e,r=!1){let n=r?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[wDt,n,e,_Dt].join(`
`)}s(lOe,"formatCodeSnippet");function kDt(t,e,r=2e3,n=!1){r=r||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);n&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(lOe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>r;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(lOe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(kDt,"getRecentCodeSnippets");function Wde(t,e,r){if(!t.length)return[0,0];let n=r*4,i=0,o=e?t.length-1:0;for(;i<n;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Wde,"truncateCode");var pOe=2,mOe=10,Gde=15,Hde=1e3,jde=2e3;var fA=class extends dR{constructor(r,n){super(fA.ID,[i=>new AR(i),i=>new pR(i),i=>new mR(i)]);this.diffService=r;this._chatMLFetcher=n;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(r,n){let i=new Cb(r);try{if(r.xtabEditHistory.length===0)return Ri.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(r,n,i);return new Ri(o,i.build(o))}catch(o){return Ri.noEdit({kind:"unexpected",error:mT(o)},i)}}async doGetNextEdit(r,n,i){let o=r.getActiveDocument(),a=cT(o);if(a===null)return Qo.error({kind:"uncategorized",error:mT(new Error("NoSelection"))});let l=s(ee=>Math.floor(ee.length/4),"computeTokens"),c=new sn(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+Pj+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-Gde),y=Math.min(h.length,m+Gde+1),v=pOe,b=mOe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),B;B=d.split(/\r?\n/).slice(E,_);let N=[E,_],q=h.slice(E,_),te=[cOe,...h.slice(g,E),hT,...q,vR,...h.slice(_,y),uOe].join(`
`),me=te,oe;{let ee=l(te),pe=0;if(ee>=jde)oe=te,pe=g;else{let re=Math.floor((jde-ee)/2),[fe]=Wde(h.slice(0,g),!0,re),[,he]=Wde(h.slice(y),!1,re);pe=Math.max(fe,m-Hde);let Ne=Math.min(he+y,m+Hde+1);oe=[...h.slice(pe,g),te,...h.slice(y,Ne)].join(`
`)}}let H=fOe(r,oe,me,l),O=[{role:Vde.Raw.ChatRole.System,content:qde(dOe)},{role:Vde.Raw.ChatRole.User,content:qde(H)}];if(i.setPrompt(O),await this.debounce(i),n.isCancellationRequested)return Qo.error({kind:"gotCancelled",message:"afterDebounce"});r.fetchIssued=!0;let le=new I5,ie,j=await this._chatMLFetcher.fetchOne(D9(O),async(ee,pe,re)=>{ie===void 0&&(ie=le.elapsed())},{id:Ude.id,name:Ude.name},{temperature:0},n);if(j.type==="canceled")return Qo.error({kind:"gotCancelled",message:"afterFetchCall"});if(j.type!=="success")return Qo.error({kind:"fetchFailure",error:mT(j)});ie&&i.setTtft(ie),i.setResponse(j.value);let W=fA.getBacktickSection(j.value);return await this.generateReturnEditFormat(o,k,B.join(`
`),W,N,i)}async generateReturnEditFormat(r,n,i,o,a,l){let{updatedEditWindow:c}=sOe(r.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Fm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?Qo.error({kind:"noSuggestions"}):Qo.ok({editWindow:n,edit:new No(p)})}static getBacktickSection(r){return r.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(r){let n=Date.now()-r.startTime,i=Math.max(0,fA.DEBOUNCE_MS-n);r.setDebounceTime(i),await wy(i)}};fA=Cu([Vs(0,Dj),Vs(1,ih)],fA);f();var Nj=class t extends jo{constructor(r,n=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=n;this.idToEntry=new Map,this.history=new hD,k0(this,r.openDocuments,(i,o)=>{o.add(kg(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ol(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new Xc(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=No.fromEdit(p),h=No.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new Xc(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(r,n){let i={docId:r,edit:n},o=this.history.push(i);if(this.idToEntry.set(r,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var $de=class t{constructor(e){this.edits=e;Lu(()=>yv(e,(r,n)=>r.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,r){let n=e.edits.map(i=>new pA(r.getTransformer().getRange(i.replaceRange),i.newText));return new t(n)}static single(e,r){return new t([new pA(e,r)])}static insert(e,r){return new t([new pA(zt.fromPositions(e,e),r)])}normalize(){let e=[];for(let r of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(r.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new pA(n.range.plusRange(r.range),n.text+r.text)}else r.isEmpty||e.push(r);return new t(e)}mapPosition(e){let r=0,n=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=Ul.ofText(o.text);if(e.isBefore(l)){let u=new sn(a.lineNumber+r,a.column+(a.lineNumber+r===n?i:0)),d=c.addToPosition(u);return Lj(u,d)}a.lineNumber+r!==n&&(i=0),r+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,n=l.lineNumber+r}return new sn(e.lineNumber+r,e.column+(e.lineNumber+r===n?i:0))}mapRange(e){function r(a){return a instanceof sn?a:a.getStartPosition()}s(r,"getStart");function n(a){return a instanceof sn?a:a.getEndPosition()}s(n,"getEnd");let i=r(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return Lj(i,o)}inverseMapPosition(e,r){return this.inverse(r).mapPosition(e)}inverseMapRange(e,r){return this.inverse(r).mapRange(e)}apply(e){let r="",n=new sn(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=Lj(n,l);u.isEmpty()||(r+=e.getValueOfRange(u)),r+=o.text,n=c}let i=Lj(n,e.endPositionExclusive);return i.isEmpty()||(r+=e.getValueOfRange(i)),r}applyToString(e){let r=new Yde(e);return this.apply(r)}inverse(e){let r=this.getNewRanges();return new t(this.edits.map((n,i)=>new pA(r[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],r=0,n=0,i=0;for(let o of this.edits){let a=Ul.ofText(o.text),l=sn.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===r?i:0)}),c=a.createRange(l);e.push(c),n=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,r=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new vn;if(this.edits.length===1)return this.edits[0];let r=this.edits[0].range.getStartPosition(),n=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new pA(zt.fromPositions(r,n),i)}equals(e){return n2(this.edits,e.edits,(r,n)=>r.equals(n))}},pA=class t{constructor(e,r){this.range=e;this.text=r}static{s(this,"SingleTextEdit")}static joinEdits(e,r){if(e.length===0)throw new vn;if(e.length===1)return e[0];let n=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=r.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(n,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,r){return e.range.equalsRange(r.range)&&e.text===r.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new $de([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,r){if(this.range.containsRange(e))return this;let n=this.range.plusRange(e),i=r.getValueOfRange(zt.fromPositions(n.getStartPosition(),this.range.getStartPosition())),o=r.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),n.getEndPosition())),a=i+this.text+o;return new t(n,a)}extendToFullLine(e){let r=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(r,e)}removeCommonPrefix(e){let r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),i=AD(r,n),o=Ul.ofText(r.substring(0,i)).addToPosition(this.range.getStartPosition()),a=n.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let r=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=AD(r,n);r=r.substring(i),n=n.substring(i);let o=S5(r,n);return r=r.substring(0,r.length-o),n=n.substring(0,n.length-o),r===""}};function Lj(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new vn("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s(Lj,"rangeFromPositions");var Fj=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new sn(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new uT(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return Rg(e)}},zde=class extends Fj{constructor(r,n){Ol(n>=1);super();this._getLineContent=r;this._lineCount=n}static{s(this,"LineBasedText")}getValueOfRange(r){if(r.startLineNumber===r.endLineNumber)return this._getLineContent(r.startLineNumber).substring(r.startColumn-1,r.endColumn-1);let n=this._getLineContent(r.startLineNumber).substring(r.startColumn-1);for(let i=r.startLineNumber+1;i<r.endLineNumber;i++)n+=`
`+this._getLineContent(i);return n+=`
`+this._getLineContent(r.endLineNumber).substring(0,r.endColumn-1),n}getLineLength(r){return this._getLineContent(r).length}get length(){let r=this._getLineContent(this._lineCount);return new Ul(this._lineCount-1,r.length)}},gT=class extends zde{static{s(this,"ArrayText")}constructor(e){super(r=>e[r-1],e.length)}},Yde=class extends Fj{constructor(r){super();this.value=r;this._t=new uT(this.value)}static{s(this,"StringText")}getValueOfRange(r){return this._t.getOffsetRange(r).substring(this.value)}get length(){return this._t.textLength}};f();var bR=class{constructor(e,r,n){this.changes=e;this.moves=r;this.hitTimeout=n}static{s(this,"LinesDiff")}},ER=class t{static{s(this,"MovedText")}constructor(e,r){this.lineRangeMapping=e,this.changes=r}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var bp=class t{static{s(this,"LineRangeMapping")}static inverse(e,r,n){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,r+1),new Yt(a,n+1));return l.modified.isEmpty||i.push(l),i}static clip(e,r,n){let i=[];for(let o of e){let a=o.original.intersect(r),l=o.modified.intersect(n);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,r){this.original=e,this.modified=r}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),r=this.modified.toInclusiveRange();if(e&&r)return new Ud(e,r);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new vn("not a valid diff");return new Ud(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Ud(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,r){if(hOe(this.original.endLineNumberExclusive,e)&&hOe(this.modified.endLineNumberExclusive,r))return new Ud(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Ud(zt.fromPositions(new sn(this.original.startLineNumber,1),IR(new sn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new sn(this.modified.startLineNumber,1),IR(new sn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Ud(zt.fromPositions(IR(new sn(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),IR(new sn(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(IR(new sn(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),r),IR(new sn(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),r)));throw new vn}};function IR(t,e){if(t.lineNumber<1)return new sn(1,1);if(t.lineNumber>e.length)return new sn(e.length,e[e.length-1].length+1);let r=e[t.lineNumber-1];return t.column>r.length+1?new sn(t.lineNumber,r.length+1):t}s(IR,"normalizePosition");function hOe(t,e){return t>=1&&t<=e.length}s(hOe,"isValidLineNumber");var Tb=class t extends bp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(r,n,e)}constructor(e,r,n){super(e,r),this.innerChanges=n}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Ud=class t{static{s(this,"RangeMapping")}static fromEdit(e){let r=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,r[o]))}static fromEditJoin(e){let r=e.getNewRanges(),n=e.edits.map((i,o)=>new t(i.range,r[o]));return t.join(n)}static join(e){if(e.length===0)throw new vn("Cannot join an empty list of range mappings");let r=e[0];for(let n=1;n<e.length;n++)r=r.join(e[n]);return r}static assertSorted(e){for(let r=1;r<e.length;r++){let n=e[r-1],i=e[r];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new vn("Range mappings must be sorted")}}constructor(e,r){this.originalRange=e,this.modifiedRange=r}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let r=e.getValueOfRange(this.modifiedRange);return new pA(this.originalRange,r)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function Kde(t,e,r,n=!1){let i=[];for(let o of o5(t.map(a=>DDt(a,e,r)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new Tb(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Lu(()=>!n&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||r.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:yv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s(Kde,"lineRangeMappingFromRangeMappings");function DDt(t,e,r){let n=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+n<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+n<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=r.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(n=1);let o=new Yt(t.originalRange.startLineNumber+n,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+n,t.modifiedRange.endLineNumber+1+i);return new Tb(o,a,[t])}s(DDt,"getLineRangeMapping");f();var hA=class t{constructor(e,r){this.diffs=e;this.hitTimeout=r}static{s(this,"DiffAlgorithmResult")}static trivial(e,r){return new t([new Ko(kt.ofLength(e.length),kt.ofLength(r.length))],!1)}static trivialTimedOut(e,r){return new t([new Ko(kt.ofLength(e.length),kt.ofLength(r.length))],!0)}},Ko=class t{constructor(e,r){this.seq1Range=e;this.seq2Range=r}static{s(this,"SequenceDiff")}static invert(e,r){let n=[];return sSe(e,(i,o)=>{n.push(t.fromOffsetPairs(i?i.getEndExclusives():mA.zero,o?o.getStarts():new mA(r,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+r)))}),n}static fromOffsetPairs(e,r){return new t(new kt(e.offset1,r.offset1),new kt(e.offset2,r.offset2))}static assertSorted(e){let r;for(let n of e){if(r&&!(r.seq1Range.endExclusive<=n.seq1Range.start&&r.seq2Range.endExclusive<=n.seq2Range.start))throw new vn("Sequence diffs must be sorted");r=n}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let r=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!r||!n))return new t(r,n)}getStarts(){return new mA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new mA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},mA=class t{constructor(e,r){this.offset1=e;this.offset2=r}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},wb=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},Mj=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new vn("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var TR=class{constructor(e,r){this.width=e;this.height=r;this.array=[];this.array=new Array(e*r)}static{s(this,"Array2D")}get(e,r){return this.array[e+r*this.width]}set(e,r,n){this.array[e+r*this.width]=n}};function N9(t){return t===32||t===9}s(N9,"isSpace");var P9=class t{constructor(e,r,n){this.range=e;this.lines=r;this.source=n;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=r[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let r=this.chrKeys.get(e);return r===void 0&&(r=this.chrKeys.size,this.chrKeys.set(e,r)),r}computeSimilarity(e){let r=0,n=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<n;i++)r+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-r/(this.totalCount+e.totalCount)}};var Qj=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,r,n=wb.instance,i){if(e.length===0||r.length===0)return hA.trivial(e,r);let o=new TR(e.length,r.length),a=new TR(e.length,r.length),l=new TR(e.length,r.length);for(let g=0;g<e.length;g++)for(let y=0;y<r.length;y++){if(!n.isValid())return hA.trivialTimedOut(e,r);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===r.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=r.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new Ko(new kt(g+1,u),new kt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=r.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new hA(c,!1)}};f();var wR=class{static{s(this,"MyersDiffAlgorithm")}compute(e,r,n=wb.instance){if(e.length===0||r.length===0)return hA.trivial(e,r);let i=e,o=r;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new Jde;c.set(0,a(0,0));let u=new Xde;u.set(0,c.get(0)===0?null:new Oj(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!n.isValid())return hA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),B=k-d;if(b++,k>i.length||B>o.length)continue;let N=a(k,B);c.set(d,N);let q=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new Oj(q,k,B,N-k):q),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new Ko(new kt(y,h),new kt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new hA(m,!1)}},Oj=class{constructor(e,r,n,i){this.prev=e;this.x=r;this.y=n;this.length=i}static{s(this,"SnakePath")}},Jde=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=r}else{if(e>=this.positiveArr.length){let n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=r}}},Xde=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,r){e<0?(e=-e-1,this.negativeArr[e]=r):this.positiveArr[e]=r}};f();f();var _b=class{constructor(e,r,n){this.lines=e;this.range=r;this.considerWhitespaceChanges=n;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!n){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new kt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(r=>String.fromCharCode(r)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let r=yOe(e>0?this.elements[e-1]:-1),n=yOe(e<this.elements.length?this.elements[e]:-1);if(r===7&&n===8)return 0;if(r===8)return 150;let i=0;return r!==n&&(i+=10,r===0&&n===1&&(i+=1)),i+=AOe(r),i+=AOe(n),i}translateOffset(e,r="right"){let n=T0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[n];return new sn(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+i+(i===0&&r==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){let r=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(r)?zt.fromPositions(n,n):zt.fromPositions(r,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!_R(this.elements[e]))return;let r=e;for(;r>0&&_R(this.elements[r-1]);)r--;let n=e;for(;n<this.elements.length&&_R(this.elements[n]);)n++;return new kt(r,n)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!_R(this.elements[e]))return;let r=e;for(;r>0&&_R(this.elements[r-1])&&!gOe(this.elements[r]);)r--;let n=e;for(;n<this.elements.length&&_R(this.elements[n])&&!gOe(this.elements[n]);)n++;return new kt(r,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,r){return this.elements[e]===this.elements[r]}extendToFullLines(e){let r=M1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,n=rSe(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new kt(r,n)}};function _R(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(_R,"isWordChar");function gOe(t){return t>=65&&t<=90}s(gOe,"isUpperCase");var PDt={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function AOe(t){return PDt[t]}s(AOe,"getCategoryBoundaryScore");function yOe(t){return t===10?8:t===13?7:N9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(yOe,"getCategory");function xOe(t,e,r,n,i,o){let{moves:a,excludedChanges:l}=LDt(t,e,r,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=FDt(c,n,i,e,r,o);return cSe(a,u),a=MDt(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&NDt(p,h=>h.length>=2)>=2}),a=QDt(t,a),a}s(xOe,"computeMovedLines");function NDt(t,e){let r=0;for(let n of t)e(n)&&r++;return r}s(NDt,"countWhere");function LDt(t,e,r,n){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new P9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new P9(c.modified,r,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new bp(c.range,d.range)),l.add(c.source),l.add(d.source)),!n.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(LDt,"computeMovesFromSimpleDeletionsToSimpleInsertions");function FDt(t,e,r,n,i,o){let a=[],l=new s5;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(w0(m=>m.modified.startLineNumber,_0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${r[g-1]}:${r[g+1-1]}:${r[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(dSe(w0(m=>m.modifiedLineRange.length,_0)));let u=new m2,d=new m2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new bp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(w0(m=>m.original.startLineNumber,_0));let p=new J8(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=M1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=M1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,q=h.modified.startLineNumber-k-1;if(N>n.length||q>i.length||u.contains(q)||d.contains(N)||!COe(n[N-1],i[q-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let B;for(B=0;B<_;B++){let N=h.original.endLineNumberExclusive+B,q=h.modified.endLineNumberExclusive+B;if(N>n.length||q>i.length||u.contains(q)||d.contains(N)||!COe(n[N-1],i[q-1],o))break}B>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+B)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+B))),(k>0||B>0)&&(a[m]=new bp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+B),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+B)))}return a}s(FDt,"computeUnchangedMoves");function COe(t,e,r){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new wR().compute(new _b([t],new zt(1,1,1,t.length),!1),new _b([e],new zt(1,1,1,e.length),!1),r),o=0,a=Ko.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{N9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)N9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(COe,"areLinesSimilar");function MDt(t){if(t.length===0)return t;t.sort(w0(r=>r.original.startLineNumber,_0));let e=[t[0]];for(let r=1;r<t.length;r++){let n=e[e.length-1],i=t[r],o=i.original.startLineNumber-n.original.endLineNumberExclusive,a=i.modified.startLineNumber-n.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=n.join(i);continue}e.push(i)}return e}s(MDt,"joinCloseConsecutiveMoves");function QDt(t,e){let r=new J8(t);return e=e.filter(n=>{let i=r.findLastMonotonous(l=>l.original.startLineNumber<n.original.endLineNumberExclusive)||new bp(new Yt(1,1),new Yt(1,1)),o=M1(t,l=>l.modified.startLineNumber<n.modified.endLineNumberExclusive);return i!==o}),e}s(QDt,"removeMovesInSameDiff");f();function Zde(t,e,r){let n=r;return n=vOe(t,e,n),n=vOe(t,e,n),n=ODt(t,e,n),n}s(Zde,"optimizeSequenceDiffs");function vOe(t,e,r){if(r.length===0)return r;let n=[];n.push(r[0]);for(let o=1;o<r.length;o++){let a=n[n.length-1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){n[n.length-1]=new Ko(new kt(a.seq1Range.start,l.seq1Range.endExclusive-c),new kt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}n.push(l)}let i=[];for(let o=0;o<n.length-1;o++){let a=n[o+1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){n[o+1]=new Ko(new kt(l.seq1Range.start+c,a.seq1Range.endExclusive),new kt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return n.length>0&&i.push(n[n.length-1]),i}s(vOe,"joinSequenceDiffsByShifting");function ODt(t,e,r){if(!t.getBoundaryScore||!e.getBoundaryScore)return r;for(let n=0;n<r.length;n++){let i=n>0?r[n-1]:void 0,o=r[n],a=n+1<r.length?r[n+1]:void 0,l=new kt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new kt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?r[n]=bOe(o,t,e,l,c):o.seq2Range.isEmpty&&(r[n]=bOe(o.swap(),e,t,c,l).swap())}return r}s(ODt,"shiftSequenceDiffs");function bOe(t,e,r,n,i){let a=1;for(;t.seq1Range.start-a>=n.start&&t.seq2Range.start-a>=i.start&&r.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<n.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&r.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+r.getBoundaryScore(p)+r.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(bOe,"shiftDiffToBetterPosition");function EOe(t,e,r){let n=[];for(let i of r){let o=n[n.length-1];if(!o){n.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?n[n.length-1]=new Ko(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):n.push(i)}return n}s(EOe,"removeShortMatches");function e0e(t,e,r,n,i=!1){let o=Ko.invert(r,t.length),a=[],l=new mA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=n(t,d.offset1),h=n(e,d.offset2);if(!m||!h)return;let g=new Ko(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=n(t,E.seq1Range.start),B=n(e,E.seq2Range.start),N=new Ko(k,B),q=N.intersect(E);if(v+=q.seq1Range.length,b+=q.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return UDt(r,a)}s(e0e,"extendDiffsToEntireWordIfAppropriate");function UDt(t,e){let r=[];for(;t.length>0||e.length>0;){let n=t[0],i=e[0],o;n&&(!i||n.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),r.length>0&&r[r.length-1].seq1Range.endExclusive>=o.seq1Range.start?r[r.length-1]=r[r.length-1].join(o):r.push(o)}return r}s(UDt,"mergeSequenceDiffs");function IOe(t,e,r){let n=r;if(n.length===0)return n;let i=0,o;do{o=!1;let l=[n[0]];for(let c=1;c<n.length;c++){let p=function(h,g){let y=new kt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=n[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}n=l}while(i++<10&&o);return n}s(IOe,"removeVeryShortMatchingLinesBetweenDiffs");function TOe(t,e,r){let n=r;if(n.length===0)return n;let i=0,o;do{o=!1;let c=[n[0]];for(let u=1;u<n.length;u++){let m=function(g,y){let v=new kt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,B=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,q=t.countLinesIn(y.seq1Range),te=y.seq1Range.length,me=e.countLinesIn(y.seq2Range),oe=y.seq2Range.length,H=2*40+50;function O(le){return Math.min(le,H)}return s(O,"cap"),Math.pow(Math.pow(O(_*40+k),1.5)+Math.pow(O(B*40+N),1.5),1.5)+Math.pow(Math.pow(O(q*40+te),1.5)+Math.pow(O(me*40+oe),1.5),1.5)>(H**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=n[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}n=c}while(i++<10&&o);let a=[];return aSe(n,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new kt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new kt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=Ko.fromOffsetPairs(c?c.getEndExclusives():mA.zero,d?d.getStarts():mA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(TOe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var L9=class{constructor(e,r){this.trimmedHash=e;this.lines=r}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let r=e===0?0:wOe(this.lines[e-1]),n=e===this.lines.length?0:wOe(this.lines[e]);return 1e3-(r+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,r){return this.lines[e]===this.lines[r]}};function wOe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(wOe,"getIndentation");var Uj=class{constructor(){this.dynamicProgrammingDiffing=new Qj;this.myersDiffingAlgorithm=new wR}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,r,n){if(e.length<=1&&n2(e,r,(B,N)=>B===N))return new bR([],[],!1);if(e.length===1&&e[0].length===0||r.length===1&&r[0].length===0)return new bR([new Tb(new Yt(1,e.length+1),new Yt(1,r.length+1),[new Ud(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,r.length,r[r.length-1].length+1))])],[],!1);let i=n.maxComputationTimeMs===0?wb.instance:new Mj(n.maxComputationTimeMs),o=!n.ignoreTrimWhitespace,a=new Map;function l(B){let N=a.get(B);return N===void 0&&(N=a.size,a.set(B,N)),N}s(l,"getOrCreateHash");let c=e.map(B=>l(B.trim())),u=r.map(B=>l(B.trim())),d=new L9(c,e),p=new L9(u,r),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(B,N)=>e[B]===r[N]?r[N].length===0?.1:1+Math.log(1+r[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=Zde(d,p,h),h=IOe(d,p,h);let y=[],v=s(B=>{if(o)for(let N=0;N<B;N++){let q=b+N,te=E+N;if(e[q]!==r[te]){let me=this.refineDiff(e,r,new Ko(new kt(q,q+1),new kt(te,te+1)),i,o,n);for(let oe of me.mappings)y.push(oe);me.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let B of h){Lu(()=>B.seq1Range.start-b===B.seq2Range.start-E);let N=B.seq1Range.start-b;v(N),b=B.seq1Range.endExclusive,E=B.seq2Range.endExclusive;let q=this.refineDiff(e,r,B,i,o,n);q.hitTimeout&&(g=!0);for(let te of q.mappings)y.push(te)}v(e.length-b);let _=Kde(y,new gT(e),new gT(r)),k=[];return n.computeMoves&&(k=this.computeMoves(_,e,r,c,u,i,o,n)),Lu(()=>{function B(q,te){if(q.lineNumber<1||q.lineNumber>te.length)return!1;let me=te[q.lineNumber-1];return!(q.column<1||q.column>me.length+1)}s(B,"validatePosition");function N(q,te){return!(q.startLineNumber<1||q.startLineNumber>te.length+1||q.endLineNumberExclusive<1||q.endLineNumberExclusive>te.length+1)}s(N,"validateRange");for(let q of _){if(!q.innerChanges)return!1;for(let te of q.innerChanges)if(!(B(te.modifiedRange.getStartPosition(),r)&&B(te.modifiedRange.getEndPosition(),r)&&B(te.originalRange.getStartPosition(),e)&&B(te.originalRange.getEndPosition(),e)))return!1;if(!N(q.modified,r)||!N(q.original,e))return!1}return!0}),new bR(_,k,g)}computeMoves(e,r,n,i,o,a,l,c){return xOe(e,r,n,i,o,a).map(p=>{let m=this.refineDiff(r,n,new Ko(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=Kde(m.mappings,new gT(r),new gT(n),!0);return new ER(p,h)})}refineDiff(e,r,n,i,o,a){let c=qDt(n).toRangeMapping2(e,r),u=new _b(e,c.originalRange,o),d=new _b(r,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&Ko.assertSorted(h),h=Zde(u,d,h),m&&Ko.assertSorted(h),h=e0e(u,d,h,(y,v)=>y.findWordContaining(v)),m&&Ko.assertSorted(h),a.extendToSubwords&&(h=e0e(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&Ko.assertSorted(h)),h=EOe(u,d,h),m&&Ko.assertSorted(h),h=TOe(u,d,h),m&&Ko.assertSorted(h);let g=h.map(y=>new Ud(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Ud.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function qDt(t){return new bp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(qDt,"toLineRangeMapping");var qj=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,r,n){let i=await WDt(e,r,n);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new ER(new bp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new Tb(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Ud(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function WDt(t,e,r){let n=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new Uj().computeDiff(n,i,r),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(WDt,"computeDiff");f();var t0e=je(require("crypto"));var F9=t0e.randomUUID.bind(t0e);var LOe=je(th()),s0e=je(n9());f();var Wj=$0("ISnippyService");f();f();var M9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Gj=65;function GDt(t){let e=0,r;M9.lastIndex=0;do if(r=M9.exec(t),r&&(e+=1),e>=Gj)break;while(r);return e}s(GDt,"lexemeLength");function HDt(t,e){let r=0,n;M9.lastIndex=0;do if(n=M9.exec(t),n&&(r+=1,r>=e))return M9.lastIndex;while(n);return t.length}s(HDt,"offsetFirstLexemes");function _Oe(t,e){let r=t.split("").reverse().join(""),n=HDt(r,e);return r.length-n}s(_Oe,"offsetLastLexemes");function r0e(t){return GDt(t)>=Gj}s(r0e,"hasMinLexemeLength");f();f();var SOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.matched_source=="string"&&typeof r.occurrences=="string"&&typeof r.capped=="boolean"&&typeof r.cursor=="string"&&typeof r.github_url=="string"}e.is=t,s(t,"is")})(SOe||={});var n0e;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.kind=="string"&&typeof r.reason=="string"&&typeof r.code=="number"&&typeof r.msg=="string"}e.is=t,s(t,"is")})(n0e||={});var ROe;(e=>{function t(r){return typeof r=="object"&&r!==null&&"snippets"in r&&Array.isArray(r.snippets)&&r.snippets.every(SOe.is)}e.is=t,s(t,"is")})(ROe||={});var i0e;(e=>{function t(r){if(n0e.is(r))return Qo.error(r);if(ROe.is(r))return Qo.ok(r)}e.to=t,s(t,"to")})(i0e||={});var kOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.commit_id=="string"&&typeof r.license=="string"&&typeof r.nwo=="string"&&typeof r.path=="string"&&typeof r.url=="string"}e.is=t,s(t,"is")})(kOe||={});var BOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.has_next_page=="boolean"&&typeof r.cursor=="string"}e.is=t,s(t,"is")})(BOe||={});var DOe;(e=>{function t(r){return typeof r=="object"&&r!==null&&typeof r.count=="object"&&Object.values(r.count).every(n=>typeof n=="string")}e.is=t,s(t,"is")})(DOe||={});var POe;(e=>{function t(r){return typeof r=="object"&&r!==null&&"file_matches"in r&&Array.isArray(r.file_matches)&&r.file_matches.every(kOe.is)&&"page_info"in r&&BOe.is(r.page_info)&&"license_stats"in r&&DOe.is(r.license_stats)}e.is=t,s(t,"is")})(POe||={});var o0e;(e=>{function t(r){if(n0e.is(r))return Qo.error(r);if(POe.is(r))return Qo.ok(r)}e.to=t,s(t,"to")})(o0e||={});var Hj=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let r={source:e};return this.fetch("Match",r,i0e.to)}async fetchFilesForMatch(e){let r={cursor:e};return this.fetch("FilesForMatch",r,o0e.to)}async fetch(e,r,n){let i=this.ctx.get(on),o=await this.ctx.get(Qr).getToken(),a=jx(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...n0(this.ctx),"X-GitHub-Api-Version":If},c=i.makeAbortController(),u=await i.fetch(a,{method:"POST",headers:l,json:r,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return n(d)}};var NOe=new _t("[CODE REFERENCING]"),SR=class{constructor(e,r){this.instantiationService=r;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Hj,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,r,n){let i=this.computeSourceToCheck(r,n);if(!i)return;let a=await this.ctx.get(Rr).getTextDocument({uri:e.toString()});if(!a){NOe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){NOe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(I0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,r){if(r.newText==="")return;let n=xs.single(r),o=n.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(n),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!r0e(c)){let m=a.value.slice(0,o.start),h=_Oe(m,Gj);l=h,c=a.value.slice(h,o.start+r.newText.length)}if(!r0e(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};SR=Cu([Vs(1,dA)],SR);async function FOe(t){let e=new uj;return e.define(fj,new a0e(t)),e.define(Dj,new qj),e.define(_y,new z0(l0e,[!0])),e.define(Wj,new z0(SR,[t])),e.define(ih,await c0e.Create(t)),e.define(R9,new z0(u0e)),e.seal()}s(FOe,"createInstantiationService");var a0e=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,r,n){let i=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),a=an.createAndMarkAsIssued(i,o);Bt(this.ctx,e,a)}},l0e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},c0e=class t{constructor(e,r){this.ctx=e;this.modelConfiguration=r}static{s(this,"CLSChatMLFetcher")}static async Create(e){let r=await xo.getModelConfiguration(e,"nesStubs");return new t(e,r)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,r,n,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=F9(),c=await this.ctx.get(Id).fetchAndStreamChat(this.ctx,a,fg.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(r)return await r(u,0,{text:d.text})},n,i,o);if(c.type==="success"){let u=[];if(r)for await(let p of c.choices)if(p.finishReason!=="snippy")await r(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:aOe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(r=>r.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},u0e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new jj("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let r=this.tokenizers.get(e.tokenizer);return r||(r=new jj(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,r)),r}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},jj=class{constructor(e){this.mode=LOe.OutputMode.Raw;this.tokenizer=Do(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===s0e.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let r=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let n of e.content)if(n.type===s0e.ChatCompletionContentPartKind.Text)r+=this.tokenLength(n.text);else throw new Error(`Unsupported message content part type: ${n.type}`);else throw new Error("Unsupported message content type");return r}countMessagesTokens(e){let r=0;for(let n of e)r+=this.countMessageTokens(n);return r}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var Vj=class extends jo{constructor(r){super();this.workspace=r;this._garbageCollector=new p0e(20);this._documentCaches=new Map;k0(this,r.openDocuments,(n,i)=>{let o=new d0e(n.id,n.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(kg(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(ka(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(r,n){let i=this._documentCaches.get(r);i&&i.reject(n)}isRejected(r,n){let i=this._documentCaches.get(r);return i?i.isRejected(n):!1}},d0e=class{constructor(e,r,n){this.docId=e;this._garbageCollector=n;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let r of[...this._rejectedEdits])r.handleEdit(e)}reject(e){if(this.isRejected(e))return;let r=new f0e(e.toEdit(),()=>{this._rejectedEdits.delete(r)});this._rejectedEdits.add(r),this._garbageCollector.put(r)}isRejected(e){for(let r of this._rejectedEdits)if(r.isRejected(e))return!0;return!1}},f0e=class{constructor(e,r){this._edit=e;this._onDispose=r}static{s(this,"RejectedEdit")}handleEdit(e){let r=this._edit.tryRebase(e);r?this._edit=r:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},p0e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var Q9=class{constructor(e,r){this.prev=null;this.next=null;this.key=e,this.value=r}static{s(this,"Node")}},$j=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new Q9("",null),this._tail=new Q9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let r=e.prev,n=e.next;r.next=n,n.prev=r}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let r=this._cache.get(e);if(r)return this._removeNode(r),this._cache.delete(e),r.value}get(e){let r=this._cache.get(e);if(r)return this._moveToHead(r),r.value}keys(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.key),r=r.next;return e}getValues(){let e=[],r=this._head.next;for(;r!==this._tail;)e.push(r.value),r=r.next;return e}put(e,r){let n=this._cache.get(e);if(n)n.value=r,this._moveToHead(n);else if(n=new Q9(e,r),this._cache.set(e,n),this._addNode(n),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var zj=class extends jo{constructor(r){super();this.workspace=r;this._documentCaches=new Map;this._sharedCache=new $j(50);k0(this,r.openDocuments,(n,i)=>{let o=new m0e(n.id,n.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(kg(this,{value:n.value,selection:n.selection,languageId:n.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(ka(()=>{this._documentCaches.delete(n.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(r,n,i){let o=this._documentCaches.get(r);o&&o.setNextEdits(n,i)}lookupNextEdit(r){let n=this._documentCaches.get(r);if(n)return n.lookupNextEdit()}},m0e=class{constructor(e,r,n){this.docId=e;this._sharedCache=n;this._value=r}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,r){let n=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(n.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:r,documentBeforeEdit:n}),n=n.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),r=this._sharedCache.get(e);if(r)return r}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var Yj=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,r,n,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,r=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),n=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:r,activeDocumentEditsCount:n,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},RR=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let r=this._map.get(e);r&&r.builder.setAsShown()}scheduleSendingTelemetry(e,r){let n=setTimeout(()=>{this._doSendTelemetry(r),this._map.delete(e)},12e4);this._map.set(e,{builder:r,timeout:n})}sendTelemetryFor(e,r){let n=this._map.get(e);if(!n)return;this._map.delete(e),clearTimeout(n.timeout);let i=n.builder;i.setAcceptance(r),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let r=e.build(),{opportunityId:n,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:q,promptCharCount:te,isDefaultEndpoint:me,hadLowLogProbSuggestion:oe,nonTerminatingError:H,nEditsSuggested:O,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:j,hasNextEdit:W,nextEditLogprob:Y,maxLinesPerEdit:ee,noNextEditReasonKind:pe,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:he,fetchTime:Ne,fetchResult:Re,fetchError:Je,fetchStartedAfterMs:Me}=r;this._sendTelemetryToBoth({opportunityId:n,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:H,noNextEditReasonKind:pe,noNextEditReasonMessage:re,firstEditStrategy:fe,firstPickStrategyOverride:he,fetchResult:Re,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(me),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:B,activeDocumentEditsCount:N,promptLineCount:q,promptCharCount:te,hadLowLogProbSuggestion:this._boolToNum(oe),nEditsSuggested:O,kthEditPicked:le,lineDistanceToMostRecentEdit:ie,debounceTime:j,fetchStartedAfterMs:Me,fetchTime:Ne,hasNextEdit:this._boolToNum(W),nextEditLogprob:Y,maxLinesPerEdit:ee})}_sendTelemetryToBoth(e,r){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,r)}_boolToNum(e){return e===void 0?void 0:e?1:0}};RR=Cu([Vs(0,fj)],RR);f();var kR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var AT=!1,MOe=300,BR=class extends jo{constructor(r,n,i,o,a,l,c){super();this._workspace=r;this._statelessNextEditProvider=n;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new Vj(this._workspace);this._nextEditCache=new zj(this._workspace);this._recentlyShownCache=new A0e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;k0(this,this._workspace.openDocuments,(u,d)=>{d.add(eoe(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(RR)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(r,n){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===r&&i.documentAfterEditsNoShortening.value!==n.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(r,n,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(r);if(!o)return{result:void 0};let a=o.value.get(),l=new Yj(this._statelessNextEditProvider.ID);l.setOpportunityId(n.requestUuid??F9());let c=this._recentlyShownCache.get(r,a),u=this._nextEditCache.lookupNextEdit(r),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await wy(MOe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await wy(MOe);else{h=new g0e,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,r,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:bD(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(r,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new kR(void 0);if(this._rejectionCollector.isRejected(r,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new kR(void 0);Ol(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new kR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(r,a,[d,h]),y}async _shortenDocument(r,n){let i=r.lastEdit.getEditedState(),{document:o,clippedRange:a}=n==="noShortening"?this.getProjectedDocumentNoShortening(r.lastEdit):n==="clipping"?this.getProjectedDocumentClipping(r.lastEdit):await this.getProjectedDocumentSummarizedDocument(r.languageId,r.lastEdit),l=xs.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=h0e(r.lastEdits.swap(l)),d=c.compose(),p=new fT(new oh(r.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new ql(o.text),g=Pg.fromEdit(new Xc(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new ql(p.text).getTransformer().getRange(y));let b=r.lastSelection?p.projectOffsetRange(r.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(r.docId),_=s(q=>{let me=new Pg(new ql(p.text),q).toEdit();return QOe(me,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(q=>p.projectBack(q),"toOffsetOnDocumentAfterEditsNoShortening"),B=s(q=>p.project(q),"toProjectedOffset"),N=new v9(r.docId,E,r.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,B,r.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:r.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(r,n,i,o){let a=await this._historyContextProvider.getHistoryContext(n);if(!a)return Qo.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=h0e(a.getDocumentAndIdx(n)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(q=>this._shortenDocument(q,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new oj(r.headerRequestId,u.map(q=>q.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,AT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let q=this._hookupCancellation(g,o);try{y=await g.result}finally{q.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let q=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let te=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(me){throw g.setResultError(me),me}finally{te.dispose(),q()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return Qo.error({kind:"noSuggestions"});let _=new Pg(new ql(d.projectedDocument.text),b).toEdit(),k=QOe(_,d.projectedDocument),B=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(B);return Qo.ok(N)}_hookupCancellation(r,n){let i=new Bu,o=!1,a=s(()=>{o||(o=!0,r.liveDependentants--)},"removeDependant"),l=i.add(new nj);return i.add(n.onCancellationRequested(()=>{if(a(),r.liveDependentants>0){AT&&console.log(`=> ignoring UI cancellation signal for ${r.seqid} because others depend on this request`);return}if(!r.fetchIssued){AT&&console.log(`=> canceling ${r.seqid} due to UI cancellation signal`),r.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(r.liveDependentants>0){AT&&console.log(`=> ignoring timer cancellation signal for ${r.seqid} because others depend on this request`);return}AT&&console.log(`=> canceling ${r.seqid} due to timer after UI cancellation signal`),r.cancellationTokenSource.cancel()},500)})),i.add(ka(()=>{a()})),r.liveDependentants++,i}_findExistingPendingRequest(r){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,r))return this._pendingStatelessNextEditRequest}handleShown(r){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(r)}handleAcceptance(r,n){this._telemetrySender.sendTelemetryFor(n,"accepted"),this.runSnippy(r,n),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(r,n){mj(n.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&n.result&&(this._recentlyShownCache.remove(n.result.edit),this._rejectionCollector.reject(r,n.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(n,"rejected")}getProjectedDocumentNoShortening(r){return{document:new fT(new oh(r.base.value),new op([])),clippedRange:new Yt(1,r.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(r){let n=r.base.getTransformer(),i=n.getRange(r.edit.getRange()??new kt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,n.textLength.lineCount+1),c=h0e(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new fT(new oh(r.base.value),new op(u.map(p=>Za.delete(n.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new x9("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(r,n){let i=await zDt(this._parseService,{getText:s(()=>n.base.value,"getText"),languageId:r});if(!i)return this.getProjectedDocumentClipping(n);let o=new oh(n.base.value),a=n.edit.edits.at(0)?.range??new kt(0,0),l;if(n.edit.edits.length!==0){let h=n.edit.edits.at(0),g=n.edit.edits.at(-1);l=o.offsetRangeToRange(new kt(h.range.start,g.range.endExclusive))}let c=OOe(o.offsetRangeToRange(a)),u=vj(200*50,{costFnOverride:s((h,g,y)=>{let v=OOe(y.offsetRangeToRange(h.range)),b=$Dt(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=n.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(r,n){n.result!==void 0&&this._snippyService.handlePostInsertion(r.toUri(),n.result.documentBeforeEdits,n.result.edit)}};BR=Cu([Vs(4,_y),Vs(5,dA),Vs(6,Wj)],BR);function QOe(t,e){let r=e.projectBackOffsetEdit(t.toOffsetEdit());return xs.fromOffsetEdit(r)}s(QOe,"projectBackEdit");function OOe(t){return new Yt(t.start.line+1,t.end.line+1)}s(OOe,"lineRangeFromVSCodeRange");function $Dt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s($Dt,"lineRangeDist");async function zDt(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(zDt,"getStructure");function h0e(t){if(!t)throw new vn("expected value to be defined, but it was not");return t}s(h0e,"assertDefined");var g0e=class{constructor(){this.headerRequestId=F9()}static{s(this,"NextEditFetchRequest")}},A0e=class{constructor(){this._cache=new VO(10)}static{s(this,"RecentlyShownCache")}add(e,r,n){let i=this._key(e,r);this._cache.set(i,n)}get(e,r){let n=this._key(e,r);return this._cache.get(n)}remove(e){for(let r of this._cache)if(r[1][0]===e){this._cache.delete(r[0]);break}}_key(e,r){return e.uri+";"+r.value}};f();f();f();f();var yT=0;function Kj(t){return t===0}s(Kj,"lengthIsZero");var K0=2**26;function DR(t,e){return t*K0+e}s(DR,"toLength");function ky(t){let e=t,r=Math.floor(e/K0),n=e-r*K0;return new Ul(r,n)}s(ky,"lengthToObj");function O9(t,e){let r=t+e;return e>=K0&&(r=r-t%K0),r}s(O9,"lengthAdd");function UOe(t,e){return t.reduce((r,n)=>O9(r,e(n)),yT)}s(UOe,"sumLengths");function y0e(t,e){return t===e}s(y0e,"lengthEquals");function U9(t,e){let r=t,n=e;if(n-r<=0)return yT;let o=Math.floor(r/K0),a=Math.floor(n/K0),l=n-a*K0;if(o===a){let c=r-o*K0;return DR(0,l-c)}else return DR(a-o,l)}s(U9,"lengthDiffNonNegative");function qOe(t,e){let r=t,n=Math.floor(r/K0),i=r-n*K0,o=e,a=Math.floor(o/K0),l=o-a*K0;return new zt(n+1,i+1,a+1,l+1)}s(qOe,"lengthsToRange");f();var PR=class{constructor(e,r,n){this.startOffset=e;this.endOffset=r;this.newLength=n}static{s(this,"TextEditInfo")}toString(){return`[${ky(this.startOffset)}...${ky(this.endOffset)}) -> ${ky(this.newLength)}`}};function GOe(t,e){if(t.length===0)return e;if(e.length===0)return t;let r=new HO(WOe(t)),n=WOe(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=r.dequeue();function o(u){if(u===void 0){let p=r.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!Kj(u);){let[p,m]=i.splitAt(u);d.push(p),u=U9(p.lengthAfter,u),i=m??r.dequeue()}return Kj(u)||d.push(new q9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&y0e(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new PR(m.startOffset,d,O9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=yT;for(let u of n){let d=o(u.lengthBefore);if(u.modified){let p=UOe(d,h=>h.lengthBefore),m=O9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=O9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(GOe,"combineTextEditInfos");var q9=class t{constructor(e,r,n){this.modified=e;this.lengthBefore=r;this.lengthAfter=n}static{s(this,"LengthMapping")}splitAt(e){let r=U9(e,this.lengthAfter);return y0e(r,yT)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,yT,r)]:[new t(this.modified,e,e),new t(this.modified,r,r)]}toString(){return`${this.modified?"M":"U"}:${ky(this.lengthBefore)} -> ${ky(this.lengthAfter)}`}};function WOe(t){let e=[],r=yT;for(let n of t){let i=U9(r,n.startOffset);Kj(i)||e.push(new q9(!1,i,i));let o=U9(n.startOffset,n.endOffset);e.push(new q9(!0,o,n.newLength)),r=n.endOffset}return e}s(WOe,"toLengthMapping");var W9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let r=e.edits.map(n=>new Jj(n.range,Ul.ofText(n.newText)));return new t(r)}static _fromTextEditInfo(e){let r=e.map(n=>{let i=ky(n.newLength);return new Jj(qOe(n.startOffset,n.endOffset),new Ul(i.lineCount,i.columnCount))});return new t(r)}_toTextEditInfo(){return this.edits.map(e=>new PR(DR(e.range.startLineNumber-1,e.range.startColumn-1),DR(e.range.endLineNumber-1,e.range.endColumn-1),DR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let r=this._toTextEditInfo(),n=e._toTextEditInfo(),i=GOe(r,n);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Jj=class{constructor(e,r){this.range=e;this.newLength=r}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var Xj=class{constructor(e){this.documents=e;Ol(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(r=>r.docId===e)}getDocumentAndIdx(e){let r=this.documents.findIndex(n=>n.docId.uri===e.uri);if(r!==-1)return{doc:this.documents[r],idx:r}}},Zj=class{constructor(e,r,n,i,o){this.docId=e;this.languageId=r;this.base=n;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new Xc(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var eV=class extends jo{constructor(){super();this.branch=Pm("branchName",void 0);this._register(Xie((r,n)=>{this.init(n)}))}static{s(this,"ObservableGitStub")}async init(r){}};var rV=class extends jo{constructor(r,n=!1){super();this._documentState=new Map;this._lastDocuments=new x0e(50);this.workspace=r,this._lastGitCheckout=void 0,this._started=!1,n||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let r=new eV;this._register(d2(n=>{n.readObservable(r.branch)!==void 0&&(this._lastGitCheckout=L5(),this._documentState.forEach(o=>o.applyAllEdits()))})),k0(this,this.workspace.openDocuments,(n,i)=>{let o=n.selection.get().at(0),a=new C0e(n.id,n.value.get().value,n.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(kg(this,{value:n.value,selection:n.selection,languageId:n.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(ka(()=>{let l=this._documentState.get(n.id);l&&this._lastDocuments.remove(l),this._documentState.delete(n.id)}))},n=>n.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(r,n=5,i=100){let o=this._documentState.get(r);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(r))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(n,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===r&&(l=!0),a.push(u.history),n-=u.editCount,n<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===r))return new Xj(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let r=L5()-this._lastGitCheckout<2*1e3;return r||(this._lastGitCheckout=void 0),r}getRecentDocumentUris(){return this._lastDocuments.getItems().map(r=>r.docId.uri)}},C0e=class t{constructor(e,r,n,i){this.docId=e;this.languageId=n;this._edits=[];this._isUserDocument=!1;this._baseValue=new ql(r),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,r){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let n=F5.fromEdit(e,this._currentValue),i=W9.fromTextEdit(n);if(r){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return tV(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&YDt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=L5(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:L5()})}getRecentEdit(e,r){if(!this._isUserDocument)return;let{editCount:n}=this._applyStaleEdits(e,r),i=new Ng(this._edits.map(o=>o.edit));return{history:new Zj(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:n}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,r){let n=this._currentValue,i=xs.empty,o=W9.empty,a,l=0,c=xs.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(L5()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();mj(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(r>0&&m>r)break;let h=tV(u.textLengthEdit.edits,B=>B.range.endLineNumber-B.range.startLineNumber+B.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||tV(u.edit.edits,B=>B.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||tV(u.edit.edits,B=>B.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let B=xs.trySwap(u.edit,c);if(B)c=B.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(n.value);n=n.apply(v);let b=u.edit.compose(i),E=No.fromEdit(new Xc(n,b)),k=new Pg(n,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new Ng(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function tV(t,e){let r=0;for(let n of t)r+=e(n);return r}s(tV,"sum");function YDt(t,e){let r=e.getNewRanges();return t.edits.every(n=>KDt(n.range,r))}s(YDt,"editExtends");function KDt(t,e){return e.some(r=>t.start===r.endExclusive||t.endExclusive===r.start)}s(KDt,"doesTouch");var x0e=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let r=this._arr.indexOf(e);r!==-1?this._arr.splice(r,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let r=this._arr.indexOf(e);r!==-1&&this._arr.splice(r,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var HOe=10,sh=class{constructor(e){this.lastResultsById=new Jr(HOe);this.lastResultsByUri=new Jr(HOe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,r,n){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=Lm.create(e),l=await i.getNextEdit(a,{triggerKind:1},n);if(l.result==null)return;let c=await this.ctx.get(Rr).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=sr(),m={resultId:p,nextEditResult:l,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:r}},id:p}]}async handleAcceptance(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(this.lastResultsByUri.delete(n.documentId.uri),this.lastResultsById.delete(n.resultId),await r.handleAcceptance(n.documentId,n.nextEditResult))}async handleShown(e){let r=await this.nextEditProvider,n=this.lastResultsById.get(e);!r||!n||n.resultId===e&&(n.isShown=!0,r.handleShown(n.nextEditResult))}async createNextEditProvider(){let e=await FOe(this.ctx),r;try{let o=await this.ctx.get(Dt).updateExPValuesAndAssignments(),a=JDt(this.ctx,o);r=e.createInstance(a?fA:Ry)}catch{r=e.createInstance(Ry)}let n=this.ctx.get(Bg),i=new rV(n);return e.createInstance(BR,n,r,i,new Nj(n))}};function JDt(t,e){let r=Xr(t,ft.NESXTab);return r!==void 0?r:t.get(Dt).enableNESXTab(e)}s(JDt,"shouldUseXTab");f();var Sb=require("fs"),jOe=require("os"),VOe=je(require("path")),NR=require("process");var Ec=class{static{s(this,"PersistenceManager")}},v0e=class extends Ec{constructor(r){super();this.directory=r}static{s(this,"FilePersistenceManager")}async read(r,n){try{return(await this.readJsonObject(r))[n]}catch{return}}async update(r,n,i){await Sb.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${r}.json`,a=await this.readJsonObject(r);a[n]=i,await Sb.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(r,n){let i=`${this.directory}/${r}.json`;try{let o=await this.readJsonObject(r);delete o[n];let a=JSON.stringify(o)+`
`;a===`{}
`?await Sb.promises.rm(i):await Sb.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(r){let n=`${this.directory}/${r}.json`;try{await Sb.promises.rm(n)}catch{}}async listSettings(){try{return(await Sb.promises.readdir(this.directory)).filter(n=>n.endsWith(".json")).map(n=>n.slice(0,-5))}catch{return[]}}async listKeys(r){return Object.keys(await this.readJsonObject(r))}async readJsonObject(r){let n=`${this.directory}/${r}.json`;try{let i=await Sb.promises.readFile(n,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function XDt(){return NR.env.XDG_CONFIG_HOME&&VOe.isAbsolute(NR.env.XDG_CONFIG_HOME)?NR.env.XDG_CONFIG_HOME+"/github-copilot":(0,jOe.platform)()==="win32"?NR.env.USERPROFILE+"\\AppData\\Local\\github-copilot":NR.env.HOME+"/.config/github-copilot"}s(XDt,"getXdgConfigPath");function $Oe(){return new v0e(XDt())}s($Oe,"makeXdgPersistenceManager");f();var zOe=require("crypto"),gA=je(require("fs/promises")),YOe=require("os"),By=je(require("path"));var Dy=class{constructor(e){this.ctx=e;this.logger=new _t("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,r=process.arch;return this.rgPath=await this.resolvePathByOs(e,r),this.rgPath}async resolvePathByOs(e,r){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${r}`),r!=="arm64"&&r!=="x64")throw new Error(`Unsupported architecture: ${r}`);let n=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=By.extname(__filename)===".ts"?By.resolve(__dirname,"../../../packages/ripgrep/bin"):By.resolve(__dirname,"./bin"),o=By.resolve(i,e,r,n);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await gA.readFile(o),l=(0,zOe.createHash)("sha256").update(a).digest("hex"),c=By.join((0,YOe.homedir)(),".cache/pkg",l);await gA.mkdir(c,{recursive:!0});let u=Ti(fl(o)),d=By.join(c,u);try{await gA.stat(d)}catch{await gA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await gA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var KOe=require("child_process"),b0e=require("perf_hooks");var Py=new _t("ripgrepProcessManager"),ah=class{constructor(e,r,n){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=r??this.maxProcesses,this.maxPendingTasks=n??this.maxPendingTasks,Py.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){Py.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(r){Py.error(this.ctx,"Failed to kill process. ",r)}}),this.activeProcesses.clear()}execute(e,r,n,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){Py.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){Py.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}Py.debug(this.ctx,`Adding task to queue: ${e} ${r.join(" ")}`),this.taskQueue.push({id:CH(),command:e,args:r,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:n});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);Py.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),r=b0e.performance.now();Py.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let n=(0,KOe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(n);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(n),n.stdout?.removeAllListeners(),n.stderr?.removeAllListeners(),n.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{n.killed||(n.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{n.killed||(n.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),n.stdout?.on("data",c=>{i+=c.toString()}),n.stderr?.on("data",c=>{o+=c.toString()}),n.on("close",c=>{let d=b0e.performance.now()-r;Py.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),n.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(n){e.reject(new Error(`Error spawning process: ${n.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var JOe=100,XOe=1e3*60*5;function ZOe(t){let e=new E0e(t);t.get(Da).registerContextProvider(e),t.get(wg).add(e.id),t.get(Gl).getInitializedFeature().then(r=>{r.documentProvider.registerDocumentProvider(e)}).catch(r=>{gv(t,r,"registerRelatedFilesShim")})}s(ZOe,"registerRelatedFilesShim");var E0e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new vB(JOe,XOe);this.relatedFilesCache=new vB(JOe,XOe);this.resolver={resolve:s(async(r,n)=>{let i=r.documentContext.uri,o=r.documentContext.languageId;return await this.getTraits(i,o,n)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,r,n){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,r,r,n),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,r,n,i){try{let o=await this.ctx.get(Dt).updateExPValuesAndAssignments({uri:e,languageId:n}),a={uri:e,clientLanguageId:r,detectedLanguageId:n},l=await Aq(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){gv(this.ctx,o,"relatedFilesShim")}}async*getDocuments(e,r){for(let n of e.slice(0,J1.MAX_NEIGHBOR_FILES)){if(r?.isCancellationRequested)return;if(!this.relatedFilesCache.has(n.uri)){let a=Xx({uri:n.uri})??"UNKNOWN";await this.requestRelatedFilesAndTraits(n.uri,a,a,r)}let i=this.relatedFilesCache.get(n.uri)??[];if(i.length===0)continue;let o=n.weight/i.length;for(let a of i)yield{uri:a,weight:o}}}};f();f();f();var eUe=je(require("node:events"));var nV="onWorkspaceWatcherChanged";var iV=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.emitter=new eUe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(nV,Eu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(nV,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(nV,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(nV,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var iu=class{constructor(e){this.ctx=e;this.watchers=new Jr(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let r=this.watchers.get(e.uri);if(r)return r;let n=this.getParentFolder(e.uri);return n?this.watchers.get(n):void 0}getParentFolder(e){return[...this.watchers.keys()].find(n=>{let i=n.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==n&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Ur.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let r=this.createWatcher(e);this.watchers.set(e.uri,r)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let r=[];for(let o of this.watchers.values())r.push(o.workspaceFolder);let n=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=r.filter(o=>o.uri!==e.uri&&o.uri.startsWith(n));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,r){this.getWatcher(e)?.onFileChange(r)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var LR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,r){}onFileChange(e){}},ZDt="workspaceLifecycleManager",ou=new _t(ZDt),AA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let r=ia(e,async()=>{r.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?ou.debug(this.ctx,`listener ${e.constructor.name} is already started`):(ou.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):ou.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);ou.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(q0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Rr).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,r){let n=e.uri,i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return n!==i&&n.startsWith(i)}async onWorkspacesAdded(e,r){if(!e.length){ou.debug(r,"No workspaces to add.");return}ou.debug(r,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let n=[...this.watchedWorkspaces,...e];ou.debug(r,`Combined workspaces: ${n.map(l=>l.uri).join(", ")}`);let i=n.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));ou.debug(r,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));ou.debug(r,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));ou.debug(r,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){ou.debug(r,`Terminating watching for removed workspace: ${l.uri}`),r.get(iu).terminateWatching(l);for(let u of this.activeListeners)ou.debug(r,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;ou.debug(r,`Starting to watch new workspace: ${l.uri}`);let c=r.get(iu);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){ou.debug(r,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)ou.debug(r,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)ou.debug(r,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,r){if(e.length)for(let n of e){if(!n.uri)continue;r.get(iu).terminateWatching(n),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==n.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(n)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(r=>r!==e)}removeAllListeners(){this.activeListeners=[]}};function oV(t){t.set(AA,new AA(t))}s(oV,"setupWorkspaceLifecycleListener");f();f();var sV=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var kb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},yA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},I0e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.id}_${this.name}`}},Rb=class extends I0e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ci=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},CT=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},xT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Gi=class{static{s(this,"LanguageModelToolResult")}constructor(e,r){this.status=r,this.content=e}},rUe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),aV=(r=>(r.Accept="accept",r.Dismiss="dismiss",r))(aV||{}),nUe=I.Object({result:I.Enum(aV)});var Ep=class extends Rb{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:kb,type:"shared"})}};f();var ePt=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),tPt=new Map;for(let[t,e]of ePt)tPt.set(e,t);f();function FR(t){return`[${Ti(t)}](${t})`}s(FR,"formatUriForFileWidget");function CA(t){let e=rPt(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(CA,"resolvePathInput");function rPt(t){if(t.startsWith("/")||oUe()&&iPt(t)||oUe()&&t.startsWith("\\\\"))return fl(t)}s(rPt,"resolveFsUri");function oUe(){return process.platform==="win32"}s(oUe,"isWindows");function nPt(t){return t>=65&&t<=90||t>=97&&t<=122}s(nPt,"isWindowsDriveLetter");function iPt(t){return nPt(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(iPt,"hasDriveLetter");function G9(t){let e="";return t.length>0&&(e=t.map(r=>r instanceof Ci?r.value:r instanceof xT?"":r instanceof CT?JSON.stringify(r.value):"").join(`
`)),e===""?"(empty)":e}s(G9,"parseToolResultToString");function lV(t){let{content:e}=t;return{message:G9(e)}}s(lV,"formatToolErrorResult");function sUe(t){let{content:e}=t;return{data:e.map(r=>r instanceof Ci?{type:"text",value:r.value}:r instanceof xT?{type:"text",value:"<unsupported>"}:r instanceof CT?{type:"data",value:{mimeType:r.value.mimeType,data:r.value.data}}:{type:"text",value:""})}}s(sUe,"formatToolSuccessResult");var cV=class extends Ep{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,r,n){try{let i=await this.mapCode(r.input,e,n),o=await this.invokeClientEditFileTool(e,r,i,n);return this.getFinalEditFileResult(r,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}async mapCode(e,r,n){let{filePath:i}=e,o=CA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new rR(r.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},r.toLlmInteraction(),n,void 0,!0)}async invokeClientEditFileTool(e,r,n,i){let o=e.ctx.get(su).getToolByNameAndProvider("insert_edit_into_file",yA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(su).invokeTool(e,o.id,{toolInvocationToken:r.toolInvocationToken,input:{filePath:r.input.filePath,code:n,explanation:r.input.explanation},roundId:r.roundId,toolCallId:r.toolCallId},i)}getFinalEditFileResult(e,r){if(r.status!=="success")return r;let n=G9(r.content),i=Xx({uri:CA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new G0({code:n,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Gi([new Ci(o.join(`
`))],"success")}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=CA(n.filePath);return{progressMessage:`Editing ${FR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var aUe=new _t("findFilesTool"),uV=class t extends Ep{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Dy).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=r.input,l=e.turn.workspaceFolders;if(!l?.length)return new Gi([new Ci("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(ah),u={},d=l.map(async g=>{if(n.isCancellationRequested)throw new Error("Canceled");try{aUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],n,{cwd:aa(g.uri)},t.timeOutInSeconds*1e3);aUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${aa(bo(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Gi([new Ci(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Gi([new Ci(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for files matching query: ${n.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var lUe=new _t("findTextInFilesTool"),dV=class t extends Ep{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,r,n){try{let i;try{if(n.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(Dy).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=r.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Gi([new Ci("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(ah),p={},m=u.map(async v=>{if(n.isCancellationRequested)throw new Error("Canceled");try{lUe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",aa(v.uri)],E=await d.execute(i,b,n,{cwd:aa(v.uri)},t.timeOutInSeconds*1e3);lUe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Gi([new Ci(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Gi([new Ci(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;return n.query.length?{progressMessage:`Searching for text in files matching query: ${n.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var fV=class extends Ep{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,r,n){let{path:i}=r.input,o=CA(i),l=await e.ctx.get(lo).readDirectory(o.toString());return l.length===0?new Gi([new Ci("Folder is empty")],"success"):new Gi([new Ci(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,r){let n=CA(e.input.path);return{progressMessage:`Reading directory ${FR(n)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var pV=class extends Ep{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,r,n){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=r.input,l=CA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(bn).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new G0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Gi([new Ci(d.renderAsString(`
`))],"success")}else return new Gi([new Ci(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,r){let{input:n}=e;if(!n.filePath.length)return{progressMessage:"Running read_file tool"};let i=CA(n.filePath);return{progressMessage:`Reading file ${FR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function cUe(){return[new fV,new pV,new cV,new uV,new dV]}s(cUe,"getAllClsTools");var su=class{constructor(e){this.ctx=e;this._toolRegistry=new sV;for(let r of cUe())this._toolRegistry.registerTool(r)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,r,n){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(r,n)??{}}async invokeTool(e,r,n,i){if(i.isCancellationRequested)throw new Fa;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invoke?.(e,n,i)??new Gi([],"success")}async invokeToolConfirmation(e,r,n,i){if(i.isCancellationRequested)throw new Fa;let o=this._toolRegistry.getTool(r);if(!o)throw new Error(`Tool with id '${r}' is undefined`);return await o.invokeConfirmation?.(e,n,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,r){return this._toolRegistry.listTools().find(n=>n.name===e&&n.toolProvider.id===r.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let r=e.get(kb.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(kb.id)?.splice(e.get(kb.id)?.indexOf(r)??0,1);let n=e.get(yA.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(yA.id)?.splice(e.get(yA.id)?.indexOf(n)??0,1);let i=new Map;r&&n&&i.set(r.nameForModel,r);let o=e.get(yA.id)??[],a=e.get(kb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==kb.id&&c!==yA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var vT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var fUe=require("crypto"),T0e=require("fs"),w0e=je(require("path"));var uUe="symbolDatabaseLookup",dUe="multiLanguageContextProviderDocumentSymbols",bT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let r=await this.persistenceManager.read(uUe,e);return r||(r=await this.createDBFile(e)),w0e.default.join(this.persistenceManager.directory,dUe,r)}async init(){let e=w0e.default.join(this.persistenceManager.directory,dUe);await this.createIfNotExists(e)}async dirExists(e){try{return await T0e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await T0e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let r=`${(0,fUe.randomUUID)()}.db`;return await this.persistenceManager.update(uUe,e,r),r}async deleteDBFile(e){}};f();f();var ET=class{static{s(this,"FileSearch")}};f();var H9=class{constructor(e,r){this.workspaceUris=e;this.params=r}static{s(this,"FileWatcher")}};f();f();f();var mV=je(require("path")),pUe=require("worker_threads");function mUe(t,e){return new pUe.Worker(mV.default.resolve(mV.default.extname(__filename)!==".ts"?__dirname:mV.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(mUe,"createWorker");f();var hV=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,r=!1){return new Promise((n,i)=>{r?this.outstandingPromises.unshift({factory:e,c:n,e:i}):this.outstandingPromises.push({factory:e,c:n,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let r=e.factory();r.then(e.c,e.e),r.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var hUe=je(ii());var gV="main.js",AV=class{constructor(e,r=3){this.promiseResolvers=new Map;this.id=0;try{let n={cwd:process.cwd(),indexWorkspaceRoots:e};this.worker=mUe(gV,n),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",i=>{this.handleUnexpectedError(i)}),this.postMessageQueue=new hV(r)}catch(n){throw console.error(`Failed to create worker: ${n.message}`),n}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new GQ(this.id++),hUe.CancellationToken.None,!0)}async indexFile(e,r,n){return await this.postMessageInQueue(new UQ(this.id++,e,r),n)}async getAllFileNames(e,r){return this.postMessageInQueue(new qQ(this.id++,e),r)}getContext(e,r,n,i,o,a){return this.postMessageInQueue(new WQ(this.id++,e,r,n,i,o),a,!0)}tryCreateIndex(e,r,n){return this.postMessageInQueue(new QQ(this.id++,e,r),n)}async postMessageInQueue(e,r,n=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,r),n)}tryRemoveIndex(e,r){return this.postMessageAndWait(new OQ(this.id++,e),r)}async postMessageAndWait(e,r){if(this.fatalError)return Promise.reject(this.fatalError);let n=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=r.onCancellationRequested(()=>{this.worker.postMessage(new MQ(e.id))});try{return await n}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let r=this.promiseResolvers.get(e.id);if(!r)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,r.reject(e.error)):r.resolve(e.data)}handleUnexpectedError(e){let r;if(e instanceof Error){r=e,r.code==="MODULE_NOT_FOUND"&&r.message?.endsWith(gV+"'")&&(r=new Error(`Failed to load ${gV}`),r.code="CopilotPromptLoadFailure");let n=new Error().stack;r.stack&&n?.match(/^Error\n/)&&(r.stack+=n.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(r=new Error(`${gV} exited with status ${e.status}`),r.code=`CopilotPromptWorkerExit${e.status}`):r=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let n of this.promiseResolvers.values())n.reject(r);this.promiseResolvers.clear(),this.fatalError=r}};var j9=je(ii());var J0=new _t(hv),IT=class{constructor(e,r,n,i){this.ctx=e;this.watcher=r;this.workspaceDatabasePersistenceManager=n;this.workspaceInit=new Map;this.watcher.onFileChange(async(o,a)=>{await this.indexFile(a,this.languageId(a)??"plaintext")}),this.watcher.onWorkspaceChange(async(o,a)=>{if(o===1){J0.debug(this.ctx,`workspace removed: ${a}`),await this.indexClient.tryRemoveIndex(a,j9.CancellationToken.None);return}J0.debug(this.ctx,`workspace added: ${a}`),await this.indexAddedWorkspace(a)}),this.indexClient=new AV(i);for(let o of i){let a=o.rootPath;this.workspaceInit.set(a,this.doWorkspaceIndex(a).then(()=>{J0.debug(this.ctx,`workspace ${a} indexed`),this.workspaceInit.delete(a)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[r]of this.workspaceInit)if(e.startsWith(r))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let r=await sPt(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(r.rootPath,r.databaseFilePath,j9.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let n=this.doWorkspaceIndex(e).then(()=>{J0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,n)}async doWorkspaceIndex(e){J0.debug(this.ctx,`indexing workspace ${e}`);let r=dre.map(d=>`*${d}`);if(r.length===0)return;let i=`**/${dre.length===1?r[0]:`{${r.join(",")}}`}`,o=this.ctx.get(ET),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,j9.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));J0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),J0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,r){try{J0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,r,j9.CancellationToken.None)}catch(n){J0.debug(this.ctx,`failed to index ${e} with ${n}`)}}languageId(e){return TTe(e)}};async function sPt(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(sPt,"createIndexableWorkspaceFolder");f();f();var gUe=100,aPt=5e3,yV=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,r,n,i,o,a,l,c){let u=Date.now(),d=this.get(n,i,r,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(r,n,i,o,l,c);let p=new pn.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(r,n,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(n,i,r,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,r,n,i){if(this.cachedValue&&this.cachedValue.uri===n&&!(Math.abs(this.cachedValue.cursorPosition-r)>gUe)){if(r>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,r).match(/[^A-Za-z0-9]/))return}else if(r<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>aPt))return this.cachedValue}}setBasedOnLastDelimiter(e,r,n,i,o,a){let l=e.substring(0,r),c=/[A-Za-z0-9]+$/.exec(l),u=r;c&&(u=c.index),r-u>gUe&&(u=r);let d={cursorPosition:u,uri:n,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:sr(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var CV=class{constructor(e){this.id=hv;this.selector=IQ.map(e=>({language:e.languageId}));try{this.documentManager=e.get(Rr),this.resolver=new _0e(this.documentManager,e)}catch(r){throw J0.error(e,"Failed to create multi-language context provider",r),r}}static{s(this,"MultiLanguageContextProvider")}},_0e=class{constructor(e,r){this.ctx=r;this.documentManager=e,this.cachedContextFetcher=new yV}static{s(this,"MultiLanguageContextResolver")}resolve(e,r){return this.resolveImpl(e,r)}async resolveImpl(e,r){let n=this.ctx.get(vT).indexWatcher;if(!n)return[];if(n.isInitializing(e.documentContext.uri))return[];let i=n.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Lg(o,a);c=c.applyEdits(l);let u=M4e(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,r);return J0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(dQ(o))return[];throw J0.error(this.ctx,"Failed to get context",o),o}}};var V9=class extends LR{constructor(r){super();this.started=!1;this.ctx=r,this.ctx.get(AA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Da).providers.some(r=>r.id===hv)){let r=this.ctx.get(bT);this.fileWatcher=new S0e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new IT(this.ctx,this.fileWatcher,r,[]),this.fileSearch=new R0e(this.ctx),this.ctx.set(H9,this.fileWatcher),this.ctx.set(ET,this.fileSearch),this.ctx.set(IT,this.multiLanguageContextIndexWatcher),this.ctx.get(Da).registerContextProvider(new CV(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let r=await this.ctx.get(Dt).updateExPValuesAndAssignments(),n=RU(this.ctx,r);return n.includes(hv)||n.length===1&&n[0]==="*"}async onWorkspaceAdded(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,r.uri)}async onWorkspaceRemoved(r){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,r.uri)}async onWorkspaceSubfoldersTerminated(r,n){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(r,n)}async onFileChange(r){if(await this.isEnabled())for(let n of r.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(r.type),n.uri)}toFileWatcherType(r){switch(r){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},S0e=class extends H9{constructor(r,n){super(r,n);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(r){this.fileChangeListeners.push(r)}onWorkspaceChange(r){this.workspaceChangeListeners.push(r)}dispose(){}async triggerFileChange(r,n){for(let i of this.fileChangeListeners)await i(r,n)}async triggerWorkspaceChange(r,n){for(let i of this.workspaceChangeListeners)await i(r,n)}},R0e=class extends ET{constructor(r){super();this.ctx=r}static{s(this,"LspFileSearch")}async findFiles(r,n,i){return(await this.ctx.get(iu).getWatchedFiles(n)).map(a=>this.ctx.get(Rr).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var k0e=class extends vT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new V9(e),e.set(V9,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function AUe(t){let e=t.get(Ec),r=new bT(e);t.set(bT,r),t.set(vT,new k0e(t))}s(AUe,"setupMultiLanguageContextProviderFeature");f();f();f();var xA=new Map;xA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});xA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});xA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});xA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});xA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});xA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var cPt=new _t("sdk");function xV(t,e){xA.has(t.get(fn).getEditorPluginInfo().name)||cPt.warn(t,...e)}s(xV,"deprecationWarning");var yze=je(Y0e()),gh=je(wm());f();f();f();var $r={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Ic=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(lWe(e))}};function st(t,e){let r=ms.Compile(t);return async(n,i,o)=>{if(!r.Check(o)){let a=lWe(r.Errors(o));return[null,{code:$r.InvalidParams,message:a}]}return e(n,i,o)}}s(st,"addMethodHandlerValidation");function lWe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(r=>`- ${r.path}: ${r.message}`).join(`
`)}`}s(lWe,"createErrorMessage");f();var K0e=je(ii());f();var bA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var DV="github.copilot.finishDeviceFlow",J0e=class extends bA{constructor(){super(...arguments);this.name=DV;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(r,n){let i=this.ctx.get(mn).pendingSignIn;if(!i)throw new K0e.ResponseError($r.InvalidRequest,"No pending sign in");try{await this.ctx.get(pc).open(i.verificationUri)}catch(o){Ad.warn(this.ctx,"Failed to open",i.verificationUri),Ad.exception(this.ctx,o,DV)}try{return await i.status}catch(o){throw new K0e.ResponseError($r.DeviceFlowFailed,String(o))}finally{this.ctx.get(mn).pendingSignIn=void 0}}},cWe=[J0e];f();f();var is=class extends Jr{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var e6="github.copilot.didAcceptCompletionItem",X0e=class extends bA{constructor(){super(...arguments);this.name=e6;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(r,[n]){let o=this.ctx.get(is).get(n);return o?(Bq(this.ctx,o),!0):!1}},uWe=[X0e];f();var oNt="github.copilot.didAcceptNextEditSuggestionItem",Z0e=class extends bA{constructor(){super(...arguments);this.name=oNt;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(r,[n]){return await this.ctx.get(sh).handleAcceptance(n),!0}},dWe=[Z0e];f();var tfe="github.copilot.didAcceptPanelCompletionItem",efe=class extends bA{constructor(){super(...arguments);this.name=tfe;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(r,n){let[i]=n,a=this.ctx.get(is).get(i);return a?(x2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},fWe=[efe];var sNt=[...cWe,...uWe,...dWe,...fWe];function pWe(t,e){let r=new Map;for(let n of sNt){let i=new n(t),o=ms.Compile(i.arguments);r.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((n,i)=>{let o=r.get(n.command);if(!o)throw new Error(`Unknown command: ${n.command}`);let a=Ly(n.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(n.arguments))return o.command.handle(i,a);throw new Ic(o.typeCheck.Errors(n.arguments))}),[...r.keys()]}s(pWe,"registerCommands");f();var mWe=je(require("node:events"));var X0=class extends PI{constructor(r){super(new US,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...r},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(n=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${aNt(n.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(ft[n],this.env[o]),this.setConfig(ft[n],this.env[o]))}})}setConfig(r,n){super.setConfig(r,n??this.envSettings.get(r)),this.emitters.get(r)?.emit("change",n)}onConfigChange(r,n){this.emitters.has(r)||this.emitters.set(r,new mWe.default),this.emitters.get(r)?.on("change",n)}};function aNt(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(aNt,"camelCaseToSnakeCaseAllCaps");var lNt="unknown-editor",hWe="unknown-editor-plugin",PV=class extends fn{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,r,n=[]){this._editorInfo=r,this._editorPluginInfo=e,this._relatedPluginInfo=n}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:lNt,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:hWe,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function gWe(t){return t.getEditorPluginInfo().name!==hWe}s(gWe,"hasValidInfo");f();var yWe=require("node:events");var AWe="initialize",Fy=class{constructor(){this.emitter=new yWe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(AWe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(AWe)}};f();var My=je(wm());var cNt=new Map([[4,My.MessageType.Log],[3,My.MessageType.Info],[2,My.MessageType.Warning],[1,My.MessageType.Error]]),NV=class extends $a{static{s(this,"NotificationLogger")}logIt(e,r,n,...i){if(r==4&&!Pq(e)&&n!=="console")return;let o={type:cNt.get(r),message:p3e(n,...i)},a=e.get(yr).connection;try{a.sendNotification(new My.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof My.ConnectionError)return;throw l}}};f();var CWe=je(Sa());var LV=class{constructor(e,r=!1){this.ctx=e;this.codeSnippets=r}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,r,n){this.ctx.get(yr).connection.sendNotification(new CWe.NotificationType(this.notificationName),{type:"event",name:e,properties:r||{},measurements:n||{}})}sendTelemetryErrorEvent(e,r,n){this.sendTelemetryEvent(e,r,n)}dispose(){return Promise.resolve()}};async function xWe(t){let e=t.get(Pl),r=e.deactivate();e.setReporter(new LV(t)),e.setRestrictedReporter(new LV(t,!0)),await r}s(xWe,"setupRedirectingTelemetryReporters");f();f();var FV=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,r){r?Bt(e,"installed.reinstall"):Bt(e,"installed.new")}handleUpgrade(e){Bt(e,"installed.upgrade")}handleUninstall(e){Bt(e,"uninstalled")}};var t6=je(Y0e());var UR=class extends FV{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let r=e.get(fn).getEditorPluginInfo();return await e.get(Ec).read("versions",r.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(Ec).listSettings()).length>0}async markInstalled(e){let r=e.get(fn).getEditorPluginInfo();await e.get(Ec).update("versions",r.name,r.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let r=e.get(fn).getEditorPluginInfo(),n=await e.get(Ec).read("versions",r.name);return n===void 0&&await this.hasPersistedSettings(e)?!0:(0,t6.gt)((0,t6.coerce)(r.version),(0,t6.coerce)(n))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let r=e.get(fn).getEditorPluginInfo();await e.get(Ec).delete("versions",r.name),(await e.get(Ec).listKeys("versions")).length===0&&await e.get(Ec).deleteSetting("versions")}};f();var vWe=require("events"),nfe=je(require("path")),MV=je(Sa());var rfe="didChangeWatchedFiles",uNt={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},lh=class t{constructor(e){this.ctx=e;this.emitter=new vWe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new MV.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(yr).connection}init(){this.ctx.get(Ho).getCapabilities().watchedFiles&&this.connection.onNotification(MV.DidChangeWatchedFilesNotification.type,r=>{"workspaceUri"in r&&typeof r.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(r)})}async getWatchedFiles(e){if(!this.ctx.get(Ho).getCapabilities().watchedFiles)return uNt;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=nfe.extname(c).toLowerCase();if(!I8.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(rfe,e)}offDidChangeWatchedFiles(e){this.emitter.off(rfe,e)}async didChangeWatchedFilesHandler(e){let r=[],n=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=nfe.extname(o.uri).toLowerCase();if(!I8.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:n.push(l);break;case 2:r.push(l);break;case 3:i.push(l);break}}this.emitter.emit(rfe,{workspaceFolder:{uri:e.workspaceUri},created:n,changed:r,deleted:i})}async getValidDocument(e){let n=await this.ctx.get(bn).getOrReadTextDocument({uri:e});return n.status==="valid"?n.document:void 0}};f();f();var dNt=I.Object({uri:I.String({minLength:1})});async function fNt(t,e,r){let n=await t.get(bn).getOrReadTextDocument(r);return[{status:ys(n),...n.status==="invalid"&&{reason:n.reason},...n.status==="notfound"&&{reason:n.message}},null]}s(fNt,"handleCheckFileStatusChecked");var bWe=st(dNt,fNt);f();var pNt=I.Object({});function EWe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(EWe,"calculatePercentRemaining");async function mNt(t,e,r){let n=await t.get(mn).getSession(t);if(n){let i=await mte(t,n);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:EWe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:EWe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:$r.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:$r.InternalError,message:"Not signed in"}]}s(mNt,"handleCheckQuotaChecked");var IWe=st(pNt,mNt);f();var hNt=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function gNt(t,e,r){return[await t.get(mn).checkAndUpdateStatus(t,r.options),null]}s(gNt,"handleCheckStatusChecked");var TWe=st(hNt,gNt);f();f();f();f();f();f();function wWe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(wWe,"filterUnsupportedReferences");function _We(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(_We,"convertToCopilotReferences");var SWe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var Bb=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,r){let n=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(r.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(n,o,wWe(r.copilotReferences),r.copilotErrors??[],r.copilotConfirmation)}append(e,r,n,i,o){this.deltaApplier(e,r,n,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...r.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let r=[],n=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return r.push(...n),r.push(...i),r}};f();var ol=class{static{s(this,"ConversationInspector")}};f();var ife={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ws=class{constructor(e){this.ctx=e;this.progressEntries=new Jr(250)}static{s(this,"ConversationProgress")}async begin(e,r,n){let i={status:"open",handler:n};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,r)}async report(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,r,n)}async end(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,r,n))}async cancel(e,r,n){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,r,n))}getProgressEntry(e){let r=this.progressEntries.get(e.id);if(r===void 0)throw new Error(`No work done token for conversation ${e.id}`);return r.status!=="open"&&Ur.error(this.ctx,`Work done token for conversation ${e.id} is already ${r.status}, last updated at ${r.updatedAt}`),r}};f();f();var EA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e,r){let n=this.githubRepositoryInfoCache.get(`${e}/${r}`);if(n)return n;let i=await this._doGetRepositoryInfo(e,r);if(i.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(`${e}/${r}`,o),o}throw new Error(`Failed to fetch repository info for ${e}/${r}`)}async _doGetRepositoryInfo(e,r){let n=await this.ctx.get(Qr).getGitHubSession(),i={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};n&&(i.Authorization=`Bearer ${n.accessToken}`);let{apiUrl:o}=this.ctx.get(Fl).getConfiguredUrls(),a=new URL(`repos/${e}/${r}`,o).href;return this.ctx.get(on).fetch(a,{method:"GET",headers:i})}async isAvailable(e,r){try{return(await this._doGetRepositoryInfo(e,r)).ok}catch{return!1}}};f();f();f();var kWe=je(Z0());var IA=class{constructor(e,r,n){this.doc=e;this.selection=r;this.visibleRange=n}static{s(this,"ElidableDocument")}fromSelectedCode(e){let r=this.getExpandedSelection(),n=r;if(e.trimNewLines){let o=this.doc.getText(r),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;n={start:this.getLineStart(r.start.line+a),end:this.expandLineToEnd(r.end.line-l)}}let i=new St([(0,kWe.default)(this.doc.getText(n)).trim()]);return[this.wrapInTicks(i),n]}fromAllCode(e){let r=this.getDocumentRange(),n=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,n)?i=n:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:r.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):r.start},a={start:i.start,end:n.start.line>0&&n.start.line>i.start.line?this.expandLineToEnd(n.start.line-1):i.start},l={start:n.end.line<this.doc.lineCount-1&&n.end.line<i.end.line?this.getLineStart(n.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):r.end,end:r.end},u=[[o,.6],[a,.8],[n,1],[l,.4],[c,.2]],d=new St(u.filter(([p,m])=>!qR(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:Su(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||qR(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,r){return e.start.line<=r.start.line&&e.end.line>=r.end.line}rangeEquals(e,r){return e.start.line==r.start.line&&e.end.line==r.end.line}wrapInTicks(e,r){return new St([["```"+this.doc.detectedLanguageId,1],[e,r??1],["```",1]])}addLineNumbers(e){let r=this.doc.getText(e).split(`
`),n=this.doc.lineCount.toString().length;return r.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(n," ")}:${o}`).join(`
`)}};function qR(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(qR,"isEmptyRange");var BWe=je(require("path"));var DWe=I.Object({uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa)}),ofe=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(bn),n=await r.getOrReadTextDocument(e),i=ys(n);if(await this.turnContext.collectFile(lu,e.uri,i),n.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new IA(n.document,e.selection,e.visibleRange),l=r.getRelativePath(n.document);if(i==="empty")return new St([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(qR(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new St([...c,...u])}else if(n.status==="invalid")return new St([`The currently open file \`${BWe.basename(e.uri)}\` is content excluded.`])}},lu="current-editor",QV=class{constructor(e){this._resolver=e;this.id=lu;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new ofe(e)}};f();f();var Cl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(r=>r.id===e)}getDescriptors(){return[...this.skills]}},sfe=class{constructor(e,r,n){this.delegate=e;this.stepId=r;this.stepTitle=n}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let r=await this.delegate.resolveSkill(e);return r||await e.steps.finish(this.stepId),r}catch(r){throw await e.steps.error(this.stepId,r instanceof Error?r.message:`Error resolving ${this.stepTitle}`),r}}},afe=class{constructor(e,r){this.delegate=e;this.stepId=r}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,r){try{let n=await this.delegate.processSkill(e,r);return await r.steps.finish(this.stepId),n}catch(n){throw await r.steps.error(this.stepId,n instanceof Error?n.message:`Error processing ${this.stepId}`),n}}},Jl=class{constructor(e,r,n,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=r;this.stepTitle=n;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new sfe(this._resolver(e),this.id,this.stepTitle)}processor(e){return new afe(this._processor(e),this.id)}};var PWe=I.Object({name:I.String(),url:I.String()}),NWe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(PWe)})),remotes:I.Optional(I.Array(PWe))}),lfe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(TA,"git repository information");let r=[];return r.push([new St(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(r.push([new St([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&r.push([new St([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):r.push([new St(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&r.push([new St([`- Remotes: ${e.remotes.map(n=>n.name).join(", ")}`]),1]),new St(r)}},TA="git-metadata",OV=class extends Jl{static{s(this,"GitMetadataSkill")}constructor(e){super(TA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,r=>new lfe(r))}};async function LWe(t){let e=await t.skillResolver.resolve(lu);if(e){let a=e.uri,l=Jx(t.ctx,a);if(iTe(l))return{repoInfo:l,skillUsed:lu}}let r=await t.skillResolver.resolve(TA);if(!r||!r.remotes||r.remotes.length===0){Ur.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=r.remotes.find(a=>a.name==="origin")??r.remotes[0],o=Fte(i.url);if(o)return{repoInfo:{baseFolder:{uri:r.path},url:i.url,...o},skillUsed:TA}}s(LWe,"extractRepoInfo");async function FWe(t){let e=[];return await ANt(t,e),await yNt(t,e),await CNt(t,e),e}s(FWe,"skillsToReference");async function ANt(t,e){let r=await xNt(t);r&&e.push(r)}s(ANt,"addRepositoryReference");async function yNt(t,e){let r=await vNt(t);r&&e.push(r)}s(yNt,"addSelectionReference");async function CNt(t,e){let r=[],n=await ENt(t);n&&r.push(n),r.push(...await INt(t)),r.length>0&&e.push(...r)}s(CNt,"addFileReferences");async function xNt(t){let e=await LWe(t);if(e){let r=t.ctx.get(EA),n=e.repoInfo.owner,i=e.repoInfo.repo;if(await r.isAvailable(n,i))return{type:"github.repository",id:`${n}/${i}`,data:{type:"repository",name:i,ownerLogin:n,id:(await r.getRepositoryInfo(n,i)).id}}}}s(xNt,"gitMetadataToReference");async function vNt(t){let e=await t.skillResolver.resolve(lu);if(e&&e.selection){let n=await t.ctx.get(bn).getOrReadTextDocument(e),i=ys(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),n.status==="valid")return bNt(e,n.document)}}s(vNt,"currentEditorToSelectionReference");function bNt(t,e){if(t.selection&&!qR(t.selection)){let r=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:r}}}}s(bNt,"extractSelection");async function ENt(t){let e=await t.skillResolver.resolve(lu);if(e){let n=await t.ctx.get(bn).getOrReadTextDocument(e),i=ys(n);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),n.status==="valid")return{type:"client.file",id:n.document.uri,data:{content:n.document.getText(),language:n.document.detectedLanguageId}}}}s(ENt,"currentEditorToFileReference");async function INt(t){let e=[],r=t.turn.request.references;if(r&&r.length>0){let n=t.ctx.get(bn);for(let i of r)if(i.type==="file"){let o=await n.getOrReadTextDocument(i),a=ys(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s(INt,"fileReferenceToPlatformFileReference");f();f();f();f();var HWe=je(WV()),ffe=je(require("path"));var jWe=500,NNt=Math.floor(.25*jWe),GV=class{static{s(this,"FixedSizeChunking")}async chunk(e,r){let n=[],i=ffe.default.extname(__filename)===".ts"?ffe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return n=await HWe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),B=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:B,end:B+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:r.tokenizer,directory:i,chunkSize:jWe,overlap:NNt}}),n}};var LNt="fixedSize",FNt=new Map([["fixedSize",GV]]);function VWe(t){let e=t==="default"?LNt:t,r=FNt.get(e);if(!r)throw new Error(`Chunking constructor for type ${t} not found`);return r}s(VWe,"getChunkingAlgorithm");f();f();var HV=je(Ex()),wA=je(require("fs")),$We=require("os"),wp=je(require("path")),WR=require("process");var pfe=5e4,MNt=new _t("workspaceChunks"),jV=class t{constructor(e,r){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let n=Ti(r.uri),i=(0,HV.SHA256)(r.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=wp.join(QNt(),"project-context",`${n}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let r=(0,HV.SHA256)(e).toString().substring(0,this.pathHashLength),n=wp.basename(e);return wp.join(this.cacheRootPath,`${n}.${r}.json`)}async getChunksCacheFromCacheFile(e){let r=await wA.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(r)try{return JSON.parse(r)}catch{}}async getChunksCache(e){let r=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(r)}async setChunksCache(e,r){let n=this.getChunksCacheFile(e);try{await wA.promises.mkdir(wp.dirname(n),{recursive:!0}),await wA.promises.writeFile(n,JSON.stringify(r),{encoding:"utf8"})}catch(i){MNt.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let r=this.getChunksCacheFile(e);await wA.promises.rm(r).catch(()=>{})}async enumerateChunksCacheFileNames(){return await wA.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let r of await this.enumerateChunksCacheFileNames()){let n=wp.join(this.cacheRootPath,r);if(!this.chunksCountCache.has(n)){let i=await this.getChunksCacheFromCacheFile(n);this.chunksCountCache.set(n,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(n)||0}return e}async*getChunksForFile({uri:e}){let r=await this.getChunksCache(e);r!==void 0&&(yield*r.documentChunks)}async*getChunksFromCacheFile(e){let r=await this.getChunksCacheFromCacheFile(e);yield*r?r.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let r=await this.enumerateChunksCacheFileNames();for(let n of r)yield*this.getChunksFromCacheFile(wp.join(this.cacheRootPath,n))}}async getFileHash(e){let r=Go(e),n="";return r&&(n=await wA.promises.readFile(r,{encoding:"utf8"}).catch(()=>"")),(0,HV.SHA256)(n).toString()}async addChunks({uri:e},r){let n=Array.isArray(r)?()=>Promise.resolve(r):r,i=Go(e);if(!i)return;async function o(p){try{return(await wA.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await n();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let r=fl(e),n=await this.getChunksCache(r);return n===void 0?[]:(await this.removeChunksCache(r),n.documentChunks)}async deleteChunks({uri:e}){let r=Go(e);if(!r)return[];let n;try{n=await wA.promises.readdir(r)}catch{return await this.deleteChunksForSource(r)}let i=[];for(let o of n){let a=fl(wp.join(r,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await wA.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function QNt(){return WR.env.XDG_CACHE_HOME&&wp.isAbsolute(WR.env.XDG_CACHE_HOME)?WR.env.XDG_CACHE_HOME+"/github-copilot":(0,$We.platform)()==="win32"?WR.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":WR.env.HOME+"/.cache/github-copilot"}s(QNt,"getXdgCachePath");var mfe=1e4;var VV=class{constructor(e,r,n){this.workspaceFolder=r;this.implementation=n;this._chunkLimiter=new gfe;this.status="notStarted",this.workspaceChunks=new jV(e,r),this.cancellationToken=new hfe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,r){return r?await this.chunkFiles(e,r):await this.chunkWorkspace(e)}async chunkWorkspace(e){let r=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(r,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let n=await e.get(iu).getWatchedFiles(this.workspaceFolder);this._totalFileCount=n.length,n.length>mfe&&(this._fileCountExceeded=!0,n=n.slice(0,mfe));let i=n.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){Ta(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(r,performance.now()),await this.workspaceChunks.getChunksCount()>pfe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,r){await this.updateModelConfig(e);let n=r.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(n)}catch(i){Ta(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>pfe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>mfe&&(this._fileCountExceeded=!0),p4e(...r.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,r){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(r,()=>this.implementation.chunk(r,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await xo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,r){this._chunkingTimeMs=r-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},hfe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},gfe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((r,n)=>{this.tasks.push({factory:e,resolve:r,reject:n}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:r,reject:n}=this.tasks.shift();this.runningTasks++;let i=e();i.then(r,n),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var ha=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,r){let n=VWe(r),i=new n;return new VV(this.ctx,e,i)}getImplementation(e,r="default"){let n=this.getParentFolder(e);if(n)return this.workspaceChunkingProviders.get(n.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,r),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let r=[];for(let n of this.workspaceChunkingProviders.values())r.push(n.workspaceFolder);return r.find(n=>{let i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==n.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let r=this.getImplementation(e);return{fileCountExceeded:r.fileCountExceeded,chunkCountExceeded:r.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,r){let n=this.getImplementation(r);n.terminateChunking();let o=an.createAndMarkAsIssued().extendedBy(void 0,{fileCount:n.filesUpdatedCount});Bt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(r.uri)}async clearChunks(e,r){this.terminateChunking(e,r),await this.getImplementation(r).clearChunks()}async deleteSubfolderChunks(e,r){return await this.getImplementation(e).deleteSubfolderChunks(r.uri)}async deleteFileChunks(e,r){let n=this.getImplementation(e),i=[];Array.isArray(r)||(r=[r]);for(let o of r)i.push(...await n.deleteFileChunks(o));return i}async chunk(e,r,n,i){let o;return n&&(Array.isArray(n)?o=n:i=n),i||(i="default"),o?await this.chunkFiles(e,r,o,i):await this.chunkFolder(e,r,i)}async chunkFolder(e,r,n="default"){let i=this.getImplementation(r,n),o=await i.chunk(e),l=an.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return Bt(e,"index.chunk",l),o}async chunkFiles(e,r,n,i="default"){return await this.getImplementation(r,i).chunk(e,n)}};f();f();f();f();f();function zV(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(zV,"toChatModeEnum");var Db=class{constructor(e,r){this.request=e;this.telemetryId=sr();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=r??this.telemetryId}static{s(this,"Turn")}},$V=class t{constructor(e=[],r="panel",n="en",i){this.turns=e;this.source=r;this.userLanguage=n;this._telemetryId=sr();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),r=new t(e,this.source,this.userLanguage,this.id);return r._telemetryId=this.telemetryId,r._timestamp=this.timestamp,r}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(r=>r.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(r=>r.id===e)}};f();f();f();var zWe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},YWe="Alright, This response contains a code citation.";f();var KWe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var JWe=je(require("fs")),Vu=je(require("path"));var Afe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],yfe="test_",i6={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},o6=class{constructor(e,r,n=void 0){this.ctx=e;this.fileExists=r;this.baseUri=n}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let r=Ti(e),n=Vu.extname(r).replace(".",""),i=i6[n]??{location:"sameFolder",prefix:yfe,suffix:Afe},o=[];if(i.prefix&&o.push(i.prefix+r),i.suffix)for(let u of i.suffix??[]){let d=r.replace(`.${n}`,u+"."+n);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Go(gd(e)),l===void 0)return}else{let u=Go(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=Vu.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=fl(l);if(await this.fileExists(c))return bo(c,o[0])}parseTestFilePath(e){try{return fl(e)}catch(r){Mr.error(this.ctx,`Failed to parse test file path: ${e}`,r);return}}async findImplFileForTestFile(e){let r=Ti(e),n=Vu.extname(r).replace(".",""),i=i6[n]??{location:"sameFolder",prefix:yfe,suffix:Afe},o=[];if(i.prefix&&o.push(r.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=r.substring(0,r.length-c.length-1-n.length)+"."+n;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=gd(e):l=this.determineImplFolder(e);for(let c of o){let u=bo(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let r=Go(e);if(r===void 0)return;let n=Vu.extname(Ti(e)).replace(".",""),i,o=i6[n]?.location??"sameFolder";o==="sameFolder"?i=Vu.dirname(r):i=this.determineTestFolder(r,o);let a=this.findFiles(i,`.${n}`,i6[n]);if(a.length>0)return fl(a[0])}findFiles(e,r,n){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${Vu.sep}${a}`;n?.prefix&&a.startsWith(n.prefix)&&o.push(l),n?.suffix&&n?.suffix.some(c=>a.endsWith(c+r))&&o.push(l)}return o}_readdir(e){return JWe.readdirSync(e,{withFileTypes:!0}).filter(r=>r.isFile()).map(r=>r.name)}determineTestFolder(e,r){let n=(this.baseUri&&Go(this.baseUri))??"",i=Vu.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,n,i,r);return[n,...o].filter(a=>a).join(Vu.sep)}getRelativeTestFolder(e,r,n,i){let o=Vu.dirname(e).replace(r,"");switch(n){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let r=Vu.extname(Ti(e)).replace(".",""),n=gd(e);switch(r){case"php":case"dart":case"py":return n.replace("tests","src");case"ps1":return n.replace("Tests","src");case"rb":return n.replace("/test","");case"cs":return n.replace("src/tests","src");case"java":case"scala":case"kt":return n.replace("src/test","src/main");default:return n.replace("test/","src/")}}};function s6(t){let e=Ti(t),r=Vu.extname(e),n=i6[r.replace(".","")];return n?!(n.suffix&&!n.suffix.some(o=>e.endsWith(o+r))||n.prefix&&!e.startsWith(n.prefix)):!!(Afe.some(o=>e.endsWith(o+r))||e.startsWith(yfe))}s(s6,"isTestFile");f();var XWe=["indexed","indexing","not_indexed"],Pb=class{constructor(){this._cache=new Jr(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,r,n){let i=e.ctx;if(!n)return!1;let o=`repos/${r}/copilot_internal/embeddings_index`,a=await Mf(i,n,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,r,n,i=!1){let o=D1(r);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,n);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function ZWe(t,e,r,n){let i=Do(e.tokenizer),o=r.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(Qr).getToken(),c=IM(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!n.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await ONt(t,c,u,e.modelId,p,n);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(ZWe,"fetchEmbeddings");async function ONt(t,e,r,n,i,o){let a=sr(),l=i.map(u=>u.text),c=await iI(t,e,r,void 0,a,{input:l,model:n,dimensions:1024},o,Vx(t));if(c.status!==200||o.isCancellationRequested){Ta(t,new Qy(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(ONt,"sendEmbeddingsRequest");f();f();var YV=class{static{s(this,"CosineSimilarityScoring")}score(e,r){let n=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(r.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*r[c],0)/(n*i)}terminateScoring(){}};var UNt="cosine",qNt=new Map([["cosine",YV]]);function eGe(t){let e=t==="default"?UNt:t,r=qNt.get(e);if(!r)throw new Error(`Scoring constructor for type ${t} not found`);return r}s(eGe,"getScoringAlgorithm");f();var ef=class{constructor(){this.workspaceScoringProviders=new Jr(25)}static{s(this,"ScoringProvider")}createImplementation(e,r){let n=eGe(r);return new n}getImplementation(e,r,n="default"){let i=this.workspaceScoringProviders.get(r.uri);return i||(i=this.createImplementation(e,n),this.workspaceScoringProviders.set(r.uri,i)),i}score(e,r,n,i,o){return this.getImplementation(e,r,o).score(n,i)}terminateScoring(e,r,n){this.getImplementation(e,r,n).terminateScoring(),this.workspaceScoringProviders.delete(r.uri)}};var tGe={modelFamily:_M.textEmbedding3Small,scoringType:"default",dimensions:null};async function rGe(t,e,r,n,i,o,a,l=tGe){let c={...tGe,...l},u=GNt(t,e,r,n);Ur.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(ra).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await ZWe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(B=>B.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=HNt(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return Ur.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(B=>u.find(N=>N.id===B.id).id)}s(rGe,"rerankSnippets");function GNt(t,e,r,n){let i=n.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:r.toLowerCase()}),i}s(GNt,"formatEmbeddingsInput");function HNt(t,e,r,n,i){let o=t.get(ef);return r.map(l=>({id:l.id,score:o.score(t,e,n.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s(HNt,"scoreEmbeddings");f();f();f();var xfe=je(WV());var jNt=.75,VNt=1.2,$Nt=47,KV=class{constructor(e,r){this.ctx=e;this.workspaceFolder=r;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let r of e)this.sumTokenCount+=r.tokenCount,this.chunksCount++}async query(e){let r=await JV();try{return await this.doQuery(e)}finally{await r.stopWorkerPool()}}async doQuery(e){let r=e.map(l=>l.toLowerCase()),n=await this.calculateIDFValues(r),i=Math.min(10*e.length,$Nt),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(r,this.avgTokenCount,n,o)}async calculateIDFValues(e){let r=this.ctx.get(ha).getChunks(this.workspaceFolder),n=G1(r,o=>({...o,chunk:o.chunk.toLowerCase()})),i=G1(n,o=>o.chunk);return await zNt(e,i)}async calculateBM25Scores(e,r,n,i){let o=this.ctx.get(ha).getChunks(this.workspaceFolder),a=new Cfe(i);for await(let l of o){let c=await YNt({...l,chunk:l.chunk.toLowerCase()},e,r,n);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((r,n)=>r+n.tokenCount,0)}terminateRanking(){}};async function zNt(t,e){let r=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),n=new Int32Array(r),i=[],o=0;for await(let c of e){o++;let u=xfe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(n,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(r),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(zNt,"calculateIDFValues");async function YNt(t,e,r,n){return{score:await xfe.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:r,idfValues:n,k1:VNt,b:jNt}}),...t}}s(YNt,"calculateBM25Score");var Cfe=class{constructor(e,r=-1/0){this.maxSize=e;this.minScore=r;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let r=this.store.at(0).score*(1-e);return this.store.filter(n=>n.score>=r)}return this.store}add(e){if(e.score<=this.minScore)return;let r=this.store.findIndex(n=>n.score<e.score);for(this.store.splice(r>=0?r:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var JNt="bm25",XNt=new Map([["bm25",KV]]);function nGe(t){let e=t==="default"?JNt:t,r=XNt.get(e);if(!r)throw new Error(`Ranking constructor for type ${t} not found`);return r}s(nGe,"getRankingAlgorithm");var Tc=class{constructor(){this.workspaceRankingProviders=new Jr(25)}static{s(this,"RankingProvider")}createImplementation(e,r,n){let i=nGe(n);return new i(e,r)}getImplementation(e,r,n="default"){let i=this.workspaceRankingProviders.get(r.uri);return i||(i=this.createImplementation(e,r,n),this.workspaceRankingProviders.set(r.uri,i)),i}status(e,r,n){return this.getImplementation(e,r,n).status}async initialize(e,r,n,i="default"){await this.getImplementation(e,r,i).initialize(n)}async addChunks(e,r,n,i="default"){await this.getImplementation(e,r,i).addChunks(n)}async query(e,r,n,i){return this.getImplementation(e,r,i).query(n)}async terminateRanking(e,r,n){await this.getImplementation(e,r,n).terminateRanking(),this.workspaceRankingProviders.delete(r.uri)}deleteEmbeddings(e,r,n,i){return this.getImplementation(e,r,i).deleteEmbeddings(n)}};f();async function iGe(t,e){let r=t.ctx,n=await xo.getModelConfiguration(r,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:n},o=await r.get(wc).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:n,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new ta(r),c=await gc(r,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Ur.debug(r,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";Ta(r,new Qy(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s(iGe,"parseUserQuery");var oGe=je(Z0());var Qy=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},XV=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,r){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");r===void 0&&(r=!0);let n=e.ctx,i=n.get(ha),o=i.status(e.turn.workspaceFolder),a=n.get(Tc),l=a.status(n,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(r){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(n,c).then(u=>{if(i.status(c)==="completed")return a.initialize(n,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(n,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,r){let n=e.turn.workspaceFolder;if(!n)return[];let i=e.ctx,a=await i.get(ha).chunkCount(n);if(a===0)return[];r.chunkCount=a;let l,c=performance.now();try{l=await iGe(e,e.cancelationToken)}catch(g){let y=new Qy(g);Ta(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(r.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(Tc),p=[],m=performance.now();try{let g=await d.query(i,n,l);r.localSnippetCount=g.length,p=g}catch(g){let y=new Qy(g);Ta(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return r.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,r,n){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Vr(e.turn.request.message),l=[];try{l=await rGe(o,i,a,r,5,e.cancelationToken,n)}catch(d){let p=new Qy(d);Ta(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(bn);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=r.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=Vo.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let r=this.collectInfoMessage(e);r&&await e.info(r);let n={...y4e},i=await this.collectLocalSnippets(e,n);if(i.length===0)return{snippets:[],measurements:n};let o=e.ctx;return Ur.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,n),measurements:n}}collectInfoMessage(e){let r=e.turn.workspaceFolder;if(!r)return;let o=e.ctx.get(ha).checkLimits(r);if(o.fileCountExceeded||o.chunkCountExceeded)return oGe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var aGe=je(sGe()),t$=je(WV()),lGe=je(require("os")),cGe=je(Z0());var t7t=Math.min(Math.max(Math.ceil(lGe.cpus().length/2),1),10),a6=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new aGe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await t$.start({maxWorkers:t7t})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await t$.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let r of e)await r.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},JV=a6.startWorkerPool.bind(a6);var Kkn=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),Efe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(GR);return}let r=[],n=this.turnContext.ctx.get(bn),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await n.getOrReadTextDocument(o);if(u.status==="valid"){let d=new IA(u.document,c,c),p=new St([l]),h=s6(a)?.5:.8;r.push([`Code excerpt from file \`${Go(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(HR,a,ys(u),c)}}if(r.length>0)return r.unshift([new St(["The user wants you to consider the following snippets when computing your answer."]),1]),new St(r)}removeDuplicateSnippets(e){let r={};return e.forEach(n=>{let i=`${n.uri}#[${n.range.start.line},${n.range.start.character}]-[${n.range.end.line},${n.range.end.character}]`;r[i]||(r[i]=n)}),Object.values(r)}},GR="collect-project-context",ZV=class extends LR{constructor(r,n=[new XV]){super();this.ctx=r;this.snippetProviders=n;this.ready=!1;this.ctx.get(AA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(r){if(!await this.isEnabled()||(this.workerPoolToken=await JV(),!r.uri))return;let n=this.ctx.get(ha),i=this.ctx.get(iu),o=this.ctx.get(Tc),a=await n.chunk(this.ctx,r);n.status(r)!=="completed"&&i.terminateWatching(r),await o.initialize(this.ctx,r,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(r){if(!await this.isEnabled())return;let n=this.ctx.get(ha);if(!r)return;let i=n.getParentFolder(r);if(i){let l=await n.deleteSubfolderChunks(i,r);await this.ctx.get(Tc).deleteEmbeddings(this.ctx,i,l);return}n.terminateChunking(this.ctx,r),await this.ctx.get(Tc).terminateRanking(this.ctx,r),this.ctx.get(ef).terminateScoring(this.ctx,r),n.workspaceCount===0&&await a6.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(r,n){let i=this.ctx.get(ha),o=this.ctx.get(Tc),a=this.ctx.get(ef);for(let l of n)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,r)}async onFileChange(r){if(!await this.isEnabled())return;let n=await JV();try{let i=r.documents.map(c=>c.uri),o=r.workspaceFolder;if(!o)return;let a=this.ctx.get(ha),l=this.ctx.get(Tc);if(r.type==="delete"||r.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(r.type==="create"||r.type==="update"){let c=await a.chunk(this.ctx,o,r.documents);await l.addChunks(this.ctx,o,c)}}finally{await n.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(r){await r.steps.start(GR,"Collecting relevant project context"),await r.info(cGe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let n=this.snippetProviders.map(async l=>l.snippetProviderStatus(r)),i=await Promise.all(n),o="not_indexed",a;for(let l of XWe){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(r);if(await C4e(r,a.providerType,c),l.length===0){await r.steps.error(GR,"No project context found");return}return await r.steps.finish(GR),l}case"indexing":{await r.steps.error(GR,"Indexing repository, please try again later");return}case"not_indexed":{await r.steps.error(GR,"No project context available");return}}}},HR="project-context",e$=class extends Jl{static{s(this,"ProjectContextSkill")}constructor(e){super(HR,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,r=>new Efe(r),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var uGe=I.Object({labels:I.Array(I.String())}),Ife=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let r=[];return r.push([new St(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(n=>{r.push([new St([`- ${n}`]),.9]),this.turnContext.collectLabel(ch,n)}),new St(r)}},ch="project-labels",r$=class{constructor(e){this._resolver=e;this.id=ch;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Ife(e)}};f();var n$=je(Z0());var fGe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},pGe=n$.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,mGe=n$.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,r7t=n$.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,Tfe=`

`,dGe=pGe+Tfe+mGe;function hGe(t){let e=1;if(t.length===0)return{reply:dGe,vulnerabilities:e};if(t==="0")return{reply:dGe,vulnerabilities:0};if(t==="help")return{reply:r7t,vulnerabilities:e};let r=t.slice(-1);isNaN(Number(r))||(e=Number(r),t=t.slice(0,-1));let n="";for(let i of t)i==="p"?n+=pGe+Tfe:i==="c"&&(n+=mGe+Tfe);return{reply:n.trimEnd(),vulnerabilities:e}}s(hGe,"parseVulnerabilitiesInstructions");var gGe=je(Z0());var n7t="Oops, your response got filtered. Vote down if you think this shouldn't have happened",i7t="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",wfe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,r){throw new Error(r.length>0?r:"Debug Fail")}},o7t=new wfe,_fe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Xl(i7t,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},s7t=new _fe,Sfe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,r){let n="warning";r.includes("info")&&(n="info");let i=r.replace("info","").replace("warning","").trim(),o=[{severity:n,message:i.length>0?i:"Debug Notification"}];return new Xl("Alright, I'm producing a notification",void 0,[],o)}},a7t=new Sfe,Rfe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Xl(n7t,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},l7t=new Rfe,kfe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Xl(await yGe(e))}},c7t=new kfe,Bfe=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[ch,lu]}instructions(e,r){return"Create a function that prints a christmas tree"}},u7t=new Bfe,Dfe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Xl(Vr(e.turn.request.message))}},d7t=new Dfe,Pfe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,r){let n=e.ctx.get(Zl).getLastTurnPrompts();if(n!==void 0&&n.size>0){let i="Here are the prompts used in the last turn:";return n.forEach((o,a)=>{i+=gGe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Xl(i)}return new Xl("No prompt available")}},f7t=new Pfe,Nfe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,r,n){let i,o;if(r.length>0){let a=r.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Xl(await CGe(e,n,i))}},p7t=new Nfe,Lfe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,r){let{reply:n,vulnerabilities:i}=hGe(r);for(let o=0;o<i;o++)e.turn.annotations.push(fGe);return new Xl(n,void 0,e.turn.annotations)}},m7t=new Lfe,Ffe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(zWe),new Xl(YWe,void 0,e.turn.annotations)}},h7t=new Ffe,Mfe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Xl(KWe)}},g7t=new Mfe,Qfe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,r){return"Write out the OWASP top 10 with code examples in java"}},A7t=new Qfe,Ofe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[HR]}},y7t=new Ofe,Ufe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Xl("Alright, I'm producing a notification",void 0,[],[],[],e)}},C7t=new Ufe;function AGe(){return[o7t,s7t,a7t,l7t,u7t,c7t,d7t,f7t,p7t,m7t,h7t,C7t,g7t,A7t,y7t]}s(AGe,"getDebugTemplates");f();f();function Lb(t,e){if(t.length==0)return new St([]);let r=t.map((n,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(n)&&n.length==2&&(o*=n[1],n=n[0]),[n,o]});return new St(r)}s(Lb,"weighElidableList");var xGe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:wa}))}),qfe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(bn),n=await r.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Fb,e.uri,ys(n)),n.status==="valid"){let i=r.getRelativePath(n.document);this.turnContext.collectLabel(Fb,`problems in ${i}`);let o=this.getElidableProblems(e,n,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Fb,"problem markers")}getElidableProblems(e,r,n){let i=[];return i.push(new St([`Problems and errors in the active document (\`${n}\`):`])),i.push(...this.createElidableProblems(e,r)),Lb(i,"linear")}createElidableProblems(e,r){return e.problems.map(n=>{let i=[];i.push(new St([`- "${n.message}" at line ${n.range.start.line}.`+(r.document?" Excerpt from the code:":"")]));let o=n.range,a;if(o&&(this.isEmpty(o)?a=r.document.lineAt(o.start).text:a=r.document.getText(o),a)){let l=r.document.detectedLanguageId;i.push(new St([["```"+l,1],[Su(a),.8],["```",1]]))}return new St(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let r=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new St([n])}},Fb="problems-in-active-document",i$=class extends Jl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Fb,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,r=>new qfe(r),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var o$=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let r=this.turnContext.ctx.get(Rr).getWorkspaceFolder(e),n=this.fileExistFn(),i=new o6(this.turnContext.ctx,n,r?.uri),o=await i.findTestFileForSourceFile(e.uri),a=s6(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await n(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!s6(e))return;let n=this.turnContext.ctx.get(Rr).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new o6(this.turnContext.ctx,i,n?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new St([[`${x7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new St([])}async asTestFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new St([[`${v7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new St([])}async asExampleFilePrompt(e,r){let n=await this.fileInfoForPrompt(r);if(n){let[i,o]=n;return new St([[`${b7t} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new St([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let r=this.turnContext.ctx.get(bn),n=await r.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(uh,e,ys(n)),n.status==="valid"){let i=r.getRelativePath(n.document);return[Su(n.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(lo).stat(e),!0}catch{return!1}}}},x7t="Code excerpt from the implementation source file",v7t="Code excerpt from the test file",b7t="Code excerpt from an example test file";var vGe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),Gfe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let r=this.turnContext.ctx.get(bn),n=new o$(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(uh,e.testFileUri,ys(i)),i.status==="valid")return await n.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(uh,e.sourceFileUri,ys(i)),i.status==="valid")return await n.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(uh,e.sourceFileUri,ys(i)),i.status==="valid")return await n.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await r.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(uh,e.testFileUri,ys(i)),i.status==="valid")return await n.fromTestFile(i.document)}}},uh="test-context",s$=class extends Jl{static{s(this,"TestContextSkill")}constructor(e){super(uh,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,r=>new Gfe(r))}};f();var bGe=je(Z0());var EGe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:wa}))}),Hfe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(ST,"test failures");let r=await this.createElidableFailures(e.failures);if(r){let n=new St(["The latest test run produced the following failures and errors:"]);return new St([[n,1],[r,1]])}}}async createElidableFailures(e){let r=this.turnContext.ctx.get(bn),n=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await r.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(ST,o,ys(l)),l.status==="valid"){let c=r.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);n.push([d,1])}}if(n.length>0)return new St(n)}groupFailuresByFile(e){let r=new Map;for(let n of e){let i=r.get(n.testFileUri)||[];i.push(n),r.set(n.testFileUri,i)}return r}createElidableFailuresOfDoc(e,r){let n=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${r}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new St([bGe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new St(n)}appendCode(e,r,n){let i=[new St([`
The code of file \`${r}\` is:
`]),.6],o=[new St([["```"+n.detectedLanguageId,1],[Su(n.getText()),.9],["```",1]]),.7];return new St([[e,1],i,o])}},ST="test-failures",a$=class extends Jl{static{s(this,"TestFailuresSkill")}constructor(e){super(ST,"Test failures and errors of the latest test run","Collecting test failures",()=>e,r=>new Hfe(r))}};var _p=je(Z0());var Xl=class{constructor(e,r,n=[],i=[],o=[],a){this.message=e;this.error=r;this.annotations=n;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},RT=class{constructor(e,r,n,i,o=[],a=[],l,c=!1){this.id=e;this.description=r;this.shortDescription=n;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,r,n="panel"){let i;return n==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+r}requiredSkills(){return this.skills}},E7t=new RT("tests","Generate unit tests","Generate Tests",_p.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[uh,ST],["chat-panel","editor"]),I7t=new RT("simplify","Simplify the code","Simplify This",_p.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],_p.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),T7t=new RT("fix","Fix problems and compile errors","Fix This",_p.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Fb],["editor","chat-panel","inline"],_p.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),w7t=new RT("explain","Explain how the code works","Explain This",_p.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],_p.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),_7t=new RT("doc","Document the current selection of code","Generate Docs",_p.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],_p.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),jfe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let r=zfe(e.conversation),n=_p.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return r?new Xl(n+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${r}
\`\`\``):new Xl(n)}},S7t=new jfe,Vfe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let r=$fe(e.ctx).filter(i=>i!=this),n=_p.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${r.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Xl(n)}},R7t=new Vfe;function l6(){return[E7t,I7t,T7t,w7t,_7t,S7t,R7t,...AGe()]}s(l6,"getPromptTemplates");function $fe(t){let e=l6();return!bB(t)&&!rm(t)&&(e=e.filter(r=>!r.id.startsWith("debug."))),e}s($fe,"getUserFacingPromptTemplates");var Yfe=class{constructor(e,r){this.conversation=e;this.capabilities=r}static{s(this,"ConversationHolder")}},Hi=class{constructor(e){this.ctx=e;this.conversations=new Jr(100)}static{s(this,"Conversations")}create({capabilities:e,source:r,userLanguage:n,conversationId:i}={}){let o=new $V([],r??"panel",n,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(Cl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new Yfe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,r,n,i,o,a,l,c){let u=this.get(e);return r.request.references=n&&n.length>0?n:[],i&&(r.request.activeEditor=i),o&&(r.workspaceFolder=o),a&&a.length>0&&(r.workspaceFolders=a),l&&l.length>0&&(r.ignoredSkills=l.map(d=>({skillId:d}))),c&&(r.agent={agentSlug:c.agentSlug},r.confirmationResponse=c),await this.determineAndApplyAgent(u,r),await this.determineAndApplyTemplate(u,r),u.addTurn(r),r}async determineAndApplyAgent(e,r){if(e.source==="panel"&&Vr(r.request.message).trim().startsWith("@")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Vr(r.request.message),"@");(await SA(this.ctx)).find(l=>l.slug===n)&&(r.request.message=i,r.request.type="user",r.agent={agentSlug:n})}}async determineAndApplyTemplate(e,r){if(Vr(r.request.message).trim().startsWith("/")){let[n,i]=this.extractKeywordAndQuestionFromRequest(Vr(r.request.message),"/"),o=l6().find(a=>a.id===n);if(o){r.request.message=i,r.request.type="user",await this.determineAndApplyAgent(e,r);let a=o.instructions?o.instructions(this.ctx,r.request.message,e.source):i;r.template={templateId:n,userQuestion:r.request.message},r.request.message=a,r.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,r){let[n,...i]=e.trim().split(" "),o=i.join(" ");return[n.replace(r,""),o]}deleteTurn(e,r){this.get(e).deleteTurn(r)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let r=this.ctx.get(Cl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),n=this.getCapabilities(e).skills;return[...r,...n]}filterSupportedSkills(e,r){let n=this.getSupportedSkills(e);return r.filter(i=>n.includes(i))}getHolder(e){let r=this.conversations.get(e);if(!r)throw new Error(`Conversation with id ${e} does not exist`);return r}getAll(){let e=this.conversations.values();return Array.from(e).map(r=>r.conversation)}findByTurnId(e){for(let r of this.getAll()){let n=r.findTurn(e);if(n)return{conversation:r,turn:n}}}};f();function OGe(t){return typeof t>"u"||t===null}s(OGe,"isNothing");function k7t(t){return typeof t=="object"&&t!==null}s(k7t,"isObject");function B7t(t){return Array.isArray(t)?t:OGe(t)?[]:[t]}s(B7t,"toArray");function D7t(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}s(D7t,"extend");function P7t(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}s(P7t,"repeat");function N7t(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(N7t,"isNegativeZero");var L7t=OGe,F7t=k7t,M7t=B7t,Q7t=P7t,O7t=N7t,U7t=D7t,xl={isNothing:L7t,isObject:F7t,toArray:M7t,repeat:Q7t,isNegativeZero:O7t,extend:U7t};function UGe(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}s(UGe,"formatError");function u6(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=UGe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(u6,"YAMLException$1");u6.prototype=Object.create(Error.prototype);u6.prototype.constructor=u6;u6.prototype.toString=s(function(e){return this.name+": "+UGe(this,e)},"toString");var Wd=u6;function Kfe(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}s(Kfe,"getLine");function Jfe(t,e){return xl.repeat(" ",e-t.length)+t}s(Jfe,"padStart");function q7t(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=Kfe(t.buffer,n[a-c],i[a-c],t.position-(n[a]-n[a-c]),p),l=xl.repeat(" ",e.indent)+Jfe((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=Kfe(t.buffer,n[a],i[a],t.position,p),l+=xl.repeat(" ",e.indent)+Jfe((t.line+1).toString(),d)+" | "+u.str+`
`,l+=xl.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=Kfe(t.buffer,n[a+c],i[a+c],t.position-(n[a]-n[a+c]),p),l+=xl.repeat(" ",e.indent)+Jfe((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(q7t,"makeSnippet");var W7t=q7t,G7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],H7t=["scalar","sequence","mapping"];function j7t(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}s(j7t,"compileStyleAliases");function V7t(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(G7t.indexOf(r)===-1)throw new Wd('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=j7t(e.styleAliases||null),H7t.indexOf(this.kind)===-1)throw new Wd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(V7t,"Type$1");var cu=V7t;function IGe(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}s(IGe,"compileList");function $7t(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(n,"collectType"),e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}s($7t,"compileMap");function Zfe(t){return this.extend(t)}s(Zfe,"Schema$1");Zfe.prototype.extend=s(function(e){var r=[],n=[];if(e instanceof cu)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Wd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof cu))throw new Wd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Wd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Wd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof cu))throw new Wd("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Zfe.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=IGe(i,"implicit"),i.compiledExplicit=IGe(i,"explicit"),i.compiledTypeMap=$7t(i.compiledImplicit,i.compiledExplicit),i},"extend");var z7t=Zfe,Y7t=new cu("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),K7t=new cu("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),J7t=new cu("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),X7t=new z7t({explicit:[Y7t,K7t,J7t]});function Z7t(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(Z7t,"resolveYamlNull");function eLt(){return null}s(eLt,"constructYamlNull");function tLt(t){return t===null}s(tLt,"isNull");var rLt=new cu("tag:yaml.org,2002:null",{kind:"scalar",resolve:Z7t,construct:eLt,predicate:tLt,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function nLt(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(nLt,"resolveYamlBoolean");function iLt(t){return t==="true"||t==="True"||t==="TRUE"}s(iLt,"constructYamlBoolean");function oLt(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(oLt,"isBoolean");var sLt=new cu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:nLt,construct:iLt,predicate:oLt,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function aLt(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(aLt,"isHexCode");function lLt(t){return 48<=t&&t<=55}s(lLt,"isOctCode");function cLt(t){return 48<=t&&t<=57}s(cLt,"isDecCode");function uLt(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!aLt(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!lLt(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!cLt(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}s(uLt,"resolveYamlInteger");function dLt(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}s(dLt,"constructYamlInteger");function fLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!xl.isNegativeZero(t)}s(fLt,"isInteger");var pLt=new cu("tag:yaml.org,2002:int",{kind:"scalar",resolve:uLt,construct:dLt,predicate:fLt,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),mLt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function hLt(t){return!(t===null||!mLt.test(t)||t[t.length-1]==="_")}s(hLt,"resolveYamlFloat");function gLt(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}s(gLt,"constructYamlFloat");var ALt=/^[-+]?[0-9]+e/;function yLt(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(xl.isNegativeZero(t))return"-0.0";return r=t.toString(10),ALt.test(r)?r.replace("e",".e"):r}s(yLt,"representYamlFloat");function CLt(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||xl.isNegativeZero(t))}s(CLt,"isFloat");var xLt=new cu("tag:yaml.org,2002:float",{kind:"scalar",resolve:hLt,construct:gLt,predicate:CLt,represent:yLt,defaultStyle:"lowercase"}),vLt=X7t.extend({implicit:[rLt,sLt,pLt,xLt]}),bLt=vLt,qGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),WGe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function ELt(t){return t===null?!1:qGe.exec(t)!==null||WGe.exec(t)!==null}s(ELt,"resolveYamlTimestamp");function ILt(t){var e,r,n,i,o,a,l,c=0,u=null,d,p,m;if(e=qGe.exec(t),e===null&&(e=WGe.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(r,n,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s(ILt,"constructYamlTimestamp");function TLt(t){return t.toISOString()}s(TLt,"representYamlTimestamp");var wLt=new cu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:ELt,construct:ILt,instanceOf:Date,represent:TLt});function _Lt(t){return t==="<<"||t===null}s(_Lt,"resolveYamlMerge");var SLt=new cu("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_Lt}),ipe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function RLt(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=ipe;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}s(RLt,"resolveYamlBinary");function kLt(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=ipe,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}s(kLt,"constructYamlBinary");function BLt(t){var e="",r=0,n,i,o=t.length,a=ipe;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}s(BLt,"representYamlBinary");function DLt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(DLt,"isBinary");var PLt=new cu("tag:yaml.org,2002:binary",{kind:"scalar",resolve:RLt,construct:kLt,predicate:DLt,represent:BLt}),NLt=Object.prototype.hasOwnProperty,LLt=Object.prototype.toString;function FLt(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,LLt.call(i)!=="[object Object]")return!1;for(o in i)if(NLt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(FLt,"resolveYamlOmap");function MLt(t){return t!==null?t:[]}s(MLt,"constructYamlOmap");var QLt=new cu("tag:yaml.org,2002:omap",{kind:"sequence",resolve:FLt,construct:MLt}),OLt=Object.prototype.toString;function ULt(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],OLt.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}s(ULt,"resolveYamlPairs");function qLt(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}s(qLt,"constructYamlPairs");var WLt=new cu("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ULt,construct:qLt}),GLt=Object.prototype.hasOwnProperty;function HLt(t){if(t===null)return!0;var e,r=t;for(e in r)if(GLt.call(r,e)&&r[e]!==null)return!1;return!0}s(HLt,"resolveYamlSet");function jLt(t){return t!==null?t:{}}s(jLt,"constructYamlSet");var VLt=new cu("tag:yaml.org,2002:set",{kind:"mapping",resolve:HLt,construct:jLt}),GGe=bLt.extend({implicit:[wLt,SLt],explicit:[PLt,QLt,WLt,VLt]}),Qb=Object.prototype.hasOwnProperty,l$=1,HGe=2,jGe=3,c$=4,Xfe=1,$Lt=2,TGe=3,zLt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,YLt=/[\x85\u2028\u2029]/,KLt=/[,\[\]\{\}]/,VGe=/^(?:!|!!|![a-z\-]+!)$/i,$Ge=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function wGe(t){return Object.prototype.toString.call(t)}s(wGe,"_class");function RA(t){return t===10||t===13}s(RA,"is_EOL");function BT(t){return t===9||t===32}s(BT,"is_WHITE_SPACE");function Gd(t){return t===9||t===32||t===10||t===13}s(Gd,"is_WS_OR_EOL");function VR(t){return t===44||t===91||t===93||t===123||t===125}s(VR,"is_FLOW_INDICATOR");function JLt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(JLt,"fromHexCode");function XLt(t){return t===120?2:t===117?4:t===85?8:0}s(XLt,"escapedHexLen");function ZLt(t){return 48<=t&&t<=57?t-48:-1}s(ZLt,"fromDecimalCode");function _Ge(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(_Ge,"simpleEscapeSequence");function eFt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(eFt,"charFromCodepoint");var zGe=new Array(256),YGe=new Array(256);for(kT=0;kT<256;kT++)zGe[kT]=_Ge(kT)?1:0,YGe[kT]=_Ge(kT);var kT;function tFt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||GGe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(tFt,"State$1");function KGe(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=W7t(r),new Wd(e,r)}s(KGe,"generateError");function zr(t,e){throw KGe(t,e)}s(zr,"throwError");function u$(t,e){t.onWarning&&t.onWarning.call(null,KGe(t,e))}s(u$,"throwWarning");var SGe={YAML:s(function(e,r,n){var i,o,a;e.version!==null&&zr(e,"duplication of %YAML directive"),n.length!==1&&zr(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&zr(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&zr(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&u$(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,r,n){var i,o;n.length!==2&&zr(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],VGe.test(i)||zr(e,"ill-formed tag handle (first argument) of the TAG directive"),Qb.call(e.tagMap,i)&&zr(e,'there is a previously declared suffix for "'+i+'" tag handle'),$Ge.test(o)||zr(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{zr(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Mb(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||zr(t,"expected valid JSON character");else zLt.test(l)&&zr(t,"the stream contains non-printable characters");t.result+=l}}s(Mb,"captureSegment");function RGe(t,e,r,n){var i,o,a,l;for(xl.isObject(r)||zr(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],Qb.call(e,o)||(e[o]=r[o],n[o]=!0)}s(RGe,"mergeMappings");function $R(t,e,r,n,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&zr(t,"nested arrays are not supported inside keys"),typeof i=="object"&&wGe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&wGe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)RGe(t,e,o[u],r);else RGe(t,e,o,r);else!t.json&&!Qb.call(r,i)&&Qb.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,zr(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}s($R,"storeMappingPair");function ope(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):zr(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(ope,"readLineBreak");function sl(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;BT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(RA(i))for(ope(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&u$(t,"deficient indentation"),n}s(sl,"skipSeparationSpace");function p$(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Gd(r)))}s(p$,"testDocumentSeparator");function spe(t,e){e===1?t.result+=" ":e>1&&(t.result+=xl.repeat(`
`,e-1))}s(spe,"writeFoldedLines");function rFt(t,e,r){var n,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Gd(h)||VR(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Gd(i)||r&&VR(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Gd(i)||r&&VR(i))break}else if(h===35){if(n=t.input.charCodeAt(t.position-1),Gd(n))break}else{if(t.position===t.lineStart&&p$(t)||r&&VR(h))break;if(RA(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,sl(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Mb(t,o,a,!1),spe(t,t.line-c),o=a=t.position,l=!1),BT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Mb(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(rFt,"readPlainScalar");function nFt(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Mb(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else RA(r)?(Mb(t,n,i,!0),spe(t,sl(t,!1,e)),n=i=t.position):t.position===t.lineStart&&p$(t)?zr(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);zr(t,"unexpected end of the stream within a single quoted scalar")}s(nFt,"readSingleQuotedScalar");function iFt(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Mb(t,r,t.position,!0),t.position++,!0;if(l===92){if(Mb(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),RA(l))sl(t,!1,e);else if(l<256&&zGe[l])t.result+=YGe[l],t.position++;else if((a=XLt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=JLt(l))>=0?o=(o<<4)+a:zr(t,"expected hexadecimal character");t.result+=eFt(o),t.position++}else zr(t,"unknown escape sequence");r=n=t.position}else RA(l)?(Mb(t,r,n,!0),spe(t,sl(t,!1,e)),r=n=t.position):t.position===t.lineStart&&p$(t)?zr(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}zr(t,"unexpected end of the stream within a double quoted scalar")}s(iFt,"readDoubleQuotedScalar");function oFt(t,e){var r=!0,n,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(sl(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;r?E===44&&zr(t,"expected the node content, but found ','"):zr(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),Gd(u)&&(p=m=!0,t.position++,sl(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,zR(t,e,l$,!1,!0),v=t.tag,y=t.result,sl(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===n)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),sl(t,!0,e),zR(t,e,l$,!1,!0),b=t.result),h?$R(t,l,g,v,y,b,n,i,o):p?l.push($R(t,null,g,v,y,b,n,i,o)):l.push(y),sl(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(r=!0,E=t.input.charCodeAt(++t.position)):r=!1}zr(t,"unexpected end of the stream within a flow collection")}s(oFt,"readFlowCollection");function sFt(t,e){var r,n,i=Xfe,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)n=!1;else if(p===62)n=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)Xfe===i?i=p===43?TGe:$Lt:zr(t,"repeat of a chomping mode identifier");else if((d=ZLt(p))>=0)d===0?zr(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?zr(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(BT(p)){do p=t.input.charCodeAt(++t.position);while(BT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!RA(p)&&p!==0)}for(;p!==0;){for(ope(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),RA(p)){c++;continue}if(t.lineIndent<l){i===TGe?t.result+=xl.repeat(`
`,o?1+c:c):i===Xfe&&o&&(t.result+=`
`);break}for(n?BT(p)?(u=!0,t.result+=xl.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=xl.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=xl.repeat(`
`,c):t.result+=xl.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,r=t.position;!RA(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Mb(t,r,t.position,!1)}return!0}s(sFt,"readBlockScalar");function kGe(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,zr(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Gd(a))));){if(l=!0,t.position++,sl(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,zR(t,e,jGe,!1,!0),o.push(t.result),sl(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)zr(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(kGe,"readBlockSequence");function aFt(t,e,r){var n,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,zr(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&Gd(n))E===63?(v&&($R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):zr(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=n;else{if(a=t.line,l=t.lineStart,c=t.position,!zR(t,r,HGe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);BT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Gd(E)||zr(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&($R(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)zr(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)zr(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),zR(t,e,c$,!0,i)&&(v?g=t.result:y=t.result),v||($R(t,p,m,h,g,y,a,l,c),h=g=y=null),sl(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)zr(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&$R(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(aFt,"readBlockMapping");function lFt(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&zr(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):zr(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Gd(a);)a===33&&(n?zr(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),VGe.test(i)||zr(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),KLt.test(o)&&zr(t,"tag suffix cannot contain flow indicator characters")}o&&!$Ge.test(o)&&zr(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{zr(t,"tag name is malformed: "+o)}return r?t.tag=o:Qb.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:zr(t,'undeclared tag handle "'+i+'"'),!0}s(lFt,"readTagProperty");function cFt(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&zr(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Gd(r)&&!VR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&zr(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(cFt,"readAnchorProperty");function uFt(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Gd(n)&&!VR(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&zr(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Qb.call(t.anchorMap,r)||zr(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],sl(t,!0,-1),!0}s(uFt,"readAlias");function zR(t,e,r,n,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=c$===r||jGe===r,n&&sl(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;lFt(t)||cFt(t);)sl(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||c$===r)&&(l$===r||HGe===r?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(kGe(t,v)||aFt(t,v,y))||oFt(t,y)?d=!0:(a&&sFt(t,y)||nFt(t,y)||iFt(t,y)?d=!0:uFt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&zr(t,"alias node should not have any properties")):rFt(t,y,l$===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&kGe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&zr(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Qb.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||zr(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&zr(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):zr(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(zR,"composeNode");function dFt(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(sl(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!Gd(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&zr(t,"directive name must not be less than one character in length");a!==0;){for(;BT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!RA(a));break}if(RA(a))break;for(r=t.position;a!==0&&!Gd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&ope(t),Qb.call(SGe,n)?SGe[n](t,n,i):u$(t,'unknown document directive "'+n+'"')}if(sl(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,sl(t,!0,-1)):o&&zr(t,"directives end mark is expected"),zR(t,t.lineIndent-1,c$,!1,!0),sl(t,!0,-1),t.checkLineBreaks&&YLt.test(t.input.slice(e,t.position))&&u$(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&p$(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,sl(t,!0,-1));return}if(t.position<t.length-1)zr(t,"end of the stream or a document separator is expected");else return}s(dFt,"readDocument");function JGe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new tFt(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,zr(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)dFt(r);return r.documents}s(JGe,"loadDocuments");function fFt(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=JGe(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}s(fFt,"loadAll$1");function pFt(t,e){var r=JGe(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Wd("expected a single document in the stream, but found more")}}s(pFt,"load$1");var mFt=fFt,hFt=pFt,XGe={loadAll:mFt,load:hFt},ZGe=Object.prototype.toString,eHe=Object.prototype.hasOwnProperty,ape=65279,gFt=9,d6=10,AFt=13,yFt=32,CFt=33,xFt=34,epe=35,vFt=37,bFt=38,EFt=39,IFt=42,tHe=44,TFt=45,d$=58,wFt=61,_Ft=62,SFt=63,RFt=64,rHe=91,nHe=93,kFt=96,iHe=123,BFt=124,oHe=125,uu={};uu[0]="\\0";uu[7]="\\a";uu[8]="\\b";uu[9]="\\t";uu[10]="\\n";uu[11]="\\v";uu[12]="\\f";uu[13]="\\r";uu[27]="\\e";uu[34]='\\"';uu[92]="\\\\";uu[133]="\\N";uu[160]="\\_";uu[8232]="\\L";uu[8233]="\\P";var DFt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],PFt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function NFt(t,e){var r,n,i,o,a,l,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&eHe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),r[a]=l;return r}s(NFt,"compileStyleMap");function LFt(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Wd("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+xl.repeat("0",n-e.length)+e}s(LFt,"encodeHex");var FFt=1,f6=2;function MFt(t){this.schema=t.schema||GGe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=xl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=NFt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?f6:FFt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(MFt,"State");function BGe(t,e){for(var r=xl.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}s(BGe,"indentString");function tpe(t,e){return`
`+xl.repeat(" ",t.indent*e)}s(tpe,"generateNextLine");function QFt(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}s(QFt,"testImplicitResolving");function f$(t){return t===yFt||t===gFt}s(f$,"isWhitespace");function p6(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ape||65536<=t&&t<=1114111}s(p6,"isPrintable");function DGe(t){return p6(t)&&t!==ape&&t!==AFt&&t!==d6}s(DGe,"isNsCharOrWhitespace");function PGe(t,e,r){var n=DGe(t),i=n&&!f$(t);return(r?n:n&&t!==tHe&&t!==rHe&&t!==nHe&&t!==iHe&&t!==oHe)&&t!==epe&&!(e===d$&&!i)||DGe(e)&&!f$(e)&&t===epe||e===d$&&i}s(PGe,"isPlainSafe");function OFt(t){return p6(t)&&t!==ape&&!f$(t)&&t!==TFt&&t!==SFt&&t!==d$&&t!==tHe&&t!==rHe&&t!==nHe&&t!==iHe&&t!==oHe&&t!==epe&&t!==bFt&&t!==IFt&&t!==CFt&&t!==BFt&&t!==wFt&&t!==_Ft&&t!==EFt&&t!==xFt&&t!==vFt&&t!==RFt&&t!==kFt}s(OFt,"isPlainSafeFirst");function UFt(t){return!f$(t)&&t!==d$}s(UFt,"isPlainSafeLast");function c6(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}s(c6,"codePointAt");function sHe(t){var e=/^\n* /;return e.test(t)}s(sHe,"needIndentIndicator");var aHe=1,rpe=2,lHe=3,cHe=4,jR=5;function qFt(t,e,r,n,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=n!==-1,g=-1,y=OFt(c6(t,0))&&UFt(c6(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=c6(t,c),!p6(u))return jR;y=y&&PGe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=c6(t,c),u===d6)p=!0,h&&(m=m||c-g-1>n&&t[g+1]!==" ",g=c);else if(!p6(u))return jR;y=y&&PGe(u,d,l),d=u}m=m||h&&c-g-1>n&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?aHe:o===f6?jR:rpe:r>9&&sHe(t)?jR:a?o===f6?jR:rpe:m?cHe:lHe}s(qFt,"chooseScalarStyle");function WFt(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===f6?'""':"''";if(!t.noCompatMode&&(DFt.indexOf(e)!==-1||PFt.test(e)))return t.quotingType===f6?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function c(u){return QFt(t,u)}switch(s(c,"testAmbiguity"),qFt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!n,i)){case aHe:return e;case rpe:return"'"+e.replace(/'/g,"''")+"'";case lHe:return"|"+NGe(e,t.indent)+LGe(BGe(e,o));case cHe:return">"+NGe(e,t.indent)+LGe(BGe(GFt(e,a),o));case jR:return'"'+HFt(e)+'"';default:throw new Wd("impossible error: invalid scalar style")}}()}s(WFt,"writeScalar");function NGe(t,e){var r=sHe(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}s(NGe,"blockHeader");function LGe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(LGe,"dropEndingNewline");function GFt(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,FGe(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",n+=l+(!i&&!o&&c!==""?`
`:"")+FGe(c,e),i=o}return n}s(GFt,"foldString");function FGe(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,c="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(FGe,"foldLine");function HFt(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=c6(t,i),n=uu[r],!n&&p6(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||LFt(r);return e}s(HFt,"escapeString");function jFt(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Uy(t,e,l,!1,!1)||typeof l>"u"&&Uy(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}s(jFt,"writeFlowSequence");function MGe(t,e,r,n){var i="",o=t.tag,a,l,c;for(a=0,l=r.length;a<l;a+=1)c=r[a],t.replacer&&(c=t.replacer.call(r,String(a),c)),(Uy(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Uy(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=tpe(t,e)),t.dump&&d6===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(MGe,"writeBlockSequence");function VFt(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),Uy(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Uy(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}s(VFt,"writeFlowMapping");function $Ft(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Wd("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!n||i!=="")&&(m+=tpe(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),Uy(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&d6===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=tpe(t,e)),Uy(t,e+1,d,!0,p)&&(t.dump&&d6===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s($Ft,"writeBlockMapping");function QGe(t,e,r){var n,i,o,a,l,c;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,ZGe.call(l.represent)==="[object Function]")n=l.represent(e,c);else if(eHe.call(l.represent,c))n=l.represent[c](e,c);else throw new Wd("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}s(QGe,"detectType");function Uy(t,e,r,n,i,o,a){t.tag=null,t.dump=r,QGe(t,r,!1)||QGe(t,r,!0);var l=ZGe.call(t.dump),c=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(r),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?($Ft(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(VFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?MGe(t,e-1,t.dump,i):MGe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(jFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&WFt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Wd("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Uy,"writeNode");function zFt(t,e){var r=[],n=[],i,o;for(npe(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}s(zFt,"getDuplicateReferences");function npe(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)npe(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)npe(t[n[i]],e,r)}s(npe,"inspectNode");function YFt(t,e){e=e||{};var r=new MFt(e);r.noRefs||zFt(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Uy(r,0,n,!0,!0)?r.dump+`
`:""}s(YFt,"dump$1");var KFt=YFt,JFt={dump:KFt};function lpe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(lpe,"renamed");var GBn=XGe.load,HBn=XGe.loadAll,cpe=JFt.dump;var jBn=lpe("safeLoad","load"),VBn=lpe("safeLoadAll","loadAll"),$Bn=lpe("safeDump","dump");var DT=je(Z0());var upe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Zl=class{constructor(){this.dump=new Jr(25);this.promptsDump=new Jr(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,r,n){let i=this.getDump(e);i.resolvedSkills[r]=n}getResolvedSkill(e,r){return this.getDump(e).resolvedSkills[r]}addResolution(e,r){this.getDump(e).resolutions.push(r)}getDump(e){let r=this.dump.get(e);return r||(r=new upe,this.dump.set(e,r)),r}addPrompt(e,r,n){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(n,r)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function uHe(t){let e=t.copy();return e.turns=e.turns.filter(r=>r.status!=="in-progress"&&(r.response===void 0||r.response?.type==="model")),e}s(uHe,"filterConversationTurns");function zfe(t){return uHe(t).getLastTurn()?.id}s(zfe,"getLastTurnId");async function yGe(t){let e=uHe(t.conversation),r=zfe(t.conversation);if(!r)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Zl).getDump(r),o=eMt(i,e.turns);Mr.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await tMt(i,t.ctx);return DT.default`
        ${ZFt(t.conversation,r)}
        ${XFt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(yGe,"getConversationDump");function XFt(t){let e=t.get(fn);return DT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(XFt,"getEditorInfoDumpMessage");function ZFt(t,e){return DT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(ZFt,"getInfoDumpMessage");async function CGe(t,e,r){let n=t.ctx.get(Cl),i="# Available skills",o=n.getDescriptors().filter(a=>t.ctx.get(Hi).getSupportedSkills(t.conversation.id).includes(a.id));if(r&&(o=o.filter(a=>a.id===r)),o.length===0)return`No skill with id ${r} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Vr(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Vr(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=DT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=n.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=DT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${cpe(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=DT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(CGe,"getSkillsDump");function eMt(t,e){let r={state:{skills:t.resolvedSkills},turns:e.map((n,i)=>{let o={request:Vr(n.request.message)};return n.response&&(o.response=Vr(n.response.message)),o})};return cpe(r)}s(eMt,"toSimulationFormat");async function tMt(t,e){let r=t.resolutions.map(o=>o.files).flat(),n=r.filter((o,a)=>o&&r.indexOf(o)===a),i;for(let o of n)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(bn).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();Mr.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(tMt,"fileDump");f();function dpe(t,e){let r=Do(e.tokenizer),n=0;for(let i of t)n+=e.baseTokensPerMessage,i.role&&(n+=r.tokenize(i.role).length),i.name&&(n+=r.tokenize(i.name).length+e.baseTokensPerName),i.content&&(n+=r.tokenize(Vr(i.content)).length);return n+=e.baseTokensPerCompletion,n}s(dpe,"countMessagesTokens");f();function dHe(t,e,r,n,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=n?`The user is using ${n} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=r?`The user is logged in as ${r} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(dHe,"chatBasePrompt");f();f();f();f();f();function fHe(t){let e=t.split(`
`),r=[],n=!1,i=[];for(let o of e)o.startsWith("```")?(n?(r.push([Su(i.join(`
`)),1]),i=[],r.push([new St([o]),1])):r.push([new St([o]),1]),n=!n):n?i.push(o):r.push([new St([o]),.8]);return n&&(r.push([Su(i.join(`
`)),1]),r.push([new St(["```"]),1])),new St(r)}s(fHe,"fromMessage");function YR(t){let e=fpe(t),r=[];for(let n=0;n<e.length;n++){let i=e[n],o=pHe(i.request,n+1),a=i.response&&i.response?.type!=="meta"?pHe(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&n!==e.length-1?`
`:"")),r.push(fHe(l))}return r.length>0?new St([[new St(["Consider the following conversation history:"]),1],[Lb(r,"inverseLinear"),1]]):null}s(YR,"fromHistory");var rMt=5;function fpe(t,e){return t.filter(n=>(n.status==="success"||n.status==="in-progress")&&Vr(n.request.message)!=""&&n.agent?.agentSlug===e).reverse().slice(0,rMt).reverse()}s(fpe,"filterTurns");function pHe(t,e=0){let r;switch(t.type){case"user":case"template":r="User";break;case"model":r="GitHub Copilot";break;default:r=t.type}let n=Vr(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${r}:${n}${Vr(t.message)}`}s(pHe,"formatTurnMessage");f();f();f();var nMt=4,ppe={skillIds:[]},m$=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,r,n,i,o){let a=e.conversation.getLastTurn().request.message;if(r.length>0){let l=await xo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:r,modelConfiguration:l},u=await this.ctx.get(wc).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,n,d);return m.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,n,d)),await e.ctx.get(ol).inspectFetchResult(m),this.handleResult(m,d,Vr(a),o,u.toolConfig)}else return ppe}handleResult(e,r,n,i,o){if(e.type!=="success")return this.telemetryError(r,e),ppe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,nMt);else return Ur.error(this.ctx,"Missing tool call in meta prompt response"),ppe;let c=r.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:n});return Bt(this.ctx,`${Du(i)}.metaPrompt`,c,0),Bt(this.ctx,`${Du(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,r){let n=e.extendedBy({resultType:r.type,reason:r.reason??""});Bt(this.ctx,"conversation.promptContextError",n,1)}};f();f();f();var h$=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let r=[];return ue(e,r,"org.springframework.boot","Spring Boot"),ue(e,r,"jakarta.jakartaee-api","Jakarta EE"),ue(e,r,"javax:javaee-api","Java EE"),ue(e,r,"org.apache.struts:struts2-core","Apache Struts"),ue(e,r,"org.hibernate:hibernate-core","Hibernate"),ue(e,r,"org.apache.wicket:wicket-core","Apache Wicket"),ue(e,r,"javax.faces:jsf-api","JSF"),ue(e,r,"org.grails:grails-core","Grails"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"com.google.guava","Google Guava"),ue(e,r,"org.apache.commons:commons-lang3","Apache Commons Lang"),ue(e,r,"org.apache.commons:commons-io","Apache Commons IO"),ue(e,r,"joda-time:joda-time","Joda-Time"),ue(e,r,"com.google.code.gson:gson","Google Gson"),ue(e,r,"org.apache.commons:commons-math3","Apache Commons Math"),ue(e,r,"org.apache.commons:commons-collections4","Apache Commons Collections"),ue(e,r,"org.apache.commons:commons-net","Apache Commons Net"),ue(e,r,"org.apache.poi:poi","Apache POI"),ue(e,r,"com.fasterxml.jackson.core:jackson-databind","Jackson"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"org.junit.jupiter:junit-jupiter","JUnit"),ue(e,r,"junit:junit","JUnit"),ue(e,r,"org.testng:testng","TestNG"),ue(e,r,"org.spockframework:spock-core","Spock"),ue(e,r,"io.cucumber:cucumber-java","Cucumber"),ue(e,r,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"org.mockito","Mockito"),ue(e,r,"org.assertj","AssertJ"),ue(e,r,"org.hamcrest","Hamcrest"),ue(e,r,"org.powermock","PowerMock"),ue(e,r,"org.jmock","JMock"),ue(e,r,"org.easymock","EasyMock"),ue(e,r,"org.jmockit:jmockit","JMockit"),ue(e,r,"com.github.tomakehurst:wiremock","WireMock"),ue(e,r,"org.dbunit:dbunit","DBUnit"),ue(e,r,"com.icegreen:greenmail","GreenMail"),ue(e,r,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),ue(e,r,"org.seleniumhq.selenium:selenium-java","Selenium"),ue(e,r,"io.rest-assured:rest-assured","Rest-Assured"),ue(e,r,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),ue(e,r,"org.apache.jmeter:ApacheJMeter","JMeter"),r}},g$=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"@types/node","Node.js"),ue(e,r,"react-native","React Native"),r.find(n=>n.name==="React Native")||ue(e,r,"react","React"),ue(e,r,"angular","Angular"),ue(e,r,"vue","Vue.js"),ue(e,r,"ember","Ember.js"),ue(e,r,"backbone","Backbone.js"),ue(e,r,"meteor","Meteor"),ue(e,r,"polymer","Polymer"),ue(e,r,"aurelia","Aurelia"),ue(e,r,"knockout","Knockout.js"),ue(e,r,"dojo","Dojo Toolkit"),ue(e,r,"mithril","Mithril.js"),ue(e,r,"marionette","Marionette.js"),ue(e,r,"marko","Marko.js"),ue(e,r,"svelte","Svelte"),ue(e,r,"hyperapp","Hyperapp"),ue(e,r,"inferno","Inferno.js"),ue(e,r,"preact","Preact"),ue(e,r,"riot","Riot.js"),ue(e,r,"moon","Moon.js"),ue(e,r,"stencil","Stencil.js"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"lodash","Lodash"),ue(e,r,"moment","Moment.js"),ue(e,r,"axios","Axios"),ue(e,r,"redux","Redux"),ue(e,r,"recoil","Recoil"),ue(e,r,"jquery","jQuery"),ue(e,r,"d3","D3.js"),ue(e,r,"underscore","Underscore.js"),ue(e,r,"ramda","Ramda"),ue(e,r,"immutable","Immutable.js"),ue(e,r,"rxjs","RxJS"),ue(e,r,"three","Three.js"),ue(e,r,"socket.io","Socket.IO"),ue(e,r,"express","Express.js"),ue(e,r,"next","Next.js"),ue(e,r,"puppeteer","Puppeteer"),ue(e,r,"cheerio","Cheerio"),ue(e,r,"nodemailer","Nodemailer"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"jest","Jest"),ue(e,r,"mocha","Mocha"),ue(e,r,"jasmine","Jasmine"),ue(e,r,"ava","AVA"),ue(e,r,"qunit","QUnit"),ue(e,r,"tape","Tape"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"chai","Chai"),ue(e,r,"sinon","Sinon"),ue(e,r,"enzyme","Enzyme"),ue(e,r,"protractor","Protractor"),ue(e,r,"supertest","Supertest"),ue(e,r,"nock","Nock"),ue(e,r,"cypress","Cypress"),ue(e,r,"@testing-library/react","React Testing Library"),r}},A$=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"github.com/gorilla/mux","Gorilla Mux"),ue(e,r,"github.com/go-chi/chi","Chi"),ue(e,r,"github.com/gin-gonic/gin","Gin"),ue(e,r,"github.com/labstack/echo","Echo"),ue(e,r,"github.com/revel/revel","Revel"),ue(e,r,"github.com/astaxie/beego","Beego"),ue(e,r,"github.com/go-martini/martini","Martini"),ue(e,r,"github.com/gobuffalo/buffalo","Buffalo"),ue(e,r,"github.com/goji/goji","Goji"),ue(e,r,"github.com/hoisie/web","Web.go"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"net/http","net/http"),ue(e,r,"fmt","fmt"),ue(e,r,"io","io"),ue(e,r,"time","time"),ue(e,r,"math","math"),ue(e,r,"strconv","strconv"),ue(e,r,"strings","strings"),ue(e,r,"sort","sort"),ue(e,r,"encoding/json","encoding/json"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"github.com/onsi/ginkgo","ginkgo"),ue(e,r,"github.com/onsi/gomega","gomega"),ue(e,r,"github.com/stretchr/testify","testify"),ue(e,r,"gopkg.in/check.v1","gocheck"),ue(e,r,"github.com/franela/goblin","goblin"),ue(e,r,"github.com/DATA-DOG/godog","godog"),ue(e,r,"github.com/stesla/gospec","gospec"),ue(e,r,"github.com/rjeczalik/gotest","gotest"),ue(e,r,"github.com/smartystreets/goconvey","goconvey"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"github.com/stretchr/testify","Testify"),ue(e,r,"github.com/smartystreets/goconvey","GoConvey"),ue(e,r,"github.com/onsi/ginkgo","Ginkgo"),ue(e,r,"github.com/golang/mock","GoMock"),ue(e,r,"gopkg.in/check.v1","GoCheck"),ue(e,r,"github.com/franela/goblin","Goblin"),ue(e,r,"github.com/DATA-DOG/godog","GoDog"),ue(e,r,"github.com/onsi/gomega","Gomega"),ue(e,r,"github.com/stesla/gospec","GoSpec"),ue(e,r,"github.com/rjeczalik/gotest","GoTest"),r}},y$=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flask","Flask"),ue(e,r,"django","Django"),ue(e,r,"pyramid","Pyramid"),ue(e,r,"tornado","Tornado"),ue(e,r,"fastapi","FastAPI"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"requests","requests"),ue(e,r,"numpy","numpy"),ue(e,r,"pandas","pandas"),ue(e,r,"scipy","scipy"),ue(e,r,"matplotlib","matplotlib"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"pytest","Pytest"),ue(e,r,"unittest","Unittest"),ue(e,r,"doctest","Doctest"),ue(e,r,"nose","Nose"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mock","Mock"),ue(e,r,"hypothesis","Hypothesis"),ue(e,r,"behave","Behave"),ue(e,r,"lettuce","Lettuce"),ue(e,r,"testify","Testify"),ue(e,r,"pyhamcrest","PyHamcrest"),r}},C$=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"laravel/framework","Laravel"),ue(e,r,"symfony/symfony","Symfony"),ue(e,r,"slim/slim","Slim"),ue(e,r,"cakephp/cakephp","CakePHP"),ue(e,r,"yiisoft/yii2","Yii"),ue(e,r,"zendframework/zendframework","Zend Framework"),ue(e,r,"phalcon/cphalcon","Phalcon"),ue(e,r,"bcosca/fatfree","Fat-Free"),ue(e,r,"fuel/fuel","FuelPHP"),ue(e,r,"phpixie/framework","PHPixie"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"monolog/monolog","Monolog"),ue(e,r,"vlucas/phpdotenv","PHP dotenv"),ue(e,r,"symfony/console","Symfony Console"),ue(e,r,"guzzlehttp/guzzle","GuzzleHttp"),ue(e,r,"ramsey/uuid","Ramsey UUID"),ue(e,r,"doctrine/orm","Doctrine ORM"),ue(e,r,"php-di/php-di","PHP-DI"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"symfony/finder","Symfony Finder"),ue(e,r,"symfony/yaml","Symfony Yaml"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"phpunit/phpunit","PHPUnit"),ue(e,r,"behat/behat","Behat"),ue(e,r,"phpspec/phpspec","PHPSpec"),ue(e,r,"codeception/codeception","Codeception"),ue(e,r,"atoum/atoum","Atoum"),ue(e,r,"pestphp/pest","PestPHP"),ue(e,r,"kahlan/kahlan","Kahlan"),ue(e,r,"peridot-php/peridot","Peridot"),ue(e,r,"phake/phake","Phake"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockery/mockery","Mockery"),ue(e,r,"php-mock/php-mock","PHP-Mock"),ue(e,r,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),ue(e,r,"padraic/mockery","Padraic Mockery"),ue(e,r,"phpspec/prophecy","PHPSpec Prophecy"),ue(e,r,"phpunit/php-invoker","PHPUnit Invoker"),ue(e,r,"phpunit/php-token-stream","PHPUnit Token Stream"),ue(e,r,"phpunit/php-code-coverage","PHPUnit Code Coverage"),ue(e,r,"phpunit/php-timer","PHPUnit Timer"),ue(e,r,"phpunit/php-text-template","PHPUnit Text Template"),r}},x$=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"Microsoft.NETCore.App",".NET Core"),ue(e,r,"Microsoft.AspNetCore.App","ASP.NET Core"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"EntityFramework","Entity Framework"),ue(e,r,"Newtonsoft.Json","Newtonsoft.Json"),ue(e,r,"AutoMapper","AutoMapper"),ue(e,r,"Serilog","Serilog"),ue(e,r,"Dapper","Dapper"),ue(e,r,"Polly","Polly"),ue(e,r,"FluentValidation","FluentValidation"),ue(e,r,"MediatR","MediatR"),ue(e,r,"Hangfire","Hangfire"),ue(e,r,"RabbitMQ.Client","RabbitMQ.Client"),ue(e,r,"MassTransit","MassTransit"),ue(e,r,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),ue(e,r,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),ue(e,r,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),ue(e,r,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"xunit","xUnit"),ue(e,r,"NUnit","NUnit"),ue(e,r,"SpecFlow","SpecFlow"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"Moq","Moq"),ue(e,r,"FluentAssertions","FluentAssertions"),ue(e,r,"Bogus","Bogus"),ue(e,r,"RestSharp","RestSharp"),ue(e,r,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),r}},v$=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"flutter","Flutter"),ue(e,r,"angular","AngularDart"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"dartx","dartx"),ue(e,r,"provider","Provider"),ue(e,r,"rxdart","RxDart"),ue(e,r,"dio","Dio"),ue(e,r,"json_serializable","json_serializable"),ue(e,r,"freezed","Freezed"),ue(e,r,"moor","Moor"),ue(e,r,"hive","Hive"),ue(e,r,"http","http"),ue(e,r,"path","path"),ue(e,r,"intl","intl"),ue(e,r,"equatable","equatable"),ue(e,r,"get_it","get_it"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test","test"),ue(e,r,"flutter_test","flutter_test"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockito","mockito"),ue(e,r,"bloc_test","bloc_test"),r}},b$=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"rails","Rails"),ue(e,r,"sinatra","Sinatra"),ue(e,r,"hanami","Hanami"),ue(e,r,"grape","Grape"),ue(e,r,"roda","Roda"),ue(e,r,"padrino","Padrino"),ue(e,r,"cuba","Cuba"),ue(e,r,"ramaze","Ramaze"),ue(e,r,"nyara","Nyara"),ue(e,r,"rack","Rack"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"active_record","ActiveRecord"),ue(e,r,"sequel","Sequel"),ue(e,r,"rom","ROM"),ue(e,r,"datamapper","DataMapper"),ue(e,r,"mongoid","Mongoid"),ue(e,r,"neo4j","Neo4j"),ue(e,r,"redis","Redis"),ue(e,r,"cassandra","Cassandra"),ue(e,r,"couchrest","CouchRest"),ue(e,r,"riak","Riak"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"rspec","RSpec"),ue(e,r,"minitest","Minitest"),ue(e,r,"cucumber","Cucumber"),ue(e,r,"spinach","Spinach"),ue(e,r,"turnip","Turnip"),ue(e,r,"bacon","Bacon"),ue(e,r,"shoulda","Shoulda"),ue(e,r,"test-unit","Test::Unit"),ue(e,r,"wrong","Wrong"),ue(e,r,"contest","Contest"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"factory_bot","FactoryBot"),ue(e,r,"faker","Faker"),ue(e,r,"ffaker","FFaker"),ue(e,r,"fabrication","Fabrication"),ue(e,r,"machinist","Machinist"),ue(e,r,"mocha","Mocha"),ue(e,r,"flexmock","FlexMock"),ue(e,r,"rr","RR"),ue(e,r,"bourne","Bourne"),ue(e,r,"not_a_mock","NotAMock"),r}},E$=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let r=[];return ue(e,r,"tokio","tokio"),ue(e,r,"async-std","async-std"),ue(e,r,"hyper","hyper"),ue(e,r,"actix-web","actix-web"),ue(e,r,"rocket","rocket"),r}determineCoreLibraries(e){let r=[];return ue(e,r,"serde","serde"),ue(e,r,"regex","regex"),ue(e,r,"rand","rand"),ue(e,r,"log","log"),ue(e,r,"lazy_static","lazy_static"),ue(e,r,"libc","libc"),ue(e,r,"futures","futures"),ue(e,r,"rayon","rayon"),ue(e,r,"reqwest","reqwest"),ue(e,r,"warp","warp"),r}determineTestingFrameworks(e){let r=[];return ue(e,r,"test-case","test-case"),ue(e,r,"proptest","proptest"),ue(e,r,"quickcheck","quickcheck"),r}determineTestingLibraries(e){let r=[];return ue(e,r,"mockall","mockall"),ue(e,r,"double","double"),ue(e,r,"rstest","rstest"),ue(e,r,"mockiato","mockiato"),ue(e,r,"mock_derive","mock_derive"),ue(e,r,"mocktopus","mocktopus"),ue(e,r,"mockers","mockers"),ue(e,r,"mock_it","mock_it"),r}},I$=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(r=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(r.name))}determineApplicationFrameworks(e){return e.libraries.filter(r=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(r.name))}determineCoreLibraries(e){return e.libraries.filter(r=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(r.name))}determineTestingFrameworks(e){return e.libraries.filter(r=>["unity","criterion","cmocka","check","ctest","minunit"].includes(r.name))}determineTestingLibraries(e){return e.libraries.filter(r=>["cmock","fff","trompeloeil","fakeit"].includes(r.name))}};function ue(t,e,r,n){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(r.toLowerCase())>-1);i&&e.push({name:n,version:i.version})}s(ue,"addFromLibraries");var T$=class{constructor(e,r){this.languageId=e;this.delegates=r}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(r=>r.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(r=>r.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(r=>r.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(r=>r.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(r=>r.determineTestingLibraries(e)).flat()}};function hHe(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(hHe,"determineProgrammingLanguage");var mHe=[new h$,new g$,new A$,new y$,new C$,new x$,new v$,new b$,new E$,new I$];function gHe(t){let e=mHe.find(r=>typeof r.languageId=="string"?r.languageId===t:Array.isArray(r.languageId)?r.languageId.includes(t):!1)??new T$(t,mHe);return new mpe(e)}s(gHe,"getMetadataLookup");var mpe=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let r=[];return e.forEach(n=>{r.find(i=>i.name===n.name)||r.push(n)}),r}};var AHe=I.Object({name:I.String(),version:I.Optional(I.String())}),yHe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(AHe),buildTools:I.Array(AHe)}),hpe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let r=[];r.push([new St([`The user is working on a project with the following characteristics:
`]),1]);let n=gHe(e.language.id);return this.addProgrammingLanguage(e,r),this.addBuildTools(e,r,n),this.addApplicationFramework(e,r,n),this.addCoreLibraries(e,r,n),this.addTestingFrameworks(e,r,n),this.addTestingLibraries(e,r,n),new St(r)}addProgrammingLanguage(e,r){let n=hHe(e);this.turnContext.collectLabel(kA,n),r.push([new St([`- programming language: ${n}`]),1])}addBuildTools(e,r,n){this.addToPrompt(r,"- build tools:",n.determineBuildTools(e))}addApplicationFramework(e,r,n){this.addToPrompt(r,"- application frameworks:",n.determineApplicationFrameworks(e))}addCoreLibraries(e,r,n){this.addToPrompt(r,"- core libraries:",n.determineCoreLibraries(e))}addTestingFrameworks(e,r,n){this.addToPrompt(r,"- testing frameworks:",n.determineTestingFrameworks(e))}addTestingLibraries(e,r,n){this.addToPrompt(r,"- testing libraries:",n.determineTestingLibraries(e))}addToPrompt(e,r,n){if(n.length>0){n.forEach(o=>{this.turnContext.collectLabel(kA,`${o.name}${o.version?" "+o.version:""}`)});let i=n.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new St([`${r}
${i}`]),1])}}},kA="project-metadata",w$=class{constructor(e){this._resolver=e;this.id=kA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new hpe(e)}};f();var CHe=je(require("path"));var gpe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.turnContext.ctx.get(bn),n=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,r)).filter(a=>a!==void 0).flat();if(o.length>0)return n.push([new St(["The user wants you to consider the following referenced files when computing your answer."]),1]),n.push(...o),new St(n)}filterIncludedFiles(e){return e.filter(r=>r.type==="file"&&!this.turnContext.isFileIncluded(r.uri))}async toFileChunks(e,r){return await Promise.all(e.map(async n=>{if(n.type==="file"&&n.uri)return await this.elideReferencedFiles(r,n)}))}async elideReferencedFiles(e,r){let n=await e.getOrReadTextDocument(r),i=ys(n);if(await this.turnContext.collectFile(S$,r.uri,i),n.status==="valid"){let o=e.getRelativePath(n.document);if(i==="included"){let a=new IA(n.document,r.selection,r.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new St([`The referenced file \`${o}\` is empty.`]),1]]}else if(n.status==="invalid")return[[new St([`The referenced file \`${CHe.basename(r.uri)}\` is content excluded.`]),1]]}},Ape=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},S$="references",_$=class{constructor(){this.id=S$;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new Ape}processor(e){return new gpe(e)}};var PT=s(()=>[kA,ch,S$,lu],"mandatorySkills"),R$=class{constructor(e,r){this.chatFetcher=r;this.metaPromptFetcher=new m$(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,r,n,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!PT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),r,n,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!PT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!PT().includes(u)))}return l.push(...PT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(Hi).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,r,n){let i=await this.getNonSelectableSkills(e),o=e.get(Hi).getSupportedSkills(r.id),a=e.get(Cl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,n)&&l.push(c)}return l}async getNonSelectableSkills(e){let r=await SA(e),n=(await Promise.all(r.map(i=>i.additionalSkills(e)))).flat();return[...PT(),...n]}isIgnoredSkill(e,r){return r.ignoredSkills?.some(n=>n.skillId===e)}};f();f();var k$=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(r=>r.roundId===e)}async start(e,r,n,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===r))Ur.error(this.ctx,`Tool call ${r} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:r,name:n,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,r){await this.update(e,r,n=>{n.status="completed"})}async result(e,r,n){await this.update(e,r,i=>{i.status="completed",i.result=n.data})}async cancel(e,r){await this.update(e,r,n=>{n.status="cancelled"})}async finishAll(e="completed"){let r=this.rounds.filter(n=>{let i=n.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return n.toolCalls=i,!0});r.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:r})}async error(e,r,n){await this.update(e,r,i=>{i.status="error",i.error=n||"Unknown error"})}async update(e,r,n){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===r);o?(n(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Ur.error(this.ctx,`Tool call ${r} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var B$=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,r,n){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:r,description:n,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,r=>{r.status="completed"})}async cancel(e){await this.updateStep(e,r=>{r.status="cancelled"})}async finishAll(e="completed"){let r=this.steps.filter(n=>n.status==="running").map(n=>(n.status=e,n));r.length>0&&await this.progress.report(this.conversation,this.turn,{steps:r})}async error(e,r){return this.updateStep(e,n=>{n.status="failed",n.error={message:r||"Unknown error"}})}async updateStep(e,r){let n=this.steps.find(i=>i.id===e);n?(r(n),await this.progress.report(this.conversation,this.turn,{steps:[n]})):Ur.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var iMt="X-Initiator",oMt="X-Interaction-ID",sMt="X-Interaction-Type";var D$=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},ype=class extends D${static{s(this,"User")}static id(){return"user"}},Cpe=class extends D${static{s(this,"Agent")}static id(){return"agent"}},xpe=class{static{s(this,"GenericLlmInteraction")}constructor(e,r,n){this.initiator=e.id(),this.interactionType=r,this.interactionId=n}toCapiHeaders(){return{[iMt]:this.initiator,[oMt]:this.interactionId,[sMt]:this.interactionType.toString()}}},Hd=class t extends xpe{static{s(this,"LlmInteraction")}static user(e,r){return new t(ype,e,r)}static agent(e,r){return new t(Cpe,e,r)}};var Ob=class{constructor(e,r,n,i){this.ctx=e;this.conversation=r;this.turn=n;this.cancelationToken=i;this.skillResolver=new vpe(this),this.steps=new B$(e,r,n,e.get(ws)),this.collector=new bpe(r,n,e.get(ws)),this.agentToolCalls=new k$(e,r,n,e.get(ws))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Hd.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Hd.agent("conversation-panel",this.turn.telemetryId):Hd.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,r,n,i){let o={type:"file",collector:e,uri:r,status:n};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,r){this.collector.collect({type:"label",collector:e,label:r})}isFileIncluded(e){return this.collector.collectibles.some(r=>r.type==="file"&&r.status==="included"&&r.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,r){await this.ctx.get(ws).report(this.conversation,this.turn,{notifications:[{severity:r,message:e}]})}},P$=class extends Error{constructor(r,n){super(`Cycle detected while resolving skills: ${n.join(" -> ")} -> ${r}`);this.skillId=r;this.skillStack=n}static{s(this,"CycleError")}},m6=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},vpe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(Hi).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let n=this.turnContext.ctx.get(Zl).getResolvedSkill(this.turnContext.turn.id,e);if(n)return this.resolveStack.pop(),n;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new P$(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let n=this.turnContext.ctx.get(Cl).getSkill(e);try{let i=await n?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Zl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof P$||i instanceof m6)throw i;Ur.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},bpe=class{constructor(e,r,n){this.conversation=e;this.turn=r;this.conversationProgress=n;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(r=>r.collector===e)}};async function xHe(t,e){let[r,n,i]=await aMt(t,e);return i.push(...uMt(t)),r.length>0||n.length>0?[new St([[new St(["Consider the additional context:"]),1],[Lb(r,"inverseLinear"),.9],...n]),i]:[null,i]}s(xHe,"fromSkills");async function aMt(t,e){let r=[],n=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await dMt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await lMt(t,a.skillId);l&&(PT().indexOf(a.skillId)===-1?n.push(l):i.push(l)),r.push(c)}return n.reverse(),i.reverse(),r.reverse(),[n,i,r]}s(aMt,"handleSkillsInReverse");async function lMt(t,e){let n=t.ctx.get(Cl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=n?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await cMt(t,n,l,u,a,d):[void 0,await L$(t,n,"unprocessable",void 0,a,d)]}else return[void 0,await L$(t,n,"unresolvable",void 0,a)]}catch(i){if(Ur.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof m6)throw i;return[void 0,await L$(t,n,"failed")]}}s(lMt,"safelyProcessSkill");async function cMt(t,e,r,n,i,o){let a;return typeof n=="string"?a=new St([[n,1]]):a=n,[[a,r?.value()||0],await L$(t,e,"resolved",a,i,o)]}s(cMt,"handleProcessedSkill");async function L$(t,e,r,n,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:r,files:l,resolutionTimeMs:i,processingTimeMs:o};if(n){let u=await t.ctx.get(ra).getBestChatModelConfig(Of("user")),d=n.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Do(u.tokenizer).tokenLength(d)}return t.ctx.get(Zl).addResolution(t.turn.id,c),c}s(L$,"determineResolution");function uMt(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(uMt,"handleIgnoredSkills");async function dMt(t,e,r){if(e!==kA&&e!==ch)return!0;let n=t.ctx.get(Dt),i=await n.updateExPValuesAndAssignments({languageId:r});return n.ideChatEnableProjectMetadata(i)?e===kA:e===ch}s(dMt,"includeSkill");var vHe=je(Z0());var NT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,r){let n=[],i=YR(e.conversation.turns.slice(0,-1));i!==null&&n.push([i,.6]);let[o,a]=await this.elidableSkills(e,r);return o!==null&&(i!==null&&n.push(["",.1]),n.push([o,.8])),[new St(n),a]}async elidableSkills(e,r){return await xHe(e,r)}async promptContent(e,r,n){let i;e.turn.workspaceFolder&&(i=await aA.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=W0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,n);return[[{role:"system",content:r},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},F$=class extends NT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return vHe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var bHe=je(Z0());var M$=class extends NT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return bHe.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var Epe=je(Z0());var Q$=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let r=YR(e.turns.slice(0,-1)),n=[];return r!==null&&n.push([r,.6]),new St(n)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return Epe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(r=>`${this.skillToPrompt(r)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let r=iMe(e.map(n=>n.id));return I.Object({skillIds:I.Array(r,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(r){return{skillIds:ob(r).skillIds}}}}skillToPrompt(e){let r=e.description?e.description():e.id,n=`Skill Id: ${e.id}
Skill Description: ${r}`,i=e.examples?e.examples():[];return i.length>0&&(n+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),n}promptContent(e,r,n){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:r},{role:"user",content:o},{role:"system",content:this.suffix(n)},{role:"user",content:Epe.default`
                    This is the user's question: 
                    ${Vr(i).trim()} 
                `.trim()}],[]]}};f();var EHe=je(Z0());var O$=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let r=ob(e);return{suggestedTitle:r.suggestedTitle,followUp:r.followUp}}}}suffix(e){return EHe.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let r=YR(e.turns.slice()),n=[];return r!==null&&n.push([r,.6]),new St(n)}promptContent(e,r,n){return[[{role:"system",content:r},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var fMt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],U$=class extends NT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,r,n){if(n.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=W0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:r},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:fMt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(r){let n=ob(r).keywords;if(!n||!Array.isArray(n))return{keywords:[]};let i=new Set;for(let o of n)if(!(!AU(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!AU(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var Ipe=class{constructor(e,r,n){this.promptType=e;this.strategy=n;this.modelFamilies=Array.isArray(r)?r:[r]}static{s(this,"PromptStrategyDescriptor")}};function h6(t,e,r){return new Ipe(t,e,r)}s(h6,"descriptor");var IHe=[h6("user",Of("user"),()=>new F$),h6("inline",Of("inline"),()=>new M$),h6("meta",Of("meta"),()=>new Q$),h6("suggestions",Of("suggestions"),()=>new O$),h6("synonyms",Of("synonyms"),()=>new U$)],q$=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,r,n){let i=IHe.find(o=>o.promptType===r&&o.modelFamilies.includes(n));if(!i)throw new Error(`No prompt strategy found for promptType: ${r} and modelFamily: ${n}`);return i.strategy(e)}get descriptors(){return IHe}};var wHe=require("console");var wc=class{constructor(e,r=new q$){this.ctx=e;this.promptStrategyFactory=r}static{s(this,"ConversationPromptEngine")}async toPrompt(e,r){let n=await this.promptStrategyFactory.createPromptStrategy(this.ctx,r.promptType,r.modelConfiguration.modelFamily),[i,o]=await n.promptContent(e,await this.safetyPrompt(r.userSelectedModelName??r.modelConfiguration.uiName),r),[a,l]=this.elideChatMessages(i,r.modelConfiguration);return await this.ctx.get(ol).inspectPrompt({type:r.promptType,prompt:THe(a),tokens:l}),this.ctx.get(Zl).addPrompt(e.turn.id,THe(a),r.promptType),{messages:a,tokens:l,skillResolutions:o,toolConfig:n.toolConfig?.(r)}}elideChatMessages(e,r){let n=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,wHe.assert)(n.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,r),o=r.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:pMt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,dpe(a,r)]}computeNonElidableTokens(e,r){let n=e.filter(i=>typeof i.content=="string");return n.push({role:"user",content:""}),dpe(n,r)}async safetyPrompt(e){let r=await this.ctx.get(mn).getSession(this.ctx),n=this.ctx.get(fn).getEditorInfo().readableName??this.ctx.get(fn).getEditorInfo().name,i=mMt(process.platform);return dHe(this.ctx,n,r?.login,i,e)}};function pMt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(pMt,"processResultOfElidableText");function THe(t){return t.map(e=>Vr(e.content)).join(`

`)}s(THe,"debugChatMessages");function mMt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(mMt,"mapPlatformToOs");var W$=class{constructor(e,r){this.ctx=e;this.chatFetcher=r}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,r,n,i){let o=await xo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(wc).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:n,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,r,c);if(d.type!=="success"&&(Ur.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,r,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Ur.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){Ur.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Ur.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Ur.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Ur.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var KR=class{constructor(e,r,n){this.turnContext=e;this.chatFetcher=r;this.computeSuggestions=n}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,r,n,i,o,a,l,c){switch(m4e(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(ha).workspaceCount})),await this.turnContext.ctx.get(ol).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(n,e.numTokens,e.requestId,r,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Vr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:lb.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",n&&n.length>0?this.turnContext.turn.response={message:n,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,r,n,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},h4e(this.turnContext.ctx,this.turnContext.conversation,o,e,r,n,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Vr(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,r,n,i){let a=await new W$(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,r,n);if(a===void 0)return;let l=this.enrichFollowup(a,r,n,i);return Ur.debug(this.turnContext.ctx,"Computed followup",l),Ur.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,r,n,i){let o=n.extendedBy({messageSource:"chat.suggestions",suggestionId:sr(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return x4e(this.turnContext.ctx,r,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,r,n){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",g4e(this.turnContext.ctx,this.turnContext.conversation,r,i,e.properties.messageId,n,e),{error:{message:i,responseIsFiltered:!0}}}};f();var G$=I.Union([I.String(),I.Number()]),LT=I.Union([I.String(),I.Number()]),hMt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),H$=I.Object({uri:I.String(),position:I.Optional(Nl)}),g6=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(wa),selection:I.Optional(wa),status:I.Optional(hMt),range:I.Optional(wa)}),gMt=I.Object({type:I.Literal("directory"),uri:I.String()}),JR=I.Union([g6,gMt,SWe]),Sp=I.Union([I.Literal("panel"),I.Literal("inline")]),AMt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),Tpe=I.Union([I.String(),I.Array(AMt)]),_He=I.Object({request:Tpe,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(LT)});function j$(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(j$,"convertToMessageContent");function V$(t,e){if(t=W0(t),typeof t=="string")return t+e;let r=t.map(n=>n.type==="text").lastIndexOf(!0);if(r>=0){let n=[...t],i=n[r];return n[r]={type:"text",text:i.text+e},n}return[...t,{type:"text",text:e}]}s(V$,"appendToMessage");var $$=I.Union([I.Literal("Ask"),I.Literal("Agent")]),yMt=I.Object({type:I.String(),description:I.String()}),SHe=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),yMt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),z$=I.Object({uri:I.String(),name:I.String()});var wpe="generate-response",Y$=class extends Error{constructor(r,n,i,o){super(r);this.authorizationUri=n;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},A6=class{constructor(e,r,n){this.agent=e;this.turnContext=r;this.chatFetcher=n;this.conversationProgress=r.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(r.ctx),this.postProcessor=new KR(r,this.chatFetcher,!1),this.conversation=r.conversation,this.turn=r.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,r,n,i){try{await this.processWithAgent(e,r,this.turnContext,i)}catch(o){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof Y$?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,r,n,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await gc(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(n);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await n.ctx.get(ol).inspectPrompt(l),await n.steps.start(wpe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(n,a.messages,r,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,n),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let r=this.createMessagesFromHistory(e),n=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,r):r.push({role:"user",content:W0(e.turn.request.message),copilot_references:n.length>0?n:void 0}),{messages:r,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let r=this.turn.agent?.agentSlug;if(r){for(let n of e.conversation.turns)if(n.agent?.agentSlug===r&&n.agent.sessionId)return n.agent.sessionId}return sr()}addConfirmationResponse(e,r){r.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return fpe(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(r=>{let n=[];if(r.request&&n.push({role:"user",content:W0(r.request.message)}),r.response&&r.response.type==="model"){let i=_We(r.response.references);n.push({role:"assistant",content:W0(r.response.message),copilot_references:i.length>0?i:void 0})}return n})}async computeCopilotReferences(e){return await FWe(e)}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,r,n,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new Bb((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=V$(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(Qr).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:r,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Vr(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,n,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,n,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Vr(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new Y$("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,r,n,i){return cD(this.conversation,"conversationPanel",Vr(this.turn.request.message).length,e.tokens,n?.templateId,void 0,r,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(wpe,e.error.message):await r.steps.finish(wpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var y6=class{constructor(e,r,n,i,o,a){this.id=e;this.slug=r;this.name=n;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new A6(this,e)}},K$=class extends y6{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new A6(this,e)}};f();var CMt="github",dh=class{static{s(this,"RemoteAgentRegistry")}},J$=class extends dh{constructor(r){super();this.ctx=r;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let r=await wI(this.ctx,"/agents");return r.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await r.text())):(Mr.error(this.ctx,"Failed to fetch agents from CAPI",{status:r.status,statusText:r.statusText}),[])}parseAgents(r){let n;try{n=JSON.parse(r).agents,Array.isArray(n)||Mr.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return r.includes("access denied")||Mr.warn(this.ctx,"Invalid remote agent response:",r,i),[]}return n.filter(i=>i.slug!==CMt).map(i=>new y6(i.id,i.slug,i.name,i.description,i.avatar_url))}};var _pe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[HR]}};async function SA(t){let e=[];return e.push(new K$),e.push(...await t.get(dh).agents()),e.push(new _pe),e}s(SA,"getAgents");f();var RHe=je(Sa());async function X$(t){let e=await t.get(mn).checkAndUpdateStatus(t);if(e.status!=="OK")throw new RHe.ResponseError($r.NoCopilotToken,`Not authenticated: ${e.status}`)}s(X$,"verifyAuthenticated");function wo(t){return async(e,r,n)=>(await X$(e),t(e,r,n))}s(wo,"ensureAuthenticated");var xMt=I.Object({});async function vMt(t,e,r){return[(await SA(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(vMt,"handleConversationAgentsChecked");var kHe=wo(st(xMt,vMt));f();f();var C6=je(Sa());function bMt(t,e,r){let n=an.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(r),actualDocumentVersion:String(e.version)});return Bt(t,"getCompletions.docVersionMismatch",n)}s(bMt,"telemetryVersionMismatch");async function fh(t,e,r){let i=t.get(Rr).getTextDocumentUnsafe(e);if(!i)throw new C6.ResponseError($r.InvalidParams,`Document for URI could not be found: ${e.uri}`);await X$(t);let o=await s2(t,e,i.getText());if(o.status==="invalid")throw t.get(Ki).setInactive(o.reason),new C6.ResponseError($r.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw r?.isCancellationRequested||(bMt(t,i,e.version),_c.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new C6.ResponseError($r.ContentModified,"Document Version Mismatch");return i}s(fh,"getTextDocument");async function BA(t,e,r){let n=e.textDocument??e.doc;if(!n){await X$(t);return}try{return await fh(t,n,r)}catch(i){if(i instanceof C6.ResponseError&&i.code===$r.CopilotNotAvailable)return;throw i}}s(BA,"getTextDocumentIfAvailable");var EMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),IMt=I.Object({turnId:LT,codeBlockIndex:I.Number(),source:EMt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(H$),textDocument:I.Optional(hd),position:I.Optional(Nl),conversationSource:I.Optional(Sp)});async function TMt(t,e,r){let n=await BA(t,r,e),i={totalCharacters:r.totalCharacters,copiedCharacters:r.copiedCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,currentLine:o.line});let a=fv(r.conversationSource),l=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return S0(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a},i,`${Du(a)}.acceptedCopy`,l),["OK",null]}s(TMt,"handleConversationCodeCopyChecked");var BHe=st(IMt,TMt);f();var wMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),_Mt=I.Object({turnId:LT,source:wMt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(H$),textDocument:I.Optional(hd),position:I.Optional(Nl),conversationSource:I.Optional(Sp)});async function SMt(t,e,r){let n=await BA(t,r,e),i={totalCharacters:r.totalCharacters,acceptedLength:r.acceptedLength??r.totalCharacters},o=r.position??r.doc?.position;n&&o&&(i={...i,insertionOffset:n.offsetAt(o),currentLine:o.line});let a=fv(r.conversationSource),l=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return S0(t,n,{codeBlockIndex:r.codeBlockIndex.toString(),source:r.source,uiKind:a,compType:r.acceptedLength&&r.acceptedLength<r.totalCharacters?"partial":"full"},i,`${Du(a)}.acceptedInsert`,l),["OK",null]}s(SMt,"handleConversationCodeInsertChecked");var DHe=st(_Mt,SMt);f();f();var Z$=I.Array(wa);function ez(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(ez,"resolveAsActiveEditor");f();var PHe=je(Sa());var tz=new PHe.ProgressType,Spe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,r,n){await e.get(yr).connection.sendProgress(tz,this.progressToken,{kind:"begin",title:`Conversation ${r.id} Turn ${n.id}`,conversationId:r.id,turnId:n.id,agentSlug:n.agent?.agentSlug})}async report(e,r,n,i){await e.get(yr).connection.sendProgress(tz,this.progressToken,{kind:"report",conversationId:r.id,turnId:n.id,...i})}async end(e,r,n,i){await e.get(yr).connection.sendProgress(tz,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,...i})}async cancel(e,r,n,i){await e.get(yr).connection.sendProgress(tz,this.progressToken,{kind:"end",conversationId:r.id,turnId:n.id,cancellationReason:"CancelledByUser",error:i})}};function XR(t){return new Spe(t.workDoneToken)}s(XR,"createProgressHandler");f();f();f();var $u=class extends Error{constructor(r){super(r.message);this.conversationError=r;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var qy=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var ZR=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var NHe="```",x6=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,RMt=String.raw`${NHe}[\w]*?\n(?<codeblock>[\s\S]*?)\n${NHe}`,kMt=new RegExp(x6+`
`+RMt,"gs"),Rpe=["replace","delete"];function kpe(t,e){let r=t.matchAll(kMt),n=Array.from(r),i=[];for(let o of n){let a=o.groups;if(!a||!Rpe.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=Bpe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(kpe,"extractEditsFromTaggedCodeblocks");function Bpe(t,e){if(t.length===0)return;t.sort((n,i)=>n.start!==i.start?i.start-n.start:i.end-n.end);let r=e.getText().split(`
`);for(let n of t){let i=n.start,o=n.end,a=n.mode,l=n.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=r.length||o>=r.length)){if(a==="delete")r.splice(i,o-i+1);else if(a==="replace"){let c=r[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),r.splice(i,o-i+1,...l)}}}return r.join(`
`)}s(Bpe,"applyEditsToDocument");f();f();f();f();var Wy=class{constructor(e,r,n=[]){this.textDocumentResult=e;this.range=r;this.descriptions=n;this.descriptions=n}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,r=new G0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),n=["<attachment>"];return n.push(...this.descriptions),n.push(...r.renderAsArray()),n.push("</attachment>"),n}};var BMt=new _t("activeEditorPrompt");async function LHe(t,e){let r=[],n=t.turnContext.turn.request.activeEditor;if(n){if(e.isCancellationRequested)throw new Fa;let i=await t.textDocumentProvider.getByUri(n.uri);if(i.status==="valid")if(n.selection&&DMt(n.selection)){let o=new Wy(i,n.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ti(n.uri)}, lines ${n.selection.start.line+1} to ${n.selection.end.line+1}:`]);r.push(...o.render());let a=new Wy(i,void 0,["User's active file for additional context:"]);r.push(...a.render())}else if(n.visibleRange){let o=new Wy(i,n.visibleRange,["User's current visible code:",`Excerpt from ${Ti(n.uri)}, lines ${n.visibleRange.start.line+1} to ${n.visibleRange.end.line+1}:`]);r.push(...o.render())}else{let o=new Wy(i,void 0,["User's active file for additional context:"]);r.push(...o.render())}else BMt.warn(t.context,`Failed to read file in active editor ${n.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return r}s(LHe,"processActiveEditor");function DMt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(DMt,"notEmptySelection");f();f();function FHe(t){return t.reduce((r,n)=>r+n.value.length,0)+Math.max(0,t.length-1)}s(FHe,"partsLength");async function QHe(t,e=1/0,r){let n=MHe(0,t,e),i=e-FHe(n);for(;;){let o=!1,a=[];for(let l of n)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(r?.isCancellationRequested)return PMt();let u=MHe(l.level+1,c,i-1);u.length&&(o=!0,i-=FHe(u)+1,a.push(...u))}if(n=a,!o)break}return{files:n.map(o=>o.uri).filter(o=>o!==void 0),tree:n.map(o=>o.value).join(`
`)}}s(QHe,"visualFileTree");function MHe(t,e,r){let n="	".repeat(t),i=[],o=r;for(let a=0;a<e.length;++a){let l=e[a],c=n+l.name+(l.type===2?"/":"");if(c.length>o){let u=n+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(MHe,"toParts");var PMt=s(()=>({tree:"",files:[]}),"emptyTree");var NMt=new _t("fileReferencesPrompt");async function OHe(t,e,r,n){let i=await UHe(t,e,r,n);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=tR(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(OHe,"generateWorkspaceStructurePrompt");async function UHe(t,e,r,n){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await QHe(await qHe(t,i.uri,r,n),r.maxLength/e.length,n);return{label:o,uri:a,tree:l}})):[]}s(UHe,"generateWorkspaceStructure");async function qHe(t,e,r,n){if(n.isCancellationRequested)return[];let i;try{i=await t.get(lo).readDirectory(e)}catch{return[]}return n.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=bo(e,o);return r.excludeDotFiles&&o.startsWith(".")||MMt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>qHe(t,l,r,n),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(qHe,"buildFileList");var LMt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],FMt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function MMt(t){return!!(FMt.includes(Ti(t).toLowerCase())||Go(t)?.toLowerCase()?.split(/[/\\]/g)?.some(r=>LMt.includes(r)))}s(MMt,"shouldAlwaysIgnoreFile");async function rz(t,e,r){if(r.length===0)return[];try{let n=r.map(a=>({uri:a.uri,name:Ti(a.uri)})),i=await UHe(t,n,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${aa(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(n){return NMt.warn(t,`Failed to generate directory structure: ${String(n)}`),[]}}s(rz,"processDirectoryReferences");var QMt=new _t("fileReferencesPrompt");async function WHe(t,e){let r=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],n=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=r.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&n.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Fa;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new Wy(h,void 0,[]);g&&m.push(...g.render())}else QMt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),LHe(t,e),rz(t.context,e,n)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(WHe,"processFileReferences");var GHe=new _t("editAgentPrompt"),nz=class{constructor(e,r){this._toolsService=e;this.props=r;this.ctx=r.turnContext.ctx,this.turnContext=r.turnContext,this.currentTurn=r.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let r=this.turnContext.conversation.turns.slice(0,-1),n=this.createChatMessagesFromHistory(r),i=pue(this.currentTurn.response?.message,!0),o=await aA.appendToUserMessage(this.ctx,this.props.workspaceFolders,Vr(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...n,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return YP(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let r=[];for(let n of e)if(n.request&&r.push({role:"user",content:W0(n.request.message)}),n.response){let i=pue(n.response.message,!0);i.forEach(o=>r.push(this.fixToolCallsInResponse(o,i)))}return r}fixToolCallsInResponse(e,r){if(e.tool_calls&&e.tool_calls.length){let n=e.tool_calls,i=[];for(let o of n)r.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):GHe.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,r){let n={role:"assistant",content:e,tool_calls:r.length?r:void 0};this.currentTurn.response?this.currentTurn.response.message=KP(this.currentTurn.response.message,n):this.currentTurn.response={message:[n],type:"model"}}addToolCallResult(e,r){let n="";switch(e.status){case"error":n="Tool call failed with error: ";break;case"cancelled":n="Tool call is cancelled with result: ";break;default:case"success":n=""}let i=n+G9(e.content),o={role:"tool",content:i,tool_call_id:r};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(gH(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===r)){GHe.info(this.ctx,`Tool call result for ${r} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=KP(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,r=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${n?"or replace_string_in_file":""} tool instead.`),r&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),r&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),n?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${n?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${n?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${r?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${Al}`),o.push("changed code"),o.push(`// ${Al}`),o.push("changed code"),o.push(`// ${Al}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${Al}`),o.push("	age: number;"),o.push(`	// ${Al}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,r){let n=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await WHe({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},r);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(r)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${Al}\` to represent regions of unchanged code.`),n&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(r=>` - ${Go(r.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await OHe(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};f();function v6(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(v6,"toString");var HHe=15,ek=new _t("toolCallingLoop"),iz=class t{constructor(e,r,n,i){this.turnContext=e;this.chatFetcher=r;this.modelConfiguration=n;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ws),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(su),this.prompt=new nz(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new Ay(this.turnContext.ctx)}),this.requestId=sr(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let r=0,n;for(;;){r++,this.abortIfCanceled(e),this.validateIteration(r,n);let i=performance.now(),o=await this.runOne(r,e);if(b4e(this.turnContext.ctx,this.turnContext,r,performance.now()-i,this.baseTelemetryWithExp),n={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,r){this.abortIfCanceled(r);let n=await this.prompt.render(r),i="",o=new Bb((u,d,p,m)=>{let h=u.trim().match(x6)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(r);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(r);let l={messages:n,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};ek.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,r,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,r)}async processChatFetchResult(e,r,n,i,o){switch(this.abortIfCanceled(o),ek.debug(this.turnContext.ctx,`Processing fetch type: ${r.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(r,null,2)}`),r.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(n,[]),{response:r,round:{response:r.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new $u({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Fa;case"failed":throw this.turn.status="error",new $u({message:lb.translateErrorMessage(r.code,r.reason),code:r.code});case"filtered":throw this.turn.status="filtered",new $u({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new $u({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new $u({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new $u({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new $u({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new $u({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new $u({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(r,n,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new $u({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,r,n,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(r,a);for(let l of a)await this.handleSingleToolCall(l,n,i,o);return{response:e,round:{response:r,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,r,n,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(r,e.function.name);if(o){let a=performance.now(),l="success";try{let c=ob(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,n,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(n,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:n,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=sUe(p);await this.turnContext.agentToolCalls.result(n,e.id,m)}else if(p.status==="error"){let m=lV(p);await this.turnContext.agentToolCalls.error(n,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(n,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof qy||c instanceof Fa)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Gi([new Ci("")],"cancelled"),e.id),new qy(c.message);{ek.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${v6(c)}`,c),l="error";let u=new Gi([new Ci(v6(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=lV(u);await this.turnContext.agentToolCalls.error(n,e.id,d.message)}}finally{let c=performance.now()-a;E4e(this.turnContext.ctx,this.turnContext,o,e.id,n,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;ek.error(this.turnContext.ctx,a);let l=new Gi([new Ci(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=lV(l);await this.turnContext.agentToolCalls.error(n,e.id,c.message)}}getAvailableChatTools(e){return e.map(r=>({type:"function",function:{name:r.nameForModel,description:r.description,parameters:r.inputSchema}}))}findToolByName(e,r){return e.find(n=>n.nameForModel===r)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Fa}async requestToolInvocationApproval(e,r,n,i,o,a,l,c){if(e.confirmationMessages&&r){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,n,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new qy("Cancelled by user");case"accept":return Promise.resolve();default:throw new qy(`Invalid confirmation result ${u.result}`)}}else ek.debug(this.turnContext.ctx,`Tool call confirmation not required for ${n} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${r}'`)}validateIteration(e,r){if(r&&e>HHe)throw ek.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${HHe} for turn ${this.turn.id}`),new ZR}};var oz=new _t("agenticTurnProcessor"),sz=class{constructor(e,r){this.turnContext=e;this.chatFetcher=r;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModelAndToolCall(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:ife.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,r,n,i,o,a){if(r.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await gc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});r.onCancellationRequested(async()=>{oz.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await xo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new iz(this.turnContext,this.chatFetcher,c,l).run(r),await this.endProgress({})}catch(c){if(c instanceof qy)oz.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof Fa)oz.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof ZR)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:ife.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof $u)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw oz.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=KP(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var Dpe="collect-context",Ppe="generate-response",az=class{constructor(e,r,n){this.turnContext=e;this.strategy=r;this.chatFetcher=n;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.postProcessor=new KR(e,this.chatFetcher,r.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,r,n,i,o){try{await this.processWithModel(e,r,this.turnContext,n,i,o)}catch(a){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,r,n,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await gc(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=l6().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,r);return}let u=(await SA(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await n.steps.start(Dpe,"Collecting context"),await this.collectContext(n,r,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(ra).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(n,o?.detectedLanguageId??"",void 0,d);if(!p)await n.steps.error(Dpe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await n.steps.finish(Dpe),await n.steps.start(Ppe,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(r.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,r,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,n),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let r=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(r&&r.type==="authorizationRequired")return{unauthorized:{...r,agentName:e.name,agentSlug:e.slug}}}catch(r){Ur.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,r);let n=r instanceof Error?r.message:String(r);return this.turn.status="error",this.turn.response={message:n,type:"meta"},{error:{message:n,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,r){this.turn.response={type:"meta",message:e},this.turn.status=r,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,r,n){if(!e.response)return;let i=await e.response(this.turnContext,r,n);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,r,n,i,o,a){let c=await new R$(this.turnContext.ctx,this.chatFetcher).collectContext(e,r,n,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,r,n,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new Bb((h,g,y,v)=>{let b=h.trim().match(x6)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=V$(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await xo.getModelConfiguration(this.turnContext.ctx,"user",a);e=xo.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Vr(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,r,n,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,r,u.appliedText,n,i,Vr(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,r,n,i,o){let a;return i?(this.turn.request.type="follow-up",A4e(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Vr(this.turn.request.message),e.tokens,i.type,i.id,o,r),a=cD(this.conversation,this.strategy.uiKind,Vr(this.turn.request.message).length,e.tokens,i.type,i.id,r,e.skillResolutions)):a=cD(this.conversation,this.strategy.uiKind,Vr(this.turn.request.message).length,e.tokens,n?.id,void 0,r,e.skillResolutions),a}async finishGenerateResponseStep(e,r){e.error?await r.steps.error(Ppe,e.error.message):await r.steps.finish(Ppe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var lz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,r,n,i){let o="user",a=await xo.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:r,userSelectedModelName:i};return await this.ctx.get(wc).toPrompt(e,l)}extractEditsFromResponse(e,r){return[]}},cz=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,r,n){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=n?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(ra).getBestChatModelConfig(Of(a)),c={promptType:a,modelConfiguration:l,languageId:r};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(wc).toPrompt(e,c)}async processResponse(e){let r=[],n=Vr(e.response?.message??"");if(n&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(n,this.currentDocument);i&&r.push(i)}return r}async getCurrentEditorSkill(e){let r=await e.skillResolver.resolve(lu);if(r)return r}async getDocumentIfValid(e){let r=await this.ctx.get(bn).getOrReadTextDocument({uri:e});if(r.status==="valid")return r.document}async processInlineResponse(e,r){let i=kpe(e,r).filter(a=>Rpe.includes(a.mode)),o=Bpe(i,r);if(o)return await this.ctx.get(ol).documentDiff({original:r.getText(),updated:o}),{uri:r.uri,text:o}}extractEditsFromResponse(e,r){return kpe(e,r)}};f();f();var jHe=je(Sa()),VHe=je(wm());var zu=class{constructor(e,r,n){this.ctx=e;this.skillId=r;this.requestType=new jHe.ProtocolRequestType("conversation/context");this.typeCheck=ms.Compile(n)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let r=this.ctx.get(yr).connection,n={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await r.sendRequest(this.requestType,n),[a,l]=o;if(l){let c=new VHe.ResponseError(l.code,l.message,l.data);Ur.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){Ur.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Ic(this.typeCheck.Errors(i));return i}}};var Npe=class{constructor(e,r,n="",i="",o=[],a=[]){this.progressToken=e;this.chunks=r;this.followUp=n;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},Gy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,r,n="",i="",o=[],a=[]){let l=new Npe(e,r,n,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(r=>r.progressToken===e)}},uz=class{constructor(e,r){this.turnContext=e;this.syntheticTurn=r;this.conversationProgress=e.ctx.get(ws)}static{s(this,"SyntheticTurnProcessor")}async process(e,r){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,r)}catch(n){Ur.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,n);let i=n.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,r,n){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,r),await this.resolveSyntheticSkill(e,n),await this.processSyntheticChunks(e,n),await this.endSyntheticProgress(e,n),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=n.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,r){let n=this.turnContext.ctx.get(Hi).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>n.skills.includes(o));for(let o of i){let l=await new zu(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!r.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,r){for(let n of e.chunks)r.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:n}),await q1(1))}async endSyntheticProgress(e,r){r.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:sr()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Hy=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,r,n){let i=e.ctx.get(Gy).get(r);if(i)return new uz(e,i);let a=(await SA(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new cz(e.ctx):l=new lz(e.ctx),e.turn.chatMode==="Agent"?new sz(e):(n!==void 0&&(l.computeSuggestions=n),new az(e,l))}};f();var $He=je(Sa());var tk=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let r=new Set;for(let n of e){if(r.has(n.uri))throw new $He.ResponseError($r.InvalidParams,`Duplicate workspace folder uri ${n.uri}`);r.add(n.uri)}}};f();function dz(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ti(t.uri)}]}s(dz,"resolveAsWorkspaceFolders");f();f();var OMt=Object.freeze(function(t,e){let r=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(r)}}}),jd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,r)=>this._isCancelled?OMt(e,r):(this.handlers.push(e.bind(r)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(r=>r.isCancellationRequested),e.forEach(r=>{r.onCancellationRequested(n=>this.cancel(n))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(r=>r(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var Yu=class{constructor(){this.tokens=new Jr(250)}static{s(this,"ProgressTokens")}add(e,r){let n=new pn.CancellationTokenSource,i=new jd([r,n.token]);return this.tokens.set(e.toString(),n),i}cancel(e){let r=this.tokens.get(e.toString());r&&(r.cancel(),this.tokens.delete(e.toString()))}};var UMt=I.Object({conversationId:I.Optional(G$),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(_He,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(hd),textDocument:I.Optional(hd),selection:I.Optional(wa),visibleRanges:I.Optional(Z$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(JR)),source:I.Optional(Sp),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(z$)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional($$),needToolCallConfirmation:I.Optional(I.Boolean())});async function qMt(t,e,r){tk.validate(r.workspaceFolders);let n=await BA(t,r,e),i=t.get(Hi).create(r);await WMt(t,i,r,n);let o=i.turns[i.turns.length-1],a=XR(r),l=t.get(Yu).add(a.progressToken,e),c=new Ob(t,i,o,l);return await(await t.get(Hy).createProcessor(c,a.progressToken,r.computeSuggestions)).process(a,l,void 0,n,r.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:r.model},null]}s(qMt,"handleConversationCreateChecked");async function WMt(t,e,r,n){for(let i of r.turns){let o=j$(i.request),a=new Db({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=zV(r.chatMode),a.needToolCallConfirmation=r.needToolCallConfirmation;let l=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,c=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:dz(l),u=ez({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});await t.get(Hi).addTurn(e.id,a,r.references,u,l,c,r.ignoredSkills,void 0)}}s(WMt,"addTurns");var zHe=st(UMt,qMt);f();var GMt=I.Object({conversationId:I.String()});function HMt(t,e,r){return t.get(Hi).destroy(r.conversationId),["OK",null]}s(HMt,"handleConversationDestroyChecked");var YHe=wo(st(GMt,HMt));f();var jMt=I.Object({});function VMt(t,e,r){return[{path:t.get(Ec).directory},null]}s(VMt,"handleConversationPersistenceChecked");var KHe=wo(st(jMt,VMt));f();f();var XHe=je(require("node:events"));var Lpe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let r=await e.get(mn).getSession(e),n=e.get(_a),i=n.fallbackAppId();return r&&r.githubAppId&&r.githubAppId!==i?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:n.githubAppId}}},Fpe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Qr).getToken()).envelope.chat_enabled?"ok":"failed"}}},$Mt=[new Lpe,new Fpe],JHe="onPreconditionsChanged",Rp=class{constructor(e,r=$Mt){this.ctx=e;this.checks=r;this.emitter=new XHe.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let r=e.every(i=>i.status==="ok")?"ok":"failed",n={results:e,status:r};return this.emit(n),n}onChange(e){this.emitter.on(JHe,e)}emit(e){this.emitter.emit(JHe,e)}};var zMt=I.Object({forceCheck:I.Optional(I.Boolean())});async function YMt(t,e,r){let n=r.forceCheck??!1;return[await t.get(Rp).check(n),null]}s(YMt,"handleConversationPreconditionsChecked");var ZHe=wo(st(zMt,YMt));f();var KMt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(hd),textDocument:I.Optional(hd),source:I.Optional(Sp)});async function JMt(t,e,r){let n=await BA(t,r,e),i=fv(r.source),o="unrated";r.rating>0?o="positive":r.rating<0&&(o="negative");let a=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:n?.detectedLanguageId??""});return S0(t,n,{rating:o,uiKind:i},{},`${Du(i)}.messageRating`,a),["OK",null]}s(JMt,"handleConversationRatingChecked");var eje=st(KMt,JMt);f();f();var fz=class extends Rb{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:yA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,r){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,r,n){let i={name:this.name,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId};try{return await e.ctx.get(sb).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Fa;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(iA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var XMt=I.Object({tools:I.Array(SHe)});function ZMt(t,e,r){return r.tools.forEach(n=>{t.get(su).registerTool(new fz({name:n.name,description:n.description,inputSchema:n.inputSchema,confirmationMessages:n.confirmationMessages}))}),["OK",null]}s(ZMt,"conversationRegisterToolsChecked");var tje=st(XMt,ZMt);f();var eQt=I.Object({});function tQt(t,e,r){return[$fe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(tQt,"handleConversationTemplatesChecked");var rje=wo(st(eQt,tQt));f();var rQt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:G$,turnId:I.Optional(LT),message:Tpe,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(hd),textDocument:I.Optional(hd),selection:I.Optional(wa),visibleRanges:I.Optional(Z$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(JR)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(z$)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:oMe,model:I.Optional(I.String()),chatMode:I.Optional($$),needToolCallConfirmation:I.Optional(I.Boolean())});async function nQt(t,e,r){tk.validate(r.workspaceFolders);let n=await BA(t,r,e),i=t.get(Hi),o=i.get(r.conversationId),a=j$(r.message),l=new Db({message:a,type:"user"},r.turnId);l.chatMode=zV(r.chatMode),l.needToolCallConfirmation=r.needToolCallConfirmation;let c=r.workspaceFolder?{uri:r.workspaceFolder}:void 0,u=r.workspaceFolders&&r.workspaceFolders.length>0?r.workspaceFolders:dz(c),d=ez({textDocument:n,selection:r.selection,visibleRanges:r.visibleRanges});l=await i.addTurn(o.id,l,r.references,d,c,u,r.ignoredSkills,r.confirmationResponse);let p=XR(r),m=t.get(Yu).add(p.progressToken,e),h=new Ob(t,o,l,m);return await(await t.get(Hy).createProcessor(h,p.progressToken,r.computeSuggestions)).process(p,m,r.followUp,n,r.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:r.model},null]}s(nQt,"handleConversationTurnChecked");var nje=st(rQt,nQt);f();var iQt=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(Sp)});async function oQt(t,e,r){t.get(Hi).deleteTurn(r.conversationId,r.turnId);let i=fv(r.source),o=await gc(t,t.get(Hi).findByTurnId(r.turnId),{languageId:""});return S0(t,void 0,{messageId:r.turnId,uiKind:i,conversationId:r.conversationId},{},`${Du(i)}.messageDelete`,o),["OK",null]}s(oQt,"handleConversationTurnDeleteChecked");var ije=wo(st(iQt,oQt));f();var sQt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function aQt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(aQt,"buildSystemMessage");function lQt(t){let r=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),n=t.selection.start.line+1,i=t.selection.end.line+1,o=r.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>n&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${n} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(lQt,"buildUserMessage");function cQt(t,e){let r=[],n=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=n.length)continue;let g=n[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};r.push(b)}return r}s(cQt,"parseReviewComments");async function uQt(t,e,r){if(!r.document.text)return[null,{code:$r.InvalidRequest,message:"Document text is required"}];if(!r.document.uri)return[null,{code:$r.InvalidRequest,message:"Document URI is required"}];if(!r.document.languageId)return[null,{code:$r.InvalidRequest,message:"Document language ID is required"}];let n=r.document.text.split(`
`);if(r.selection.start.line<0||r.selection.end.line>=n.length)return[null,{code:$r.InvalidRequest,message:"Invalid selection range"}];if(r.selection.start.line>r.selection.end.line)return[null,{code:$r.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ta),o=await xo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:aQt()},{role:"user",content:lQt(r)}],l=await t.get(Dt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Hd.user("code-review",sr())},e,l);if(c.type!=="success")return[null,{code:$r.InternalError,message:"Failed to generate code review"}];let u=cQt(r.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(uQt,"handleCopilotCodeReviewChecked");var oje=wo(st(sQt,uQt));f();f();var Ub=class{constructor(e,r,n,i,o){this.ctx=e;this.editConversation=r;this.currentTurn=n;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of n.workingSet)this.workingSetUriToPathMap.set(a.uri,yy.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[r,n]of this.workingSetUriToPathMap)if(n===e)return r}toLlmInteraction(){return Hd.user("conversation-edit-panel",this.editTurnId)}};f();async function pz(t,e,r,n){let o=t.get(il).create("panel","en"),a=new cb({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new Ub(t,o,a,n,ln.Gpt4o),u=t.get(bc);await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:r,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(pz,"streamMockedResult");f();var dQt=I.Object({enableMock:I.Boolean()}),DA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function fQt(t,e,r){return t.get(DA).setMockEnabled(r.enableMock),["OK",null]}s(fQt,"handleTestingSetCopilotEditsResponseChecked");var sje=st(dQt,fQt);var pQt=I.Object({request:I.String(),response:I.Optional(I.String())}),mQt=I.Union([I.Literal("panel")]),hQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array(pQt,{minItems:1}),workingSet:I.Optional(I.Array(g6)),source:I.Optional(mQt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function gQt(t,e){let r=t.create(e.source,e.userLanguage);for(let n of e.turns){let i=new cb({message:n.request,type:"user"},e.workingSet);n.response&&(i.response={message:n.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(r.id,i)}return r}s(gQt,"buildEditConversation");async function AQt(t,e,r){if(t.get(DA).isMockEnabled())return await pz(t,sr(),sr(),r.partialResultToken),[[],null];let n=gQt(t.get(il),r),i=n.getLastTurn(),o=new Ub(t,n,i,r.partialResultToken,r.model),a=t.get(Yu).add(r.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(o,a),null]}s(AQt,"handleEditConversationCreateChecked");var aje=wo(st(hQt,AQt));f();var yQt=I.Object({editConversationId:I.String()});function CQt(t,e,r){return t.get(il).destroy(r.editConversationId),["OK",null]}s(CQt,"handleEditConversationDestroyChecked");var lje=wo(st(yQt,CQt));f();var xQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(g6)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function vQt(t,e,r){let n=t.get(e),i=new cb({message:r.message,type:"user"},r.workingSet);return r.workspaceFolder&&(i.workspaceFolder=r.workspaceFolder),t.addTurn(n.id,i),n}s(vQt,"buildEditConversation");async function bQt(t,e,r){if(t.get(DA).isMockEnabled())return await pz(t,r.editConversationId,sr(),r.partialResultToken),[[],null];let n=t.get(il),i=vQt(n,r.editConversationId,r),o=i.getLastTurn(),a=new Ub(t,i,o,r.partialResultToken,r.model),l=t.get(Yu).add(r.partialResultToken,e);return[await t.get(Cy).createOrContinueEditConversation(a,l),null]}s(bQt,"handleEditConversationTurnChecked");var cje=wo(st(xQt,bQt));f();var EQt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(Sp)});async function IQt(t,e,r){t.get(il).deleteTurn(r.editConversationId,r.editTurnId);let i=await lD(t,r.editTurnId,r.editConversationId,{languageId:""});return S0(t,void 0,{messageId:r.editTurnId,uiKind:"editsPanel",conversationId:r.editConversationId},{},`${Du("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(IQt,"handleEditConversationTurnDeleteChecked");var uje=wo(st(EQt,IQt));f();var TQt=I.Object({}),wQt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(r9)}))}))});function _Qt(t,e,r){return[t.get(H0).getAllTools(),null]}s(_Qt,"handleGetMCPToolsChecked");function SQt(t,e,r){for(let{name:i,tools:o}of r.servers)for(let{name:a,status:l}of o)t.get(H0).updateMCPToolStatus(i,a,l);return[t.get(H0).getAllTools(),null]}s(SQt,"handleUpdateMCPToolsStatusChecked");var dje=st(TQt,_Qt),fje=st(wQt,SQt);f();var RQt=I.Object({});async function kQt(t,e,r){let n=await t.get(Qr).getToken();return[BQt(await t.get(Tu).getMetadata(),n),null]}s(kQt,"handleCopilotModelsChecked");function BQt(t,e){let r=e.getTokenValue("editor_preview_features")=="0",n=qf.filterModelsWithEditorPreviewFeatures(t,r),i=[];return n.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!t2e.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(BQt,"filterModels");var pje=wo(st(RQt,kQt));f();var DQt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function PQt(t,e,r){return r.model&&r.status==="enabled"?await t.get(Tu).acceptModelPolicy(r.model)?["OK",null]:[null,{code:$r.InternalError,message:"Failed to accept model policy"}]:[null,{code:$r.InvalidRequest,message:"Invalid model or status"}]}s(PQt,"handleCopilotModelsPolicyChecked");var mje=wo(st(DQt,PQt));f();f();var jy=10;function hje(t,e){let r=e,n=t.lineAt(e.line);return n.isEmptyOrWhitespace||(r=n.range.end),r}s(hje,"panelPositionForDocument");f();var Mpe=new _t("solutions");async function*NQt(t){for await(let e of t){let r={...e};r.completionText=r.completionText.trimEnd(),yield r}}s(NQt,"trimChoices");var rk=class{constructor(e,r,n,i){this.textDocument=e;this.startPosition=r;this.cancellationToken=n;this.solutionCountTarget=i;this.targetPosition=hje(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};function mz(t){return t.replace(/\s+/g,"")}s(mz,"normalizeCompletionText");async function LQt(t,e){let r=e.targetPosition,n=e.textDocument,i=Jx(t,n.uri),o=sr(),a=an.createAndMarkAsIssued({headerRequestId:o,languageId:n.detectedLanguageId,source:"open copilot"},{});e.savedTelemetryData=await t.get(Dt).updateExPValuesAndAssignments({uri:n.uri,languageId:n.detectedLanguageId},a);let l=await O5(t,o,Lg(n,r),e.savedTelemetryData);if(l.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(l.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(l.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(l.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(l.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let c=l.prompt,u=l.trailingWs;u.length>0&&(e.startPosition=Vo.position(e.startPosition.line,e.startPosition.character-u.length));let d=e.cancellationToken;e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...RS(c),solutionCount:e.solutionCountTarget,promptEndPos:n.offsetAt(r)}),Mpe.debug(t,"prompt:",c),Bt(t,"solution.requested",e.savedTelemetryData);let p=t.get(bm).forLanguage(t,n.detectedLanguageId,e.savedTelemetryData),m=y0(n.detectedLanguageId),h=mD(n,r),g={language:n.detectedLanguageId,next_indent:h.next??0,prompt_tokens:c.prefixTokens??0,suffix_tokens:c.suffixTokens??0},y={};p==="parsing"&&!m&&(y.stop=[`

`,`\r
\r
`]);let v=Kx(t,e.savedTelemetryData),b={prompt:c,languageId:n.detectedLanguageId,repoInfo:i,ourRequestId:o,engineModelId:v.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:y,headers:v.headers,extra:g},E;switch(p){case"server":E=s(()=>{},"finishedCb"),g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsingandserver":E=m?pD(t,n,e.startPosition,!1):()=>{},g.force_indent=h.prev??-1,g.trim_by_indentation=!0;break;case"parsing":default:E=m?pD(t,n,e.startPosition,!1):()=>{};break}let _=e.savedTelemetryData,k=await t.get(Id).fetchAndStreamCompletions(t,b,_.extendedBy(),E,d);if(k.type==="failed"||k.type==="canceled")return{status:"FinishedWithError",error:`${k.type}: ${k.reason}`};let B=k.choices;B=NQt(B),B=aD(B,te=>SD(t,n,r,te,!1,Mpe));let N=aD(B,async te=>{let me=te.completionText;Mpe.info(t,`Open Copilot completion: [${te.completionText}]`);let oe=await eRe(t,n,r,te.completionText)??Vo.position(r.line,0),[H]=Q5(n.getText(Vo.range(oe,r)));me=H+me;let O=te.completionText;u.length>0&&O.startsWith(u)&&(O=O.substring(u.length));let le=te.meanLogProb,ie=le!==void 0?Math.exp(le):0,j=_.extendedBy({choiceIndex:te.choiceIndex.toString()});return{completionText:O,insertText:me,range:Vo.range(oe,r),meanProb:ie,meanLogProb:le||0,requestId:te.requestId,choiceIndex:te.choiceIndex,telemetryData:j,copilotAnnotations:te.copilotAnnotations}});return Aje(d,N[Symbol.asyncIterator]())}s(LQt,"launchSolutions");async function gje(t,e){let r=await t;switch(r.status){case"Solution":await e.onSolution(r.solution),await gje(r.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(r.error);break}}s(gje,"reportSolutions");async function hz(t,e,r){return t.get(Ki).withProgress(async()=>{let i=LQt(t,e);return await gje(i,r)})}s(hz,"runSolutions");async function Aje(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let r=await e.next();return r.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:r.value,next:Aje(t,e)}}s(Aje,"generateSolutionsStream");var Cje=je(Ex()),E6=je(Sa());f();f();function gz(t,e){let r=t.split(`
`),n=e,i=e,o=r[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),n={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),n={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:r,start:n,end:i}}s(gz,"parseChallengeDoc");var FQt=I.Object({text:I.String(),score:I.Number()}),MQt=I.Object({documents:I.Array(FQt),options:I.Optional(I.Object({}))});async function Az(t,e,r){let n=sr();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=gz(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);r.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await r.onSolution({requestId:{headerRequestId:n,completionId:sr(),created:0,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:fg.createEmptyConfigForTesting()})}await r.onFinishedNormally()}s(Az,"runTestSolutions");var ph=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function QQt(t,e,r){return t.forceSet(ph,new ph(r.documents)),["OK",null]}s(QQt,"handleTestingSetPanelCompletionDocumentsChecked");var yje=st(MQt,QQt);var xje=oM.type;function OQt(t,e,r,n,i){let o=mz(n.completionText),a=(0,Cje.SHA256)(o).toString();return t.get(is).set(a,{displayText:n.completionText,insertText:n.insertText,offset:r,uuid:a,range:n.range,uri:e.textDocument.uri,telemetry:n.telemetryData.extendedBy({},{rank:i-1}),index:n.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:n.copilotAnnotations}),{range:n.range,insertText:n.insertText,command:{command:tfe,title:`Accept completion ${i}`,arguments:[a]}}}s(OQt,"makeCompletion");function Ope(t,e){return`${t}/${e}`}s(Ope,"progressMessage");var Qpe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.onCompletion=n;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(yr)}async onSolution(e){this.count+=1;let r=OQt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(r.command.arguments[0])||(this.items.set(r.command.arguments[0],r),await this.onCompletion(r)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(E6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:Ope(this.count,jy),percentage:Math.round(100*this.count/jy)})}onFinishedNormally(){return UQt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(E6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function UQt(t,e,r=0){t!==void 0&&await e.connection.sendProgress(E6.WorkDoneProgress.type,t,{kind:"end",message:Ope(r,jy)})}s(UQt,"reportDone");var b6;async function qQt(t,e,r){let n=await fh(t,r.textDocument,e),i=r.position;r.workDoneToken!==void 0&&await t.get(yr).connection.sendProgress(E6.WorkDoneProgress.type,r.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:Ope(0,jy),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=r.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(yr).connection.sendProgress(oM.partialResult,l,{items:[d]})},"onCompletion"));let c=new Qpe(t,r,a),u=t.get(ph);if(u.documents){let d=u.documents;await Az(i,d,c)}else{c.offset=n.offsetAt(i);let d=new rk(n,i,e,jy);await hz(t,d,c)}return c.error!==void 0?[null,{code:$r.InternalError,message:c.error}]:[{items:o},null]}s(qQt,"handleChecked");async function WQt(t,e,r){b6&&(b6.cancel(),b6.dispose()),b6=new pn.CancellationTokenSource;let n=b6.token,i=new jd([e,n]);try{return await qQt(t,i,r)}catch(o){if(n.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:$r.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(WQt,"handleCheckedWithAbort");var vje=st(wIe,WQt);f();f();f();function HQt(t){let{apiUrl:e,serverUrl:r}=t.get(Fl).getConfiguredUrls(),n=new URL("login/device",r).href,i=fM(t),o=new URL("_ping",i.proxy).href,a=new URL("_ping",i.api).href,l=new URL("_ping",i.telemetry).href;function c(u){return new URL(u).host}return s(c,"label"),[{label:c(n),url:n},{label:c(e),url:e},{label:c(o),url:o},{label:c(a),url:a},{label:c(l),url:l}]}s(HQt,"urlsToCheck");async function bje(t){let e=HQt(t).map(async({label:r,url:n})=>{let{message:i,status:o}=await jQt(t,n);return{label:r,url:n,message:i,status:o}});return await Promise.all(e)}s(bje,"checkReachability");async function jQt(t,e){try{let r=await t.get(on).fetch(e,{}),n=r.status>=200&&r.status<400?"reachable":"unreachable";return{message:`HTTP ${r.status}`+(r.statusText?` - ${r.statusText}`:""),status:n}}catch(r){return{message:String(r),status:"unreachable"}}}s(jQt,"determineReachability");var kp=je(require("os")),nk=je(require("tls"));async function Eje(t){return{sections:[VQt(t),$Qt(),await YQt(t),zQt(),KQt(t),await JQt(t)]}}s(Eje,"collectDiagnostics");function Ije(t){return t.sections.map(XQt).join(kp.EOL+kp.EOL)}s(Ije,"formatDiagnosticsAsMarkdown");function VQt(t){return{name:"Copilot",items:{Version:vI(t),Build:Ff(t),Editor:n0(t)["Editor-Version"]}}}s(VQt,"collectCopilotSection");function $Qt(){return{name:"Environment",items:{http_proxy:Vy("http_proxy"),https_proxy:Vy("https_proxy"),no_proxy:Vy("no_proxy"),SSL_CERT_FILE:Vy("SSL_CERT_FILE"),SSL_CERT_DIR:Vy("SSL_CERT_DIR"),OPENSSL_CONF:Vy("OPENSSL_CONF")}}}s($Qt,"collectEnvironmentSection");function zQt(){return{name:"Node setup",items:{"Number of root certificates":nk.rootCertificates.length,"Operating system":kp.type(),"Operating system version":kp.release(),"Operating system architecture":kp.arch(),NODE_OPTIONS:Vy("NODE_OPTIONS"),NODE_EXTRA_CA_CERTS:Vy("NODE_EXTRA_CA_CERTS"),NODE_TLS_REJECT_UNAUTHORIZED:Vy("NODE_TLS_REJECT_UNAUTHORIZED"),"tls default min version":nk.DEFAULT_MIN_VERSION,"tls default max version":nk.DEFAULT_MAX_VERSION}}}s(zQt,"collectNodeSection");async function YQt(t){let e={};try{let r=await t.get(Qr).getToken();e["Send Restricted Telemetry"]=r.getTokenValue("rt")==="1"?"enabled":"disabled",e.Chat=r.envelope?.chat_enabled?"enabled":void 0,e["Content exclusion"]=r.envelope?.copilotignore_enabled?"enabled":"unavailable"}catch{}return Object.keys(e).forEach(r=>e[r]===void 0&&delete e[r]),{name:"Feature Flags",items:e}}s(YQt,"collectFeatureFlagsSection");function KQt(t){let e=t.get(on);return{name:"Network Configuration",items:{"Proxy host":e.proxySettings?.host,"Proxy port":e.proxySettings?.port,"Kerberos SPN":e.proxySettings?.kerberosServicePrincipal,"Reject unauthorized":e.rejectUnauthorized?"enabled":"disabled",Fetcher:e.name}}}s(KQt,"collectNetworkConfigSection");async function JQt(t){return{name:"Reachability",items:Object.fromEntries((await bje(t)).map(({label:r,status:n,message:i})=>[r,i]))}}s(JQt,"collectReachabilitySection");function Vy(t){let e=Object.keys(process.env).find(r=>r.toLowerCase()===t.toLowerCase());return e?process.env[e]:void 0}s(Vy,"findEnvironmentVariable");function XQt(t){return`## ${t.name}`+kp.EOL+kp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"n/a"}`).join(kp.EOL)}s(XQt,"formatSectionAsMarkdown");var ZQt=I.Object({});async function eOt(t){return[{report:Ije(await Eje(t))},null]}s(eOt,"handleDiagnosticsChecked");var Tje=st(ZQt,eOt);f();f();f();f();function wje(t,e,r){function n(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(n,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>n(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>n(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),r){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return n(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(wje,"normalizeIndentCharacter");function _je(t,e,r,n,i,o,a){let l=n.lineAt(i),c=e.map(u=>{let d=Vo.range(Vo.position(i.line,0),Vo.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=wje(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=Vo.range(d.start,i);p=n.getText(h)+u.completion.displayText}return{uuid:sr(),insertText:p,range:d,uri:n.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:n.offsetAt(i),resultType:r,copilotAnnotations:u.copilotAnnotations}});if(r===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(_je,"completionsFromGhostTextResults");async function Upe(t,e,r,n={}){let i=0;n.selectedCompletionInfo?.text&&!n.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(n.selectedCompletionInfo),i=e.position.character-n.selectedCompletionInfo.range.end.character);let o=await Ioe(t,e,r,n);if(o.type!=="success")return o;let[a,l]=o.value;if(r?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=l3e(t,e.textDocument,e.position,l),u=_je(t,a,l,e.textDocument,e.position,n.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=t.get(Dt),p=(Xr(t,ft.AlwaysRequestMultiline)??d.enableProgressiveReveal(o.telemetryBlob))&&Bm.isSupported(e.textDocument.detectedLanguageId),m=Xr(t,ft.EnableSpeculativeRequests),h=d.enableSpeculativeRequests(o.telemetryBlob);(p||(m??h))&&l!==2&&(e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]),Promise.resolve().then(()=>{Ioe(t,e,void 0,{isSpeculative:!0,opportunityId:n.opportunityId})}));let y=u.map(v=>{let{start:b,end:E}=v.range,_=pn.Range.create(b,pn.Position.create(E.line,E.character-i));return{...v,range:_}});return{...o,value:y}}s(Upe,"getInlineCompletionsResult");async function yz(t,e,r,n,i={}){tOt(t,e,r);let o=await Upe(t,Lg(e,r),n,i);return B4e(t,o)}s(yz,"getInlineCompletions");function tOt(t,e,r){let n=e.getText({start:{line:Math.max(r.line-1,0),character:0},end:r}),i=e.getText({start:r,end:{line:Math.min(r.line+2,e.lineCount-1),character:e.lineCount-1>r.line?0:r.character}});bU.debug(t,`Requesting for ${e.uri} at ${r.line}:${r.character}`,`between ${JSON.stringify(n)} and ${JSON.stringify(i)}.`)}s(tOt,"logCompletionLocation");var Pje=je(Sa());f();var Sje=require("crypto");var ik=class{static{s(this,"LspClientContextProvider")}constructor(e,r,n){this.id=r,this.selector=n,this.resolver=new Wpe(e,this.id)}},Wpe=class{constructor(e,r){this.ctx=e;this.id=r;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,r){let n=[];if(this.contextItems.length>0)n=this.contextItems;else if(this.update){let i=this.ctx.get(yr),o=(0,Sje.randomUUID)(),a=i.connection.onProgress(rM.type,o,l=>{n.push(...l)});r.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(rM.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},r);n.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(n)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function ok(t,e,r){try{let n=t.get(Da),i=new Map;n.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof ik&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof ik&&(a.resolver.setUpdate(!0),a.resolver.data=r)})}catch(n){Mr.error(t,"Failed to set context items on context providers",n)}}s(ok,"setContextItems");var qpe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function Rje(t,e,r){return e.map(i=>{try{if(typeof i=="string")return Ba(r.uri,i,qpe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=r.languageId==(i.language||"")),"scheme"in i&&(o&&=Ba(r.uri,i.scheme||"",qpe)),"pattern"in i&&(o&&=Ba(r.uri,i.pattern||"",qpe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Rje,"match");f();var rOt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),qb=class{constructor(e,r){this.documents=e;this.basename=r}static{s(this,"ExternalTestingCompletionDocuments")}};function nOt(t,e,r){return t.forceSet(qb,new qb(r.documents,r.basename||"")),["OK",null]}s(nOt,"handleTestingSetCompletionDocumentsChecked");var kje=new _t("setCompletionDocuments"),Dje=st(rOt,nOt);function Cz(t,e,r,n){let i=t.get(qb);if(i.documents){let o=n?3:1;if(r&&i.basename&&i.basename.trim().length>0){kje.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=iOt(i,r);return a&&a.length>0?Bje(a,o,e):void 0}else return kje.debug(t,"Returning completions for all pre-set documents"),Bje(i.documents,o,e)}}s(Cz,"getTestCompletions");function Bje(t,e,r){return t.slice(0,e).map(n=>{let{cursorLine:i,lines:o,start:a,end:l}=gz(n,r);return{insertText:[i.slice(Math.min(a.character,r.character))].concat(o.slice(r.line+1)).join(`
`),range:{start:a,end:l}}})}s(Bje,"sliceAndMapCompletions");function iOt(t,e){return t.basename===Ti(e)?t.documents||[]:[]}s(iOt,"getFilteredDocs");var Nje=I.Object({doc:I.Object({position:Nl,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:JB,version:I.Number()}),contextItems:I.Optional(vie)}),I6;async function Lje(t,e,r,n){I6&&(I6.cancel(),I6.dispose()),I6=new pn.CancellationTokenSource;let i=new jd([e,I6.token]);r.contextItems&&ok(t,r.contextItems);let o=Cz(t,r.doc.position,r.doc.uri,n);if(o)return[{completions:o.map(m=>({uuid:sr(),text:m.insertText,displayText:m.insertText,position:r.doc.position,range:m.range,docVersion:r.doc.version}))},null];let a;try{a=await fh(t,r.doc,i)}catch(p){if(!(p instanceof Pje.ResponseError))throw p;switch(p.code){case $r.CopilotNotAvailable:case $r.ContentModified:return[{completions:[]},null]}throw p}let l=r.doc.position,c=await yz(t,a,l,i,{isCycling:n,formattingOptions:r.doc});if(!c)return[{completions:[]},null];let u=t.get(is);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Lje,"handleGetCompletionsHelper");var Fje=st(Nje,(t,e,r)=>Lje(t,e,r,!1)),Mje=st(Nje,(t,e,r)=>Lje(t,e,r,!0));f();var Qje=je(Ex()),sk=je(Sa());var oOt=I.Object({doc:I.Object({position:Nl,uri:JB,version:I.Number()}),panelId:I.String()});function sOt(t,e,r,n,i){let o=mz(i.completionText),a=(0,Qje.SHA256)(o).toString();return t.get(is).set(a,{displayText:i.insertText,insertText:i.completionText,offset:n,uuid:a,range:r,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:r.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations}),{panelId:e.panelId,range:r,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(sOt,"makeSolution");var Gpe=class{constructor(e,r,n){this.ctx=e;this.params=r;this.range=n;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(yr)}onSolution(e){return this.service.connection.sendNotification(new sk.NotificationType("PanelSolution"),sOt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Oje(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new sk.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Oje(t,e){return e.connection.sendNotification(new sk.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Oje,"reportDone");var T6;async function aOt(t,e,r){T6&&(T6.cancel(),T6.dispose()),T6=new pn.CancellationTokenSource;let n=new jd([e,T6.token]),i=r.doc.position,o=Vo.range(i,i),a=new Gpe(t,r,o),l=t.get(ph);if(l.documents){let c=l.documents;Az(i,c,a)}else{let c;try{c=await fh(t,r.doc,n)}catch(d){if(!(d instanceof sk.ResponseError))throw d;switch(d.code){case $r.CopilotNotAvailable:case $r.ContentModified:return lOt(t,r)}throw d}a.offset=c.offsetAt(i);let u=new rk(c,i,n,jy);hz(t,u,a)}return[{solutionCountTarget:jy},null]}s(aOt,"handleGetPanelCompletionsChecked");async function lOt(t,e){return await Oje(e.panelId,t.get(yr)),[{solutionCountTarget:0},null]}s(lOt,"produceEmptySolutions");var Uje=st(oOt,aOt);f();var cOt=I.Object({});function uOt(t,e,r){return[{version:t.get(po).getDisplayVersion(),buildType:Ff(t),runtimeVersion:`node/${process.versions.node}`},null]}s(uOt,"handleGetVersionChecked");var qje=st(cOt,uOt);f();var dOt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function fOt(t,e){let r=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&r.push(`
Current git branch name: ${e}`),t&&r.push(`
Respond in the following locale: ${t}`),r.join(`
`)}s(fOt,"buildSystemMessage");function pOt(t,e){let r=[];return t.userCommits.length>0&&r.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(n=>`- ${n}`).join(`
`),""),t.recentCommits.length>0&&r.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(n=>`- ${n}`).join(`
`),""),r.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&r.push("<custom-instructions>",e,"</custom-instructions>"),r.join(`
`)}s(pOt,"buildUserMessage");async function mOt(t,e,r){if(r.changes.length===0)return[null,{code:$r.InvalidRequest,message:"No changes provided"}];let n=new ta(t),i=await xo.getModelConfiguration(t,"gitCommit"),o=[{uri:r.workspaceFolder?r.workspaceFolder:fl(process.cwd())}],a=await aA.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(Hi),c=l.create({capabilities:{skills:[TA]}}),u=new Db({message:"",type:"user"});await l.addTurn(c.id,u);let d=XR({workDoneToken:sr()});await t.get(ws).begin(c,u,d);let h=(await new Ob(t,c,u,e).skillResolver.resolve(TA))?.head?.name,g=[{role:"system",content:await fOt(r.userLanguage,h)},{role:"user",content:pOt(r,a)}],y=await t.get(Dt).updateExPValuesAndAssignments(),v=await n.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Hd.user("git-commit",sr())},e,y);if(v.type!=="success")return[null,{code:$r.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(mOt,"handleGitCommitGenerateChecked");var Wje=wo(st(dOt,mOt));f();var Hje=nte.type,w6;function Gje(t){return{title:"Completion Accepted",command:e6,arguments:[t]}}s(Gje,"makeCommand");async function hOt(t,e,r){w6&&(w6.cancel(),w6.dispose());let n=r.context.triggerKind===1;w6=new pn.CancellationTokenSource;let i=w6.token,o=new jd([e,i]);r.contextItems&&ok(t,r.contextItems,r.data);let a=Cz(t,r.position,r.textDocument.uri,n);if(a)return[{items:a.map(h=>({command:Gje(sr()),...h}))},null];let l=await fh(t,r.textDocument,o),c=r.position,u=await yz(t,l,c,o,{isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(!u)return e.isCancellationRequested?[null,{code:$r.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:$r.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(is);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Gje(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(hOt,"handleChecked");var jje=st(wU,(t,e,r)=>hOt(t,e,r));f();var Vje=ste.type,_6;async function AOt(t,e,r){_6&&(_6.cancel(),_6.dispose());let n=r.context.triggerKind===1;_6=new pn.CancellationTokenSource;let i=_6.token,o=new jd([e,i]);r.contextItems&&ok(t,r.contextItems);let a=await fh(t,r.textDocument,o),l=await Upe(t,Lg(a,r.position),o,{promptOnly:!0,isCycling:n,selectedCompletionInfo:r.context.selectedCompletionInfo,formattingOptions:r.formattingOptions,data:r.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(AOt,"handleChecked");var $je=st(wU,(t,e,r)=>AOt(t,e,r));f();f();function Hpe(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,r=t.indexOf("-----END CERTIFICATE-----"),n=30,i=t.substring(e,e+n)+"..."+t.substring(r-n,r-1);return ak(i)}s(Hpe,"asReadableCert");function ak(t){return t.replace(/\s/g,"")}s(ak,"normalizeNewlines");var COt=I.Object({});async function xOt(t){return[{certificates:(await t.get(nl).getAllRootCAs()).map(ak)},null]}s(xOt,"handleListCertificatesChecked");var zje=st(COt,xOt);f();async function vOt(t,e,r){let n=t.get(sh);if(r.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=Ll(r.textDocument.uri);t.get(Bg).onUserPositionChange(i,new sn(r.position.line,r.position.character));let o=await n.handleNextEditRequest(i,r.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:e6,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(vOt,"handleChecked");var Yje=st(IIe,vOt);f();var bOt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function EOt(t,e,r){let n=t.get(is),i=n.get(r.uuid);if(i){n.delete(r.uuid);let o=IOt(r,i);x2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(EOt,"notifyAcceptedChecked");function IOt(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(IOt,"getSuggestionStatus");var Kje=st(bOt,EOt);f();var TOt=I.Object({uuids:I.Array(I.String())});function wOt(t,e,r){let n=t.get(is),i=r.uuids.flatMap(o=>n.get(o)??[]);if(i.length>0){let o=i[0];for(let l of r.uuids)n.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));kq(t,"ghostText",o.offset,o.uri,a),t.get(Mu).resetState()}return["OK",null]}s(wOt,"notifyRejectedChecked");var Jje=st(TOt,wOt);f();var _Ot=I.Object({uuid:I.String({minLength:1})});function SOt(t,e,r){let i=t.get(is).get(r.uuid);return i&&EU(t,i.triggerCategory,i),["OK",null]}s(SOt,"notifyShownChecked");var Xje=st(_Ot,SOt);f();var ROt=q4e;function kOt(t,e,r){let n=t.get(Da),i={unregistered:[],registered:[]};return r.providers.forEach(o=>{try{let a=new ik(t,o.id,o.selector);n.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(kOt,"registerContextProviders");var Zje=st(ROt,kOt);f();f();var eVe=require("net");function jpe(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(jpe,"getProxyFromEnvironment");function BOt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(BOt,"getRejectUnauthorizedFromEnvironment");var tVe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function rVe(t){let r={proxy:jpe(t),proxyStrictSSL:BOt(t)},n=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return n&&(r.proxyKerberosServicePrincipal=n),r}s(rVe,"getHttpSettingsFromEnvironment");function S6(t){(0,eVe.isIPv6)(t)?t="https://["+t+"]":/:\/\//.test(t)||(t=`https://${t}`);let{hostname:e,port:r,username:n,password:i}=new URL(t);return{host:e,port:DOt(r),proxyAuth:POt(n,i)}}s(S6,"proxySettingFromUrl");function DOt(t){if(!t)return 80;let e=Number(t);if(isNaN(e))throw new TypeError("Invalid proxy port");return e}s(DOt,"parsePort");function POt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(POt,"getAuth");f();var $pe=I.Object({host:I.String(),port:I.Number(),username:I.Optional(I.String()),password:I.Optional(I.String()),rejectUnauthorized:I.Optional(I.Boolean())}),NOt=I.Object({uri:I.Optional(I.String())}),LOt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),iVe=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),"github-enterprise":I.Optional(NOt),http:I.Optional(tVe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),zpe=Object.keys(iVe.properties).filter(t=>t!=="github"),FOt=I.Intersect([iVe,LOt]),MOt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),networkProxy:I.Optional($pe),authProvider:I.Optional(I.Never())}),nVe=ms.Compile(MOt),Vpe=ms.Compile(FOt);async function oVe(t,e){if(!nVe.Check(e))throw new Ic(nVe.Errors(e));let r=Array.isArray(e.settings)?{}:e.settings;r&&await Ype(t,r),e.networkProxy!==void 0&&xz(t,e.networkProxy),await R6(t,r)}s(oVe,"notifyChangeConfiguration");async function Ype(t,e){for(let i of Vpe.Errors(e)){let o=i.path.split("/")?.[1];_c.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Vpe.Check(e))throw new Ic(Vpe.Errors(e));let r=t.get(X0);r.setConfig(ft.ShowEditorCompletions,e.showEditorCompletions),r.setConfig(ft.DelayCompletions,e.delayCompletions),r.setConfig(ft.EnableAutoCompletions,e.enableAutoCompletions),r.setConfig(ft.FilterCompletions,e.filterCompletions),e.http&&Kpe(t,e.http);let n=e["github-enterprise"];n&&(t.get(Fl).updateBaseUrl(t,n.uri),t.get(mn).updateEnterpriseConfig(t,n)),e.github?.copilot&&await QOt(t,e.github.copilot)}s(Ype,"applySettingsToConfiguration");async function QOt(t,e){let r=t.get(X0);for(let n of Object.values(ft)){let i=xTe(e,n);r.setConfig(n,i)}e.mcp?await qOt(t,e.mcp):await WOt(t),OOt(t,e.globalCopilotInstructions||""),UOt(t,e.globalGitCommitInstructions||"")}s(QOt,"applyCopilotConfiguration");function OOt(t,e){try{t.get(oA).setGlobalCopilotInstructions(e)}catch(r){_c.error(t,"Failed to apply global Copilot instructions configuration",r)}}s(OOt,"applyGlobalCopilotInstructionsConfiguration");function UOt(t,e){try{t.get(oA).setGlobalGitCommitInstructions(e)}catch(r){_c.error(t,"Failed to apply global Git commit instructions configuration",r)}}s(UOt,"applyGlobalGitCommitInstructionsConfiguration");function Kpe(t,e){let r=t.get(X0),n=t.get(on);if(e.proxy===void 0&&(e=rVe(r.env)),n.rejectUnauthorized=e?.proxyStrictSSL,!e.proxy){n.proxySettings=void 0;return}try{n.proxySettings=S6(e.proxy),e.proxyAuthorization&&(n.proxySettings.proxyAuth=e.proxyAuthorization),e.proxyKerberosServicePrincipal&&(n.proxySettings.kerberosServicePrincipal=e.proxyKerberosServicePrincipal)}catch(i){if(!(i instanceof TypeError))throw i;_c.warn(t,"Invalid proxy URL",e.proxy,i),n.proxySettings=void 0}}s(Kpe,"applyHttpConfiguration");function xz(t,e){if(!e){t.get(on).proxySettings=void 0,t.get(on).rejectUnauthorized=void 0;return}let r;e.username&&(e.password?r=e.username+":"+e.password:r=e.username),t.get(on).proxySettings={host:e.host,port:e.port,proxyAuth:r},t.get(on).rejectUnauthorized=e.rejectUnauthorized??!0}s(xz,"applyNetworkProxyConfiguration");async function qOt(t,e){try{let r=JSON.parse(e);await t.get(H0).updateMCPServers(r)}catch(r){_c.error(t,"Failed to apply MCP configuration",r)}}s(qOt,"applyMCPConfiguration");async function WOt(t){await t.get(H0).updateMCPServers({})}s(WOt,"removeMCPConfiguration");async function R6(t,e){if(!t.get(Ho).getCapabilities().redirectedTelemetry){let r=(e?.telemetry?.telemetryLevel??"all")==="all";await AM(t,"agent",r)}await t.get(Qr).primeToken()}s(R6,"initializePostConfigurationDependencies");var sVe=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),GOt=I.Object({editorInfo:sVe,editorPluginInfo:sVe,editorConfiguration:I.Optional(I.Object({})),networkProxy:I.Optional($pe),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function HOt(t,e,r){t.get(fn).setEditorAndPluginInfo(r.editorPluginInfo,r.editorInfo),xV(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),r.editorConfiguration&&await Ype(t,r.editorConfiguration);let n=t.get(on),i=t.get(X0).env,o=jpe(i);if(r.editorInfo.name==="VisualStudio"){if(o)n.proxySettings=S6(o);else if(r.networkProxy){xz(t,r.networkProxy);let a=i.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??i.AGENT_KERBEROS_SERVICE_PRINCIPAL;n.proxySettings&&a&&(n.proxySettings.kerberosServicePrincipal??=a)}}else r.networkProxy?xz(t,r.networkProxy):o&&(n.proxySettings=S6(o));return await R6(t,r.editorConfiguration),["OK",null]}s(HOt,"handleSetEditorInfoChecked");var aVe=st(GOt,HOt);f();var jOt=I.Object({options:I.Optional(I.Object({}))});async function VOt(t,e,r){let n=t.get(mn).pendingSignIn?.status;if(n===void 0)return[null,{code:$r.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await n,[i,null]}catch(o){return[null,{code:$r.DeviceFlowFailed,message:String(o)}]}finally{t.get(mn).pendingSignIn=void 0}}s(VOt,"handleSignInConfirmChecked");var lVe=st(jOt,VOt);f();var $Ot=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function zOt(t,e,r){try{let n=t.get(mn),i=await n.checkAndUpdateStatus(t,{githubAppId:r.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=r.githubAppId??t.get(_a).findAppIdToAuthenticate(),a=await t.get(e2).getToken(t,o,n.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(_a).githubAppId=o,await t.get(mn).setPersistedSession(c),await t.get(mn).checkAndUpdateStatus(t,{freshSignIn:!0})));return t.get(mn).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:DV,title:"Sign in with GitHub",arguments:[]}},null]}catch(n){if(!(n instanceof ls))throw n;return[null,{code:$r.DeviceFlowFailed,message:n.message}]}}s(zOt,"handleSignInInitiateChecked");var Jpe=st($Ot,zOt);f();var YOt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function KOt(t,e,r){let n=r.githubToken,i=r.user,o=r.githubAppId;return await t.get(mn).setPersistedSession({accessToken:n,login:i,githubAppId:o}),[await t.get(mn).checkAndUpdateStatus(t),null]}s(KOt,"handleSignInWithGithubTokenChecked");var cVe=st(YOt,KOt);f();var JOt=I.Object({options:I.Optional(I.Object({}))});async function XOt(t,e,r){return await t.get(mn).deletePersistedSession(),[await t.get(mn).checkAndUpdateStatus(t),null]}s(XOt,"handleSignOutChecked");var uVe=st(JOt,XOt);f();var ZOt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),Xpe=class extends Error{constructor(r,n){super(r);this.code=n;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function eUt(t,e,r){let n=t.get(po),i=t.get(fn).getEditorPluginInfo(),o=r.properties||{},a;r.platform&&r.exception_detail&&xA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:EX(t),sensitive_context:{},deployed_to:n.getBuildType(),platform:r.platform,exception_detail:r.exception_detail},xA.get(i.name)),r.transaction&&(a.transaction=r.transaction),n.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new Xpe(r.stacktrace??"N/A",i.name);return l.stack=void 0,Ta(t,l,void 0,o,a),["OK",null]}s(eUt,"handleTelemetryExceptionChecked");var dVe=st(ZOt,eUt);f();f();f();f();f();f();var fVe=je(require("tls"));var vz=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(nl)}async enhanceProxySettings(e){let r=await this.getCertificates();return{...e,ca:r}}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),n=fVe.createSecureContext({_vscodeAdditionalCaCerts:e}),i=n.context;for(let o of e)i.addCACert(o);return{secureContext:n,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let r=await this.#e;e.secureContext=r.secureContext,e.ca=r.certs,e.cert=r.certs}};f();var hk=je(_$e(),1),fKn={ALPN_HTTP2:hk.default.ALPN_HTTP2,ALPN_HTTP2C:hk.default.ALPN_HTTP2C,ALPN_HTTP1_1:hk.default.ALPN_HTTP1_1,ALPN_HTTP1_0:hk.default.ALPN_HTTP1_0},{fetch:pKn,context:S$e,reset:mKn,noCache:hKn,h1:gKn,keepAlive:AKn,h1NoCache:yKn,keepAliveNoCache:CKn,cacheStats:xKn,clearCache:vKn,offPush:bKn,onPush:EKn,createUrl:IKn,timeoutSignal:TKn,Body:wKn,Headers:R$e,Request:_Kn,Response:SKn,AbortController:Wz,AbortError:Gz,AbortSignal:k$e,FetchBaseError:RKn,FetchError:kKn,ALPN_HTTP2:BKn,ALPN_HTTP2C:DKn,ALPN_HTTP1_1:PKn,ALPN_HTTP1_0:NKn}=hk.default;var gk=class extends on{constructor(r){super();this.ctx=r;this.name="HelixFetcher";this.createSocketFactory=s((r,n)=>async i=>{i.rejectUnauthorized=n,i.timeout=r.connectionTimeoutInMs,await this.certificateConfigurator.applyToRequestOptions(i);let o=await this.certificateConfigurator.enhanceProxySettings(r);return await this.proxySocketFactory.createSocket(i,o)},"createSocketFactory");this.fetchApi=this.createFetchApi(r),this.certificateConfigurator=new vz(r),this.proxySocketFactory=r.get(nA)}static{s(this,"HelixFetcher")}set proxySettings(r){this._proxySettings=r,this.fetchApi=this.createFetchApi(this.ctx)}get proxySettings(){return this._proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.fetchApi=this.createFetchApi(this.ctx)}get rejectUnauthorized(){return super.rejectUnauthorized}createFetchApi(r){let n=r.get(po);return super.rejectUnauthorized===!1&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0"),S$e({userAgent:`GithubCopilot/${n.getVersion()}`,socketFactory:this._proxySettings?this.createSocketFactory(this._proxySettings,super.rejectUnauthorized):void 0,rejectUnauthorized:super.rejectUnauthorized})}async fetch(r,n){let i=n.signal,o=!1;if(n.timeout){let u=this.makeAbortController();setTimeout(()=>{u.abort(),o=!0},n.timeout),n.signal?.addEventListener("abort",()=>u.abort()),n.signal?.aborted&&u.abort(),i=u.signal}let a={...n,body:n.body?n.body:n.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(r,a).catch(u=>{throw o?new AB(`Request to <${r}> timed out after ${n.timeout}ms`,u):u});return new xx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}makeAbortController(){return new Wz}};f();f();var M6=require("fs"),D$e=require("path");var Ak=class extends lo{static{s(this,"LocalFileSystem")}async readFileString(e){return(await M6.promises.readFile(aa(e))).toString()}async stat(e){let{targetStat:r,lstat:n,stat:i}=await this.statWithLink(aa(e));return{ctime:r.ctimeMs,mtime:r.mtimeMs,size:r.size,type:this.getFileType(r,n,i)}}async readDirectory(e){let r=aa(e),n=await M6.promises.readdir(r,{withFileTypes:!0}),i=[];for(let o of n){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,D$e.join)(r,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let r=await M6.promises.lstat(e);if(r.isSymbolicLink())try{let n=await M6.promises.stat(e);return{lstat:r,stat:n,targetStat:n}}catch{}return{lstat:r,targetStat:r}}getFileType(e,r,n){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),r.isSymbolicLink()&&n&&(i|=64),i}};f();var Hz=class extends dh{constructor(r=[]){super();this._agents=r}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var jz=class extends ol{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(r){this.shouldInspect()&&this.prompts.push(r)}inspectFetchResult(r){this.shouldInspect()&&this.fetchResults.push(r)}documentDiff(r){this.shouldInspect()&&this.diffs.push(r)}};f();var Bme=class extends nl{constructor(r){super();this.certificates=r}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},P$e=s(t=>new Bme(t),"createTestCertificateReader");function Nme(t,e,r){let n=new Dme;n.set("x-github-request-id","1");for(let[i,o]of Object.entries(r||{}))n.set(i,o);return new xx(t,"status text",n,()=>Promise.resolve(e??""),()=>null)}s(Nme,"createFakeResponse");function N$e(t,e,r){let n;return typeof e=="string"?n=e:n=JSON.stringify(e),Nme(t,n,Object.assign({"content-type":"application/json"},r))}s(N$e,"createFakeJsonResponse");var Q6=class extends on{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}makeAbortController(){return new Pme}};var Vz=class extends Q6{static{s(this,"NoFetchFetcher")}fetch(e,r){throw new Error("NoFetchFetcher does not support fetching")}};var Dme=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,r){this.headers.set(e.toLowerCase(),r)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,r){this.headers.set(e.toLowerCase(),r)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}},Pme=class{constructor(){this.signal={aborted:!1,addEventListener:s(()=>{},"addEventListener"),removeEventListener:s(()=>{},"removeEventListener")}}static{s(this,"FakeAbortController")}abort(){this.signal.aborted=!0}};f();function jWt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(jWt,"fakeChatModelConfiguration");function VWt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(VWt,"fakeEmbeddingModelConfiguration");var $z=class extends ra{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let r=e[0];return Promise.resolve(jWt(r))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(VWt(e))}};f();var zz=class extends pc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new Ig}static{s(this,"TestUrlOpener")}open(r){return this.openedUrls.push(r),this.opened.resolve(),Promise.resolve()}},Yz=class extends za{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(r){this.actionToPerform=r}showWarningMessage(r,...n){this.sentMessages.push(r);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=n.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=n?Promise.resolve(n[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function L$e(t,e,r,n){return Q1.create(QIe(t),e,r,n,e)}s(L$e,"createTextDocument");var Lme=class extends Rr{constructor(r){super(r);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(r){this._workspaceFolders=r.map(n=>({uri:n.uri,name:n.name??Ti(n.uri)}))}async readTextDocumentFromDisk(r){return super.readTextDocumentFromDisk(r)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(r,n,i){let o=L$e(r,n,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(r,n){let i=this._openTextDocuments.findIndex(a=>a.uri===r.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=L$e(r,o.clientLanguageId,o.version+1,n)}setNotebookDocument(r,n){this._notebookDocuments.set(r.uri.replace(/#.*/,""),n)}findNotebook({uri:r}){return this._notebookDocuments.get(r.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(r){switch(r.eventName){case"focus":this._focusSubscribers.forEach(n=>n(r.args));break;case"change":this._changeSubscribers.forEach(n=>n(r.args));break;case"open":this._openSubscribers.forEach(n=>n(r.args));break;case"close":this._closeSubscribers.forEach(n=>n(r.args));break}}},Kz=class extends Lme{constructor(r){super(r);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(r){return Promise.resolve(this.contents.get(r))}setDiskContents(r,n){this.contents.set(r,n)}};var Fme=class extends $a{static{s(this,"NullLog")}logIt(...e){}};function $Wt(t){let e=new u5;return e.set(yg,t),e.set(PI,t),e.set(po,new po),e.set(Tf,new Tf({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(nl,P$e([])),e.set(nA,pH(e)),e.set(mg,new mg),e.set(ym,new xM),e.set(m0,new m0),e.set(rg,new rg),e.set(ac,new ac(e,"tid=test",!0)),e.set(Pl,new Pl),e.set(za,new Yz),e.set(pc,new zz),e.set(pg,new W5),e.set($a,new Fme),e.set(Iu,new Iu),e.set(Bs,new Bs("test-session","test-machine")),e.set(Fl,new nR(e)),e.set(g0,new g0),AM(e,"copilot-test",!0),e.set(Dt,new Dt(e)),e.set(km,new km),e.set(bm,new OS),e.set(Qr,new jb("tid=test")),e.set(Ki,new yM),e.set(va,new va),e.set(Eg,new Eg(e)),e.set(Gl,new Gl(e)),e.set(Mm,wq(e)),e.set(Mu,new Mu),e.set(_d,new _d),e.set(X1,X1.default),e.set(q0,new q0),e.set(qf,new qf(e,!1)),e.set(_a,new _a),e.set(bn,new bn(e)),e.set(I0,new WO),e.set(Ql,new Ql),e.set(Da,SU(e,async(r,n,i)=>n.find(o=>o==="*")?1:n.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(rp,new rp(e)),zWt(e),e.set(bd,new bd(e)),e.set(Ho,new Ho),e}s($Wt,"_createBaselineContext");function zWt(t){t.set(Hi,new Hi(t)),t.set(ws,new ws(t)),t.set(wc,new wc(t)),t.set(Cl,new Cl),t.set(Zl,new Zl),t.set(ol,new jz),t.set(Rp,new Rp(t,[])),t.set(ra,new $z),t.set(dh,new Hz),t.set(EA,new EA(t)),t.set(Pb,new Pb),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(ef,new ef)}s(zWt,"registerConversation");function F$e(){let t=$Wt(new PI(new US,new Map));return t.set(on,new Vz),t.set(fn,new Mme),t.set(Rr,new Kz(t)),t.set(lo,new Ak),t.set(Kc,new Kc(t)),t.set(il,new il(t)),t.set(bc,new yH(t)),t.set(Zf,new Zf(t)),t.set(wg,new b5),t.set(Jm,new _H),oV(t),t}s(F$e,"createLibTestingContext");var Mme=class extends fn{constructor(r={name:"lib-tests-plugin",version:"2"},n={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=r;this.editorInfo=n;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var Q$e=je(require("fs"));var M$e=`${process.env.HOME}/.copilot-testing-gh-token`,Jz,Xz;async function O$e(t){t.forceSet(Qr,new jb(await YWt()))}s(O$e,"setTestingCopilotTokenManager");var YWt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return process.env.GH_COPILOT_IDE_TOKEN;let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return t;if(Xz)return Xz;let e=t||process.env.GITHUB_COPILOT_TOKEN||await KWt(),r=F$e(),n=new gk(r);return r.forceSet(on,n),Xz=mM(r,{...BS({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken.token;throw new ls('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Xz},"getCopilotToken");async function KWt(){try{Jz??=(await Q$e.promises.readFile(M$e)).toString().trim()}catch{Jz??=process.env.GITHUB_TOKEN??""}if(!Jz)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${M$e}. Run "npm run get_token" to get one.`);return Jz}s(KWt,"getTestingGitHubToken");function U$e(t){return new TI({token:`test token ${sr()}`,refresh_in:0,expires_at:0,...t},void 0)}s(U$e,"createTestCopilotToken");var Qme=class extends Qr{constructor(r){super();this.copilotToken=r;this.wasReset=!1;this.ghSession=q$e()}static{s(this,"FakeCopilotTokenManagerFromCopilotToken")}async getGitHubSession(){return Promise.resolve(this.ghSession)}getToken(){return Promise.resolve(this.copilotToken)}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},Zz=class extends Qme{static{s(this,"TestCopilotTokenManager")}constructor(e){super(U$e(e))}},jb=class extends Zz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};function q$e(t={}){return{accessToken:sr(),...t,...BS(t)}}s(q$e,"testGitHubSession");var eY=class extends mn{static{s(this,"NotAuthManager")}constructor(){super(null,null,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},yk=class extends mn{constructor(r=new jb("tid=valid-copilot-token"),n=""){super(null,r,{});this.githubAppId=n}static{s(this,"AlwaysAuthManager")}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};var JWt=I.Object({options:I.Optional(I.Object({}))});async function XWt(t,e,r){return t.forceSet(mn,new yk),t.get(Qr).resetToken(),t.get(Ki).forceNormal(),await new Promise(n=>setTimeout(n,0)),["OK",null]}s(XWt,"handleTestingAlwaysAuthChecked");var W$e=st(JWt,XWt);f();var ZWt=I.Object({messages:I.Array(I.Object({role:I.Enum(gl),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(ln)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function eGt(t,e,r){let n=new ta(t),i=await t.get(ra).getBestChatModelConfig([r.modelFamily??ln.CopilotBase]),o=await lD(t,"","");return[await n.fetchResponse({modelConfiguration:i,messages:r.messages,uiKind:"conversationIntegrationTest",stop:r.stop,intentParams:{intent:!0},llmInteraction:Hd.user("test",sr())},e,o),null]}s(eGt,"handleChatMLChecked");var G$e=wo(st(ZWt,eGt));f();f();var H$e=require("crypto"),j$e=require("http"),V$e=require("stream"),$$e=require("util"),xk=je(wm());var tGt=9e4,rGt=new xk.ProtocolRequestType("copilot/fetch"),nGt=new xk.ProtocolRequestType("copilot/fetchCancel"),iGt=new xk.ProgressType,oGt=new xk.ProtocolRequestType("copilot/fetchDisconnectAll"),PA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},Ck=class extends on{constructor(r){super();this.ctx=r;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${r.get(po).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(yr).connection.sendRequest(oGt,{})}makeAbortController(){return new Wz}async fetch(r,n){n.headers||={},n.headers["user-agent"]=this.userAgent;let{signal:i}=n,o=this.ctx.get(yr).connection,a=(0,H$e.randomUUID)(),l=new pn.CancellationTokenSource,c=new V$e.PassThrough,u=s(()=>{o.sendRequest(nGt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new Gz("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof k$e))throw new PA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new Gz("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(iGt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new PA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new PA("Request timed out from lsp server"))},n.timeout??tGt),y=s(()=>{h(new Gz("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(rGt,aGt(r,a,n),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,$$e.inspect)(v.data)}`),h(new PA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new PA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new xx(p.status,j$e.STATUS_CODES[p.status]??"",new R$e(p.headers),()=>sGt(c),()=>c)}};function sGt(t){return new Promise((e,r)=>{let n="";t.on("error",r),t.on("end",()=>e(n)),t.on("data",i=>n+=String(i))})}s(sGt,"consumeStream");function aGt(t,e,r){let{timeout:n,method:i}=r,o=r.headers??{},a=r.json?JSON.stringify(r.json):r.body;return r.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:n,method:i,workDoneToken:e}}s(aGt,"convertOptionsToParams");var lGt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function cGt(t,e,r){let n=new Ck(t),i=n.makeAbortController(),o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=r;l&&i.abort();let p=n.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof PA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof PA?y.message:String(y)}`},null]}}s(cGt,"handleTestingFetchChecked");var z$e=st(lGt,cGt);f();var uGt=I.Object({});async function dGt(t,e,r){return await t.get(va).flush(),["OK",null]}s(dGt,"handleTestingFlushPromiseQueueChecked");var Y$e=st(uGt,dGt);f();var fGt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function pGt(t,e,r){try{await t.get(AA).start();let n=t.get(IT),i=r.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await n.indexClient.getContext(r.filePath,r.code,r.offset,r.languageId,fD,e)}catch{}finally{l=(r.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(pGt,"handleTestingGetContextChecked");var K$e=st(fGt,pGt);f();var mGt=I.Object({uri:I.String()});async function hGt(t,e,r){let i=await t.get(Rr).getTextDocument(r);return[{uri:r.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(hGt,"handleGetDocumentChecked");var J$e=st(mGt,hGt);f();var gGt=I.Object({options:I.Optional(I.Object({}))});async function AGt(t,e,r){t.forceSet(mn,new eY),t.get(Qr).resetToken();try{await t.get(Qr).getToken()}catch{}return await new Promise(n=>setTimeout(n,0)),["OK",null]}s(AGt,"handleTestingNeverAuthChecked");var X$e=st(gGt,AGt);f();f();var Ome=class extends Q6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,r){return e.endsWith("telemetry")?Promise.resolve(N$e(200,this.fullConfig)):Promise.resolve(Nme(404,""))}},tY=class extends Ome{constructor(r,n){super(r);this.delegate=n}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(r,n){return r.endsWith("telemetry")?super.fetch(r,n):this.delegate.fetch(r,n)}makeAbortController(){return this.delegate.makeAbortController()}};var yGt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function CGt(t,e,r){if(r.expFlags){let n={AssignmentContext:"assignmentcontext",Parameters:{...r.expFlags}};t.forceSet(on,new tY(n,t.get(on)))}return["OK",null]}s(CGt,"handleTestingOverrideExpFlagsChecked");var Z$e=st(yGt,CGt);f();var xGt=I.Object({rules:aie});function vGt(t,e,r){let n=t.get(Kc);return n?(n.setTestingRules(r.rules),["OK",null]):[null,{code:$r.InternalError,message:"Could not set content exclusion rules"}]}s(vGt,"handleTestingSetContentExclusionRulesChecked");var eze=st(xGt,vGt);f();var bGt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(JR)),options:I.Optional(I.Object({}))});function EGt(t,e,r){return t.get(Gy).add(r.workDoneToken,r.chunks,r.followUp,r.suggestedTitle,r.skills,r.references),["OK",null]}s(EGt,"handleTestingSetSyntheticTurnsChecked");var tze=st(bGt,EGt);f();var IGt=I.Object({});async function TGt(t,e,r){let n=t.get(za),i=t.get($a);return await n.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(TGt,"handleTriggerShowMessageChecked");var rze=st(IGt,TGt);f();var wGt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function _Gt(t,e,r){return await O$e(t),t.forceSet(mn,new yk(t.get(Qr),r.githubAppId)),["OK",null]}s(_Gt,"handleTestingUseTestingTokenChecked");var nze=st(wGt,_Gt);f();var SGt=I.Object({});async function RGt(t,e,r){return await new UR().uninstall(t),["OK",null]}s(RGt,"handleUninstallChecked");var ize=st(SGt,RGt);f();var kGt=W4e;function BGt(t,e,r){let n=t.get(Da),i={unregistered:[],notUnregistered:[]};return r.providers.forEach(o=>{try{n.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(BGt,"unregisterContextProviders");var oze=st(kGt,BGt);f();var Ume=je(require("os"));var DGt=I.Object({expectedCertificate:I.String()});async function PGt(t,e,r){let i=(await fH(t).getAllRootCAs()).map(ak),o=ak(r.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Hpe(o)}. Only found those installed on the system:${Ume.EOL}${i.map(a=>"- "+Hpe(a)).join(Ume.EOL)}`},null]}s(PGt,"handleVerifyCertificateChecked");var sze=st(DGt,PGt);f();var NGt=I.Object({});async function LGt(){return[{status:!!await new zP().load()},null]}s(LGt,"handleVerifyKerberosChecked");var aze=st(NGt,LGt);f();var FGt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function MGt(t,e,r){let i=await t.get(Rr).getTextDocument(r);return i?i.getText()!==r.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${r.source}`},null]:i.version!==r.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${r.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${r.uri}>`},null]}s(MGt,"handleVerifyStateChecked");var lze=st(FGt,MGt);f();var QGt=I.Object({});function OGt(t,e,r){return[t.get(Rr).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(OGt,"handleVerifyWorkspaceStateChecked");var cze=st(QGt,OGt);var WT=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function uze(){let t=new Map;return t.set(Hje.method,jje),t.set(Vje.method,$je),t.set("getCompletions",Fje),t.set("getCompletionsCycling",Mje),t.set("getPanelCompletions",Uje),t.set(xje.method,vje),t.set("getVersion",qje),t.set("setEditorInfo",aVe),t.set("checkStatus",TWe),t.set("checkQuota",IWe),t.set("checkFileStatus",bWe),t.set("signInInitiate",Jpe),t.set("signIn",Jpe),t.set("signInConfirm",lVe),t.set("signInWithGithubToken",cVe),t.set("signOut",uVe),t.set("notifyShown",Xje),t.set("notifyAccepted",Kje),t.set("notifyRejected",Jje),t.set("telemetry/exception",dVe),t.set("textDocument/copilotInlineEdit",Yje),t.set("testing/overrideExpFlags",Z$e),t.set("testing/alwaysAuth",W$e),t.set("testing/neverAuth",X$e),t.set("testing/useTestingToken",nze),t.set("testing/setCompletionDocuments",Dje),t.set("testing/setPanelCompletionDocuments",yje),t.set("testing/triggerShowMessageRequest",rze),t.set("testing/flushPromiseQueue",Y$e),t.set("testing/getDocument",J$e),t.set("testing/chatml",G$e),t.set("testing/setSyntheticTurns",tze),t.set("testing/fetch",z$e),t.set("testing/setContentExclusionRules",eze),t.set("testing/setCopilotEditsResponse",sje),t.set("testing/getContext",K$e),t.set("uninstall",ize),t.set("debug/diagnostics",Tje),t.set("debug/listCertificates",zje),t.set("debug/verifyState",lze),t.set("debug/verifyCertificate",sze),t.set("debug/verifyKerberos",aze),t.set("debug/verifyWorkspaceState",cze),t.set("context/registerProviders",Zje),t.set("context/unregisterProviders",oze),t.set("conversation/preconditions",ZHe),t.set("conversation/persistence",KHe),t.set("conversation/create",zHe),t.set("conversation/turn",nje),t.set("conversation/turnDelete",ije),t.set("conversation/destroy",YHe),t.set("conversation/rating",eje),t.set("conversation/copyCode",BHe),t.set("conversation/insertCode",DHe),t.set("conversation/templates",rje),t.set("conversation/agents",kHe),t.set("conversation/registerTools",tje),t.set("copilot/models",pje),t.set("copilot/setModelPolicy",mje),t.set("copilot/codeReview",oje),t.set("git/commitGenerate",Wje),t.set("editConversation/create",aje),t.set("editConversation/turn",cje),t.set("editConversation/turnDelete",uje),t.set("editConversation/destroy",lje),t.set("mcp/getTools",dje),t.set("mcp/updateToolsStatus",fje),new WT(t)}s(uze,"getAllMethods");f();f();f();var dze=je(wm());var NA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new dze.NotificationType(this.name)}};var qme=class extends NA{constructor(){super(...arguments);this.name=Zee.method;this.params=fIe}static{s(this,"DidChangeAuthNotificationHandler")}handle(r){let n=this.ctx.get(mn);r?.handle&&r?.accessToken?n.setTransientSession({accessToken:r.accessToken,login:r.handle,githubAppId:r.githubAppId}):n.setTransientSession(null)}},fze=[qme];f();var Wme=class extends NA{constructor(){super(...arguments);this.name=ite.method;this.params=xIe}static{s(this,"DidShowCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],o=this.ctx.get(is).get(n);o&&c3e(this.ctx,o)}},Gme=class extends NA{constructor(){super(...arguments);this.name=ate.method;this.params=TIe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(r){let n=r.item.command.arguments[0];await this.ctx.get(sh).handleShown(n)}},Hme=class extends NA{constructor(){super(...arguments);this.name=ote.method;this.params=vIe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(r){let n=r.item.command.arguments[0],i=r.acceptedLength,o=this.ctx.get(is),a=o.get(n);a&&(o.delete(n),i>=a.insertText.length?Bq(this.ctx,a):u3e(this.ctx,a,i))}},pze=[Wme,Gme,Hme];f();var rY=class extends NA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(r){this.ctx.get(Yu).cancel(r.token)}};var UGt=[...fze,...pze,rY];function mze(t,e){for(let r of UGt){let n=new r(t),i=ms.Compile(n.params);e.onNotification(n.type,Eu(t,async o=>{Ly(o),i.Check(o)?await n.handle(o):_c.error(t,`Notification ${n.name}:`,new Ic(i.Errors(o)))},`Notification ${n.name}`))}}s(mze,"registerNotifications");f();var gze=je(require("events")),nY=je(Sa());var hze=new _t("AgentTextDocumentConfiguration"),jme=class{constructor(e){this.ctx=e;this.emitter=new gze.default}static{s(this,"AgentTextDocumentsConfiguration")}create(e,r,n,i){try{return Q1.create(e,r,n,i)}catch(o){throw hze.exception(this.ctx,o,".create"),o}}update(e,r,n){try{let i=[];for(let a of r)if(nY.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:n},contentChanges:i};return this.emitter.emit("change",o),Q1.withChanges(e,r,n)}catch(i){throw hze.exception(this.ctx,i,".update"),i}}},Vb=class extends Rr{constructor(r){super(r);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((r,n,i)=>{let o=r.bind(n);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((r,n,i)=>(this.didFocusTextDocumentListeners.includes(r)||this.didFocusTextDocumentListeners.push(r),this.connection.onNotification(rte.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(l=>void l.call(n,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new jme(r),this._notebookDocuments=new nY.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(yr).connection}init(r){this.connection.onDidOpenTextDocument(n=>{let i=n.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(Ll(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(n=>{let i=n.textDocument,o=n.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=Ll(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(n=>{let i=Ll(n.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...r)}didChangeWorkspaceFolders(r){r.added.forEach(n=>this.registerWorkspaceFolder(n)),r.removed.forEach(n=>this.unregisterWorkspaceFolder(n))}unregisterWorkspaceFolder(r){let n=this.workspaceFolders.findIndex(i=>i.uri===r.uri);n>=0&&this.workspaceFolders.splice(n,1)}registerWorkspaceFolder(r){this.workspaceFolders.push(r)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(r){return this._documents.get(Ll(r.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(r){let n=this._notebookDocuments.findNotebookDocumentForCell(r.uri);if(n)return{getCells:s(()=>n.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=n.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(n.cells[o],o):void 0},"getCellFor")}}wrapCell(r,n){let i=this._notebookDocuments.getCellTextDocument(r);if(i)return{kind:r.kind,metadata:r.metadata??{},index:n,document:i}}};var Aze=ms.Compile(AIe);function Ly(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Ly(t[e]);else if(typeof t=="object"){let e=t;for(let r in e)e[r]===null?delete e[r]:e[r]=Ly(e[r])}return t}}s(Ly,"purgeNulls");var yr=class{constructor(e,r){this.ctx=e;this.connection=r;this.initialized=!1;this.#i=this.ctx.get($a)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,r=this.connection;r.onRequest(this.messageHandler.bind(this)),mze(e,r);let n={name:"GitHub Copilot Language Server",version:e.get(po).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await r.workspace.getConfiguration(["github.copilot",...zpe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of zpe)d[p]=u.shift();c.settings=d}return oVe(e,Ly(c))}catch(u){_c.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Vb).didChangeWorkspaceFolders(c),e.get(q0).emit(c)}catch(u){_c.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),r.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Ly(c.initializationOptions);if(d){if(!Aze.Check(d))throw new Ic(Aze.Errors(d));let g=d,y=e.get(fn);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):_c.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(_a).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Vb).init(c.workspaceFolders??[]),Ake(this.ctx),e.get(q0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Ho).setCapabilities(u),"openURL"in u&&xV(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,_c.info(e,`${n.name} ${n.version} initialized`),p&&r.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await R6(e),this.installationTelemetryTimer=setTimeout(()=>{new UR().startup(e).catch(()=>{})},1e3),e.get(Fy).emit(),await kke(e))},"onInitialized");return r.onInitialized(Eu(e,h,"onInitialized")),e.get(lh).init(),u?.token&&e.get(mn).setTransientSession(null),u?.redirectedTelemetry&&await xWe(e),yze.lt(process.versions.node,"20.8.0")&&_c.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:gh.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:pWe(e,r)},inlineCompletionProvider:{}},serverInfo:n}}),r.onShutdown(async()=>{await(this.#e??=this.deactivate())}),r.onExit(()=>void this.onExit()),r.onDidChangeConfiguration(Eu(e,o,"onDidChangeConfiguration")),r.listen();let l=new NV;this.ctx.forceSet($a,l)}async messageHandler(e,r,n){let i=this.ctx.get(WT).handlers.get(e);if(!i)return new gh.ResponseError($r.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new gh.ResponseError($r.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new gh.ResponseError($r.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!gWe(this.ctx.get(fn)))throw new gh.ResponseError($r.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(r)&&(r=r[0]),Ly(r);try{let[o,a]=await i(this.ctx,n,r);return a?new gh.ResponseError(a.code,a.message,a.data):o}catch(o){if(n.isCancellationRequested)return new gh.ResponseError($r.RequestCancelled,"Request was canceled");if(o instanceof ls)return new gh.ResponseError($r.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof gh.ResponseError||_c.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(ah).dispose()}catch(e){_c.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet($a,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),koe(e),await Promise.race([new Promise(r=>setTimeout(r,100)),e.get(va).flush()]),await Promise.race([new Promise(r=>setTimeout(r,1800)),e.get(Pl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},_c=new _t("lsp");var iY=class t extends y2{constructor(r){super(r);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(yr)}static mapProviderNameToNeighboringFileType(r){let n="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(r){case n:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(r){let n={entries:[],traits:r.traits};for(let i of r.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};n.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),ml.warn(this.context,`unknown providerName ${i.providerName}`))}return n}async getRelatedFilesResponse(r,n,i){ml.debug(this.context,`Fetching related files for ${r.uri}`);let o=this.context.get(Ho).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,n,o),!o)return ml.debug(this.context,"`copilot/related` not supported"),Cke;try{let a=await this.service.connection.sendRequest(lte.type,{textDocument:{uri:r.uri},data:r.data,telemetry:{properties:n.properties,measurements:n.measurements}},i);return this.convert(a)}catch(a){ml.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(r,n,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,Bt(r,"copilotRelated.hasRelatedCapability",n)}catch(o){ml.exception(r,o,"copilotRelated")}}};f();var Cze=je(Sa());var Vme=new _t("copilotTokenManager"),$me=class t extends PS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new Cze.ProtocolRequestType("copilot/token")}constructor(e,r=!1){super(e,r)}async fetchCopilotToken(){let e=this.ctx.get(yr).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let r=await e.sendRequest(t.RequestType,{force:!1});if(!r?.envelope)throw Vme.debug(this.ctx,"Envelope missing from copilot/token response"),new Qf({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:n,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=r;if(Vme.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new ls("Expired token in copilot/token response");if(i&&n){let u;if(l!==void 0){try{u=new URL(l).origin}catch{Vme.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(Fl).updateBaseUrlFromTokenEndpoint(this.ctx,l)}this.ctx.get(mn).setTransientSession({accessToken:n,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Qf({reason:"NotSignedIn"});let c=new TI(a,void 0);return ZB(this.ctx,c),c}catch(r){throw r instanceof Error?new ls(r.message,r):r}}},O6=class extends Qr{constructor(r,n=new PS(r,!0)){super();this.ctx=r;this.fallback=n;this.client=new $me(r,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Ho).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(r){this.getDelegate().resetToken(r)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var qGt=new _t("Public Code References"),oY=class extends I0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,r){let n=r.location?.start.line!==void 0?r.location.start.line+1:"-",i=r.location?.start.character!==void 0?r.location.start.character+1:"-",o=(r.matchingText??"").replace(/[\r\n]/g," ");qGt.info(e,`Text found matching public code in ${r.inDocumentUri} [Ln ${n}, Col ${i}] near ${o}...:`+r.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(r.version===void 0||r.location===void 0)&&e.get(Ho).getCapabilities().ipCodeCitation===!0&&await e.get(yr).connection.sendNotification(ete.type,{uri:r.inDocumentUri,version:r.version,range:r.location,matchingText:r.matchingText??"",citations:r.details})}};f();f();function xze(t){WGt(t)}s(xze,"activateExtensibilityPlatformFeature");function WGt(t){t.set(dh,new J$(t)),t.set(EA,new EA(t))}s(WGt,"registerContextDependencies");f();var vze=I.String(),zme=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(aY,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},aY="build-logs",sY=class extends Jl{static{s(this,"BuildLogsSkill")}constructor(e){super(aY,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,r=>new zme(r))}};f();var Yme=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let r=this.filterDirectoryReferences(e);if(r.length===0)return;let n=await rz(this.turnContext.ctx,this.turnContext.cancelationToken,r);if(n.length>0){let i=[[new St(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of n)i.push([new St([o]),1]);return new St(i)}}filterDirectoryReferences(e){return e.filter(r=>r.type==="directory")}},Kme=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},GGt="directory-references",lY=class{constructor(){this.id=GGt;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new Kme}processor(e){return new Yme(e)}};f();var HGt=I.Object({uri:I.String(),visibleRange:I.Optional(wa),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),bze=I.Object({files:I.Array(HGt)}),jGt=3,Jme=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let r=await this.getDocuments(e);if(r.length>0){let n=this.toElidableDocs(r),i=Lb(n,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let r=this.sortFiles(e.files);r=this.filterIncludedDocs(r);let n=this.turnContext.ctx.get(bn),i=[];for(let o of r){let a=await n.getOrReadTextDocument(o),l=ys(a);if(await this.turnContext.collectFile(uY,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===jGt))break}return i.reverse()}sortFiles(e){return e.sort((r,n)=>r.activeAt&&n.activeAt?new Date(r.activeAt).getTime()-new Date(n.activeAt).getTime():r.activeAt?-1:n.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(r=>!this.turnContext.isFileIncluded(r.uri))}toElidableDocs(e){return e.map(r=>{let[n,i]=r,o=this.turnContext.ctx.get(bn).getRelativePath(n),a=new IA(n,void 0,i.visibleRange);return new St([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let r=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,n=e.elide(Math.floor(r*.1)).getText();return new St([n])}},uY="recent-files",cY=class extends Jl{static{s(this,"RecentFilesSkill")}constructor(e){super(uY,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,r=>new Jme(r))}};f();var Eze=I.String(),Xme=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(fY,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},fY="runtime-logs",dY=class extends Jl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(fY,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,r=>new Xme(r))}};f();var pY=je(wm());var mY=class extends ol{constructor(r){super();this.ctx=r}static{s(this,"AgentConversationInspector")}shouldInspect(){return NL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(yr).connection}async inspectPrompt(r){return this.connection?.sendNotification(new pY.NotificationType("conversation/inspectPrompt"),r)}async inspectFetchResult(r){return this.connection?.sendNotification(new pY.NotificationType("conversation/inspectFetchResult"),r)}async documentDiff(r){return this.connection?.sendNotification(new pY.NotificationType("conversation/documentDiff"),r)}};f();var Ize=je(Sa());var U6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Rp).onChange(r=>{this.sendNotification(r)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(yr).connection.sendNotification(new Ize.NotificationType(this.notificationEndpoint),e)}};function Tze(t){VGt(t),$Gt(t),xze(t)}s(Tze,"activateConversationFeature");function VGt(t){t.set(Hi,new Hi(t)),t.set(Zl,new Zl),t.set(wc,new wc(t)),t.set(ra,new wH(t)),t.set(Gy,new Gy),t.set(ws,new ws(t)),t.set(Rp,new Rp(t)),t.set(U6,new U6(t)),t.set(Tu,new wM(t,new TM(t))),t.set(Hy,new Hy),t.set(Pb,new Pb),t.set(ol,new mY(t)),t.set(ha,new ha(t)),t.set(Tc,new Tc),t.set(ef,new ef)}s(VGt,"registerContextDependencies");function $Gt(t){let e=new Cl;e.registerSkill(new e$(new ZV(t))),e.registerSkill(new w$(new zu(t,kA,yHe))),e.registerSkill(new r$(new zu(t,ch,uGe))),e.registerSkill(new QV(new zu(t,lu,DWe))),e.registerSkill(new _$),e.registerSkill(new lY),e.registerSkill(new cY(new zu(t,uY,bze))),e.registerSkill(new OV(new zu(t,TA,NWe))),e.registerSkill(new i$(new zu(t,Fb,xGe))),e.registerSkill(new dY(new zu(t,fY,Eze))),e.registerSkill(new sY(new zu(t,aY,vze))),e.registerSkill(new s$(new zu(t,uh,vGe))),e.registerSkill(new a$(new zu(t,ST,EGe))),t.set(Cl,e)}s($Gt,"registerSkills");f();var wze=je(ii());var hY=class extends bc{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,r){await this.ctx.get(yr).connection.sendProgress(new wze.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...r}])}};f();var _ze=je(Sa()),Sze=je(wm());var gY=class extends iA{constructor(){super(...arguments);this.requestType=new _ze.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=ms.Compile(nUe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(r,n){let i=this.ctx.get(yr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[l,c]=a;if(c){let u=new Sze.ResponseError(c.code,c.message,c.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool confirmation ${n.name}`,u),new Error(`Failed to invoke client tool confirmation ${n.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return o}};f();var Rze=je(Sa()),kze=je(wm());var AY=class extends sb{constructor(){super(...arguments);this.requestType=new Rze.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=ms.Compile(rUe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(r,n){let i=this.ctx.get(yr).connection,o;try{let a=await i.sendRequest(this.requestType,n),[l,c]=a;if(c){let u=new kze.ResponseError(c.code,c.message,c.data);throw Ur.error(this.ctx,`ResponseError while invoking client tool ${n.name}`,u),new Error(`Failed to invoke client tool ${n.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${n.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${n.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(r){let n=r.content.map(i=>typeof i.value=="string"?new Ci(i.value):new xT(i.value));return new Gi(n,r.status??"success")}};f();f();function Bze(t,e,r){try{let n=t.get(Dt).javaContextProviderParams(r);if(n){let i=JSON.parse(n);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(n){return Mr.debug(t,"Failed to get the active Java experiments for the Context Provider API",n),!1}return!0}s(Bze,"fillInJavaActiveExperiments");var Zme=je(wm());var zGt={type:new Zme.NotificationType("featureFlagsNotification")},YGt={type:new Zme.NotificationType("copilot/didChangeFeatureFlags")},q6=class{constructor(e){this.ctx=e;ia(e,r=>this.sendNotification(r))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let r=this.ctx,n=r.get(Dt),i=await n.updateExPValuesAndAssignments(),o=n.ideEnableCopilotNewBilling(i),a={};r.get(Dt).excludeRelatedFiles(i)&&(a.ExcludeRelatedFiles=!0);let l=Tie(r,i);l.length>0&&(a.ExpContextProviders=l);let c=new Map;P4e(r,l,c,i),TU(r,c,i),Bze(r,c,i);for(let[p,m]of c.entries())a[p]=m;let u=r.get(Ho),d=r.get(yr).connection;if(u.getCapabilities().didChangeFeatureFlags)await d.sendNotification(YGt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:a,cnb:o});else{let p={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,cnb:o,ae:a};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(p.xc=!0),await d.sendNotification(zGt.type,p)}}};f();var yY=class extends Ki{constructor(r){super();this.ctx=r;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(r){let n=r.kind;r.busy&&n!=="Error"&&(n="InProgress"),this.ctx.get(yr).connection.sendNotification(cte.type,{busy:r.busy,kind:r.kind,status:n,message:r.message??""}),this.ctx.get(yr).connection.sendNotification("didChangeStatus",{busy:r.busy,kind:r.kind,message:r.message})}};f();var Dze=new Ak;f();f();f();f();var Oo=new _t("CopilotMCP");async function ehe(t,e){await t.get(Jm).notifyLog(e)}s(ehe,"notifyMCPRuntimeLog");async function LA(t,e){await ehe(t,{...e,level:"error"})}s(LA,"notifyMCPRuntimeError");async function GT(t,e){await ehe(t,{...e,level:"warning"})}s(GT,"notifyMCPRuntimeWarning");async function du(t,e){await ehe(t,{...e,level:"info"})}s(du,"notifyMCPRuntimeInfo");f();var the=/[^a-z0-9_-]/gi,KGt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function Pze(){let t={};for(let e of KGt){let r=process.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(Pze,"getDefaultEnvironment");async function Nze(t,e,r){if(!e.description){let n=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Oo.warn(t,n),await GT(t,{message:n,server:r,tool:e.name}),e.description="<empty>"}if(the.lastIndex=0,the.test(e.name)){let n=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Oo.warn(t,n),await GT(t,{message:n,server:r,tool:e.name}),e._nameForModel=e.name.replace(the,"_")}else e._nameForModel=e.name;return e}s(Nze,"normalizeTool");f();f();f();f();var ro;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function r(i){throw new Error}s(r,"assertNever"),t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(n,"joinValues"),t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(ro||(ro={}));var nhe;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(nhe||(nhe={}));var fr=ro.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xy=s(t=>{switch(typeof t){case"undefined":return fr.undefined;case"string":return fr.string;case"number":return isNaN(t)?fr.nan:fr.number;case"boolean":return fr.boolean;case"function":return fr.function;case"bigint":return fr.bigint;case"symbol":return fr.symbol;case"object":return Array.isArray(t)?fr.array:t===null?fr.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?fr.promise:typeof Map<"u"&&t instanceof Map?fr.map:typeof Set<"u"&&t instanceof Set?fr.set:typeof Date<"u"&&t instanceof Date?fr.date:fr.object;default:return fr.unknown}},"getParsedType"),Rt=ro.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),JGt=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),rf=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ro.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};rf.create=t=>new rf(t);var Ek=s((t,e)=>{let r;switch(t.code){case Rt.invalid_type:t.received===fr.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Rt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ro.jsonStringifyReplacer)}`;break;case Rt.unrecognized_keys:r=`Unrecognized key(s) in object: ${ro.joinValues(t.keys,", ")}`;break;case Rt.invalid_union:r="Invalid input";break;case Rt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ro.joinValues(t.options)}`;break;case Rt.invalid_enum_value:r=`Invalid enum value. Expected ${ro.joinValues(t.options)}, received '${t.received}'`;break;case Rt.invalid_arguments:r="Invalid function arguments";break;case Rt.invalid_return_type:r="Invalid function return type";break;case Rt.invalid_date:r="Invalid date";break;case Rt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ro.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Rt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Rt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Rt.custom:r="Invalid input";break;case Rt.invalid_intersection_types:r="Intersection results could not be merged";break;case Rt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Rt.not_finite:r="Number must be finite";break;default:r=e.defaultError,ro.assertNever(t)}return{message:r}},"errorMap"),Qze=Ek;function XGt(t){Qze=t}s(XGt,"setErrorMap");function CY(){return Qze}s(CY,"getErrorMap");var xY=s(t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),ZGt=[];function tr(t,e){let r=CY(),n=xY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ek?void 0:Ek].filter(i=>!!i)});t.common.issues.push(n)}s(tr,"addIssueToContext");var fu=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Mn;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Mn;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},Mn=Object.freeze({status:"aborted"}),bk=s(t=>({status:"dirty",value:t}),"DIRTY"),Ku=s(t=>({status:"valid",value:t}),"OK"),ihe=s(t=>t.status==="aborted","isAborted"),ohe=s(t=>t.status==="dirty","isDirty"),HT=s(t=>t.status==="valid","isValid"),H6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function vY(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}s(vY,"__classPrivateFieldGet");function Oze(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}s(Oze,"__classPrivateFieldSet");var Pr;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Pr||(Pr={}));var W6,G6,Np=class{static{s(this,"ParseInputLazyPath")}constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Lze=s((t,e)=>{if(HT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new rf(t.common.issues);return this._error=r,this._error}}},"handleResult");function ti(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??n)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ti,"processCreateParams");var ri=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Xy(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fu,ctx:{common:e.parent.common,data:e.data,parsedType:Xy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(H6(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return Lze(i,o)}"~validate"(e){var r,n;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return HT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((n=(r=o?.message)===null||r===void 0?void 0:r.toLowerCase())===null||n===void 0)&&n.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>HT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xy(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(H6(i)?i:Promise.resolve(i));return Lze(n,o)}refine(e,r){let n=s(i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:Rt.custom,...n(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new nf({schema:this,typeName:Dn.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(r=>this["~validate"](r),"validate")}}optional(){return Pp.create(this,this._def)}nullable(){return MA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eC.create(this)}promise(){return Yb.create(this,this._def)}or(e){return JT.create([this,e],this._def)}and(e){return XT.create(this,e,this._def)}transform(e){return new nf({...ti(this._def),schema:this,typeName:Dn.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new nw({...ti(this._def),innerType:this,defaultValue:r,typeName:Dn.ZodDefault})}brand(){return new j6({typeName:Dn.ZodBranded,type:this,...ti(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new iw({...ti(this._def),innerType:this,catchValue:r,typeName:Dn.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return V6.create(this,e)}readonly(){return ow.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},eHt=/^c[^\s-]{8,}$/i,tHt=/^[0-9a-z]+$/,rHt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nHt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iHt=/^[a-z0-9_-]{21}$/i,oHt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sHt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aHt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lHt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",rhe,cHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,dHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pHt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,mHt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Uze="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hHt=new RegExp(`^${Uze}$`);function qze(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(qze,"timeRegexSource");function gHt(t){return new RegExp(`^${qze(t)}$`)}s(gHt,"timeRegex");function Wze(t){let e=`${Uze}T${qze(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}s(Wze,"datetimeRegex");function AHt(t,e){return!!((e==="v4"||!e)&&cHt.test(t)||(e==="v6"||!e)&&dHt.test(t))}s(AHt,"isValidIP");function yHt(t,e){if(!oHt.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(yHt,"isValidJWT");function CHt(t,e){return!!((e==="v4"||!e)&&uHt.test(t)||(e==="v6"||!e)&&fHt.test(t))}s(CHt,"isValidCidr");var $b=class t extends ri{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==fr.string){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_type,expected:fr.string,received:o.parsedType}),Mn}let n=new fu,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tr(i,{code:Rt.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tr(i,{code:Rt.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")aHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"email",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")rhe||(rhe=new RegExp(lHt,"u")),rhe.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"emoji",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")nHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"uuid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")iHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"nanoid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")eHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cuid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")tHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cuid2",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")rHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"ulid",code:Rt.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tr(i,{validation:"url",code:Rt.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"regex",code:Rt.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?Wze(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?hHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?gHt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?sHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"duration",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?AHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"ip",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?yHt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"jwt",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?CHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"cidr",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?pHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"base64",code:Rt.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?mHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tr(i,{validation:"base64url",code:Rt.invalid_string,message:o.message}),n.dirty()):ro.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Rt.invalid_string,...Pr.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Pr.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Pr.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Pr.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Pr.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Pr.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Pr.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Pr.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Pr.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Pr.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Pr.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Pr.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Pr.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Pr.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...Pr.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Pr.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Pr.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...Pr.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...Pr.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...Pr.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...Pr.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...Pr.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...Pr.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...Pr.errToObj(r)})}nonempty(e){return this.min(1,Pr.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};$b.create=t=>{var e;return new $b({checks:[],typeName:Dn.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};function xHt(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(xHt,"floatSafeRemainder");var jT=class t extends ri{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==fr.number){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_type,expected:fr.number,received:o.parsedType}),Mn}let n,i=new fu;for(let o of this._def.checks)o.kind==="int"?ro.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?xHt(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.not_finite,message:o.message}),i.dirty()):ro.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,Pr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Pr.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Pr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Pr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Pr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Pr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pr.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:Pr.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Pr.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Pr.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ro.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};jT.create=t=>new jT({checks:[],typeName:Dn.ZodNumber,coerce:t?.coerce||!1,...ti(t)});var VT=class t extends ri{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==fr.bigint)return this._getInvalidInput(e);let n,i=new fu;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),tr(n,{code:Rt.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):ro.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return tr(r,{code:Rt.invalid_type,expected:fr.bigint,received:r.parsedType}),Mn}gte(e,r){return this.setLimit("min",e,!0,Pr.toString(r))}gt(e,r){return this.setLimit("min",e,!1,Pr.toString(r))}lte(e,r){return this.setLimit("max",e,!0,Pr.toString(r))}lt(e,r){return this.setLimit("max",e,!1,Pr.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:Pr.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Pr.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Pr.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Pr.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Pr.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:Pr.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};VT.create=t=>{var e;return new VT({checks:[],typeName:Dn.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ti(t)})};var $T=class extends ri{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==fr.boolean){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.boolean,received:n.parsedType}),Mn}return Ku(e.data)}};$T.create=t=>new $T({typeName:Dn.ZodBoolean,coerce:t?.coerce||!1,...ti(t)});var zT=class t extends ri{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==fr.date){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_type,expected:fr.date,received:o.parsedType}),Mn}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tr(o,{code:Rt.invalid_date}),Mn}let n=new fu,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tr(i,{code:Rt.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):ro.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:Pr.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:Pr.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};zT.create=t=>new zT({checks:[],coerce:t?.coerce||!1,typeName:Dn.ZodDate,...ti(t)});var Ik=class extends ri{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==fr.symbol){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.symbol,received:n.parsedType}),Mn}return Ku(e.data)}};Ik.create=t=>new Ik({typeName:Dn.ZodSymbol,...ti(t)});var YT=class extends ri{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==fr.undefined){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.undefined,received:n.parsedType}),Mn}return Ku(e.data)}};YT.create=t=>new YT({typeName:Dn.ZodUndefined,...ti(t)});var KT=class extends ri{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==fr.null){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.null,received:n.parsedType}),Mn}return Ku(e.data)}};KT.create=t=>new KT({typeName:Dn.ZodNull,...ti(t)});var zb=class extends ri{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return Ku(e.data)}};zb.create=t=>new zb({typeName:Dn.ZodAny,...ti(t)});var Zy=class extends ri{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ku(e.data)}};Zy.create=t=>new Zy({typeName:Dn.ZodUnknown,...ti(t)});var Ah=class extends ri{static{s(this,"ZodNever")}_parse(e){let r=this._getOrReturnCtx(e);return tr(r,{code:Rt.invalid_type,expected:fr.never,received:r.parsedType}),Mn}};Ah.create=t=>new Ah({typeName:Dn.ZodNever,...ti(t)});var Tk=class extends ri{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==fr.undefined){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.void,received:n.parsedType}),Mn}return Ku(e.data)}};Tk.create=t=>new Tk({typeName:Dn.ZodVoid,...ti(t)});var eC=class t extends ri{static{s(this,"ZodArray")}_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==fr.array)return tr(r,{code:Rt.invalid_type,expected:fr.array,received:r.parsedType}),Mn;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(tr(r,{code:a?Rt.too_big:Rt.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(tr(r,{code:Rt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(tr(r,{code:Rt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new Np(r,a,r.path,l)))).then(a=>fu.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new Np(r,a,r.path,l)));return fu.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:Pr.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:Pr.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:Pr.toString(r)}})}nonempty(e){return this.min(1,e)}};eC.create=(t,e)=>new eC({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Dn.ZodArray,...ti(e)});function vk(t){if(t instanceof Vd){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Pp.create(vk(n))}return new Vd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof eC?new eC({...t._def,type:vk(t.element)}):t instanceof Pp?Pp.create(vk(t.unwrap())):t instanceof MA?MA.create(vk(t.unwrap())):t instanceof FA?FA.create(t.items.map(e=>vk(e))):t}s(vk,"deepPartialify");var Vd=class t extends ri{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=ro.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==fr.object){let u=this._getOrReturnCtx(e);return tr(u,{code:Rt.invalid_type,expected:fr.object,received:u.parsedType}),Mn}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ah&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Np(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Ah){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tr(i,{code:Rt.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Np(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>fu.mergeObjectSync(n,u)):fu.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return Pr.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((r,n)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=Pr.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Dn.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return ro.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}omit(e){let r={};return ro.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:s(()=>r,"shape")})}deepPartial(){return vk(this)}partial(e){let r={};return ro.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:s(()=>r,"shape")})}required(e){let r={};return ro.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Pp;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:s(()=>r,"shape")})}keyof(){return Gze(ro.objectKeys(this.shape))}};Vd.create=(t,e)=>new Vd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:Ah.create(),typeName:Dn.ZodObject,...ti(e)});Vd.strictCreate=(t,e)=>new Vd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:Ah.create(),typeName:Dn.ZodObject,...ti(e)});Vd.lazycreate=(t,e)=>new Vd({shape:t,unknownKeys:"strip",catchall:Ah.create(),typeName:Dn.ZodObject,...ti(e)});var JT=class extends ri{static{s(this,"ZodUnion")}_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new rf(l.ctx.common.issues));return tr(r,{code:Rt.invalid_union,unionErrors:a}),Mn}if(s(i,"handleResults"),r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new rf(c));return tr(r,{code:Rt.invalid_union,unionErrors:l}),Mn}}get options(){return this._def.options}};JT.create=(t,e)=>new JT({options:t,typeName:Dn.ZodUnion,...ti(e)});var Jy=s(t=>t instanceof ZT?Jy(t.schema):t instanceof nf?Jy(t.innerType()):t instanceof ew?[t.value]:t instanceof tw?t.options:t instanceof rw?ro.objectValues(t.enum):t instanceof nw?Jy(t._def.innerType):t instanceof YT?[void 0]:t instanceof KT?[null]:t instanceof Pp?[void 0,...Jy(t.unwrap())]:t instanceof MA?[null,...Jy(t.unwrap())]:t instanceof j6||t instanceof ow?Jy(t.unwrap()):t instanceof iw?Jy(t._def.innerType):[],"getDiscriminator"),bY=class t extends ri{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.object)return tr(r,{code:Rt.invalid_type,expected:fr.object,received:r.parsedType}),Mn;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(tr(r,{code:Rt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Mn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Jy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:Dn.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ti(n)})}};function she(t,e){let r=Xy(t),n=Xy(e);if(t===e)return{valid:!0,data:t};if(r===fr.object&&n===fr.object){let i=ro.objectKeys(e),o=ro.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=she(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(r===fr.array&&n===fr.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=she(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return r===fr.date&&n===fr.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(she,"mergeValues");var XT=class extends ri{static{s(this,"ZodIntersection")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=s((o,a)=>{if(ihe(o)||ihe(a))return Mn;let l=she(o.value,a.value);return l.valid?((ohe(o)||ohe(a))&&r.dirty(),{status:r.value,value:l.data}):(tr(n,{code:Rt.invalid_intersection_types}),Mn)},"handleParsed");return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};XT.create=(t,e,r)=>new XT({left:t,right:e,typeName:Dn.ZodIntersection,...ti(r)});var FA=class t extends ri{static{s(this,"ZodTuple")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.array)return tr(n,{code:Rt.invalid_type,expected:fr.array,received:n.parsedType}),Mn;if(n.data.length<this._def.items.length)return tr(n,{code:Rt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Mn;!this._def.rest&&n.data.length>this._def.items.length&&(tr(n,{code:Rt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Np(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>fu.mergeArray(r,a)):fu.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};FA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new FA({items:t,typeName:Dn.ZodTuple,rest:null,...ti(e)})};var EY=class t extends ri{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.object)return tr(n,{code:Rt.invalid_type,expected:fr.object,received:n.parsedType}),Mn;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new Np(n,l,n.path,l)),value:a._parse(new Np(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?fu.mergeObjectAsync(r,i):fu.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ri?new t({keyType:e,valueType:r,typeName:Dn.ZodRecord,...ti(n)}):new t({keyType:$b.create(),valueType:e,typeName:Dn.ZodRecord,...ti(r)})}},wk=class extends ri{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.map)return tr(n,{code:Rt.invalid_type,expected:fr.map,received:n.parsedType}),Mn;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,c],u)=>({key:i._parse(new Np(n,l,n.path,[u,"key"])),value:o._parse(new Np(n,c,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Mn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Mn;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};wk.create=(t,e,r)=>new wk({valueType:e,keyType:t,typeName:Dn.ZodMap,...ti(r)});var _k=class t extends ri{static{s(this,"ZodSet")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==fr.set)return tr(n,{code:Rt.invalid_type,expected:fr.set,received:n.parsedType}),Mn;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(tr(n,{code:Rt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(tr(n,{code:Rt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Mn;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}s(a,"finalizeSet");let l=[...n.data.values()].map((c,u)=>o._parse(new Np(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:Pr.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:Pr.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};_k.create=(t,e)=>new _k({valueType:t,minSize:null,maxSize:null,typeName:Dn.ZodSet,...ti(e)});var IY=class t extends ri{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.function)return tr(r,{code:Rt.invalid_type,expected:fr.function,received:r.parsedType}),Mn;function n(l,c){return xY({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,CY(),Ek].filter(u=>!!u),issueData:{code:Rt.invalid_arguments,argumentsError:c}})}s(n,"makeArgsIssue");function i(l,c){return xY({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,CY(),Ek].filter(u=>!!u),issueData:{code:Rt.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Yb){let l=this;return Ku(async function(...c){let u=new rf([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(n(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return Ku(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new rf([n(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new rf([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:FA.create(e).rest(Zy.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||FA.create([]).rest(Zy.create()),returns:r||Zy.create(),typeName:Dn.ZodFunction,...ti(n)})}},ZT=class extends ri{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ZT.create=(t,e)=>new ZT({getter:t,typeName:Dn.ZodLazy,...ti(e)});var ew=class extends ri{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return tr(r,{received:r.data,code:Rt.invalid_literal,expected:this._def.value}),Mn}return{status:"valid",value:e.data}}get value(){return this._def.value}};ew.create=(t,e)=>new ew({value:t,typeName:Dn.ZodLiteral,...ti(e)});function Gze(t,e){return new tw({values:t,typeName:Dn.ZodEnum,...ti(e)})}s(Gze,"createZodEnum");var tw=class t extends ri{static{s(this,"ZodEnum")}constructor(){super(...arguments),W6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return tr(r,{expected:ro.joinValues(n),received:r.parsedType,code:Rt.invalid_type}),Mn}if(vY(this,W6,"f")||Oze(this,W6,new Set(this._def.values),"f"),!vY(this,W6,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return tr(r,{received:r.data,code:Rt.invalid_enum_value,options:n}),Mn}return Ku(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};W6=new WeakMap;tw.create=Gze;var rw=class extends ri{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),G6.set(this,void 0)}_parse(e){let r=ro.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==fr.string&&n.parsedType!==fr.number){let i=ro.objectValues(r);return tr(n,{expected:ro.joinValues(i),received:n.parsedType,code:Rt.invalid_type}),Mn}if(vY(this,G6,"f")||Oze(this,G6,new Set(ro.getValidEnumValues(this._def.values)),"f"),!vY(this,G6,"f").has(e.data)){let i=ro.objectValues(r);return tr(n,{received:n.data,code:Rt.invalid_enum_value,options:i}),Mn}return Ku(e.data)}get enum(){return this._def.values}};G6=new WeakMap;rw.create=(t,e)=>new rw({values:t,typeName:Dn.ZodNativeEnum,...ti(e)});var Yb=class extends ri{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==fr.promise&&r.common.async===!1)return tr(r,{code:Rt.invalid_type,expected:fr.promise,received:r.parsedType}),Mn;let n=r.parsedType===fr.promise?r.data:Promise.resolve(r.data);return Ku(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Yb.create=(t,e)=>new Yb({type:t,typeName:Dn.ZodPromise,...ti(e)});var nf=class extends ri{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Dn.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tr(n,a),a.fatal?r.abort():r.dirty()},"addIssue"),get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return Mn;let c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Mn:c.status==="dirty"||r.value==="dirty"?bk(c.value):c});{if(r.value==="aborted")return Mn;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?Mn:l.status==="dirty"||r.value==="dirty"?bk(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Mn:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Mn:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!HT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>HT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);ro.assertNever(i)}};nf.create=(t,e,r)=>new nf({schema:t,typeName:Dn.ZodEffects,effect:e,...ti(r)});nf.createWithPreprocess=(t,e,r)=>new nf({schema:e,effect:{type:"preprocess",transform:t},typeName:Dn.ZodEffects,...ti(r)});var Pp=class extends ri{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===fr.undefined?Ku(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pp.create=(t,e)=>new Pp({innerType:t,typeName:Dn.ZodOptional,...ti(e)});var MA=class extends ri{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===fr.null?Ku(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};MA.create=(t,e)=>new MA({innerType:t,typeName:Dn.ZodNullable,...ti(e)});var nw=class extends ri{static{s(this,"ZodDefault")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===fr.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};nw.create=(t,e)=>new nw({innerType:t,typeName:Dn.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ti(e)});var iw=class extends ri{static{s(this,"ZodCatch")}_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return H6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new rf(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new rf(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};iw.create=(t,e)=>new iw({innerType:t,typeName:Dn.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ti(e)});var Sk=class extends ri{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==fr.nan){let n=this._getOrReturnCtx(e);return tr(n,{code:Rt.invalid_type,expected:fr.nan,received:n.parsedType}),Mn}return{status:"valid",value:e.data}}};Sk.create=t=>new Sk({typeName:Dn.ZodNaN,...ti(t)});var vHt=Symbol("zod_brand"),j6=class extends ri{static{s(this,"ZodBranded")}_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},V6=class t extends ri{static{s(this,"ZodPipeline")}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Mn:o.status==="dirty"?(r.dirty(),bk(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})},"handleAsync")();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Mn:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Dn.ZodPipeline})}},ow=class extends ri{static{s(this,"ZodReadonly")}_parse(e){let r=this._def.innerType._parse(e),n=s(i=>(HT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return H6(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};ow.create=(t,e)=>new ow({innerType:t,typeName:Dn.ZodReadonly,...ti(e)});function Fze(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}s(Fze,"cleanParams");function Hze(t,e={},r){return t?zb.create().superRefine((n,i)=>{var o,a;let l=t(n);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=Fze(e,n),m=(d=(u=p.fatal)!==null&&u!==void 0?u:r)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=Fze(e,n),u=(a=(o=c.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):zb.create()}s(Hze,"custom");var bHt={object:Vd.lazycreate},Dn;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Dn||(Dn={}));var EHt=s((t,e={message:`Input not instance of ${t.name}`})=>Hze(r=>r instanceof t,e),"instanceOfType"),jze=$b.create,Vze=jT.create,IHt=Sk.create,THt=VT.create,$ze=$T.create,wHt=zT.create,_Ht=Ik.create,SHt=YT.create,RHt=KT.create,kHt=zb.create,BHt=Zy.create,DHt=Ah.create,PHt=Tk.create,NHt=eC.create,LHt=Vd.create,FHt=Vd.strictCreate,MHt=JT.create,QHt=bY.create,OHt=XT.create,UHt=FA.create,qHt=EY.create,WHt=wk.create,GHt=_k.create,HHt=IY.create,jHt=ZT.create,VHt=ew.create,$Ht=tw.create,zHt=rw.create,YHt=Yb.create,Mze=nf.create,KHt=Pp.create,JHt=MA.create,XHt=nf.createWithPreprocess,ZHt=V6.create,ejt=s(()=>jze().optional(),"ostring"),tjt=s(()=>Vze().optional(),"onumber"),rjt=s(()=>$ze().optional(),"oboolean"),njt={string:s(t=>$b.create({...t,coerce:!0}),"string"),number:s(t=>jT.create({...t,coerce:!0}),"number"),boolean:s(t=>$T.create({...t,coerce:!0}),"boolean"),bigint:s(t=>VT.create({...t,coerce:!0}),"bigint"),date:s(t=>zT.create({...t,coerce:!0}),"date")},ijt=Mn,K=Object.freeze({__proto__:null,defaultErrorMap:Ek,setErrorMap:XGt,getErrorMap:CY,makeIssue:xY,EMPTY_PATH:ZGt,addIssueToContext:tr,ParseStatus:fu,INVALID:Mn,DIRTY:bk,OK:Ku,isAborted:ihe,isDirty:ohe,isValid:HT,isAsync:H6,get util(){return ro},get objectUtil(){return nhe},ZodParsedType:fr,getParsedType:Xy,ZodType:ri,datetimeRegex:Wze,ZodString:$b,ZodNumber:jT,ZodBigInt:VT,ZodBoolean:$T,ZodDate:zT,ZodSymbol:Ik,ZodUndefined:YT,ZodNull:KT,ZodAny:zb,ZodUnknown:Zy,ZodNever:Ah,ZodVoid:Tk,ZodArray:eC,ZodObject:Vd,ZodUnion:JT,ZodDiscriminatedUnion:bY,ZodIntersection:XT,ZodTuple:FA,ZodRecord:EY,ZodMap:wk,ZodSet:_k,ZodFunction:IY,ZodLazy:ZT,ZodLiteral:ew,ZodEnum:tw,ZodNativeEnum:rw,ZodPromise:Yb,ZodEffects:nf,ZodTransformer:nf,ZodOptional:Pp,ZodNullable:MA,ZodDefault:nw,ZodCatch:iw,ZodNaN:Sk,BRAND:vHt,ZodBranded:j6,ZodPipeline:V6,ZodReadonly:ow,custom:Hze,Schema:ri,ZodSchema:ri,late:bHt,get ZodFirstPartyTypeKind(){return Dn},coerce:njt,any:kHt,array:NHt,bigint:THt,boolean:$ze,date:wHt,discriminatedUnion:QHt,effect:Mze,enum:$Ht,function:HHt,instanceof:EHt,intersection:OHt,lazy:jHt,literal:VHt,map:WHt,nan:IHt,nativeEnum:zHt,never:DHt,null:RHt,nullable:JHt,number:Vze,object:LHt,oboolean:rjt,onumber:tjt,optional:KHt,ostring:ejt,pipeline:ZHt,preprocess:XHt,promise:YHt,record:qHt,set:GHt,strictObject:FHt,string:jze,symbol:_Ht,transformer:Mze,tuple:UHt,undefined:SHt,union:MHt,unknown:BHt,void:PHt,NEVER:ijt,ZodIssueCode:Rt,quotelessJson:JGt,ZodError:rf});var $6="2025-03-26",zze=[$6,"2024-11-05","2024-10-07"],TY="2.0",Yze=K.union([K.string(),K.number().int()]),Kze=K.string(),ojt=K.object({progressToken:K.optional(Yze)}).passthrough(),yh=K.object({_meta:K.optional(ojt)}).passthrough(),of=K.object({method:K.string(),params:K.optional(yh)}),z6=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),QA=K.object({method:K.string(),params:K.optional(z6)}),Ch=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),wY=K.union([K.string(),K.number().int()]),Jze=K.object({jsonrpc:K.literal(TY),id:wY}).merge(of).strict(),_Y=s(t=>Jze.safeParse(t).success,"isJSONRPCRequest"),Xze=K.object({jsonrpc:K.literal(TY)}).merge(QA).strict(),Zze=s(t=>Xze.safeParse(t).success,"isJSONRPCNotification"),eYe=K.object({jsonrpc:K.literal(TY),id:wY,result:Ch}).strict(),Y6=s(t=>eYe.safeParse(t).success,"isJSONRPCResponse"),Kb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(Kb||(Kb={}));var tYe=K.object({jsonrpc:K.literal(TY),id:wY,error:K.object({code:K.number().int(),message:K.string(),data:K.optional(K.unknown())})}).strict(),rYe=s(t=>tYe.safeParse(t).success,"isJSONRPCError"),Jb=K.union([Jze,Xze,eYe,tYe]),aw=Ch.strict(),SY=QA.extend({method:K.literal("notifications/cancelled"),params:z6.extend({requestId:wY,reason:K.string().optional()})}),nYe=K.object({name:K.string(),version:K.string()}).passthrough(),sjt=K.object({experimental:K.optional(K.object({}).passthrough()),sampling:K.optional(K.object({}).passthrough()),roots:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),ajt=of.extend({method:K.literal("initialize"),params:yh.extend({protocolVersion:K.string(),capabilities:sjt,clientInfo:nYe})});var ljt=K.object({experimental:K.optional(K.object({}).passthrough()),logging:K.optional(K.object({}).passthrough()),completions:K.optional(K.object({}).passthrough()),prompts:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough()),resources:K.optional(K.object({subscribe:K.optional(K.boolean()),listChanged:K.optional(K.boolean())}).passthrough()),tools:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),ahe=Ch.extend({protocolVersion:K.string(),capabilities:ljt,serverInfo:nYe,instructions:K.optional(K.string())}),iYe=QA.extend({method:K.literal("notifications/initialized")}),oYe=s(t=>iYe.safeParse(t).success,"isInitializedNotification"),RY=of.extend({method:K.literal("ping")}),cjt=K.object({progress:K.number(),total:K.optional(K.number())}).passthrough(),kY=QA.extend({method:K.literal("notifications/progress"),params:z6.merge(cjt).extend({progressToken:Yze})}),BY=of.extend({params:yh.extend({cursor:K.optional(Kze)}).optional()}),DY=Ch.extend({nextCursor:K.optional(Kze)}),sYe=K.object({uri:K.string(),mimeType:K.optional(K.string())}).passthrough(),aYe=sYe.extend({text:K.string()}),lYe=sYe.extend({blob:K.string().base64()}),ujt=K.object({uri:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),djt=K.object({uriTemplate:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),fjt=BY.extend({method:K.literal("resources/list")}),lhe=DY.extend({resources:K.array(ujt)}),pjt=BY.extend({method:K.literal("resources/templates/list")}),che=DY.extend({resourceTemplates:K.array(djt)}),mjt=of.extend({method:K.literal("resources/read"),params:yh.extend({uri:K.string()})}),uhe=Ch.extend({contents:K.array(K.union([aYe,lYe]))}),hjt=QA.extend({method:K.literal("notifications/resources/list_changed")}),gjt=of.extend({method:K.literal("resources/subscribe"),params:yh.extend({uri:K.string()})}),Ajt=of.extend({method:K.literal("resources/unsubscribe"),params:yh.extend({uri:K.string()})}),yjt=QA.extend({method:K.literal("notifications/resources/updated"),params:z6.extend({uri:K.string()})}),Cjt=K.object({name:K.string(),description:K.optional(K.string()),required:K.optional(K.boolean())}).passthrough(),xjt=K.object({name:K.string(),description:K.optional(K.string()),arguments:K.optional(K.array(Cjt))}).passthrough(),vjt=BY.extend({method:K.literal("prompts/list")}),dhe=DY.extend({prompts:K.array(xjt)}),bjt=of.extend({method:K.literal("prompts/get"),params:yh.extend({name:K.string(),arguments:K.optional(K.record(K.string()))})}),PY=K.object({type:K.literal("text"),text:K.string()}).passthrough(),NY=K.object({type:K.literal("image"),data:K.string().base64(),mimeType:K.string()}).passthrough(),LY=K.object({type:K.literal("audio"),data:K.string().base64(),mimeType:K.string()}).passthrough(),cYe=K.object({type:K.literal("resource"),resource:K.union([aYe,lYe])}).passthrough(),Ejt=K.object({role:K.enum(["user","assistant"]),content:K.union([PY,NY,LY,cYe])}).passthrough(),fhe=Ch.extend({description:K.optional(K.string()),messages:K.array(Ejt)}),K6=QA.extend({method:K.literal("notifications/prompts/list_changed")}),Ijt=K.object({title:K.optional(K.string()),readOnlyHint:K.optional(K.boolean()),destructiveHint:K.optional(K.boolean()),idempotentHint:K.optional(K.boolean()),openWorldHint:K.optional(K.boolean())}).passthrough(),Tjt=K.object({name:K.string(),description:K.optional(K.string()),inputSchema:K.object({type:K.literal("object"),properties:K.optional(K.object({}).passthrough())}).passthrough(),annotations:K.optional(Ijt)}).passthrough(),wjt=BY.extend({method:K.literal("tools/list")}),phe=DY.extend({tools:K.array(Tjt)}),FY=Ch.extend({content:K.array(K.union([PY,NY,LY,cYe])),isError:K.boolean().default(!1).optional()}),_ci=FY.or(Ch.extend({toolResult:K.unknown()})),_jt=of.extend({method:K.literal("tools/call"),params:yh.extend({name:K.string(),arguments:K.optional(K.record(K.unknown()))})}),J6=QA.extend({method:K.literal("notifications/tools/list_changed")}),uYe=K.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),Sjt=of.extend({method:K.literal("logging/setLevel"),params:yh.extend({level:uYe})}),mhe=QA.extend({method:K.literal("notifications/message"),params:z6.extend({level:uYe,logger:K.optional(K.string()),data:K.unknown()})}),Rjt=K.object({name:K.string().optional()}).passthrough(),kjt=K.object({hints:K.optional(K.array(Rjt)),costPriority:K.optional(K.number().min(0).max(1)),speedPriority:K.optional(K.number().min(0).max(1)),intelligencePriority:K.optional(K.number().min(0).max(1))}).passthrough(),Bjt=K.object({role:K.enum(["user","assistant"]),content:K.union([PY,NY,LY])}).passthrough(),Djt=of.extend({method:K.literal("sampling/createMessage"),params:yh.extend({messages:K.array(Bjt),systemPrompt:K.optional(K.string()),includeContext:K.optional(K.enum(["none","thisServer","allServers"])),temperature:K.optional(K.number()),maxTokens:K.number().int(),stopSequences:K.optional(K.array(K.string())),metadata:K.optional(K.object({}).passthrough()),modelPreferences:K.optional(kjt)})}),Pjt=Ch.extend({model:K.string(),stopReason:K.optional(K.enum(["endTurn","stopSequence","maxTokens"]).or(K.string())),role:K.enum(["user","assistant"]),content:K.discriminatedUnion("type",[PY,NY,LY])}),Njt=K.object({type:K.literal("ref/resource"),uri:K.string()}).passthrough(),Ljt=K.object({type:K.literal("ref/prompt"),name:K.string()}).passthrough(),Fjt=of.extend({method:K.literal("completion/complete"),params:yh.extend({ref:K.union([Ljt,Njt]),argument:K.object({name:K.string(),value:K.string()}).passthrough()})}),hhe=Ch.extend({completion:K.object({values:K.array(K.string()).max(100),total:K.optional(K.number().int()),hasMore:K.optional(K.boolean())}).passthrough()}),Mjt=K.object({uri:K.string().startsWith("file://"),name:K.optional(K.string())}).passthrough(),Qjt=of.extend({method:K.literal("roots/list")}),Ojt=Ch.extend({roots:K.array(Mjt)}),Ujt=QA.extend({method:K.literal("notifications/roots/list_changed")}),Sci=K.union([RY,ajt,Fjt,Sjt,bjt,vjt,fjt,pjt,mjt,gjt,Ajt,_jt,wjt]),Rci=K.union([SY,kY,iYe,Ujt]),kci=K.union([aw,Pjt,Ojt]),Bci=K.union([RY,Djt,Qjt]),Dci=K.union([SY,kY,mhe,yjt,hjt,J6,K6]),Pci=K.union([aw,ahe,hhe,fhe,dhe,lhe,che,uhe,FY,phe]),sw=class extends Error{static{s(this,"McpError")}constructor(e,r,n){super(`MCP error ${e}: ${r}`),this.code=e,this.data=n,this.name="McpError"}};var qjt=6e4,MY=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(SY,r=>{let n=this._requestHandlerAbortControllers.get(r.params.requestId);n?.abort(r.params.reason)}),this.setNotificationHandler(kY,r=>{this._onprogress(r)}),this.setRequestHandler(RY,r=>({}))}_setupTimeout(e,r,n,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,r),startTime:Date.now(),timeout:r,maxTotalTimeout:n,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let r=this._timeoutInfo.get(e);if(!r)return!1;let n=Date.now()-r.startTime;if(r.maxTotalTimeout&&n>=r.maxTotalTimeout)throw this._timeoutInfo.delete(e),new sw(Kb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:r.maxTotalTimeout,totalElapsed:n});return clearTimeout(r.timeoutId),r.timeoutId=setTimeout(r.onTimeout,r.timeout),!0}_cleanupTimeout(e){let r=this._timeoutInfo.get(e);r&&(clearTimeout(r.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=r=>{this._onerror(r)},this._transport.onmessage=(r,n)=>{Y6(r)||rYe(r)?this._onresponse(r):_Y(r)?this._onrequest(r,n):Zze(r)?this._onnotification(r):this._onerror(new Error(`Unknown message type: ${JSON.stringify(r)}`))},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let n=new sw(Kb.ConnectionClosed,"Connection closed");for(let i of r.values())i(n)}_onerror(e){var r;(r=this.onerror)===null||r===void 0||r.call(this,e)}_onnotification(e){var r;let n=(r=this._notificationHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackNotificationHandler;n!==void 0&&Promise.resolve().then(()=>n(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,r){var n,i,o,a;let l=(n=this._requestHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:Kb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:r?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:Kb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:r,...n}=e.params,i=Number(r),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(n)}_onresponse(e){let r=Number(e.id),n=this._responseHandlers.get(r);if(n===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(r),this._progressHandlers.delete(r),this._cleanupTimeout(r),Y6(e))n(e);else{let i=new sw(e.error.code,e.error.message,e.error.data);n(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,r,n){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=n??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=n?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};n?.onprogress&&(this._progressHandlers.set(g,n.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(B=>this._onerror(new Error(`Failed to send cancellation: ${B}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=n?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let B=r.parse(_.result);l(B)}catch(B){c(B)}}}),(p=n?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=n?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=n?.timeout)!==null&&m!==void 0?m:qjt,E=s(()=>v(new sw(Kb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,n?.maxTotalTimeout,E,(h=n?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,r){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let n={...e,jsonrpc:"2.0"};await this._transport.send(n,r)}setRequestHandler(e,r){let n=e.shape.method.value;this.assertRequestHandlerCapability(n),this._requestHandlers.set(n,(i,o)=>Promise.resolve(r(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,r){this._notificationHandlers.set(e.shape.method.value,n=>Promise.resolve(r(e.parse(n))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function dYe(t,e){return Object.entries(e).reduce((r,[n,i])=>(i&&typeof i=="object"?r[n]=r[n]?{...r[n],...i}:i:r[n]=i,r),{...t})}s(dYe,"mergeCapabilities");var QY=class extends MY{static{s(this,"Client")}constructor(e,r){var n;super(r),this._clientInfo=e,this._capabilities=(n=r?.capabilities)!==null&&n!==void 0?n:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=dYe(this._capabilities,e)}assertCapability(e,r){var n;if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n[e]))throw new Error(`Server does not support ${e} (required for ${r})`)}async connect(e,r){if(await super.connect(e),e.sessionId===void 0)try{let n=await this.request({method:"initialize",params:{protocolVersion:$6,capabilities:this._capabilities,clientInfo:this._clientInfo}},ahe,r);if(n===void 0)throw new Error(`Server sent invalid initialize result: ${n}`);if(!zze.includes(n.protocolVersion))throw new Error(`Server's protocol version is not supported: ${n.protocolVersion}`);this._serverCapabilities=n.capabilities,this._serverVersion=n.serverInfo,this._instructions=n.instructions,await this.notification({method:"notifications/initialized"})}catch(n){throw this.close(),n}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var r,n,i,o,a;switch(e){case"logging/setLevel":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var r;switch(e){case"notifications/roots/list_changed":if(!(!((r=this._capabilities.roots)===null||r===void 0)&&r.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},aw,e)}async complete(e,r){return this.request({method:"completion/complete",params:e},hhe,r)}async setLoggingLevel(e,r){return this.request({method:"logging/setLevel",params:{level:e}},aw,r)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},fhe,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},dhe,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},lhe,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},che,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},uhe,r)}async subscribeResource(e,r){return this.request({method:"resources/subscribe",params:e},aw,r)}async unsubscribeResource(e,r){return this.request({method:"resources/unsubscribe",params:e},aw,r)}async callTool(e,r=FY,n){return this.request({method:"tools/call",params:e},r,n)}async listTools(e,r){return this.request({method:"tools/list",params:e},phe,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var fYe=je(require("events"));var Xb=class{constructor(e,r,n){this.transport=null;this.emitter=new fYe.default;this.ctx=e,this.mcp=new QY({name:r,version:n},{capabilities:{roots:{listChanged:!0}}}),this.name=r}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let r=new Error("Failed to initialize transport");throw Oo.error(this.ctx,"Transport initialization failed:",r),r}this.addListeners();try{await this.mcp.connect(this.transport)}catch(r){throw Oo.error(this.ctx,"Connection failed:",r),await LA(this.ctx,{message:`Failed to connect to MCP server: ${r instanceof Error?r.message:String(r)}`,server:this.name}),r}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let r=await this.mcp.listTools();e=Promise.all(r.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await Nze(this.ctx,o,this.name),o}));let n=`Discovered ${r.tools.length} tools`;du(this.ctx,{message:n,server:this.name})}return e}async callTool(e,r){let n=new Gi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:r});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await LA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ci(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await LA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ci(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Oo.error(this.ctx,o),await LA(this.ctx,{message:o,server:this.name,tool:e}),n.content.push(new Ci(o))}return n}addListeners(){this.mcp.onclose=()=>{Oo.info(this.ctx,`MCP server ${this.name} connection closed.`),du(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Oo.error(this.ctx,`MCP server ${this.name} error:`,e),LA(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(mhe,e=>{let r=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(r=`${e.params.logger}: ${r}`),e.params?.level){case"debug":case"info":case"notice":Oo.info(this.ctx,`MCP server ${this.name} log:`,r),du(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"warning":Oo.warn(this.ctx,`MCP server ${this.name} log:`,r),GT(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Oo.error(this.ctx,`MCP server ${this.name} log:`,r),LA(this.ctx,{message:`Notification message: ${r}`,server:this.name});break;default:Oo.info(this.ctx,`MCP server ${this.name} log:`,r),du(this.ctx,{message:`Notification message: ${r}`,server:this.name});break}})}formatToolResult(e){let r=new Gi([],e.isError===!0?"error":"success");for(let n of e.content)n.type==="text"?r.content.push(new Ci(n.text)):(n.type==="image"||n.type==="audio")&&r.content.push(new CT({mimeType:n.mimeType,data:n.data}));return r}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();f();f();var OY=class extends Error{static{s(this,"ParseError")}constructor(e,r){super(e),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}};function ghe(t){}s(ghe,"noop");function UY(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=ghe,onError:r=ghe,onRetry:n=ghe,onComment:i}=t,o="",a=!0,l,c="",u="";function d(y){let v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[b,E]=Wjt(`${o}${v}`);for(let _ of b)p(_);o=E,a=!1}s(d,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),E=y[v+1]===" "?2:1,_=y.slice(v+E);m(b,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,v,b){switch(y){case"event":u=v;break;case"data":c=`${c}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?n(parseInt(v,10)):r(new OY(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:r(new OY(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}s(m,"processField");function h(){c.length>0&&e({id:l,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,l=void 0,c="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(UY,"createParser");function Wjt(t){let e=[],r="",n=0;for(;n<t.length;){let i=t.indexOf("\r",n),o=t.indexOf(`
`,n),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){r=t.slice(n);break}else{let l=t.slice(n,a);e.push(l),n=a+1,t[n-1]==="\r"&&t[n]===`
`&&n++}}return[e,r]}s(Wjt,"splitLines");var WY=class extends Event{static{s(this,"ErrorEvent")}constructor(e,r){var n,i;super(e),this.code=(n=r?.code)!=null?n:void 0,this.message=(i=r?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return n(pYe(this),r)}[Symbol.for("Deno.customInspect")](e,r){return e(pYe(this),r)}};function Gjt(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(Gjt,"syntaxError");function Ahe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(Ahe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${Ahe(t.cause)}`:t.message:`${t}`}s(Ahe,"flattenError");function pYe(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(pYe,"inspectableError");var hYe=s(t=>{throw TypeError(t)},"__typeError"),The=s((t,e,r)=>e.has(t)||hYe("Cannot "+r),"__accessCheck"),ki=s((t,e,r)=>(The(t,e,"read from private field"),r?r.call(t):e.get(t)),"__privateGet"),vl=s((t,e,r)=>e.has(t)?hYe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),"__privateAdd"),Us=s((t,e,r,n)=>(The(t,e,"write to private field"),e.set(t,r),r),"__privateSet"),tC=s((t,e,r)=>(The(t,e,"access private method"),r),"__privateMethod"),$d,lw,Rk,qY,GY,eN,Dk,tN,Zb,kk,Pk,Bk,X6,xh,yhe,Che,xhe,mYe,vhe,bhe,Z6,Ehe,Ihe,cw=class extends EventTarget{static{s(this,"EventSource")}constructor(e,r){var n,i;super(),vl(this,xh),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,vl(this,$d),vl(this,lw),vl(this,Rk),vl(this,qY),vl(this,GY),vl(this,eN),vl(this,Dk),vl(this,tN,null),vl(this,Zb),vl(this,kk),vl(this,Pk,null),vl(this,Bk,null),vl(this,X6,null),vl(this,Che,async o=>{var a;ki(this,kk).reset();let{body:l,redirected:c,status:u,headers:d}=o;if(u===204){tC(this,xh,Z6).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?Us(this,Rk,new URL(o.url)):Us(this,Rk,void 0),u!==200){tC(this,xh,Z6).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){tC(this,xh,Z6).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(ki(this,$d)===this.CLOSED)return;Us(this,$d,this.OPEN);let p=new Event("open");if((a=ki(this,X6))==null||a.call(this,p),this.dispatchEvent(p),typeof l!="object"||!l||!("getReader"in l)){tC(this,xh,Z6).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=l.getReader(),g=!0;do{let{done:y,value:v}=await h.read();v&&ki(this,kk).feed(m.decode(v,{stream:!y})),y&&(g=!1,ki(this,kk).reset(),tC(this,xh,Ehe).call(this))}while(g)}),vl(this,xhe,o=>{Us(this,Zb,void 0),!(o.name==="AbortError"||o.type==="aborted")&&tC(this,xh,Ehe).call(this,Ahe(o))}),vl(this,vhe,o=>{typeof o.id=="string"&&Us(this,tN,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:ki(this,Rk)?ki(this,Rk).origin:ki(this,lw).origin,lastEventId:o.id||""});ki(this,Bk)&&(!o.event||o.event==="message")&&ki(this,Bk).call(this,a),this.dispatchEvent(a)}),vl(this,bhe,o=>{Us(this,eN,o)}),vl(this,Ihe,()=>{Us(this,Dk,void 0),ki(this,$d)===this.CONNECTING&&tC(this,xh,yhe).call(this)});try{if(e instanceof URL)Us(this,lw,e);else if(typeof e=="string")Us(this,lw,new URL(e,Hjt()));else throw new Error("Invalid URL")}catch{throw Gjt("An invalid or illegal string was specified")}Us(this,kk,UY({onEvent:ki(this,vhe),onRetry:ki(this,bhe)})),Us(this,$d,this.CONNECTING),Us(this,eN,3e3),Us(this,GY,(n=r?.fetch)!=null?n:globalThis.fetch),Us(this,qY,(i=r?.withCredentials)!=null?i:!1),tC(this,xh,yhe).call(this)}get readyState(){return ki(this,$d)}get url(){return ki(this,lw).href}get withCredentials(){return ki(this,qY)}get onerror(){return ki(this,Pk)}set onerror(e){Us(this,Pk,e)}get onmessage(){return ki(this,Bk)}set onmessage(e){Us(this,Bk,e)}get onopen(){return ki(this,X6)}set onopen(e){Us(this,X6,e)}addEventListener(e,r,n){let i=r;super.addEventListener(e,i,n)}removeEventListener(e,r,n){let i=r;super.removeEventListener(e,i,n)}close(){ki(this,Dk)&&clearTimeout(ki(this,Dk)),ki(this,$d)!==this.CLOSED&&(ki(this,Zb)&&ki(this,Zb).abort(),Us(this,$d,this.CLOSED),Us(this,Zb,void 0))}};$d=new WeakMap,lw=new WeakMap,Rk=new WeakMap,qY=new WeakMap,GY=new WeakMap,eN=new WeakMap,Dk=new WeakMap,tN=new WeakMap,Zb=new WeakMap,kk=new WeakMap,Pk=new WeakMap,Bk=new WeakMap,X6=new WeakMap,xh=new WeakSet,yhe=s(function(){Us(this,$d,this.CONNECTING),Us(this,Zb,new AbortController),ki(this,GY)(ki(this,lw),tC(this,xh,mYe).call(this)).then(ki(this,Che)).catch(ki(this,xhe))},"connect_fn"),Che=new WeakMap,xhe=new WeakMap,mYe=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...ki(this,tN)?{"Last-Event-ID":ki(this,tN)}:void 0},cache:"no-store",signal:(t=ki(this,Zb))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),vhe=new WeakMap,bhe=new WeakMap,Z6=s(function(t,e){var r;ki(this,$d)!==this.CLOSED&&Us(this,$d,this.CLOSED);let n=new WY("error",{code:e,message:t});(r=ki(this,Pk))==null||r.call(this,n),this.dispatchEvent(n)},"failConnection_fn"),Ehe=s(function(t,e){var r;if(ki(this,$d)===this.CLOSED)return;Us(this,$d,this.CONNECTING);let n=new WY("error",{code:e,message:t});(r=ki(this,Pk))==null||r.call(this,n),this.dispatchEvent(n),Us(this,Dk,setTimeout(ki(this,Ihe),ki(this,eN)))},"scheduleReconnect_fn"),Ihe=new WeakMap,cw.CONNECTING=0,cw.OPEN=1,cw.CLOSED=2;function Hjt(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(Hjt,"getBaseURL");f();f();var whe;whe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function jjt(t){return(await whe).getRandomValues(new Uint8Array(t))}s(jjt,"getRandomValues");async function Vjt(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r="",n=await jjt(t);for(let i=0;i<t;i++){let o=n[i]%e.length;r+=e[o]}return r}s(Vjt,"random");async function $jt(t){return await Vjt(t)}s($jt,"generateVerifier");async function zjt(t){let e=await(await whe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(zjt,"generateChallenge");async function _he(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await $jt(t),r=await zjt(e);return{code_verifier:e,code_challenge:r}}s(_he,"pkceChallenge");f();var gYe=K.object({issuer:K.string(),authorization_endpoint:K.string(),token_endpoint:K.string(),registration_endpoint:K.string().optional(),scopes_supported:K.array(K.string()).optional(),response_types_supported:K.array(K.string()),response_modes_supported:K.array(K.string()).optional(),grant_types_supported:K.array(K.string()).optional(),token_endpoint_auth_methods_supported:K.array(K.string()).optional(),token_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),service_documentation:K.string().optional(),revocation_endpoint:K.string().optional(),revocation_endpoint_auth_methods_supported:K.array(K.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),introspection_endpoint:K.string().optional(),introspection_endpoint_auth_methods_supported:K.array(K.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),code_challenge_methods_supported:K.array(K.string()).optional()}).passthrough(),She=K.object({access_token:K.string(),token_type:K.string(),expires_in:K.number().optional(),scope:K.string().optional(),refresh_token:K.string().optional()}).strip(),hui=K.object({error:K.string(),error_description:K.string().optional(),error_uri:K.string().optional()}),Yjt=K.object({redirect_uris:K.array(K.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:K.string().optional(),grant_types:K.array(K.string()).optional(),response_types:K.array(K.string()).optional(),client_name:K.string().optional(),client_uri:K.string().optional(),logo_uri:K.string().optional(),scope:K.string().optional(),contacts:K.array(K.string()).optional(),tos_uri:K.string().optional(),policy_uri:K.string().optional(),jwks_uri:K.string().optional(),jwks:K.any().optional(),software_id:K.string().optional(),software_version:K.string().optional()}).strip(),Kjt=K.object({client_id:K.string(),client_secret:K.string().optional(),client_id_issued_at:K.number().optional(),client_secret_expires_at:K.number().optional()}).strip(),AYe=Yjt.merge(Kjt),gui=K.object({error:K.string(),error_description:K.string().optional()}).strip(),Aui=K.object({token:K.string(),token_type_hint:K.string().optional()}).strip();var zd=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function eE(t,{serverUrl:e,authorizationCode:r}){let n=await Jjt(e),i=await Promise.resolve(t.clientInformation());if(!i){if(r!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let c=await tVt(e,{metadata:n,clientMetadata:t.clientMetadata});await t.saveClientInformation(c),i=c}if(r!==void 0){let c=await t.codeVerifier(),u=await Zjt(e,{metadata:n,clientInformation:i,authorizationCode:r,codeVerifier:c,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let c=await eVt(e,{metadata:n,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(c),"AUTHORIZED"}catch(c){console.error("Could not refresh OAuth tokens:",c)}let{authorizationUrl:a,codeVerifier:l}=await Xjt(e,{metadata:n,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(l),await t.redirectToAuthorization(a),"REDIRECT"}s(eE,"auth");async function Jjt(t,e){var r;let n=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(n,{headers:{"MCP-Protocol-Version":(r=e?.protocolVersion)!==null&&r!==void 0?r:$6}})}catch(o){if(o instanceof TypeError)i=await fetch(n);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return gYe.parse(await i.json())}}s(Jjt,"discoverOAuthMetadata");async function Xjt(t,{metadata:e,clientInformation:r,redirectUrl:n}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let l=await _he(),c=l.code_verifier,u=l.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(n)),{authorizationUrl:a,codeVerifier:c}}s(Xjt,"startAuthorization");async function Zjt(t,{metadata:e,clientInformation:r,authorizationCode:n,codeVerifier:i,redirectUri:o}){let a="authorization_code",l;if(e){if(l=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else l=new URL("/token",t);let c=new URLSearchParams({grant_type:a,client_id:r.client_id,code:n,code_verifier:i,redirect_uri:String(o)});r.client_secret&&c.set("client_secret",r.client_secret);let u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return She.parse(await u.json())}s(Zjt,"exchangeAuthorization");async function eVt(t,{metadata:e,clientInformation:r,refreshToken:n}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:r.client_id,refresh_token:n});r.client_secret&&a.set("client_secret",r.client_secret);let l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return She.parse(await l.json())}s(eVt,"refreshAuthorization");async function tVt(t,{metadata:e,clientMetadata:r}){let n;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");n=new URL(e.registration_endpoint)}else n=new URL("/register",t);let i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return AYe.parse(await i.json())}s(tVt,"registerClient");var Rhe=class extends Error{static{s(this,"SseError")}constructor(e,r,n){super(`SSE error: ${r}`),this.code=e,this.event=n}},HY=class{static{s(this,"SSEClientTransport")}constructor(e,r){this._url=e,this._eventSourceInit=r?.eventSourceInit,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new zd("No auth provider");let r;try{r=await eE(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new zd;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(e.Authorization=`Bearer ${r.access_token}`)}return e}_startOrAuth(){return new Promise((e,r)=>{var n;this._eventSource=new cw(this._url.href,(n=this._eventSourceInit)!==null&&n!==void 0?n:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,r);return}let a=new Rhe(i.code,i.message,i);r(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(l){r(l),(o=this.onerror)===null||o===void 0||o.call(this,l),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let l=i,c;try{c=Jb.parse(JSON.parse(l.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,c)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new zd("No auth provider");if(await eE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new zd("Failed to authorize")}async close(){var e,r,n;(e=this._abortController)===null||e===void 0||e.abort(),(r=this._eventSource)===null||r===void 0||r.close(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e){var r,n,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(r=this._requestInit)===null||r===void 0?void 0:r.headers});a.set("content-type","application/json");let l={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},c=await fetch(this._endpoint,l);if(!c.ok){if(c.status===401&&this._authProvider){if(await eE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new zd;return this.send(e)}let u=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var jY=class extends Xb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(r){return new HY(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(J6,r=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(K6,r=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();f();var aKe=je(oKe(),1),rN=je(require("node:process"),1),lKe=require("node:stream");f();var $Y=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let r=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),SVt(r)}clear(){this._buffer=void 0}};function SVt(t){return Jb.parse(JSON.parse(t))}s(SVt,"deserializeMessage");function sKe(t){return JSON.stringify(t)+`
`}s(sKe,"serializeMessage");var RVt=rN.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function kVt(){let t={};for(let e of RVt){let r=rN.default.env[e];r!==void 0&&(r.startsWith("()")||(t[e]=r))}return t}s(kVt,"getDefaultEnvironment");var zY=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new $Y,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new lKe.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var n,i,o,a,l,c;this._process=(0,aKe.default)(this._serverParams.command,(n=this._serverParams.args)!==null&&n!==void 0?n:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:kVt(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:rN.default.platform==="win32"&&BVt(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}r(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,r;return this._stderrStream?this._stderrStream:(r=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&r!==void 0?r:null}processReadBuffer(){for(var e,r;;)try{let n=this._readBuffer.readMessage();if(n===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,n)}catch(n){(r=this.onerror)===null||r===void 0||r.call(this,n)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(r=>{var n;if(!(!((n=this._process)===null||n===void 0)&&n.stdin))throw new Error("Not connected");let i=sKe(e);this._process.stdin.write(i)?r():this._process.stdin.once("drain",r)})}};function BVt(){return"type"in rN.default}s(BVt,"isElectron");var YY=class extends Xb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(r){return r.env={...Pze(),...r.env||{}},r.stderr="pipe",new zY(r)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",r=>{GT(this.ctx,{message:`[server stderr] ${r.toString().trimEnd()}`,server:this.name})})}};f();f();f();var KY=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:r,onComment:n}={}){let i;super({start(o){i=UY({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:r,onComment:n})},transform(o){i.feed(o)}})}};var DVt={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},nN=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,r){super(`Streamable HTTP error: ${r}`),this.code=e}},JY=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,r){var n;this._url=e,this._requestInit=r?.requestInit,this._authProvider=r?.authProvider,this._sessionId=r?.sessionId,this._reconnectionOptions=(n=r?.reconnectionOptions)!==null&&n!==void 0?n:DVt}async _authThenStart(){var e;if(!this._authProvider)throw new zd("No auth provider");let r;try{r=await eE(this._authProvider,{serverUrl:this._url})}catch(n){throw(e=this.onerror)===null||e===void 0||e.call(this,n),n}if(r!=="AUTHORIZED")throw new zd;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let r={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(r.Authorization=`Bearer ${n.access_token}`)}return this._sessionId&&(r["mcp-session-id"]=this._sessionId),new Headers({...r,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var r,n;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(r=this._abortController)===null||r===void 0?void 0:r.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new nN(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(n=this.onerror)===null||n===void 0||n.call(this,o),o}}_getNextReconnectionDelay(e){let r=this._reconnectionOptions.initialReconnectionDelay,n=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(r*Math.pow(n,e),i)}_scheduleReconnection(e,r=0){var n;let i=this._reconnectionOptions.maxRetries;if(i>0&&r>=i){(n=this.onerror)===null||n===void 0||n.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(r);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,r+1)})},o)}_handleSseStream(e,r){if(!e)return;let{onresumptiontoken:n,replayMessageId:i}=r,o;s(async()=>{var l,c,u,d;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new KY).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,n?.(m.id)),!m.event||m.event==="message")try{let g=Jb.parse(JSON.parse(m.data));i!==void 0&&Y6(g)&&(g.id=i),(l=this.onmessage)===null||l===void 0||l.call(this,g)}catch(g){(c=this.onerror)===null||c===void 0||c.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:n,replayMessageId:i},0)}catch(m){(d=this.onerror)===null||d===void 0||d.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new zd("No auth provider");if(await eE(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new zd("Failed to authorize")}async close(){var e,r;(e=this._abortController)===null||e===void 0||e.abort(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e,r){var n,i,o;try{let{resumptionToken:a,onresumptiontoken:l}=r||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:_Y(e)?e.id:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let c=await this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:c,body:JSON.stringify(e),signal:(n=this._abortController)===null||n===void 0?void 0:n.signal},d=await fetch(this._url,u),p=d.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!d.ok){if(d.status===401&&this._authProvider){if(await eE(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new zd;return this.send(e)}let y=await d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${y}`)}if(d.status===202){oYe(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=d.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let y=await d.json(),v=Array.isArray(y)?y.map(b=>Jb.parse(b)):[Jb.parse(y)];for(let b of v)(i=this.onmessage)===null||i===void 0||i.call(this,b)}else throw new nN(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,r;if(this._sessionId)try{let n=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:n,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new nN(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(n){throw(r=this.onerror)===null||r===void 0||r.call(this,n),n}}};var XY=class extends Xb{constructor(r,n,i){super(r,n,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(r){return new JY(new URL(r.url),r)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(J6,r=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)}),this.mcp.setNotificationHandler(K6,r=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(xy)})}};f();var ZY=class extends Rb{static{s(this,"McpLanguageModelTool")}constructor(e,r){super({...e,toolProvider:{id:e.serverName,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=r}prepareInvocation(e,r){let n={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:n}}async invoke(e,r,n){return await this.invoker(r.input)}async invokeConfirmation(e,r,n){if(n.isCancellationRequested)throw new Fa;let i={name:this.name,title:r.title,message:r.message,input:r.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:r.roundId,toolCallId:r.toolCallId,annotations:r.annotations};try{return await e.ctx.get(iA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var cKe=je(Sa());var eK=class t extends H0{constructor(r){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.ctx=r}static{s(this,"CLSMCPManager")}static{this.notificationType=new cKe.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(r){await this.clearAllServers();for(let n of Object.keys(r))await this.addServer({name:n,...r[n]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(r,n,i){let o=this.getTool(r,n);if(!o){Oo.error(this.ctx,`Not found MCP ${r} server ${n} tool`);return}o._status=i,i==="enabled"?this.ctx.get(su).getToolById(`${r}.${n}`)||this.registerTool(r,o):this.unregisterTool(r,n)}async callTool(r,n,i){let o=this.MCPServersMap.get(r);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(n,i)}throw new Error(`MCP server ${r} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(r,n){let o=this.getAllTools().find(a=>a.name===r)?.tools;return!o||o.length===0?null:o.find(a=>a.name===n)||null}async getAndCacheAllTools(){let r=[];for(let n of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(n);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(n,l);c&&(a._status=c)}),r.push({name:n,status:i.status,tools:o})}else i.status==="error"?r.push({name:n,status:i.status,tools:[],error:i.error}):r.push({name:n,status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${n}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Oo.error(this.ctx,a),await LA(this.ctx,{message:a,server:n}),r.push({name:n,status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=r}getToolStatus(r,n){let i=this.getTool(r,n);return i?i._status:null}async addServer(r){try{await du(this.ctx,{message:`Starting server ${r.name}`,server:r.name}),this.MCPServersMap.set(r.name,{status:"stopped",server:null});let n;r.type==="sse"?(n=new jY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):"url"in r?(n=new XY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)):(n=new YY(this.ctx,r.name,r.version||"1.0.0"),await n.connect(r)),n.getEmitter().on(xy,()=>{this.updateToolsList()}),this.MCPServersMap.set(r.name,{status:"running",server:n}),await du(this.ctx,{message:"Connection state: Running",server:r.name})}catch(n){if(Oo.error(this.ctx,`Error initializing MCP server ${r.name}:`,n),n instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=n.message.match(o);if(a&&"url"in r&&r.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let l=`${a[1]} status sending message to ${r.url}, will attempt to fall back to legacy SSE`;Oo.info(this.ctx,l),du(this.ctx,{message:l,server:r.name});let c={...r,type:"sse"};return await this.addServer(c)}}let i=n instanceof Error?`message: ${n.message} stack: ${n.stack}`:String(n);await LA(this.ctx,{message:i,server:r.name}),this.MCPServersMap.set(r.name,{status:"error",server:null,error:i}),this.ctx.get(za).showWarningMessageOnlyOnce(`${r.name}.initialize`,`Failed to initialize MCP server '${r.name}'. Please check the logs for more details.`)}}async notifyClient(){let r=this.getAllTools();await this.ctx.get(yr).connection.sendNotification(t.notificationType,{servers:r})}registerTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i)this.registerTool(n,o)}}registerTool(r,n){let{name:i,description:o,inputSchema:a,_status:l,_nameForModel:c,annotations:u}=n;Oo.debug(this.ctx,"register MCP Tool:",{...n}),l!=="disabled"&&this.ctx.get(su).registerTool(new ZY({serverName:r,name:c,displayName:i,description:o||"",displayDescription:o||"",inputSchema:a,annotations:u},d=>(Oo.debug(this.ctx,"copilot MCP Invoker:",r,i,d),this.callTool(r,i,d))))}unregisterAllTools(){for(let r of this.cachedMCPServerTools){let{name:n,tools:i}=r;for(let o of i){let{name:a}=o;this.unregisterTool(n,a)}}}unregisterTool(r,n){this.ctx.get(su).unregisterTool(`${r}.${n}`)}async clearAllServers(){this.unregisterAllTools();for(let r of this.MCPServersMap.keys()){let{status:n,server:i}=this.MCPServersMap.get(r);n==="running"&&i&&(await du(this.ctx,{message:`Stopping server ${r}`,server:r}),i.getEmitter().removeAllListeners(xy),await i.cleanup())}this.MCPServersMap.clear()}};f();var uKe=je(Sa());var tK=class t extends Jm{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new uKe.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(yr).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var nK=je(Sa());var PVt=new nK.ProtocolRequestType("copilot/showMessageRequest"),NVt=new nK.ProtocolNotificationType("copilot/showMessage"),rK=class extends iR{constructor(r){super();this.ctx=r}static{s(this,"CopilotMessageSender")}async sendMessageNotification(r){return this.ctx.get(yr).connection.sendNotification(NVt,r)}async sendMessageRequest(r){let n=this.ctx.get(yr).connection,i;try{i=await n.sendRequest(PVt,r)}catch(l){throw new Error(`Request copilot/showMessageRequest failed with message: ${v6(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var LVt=new _t("fetcher"),FVt="https://default.exp-tas.com/",iK=class extends on{constructor(r,n,i,o){super();this.ctx=r;this.defaultFetcher=n;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(r,n){try{return await this.defaultFetcher.fetch(r,n)}catch(i){if(Lc(i)||`${r}/`.startsWith(FVt))throw i;LVt.info(this.ctx,`Request to <${r}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(r,n);return this.onFallbackSuccess(),o}}set proxySettings(r){this.defaultFetcher.proxySettings=r}get proxySettings(){return this.defaultFetcher.proxySettings}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}makeAbortController(){return this.defaultFetcher.makeAbortController()}};var dKe=new _t("fetcher"),oK=class extends on{constructor(r,n=new gk(r),i=new Ck(r)){super();this.ctx=r;this.helixFetcher=n;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new iK(r,n,i,()=>{dKe.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),r.get(Fy).once(()=>{this.updateFetcher()}),r.get(X0).onConfigChange(ft.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Xr(r,ft.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Ho).getCapabilities().fetch??!1}updateFetcher(){let r,n;if(!this.editorFetcherCapability)n="Using Helix fetcher, editor does not have fetch capability.",r=this.helixFetcher;else if(this.fetchStrategy==="client")n="Using editor fetcher, fetch strategy set to client.",r=this.editorFetcher;else if(this.fetchStrategy==="native")n="Using Helix fetcher, fetch strategy set to native.",r=this.helixFetcher;else{let i=Xr(this.ctx,ft.DebugUseEditorFetcher);i?.toString()==="true"?(n="Using editor fetcher, debug flag is enabled.",r=this.editorFetcher):i?.toString()==="false"?(n="Using Helix fetcher, debug flag is disabled.",r=this.helixFetcher):(n="Editor fetcher capability available, will fallback if needed.",r=this.fallbackFetcher)}this.currentFetcher!=r&&(dKe.debug(this.ctx,n),this.currentFetcher=r)}get name(){return this.currentFetcher.name}set proxySettings(r){this.helixFetcher.proxySettings=r}get proxySettings(){return this.helixFetcher.proxySettings}set rejectUnauthorized(r){super.rejectUnauthorized=r,this.helixFetcher.rejectUnauthorized=r}get rejectUnauthorized(){return super.rejectUnauthorized}fetch(r,n){return this.currentFetcher.fetch(r,n)}disconnectAll(){return this.currentFetcher.disconnectAll()}makeAbortController(){return this.currentFetcher.makeAbortController()}};f();var sK=class extends za{constructor(r){super();this.ctx=r}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(yr).connection}showWarningMessage(r,...n){return this.connection.window.showWarningMessage(r,...n)}};f();f();var fKe=je(require("crypto")),pKe=require("os");var MVt=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function QVt(t){let e=t.replace(/-/g,":").toLowerCase();return!MVt.has(e)}s(QVt,"validateMacAddress");function OVt(){let t=(0,pKe.networkInterfaces)();for(let e in t){let r=t[e];if(r){for(let{mac:n}of r)if(QVt(n))return n}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(OVt,"getMac");var Ohe;function UVt(){try{let t=OVt();return fKe.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(UVt,"getMacMachineId");function mKe(){return Ohe||(Ohe=UVt()||sr()),Ohe}s(mKe,"getMachineId");var qVt=sr()+Date.now(),hKe=new Bs(qVt,mKe());f();f();var iN=je(require("node:process"),1),Jhe=require("node:buffer"),Xhe=je(require("node:path"),1),NKe=require("node:url"),LKe=je(require("node:util"),1),Zhe=je(require("node:child_process"),1),dw=je(require("node:fs/promises"),1);f();var Hhe=je(require("node:process"),1),yKe=je(require("node:os"),1),CKe=je(require("node:fs"),1);f();var gKe=je(require("node:fs"),1);f();var qhe=je(require("node:fs"),1);var Uhe;function WVt(){try{return qhe.default.statSync("/.dockerenv"),!0}catch{return!1}}s(WVt,"hasDockerEnv");function GVt(){try{return qhe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s(GVt,"hasDockerCGroup");function Whe(){return Uhe===void 0&&(Uhe=WVt()||GVt()),Uhe}s(Whe,"isDocker");var Ghe,HVt=s(()=>{try{return gKe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function Fk(){return Ghe===void 0&&(Ghe=HVt()||Whe()),Ghe}s(Fk,"isInsideContainer");var AKe=s(()=>{if(Hhe.default.platform!=="linux")return!1;if(yKe.default.release().toLowerCase().includes("microsoft"))return!Fk();try{return CKe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Fk():!1}catch{return!1}},"isWsl"),Mk=Hhe.default.env.__IS_WSL_TEST__?AKe:AKe();f();function uw(t,e,r){let n=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=r();return n(i),i},set(i){n(i)}}),t}s(uw,"defineLazyProperty");f();var SKe=require("node:util"),lK=je(require("node:process"),1),RKe=require("node:child_process");f();var xKe=require("node:util"),vKe=je(require("node:process"),1),bKe=require("node:child_process");var jVt=(0,xKe.promisify)(bKe.execFile);async function jhe(){if(vKe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await jVt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(jhe,"defaultBrowserId");f();f();var EKe=je(require("node:process"),1),IKe=require("node:util"),Vhe=require("node:child_process");var VVt=(0,IKe.promisify)(Vhe.execFile);async function TKe(t,{humanReadableOutput:e=!0}={}){if(EKe.default.platform!=="darwin")throw new Error("macOS only");let r=e?[]:["-ss"],{stdout:n}=await VVt("osascript",["-e",t,r]);return n.trim()}s(TKe,"runAppleScript");async function $he(t){return TKe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s($he,"bundleName");f();var wKe=require("node:util"),_Ke=require("node:child_process");var $Vt=(0,wKe.promisify)(_Ke.execFile),zVt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},aK=class extends Error{static{s(this,"UnknownBrowserError")}};async function zhe(t=$Vt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),r=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!r)throw new aK(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:n}=r.groups,i=zVt[n];if(!i)throw new aK(`Unknown browser ID: ${n}`);return i}s(zhe,"defaultBrowser");var YVt=(0,SKe.promisify)(RKe.execFile),KVt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Yhe(){if(lK.default.platform==="darwin"){let t=await jhe();return{name:await $he(t),id:t}}if(lK.default.platform==="linux"){let{stdout:t}=await YVt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:KVt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(lK.default.platform==="win32")return zhe();throw new Error("Only macOS, Linux, and Windows are supported")}s(Yhe,"defaultBrowser");var JVt=LKe.default.promisify(Zhe.default.execFile),Khe=Xhe.default.dirname((0,NKe.fileURLToPath)(importMetaUrlShim)),kKe=Xhe.default.join(Khe,"xdg-open"),{platform:Qk,arch:BKe}=iN.default,XVt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let r="/etc/wsl.conf",n=!1;try{await dw.default.access(r,dw.constants.F_OK),n=!0}catch{}if(!n)return t;let i=await dw.default.readFile(r,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),FKe=s(async()=>`${await XVt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function ZVt(){let t=await FKe(),r=Jhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:n}=await JVt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",r],{encoding:"utf8"}),i=n.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(ZVt,"getWindowsDefaultBrowserFromWsl");var DKe=s(async(t,e)=>{let r;for(let n of t)try{return await e(n)}catch(i){r=i}throw r},"pTryEach"),cK=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return DKe(t.app,l=>cK({...t,app:l}));let{name:e,arguments:r=[]}=t.app??{};if(r=[...r],Array.isArray(e))return DKe(e,l=>cK({...t,app:{name:l,arguments:r}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=Mk?await ZVt():await Yhe();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&r.push(c[d]),cK({...t,app:{name:Ok[d],arguments:r}})}throw new Error(`${u.name} is not supported as a default browser`)}let n,i=[],o={};if(Qk==="darwin")n="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(Qk==="win32"||Mk&&!Fk()&&!e){n=Mk?await FKe():`${iN.default.env.SYSTEMROOT||iN.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),Mk||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&r.push(t.target)):t.target&&l.push(`"${t.target}"`),r.length>0&&(r=r.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",r.join(","))),t.target=Jhe.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)n=e;else{let l=!Khe||Khe==="/",c=!1;try{await dw.default.access(kKe,dw.constants.X_OK),c=!0}catch{}n=iN.default.versions.electron??(Qk==="android"||l||!c)?"xdg-open":kKe}r.length>0&&i.push(...r),t.wait||(o.stdio="ignore",o.detached=!0)}Qk==="darwin"&&r.length>0&&i.push("--args",...r),t.target&&i.push(t.target);let a=Zhe.default.spawn(n,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),e$t=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return cK({...e,target:t})},"open");function PKe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[BKe]:e}=t;if(!e)throw new Error(`${BKe} is not supported`);return e}s(PKe,"detectArchBinary");function ege({[Qk]:t},{wsl:e}){if(e&&Mk)return PKe(e);if(!t)throw new Error(`${Qk} is not supported`);return PKe(t)}s(ege,"detectPlatformBinary");var Ok={};uw(Ok,"chrome",()=>ege({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));uw(Ok,"firefox",()=>ege({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));uw(Ok,"edge",()=>ege({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));uw(Ok,"browser",()=>"browser");uw(Ok,"browserPrivate",()=>"browserPrivate");var uK=e$t;var dK=class extends pc{constructor(r,n=new tge){super();this.ctx=r;this.fallback=n}static{s(this,"AgentUrlOpener")}async open(r){let n=this.ctx.get(yr);if(!(n.clientCapabilities?.window?.showDocument?.support&&(await n.connection.window.showDocument({uri:r,external:!0})).success))return this.fallback.open(r)}},tge=class extends pc{static{s(this,"SpawnUrlOpener")}async open(e){await uK(e)}};f();f();var fK=class extends iV{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(lh).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(lh).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(lh).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let n=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(n.length){let a=n.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var pK=class extends iu{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new fK(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Ho).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function MKe(t){let e=new X0(process.env),r=nMe(e);r.set(X0,e),r.set(Fy,new Fy),r.set(on,new oK(r)),r.set(ta,new ta(r)),Kpe(r,{});let n=$Oe();r.set(Ec,n);let i=new O6(r);r.set(Qr,i),r.set(O6,i);let o=new K8(r,n);r.set(K8,o),r.set(mn,new mn(o,i,process.env)),r.set(e2,new e2),r.set(Bs,hKe),r.set(fn,new PV),r.set(WT,uze()),r.set(is,new is),r.set(lo,Dze),r.set(y2,new iY(r)),r.set(iu,new pK(r)),r.set(lh,new lh(r)),r.set(Ql,new Ql),r.set(Da,SU(r,Rje)),r.set(rp,new rp(r)),r.set(wg,new b5),ZOe(r),oV(r),AUe(r),oRe(r),r.set(yr,new yr(r,t)),r.set(za,new sK(r)),r.set(iR,new rK(r)),r.set(pc,new dK(r)),r.set(Ki,new yY(r)),r.set(q6,new q6(r));let a=new Vb(r);return r.set(Rr,a),r.set(Vb,a),r.set(Fl,new nR(r,process.env)),r.set(Kc,new Kc(r)),Tze(r),gMe(r),r.set(Yu,new Yu),r.set(qb,new qb),r.set(ph,new ph),r.set(I0,new oY),r.set(DA,new DA),r.set(Bg,new wv(r)),r.set(sh,new sh(r)),r.set(Cy,new Cy(r)),r.set(il,new il(r)),r.set(bc,new hY(r)),r.set(sb,new AY(r)),r.set(iA,new gY(r)),r.set(su,new su(r)),r.set(Dy,new Dy(r)),r.set(ah,new ah(r)),r.set(H0,new eK(r)),r.set(Jm,new tK(r)),r.set(oA,new oA),r}s(MKe,"createLanguageServerContext");f();var rge=require("events"),oN=je(require("fs"));var hK=je(Sa());f();var OKe=je(require("fs")),UKe=je(require("http")),Uk=je(require("path"));var mK=class{constructor(e,r){this.port=e;let n;this.server=UKe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":r.on("read",l=>{QKe(o,JSON.stringify(l))});return;case"/stdout":r.on("write",l=>{QKe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;Uk.basename(__dirname)!=="debug"&&(a=Uk.dirname(__dirname)),n??=OKe.readFileSync(Uk.join(a,"dist","debugServer.html")).toString(),o.write(n),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function QKe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(QKe,"writeData");var nge=class extends hK.AbstractMessageWriter{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageWriter")}async write(r){return this.ev.emit("write",r),this.delegate.write(r)}end(){this.ev.emit("end"),this.delegate.end()}},ige=class extends hK.AbstractMessageReader{constructor(r,n){super();this.delegate=r;this.ev=n}static{s(this,"DebugMessageReader")}listen(r){return this.delegate.listen(n=>{this.ev.emit("read",n),r(n)})}};async function qKe(t,e,r){let n,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){n??=new rge.EventEmitter;let l=new mK(i,n).listen();i===0&&await uK(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=oN.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=oN.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&oN.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");n??=new rge.EventEmitter,n.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),n.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return n&&(e=new ige(e,n),r=new nge(r,n)),[e,r]}s(qKe,"wrapTransports");async function jKe(){let t=X_e(process.argv.slice(2)).version(new po().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),r,n;e["node-ipc"]?(r=new Lp.IPCMessageReader(process),n=new Lp.IPCMessageWriter(process)):e.stdio?(r=new Lp.StreamMessageReader(process.stdin),n=new Lp.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await WKe.mkdtemp(GKe.default.tmpdir()+"/github-copilot-"));let i=(0,Lp.createConnection)(Lp.ProposedFeatures.all,...await qKe(process.env,r,n)),o=MKe(i);console=ewe(o);let a=o.get(yr);r.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(jKe,"main");HKe.isMainThread?require.main===module&&jKe():XTe()&&ZTe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
